import{c as x,L as a,B as i,D as e,N as r,E as d,F as m,M as b,O as D}from"./vendor-vue-g7iCcTkf.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";const I={class:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col relative animate-fadeIn overflow-hidden"},P={class:"bg-gradient-to-r from-slate-700 to-slate-800 text-white px-6 py-4 flex items-center justify-between shrink-0"},M={class:"text-slate-300 text-sm mt-0.5"},S={class:"overflow-y-auto flex-1 p-6 space-y-5"},O={class:"bg-slate-50 rounded-xl p-4"},j={class:"grid grid-cols-2 gap-x-4 gap-y-2 text-sm"},C={class:"text-slate-500"},L={class:"text-slate-800 font-medium text-right"},B={key:0,class:"bg-violet-50 rounded-xl p-4"},F={class:"space-y-1.5"},$={class:"font-medium text-slate-700"},A={class:"font-semibold text-violet-800"},V={key:1,class:"bg-amber-50 rounded-xl p-4"},T={class:"flex justify-between text-sm"},E={class:"font-semibold text-amber-900"},K={key:0,class:"mt-1.5 text-sm text-slate-600"},R={key:2,class:"bg-emerald-50 rounded-xl p-4"},q={class:"text-lg font-bold text-emerald-900"},W={key:0,class:"mt-2 space-y-1 text-sm"},z={class:"font-medium"},G={key:3,class:"bg-sky-50 rounded-xl p-4"},H={class:"overflow-x-auto rounded-lg border border-sky-200 bg-white"},J={class:"min-w-full text-sm"},Q={class:"px-3 py-2"},U={class:"px-3 py-2 font-medium text-slate-800"},X={class:"px-3 py-2 text-right"},Y={class:"px-3 py-2 text-right"},Z={class:"px-3 py-2 text-right font-medium"},tt={key:4,class:"bg-blue-50 rounded-xl p-4"},et={class:"flex flex-wrap gap-2"},st={class:"inline-flex items-center px-3 py-1.5 rounded-lg bg-blue-100 text-blue-900 font-medium text-sm"},ot={key:0,class:"inline-flex items-center px-3 py-1.5 rounded-lg bg-blue-200/70 text-blue-900 text-sm"},nt={key:1,class:"text-slate-600 text-sm"},rt={__name:"OrderDetailModal",props:{order:{type:Object,required:!0}},setup(n){const c=n,y=["nomor","paid_number","nama_outlet","kode_outlet","table","waiters","mode","pax","created_at","total","discount","service","grand_total","status","member_name"];function g(s){return{created_at:"Waktu",waiters:"Waiter",mode:"Mode",nomor:"No. Order",paid_number:"Paid Number",table:"Meja",pax:"Pax",total:"Subtotal",discount:"Diskon",cashback:"Cashback",dpp:"DPP",pb1:"PB1",service:"Service",grand_total:"Grand Total",status:"Status",kode_outlet:"Kode Outlet",nama_outlet:"Nama Outlet",member_name:"Member"}[s]||s.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase())}function h(s,t){return s.match(/total|discount|cashback|service|pb1|grand|dpp|rounding/i)&&typeof t=="number"?t.toLocaleString("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}):s==="created_at"?t?new Date(t).toLocaleString("id-ID"):"-":t===""||t==null?"-":t}function u(s){if(typeof s=="number")return s.toLocaleString("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0});if(s==null||s==="")return"-";const t=Number(s);return isNaN(t)?String(s):t.toLocaleString("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0})}function k(s){const t=Number(s.amount)||0,o=Number(s.change)||0;return t-o}function _(s){return!s||typeof s!="object"?!0:!s.name&&!s.code&&s.id==null&&s.value==null}const v=x(()=>{const s=c.order.manual_discount_amount;return s!=null&&String(s).replace(/\D/g,"")!==""&&Number(s)>0}),f=x(()=>{const s=parseInt(c.order.discount,10)||0,t=parseFloat(c.order.manual_discount_amount)||0;return s>0&&t>0?Math.max(s,t):s+t}),w=x(()=>f.value>0),p=x(()=>{const s=c.order.promo_discount_info;if(!s||typeof s!="string")return[];const t=s.trim();if(!t||t[0]!=="{"&&t[0]!=="[")return[];try{const o=JSON.parse(s);if(o&&Array.isArray(o.promos))return o.promos.map(l=>({promo_name:l.promo_name||l.name||"Promo",discount_amount:l.discount_amount??l.amount??0}))}catch{return[]}return[]});return(s,t)=>(i(),a("div",{class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:t[1]||(t[1]=D(o=>s.$emit("close"),["self"]))},[e("div",I,[e("div",P,[e("div",null,[t[2]||(t[2]=e("h2",{class:"text-lg font-bold"},"Detail Order",-1)),e("p",M,r(n.order.nomor)+r(n.order.paid_number?` · ${n.order.paid_number}`:""),1)]),e("button",{type:"button",onClick:t[0]||(t[0]=o=>s.$emit("close")),class:"p-2 rounded-lg text-slate-300 hover:bg-white/10 hover:text-white transition","aria-label":"Tutup"},t[3]||(t[3]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",S,[e("section",O,[t[4]||(t[4]=e("h3",{class:"text-sm font-semibold text-slate-600 uppercase tracking-wide mb-3"},"Info Transaksi",-1)),e("div",j,[(i(),a(m,null,b(y,o=>(i(),a(m,{key:o},[n.order[o]!==void 0&&n.order[o]!==null?(i(),a(m,{key:0},[e("span",C,r(g(o)),1),e("span",L,r(h(o,n.order[o])),1)],64)):d("",!0)],64))),64))])]),n.order.payments&&n.order.payments.length?(i(),a("section",B,[t[5]||(t[5]=e("h3",{class:"text-sm font-semibold text-violet-700 uppercase tracking-wide mb-2"},"Pembayaran",-1)),e("div",F,[(i(!0),a(m,null,b(n.order.payments,(o,l)=>(i(),a("div",{key:l,class:"flex justify-between items-center text-sm bg-white/60 rounded-lg px-3 py-2"},[e("span",$,r(o.payment_code||o.payment_type||"Payment"),1),e("span",A,r(u(k(o))),1)]))),128))])])):d("",!0),v.value?(i(),a("section",V,[t[7]||(t[7]=e("h3",{class:"text-sm font-semibold text-amber-800 uppercase tracking-wide mb-2"},"Diskon Manual",-1)),e("div",T,[t[6]||(t[6]=e("span",{class:"text-slate-600"},"Nominal",-1)),e("span",E,r(u(n.order.manual_discount_amount)),1)]),n.order.manual_discount_reason?(i(),a("div",K," Alasan: "+r(n.order.manual_discount_reason),1)):d("",!0)])):d("",!0),w.value?(i(),a("section",R,[t[8]||(t[8]=e("h3",{class:"text-sm font-semibold text-emerald-800 uppercase tracking-wide mb-1"},"Total Diskon Promo",-1)),e("p",q,r(u(f.value)),1),p.value.length?(i(),a("div",W,[(i(!0),a(m,null,b(p.value,(o,l)=>(i(),a("div",{key:l,class:"flex justify-between text-slate-700"},[e("span",null,r(o.promo_name),1),e("span",z,r(u(o.discount_amount)),1)]))),128))])):d("",!0)])):d("",!0),n.order.items&&n.order.items.length?(i(),a("section",G,[t[10]||(t[10]=e("h3",{class:"text-sm font-semibold text-sky-800 uppercase tracking-wide mb-3"},"Item Pesanan",-1)),e("div",H,[e("table",J,[t[9]||(t[9]=e("thead",null,[e("tr",{class:"bg-sky-100 text-sky-900"},[e("th",{class:"px-3 py-2.5 text-left font-semibold"},"No"),e("th",{class:"px-3 py-2.5 text-left font-semibold"},"Nama Item"),e("th",{class:"px-3 py-2.5 text-right font-semibold"},"Qty"),e("th",{class:"px-3 py-2.5 text-right font-semibold"},"Harga"),e("th",{class:"px-3 py-2.5 text-right font-semibold"},"Subtotal")])],-1)),e("tbody",null,[(i(!0),a(m,null,b(n.order.items,(o,l)=>(i(),a("tr",{key:o.id||l,class:"border-t border-sky-100 hover:bg-sky-50/50"},[e("td",Q,r(l+1),1),e("td",U,r(o.item_name||"-"),1),e("td",X,r(o.qty??0),1),e("td",Y,r(u(o.price??0)),1),e("td",Z,r(u(o.subtotal??0)),1)]))),128))])])])])):d("",!0),n.order.promo&&!_(n.order.promo)?(i(),a("section",tt,[t[11]||(t[11]=e("h3",{class:"text-sm font-semibold text-blue-800 uppercase tracking-wide mb-2"},"Promo Diterapkan",-1)),e("div",et,[e("span",st,r(n.order.promo.name||n.order.promo.code||"Promo"),1),n.order.promo.code?(i(),a("span",ot,r(n.order.promo.code),1)):d("",!0),n.order.promo.type?(i(),a("span",nt,r(n.order.promo.type)+" "+r(n.order.promo.value!=null?`· ${n.order.promo.value}`:""),1)):d("",!0)])])):d("",!0)])])]))}},dt=N(rt,[["__scopeId","data-v-0c9d29df"]]);export{dt as default};
