import{c as K,r as i,A as M,B as o,C as u,D as t,x as y,G as x,Q as v,S as h,L as r,E as S,H as c,Z as P,J as D,F,M as N,N as a,I,l as C,W as V}from"./vendor-vue-g7iCcTkf.js";import{A as W}from"./AppLayout-D6FAfGlz.js";import{S as T}from"./app-dzBjFUgD.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CUUHZNnG.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const q={class:"min-h-screen bg-gradient-to-br from-slate-50 via-pink-50/30 to-slate-50"},z={class:"max-w-7xl mx-auto py-8 px-4 sm:px-6"},J={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8"},Q={class:"bg-white/80 backdrop-blur rounded-2xl border border-slate-200/60 shadow-sm p-5 mb-6"},Y={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4"},Z={class:"lg:col-span-2"},$={class:"relative"},X={key:0},tt=["value"],et={key:1,class:"flex flex-col justify-end"},st={class:"py-2.5 text-sm text-slate-700"},lt={class:"bg-white rounded-2xl border border-slate-200/60 shadow-sm overflow-hidden"},at={class:"overflow-x-auto"},ot={class:"w-full"},rt={class:"divide-y divide-slate-100"},nt={key:0},it={colspan:"11",class:"px-5 py-16 text-center"},dt={class:"flex flex-col items-center gap-4"},ut={class:"px-5 py-4 text-sm text-slate-500"},xt={class:"px-5 py-4"},ct={class:"font-medium text-slate-800"},mt={class:"px-5 py-4 text-sm text-slate-600"},pt={class:"px-5 py-4"},ft={class:"text-sm text-slate-700"},gt={class:"text-xs text-slate-500"},bt={class:"px-5 py-4 text-sm text-slate-600"},yt={class:"px-5 py-4 text-sm font-medium text-slate-700"},vt={class:"px-5 py-4"},ht=["title"],kt={class:"px-5 py-4"},wt={class:"px-5 py-4"},_t={class:"px-5 py-4"},St={class:"text-sm text-slate-700"},Dt={class:"text-xs text-slate-500"},Ct={class:"px-5 py-4 text-right"},Tt={class:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition"},Bt=["onClick","disabled"],Ft={key:0,class:"fa-solid fa-spinner fa-spin text-sm"},Nt={key:1,class:"fa-solid fa-trash text-sm"},Kt={__name:"Index",props:{reservations:{type:Array,required:!0,default:()=>[]},outlets:{type:Array,default:()=>[]},can_choose_outlet:{type:Boolean,default:!0},search:String,outlet_id:[String,Number],status:String,dateFrom:String,dateTo:String},setup(k){const n=k,B=K(()=>n.can_choose_outlet!==!1),m=i(n.search||""),p=i(n.outlet_id??""),f=i(n.status||""),g=i(n.dateFrom||""),b=i(n.dateTo||""),w=i(n.outlets||[]),d=i(null);function j(l){return l?new Date(l).toLocaleDateString("id-ID",{weekday:"short",day:"numeric",month:"short",year:"numeric"}):"–"}function A(l){return l?new Date(l).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):"–"}function L(l){return l?new Date(l).toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"–"}function R(l){return l==null||l===""?"–":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(Number(l))}function E(l){switch(l){case"confirmed":return"bg-emerald-100 text-emerald-800";case"cancelled":return"bg-rose-100 text-rose-800";default:return"bg-amber-100 text-amber-800"}}function O(l){switch(l){case"confirmed":return"Confirmed";case"cancelled":return"Cancelled";default:return"Pending"}}async function U(l){(await T.fire({title:"Hapus Reservasi?",text:"Data reservasi akan dihapus. Lanjutkan?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal",confirmButtonColor:"#e11d48"})).isConfirmed&&(d.value=l,V.delete(route("reservations.destroy",{reservation:l}),{onSuccess:()=>{d.value=null,T.fire({title:"Berhasil",text:"Reservasi dihapus.",icon:"success"})},onError:()=>{d.value=null,T.fire({title:"Error",text:"Gagal menghapus reservasi",icon:"error"})}}))}function _(){V.get(route("reservations.index"),{search:m.value,outlet_id:p.value||void 0,status:f.value,dateFrom:g.value,dateTo:b.value},{preserveState:!0,preserveScroll:!0})}function H(){m.value="",p.value=B.value?"":n.outlet_id??"",f.value="",g.value="",b.value="",_()}return(l,e)=>(o(),M(W,null,{default:u(()=>[t("div",q,[t("div",z,[t("div",J,[e[6]||(e[6]=t("div",null,[t("h1",{class:"text-3xl font-bold text-slate-800 tracking-tight flex items-center gap-3"},[t("span",{class:"flex items-center justify-center w-12 h-12 rounded-xl bg-gradient-to-br from-rose-500 to-pink-600 text-white shadow-lg shadow-pink-500/25"},[t("i",{class:"fa-solid fa-calendar-check text-xl"})]),x(" Reservasi ")]),t("p",{class:"mt-2 text-slate-500 text-sm"},"Kelola booking dan reservasi pelanggan")],-1)),y(v(h),{href:l.route("reservations.create"),class:"inline-flex items-center justify-center gap-2 px-5 py-3 rounded-xl font-semibold text-white bg-gradient-to-r from-rose-500 to-pink-600 hover:from-rose-600 hover:to-pink-700 shadow-lg shadow-pink-500/25 hover:shadow-pink-500/40 transition-all duration-200"},{default:u(()=>e[5]||(e[5]=[t("i",{class:"fa-solid fa-plus text-sm"},null,-1),x(" Buat Reservasi ")])),_:1},8,["href"])]),t("div",Q,[e[18]||(e[18]=t("div",{class:"flex items-center gap-2 mb-4"},[t("i",{class:"fa-solid fa-filter text-rose-500"}),t("span",{class:"font-semibold text-slate-700"},"Filter")],-1)),t("div",Y,[t("div",Z,[e[8]||(e[8]=t("label",{class:"block text-xs font-medium text-slate-500 mb-1"},"Cari nama",-1)),t("div",$,[e[7]||(e[7]=t("i",{class:"fa-solid fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"},null,-1)),c(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),type:"text",placeholder:"Cari nama reservasi...",class:"w-full pl-9 pr-4 py-2.5 rounded-xl border border-slate-200 focus:border-rose-400 focus:ring-2 focus:ring-rose-400/20 outline-none transition text-sm",onKeyup:P(_,["enter"])},null,544),[[D,m.value]])])]),B.value?(o(),r("div",X,[e[10]||(e[10]=t("label",{class:"block text-xs font-medium text-slate-500 mb-1"},"Outlet",-1)),c(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>p.value=s),class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-rose-400 focus:ring-2 focus:ring-rose-400/20 outline-none transition text-sm bg-white"},[e[9]||(e[9]=t("option",{value:""},"Semua Outlet",-1)),(o(!0),r(F,null,N(w.value,s=>(o(),r("option",{key:s.id,value:s.id},a(s.name),9,tt))),128))],512),[[I,p.value]])])):w.value.length===1?(o(),r("div",et,[e[11]||(e[11]=t("label",{class:"block text-xs font-medium text-slate-500 mb-1"},"Outlet",-1)),t("span",st,a(w.value[0].name),1)])):S("",!0),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-xs font-medium text-slate-500 mb-1"},"Tanggal dari",-1)),c(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>g.value=s),class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-rose-400 focus:ring-2 focus:ring-rose-400/20 outline-none transition text-sm"},null,512),[[D,g.value]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-xs font-medium text-slate-500 mb-1"},"Tanggal sampai",-1)),c(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=s=>b.value=s),class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-rose-400 focus:ring-2 focus:ring-rose-400/20 outline-none transition text-sm"},null,512),[[D,b.value]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-xs font-medium text-slate-500 mb-1"},"Status",-1)),c(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>f.value=s),class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-rose-400 focus:ring-2 focus:ring-rose-400/20 outline-none transition text-sm bg-white"},e[14]||(e[14]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"confirmed"},"Confirmed",-1),t("option",{value:"cancelled"},"Cancelled",-1)]),512),[[I,f.value]])])]),t("div",{class:"flex flex-wrap gap-2 mt-4"},[t("button",{onClick:_,class:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-rose-500 text-white text-sm font-medium hover:bg-rose-600 transition"},e[16]||(e[16]=[t("i",{class:"fa-solid fa-magnifying-glass"},null,-1),x(" Terapkan ")])),t("button",{onClick:H,class:"inline-flex items-center gap-2 px-4 py-2 rounded-xl border border-slate-200 text-slate-600 text-sm font-medium hover:bg-slate-50 transition"},e[17]||(e[17]=[t("i",{class:"fa-solid fa-rotate-left"},null,-1),x(" Reset ")]))])]),t("div",lt,[t("div",at,[t("table",ot,[e[24]||(e[24]=t("thead",null,[t("tr",{class:"bg-slate-50 border-b border-slate-200"},[t("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"No"),t("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Nama"),t("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Outlet"),t("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Tanggal & Waktu"),t("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Tamu"),t("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"DP"),t("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Sales"),t("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Area"),t("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Status"),t("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Dibuat oleh"),t("th",{class:"px-5 py-4 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Aksi")])],-1)),t("tbody",rt,[k.reservations.length?S("",!0):(o(),r("tr",nt,[t("td",it,[t("div",dt,[e[20]||(e[20]=t("span",{class:"flex items-center justify-center w-16 h-16 rounded-2xl bg-slate-100 text-slate-400"},[t("i",{class:"fa-solid fa-calendar-xmark text-2xl"})],-1)),e[21]||(e[21]=t("div",null,[t("p",{class:"font-medium text-slate-600"},"Belum ada reservasi"),t("p",{class:"text-sm text-slate-400 mt-1"},"Gunakan filter atau buat reservasi baru")],-1)),y(v(h),{href:l.route("reservations.create"),class:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-rose-500 text-white text-sm font-medium hover:bg-rose-600 transition"},{default:u(()=>e[19]||(e[19]=[t("i",{class:"fa-solid fa-plus"},null,-1),x(" Buat Reservasi ")])),_:1},8,["href"])])])])),(o(!0),r(F,null,N(k.reservations,(s,G)=>(o(),r("tr",{key:s.id,class:"hover:bg-rose-50/50 transition group"},[t("td",ut,a(G+1),1),t("td",xt,[t("span",ct,a(s.name),1)]),t("td",mt,a(s.outlet),1),t("td",pt,[t("div",ft,a(j(s.reservation_date)),1),t("div",gt,a(A(s.reservation_time)),1)]),t("td",bt,a(s.number_of_guests)+" orang",1),t("td",yt,a(s.dp!=null?R(s.dp):"–"),1),t("td",vt,[t("span",{class:C([s.from_sales?"bg-sky-100 text-sky-700":"bg-slate-100 text-slate-500","inline-flex items-center gap-1 px-2.5 py-1 rounded-lg text-xs font-medium"])},a(s.from_sales?"Dari Sales":"Bukan"),3),s.from_sales&&s.sales_user_name?(o(),r("p",{key:0,class:"text-xs text-slate-500 mt-1 truncate max-w-[120px]",title:s.sales_user_name},a(s.sales_user_name),9,ht)):S("",!0)]),t("td",kt,[t("span",{class:C([s.smoking_preference==="smoking"?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700","inline-flex px-2.5 py-1 rounded-lg text-xs font-medium"])},a(s.smoking_preference==="smoking"?"Smoking":"Non-Smoking"),3)]),t("td",wt,[t("span",{class:C([E(s.status),"inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-semibold"])},a(O(s.status)),3)]),t("td",_t,[t("div",St,a(s.created_by||"–"),1),t("div",Dt,a(L(s.created_at)),1)]),t("td",Ct,[t("div",Tt,[y(v(h),{href:l.route("reservations.show",{reservation:s.id}),class:"p-2 rounded-lg text-slate-500 hover:bg-slate-100 hover:text-slate-700 transition",title:"Detail"},{default:u(()=>e[22]||(e[22]=[t("i",{class:"fa-solid fa-eye text-sm"},null,-1)])),_:2},1032,["href"]),y(v(h),{href:l.route("reservations.edit",{reservation:s.id}),class:"p-2 rounded-lg text-amber-600 hover:bg-amber-50 transition",title:"Edit"},{default:u(()=>e[23]||(e[23]=[t("i",{class:"fa-solid fa-pen-to-square text-sm"},null,-1)])),_:2},1032,["href"]),t("button",{onClick:It=>U(s.id),disabled:d.value===s.id,class:"p-2 rounded-lg text-rose-600 hover:bg-rose-50 transition disabled:opacity-50",title:"Hapus"},[d.value===s.id?(o(),r("i",Ft)):(o(),r("i",Nt))],8,Bt)])])]))),128))])])])])])])]),_:1}))}};export{Kt as default};
