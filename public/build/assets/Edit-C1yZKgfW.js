import{r as f,A as F,B as p,C as w,D as l,N as C,G as x,O as L,x as a,l as c,L as h,E as y,H as O,J as M,W as V}from"./vendor-vue-g7iCcTkf.js";import{A as T}from"./AppLayout-D_GBiqpN.js";import{P as U}from"./PrimaryButton-BbBAD9SX.js";import{_}from"./TextInput-B7P_xVe4.js";import{_ as u,a as o}from"./InputLabel-Bg0AMQZ3.js";import{S as j}from"./app-D3yJLFoH.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DW6hwgWG.js";import"./vendor-charts-CuqD4wLC.js";const A={class:"max-w-4xl mx-auto py-8 px-4"},N={class:"flex justify-between items-center mb-6"},E={class:"text-2xl font-bold text-gray-800"},I={class:"bg-white rounded-lg shadow p-6"},R={key:0,class:"mt-4"},$=["src"],q={key:0,class:"mt-4"},G=["src"],W={key:0,class:"mt-2"},z=["href"],H={class:"flex justify-end gap-4"},ne={__name:"Edit",props:{brand:{type:Object,required:!0}},setup(g){const r=g,t=f({title:r.brand.title||"",slug:r.brand.slug||"",link_menu:r.brand.link_menu||"",menu_pdf:null,thumbnail:null,image:null,content:r.brand.content||""}),i=f({}),d=f(!1),b=f(r.brand.thumbnail_url||null),v=f(r.brand.image_url||null);function B(n){const e=n.target.files[0];if(e){t.value.thumbnail=e;const s=new FileReader;s.onload=m=>{b.value=m.target.result},s.readAsDataURL(e)}}function D(n){const e=n.target.files[0];if(e){t.value.image=e;const s=new FileReader;s.onload=m=>{v.value=m.target.result},s.readAsDataURL(e)}}function S(n){const e=n.target.files[0];e&&(t.value.menu_pdf=e)}function P(){d.value=!0;const n=new FormData;n.append("title",t.value.title),n.append("slug",t.value.slug),n.append("link_menu",t.value.link_menu||""),n.append("content",t.value.content||""),n.append("_method","PUT"),t.value.thumbnail&&n.append("thumbnail",t.value.thumbnail),t.value.image&&n.append("image",t.value.image),t.value.menu_pdf&&n.append("menu_pdf",t.value.menu_pdf),V.post(`/web-profile/brands/${r.brand.id}`,n,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{j.fire("Berhasil!","Brand berhasil diperbarui.","success")},onError:e=>{i.value=e||{},d.value=!1;let s="Gagal memperbarui brand. Silakan periksa form yang diisi.";if(e&&Object.keys(e).length>0){const m=Object.values(e).flat();m.length>0&&(s=m.join("<br>"))}j.fire({icon:"error",title:"Error!",html:s})},onFinish:()=>{d.value=!1}})}function k(){V.visit("/web-profile/brands")}return(n,e)=>(p(),F(T,{title:"Edit Brand"},{default:w(()=>[l("div",A,[l("div",N,[l("h1",E,"Edit Brand: "+C(g.brand.title),1),l("button",{onClick:k,class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"},e[4]||(e[4]=[l("i",{class:"fa-solid fa-arrow-left mr-2"},null,-1),x(" Back ")]))]),l("div",I,[l("form",{onSubmit:L(P,["prevent"]),class:"space-y-6"},[l("div",null,[a(u,{for:"title",value:"Title *"}),a(_,{id:"title",modelValue:t.value.title,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.title=s),type:"text",class:c(["mt-1 block w-full",{"border-red-500":i.value.title}]),required:""},null,8,["modelValue","class"]),a(o,{message:i.value.title,class:"mt-2"},null,8,["message"])]),l("div",null,[a(u,{for:"slug",value:"Slug *"}),a(_,{id:"slug",modelValue:t.value.slug,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.slug=s),type:"text",class:c(["mt-1 block w-full",{"border-red-500":i.value.slug}]),required:""},null,8,["modelValue","class"]),a(o,{message:i.value.slug,class:"mt-2"},null,8,["message"])]),l("div",null,[a(u,{for:"thumbnail",value:"Thumbnail Image"}),l("input",{id:"thumbnail",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",onChange:B},null,32),a(o,{message:i.value.thumbnail,class:"mt-2"},null,8,["message"]),e[5]||(e[5]=l("p",{class:"mt-1 text-sm text-gray-500"},"Leave empty to keep current image",-1)),b.value?(p(),h("div",R,[l("img",{src:b.value,alt:"Thumbnail preview",class:"w-64 h-48 object-cover rounded-lg border-2 border-gray-300"},null,8,$)])):y("",!0)]),l("div",null,[a(u,{for:"image",value:"Image (Optional)"}),l("input",{id:"image",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",onChange:D},null,32),a(o,{message:i.value.image,class:"mt-2"},null,8,["message"]),e[6]||(e[6]=l("p",{class:"mt-1 text-sm text-gray-500"},"Leave empty to keep current image",-1)),v.value?(p(),h("div",q,[l("img",{src:v.value,alt:"Image preview",class:"w-64 h-48 object-cover rounded-lg border-2 border-gray-300"},null,8,G)])):y("",!0)]),l("div",null,[a(u,{for:"link_menu",value:"Menu Link (Optional)"}),a(_,{id:"link_menu",modelValue:t.value.link_menu,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.link_menu=s),type:"url",class:c(["mt-1 block w-full",{"border-red-500":i.value.link_menu}]),placeholder:"https://example.com/menu"},null,8,["modelValue","class"]),a(o,{message:i.value.link_menu,class:"mt-2"},null,8,["message"])]),l("div",null,[a(u,{for:"menu_pdf",value:"Menu PDF (Optional)"}),l("input",{id:"menu_pdf",type:"file",accept:"application/pdf",class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",onChange:S},null,32),a(o,{message:i.value.menu_pdf,class:"mt-2"},null,8,["message"]),e[8]||(e[8]=l("p",{class:"mt-1 text-sm text-gray-500"},"Leave empty to keep current PDF",-1)),g.brand.menu_pdf_url?(p(),h("div",W,[l("a",{href:g.brand.menu_pdf_url,target:"_blank",class:"text-blue-600 hover:text-blue-800 text-sm"},e[7]||(e[7]=[l("i",{class:"fa-solid fa-file-pdf mr-2"},null,-1),x(" View Current PDF ")]),8,z)])):y("",!0)]),l("div",null,[a(u,{for:"content",value:"Content (Optional)"}),O(l("textarea",{id:"content","onUpdate:modelValue":e[3]||(e[3]=s=>t.value.content=s),rows:"6",class:c(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",{"border-red-500":i.value.content}])},null,2),[[M,t.value.content]]),a(o,{message:i.value.content,class:"mt-2"},null,8,["message"])]),l("div",H,[l("button",{type:"button",onClick:k,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"}," Cancel "),a(U,{disabled:d.value},{default:w(()=>[x(C(d.value?"Saving...":"Save Changes"),1)]),_:1},8,["disabled"])])],32)])])]),_:1}))}};export{ne as default};
