import{A as b,B as d,C as y,D as t,G as m,N as a,x as h,Q as v,S as D,L as c,E as w,F as C,M as B,W as _}from"./vendor-vue-g7iCcTkf.js";import{S as x}from"./app-CQcWanFv.js";import{A as k}from"./AppLayout-C22rYVZx.js";import{a as A}from"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DO0UW4jb.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const S={class:"max-w-6xl w-full mx-auto py-8 px-2"},L={class:"mb-6 flex justify-between items-center"},F={class:"text-gray-600 mt-1"},N={class:"flex gap-2"},R={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},V={class:"lg:col-span-2 space-y-6"},I={class:"bg-white rounded-xl shadow-lg p-6"},M={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},j={class:"text-sm font-semibold text-gray-900 mt-1"},P={class:"text-sm text-gray-900 mt-1"},Y={class:"text-sm text-gray-900 mt-1"},q={class:"text-sm text-gray-900 mt-1"},E={key:0,class:"bg-white rounded-xl shadow-lg p-6"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},T={class:"text-sm font-semibold text-gray-900 mt-1"},W={class:"text-sm font-semibold text-gray-900 mt-1"},$={class:"text-sm font-semibold text-gray-900 mt-1"},G={class:"text-sm font-semibold text-blue-600 mt-1"},O={class:"text-sm text-gray-900 mt-1"},Q={key:1,class:"bg-white rounded-xl shadow-lg p-6"},X={class:"overflow-x-auto"},K={class:"min-w-full divide-y divide-gray-200"},U={class:"bg-white divide-y divide-gray-200"},z={class:"px-4 py-3 text-sm text-gray-900"},J={class:"px-4 py-3 text-sm text-gray-900"},Z={class:"px-4 py-3 text-sm text-gray-900"},tt={class:"px-4 py-3 text-sm font-semibold text-blue-600"},et={key:2,class:"bg-white rounded-xl shadow-lg p-6"},st={class:"space-y-6"},at={class:"bg-white rounded-xl shadow-lg p-6"},it={class:"space-y-4"},lt={class:"text-2xl font-bold text-gray-900 mt-1"},ot={class:"text-2xl font-bold text-gray-900 mt-1"},nt={class:"text-2xl font-bold text-gray-900 mt-1"},bt={__name:"Show",props:{asset:Object,depreciation:Object,history:Array},setup(s){const r=s;function l(i){return i==null||i===void 0?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(i)}function u(i){return i?new Date(i).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}function g(){if(!r.asset.purchase_date||!r.depreciation)return 0;const i=new Date(r.asset.purchase_date),n=(new Date-i)/(1e3*60*60*24*365);return Math.min(n,r.asset.useful_life||0)}async function p(){var e,n,o;if((await x.fire({title:"Calculate Depreciation?",text:`Hitung depreciation untuk asset "${r.asset.name}"?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Calculate",cancelButtonText:"Batal"})).isConfirmed)try{(e=(await A.post(`/asset-management/depreciations/${r.asset.id}/calculate`,{},{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).data)!=null&&e.success&&(x.fire("Berhasil","Depreciation berhasil dihitung","success"),_.reload())}catch(f){x.fire("Error",((o=(n=f.response)==null?void 0:n.data)==null?void 0:o.message)||"Gagal calculate depreciation","error")}}return(i,e)=>(d(),b(k,null,{default:y(()=>{var n;return[t("div",S,[t("div",L,[t("div",null,[e[0]||(e[0]=t("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[t("i",{class:"fa-solid fa-chart-line text-blue-500"}),m(" Asset Depreciation ")],-1)),t("p",F,a(s.asset.asset_code)+" - "+a(s.asset.name),1)]),t("div",N,[t("button",{onClick:p,class:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg flex items-center gap-2"},e[1]||(e[1]=[t("i",{class:"fa-solid fa-calculator"},null,-1),m(" Calculate Depreciation ")])),h(v(D),{href:`/asset-management/assets/${s.asset.id}`,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"},{default:y(()=>e[2]||(e[2]=[t("i",{class:"fa-solid fa-arrow-left"},null,-1),m(" Kembali ")])),_:1},8,["href"])])]),t("div",R,[t("div",V,[t("div",I,[e[7]||(e[7]=t("h2",{class:"text-lg font-bold text-gray-900 mb-4"},"Asset Information",-1)),t("div",M,[t("div",null,[e[3]||(e[3]=t("label",{class:"text-sm font-medium text-gray-500"},"Purchase Price",-1)),t("p",j,a(l(s.asset.purchase_price)),1)]),t("div",null,[e[4]||(e[4]=t("label",{class:"text-sm font-medium text-gray-500"},"Purchase Date",-1)),t("p",P,a(u(s.asset.purchase_date)),1)]),t("div",null,[e[5]||(e[5]=t("label",{class:"text-sm font-medium text-gray-500"},"Useful Life",-1)),t("p",Y,a(s.asset.useful_life?s.asset.useful_life+" tahun":"-"),1)]),t("div",null,[e[6]||(e[6]=t("label",{class:"text-sm font-medium text-gray-500"},"Depreciation Method",-1)),t("p",q,a(((n=s.depreciation)==null?void 0:n.depreciation_method)||"Straight-Line"),1)])])]),s.depreciation?(d(),c("div",E,[e[13]||(e[13]=t("h2",{class:"text-lg font-bold text-gray-900 mb-4"},"Depreciation Details",-1)),t("div",H,[t("div",null,[e[8]||(e[8]=t("label",{class:"text-sm font-medium text-gray-500"},"Annual Depreciation",-1)),t("p",T,a(l(s.depreciation.annual_depreciation)),1)]),t("div",null,[e[9]||(e[9]=t("label",{class:"text-sm font-medium text-gray-500"},"Monthly Depreciation",-1)),t("p",W,a(l(s.depreciation.monthly_depreciation)),1)]),t("div",null,[e[10]||(e[10]=t("label",{class:"text-sm font-medium text-gray-500"},"Accumulated Depreciation",-1)),t("p",$,a(l(s.depreciation.accumulated_depreciation)),1)]),t("div",null,[e[11]||(e[11]=t("label",{class:"text-sm font-medium text-gray-500"},"Current Value",-1)),t("p",G,a(l(s.depreciation.current_value)),1)]),t("div",null,[e[12]||(e[12]=t("label",{class:"text-sm font-medium text-gray-500"},"Last Calculated",-1)),t("p",O,a(u(s.depreciation.last_calculated_at)),1)])])])):w("",!0),s.history&&s.history.length>0?(d(),c("div",Q,[e[15]||(e[15]=t("h2",{class:"text-lg font-bold text-gray-900 mb-4"},"Depreciation History",-1)),t("div",X,[t("table",K,[e[14]||(e[14]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Period"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Depreciation"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Accumulated"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Current Value")])],-1)),t("tbody",U,[(d(!0),c(C,null,B(s.history,o=>(d(),c("tr",{key:o.id,class:"hover:bg-gray-50"},[t("td",z,a(u(o.period_date)),1),t("td",J,a(l(o.depreciation_amount)),1),t("td",Z,a(l(o.accumulated_depreciation)),1),t("td",tt,a(l(o.current_value)),1)]))),128))])])])])):(d(),c("div",et,e[16]||(e[16]=[t("p",{class:"text-center text-gray-500"},"Belum ada history depreciation",-1)])))]),t("div",st,[t("div",at,[e[20]||(e[20]=t("h2",{class:"text-lg font-bold text-gray-900 mb-4"},"Quick Stats",-1)),t("div",it,[t("div",null,[e[17]||(e[17]=t("label",{class:"text-sm font-medium text-gray-500"},"Years Depreciated",-1)),t("p",lt,a(s.depreciation?g():"0"),1)]),t("div",null,[e[18]||(e[18]=t("label",{class:"text-sm font-medium text-gray-500"},"Remaining Years",-1)),t("p",ot,a(s.asset.useful_life?(s.asset.useful_life-g()).toFixed(1):"-"),1)]),t("div",null,[e[19]||(e[19]=t("label",{class:"text-sm font-medium text-gray-500"},"Depreciation Rate",-1)),t("p",nt,a(s.asset.useful_life?(1/s.asset.useful_life*100).toFixed(2):"-")+"% ",1)])])])])])])]}),_:1}))}};export{bt as default};
