import{r as v,c as I,W as g,w as P,L as i,B as d,x as b,Q as u,U as W,C as y,D as e,E as w,S as L,N as r,G as o,H as h,J as _,F as k,M,l as p}from"./vendor-vue-g7iCcTkf.js";import{A as E}from"./AppLayout-D8A3r8FT.js";import{d as z}from"./debounce-DFlfn0vu.js";import{S as m}from"./app-3SxMownK.js";import{a as J}from"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-BaUvls0f.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const Q={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},R={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"},Y={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},q={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl shadow-md p-6 border border-blue-200 flex items-center justify-between"},K={class:"text-3xl font-bold text-blue-900"},X={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl shadow-md p-6 border border-green-200 flex items-center justify-between"},Z={class:"text-3xl font-bold text-green-900"},ee={class:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl shadow-md p-6 border border-orange-200 flex items-center justify-between"},te={class:"text-3xl font-bold text-orange-900"},se={class:"bg-white rounded-xl shadow-lg p-6 mb-6 border border-gray-200"},le={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 items-end"},ae={class:"relative"},oe={class:"bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-200"},re={class:"w-full min-w-full divide-y divide-gray-200"},ne={class:"bg-white divide-y divide-gray-100"},ie={key:0},de={class:"px-6 py-4 whitespace-nowrap"},ue={class:"text-sm font-semibold text-blue-700 font-mono"},pe={class:"px-6 py-4 whitespace-nowrap"},ce={class:"text-sm text-gray-900"},fe={class:"px-6 py-4 whitespace-nowrap"},xe={class:"text-sm font-medium text-gray-900"},ge={class:"px-6 py-4 whitespace-nowrap"},me={class:"px-6 py-4 whitespace-nowrap"},be={class:"px-6 py-4 whitespace-nowrap"},ve={class:"flex items-center gap-2"},ye={class:"w-8 h-8 bg-blue-200 rounded-full flex items-center justify-center text-blue-800 font-bold text-xs"},we={class:"text-sm text-gray-700"},he={class:"px-6 py-4 whitespace-nowrap text-center"},_e={class:"flex items-center justify-center gap-2"},ke=["onClick"],Ce={key:0,class:"bg-white rounded-xl shadow-lg p-4 mt-6 border border-gray-200"},Se={class:"flex flex-col sm:flex-row justify-between items-center gap-4"},De={class:"text-sm text-gray-700 flex items-center gap-1"},je={class:"font-semibold text-blue-700"},Ae={class:"font-semibold text-blue-700"},Be={class:"font-semibold text-blue-700"},Te={class:"flex items-center gap-2"},Le=["disabled"],Me={class:"flex items-center gap-1"},Ne=["disabled","onClick","innerHTML"],Ve=["disabled"],Qe={__name:"Index",props:{adjustments:Object,filters:Object,canDelete:{type:Boolean,default:!1}},setup(N){var D,j,A;const c=N,f=v(((D=c.filters)==null?void 0:D.search)||""),n=v({from:((j=c.filters)==null?void 0:j.from)||"",to:((A=c.filters)==null?void 0:A.to)||""}),l=I(()=>c.adjustments||{data:[],total:0,from:0,to:0,last_page:1,links:[],prev_page_url:null,next_page_url:null}),C=z(()=>{g.get(route("food-inventory-adjustment.index"),{search:f.value,from:n.value.from,to:n.value.to},{preserveState:!0,replace:!0})},400);P([f,n],()=>{C()});function V(){f.value="",n.value.from="",n.value.to="",C()}function H(a){if(!a)return"-";const t=new Date(a);return isNaN(t)?"-":t.toLocaleDateString("id-ID")}function $(a){switch(a){case"waiting_approval":return"Menunggu Approval";case"waiting_ssd_manager":return"Menunggu SSD Manager";case"waiting_cost_control":return"Menunggu Cost Control";case"approved":return"Approved";case"rejected":return"Rejected";default:return a}}function F(a){const t="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold";switch(a){case"approved":return`${t} bg-green-100 text-green-800`;case"rejected":return`${t} bg-red-100 text-red-800`;case"waiting_approval":case"waiting_ssd_manager":case"waiting_cost_control":return`${t} bg-yellow-100 text-yellow-800`;default:return`${t} bg-gray-100 text-gray-800`}}function G(){return l.value.data?l.value.data.filter(a=>a.status==="approved").length:0}function O(){return l.value.data?l.value.data.filter(a=>["waiting_approval","waiting_ssd_manager","waiting_cost_control"].includes(a.status)).length:0}const S=v(!1);function U(a){m.fire({title:"Hapus Stock Adjustment?",text:"Data dan inventory akan di-rollback. Lanjutkan?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal",confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",reverseButtons:!0,focusCancel:!0,showLoaderOnConfirm:!0,preConfirm:()=>(S.value=!0,J.delete(`/food-inventory-adjustment/${a}`).then(t=>{t.data.success?(m.fire("Dihapus!","Data berhasil dihapus dan inventory di-rollback.","success"),g.reload()):m.fire("Gagal",t.data.message||"Gagal menghapus data","error")}).catch(t=>{var s,x;m.fire("Gagal",((x=(s=t.response)==null?void 0:s.data)==null?void 0:x.message)||"Gagal menghapus data","error")}).finally(()=>{S.value=!1})),allowOutsideClick:()=>!m.isLoading()})}return(a,t)=>(d(),i(k,null,[b(u(W),{title:"Stock Adjustment"}),b(E,null,{default:y(()=>[e("div",Q,[e("div",R,[t[6]||(t[6]=e("div",{class:"flex items-center gap-4"},[e("div",{class:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg"},[e("i",{class:"fa-solid fa-boxes-stacked text-white text-xl"})]),e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 flex items-center gap-3 mb-2"},[e("span",null,"Stock Adjustment")]),e("p",{class:"text-gray-600 ml-16"},"Manajemen penyesuaian stok inventory warehouse")])],-1)),b(u(L),{href:a.route("food-inventory-adjustment.create"),class:"group inline-flex items-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 font-semibold transform hover:-translate-y-0.5"},{default:y(()=>t[5]||(t[5]=[e("i",{class:"fa-solid fa-plus-circle text-lg"},null,-1),e("span",null,"Create New Adjustment",-1)])),_:1},8,["href"])]),e("div",Y,[e("div",q,[e("div",null,[t[7]||(t[7]=e("div",{class:"text-sm font-semibold text-blue-700 mb-1"},"Total Adjustments",-1)),e("div",K,r(l.value.total||0),1)]),t[8]||(t[8]=e("i",{class:"fa-solid fa-list-check text-blue-400 text-4xl opacity-50"},null,-1))]),e("div",X,[e("div",null,[t[9]||(t[9]=e("div",{class:"text-sm font-semibold text-green-700 mb-1"},"Approved",-1)),e("div",Z,r(G()),1)]),t[10]||(t[10]=e("i",{class:"fa-solid fa-check-circle text-green-400 text-4xl opacity-50"},null,-1))]),e("div",ee,[e("div",null,[t[11]||(t[11]=e("div",{class:"text-sm font-semibold text-orange-700 mb-1"},"Pending Approval",-1)),e("div",te,r(O()),1)]),t[12]||(t[12]=e("i",{class:"fa-solid fa-clock text-orange-400 text-4xl opacity-50"},null,-1))])]),e("div",se,[t[18]||(t[18]=e("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[e("i",{class:"fa-solid fa-filter text-blue-500"}),o(" Filter & Pencarian ")],-1)),e("div",le,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},[e("i",{class:"fa-solid fa-magnifying-glass text-gray-400"}),o(" Cari ")],-1)),e("div",ae,[h(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>f.value=s),type:"text",placeholder:"Number, warehouse, item...",class:"w-full px-4 py-2.5 pl-10 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,512),[[_,f.value]]),t[13]||(t[13]=e("i",{class:"fa-solid fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},null,-1))])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},[e("i",{class:"fa-solid fa-calendar-alt text-gray-400"}),o(" Dari Tanggal ")],-1)),h(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=s=>n.value.from=s),class:"w-full px-4 py-2.5 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,512),[[_,n.value.from]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-1"},[e("i",{class:"fa-solid fa-calendar-alt text-gray-400"}),o(" Sampai Tanggal ")],-1)),h(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>n.value.to=s),class:"w-full px-4 py-2.5 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,512),[[_,n.value.to]])]),e("div",null,[e("button",{onClick:V,class:"w-full px-4 py-2.5 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-colors shadow-md hover:shadow-lg font-semibold"},t[17]||(t[17]=[e("i",{class:"fa-solid fa-eraser mr-2"},null,-1),o(" Clear Filter ")]))])])]),e("div",oe,[e("table",re,[t[22]||(t[22]=e("thead",{class:"bg-gradient-to-r from-blue-50 to-blue-100"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-bold text-blue-700 uppercase tracking-wider rounded-tl-2xl"},[e("div",{class:"flex items-center gap-2"},[e("i",{class:"fa-solid fa-hashtag text-blue-200"}),e("span",null,"Number")])]),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},[e("div",{class:"flex items-center gap-2"},[e("i",{class:"fa-solid fa-calendar-alt text-blue-200"}),e("span",null,"Date")])]),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},[e("div",{class:"flex items-center gap-2"},[e("i",{class:"fa-solid fa-warehouse text-blue-200"}),e("span",null,"Warehouse")])]),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},[e("div",{class:"flex items-center gap-2"},[e("i",{class:"fa-solid fa-tag text-blue-200"}),e("span",null,"Type")])]),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},[e("div",{class:"flex items-center gap-2"},[e("i",{class:"fa-solid fa-info-circle text-blue-200"}),e("span",null,"Status")])]),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},[e("div",{class:"flex items-center gap-2"},[e("i",{class:"fa-solid fa-user text-blue-200"}),e("span",null,"Created By")])]),e("th",{class:"px-6 py-4 text-center text-xs font-bold text-blue-700 uppercase tracking-wider rounded-tr-2xl"},[e("div",{class:"flex items-center justify-center gap-2"},[e("i",{class:"fa-solid fa-cogs text-blue-200"}),e("span",null,"Actions")])])])],-1)),e("tbody",ne,[l.value.data.length===0?(d(),i("tr",ie,t[19]||(t[19]=[e("td",{colspan:"7",class:"text-center py-12 text-gray-400"},[e("i",{class:"fa-solid fa-box-open text-5xl mb-3"}),e("p",{class:"text-lg font-medium"},"Tidak ada data adjustment yang ditemukan."),e("p",{class:"text-sm"},"Coba sesuaikan filter pencarian Anda.")],-1)]))):w("",!0),(d(!0),i(k,null,M(l.value.data,s=>{var x,B,T;return d(),i("tr",{key:s.id,class:"hover:bg-blue-50 transition-all duration-200"},[e("td",de,[e("div",ue,r(s.number),1)]),e("td",pe,[e("div",ce,r(H(s.date)),1)]),e("td",fe,[e("div",xe,r(((x=s.warehouse)==null?void 0:x.name)||"-"),1)]),e("td",ge,[e("span",{class:p(["inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold",s.type==="in"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},[e("i",{class:p(s.type==="in"?"fa-solid fa-arrow-down mr-1.5":"fa-solid fa-arrow-up mr-1.5")},null,2),o(" "+r(s.type==="in"?"Stock In":"Stock Out"),1)],2)]),e("td",me,[e("span",{class:p(F(s.status))},r($(s.status)),3)]),e("td",be,[e("div",ve,[e("div",ye,r((B=s.creator)!=null&&B.nama_lengkap?s.creator.nama_lengkap.charAt(0).toUpperCase():"?"),1),e("span",we,r(((T=s.creator)==null?void 0:T.nama_lengkap)||"-"),1)])]),e("td",he,[e("div",_e,[b(u(L),{href:a.route("food-inventory-adjustment.show",s.id),class:"inline-flex items-center px-3 py-1.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all shadow-md hover:shadow-lg text-sm font-medium"},{default:y(()=>t[20]||(t[20]=[e("i",{class:"fa-solid fa-eye mr-1"},null,-1),o(" Detail ")])),_:2},1032,["href"]),c.canDelete?(d(),i("button",{key:0,onClick:He=>U(s.id),class:"inline-flex items-center px-3 py-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-md hover:shadow-lg text-sm font-medium"},t[21]||(t[21]=[e("i",{class:"fa-solid fa-trash mr-1"},null,-1),o(" Hapus ")]),8,ke)):w("",!0)])])])}),128))])])]),l.value.last_page>1?(d(),i("div",Ce,[e("div",Se,[e("div",De,[t[23]||(t[23]=o(" Menampilkan ")),e("span",je,r(l.value.from||0),1),t[24]||(t[24]=o(" sampai ")),e("span",Ae,r(l.value.to||0),1),t[25]||(t[25]=o(" dari ")),e("span",Be,r(l.value.total),1),t[26]||(t[26]=o(" data "))]),e("div",Te,[e("button",{onClick:t[3]||(t[3]=()=>l.value.prev_page_url&&u(g).visit(l.value.prev_page_url,{preserveState:!0,replace:!0})),disabled:!l.value.prev_page_url,class:p(["px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 shadow-md",l.value.prev_page_url?"bg-blue-500 text-white hover:bg-blue-600 hover:shadow-lg":"bg-gray-200 text-gray-400 cursor-not-allowed"])},t[27]||(t[27]=[e("i",{class:"fa-solid fa-chevron-left mr-1"},null,-1),o(" Sebelumnya ")]),10,Le),e("div",Me,[(d(!0),i(k,null,M(l.value.links,s=>(d(),i("button",{key:s.label,disabled:!s.url,onClick:()=>s.url&&u(g).visit(s.url,{preserveState:!0,replace:!0}),innerHTML:s.label,class:p(["px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200",[s.active?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200 hover:scale-105",s.url?"cursor-pointer":"opacity-50 cursor-not-allowed"]])},null,10,Ne))),128))]),e("button",{onClick:t[4]||(t[4]=()=>l.value.next_page_url&&u(g).visit(l.value.next_page_url,{preserveState:!0,replace:!0})),disabled:!l.value.next_page_url,class:p(["px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 shadow-md",l.value.next_page_url?"bg-blue-500 text-white hover:bg-blue-600 hover:shadow-lg":"bg-gray-200 text-gray-400 cursor-not-allowed"])},t[28]||(t[28]=[o(" Selanjutnya "),e("i",{class:"fa-solid fa-chevron-right ml-1"},null,-1)]),10,Ve)])])])):w("",!0)])]),_:1})],64))}};export{Qe as default};
