import{r as i,W as l,w as y,A as V,B as n,C as k,D as e,x as C,G as h,Q as $,l as d,H as j,J as E,L as p,F as B,M as S,N as r}from"./vendor-vue-g7iCcTkf.js";import{l as U}from"./lodash-DB3HVzpp.js";import{S as b}from"./app-BujIObx9.js";import{A as z}from"./AppLayout-DZJ25Yod.js";import F from"./DivisiFormModal-DL1NvcrN.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as P}from"./vendor-ui-CrPgGUUb.js";import"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./ProfileUpdateModal-DNpNU_ax.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const W={class:"max-w-7xl w-full mx-auto py-8 px-2"},Y={class:"flex items-center gap-3 mb-4"},G={class:"mb-4"},J={class:"bg-white rounded-2xl shadow-lg overflow-hidden"},Q={class:"overflow-x-auto"},q={class:"min-w-full divide-y divide-gray-200"},K={class:"bg-white divide-y divide-gray-200"},R={class:"px-6 py-3 font-semibold"},X={class:"px-6 py-3"},Z={class:"px-6 py-3"},ee={class:"px-6 py-3"},te={class:"px-6 py-3"},se=["onClick"],oe={class:"px-6 py-3"},ae={class:"flex gap-2"},le=["onClick"],ie=["onClick"],ne={class:"flex justify-end mt-4 gap-2"},re=["disabled","onClick","innerHTML"],ue={__name:"Index",props:{divisis:Object,filters:Object,success:String},setup(m){var _;const g=m,u=i(((_=g.filters)==null?void 0:_.search)||""),a=i(!1),c=i(!1),x=i("create"),f=i(null),M=U.debounce(()=>{l.get("/divisis",{search:u.value,status:a.value?"inactive":"active"},{preserveState:!0,replace:!0})},400);y(a,s=>{l.get("/divisis",{search:u.value,status:s?"inactive":"active"},{preserveState:!0,replace:!0})}),y(()=>g.success,s=>{console.log("Success message received:",s),s&&b.fire("Berhasil",s,"success")},{immediate:!0});function D(){M()}function H(s){s&&l.visit(s,{preserveState:!0,replace:!0})}function I(){x.value="create",f.value=null,c.value=!0}function N(s){x.value="edit",f.value=s,c.value=!0}async function T(s){(await b.fire({title:"Hapus Divisi?",text:`Yakin ingin menghapus divisi "${s.nama_divisi}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed&&l.delete(route("divisis.destroy",s.id),{onSuccess:()=>b.fire("Berhasil","Divisi berhasil dihapus!","success")})}function w(){l.reload({preserveState:!0,replace:!0})}function A(){c.value=!1}function L(s){l.patch(route("divisis.toggle-status",s.id),{},{preserveState:!0,onSuccess:w})}return(s,o)=>(n(),V(z,null,{default:k(()=>[e("div",W,[e("div",{class:"flex justify-between items-center mb-6"},[o[2]||(o[2]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-building text-blue-500"}),h(" Master Data Divisi ")],-1)),e("button",{onClick:I,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"}," + Buat Divisi Baru ")]),e("div",Y,[C($(P),{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=t=>a.value=t),class:d([a.value?"bg-blue-600":"bg-gray-200","relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none"])},{default:k(()=>[e("span",{class:d([a.value?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition"])},null,2)]),_:1},8,["modelValue","class"]),o[3]||(o[3]=e("span",{class:"ml-2 text-sm text-gray-700"},"Tampilkan Inactive",-1))]),e("div",G,[j(e("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>u.value=t),onInput:D,type:"text",placeholder:"Cari nama divisi...",class:"w-full px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},null,544),[[E,u.value]])]),e("div",J,[e("div",Q,[e("table",q,[o[6]||(o[6]=e("thead",{class:"bg-gradient-to-r from-blue-500 to-blue-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Nama Divisi"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Nominal Lembur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Nominal Uang Makan"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Nominal PH"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",K,[(n(!0),p(B,null,S(m.divisis.data,t=>(n(),p("tr",{key:t.id,class:"hover:bg-blue-50 transition shadow-sm"},[e("td",R,r(t.nama_divisi),1),e("td",X,r(t.formatted_nominal_lembur),1),e("td",Z,r(t.formatted_nominal_uang_makan),1),e("td",ee,r(t.formatted_nominal_ph),1),e("td",te,[e("button",{class:d([t.status==="A"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700","px-2 py-1 rounded-full text-xs font-semibold shadow hover:opacity-80 transition"]),onClick:v=>L(t)},r(t.status==="A"?"Active":"Inactive"),11,se)]),e("td",oe,[e("div",ae,[e("button",{onClick:v=>N(t),class:"inline-flex items-center btn btn-xs bg-yellow-100 text-yellow-800 hover:bg-yellow-200 rounded px-2 py-1 font-semibold transition"},o[4]||(o[4]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M15.232 5.232l3.536 3.536M9 13l6-6m2 2l-6 6m-2 2h6a2 2 0 002-2v-6a2 2 0 00-2-2H7a2 2 0 00-2 2v6a2 2 0 002 2z"})],-1),h(" Edit ")]),8,le),e("button",{onClick:v=>T(t),class:"inline-flex items-center btn btn-xs bg-red-100 text-red-700 hover:bg-red-200 rounded px-2 py-1 font-semibold transition"},o[5]||(o[5]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M6 18L18 6M6 6l12 12"})],-1),h(" Hapus ")]),8,ie)])])]))),128))])])])]),e("div",ne,[(n(!0),p(B,null,S(m.divisis.links,t=>(n(),p("button",{key:t.label,disabled:!t.url,onClick:v=>H(t.url),innerHTML:t.label,class:d(["px-3 py-1 rounded-lg border text-sm font-semibold",[t.active?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-700 hover:bg-blue-50",t.url?"cursor-pointer":"opacity-50 cursor-not-allowed"]])},null,10,re))),128))]),C(F,{show:c.value,mode:x.value,divisi:f.value,onClose:A,onSuccess:w},null,8,["show","mode","divisi"])])]),_:1}))}},ke=O(ue,[["__scopeId","data-v-838acf0c"]]);export{ke as default};
