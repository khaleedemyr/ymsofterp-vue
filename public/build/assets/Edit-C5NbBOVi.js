import{r as x,A as M,B as d,C as T,D as e,G as p,O as _,L as r,E as n,H as b,l as g,F as G,M as j,N as s,I as c,J as y,W as k}from"./vendor-vue-g7iCcTkf.js";import{A as B}from"./AppLayout-zB0hvXOw.js";import"./vendor-utils-CpgP2uT4.js";import"./app-BgZdqVzD.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-C4ea0y0B.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const C={class:"max-w-4xl w-full mx-auto py-8 px-2"},P={class:"bg-white rounded-2xl shadow-lg p-6"},A=["value"],U={key:0,class:"mt-1 text-sm text-red-600"},E={key:0,class:"mt-1 text-sm text-red-600"},N={key:0,class:"mt-1 text-sm text-red-600"},S={key:0,class:"mt-1 text-sm text-red-600"},D={class:"bg-gray-50 rounded-xl p-4"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},I={class:"text-gray-900"},O={class:"text-gray-900"},F={class:"text-gray-900"},K={class:"text-gray-900"},z={class:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-blue-400 transition"},W={for:"video-upload",class:"cursor-pointer"},L={class:"text-lg font-medium text-gray-700 mb-2"},H={key:0,class:"mt-1 text-sm text-red-600"},$={key:0,class:"bg-gray-50 rounded-xl p-4"},q={class:"max-w-xs"},Q=["src","alt"],R={class:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-blue-400 transition"},X={for:"thumbnail-upload",class:"cursor-pointer"},Y={class:"text-lg font-medium text-gray-700 mb-2"},Z={key:0,class:"mt-1 text-sm text-red-600"},ee={class:"flex justify-end gap-4 pt-6"},te=["disabled"],ie={key:0,class:"fa-solid fa-spinner fa-spin mr-2"},ve={__name:"Edit",props:{video:Object,groups:Array},setup(u){const v=u,i=x({group_id:v.video.group_id||"",title:v.video.title||"",description:v.video.description||"",video:null,thumbnail:null,status:v.video.status||"A"}),l=x({}),m=x(!1);function h(a){const t=a.target.files[0];if(t){if(t.size>100*1024*1024){alert("Ukuran file video maksimal 100MB"),a.target.value="";return}if(!["video/mp4","video/webm","video/avi","video/mov"].includes(t.type)){alert("Tipe file video tidak didukung. Gunakan MP4, WebM, AVI, atau MOV"),a.target.value="";return}i.value.video=t}}function w(a){const t=a.target.files[0];if(t){if(t.size>2*1024*1024){alert("Ukuran file thumbnail maksimal 2MB"),a.target.value="";return}if(!["image/jpeg","image/png","image/jpg"].includes(t.type)){alert("Tipe file thumbnail tidak didukung. Gunakan JPEG, PNG, atau JPG"),a.target.value="";return}i.value.thumbnail=t}}function V(){if(!i.value.group_id){l.value.group_id="Group harus dipilih";return}if(!i.value.title){l.value.title="Judul harus diisi";return}m.value=!0,l.value={};const a=new FormData;a.append("group_id",i.value.group_id),a.append("title",i.value.title),a.append("description",i.value.description||""),a.append("status",i.value.status),i.value.video&&a.append("video",i.value.video),i.value.thumbnail&&a.append("thumbnail",i.value.thumbnail),a.append("_method","PUT"),k.post(`/video-tutorials/${v.video.id}`,a,{onSuccess:()=>{m.value=!1},onError:t=>{l.value=t,m.value=!1}})}function f(){k.visit("/video-tutorials")}return(a,t)=>(d(),M(B,{title:"Edit Video Tutorial"},{default:T(()=>[e("div",C,[e("div",{class:"flex justify-between items-center mb-6"},[t[5]||(t[5]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-edit text-blue-500"}),p(" Edit Video Tutorial ")],-1)),e("button",{onClick:f,class:"bg-gray-500 text-white px-4 py-2 rounded-xl hover:bg-gray-600 transition"},t[4]||(t[4]=[e("i",{class:"fa-solid fa-arrow-left mr-2"},null,-1),p(" Kembali ")]))]),e("div",P,[e("form",{onSubmit:_(V,["prevent"]),class:"space-y-6"},[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Group Video Tutorial "),e("span",{class:"text-red-500"},"*")],-1)),b(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>i.value.group_id=o),class:g(["w-full px-4 py-2 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",{"border-red-500":l.value.group_id}])},[t[6]||(t[6]=e("option",{value:""},"Pilih Group",-1)),(d(!0),r(G,null,j(u.groups,o=>(d(),r("option",{key:o.id,value:o.id},s(o.name),9,A))),128))],2),[[c,i.value.group_id]]),l.value.group_id?(d(),r("p",U,s(l.value.group_id),1)):n("",!0)]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Judul Video "),e("span",{class:"text-red-500"},"*")],-1)),b(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>i.value.title=o),type:"text",class:g(["w-full px-4 py-2 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",{"border-red-500":l.value.title}]),placeholder:"Masukkan judul video tutorial"},null,2),[[y,i.value.title]]),l.value.title?(d(),r("p",E,s(l.value.title),1)):n("",!0)]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Deskripsi ",-1)),b(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=o=>i.value.description=o),rows:"4",class:g(["w-full px-4 py-2 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",{"border-red-500":l.value.description}]),placeholder:"Masukkan deskripsi video tutorial (opsional)"},null,2),[[y,i.value.description]]),l.value.description?(d(),r("p",N,s(l.value.description),1)):n("",!0)]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Status "),e("span",{class:"text-red-500"},"*")],-1)),b(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>i.value.status=o),class:g(["w-full px-4 py-2 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",{"border-red-500":l.value.status}])},t[10]||(t[10]=[e("option",{value:"A"},"Active",-1),e("option",{value:"N"},"Inactive",-1)]),2),[[c,i.value.status]]),l.value.status?(d(),r("p",S,s(l.value.status),1)):n("",!0)]),e("div",D,[t[16]||(t[16]=e("h3",{class:"text-lg font-medium text-gray-800 mb-3"},"Video Saat Ini",-1)),e("div",J,[e("div",null,[t[12]||(t[12]=e("span",{class:"font-medium text-gray-600"},"Nama File:",-1)),e("p",I,s(u.video.video_name),1)]),e("div",null,[t[13]||(t[13]=e("span",{class:"font-medium text-gray-600"},"Ukuran:",-1)),e("p",O,s(u.video.video_size_formatted),1)]),e("div",null,[t[14]||(t[14]=e("span",{class:"font-medium text-gray-600"},"Durasi:",-1)),e("p",F,s(u.video.duration_formatted),1)]),e("div",null,[t[15]||(t[15]=e("span",{class:"font-medium text-gray-600"},"Tipe:",-1)),e("p",K,s(u.video.video_type),1)])])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Ganti File Video (Opsional) ",-1)),e("div",z,[e("input",{type:"file",onChange:h,accept:"video/mp4,video/webm,video/avi,video/mov",class:"hidden",id:"video-upload"},null,32),e("label",W,[t[17]||(t[17]=e("i",{class:"fa-solid fa-cloud-upload-alt text-4xl text-gray-400 mb-4"},null,-1)),e("p",L,s(i.value.video?i.value.video.name:"Klik untuk memilih file video baru"),1),t[18]||(t[18]=e("p",{class:"text-sm text-gray-500"}," MP4, WebM, AVI, atau MOV (maksimal 100MB). Kosongkan jika tidak ingin mengganti video. ",-1))])]),l.value.video?(d(),r("p",H,s(l.value.video),1)):n("",!0)]),u.video.thumbnail_url?(d(),r("div",$,[t[20]||(t[20]=e("h3",{class:"text-lg font-medium text-gray-800 mb-3"},"Thumbnail Saat Ini",-1)),e("div",q,[e("img",{src:u.video.thumbnail_url,alt:u.video.title,class:"w-full h-auto rounded-lg shadow"},null,8,Q)])])):n("",!0),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Ganti Thumbnail (Opsional) ",-1)),e("div",R,[e("input",{type:"file",onChange:w,accept:"image/jpeg,image/png,image/jpg",class:"hidden",id:"thumbnail-upload"},null,32),e("label",X,[t[21]||(t[21]=e("i",{class:"fa-solid fa-image text-4xl text-gray-400 mb-4"},null,-1)),e("p",Y,s(i.value.thumbnail?i.value.thumbnail.name:"Klik untuk memilih thumbnail baru"),1),t[22]||(t[22]=e("p",{class:"text-sm text-gray-500"}," JPEG, PNG, atau JPG (maksimal 2MB). Kosongkan jika tidak ingin mengganti thumbnail. ",-1))])]),l.value.thumbnail?(d(),r("p",Z,s(l.value.thumbnail),1)):n("",!0)]),e("div",ee,[e("button",{type:"button",onClick:f,class:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition"}," Batal "),e("button",{type:"submit",disabled:m.value,class:"px-6 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed"},[m.value?(d(),r("i",ie)):n("",!0),p(" "+s(m.value?"Menyimpan...":"Update Video"),1)],8,te)])],32)])])]),_:1}))}};export{ve as default};
