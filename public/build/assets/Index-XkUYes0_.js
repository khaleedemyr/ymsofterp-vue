import{c as Z,r as x,W as M,A as k,B as d,C as y,D as e,G as S,x as $,Q as o,S as v,N as r,H as f,J as C,I as j,L as i,F as D,M as T,E as c,l as E}from"./vendor-vue-g7iCcTkf.js";import{l as ee}from"./lodash-DB3HVzpp.js";import{A as te}from"./AppLayout-BE0dNalr.js";import{S as A}from"./app-C51E4rvH.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-D219A2Up.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const se={class:"w-full py-8 px-4"},le={class:"flex justify-between items-center mb-6"},re={class:"flex gap-3"},ae={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"},oe={class:"rounded-xl shadow-lg p-6 border-l-4 border-gray-500 bg-white hover:shadow-xl transition-all"},de={class:"flex items-center justify-between"},ne={class:"text-2xl font-bold text-gray-900"},ie={class:"rounded-xl shadow-lg p-6 border-l-4 border-gray-500 bg-white hover:shadow-xl transition-all"},ue={class:"flex items-center justify-between"},pe={class:"text-2xl font-bold text-gray-900"},xe={class:"rounded-xl shadow-lg p-6 border-l-4 border-yellow-500 bg-white hover:shadow-xl transition-all"},fe={class:"flex items-center justify-between"},ce={class:"text-2xl font-bold text-gray-900"},me={class:"rounded-xl shadow-lg p-6 border-l-4 border-green-500 bg-white hover:shadow-xl transition-all"},ge={class:"flex items-center justify-between"},ye={class:"text-2xl font-bold text-gray-900"},ve={class:"rounded-xl shadow-lg p-6 border-l-4 border-red-500 bg-white hover:shadow-xl transition-all"},be={class:"flex items-center justify-between"},we={class:"text-2xl font-bold text-gray-900"},he={class:"flex flex-col gap-4 mb-6"},_e={class:"flex flex-col md:flex-row gap-4"},ke=["value"],Se={class:"flex flex-col md:flex-row gap-4 items-end"},Ce={class:"flex items-center gap-2"},je={class:"flex items-center gap-2"},De={class:"bg-white rounded-xl shadow-lg overflow-hidden"},Te={class:"overflow-x-auto"},Ee={class:"min-w-full divide-y divide-gray-200"},Ae={class:"bg-white divide-y divide-gray-200"},Be={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ne={class:"font-medium"},Oe={class:"text-xs text-gray-500"},Re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Le={class:"px-6 py-4 whitespace-nowrap"},Pe={class:"px-6 py-4 whitespace-nowrap"},Fe={key:0,class:"mt-1"},He={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-1.5"},Ie={class:"flex items-center gap-1.5"},Me={class:"text-xs"},$e={class:"text-yellow-700 leading-tight"},Ge={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},We={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ye={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ze={class:"flex items-center gap-2"},Je=["onClick"],Qe={key:0,class:"text-center py-12"},qe={key:1,class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},Ke={class:"flex items-center justify-between"},Xe={class:"text-sm text-gray-700"},Ze={class:"flex gap-2"},xt={__name:"Index",props:{data:Object,filters:Object,filterOptions:Object,statistics:Object,auth:{type:Object,default:()=>({user:null})}},setup(a){var V,N,O,R,U,L;const u=a,p=Z(()=>{var l;return((l=u.auth)==null?void 0:l.user)||null}),b=x(((V=u.filters)==null?void 0:V.search)||""),w=x(((N=u.filters)==null?void 0:N.status)||"all"),h=x(((O=u.filters)==null?void 0:O.outlet)||"all"),m=x(((R=u.filters)==null?void 0:R.date_from)||""),g=x(((U=u.filters)==null?void 0:U.date_to)||""),_=x(((L=u.filters)==null?void 0:L.per_page)||15),n=ee.debounce(()=>{M.get("/employee-resignations",{search:b.value,status:w.value,outlet:h.value,date_from:m.value,date_to:g.value,per_page:_.value},{preserveState:!0,replace:!0})},400);function G(){n()}function W(){m.value="",g.value="",n()}function Y(l){return l?new Date(l).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}function z(l){return l?new Date(l).toLocaleString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function J(l){switch(l){case"draft":return"bg-gray-100 text-gray-800";case"submitted":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function Q(l){switch(l){case"draft":return"Draft";case"submitted":return"Submitted";case"approved":return"Approved";case"rejected":return"Rejected";default:return l}}function B(l){if(!l.approval_flows||l.approval_flows.length===0)return null;const t=l.approval_flows.find(s=>s.status==="PENDING");return t&&t.approver?`Level ${t.approval_level}: ${t.approver.nama_lengkap}`:null}function q(l){if(!p.value)return!1;const t=p.value.id_role==="5af56935b011a",s=l.created_by==p.value.id;return(l.status==="draft"||l.status==="rejected")&&(s||t)}function K(l){if(!p.value)return!1;const t=p.value.id_role==="5af56935b011a",s=l.created_by==p.value.id;return(l.status==="draft"||l.status==="rejected")&&(s||t)}function X(l){A.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&M.delete(`/employee-resignations/${l.id}`,{onSuccess:()=>{A.fire("Deleted!","Employee resignation has been deleted.","success")},onError:s=>{A.fire("Error!",s.message||"Failed to delete employee resignation.","error")}})})}return(l,t)=>(d(),k(te,{title:"Employee Resignation"},{default:y(()=>[e("div",se,[e("div",le,[t[12]||(t[12]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-user-minus text-red-500"}),S(" Employee Resignation ")],-1)),e("div",re,[$(o(v),{href:"/employee-resignations/create",class:"bg-gradient-to-r from-red-500 to-red-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"},{default:y(()=>t[11]||(t[11]=[e("i",{class:"fas fa-plus mr-2"},null,-1),S(" Buat Resignation Baru ")])),_:1})])]),e("div",ae,[e("div",oe,[e("div",de,[e("div",null,[t[13]||(t[13]=e("p",{class:"text-sm font-medium text-gray-600"},"Total",-1)),e("p",ne,r(a.statistics.total),1)]),t[14]||(t[14]=e("i",{class:"fa-solid fa-list text-4xl text-gray-300"},null,-1))])]),e("div",ie,[e("div",ue,[e("div",null,[t[15]||(t[15]=e("p",{class:"text-sm font-medium text-gray-600"},"Draft",-1)),e("p",pe,r(a.statistics.draft),1)]),t[16]||(t[16]=e("i",{class:"fa-solid fa-edit text-4xl text-gray-300"},null,-1))])]),e("div",xe,[e("div",fe,[e("div",null,[t[17]||(t[17]=e("p",{class:"text-sm font-medium text-gray-600"},"Submitted",-1)),e("p",ce,r(a.statistics.submitted),1)]),t[18]||(t[18]=e("i",{class:"fa-solid fa-paper-plane text-4xl text-yellow-300"},null,-1))])]),e("div",me,[e("div",ge,[e("div",null,[t[19]||(t[19]=e("p",{class:"text-sm font-medium text-gray-600"},"Approved",-1)),e("p",ye,r(a.statistics.approved),1)]),t[20]||(t[20]=e("i",{class:"fa-solid fa-check-circle text-4xl text-green-300"},null,-1))])]),e("div",ve,[e("div",be,[e("div",null,[t[21]||(t[21]=e("p",{class:"text-sm font-medium text-gray-600"},"Rejected",-1)),e("p",we,r(a.statistics.rejected),1)]),t[22]||(t[22]=e("i",{class:"fa-solid fa-times-circle text-4xl text-red-300"},null,-1))])])]),e("div",he,[e("div",_e,[f(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>b.value=s),onInput:G,placeholder:"Cari nomor, employee, outlet, atau notes...",class:"flex-1 px-4 py-2 rounded-xl border border-red-200 shadow focus:ring-2 focus:ring-red-400 focus:border-red-400 transition"},null,544),[[C,b.value]]),f(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>w.value=s),onChange:t[2]||(t[2]=(...s)=>o(n)&&o(n)(...s)),class:"w-full md:w-auto px-4 py-2 rounded-xl border border-red-200 shadow focus:ring-2 focus:ring-red-400 focus:border-red-400 transition"},t[23]||(t[23]=[e("option",{value:"all"},"Semua Status",-1),e("option",{value:"draft"},"Draft",-1),e("option",{value:"submitted"},"Submitted",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"rejected"},"Rejected",-1)]),544),[[j,w.value]]),f(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>h.value=s),onChange:t[4]||(t[4]=(...s)=>o(n)&&o(n)(...s)),class:"w-full md:w-auto px-4 py-2 rounded-xl border border-red-200 shadow focus:ring-2 focus:ring-red-400 focus:border-red-400 transition"},[t[24]||(t[24]=e("option",{value:"all"},"Semua Outlet",-1)),(d(!0),i(D,null,T(a.filterOptions.outlets,s=>(d(),i("option",{key:s.id_outlet,value:s.id_outlet},r(s.nama_outlet),9,ke))),128))],544),[[j,h.value]]),f(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>_.value=s),onChange:t[6]||(t[6]=(...s)=>o(n)&&o(n)(...s)),class:"w-full md:w-auto px-4 py-2 rounded-xl border border-red-200 shadow focus:ring-2 focus:ring-red-400 focus:border-red-400 transition"},t[25]||(t[25]=[e("option",{value:"15"},"15 Per Halaman",-1),e("option",{value:"30"},"30 Per Halaman",-1),e("option",{value:"50"},"50 Per Halaman",-1)]),544),[[j,_.value]])]),e("div",Se,[e("div",Ce,[t[26]||(t[26]=e("label",{class:"text-sm font-medium text-gray-700 whitespace-nowrap"},"Dari Tanggal:",-1)),f(e("input",{type:"date","onUpdate:modelValue":t[7]||(t[7]=s=>m.value=s),onChange:t[8]||(t[8]=(...s)=>o(n)&&o(n)(...s)),class:"px-4 py-2 rounded-xl border border-red-200 shadow focus:ring-2 focus:ring-red-400 focus:border-red-400 transition"},null,544),[[C,m.value]])]),e("div",je,[t[27]||(t[27]=e("label",{class:"text-sm font-medium text-gray-700 whitespace-nowrap"},"Sampai Tanggal:",-1)),f(e("input",{type:"date","onUpdate:modelValue":t[9]||(t[9]=s=>g.value=s),onChange:t[10]||(t[10]=(...s)=>o(n)&&o(n)(...s)),class:"px-4 py-2 rounded-xl border border-red-200 shadow focus:ring-2 focus:ring-red-400 focus:border-red-400 transition"},null,544),[[C,g.value]])]),m.value||g.value?(d(),i("button",{key:0,onClick:W,class:"px-4 py-2 rounded-xl border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 transition text-sm font-medium"},t[28]||(t[28]=[e("i",{class:"fas fa-times mr-1"},null,-1),S(" Hapus Filter Tanggal ")]))):c("",!0)])]),e("div",De,[e("div",Te,[e("table",Ee,[t[34]||(t[34]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Resignation Number"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Employee"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Outlet"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Resignation Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Creator"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Created At"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Ae,[(d(!0),i(D,null,T(a.data.data,s=>{var P,F,H,I;return d(),i("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Be,r(s.resignation_number),1),e("td",Ve,[e("div",null,[e("div",Ne,r(((P=s.employee)==null?void 0:P.nama_lengkap)||"Unknown"),1),e("div",Oe,r(((F=s.employee)==null?void 0:F.nik)||"-"),1)])]),e("td",Re,r(((H=s.outlet)==null?void 0:H.nama_outlet)||"Unknown"),1),e("td",Ue,r(Y(s.resignation_date)),1),e("td",Le,[e("span",{class:E(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.resignation_type==="prosedural"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},r(s.resignation_type==="prosedural"?"Prosedural":"Non Prosedural"),3)]),e("td",Pe,[e("span",{class:E(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",J(s.status)])},r(Q(s.status)),3),B(s)?(d(),i("div",Fe,[e("div",He,[e("div",Ie,[t[30]||(t[30]=e("i",{class:"fas fa-clock text-yellow-600 text-xs"},null,-1)),e("div",Me,[t[29]||(t[29]=e("p",{class:"font-medium text-yellow-800 leading-tight"},"Menunggu Approval",-1)),e("p",$e,r(B(s)),1)])])])])):c("",!0)]),e("td",Ge,r(((I=s.creator)==null?void 0:I.nama_lengkap)||"Unknown"),1),e("td",We,r(z(s.created_at)),1),e("td",Ye,[e("div",ze,[$(o(v),{href:`/employee-resignations/${s.id}`,class:"text-blue-600 hover:text-blue-900",title:"View"},{default:y(()=>t[31]||(t[31]=[e("i",{class:"fas fa-eye"},null,-1)])),_:2},1032,["href"]),q(s)?(d(),k(o(v),{key:0,href:`/employee-resignations/${s.id}/edit`,class:"text-green-600 hover:text-green-900",title:"Edit"},{default:y(()=>t[32]||(t[32]=[e("i",{class:"fas fa-edit"},null,-1)])),_:2},1032,["href"])):c("",!0),K(s)?(d(),i("button",{key:1,onClick:et=>X(s),class:"text-red-600 hover:text-red-900",title:"Delete"},t[33]||(t[33]=[e("i",{class:"fas fa-trash"},null,-1)]),8,Je)):c("",!0)])])])}),128))])])]),a.data.data.length===0?(d(),i("div",Qe,t[35]||(t[35]=[e("i",{class:"fa-solid fa-user-minus text-6xl text-gray-300 mb-4"},null,-1),e("p",{class:"text-gray-500 text-lg"},"Tidak ada Employee Resignation ditemukan",-1)]))):c("",!0),a.data.links&&a.data.links.length>3?(d(),i("div",qe,[e("div",Ke,[e("div",Xe," Menampilkan "+r(a.data.from||0)+" sampai "+r(a.data.to||0)+" dari "+r(a.data.total||0)+" hasil ",1),e("div",Ze,[(d(!0),i(D,null,T(a.data.links,s=>(d(),k(o(v),{key:s.label,href:s.url||"#",innerHTML:s.label,class:E(["px-3 py-2 rounded-md text-sm font-medium",s.active?"bg-red-600 text-white":s.url?"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 cursor-not-allowed"])},null,8,["href","innerHTML","class"]))),128))])])])):c("",!0)])])]),_:1}))}};export{xt as default};
