import{r as u,c as h,w as R,A as E,B as r,C as G,D as e,L as o,E as A,H as b,J as N,F as k,M as _,N as a,I as S,G as P,l as V,W as L}from"./vendor-vue-g7iCcTkf.js";import{A as j}from"./AppLayout-lnDyFfsm.js";import"./vendor-utils-CpgP2uT4.js";import"./app-CUjRlmlQ.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CXOsavaw.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const H={class:"w-full min-h-screen bg-gray-50 py-4 px-0"},W={class:"w-full flex flex-wrap gap-3 items-center mb-4 px-2"},q={class:"flex items-center gap-2"},z=["value"],J={class:"flex items-center gap-2"},Q=["value"],$={class:"flex items-center gap-2"},K={class:"flex items-center gap-2"},X=["value"],Y=["disabled"],Z={key:0,class:"animate-spin mr-2"},ee={key:1,class:"mr-2"},te={class:"bg-white rounded-xl shadow-lg overflow-x-auto w-full px-2"},le={class:"min-w-full border border-gray-300"},ae={key:0},re={class:"px-4 py-2 border border-gray-200"},se={class:"px-4 py-2 border border-gray-200"},oe={class:"px-4 py-2 border border-gray-200"},ne={class:"px-4 py-2 border border-gray-200"},de={class:"px-4 py-2 border border-gray-200 text-right"},ue={class:"px-4 py-2 border border-gray-200"},ie={class:"px-4 py-2 border border-gray-200 text-right"},pe={class:"px-4 py-2 border border-gray-200 text-right"},be={key:0},ge={class:"bg-gray-50 font-bold"},me={class:"px-6 py-3 text-right"},xe={key:0,class:"flex justify-between items-center mt-4"},ce={class:"text-sm text-gray-600"},ye={class:"flex gap-1"},ve=["disabled"],fe={class:"px-2"},he=["disabled"],Pe={__name:"ReportSalesAllItemAllOutlet",props:{report:Array,warehouses:Array,outlets:Array,filters:Object,total:Number,perPage:Number,page:Number},setup(d){var D,F;const n=d,g=u(n.filters.search||""),m=u(n.filters.gudang||""),x=u(n.filters.outlet||""),i=u(n.perPage||25),s=u(n.page||1),c=u(!1),y=u(((D=n.filters)==null?void 0:D.dateFrom)||""),v=u(((F=n.filters)==null?void 0:F.dateTo)||""),C=h(()=>(s.value-1)*i.value),I=h(()=>Math.min(C.value+n.report.length,n.total)),f=h(()=>Math.ceil(n.total/i.value)||1);function U(){s.value>1&&(s.value--,w())}function O(){s.value<f.value&&(s.value++,w())}R([g,m,x,i],()=>{s.value=1});function w(){c.value=!0,L.get("/report-sales-all-item-all-outlet",{search:g.value,gudang:m.value,outlet:x.value,perPage:i.value,page:s.value,dateFrom:y.value,dateTo:v.value},{preserveState:!0,preserveScroll:!0,onFinish:()=>c.value=!1})}const B=h(()=>n.report.reduce((p,t)=>p+(Number(t.subtotal)||0),0));function T(p){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(p||0)}function M(){const p=new URLSearchParams({search:g.value,gudang:m.value,outlet:x.value,dateFrom:y.value,dateTo:v.value});window.open(`/report-sales-all-item-all-outlet/export?${p.toString()}`,"_blank")}return(p,t)=>(r(),E(j,null,{default:G(()=>[e("div",H,[t[21]||(t[21]=e("h1",{class:"text-2xl font-bold mb-6"},"Report Penjualan All Item ke All Outlet",-1)),e("div",W,[b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>g.value=l),type:"text",placeholder:"Cari gudang, outlet, barang...",class:"px-4 py-2 border border-gray-300 rounded-lg flex-1 min-w-[180px] focus:ring-blue-500 focus:border-blue-500"},null,512),[[N,g.value]]),e("div",q,[t[7]||(t[7]=e("label",{class:"text-sm"},"Gudang",-1)),b(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>m.value=l),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500 min-w-[140px]"},[t[6]||(t[6]=e("option",{value:""},"Semua Gudang",-1)),(r(!0),o(k,null,_(d.warehouses,l=>(r(),o("option",{key:l.name,value:l.name},a(l.name),9,z))),128))],512),[[S,m.value]])]),e("div",J,[t[9]||(t[9]=e("label",{class:"text-sm"},"Outlet",-1)),b(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>x.value=l),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500 min-w-[160px]"},[t[8]||(t[8]=e("option",{value:""},"Semua Outlet",-1)),(r(!0),o(k,null,_(d.outlets,l=>(r(),o("option",{key:l.nama_outlet,value:l.nama_outlet},a(l.nama_outlet),9,Q))),128))],512),[[S,x.value]])]),e("div",$,[t[10]||(t[10]=e("label",{class:"text-sm"},"Dari",-1)),b(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>y.value=l),type:"date",class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500 min-w-[120px]"},null,512),[[N,y.value]]),t[11]||(t[11]=e("label",{class:"text-sm"},"s/d",-1)),b(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>v.value=l),type:"date",class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500 min-w-[120px]"},null,512),[[N,v.value]])]),e("div",K,[t[12]||(t[12]=e("label",{class:"text-sm"},"Tampilkan",-1)),b(e("select",{"onUpdate:modelValue":t[5]||(t[5]=l=>i.value=l),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500 min-w-[80px]"},[(r(),o(k,null,_([10,25,50,100],l=>e("option",{key:l,value:l},a(l),9,X)),64))],512),[[S,i.value]]),t[13]||(t[13]=e("span",{class:"text-sm"},"data",-1))]),e("button",{onClick:M,class:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-md font-semibold hover:bg-green-700 mr-2"},t[14]||(t[14]=[e("i",{class:"fas fa-file-excel mr-2"},null,-1),P(" Export Excel ")])),e("button",{onClick:w,disabled:c.value,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-700"},[c.value?(r(),o("span",Z,t[15]||(t[15]=[e("i",{class:"fas fa-spinner"},null,-1)]))):(r(),o("span",ee,t[16]||(t[16]=[e("i",{class:"fas fa-sync-alt"},null,-1)]))),t[17]||(t[17]=P(" Load Data "))],8,Y)]),e("div",te,[e("table",le,[t[20]||(t[20]=e("thead",null,[e("tr",{class:"bg-yellow-300 text-gray-900"},[e("th",{class:"px-4 py-2 border border-gray-300"},"Tanggal"),e("th",{class:"px-4 py-2 border border-gray-300"},"Gudang"),e("th",{class:"px-4 py-2 border border-gray-300"},"Outlet"),e("th",{class:"px-4 py-2 border border-gray-300"},"Nama Barang"),e("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Qty"),e("th",{class:"px-4 py-2 border border-gray-300"},"Unit"),e("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Harga"),e("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Subtotal")])],-1)),e("tbody",null,[d.report.length?A("",!0):(r(),o("tr",ae,t[18]||(t[18]=[e("td",{colspan:"8",class:"text-center py-10 text-gray-400"},"Tidak ada data.",-1)]))),(r(!0),o(k,null,_(d.report,l=>(r(),o("tr",{key:l.tanggal+"-"+l.gudang+"-"+l.outlet+"-"+l.nama_barang},[e("td",re,a(l.tanggal),1),e("td",se,a(l.gudang),1),e("td",oe,a(l.outlet),1),e("td",ne,a(l.nama_barang),1),e("td",de,a(l.qty),1),e("td",ue,a(l.unit),1),e("td",ie,a(T(l.harga)),1),e("td",pe,a(T(l.subtotal)),1)]))),128))]),d.report.length?(r(),o("tfoot",be,[e("tr",ge,[t[19]||(t[19]=e("td",{colspan:"7",class:"text-right px-6 py-3"},"Grand Total",-1)),e("td",me,a(T(B.value)),1)])])):A("",!0)])]),d.total>0?(r(),o("div",xe,[e("div",ce," Menampilkan "+a(C.value+1)+" - "+a(I.value)+" dari "+a(d.total)+" data ",1),e("div",ye,[e("button",{onClick:U,disabled:s.value===1,class:V(["px-3 py-1 rounded border text-sm",s.value===1?"bg-gray-200 text-gray-400":"bg-white text-blue-700 hover:bg-blue-50"])},"<",10,ve),e("span",fe,"Halaman "+a(s.value)+" / "+a(f.value),1),e("button",{onClick:O,disabled:s.value===f.value,class:V(["px-3 py-1 rounded border text-sm",s.value===f.value?"bg-gray-200 text-gray-400":"bg-white text-blue-700 hover:bg-blue-50"])},">",10,he)])])):A("",!0)])]),_:1}))}};export{Pe as default};
