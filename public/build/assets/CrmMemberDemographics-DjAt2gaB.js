import{u as p}from"./vendor-charts-CuqD4wLC.js";import{_ as g}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{L as s,B as a,D as o,G as u,F as b,M as f,Y as x,N as h}from"./vendor-vue-g7iCcTkf.js";import"./vendor-utils-CpgP2uT4.js";const y={name:"CrmMemberDemographics",props:{memberDemographics:{type:Array,default:()=>[]}},data(){return{chart:null,chartColors:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#EC4899","#6366F1"]}},watch:{memberDemographics:{handler(){this.renderChart()},deep:!0}},mounted(){this.renderChart()},beforeUnmount(){this.chart&&this.chart.destroy()},methods:{renderChart(){if(this.memberDemographics.length===0)return;const m=this.memberDemographics.map(e=>e.member_count),r=this.memberDemographics.map(e=>e.region||"Region Tidak Diketahui"),i=this.memberDemographics.map((e,t)=>this.chartColors[t%this.chartColors.length]),c=m.reduce((e,t)=>e+t,0),n={series:m,chart:{type:"pie",height:250,toolbar:{show:!1}},labels:r,colors:i,legend:{show:!1},dataLabels:{enabled:!0,formatter:function(e,t){const l=e.toFixed(1),d=t.w.globals.series[t.seriesIndex];return`${l}%
(${d})`},style:{fontSize:"12px",fontWeight:"bold"},dropShadow:{enabled:!0,opacity:.3,blur:3,color:"#000"}},plotOptions:{pie:{donut:{size:"60%",labels:{show:!0,total:{show:!0,label:"Total Member",fontSize:"16px",fontWeight:"bold",color:"#263238"},value:{show:!0,fontSize:"20px",fontWeight:"bold",color:"#263238"}}}}},tooltip:{y:{formatter:function(e){const t=(e/c*100).toFixed(1);return`${e} member (${t}%)`}}},responsive:[{breakpoint:480,options:{chart:{height:200},legend:{position:"bottom"}}}]};this.chart&&this.chart.destroy(),this.chart=new p(document.querySelector("#memberDemographicsChart"),n),this.chart.render()}}},D={class:"bg-white rounded-xl shadow-lg p-6"},C={key:0,class:"text-center py-8 text-gray-500"},_={key:1},k={class:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-2"},w={class:"font-medium"},F={class:"text-gray-500"};function B(m,r,i,c,n,e){return a(),s("div",D,[r[2]||(r[2]=o("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[o("i",{class:"fa-solid fa-chart-pie text-purple-500"}),u(" Demografi Member per Region ")],-1)),r[3]||(r[3]=o("p",{class:"text-sm text-gray-600 mb-4"}," Distribusi member berdasarkan region transaksi pertama ",-1)),i.memberDemographics.length===0?(a(),s("div",C,r[0]||(r[0]=[o("i",{class:"fa-solid fa-chart-pie text-4xl mb-4"},null,-1),o("p",null,"Tidak ada data demografi member",-1)]))):(a(),s("div",_,[r[1]||(r[1]=o("div",{id:"memberDemographicsChart",class:"w-full h-64"},null,-1)),o("div",k,[(a(!0),s(b,null,f(i.memberDemographics,(t,l)=>(a(),s("div",{key:l,class:"flex items-center gap-2 text-sm"},[o("div",{class:"w-3 h-3 rounded-full",style:x({backgroundColor:n.chartColors[l%n.chartColors.length]})},null,4),o("span",w,h(t.region||"Region Tidak Diketahui"),1),o("span",F,"("+h(t.member_count)+" member)",1)]))),128))])]))])}const T=g(y,[["render",B]]);export{T as default};
