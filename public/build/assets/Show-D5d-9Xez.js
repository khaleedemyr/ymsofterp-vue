import{r as b,A as D,B as i,C as v,D as t,L as l,E as u,N as a,Q as s,x as S,S as N,G as x,F as _,l as T,M as G,H as O,J as M,W as h}from"./vendor-vue-g7iCcTkf.js";import{A as V}from"./AppLayout-Cbd4awZb.js";import{S as c}from"./app-BGYKUG_N.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-BnNxTHIx.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const E={class:"space-y-6"},I={class:"flex justify-between items-center"},L={class:"text-gray-600"},U={class:"flex items-center gap-4"},W={class:"bg-white p-6 rounded-lg shadow-sm border"},q={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},z={class:"text-sm text-gray-900"},F={class:"text-sm text-gray-900"},K={class:"text-sm text-gray-900"},P={class:"text-sm text-gray-900"},Q={class:"text-sm text-gray-900"},$={class:"text-sm text-gray-900"},H={class:"text-xs text-gray-500"},J={key:0},Y={class:"text-sm text-gray-900 text-green-600"},X={class:"text-xs text-gray-500"},Z={key:1},tt={class:"text-sm text-gray-900 text-red-600"},et={class:"text-xs text-gray-500"},st={key:2},rt={class:"text-sm text-gray-900"},at={key:3},ot={class:"text-sm text-red-600"},nt={class:"bg-white rounded-lg shadow-sm border overflow-hidden"},it={class:"overflow-x-auto"},lt={class:"min-w-full divide-y divide-gray-200"},dt={class:"bg-white divide-y divide-gray-200"},ut={class:"px-6 py-4 whitespace-nowrap"},ct={class:"text-sm font-medium text-gray-900"},mt={class:"px-6 py-4 whitespace-nowrap"},xt={class:"text-sm text-gray-900"},pt={class:"px-6 py-4 whitespace-nowrap"},gt={class:"text-sm text-gray-900"},ft={class:"px-6 py-4 whitespace-nowrap"},yt={class:"text-sm text-gray-900"},bt={key:0,class:"text-center py-12"},vt={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},_t={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},ht={class:"mt-3"},wt={class:"mt-4"},kt={class:"flex justify-end gap-2 mt-4"},jt=["disabled"],Mt={__name:"Show",props:{user:Object,return:Object,items:Array},setup(w){const f=w,r=f.return,y=f.items,g=b(!1),d=b("");function k(n){switch(n){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function j(n){switch(n){case"pending":return"Pending";case"approved":return"Approved";case"rejected":return"Rejected";default:return n}}function p(n){return n?new Date(n).toLocaleDateString("id-ID"):"-"}async function R(){var e,o;if((await c.fire({title:"Approve Return?",text:"Apakah Anda yakin ingin approve return ini?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",reverseButtons:!0})).isConfirmed)try{const m=await axios.post(`/head-office-return/${r.id}/approve`);m.data.success&&(await c.fire({icon:"success",title:"Berhasil",text:m.data.message,timer:1500,showConfirmButton:!1}),h.visit("/head-office-return"))}catch(m){console.error("Error approving return:",m),await c.fire({icon:"error",title:"Gagal",text:((o=(e=m.response)==null?void 0:e.data)==null?void 0:o.message)||"Gagal approve return"})}}function B(){d.value="",g.value=!0}function A(){g.value=!1,d.value=""}async function C(){var n,e;if(!d.value.trim()){await c.fire({icon:"warning",title:"Perhatian",text:"Alasan reject harus diisi"});return}try{const o=await axios.post(`/head-office-return/${r.id}/reject`,{rejection_reason:d.value});o.data.success&&(await c.fire({icon:"success",title:"Berhasil",text:o.data.message,timer:1500,showConfirmButton:!1}),h.visit("/head-office-return"))}catch(o){console.error("Error rejecting return:",o),await c.fire({icon:"error",title:"Gagal",text:((e=(n=o.response)==null?void 0:n.data)==null?void 0:e.message)||"Gagal reject return"})}}return(n,e)=>(i(),D(V,null,{default:v(()=>[t("div",E,[t("div",I,[t("div",null,[e[1]||(e[1]=t("h1",{class:"text-2xl font-bold text-gray-900"},"Detail Return",-1)),t("p",L,a(s(r).return_number),1)]),t("div",U,[S(s(N),{href:"/head-office-return",class:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"},{default:v(()=>e[2]||(e[2]=[t("i",{class:"fa fa-arrow-left mr-2"},null,-1),x(" Kembali ")])),_:1}),s(r).status==="pending"?(i(),l(_,{key:0},[t("button",{onClick:R,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"},e[3]||(e[3]=[t("i",{class:"fa fa-check mr-2"},null,-1),x(" Approve ")])),t("button",{onClick:B,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"},e[4]||(e[4]=[t("i",{class:"fa fa-times mr-2"},null,-1),x(" Reject ")]))],64)):u("",!0)])]),t("div",W,[e[18]||(e[18]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Informasi Return",-1)),t("div",q,[t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"No. Return",-1)),t("p",z,a(s(r).return_number),1)]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Outlet",-1)),t("p",F,a(s(r).nama_outlet),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Warehouse",-1)),t("p",K,a(s(r).warehouse_name),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"No. Good Receive",-1)),t("p",P,a(s(r).gr_number),1)]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal Return",-1)),t("p",Q,a(p(s(r).return_date)),1)]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),t("span",{class:T([k(s(r).status),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},a(j(s(r).status)),3)]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Dibuat Oleh",-1)),t("p",$,a(s(r).created_by_name),1),t("p",H,a(p(s(r).created_at)),1)]),s(r).approved_by_name?(i(),l("div",J,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Approved Oleh",-1)),t("p",Y,[e[12]||(e[12]=t("i",{class:"fa fa-check mr-1"},null,-1)),x(a(s(r).approved_by_name),1)]),t("p",X,a(p(s(r).approved_at)),1)])):u("",!0),s(r).rejected_by_name?(i(),l("div",Z,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Rejected Oleh",-1)),t("p",tt,[e[14]||(e[14]=t("i",{class:"fa fa-times mr-1"},null,-1)),x(a(s(r).rejected_by_name),1)]),t("p",et,a(p(s(r).rejection_at)),1)])):u("",!0),s(r).notes?(i(),l("div",st,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Catatan",-1)),t("p",rt,a(s(r).notes),1)])):u("",!0),s(r).rejection_reason?(i(),l("div",at,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Alasan Reject",-1)),t("p",ot,a(s(r).rejection_reason),1)])):u("",!0)])]),t("div",nt,[e[21]||(e[21]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h2",{class:"text-lg font-semibold text-gray-900"},"Item yang Di-return")],-1)),t("div",it,[t("table",lt,[e[19]||(e[19]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Item "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," SKU "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Qty Return "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Unit ")])],-1)),t("tbody",dt,[(i(!0),l(_,null,G(s(y),o=>(i(),l("tr",{key:o.id,class:"hover:bg-gray-50"},[t("td",ut,[t("div",ct,a(o.item_name),1)]),t("td",mt,[t("div",xt,a(o.sku),1)]),t("td",pt,[t("div",gt,a(o.return_qty),1)]),t("td",ft,[t("div",yt,a(o.unit_name),1)])]))),128))])])]),s(y).length===0?(i(),l("div",bt,e[20]||(e[20]=[t("i",{class:"fa fa-inbox text-4xl text-gray-300 mb-4"},null,-1),t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Tidak ada item",-1),t("p",{class:"text-gray-500"},"Belum ada item yang di-return",-1)]))):u("",!0)])]),g.value?(i(),l("div",vt,[t("div",_t,[t("div",ht,[e[23]||(e[23]=t("div",{class:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full"},[t("i",{class:"fa fa-times text-red-600"})],-1)),e[24]||(e[24]=t("div",{class:"mt-2 text-center"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Reject Return"),t("div",{class:"mt-2 px-7 py-3"},[t("p",{class:"text-sm text-gray-500"},"Apakah Anda yakin ingin reject return ini?")])],-1)),t("div",wt,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Alasan Reject",-1)),O(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=o=>d.value=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Masukkan alasan reject..."},null,512),[[M,d.value]])]),t("div",kt,[t("button",{onClick:A,class:"px-4 py-2 text-sm text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"}," Batal "),t("button",{onClick:C,disabled:!d.value.trim(),class:"px-4 py-2 text-sm text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Reject ",8,jt)])])])])):u("",!0)]),_:1}))}};export{Mt as default};
