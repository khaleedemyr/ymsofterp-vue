import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as p,a as P,w as j,L as l,B as a,D as t,E as f,G as v,N as n,F as _,M as w,Y as D,l as C}from"./vendor-vue-g7iCcTkf.js";import"./vendor-utils-CpgP2uT4.js";const O={class:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4"},A={class:"max-w-7xl w-full"},B={class:"text-center mb-8"},G={class:"text-yellow-200 text-lg"},z={class:"text-blue-200 text-sm"},F={class:"flex justify-center mb-8"},R={class:"bg-black bg-opacity-50 rounded-3xl p-8 shadow-2xl backdrop-blur-sm border-4 border-yellow-400"},V={class:"slot-machine-frame bg-gradient-to-b from-gray-800 to-gray-900 rounded-2xl p-6 border-2 border-yellow-300"},W={class:"flex gap-4 mb-6"},Y={class:"reel-window h-64 w-32 bg-black rounded-lg overflow-hidden relative"},q={class:"text-xs font-bold"},H={class:"truncate"},J={key:0,class:"text-xs opacity-75 truncate"},K={class:"text-center mt-2"},Q={class:"text-yellow-400 font-bold text-lg"},U={class:"text-center"},X=["disabled"],Z={key:0,class:"text-center mb-8"},tt={class:"bg-black bg-opacity-50 rounded-2xl p-6 shadow-2xl max-w-4xl mx-auto backdrop-blur-sm border-2 border-yellow-400"},et={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ot={class:"absolute -top-2 -right-2 bg-yellow-500 text-black rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold"},st={class:"text-xl font-bold mb-2"},lt={key:0,class:"text-sm text-yellow-100"},at={key:1,class:"text-sm text-yellow-100"},nt={key:1,class:"bg-black bg-opacity-50 rounded-2xl p-6 shadow-2xl backdrop-blur-sm border-2 border-yellow-400"},rt={class:"text-2xl font-bold text-yellow-400 mb-4 flex items-center gap-2"},it={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 max-h-96 overflow-y-auto"},dt={class:"absolute -top-1 -right-1 bg-yellow-500 text-black rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold"},ct={class:"font-bold text-sm mb-1 truncate"},ut={key:0,class:"text-xs text-yellow-100 truncate"},ht={__name:"SlotMachine",props:{roulettes:Array},setup(S){const d=S,u=p(!1),h=p([]),b=p([]),y=p(20),E=p(3),g=p([]),k=()=>{g.value=[];for(let s=0;s<E.value;s++)g.value.push({items:[],offset:0,winnerIndex:-1,spinning:!1});M()},M=()=>{if(!d.roulettes||d.roulettes.length===0){console.log("No roulettes data available");return}console.log("Populating reels with",d.roulettes.length,"participants");const s=[...d.roulettes].sort(()=>Math.random()-.5);g.value.forEach((e,o)=>{const i=o*y.value%s.length;let r=[];for(let c=0;c<y.value;c++){const x=(i+c)%s.length;r.push(s[x])}const m=Math.min(10,s.length);for(let c=0;c<m;c++){const x=c%s.length;r.push(s[x])}e.items=r,console.log(`Reel ${o+1} populated with ${e.items.length} items`)})},$=()=>{var s;if(u.value||!d.roulettes||d.roulettes.length===0){console.log("Cannot spin: isSpinning=",u.value,"roulettes length=",(s=d.roulettes)==null?void 0:s.length);return}console.log("Starting spin with",d.roulettes.length,"participants"),u.value=!0,h.value=[],g.value.forEach(e=>{e.offset=0,e.winnerIndex=-1}),M(),g.value.forEach((e,o)=>{const i=3e3+o*500,r=Math.floor(Math.random()*y.value)*64;console.log(`Reel ${o+1} spinning to offset ${r} with ${e.items.length} items`);const m=Date.now(),c=()=>{const x=Date.now()-m,N=Math.min(x/i,1),T=1-Math.pow(1-N,3);e.offset=T*(r+1e3),N<1?requestAnimationFrame(c):(e.offset=r,e.winnerIndex=Math.floor(r/64),e.items[e.winnerIndex]&&(h.value.push(e.items[e.winnerIndex]),console.log(`Reel ${o+1} winner:`,e.items[e.winnerIndex].nama)),o===g.value.length-1&&setTimeout(()=>{u.value=!1,b.value.push(...h.value),console.log("Spin completed with",h.value.length,"winners")},1e3))};setTimeout(()=>{c()},o*200)})},I=()=>{u.value=!1,h.value=[],b.value=[],k()};return P(()=>{var s;console.log("SlotMachine mounted with",(s=d.roulettes)==null?void 0:s.length,"participants"),k()}),j(()=>d.roulettes,s=>{console.log("Roulettes data changed:",s==null?void 0:s.length,"participants"),s&&s.length>0&&k()},{immediate:!0}),(s,e)=>(a(),l("div",O,[t("div",A,[t("div",B,[e[0]||(e[0]=t("h1",{class:"text-4xl font-bold text-white mb-2"},[t("i",{class:"fa-solid fa-slot-machine text-yellow-400 mr-3"}),v(" YMSoft SLOT MACHINE ")],-1)),t("p",G,"Total Peserta: "+n(S.roulettes.length.toLocaleString())+" orang",1),t("p",z,"Menampilkan "+n(y.value)+" peserta per reel",1)]),t("div",F,[t("div",R,[t("div",V,[t("div",W,[(a(!0),l(_,null,w(g.value,(o,i)=>(a(),l("div",{key:i,class:"reel-container bg-gradient-to-b from-gray-700 to-gray-800 rounded-xl p-4 border-2 border-yellow-200 relative overflow-hidden"},[t("div",Y,[t("div",{class:C(["reel-items",{spinning:u.value}]),style:D({transform:`translateY(${o.offset}px)`})},[(a(!0),l(_,null,w(o.items,(r,m)=>(a(),l("div",{key:`${i}-${m}`,class:C(["reel-item h-16 w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white flex items-center justify-center text-center p-2 border-b border-gray-600",{"winner-highlight":o.winnerIndex===m&&!u.value}])},[t("div",q,[t("div",H,n(r.nama),1),r.no_hp?(a(),l("div",J,n(r.no_hp),1)):f("",!0)])],2))),128))],6),e[1]||(e[1]=t("div",{class:"absolute top-1/2 left-0 right-0 h-16 bg-yellow-400 bg-opacity-30 border-y-2 border-yellow-400 transform -translate-y-8 pointer-events-none"},null,-1))]),t("div",K,[t("span",Q,"REEL "+n(i+1),1)])]))),128))]),t("div",U,[t("button",{onClick:$,disabled:u.value,class:"bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-12 py-4 rounded-full text-2xl font-bold shadow-2xl hover:shadow-3xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105"},[e[2]||(e[2]=t("i",{class:"fa-solid fa-play mr-3"},null,-1)),v(" "+n(u.value?"SPINNING...":"SPIN SLOT!"),1)],8,X)])])])]),h.value.length>0?(a(),l("div",Z,[t("div",tt,[e[3]||(e[3]=t("h2",{class:"text-3xl font-bold text-yellow-400 mb-4"},[t("i",{class:"fa-solid fa-trophy mr-3"}),v(" JACKPOT WINNERS! ")],-1)),t("div",et,[(a(!0),l(_,null,w(h.value,(o,i)=>(a(),l("div",{key:o.id,class:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white p-4 rounded-xl border-2 border-yellow-300 relative"},[t("div",ot,n(i+1),1),t("h3",st,n(o.nama),1),o.email?(a(),l("p",lt,n(o.email),1)):f("",!0),o.no_hp?(a(),l("p",at,n(o.no_hp),1)):f("",!0)]))),128))])])])):f("",!0),b.value.length>0?(a(),l("div",nt,[t("h3",rt,[e[4]||(e[4]=t("i",{class:"fa-solid fa-trophy"},null,-1)),v(" Semua Pemenang ("+n(b.value.length)+") ",1)]),t("div",it,[(a(!0),l(_,null,w(b.value,(o,i)=>(a(),l("div",{key:o.id,class:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white p-3 rounded-lg border border-yellow-300 relative"},[t("div",dt,n(i+1),1),t("h4",ct,n(o.nama),1),o.no_hp?(a(),l("p",ut,n(o.no_hp),1)):f("",!0)]))),128))])])):f("",!0),t("div",{class:"text-center mt-8"},[t("button",{onClick:I,class:"bg-gray-600 hover:bg-gray-700 text-white px-8 py-3 rounded-xl font-semibold transition-all border-2 border-gray-500"},e[5]||(e[5]=[t("i",{class:"fa-solid fa-redo mr-2"},null,-1),v(" Reset Game ")]))])])]))}},ft=L(ht,[["__scopeId","data-v-bba4ce5b"]]);export{ft as default};
