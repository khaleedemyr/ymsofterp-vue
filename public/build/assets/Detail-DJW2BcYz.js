import{A as S}from"./AppLayout-BKllqouQ.js";import{$ as j,c as g,A as T,B as r,C as I,D as t,L as n,E as m,G as p,N as a,l as h,F as y,M as b,W as v}from"./vendor-vue-g7iCcTkf.js";import{a as N}from"./vendor-utils-CpgP2uT4.js";import{S as c}from"./app-DlrnVByK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-10Z7fBeb.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const L={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 md:px-8"},H={class:"w-full max-w-4xl bg-white rounded-2xl shadow-2xl p-8"},M={class:"flex justify-between items-center mb-8"},R={class:"flex gap-2"},$={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},A={class:"font-medium"},G={class:"font-medium"},O={class:"font-medium"},V={class:"font-medium"},E={class:"font-medium"},q={class:"font-medium"},z={class:"mb-8"},K={class:"overflow-x-auto"},P={class:"min-w-full divide-y divide-gray-200"},Q={class:"bg-white divide-y divide-gray-200"},U={class:"px-3 py-2"},Y={class:"px-3 py-2"},J={class:"px-3 py-2"},X={class:"px-3 py-2"},Z={class:"px-3 py-2 text-right"},tt={class:"px-3 py-2 text-right font-bold"},et={key:0,class:"mb-8"},st={class:"bg-gray-50 p-4 rounded-lg"},at={key:1,class:"mb-8"},ot={class:"flex flex-wrap gap-3"},it=["href"],rt=["src"],ht={__name:"Detail",props:{retailWarehouseFood:Object},setup(_){const s=_,w=j(),F=g(()=>{var o,e;return((e=(o=w.props.auth)==null?void 0:o.user)==null?void 0:e.id_outlet)||""}),W=g(()=>F.value===1);function k(o){return o?new Date(o).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):""}function D(o){return{draft:"Draft",approved:"Disetujui",rejected:"Ditolak",cancelled:"Dibatalkan"}[o]||o}function u(o){return o?"Rp "+Number(o).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2}):"Rp 0"}function B(){v.visit("/retail-warehouse-food")}async function C(){var e,d;if((await c.fire({title:"Hapus Transaksi?",text:"Transaksi yang dihapus tidak dapat dikembalikan",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal",confirmButtonColor:"#ef4444"})).isConfirmed)try{const l=await N.delete(`/retail-warehouse-food/${s.retailWarehouseFood.id}`);l.data.message&&(await c.fire({icon:"success",title:"Berhasil",text:l.data.message,timer:1500,showConfirmButton:!1}),v.visit("/retail-warehouse-food"))}catch(l){c.fire({icon:"error",title:"Gagal",text:((d=(e=l.response)==null?void 0:e.data)==null?void 0:d.message)||"Gagal menghapus transaksi"})}}return(o,e)=>(r(),T(S,null,{default:I(()=>{var d,l,x,f;return[t("div",L,[t("div",H,[t("div",M,[e[2]||(e[2]=t("h1",{class:"text-2xl font-bold flex items-center gap-2 text-blue-700"},[t("i",{class:"fa-solid fa-warehouse text-blue-500"}),p(" Detail Warehouse Retail Food ")],-1)),t("div",R,[t("button",{onClick:B,class:"btn btn-ghost px-4 py-2 rounded-lg"},e[0]||(e[0]=[t("i",{class:"fa fa-arrow-left mr-2"},null,-1),p(" Kembali ")])),W.value?(r(),n("button",{key:0,onClick:C,class:"btn btn-error px-4 py-2 rounded-lg"},e[1]||(e[1]=[t("i",{class:"fa fa-trash mr-2"},null,-1),p(" Hapus ")]))):m("",!0)])]),t("div",$,[t("div",null,[e[3]||(e[3]=t("div",{class:"text-sm text-gray-500 mb-1"},"Tanggal",-1)),t("div",A,a(k(s.retailWarehouseFood.transaction_date)),1)]),t("div",null,[e[4]||(e[4]=t("div",{class:"text-sm text-gray-500 mb-1"},"No Transaksi",-1)),t("div",G,a(s.retailWarehouseFood.retail_number),1)]),t("div",null,[e[5]||(e[5]=t("div",{class:"text-sm text-gray-500 mb-1"},"Warehouse",-1)),t("div",O,a(((d=s.retailWarehouseFood.warehouse)==null?void 0:d.name)||s.retailWarehouseFood.warehouse_name||"-"),1)]),t("div",null,[e[6]||(e[6]=t("div",{class:"text-sm text-gray-500 mb-1"},"Warehouse Division",-1)),t("div",V,a(((l=s.retailWarehouseFood.warehouse_division)==null?void 0:l.name)||s.retailWarehouseFood.warehouse_division_name||"-"),1)]),t("div",null,[e[7]||(e[7]=t("div",{class:"text-sm text-gray-500 mb-1"},"Status",-1)),t("div",null,[t("span",{class:h(["px-2 py-1 rounded text-xs font-medium",s.retailWarehouseFood.status==="approved"?"bg-green-100 text-green-800":s.retailWarehouseFood.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},a(D(s.retailWarehouseFood.status)),3)])]),t("div",null,[e[8]||(e[8]=t("div",{class:"text-sm text-gray-500 mb-1"},"Metode Pembayaran",-1)),t("div",null,[t("span",{class:h(["px-2 py-1 rounded text-xs font-medium",s.retailWarehouseFood.payment_method==="cash"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"])},a(s.retailWarehouseFood.payment_method==="cash"?"Cash":"Contra Bon"),3)])]),t("div",null,[e[9]||(e[9]=t("div",{class:"text-sm text-gray-500 mb-1"},"Supplier",-1)),t("div",E,a(((x=s.retailWarehouseFood.supplier)==null?void 0:x.name)||"-"),1)]),t("div",null,[e[10]||(e[10]=t("div",{class:"text-sm text-gray-500 mb-1"},"Dibuat Oleh",-1)),t("div",q,a(((f=s.retailWarehouseFood.creator)==null?void 0:f.nama_lengkap)||"-"),1)])]),t("div",z,[e[13]||(e[13]=t("div",{class:"text-sm text-gray-500 mb-2"},"Items",-1)),t("div",K,[t("table",P,[e[12]||(e[12]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Item"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Qty"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Unit"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Harga"),t("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase"},"Subtotal")])],-1)),t("tbody",Q,[(r(!0),n(y,null,b(s.retailWarehouseFood.items,i=>(r(),n("tr",{key:i.id},[t("td",U,a(i.item_name),1),t("td",Y,a(i.qty),1),t("td",J,a(i.unit),1),t("td",X,a(u(i.price)),1),t("td",Z,a(u(i.subtotal)),1)]))),128))]),t("tfoot",null,[t("tr",null,[e[11]||(e[11]=t("td",{colspan:"4",class:"px-3 py-2 text-right font-bold"},"Total:",-1)),t("td",tt,a(u(s.retailWarehouseFood.total_amount)),1)])])])])]),s.retailWarehouseFood.notes?(r(),n("div",et,[e[14]||(e[14]=t("div",{class:"text-sm text-gray-500 mb-1"},"Catatan",-1)),t("div",st,a(s.retailWarehouseFood.notes),1)])):m("",!0),s.retailWarehouseFood.invoices&&s.retailWarehouseFood.invoices.length?(r(),n("div",at,[e[15]||(e[15]=t("div",{class:"text-sm text-gray-500 mb-1"},"Bon/Invoice",-1)),t("div",ot,[(r(!0),n(y,null,b(s.retailWarehouseFood.invoices,i=>(r(),n("div",{key:i.id,class:"w-32 h-32 border rounded overflow-hidden flex items-center justify-center bg-gray-50"},[t("a",{href:`/storage/${i.file_path}`,target:"_blank",rel:"noopener"},[t("img",{src:`/storage/${i.file_path}`,class:"object-contain w-full h-full hover:scale-110 transition-transform duration-200"},null,8,rt)],8,it)]))),128))])])):m("",!0)])])]}),_:1}))}};export{ht as default};
