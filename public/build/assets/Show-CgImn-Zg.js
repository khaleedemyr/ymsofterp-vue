import{r as _,c as w,L as n,B as i,x as j,Q as T,U as P,C as R,D as t,E as m,G as u,N as o,l as g,F as f,M as k,H as L,J as V,W as p}from"./vendor-vue-g7iCcTkf.js";import{A as z}from"./AppLayout-C22rYVZx.js";import{S as c}from"./app-CQcWanFv.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./ProfileUpdateModal-DO0UW4jb.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const F={class:"w-full py-8 px-4 md:px-6"},G={class:"mb-6"},J={class:"flex items-center gap-4"},W={class:"text-gray-600 mt-1"},$={class:"font-mono font-semibold text-blue-600"},H={class:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-6"},M={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},U={class:"space-y-4"},q={class:"p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200"},Q={class:"text-lg font-bold text-gray-900 font-mono"},Y={class:"p-4 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border border-gray-200"},K={class:"text-lg font-semibold text-gray-900"},X={class:"p-4 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border border-gray-200"},Z={class:"text-lg font-semibold text-gray-900"},tt={class:"p-4 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border border-gray-200"},et={class:"text-lg font-semibold text-gray-900"},st={class:"space-y-4"},at={class:"p-4 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border border-gray-200"},rt={class:"p-4 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border border-gray-200"},ot={class:"p-4 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border border-gray-200"},nt={class:"text-lg font-semibold text-gray-900"},it={class:"p-4 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border border-gray-200"},dt={class:"text-sm font-medium text-gray-700"},lt={class:"mt-6 p-4 bg-gradient-to-br from-amber-50 to-amber-100 rounded-xl border border-amber-200"},ut={class:"text-gray-900 font-medium"},ct={class:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-6"},gt={class:"flex items-center justify-between mb-4"},mt={class:"text-xl font-bold text-gray-900 flex items-center gap-2"},bt={class:"overflow-x-auto"},pt={class:"min-w-full divide-y divide-gray-200"},xt={class:"bg-white divide-y divide-gray-200"},ft={class:"px-6 py-4 whitespace-nowrap"},vt={class:"flex items-center"},yt={class:"flex-shrink-0 h-10 w-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mr-3 shadow-md"},ht={class:"text-white font-bold text-sm"},_t={class:"text-sm font-semibold text-gray-900"},wt={class:"px-6 py-4 whitespace-nowrap text-right"},jt={class:"text-sm font-bold text-gray-900"},kt={class:"px-6 py-4 whitespace-nowrap"},Dt={class:"px-3 py-1 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium"},At={class:"px-6 py-4"},Ct={class:"text-sm text-gray-600"},St={key:0,class:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-6"},Et={class:"space-y-4"},Bt={class:"flex gap-3"},Nt=["disabled"],Ot={key:0,class:"fa fa-check relative z-10"},Tt={key:1,class:"fa fa-spinner fa-spin relative z-10"},Pt={class:"relative z-10"},Rt=["disabled"],Lt={key:0,class:"fa fa-times relative z-10"},Vt={key:1,class:"fa fa-spinner fa-spin relative z-10"},zt={class:"relative z-10"},It={key:1,class:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6"},Ft={class:"space-y-4"},Gt={class:"flex justify-between items-start"},Jt={class:"flex-1"},Wt={class:"flex items-center gap-2 mb-2"},$t={class:"font-bold text-gray-900"},Ht={key:0,class:"text-xs text-gray-500"},Mt={key:0,class:"text-sm text-gray-700 ml-12 mt-2"},Ut={key:1,class:"text-sm text-gray-500 ml-12 mt-2 italic"},qt={class:"text-right"},Qt={key:0,class:"text-xs text-gray-500 font-medium"},Yt={key:1,class:"text-xs text-gray-400 italic"},Kt={key:2,class:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6"},Xt={__name:"Show",props:{adjustment:Object,user:Object},setup(r){const d=r,l=_(!1),b=_(""),D=w(()=>{const s=d.user;return s&&s.id_role==="5af56935b011a"&&s.status==="A"?d.adjustment.status==="waiting_approval"||d.adjustment.status==="waiting_cost_control":s&&s.id_jabatan==161?d.adjustment.status==="waiting_approval":s&&s.id_jabatan==167?d.adjustment.status==="waiting_cost_control":!1}),A=w(()=>{const s=d.user;return s&&s.id_role==="5af56935b011a"&&s.status==="A"?d.adjustment.status==="waiting_approval"||d.adjustment.status==="waiting_cost_control":s&&s.id_jabatan==161?d.adjustment.status==="waiting_approval":s&&s.id_jabatan==167?d.adjustment.status==="waiting_cost_control":!1}),C=s=>{switch(s){case"waiting_approval":return"bg-gradient-to-r from-yellow-100 to-yellow-50 text-yellow-800 border border-yellow-200";case"waiting_cost_control":return"bg-gradient-to-r from-blue-100 to-blue-50 text-blue-800 border border-blue-200";case"approved":return"bg-gradient-to-r from-green-100 to-green-50 text-green-800 border border-green-200";case"rejected":return"bg-gradient-to-r from-red-100 to-red-50 text-red-800 border border-red-200";default:return"bg-gradient-to-r from-gray-100 to-gray-50 text-gray-800 border border-gray-200"}},S=s=>{switch(s){case"waiting_approval":return"Waiting Approval";case"waiting_cost_control":return"Waiting Cost Control";case"approved":return"Approved";case"rejected":return"Rejected";default:return s}},E=s=>{if(!s)return"-";const e=new Date(s);return isNaN(e)?"-":e.toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})},v=s=>{if(!s)return"-";const e=new Date(s);return isNaN(e)?"-":e.toLocaleString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},B=s=>s==null?"0":Number(s).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2});function N(){c.fire({title:"Approve Outlet Stock Adjustment?",text:"Setelah approve, data akan diproses ke inventory jika sudah final. Lanjutkan?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#10B981",cancelButtonColor:"#6B7280",preConfirm:()=>(l.value=!0,p.post(`/outlet-food-inventory-adjustment/${d.adjustment.id}/approve`,{note:b.value},{preserveScroll:!0,onSuccess:()=>{c.fire("Berhasil","Outlet stock adjustment berhasil di-approve!","success"),p.reload()},onError:s=>{c.fire("Gagal",(s==null?void 0:s.error)||"Gagal approve","error")},onFinish:()=>{l.value=!1}})),allowOutsideClick:()=>!c.isLoading()})}function O(){c.fire({title:"Reject Outlet Stock Adjustment?",text:"Data akan ditolak dan tidak diproses ke inventory. Lanjutkan?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, Reject",cancelButtonText:"Batal",confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280",preConfirm:()=>(l.value=!0,p.post(`/outlet-food-inventory-adjustment/${d.adjustment.id}/reject`,{note:b.value},{preserveScroll:!0,onSuccess:()=>{c.fire("Ditolak","Outlet stock adjustment berhasil direject.","success"),p.reload()},onError:s=>{c.fire("Gagal",(s==null?void 0:s.error)||"Gagal reject","error")},onFinish:()=>{l.value=!1}})),allowOutsideClick:()=>!c.isLoading()})}return(s,e)=>(i(),n(f,null,[j(T(P),{title:"Outlet Stock Adjustment #"+r.adjustment.number},null,8,["title"]),j(z,null,{default:R(()=>{var y;return[t("div",F,[t("div",G,[t("button",{onClick:e[0]||(e[0]=a=>s.$inertia.visit("/outlet-food-inventory-adjustment")),class:"group mb-4 inline-flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-blue-600 transition-colors duration-200"},e[2]||(e[2]=[t("i",{class:"fa fa-arrow-left group-hover:-translate-x-1 transition-transform duration-200"},null,-1),t("span",{class:"font-medium"},"Kembali",-1)])),t("div",J,[e[5]||(e[5]=t("div",{class:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl shadow-lg"},[t("i",{class:"fa-solid fa-store text-white text-2xl"})],-1)),t("div",null,[e[4]||(e[4]=t("h1",{class:"text-3xl font-bold text-gray-900"},"Outlet Stock Adjustment Detail",-1)),t("p",W,[e[3]||(e[3]=u("Nomor: ")),t("span",$,o(r.adjustment.number),1)])])])]),t("div",H,[t("div",M,[t("div",U,[t("div",q,[e[6]||(e[6]=t("div",{class:"text-xs font-semibold text-blue-600 uppercase tracking-wide mb-1"},"Nomor Adjustment",-1)),t("div",Q,o(r.adjustment.number),1)]),t("div",Y,[e[7]||(e[7]=t("div",{class:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1"},"Tanggal",-1)),t("div",K,o(E(r.adjustment.date)),1)]),t("div",X,[e[8]||(e[8]=t("div",{class:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1"},"Outlet",-1)),t("div",Z,o(r.adjustment.nama_outlet||"-"),1)]),t("div",tt,[e[9]||(e[9]=t("div",{class:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1"},"Warehouse Outlet",-1)),t("div",et,o(r.adjustment.warehouse_outlet_name||"-"),1)])]),t("div",st,[t("div",at,[e[10]||(e[10]=t("div",{class:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1"},"Tipe",-1)),t("div",null,[t("span",{class:g(["inline-block px-4 py-2 rounded-full text-sm font-bold shadow-sm",r.adjustment.type==="in"?"bg-gradient-to-r from-green-100 to-green-50 text-green-800 border border-green-200":"bg-gradient-to-r from-red-100 to-red-50 text-red-800 border border-red-200"])},[t("i",{class:g([r.adjustment.type==="in"?"fa fa-arrow-down":"fa fa-arrow-up","mr-2"])},null,2),u(" "+o(r.adjustment.type==="in"?"Stock In":"Stock Out"),1)],2)])]),t("div",rt,[e[11]||(e[11]=t("div",{class:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1"},"Status",-1)),t("div",null,[t("span",{class:g(["inline-block px-4 py-2 rounded-full text-sm font-bold shadow-sm",C(r.adjustment.status)])},o(S(r.adjustment.status)),3)])]),t("div",ot,[e[12]||(e[12]=t("div",{class:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1"},"Dibuat Oleh",-1)),t("div",nt,o(r.adjustment.creator_nama_lengkap||"-"),1)]),t("div",it,[e[13]||(e[13]=t("div",{class:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1"},"Dibuat Pada",-1)),t("div",dt,o(v(r.adjustment.created_at)),1)])])]),t("div",lt,[e[14]||(e[14]=t("div",{class:"text-xs font-semibold text-amber-700 uppercase tracking-wide mb-2"},[t("i",{class:"fa fa-info-circle mr-2"}),u("Alasan ")],-1)),t("div",ut,o(r.adjustment.reason),1)])]),t("div",ct,[t("div",gt,[t("h3",mt,[e[15]||(e[15]=t("div",{class:"p-2 bg-blue-100 rounded-lg"},[t("i",{class:"fa fa-boxes text-blue-600"})],-1)),u(" Items ("+o(((y=r.adjustment.items)==null?void 0:y.length)||0)+") ",1)])]),t("div",bt,[t("table",pt,[e[16]||(e[16]=t("thead",{class:"bg-gradient-to-r from-gray-50 to-gray-100"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Item"),t("th",{class:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Quantity"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Unit"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Note")])],-1)),t("tbody",xt,[(i(!0),n(f,null,k(r.adjustment.items,(a,x)=>{var h;return i(),n("tr",{key:a.id,class:"hover:bg-gradient-to-r hover:from-blue-50 hover:to-transparent transition-all duration-200"},[t("td",ft,[t("div",vt,[t("div",yt,[t("span",ht,o(x+1),1)]),t("div",_t,o(a.item_name||((h=a.item)==null?void 0:h.name)||"-"),1)])]),t("td",wt,[t("div",jt,o(B(a.qty)),1)]),t("td",kt,[t("span",Dt,o(a.unit||"-"),1)]),t("td",At,[t("div",Ct,o(a.note||"-"),1)])])}),128))])])])]),r.adjustment.status!=="approved"&&r.adjustment.status!=="rejected"?(i(),n("div",St,[e[20]||(e[20]=t("h3",{class:"text-xl font-bold text-gray-900 flex items-center gap-2 mb-4"},[t("div",{class:"p-2 bg-green-100 rounded-lg"},[t("i",{class:"fa fa-check-circle text-green-600"})]),u(" Approval Action ")],-1)),t("div",Et,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa fa-comment text-gray-400 mr-2"}),u("Note ")],-1)),L(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=a=>b.value=a),rows:"4",class:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 shadow-sm hover:shadow-md resize-none",placeholder:"Enter approval/rejection note..."},null,512),[[V,b.value]])]),t("div",Bt,[D.value?(i(),n("button",{key:0,onClick:N,disabled:l.value,class:"group relative px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 font-semibold flex items-center gap-2 overflow-hidden disabled:opacity-50 disabled:cursor-not-allowed"},[e[18]||(e[18]=t("span",{class:"absolute inset-0 bg-gradient-to-r from-green-600 to-green-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),l.value?(i(),n("i",Tt)):(i(),n("i",Ot)),t("span",Pt,o(l.value?"Processing...":"Approve"),1)],8,Nt)):m("",!0),A.value?(i(),n("button",{key:1,onClick:O,disabled:l.value,class:"group relative px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 font-semibold flex items-center gap-2 overflow-hidden disabled:opacity-50 disabled:cursor-not-allowed"},[e[19]||(e[19]=t("span",{class:"absolute inset-0 bg-gradient-to-r from-red-600 to-red-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),l.value?(i(),n("i",Vt)):(i(),n("i",Lt)),t("span",zt,o(l.value?"Processing...":"Reject"),1)],8,Rt)):m("",!0)])])])):m("",!0),(r.adjustment.status==="approved"||r.adjustment.status==="rejected")&&r.adjustment.approval_flows&&r.adjustment.approval_flows.length>0?(i(),n("div",It,[e[21]||(e[21]=t("h3",{class:"text-xl font-bold text-gray-900 flex items-center gap-2 mb-4"},[t("div",{class:"p-2 bg-purple-100 rounded-lg"},[t("i",{class:"fa fa-history text-purple-600"})]),u(" Approval History ")],-1)),t("div",Ft,[(i(!0),n(f,null,k(r.adjustment.approval_flows,(a,x)=>(i(),n("div",{key:a.id,class:g(["p-5 rounded-xl border hover:shadow-md transition-shadow duration-200",a.status==="APPROVED"?"bg-gradient-to-br from-green-50 to-green-100 border-green-200":a.status==="REJECTED"?"bg-gradient-to-br from-red-50 to-red-100 border-red-200":"bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200"])},[t("div",Gt,[t("div",Jt,[t("div",Wt,[t("div",{class:g(["p-2 rounded-lg",a.status==="APPROVED"?"bg-green-500":a.status==="REJECTED"?"bg-red-500":"bg-yellow-500"])},[t("i",{class:g(["text-white text-sm",a.status==="APPROVED"?"fa fa-check":a.status==="REJECTED"?"fa fa-times":"fa fa-clock"])},null,2)],2),t("div",null,[t("div",$t,o(a.nama_lengkap||a.nama_jabatan||"Approver "+(x+1)),1),a.nama_jabatan?(i(),n("div",Ht,o(a.nama_jabatan),1)):m("",!0)])]),a.comments?(i(),n("div",Mt,o(a.comments),1)):a.status==="PENDING"?(i(),n("div",Ut,"Menunggu approval...")):m("",!0)]),t("div",qt,[a.approved_at?(i(),n("div",Qt,o(v(a.approved_at)),1)):(i(),n("div",Yt,"Pending")),t("div",{class:g(["mt-2 px-2 py-1 rounded-full text-xs font-semibold",a.status==="APPROVED"?"bg-green-200 text-green-800":a.status==="REJECTED"?"bg-red-200 text-red-800":"bg-yellow-200 text-yellow-800"])},o(a.status),3)])])],2))),128))])])):r.adjustment.status==="approved"||r.adjustment.status==="rejected"?(i(),n("div",Kt,e[22]||(e[22]=[t("h3",{class:"text-xl font-bold text-gray-900 flex items-center gap-2 mb-4"},[t("div",{class:"p-2 bg-purple-100 rounded-lg"},[t("i",{class:"fa fa-history text-purple-600"})]),u(" Approval History ")],-1),t("div",{class:"text-center py-8 text-gray-500"},[t("i",{class:"fa fa-info-circle text-3xl mb-3"}),t("p",null,"Tidak ada approval history tersedia")],-1)]))):m("",!0)])]}),_:1})],64))}},le=I(Xt,[["__scopeId","data-v-04e28da8"]]);export{le as default};
