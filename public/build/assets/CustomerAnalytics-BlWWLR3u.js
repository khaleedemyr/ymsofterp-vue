import{r as h,c as ot,A as rt,B as r,C as nt,D as t,L as n,E as D,H as b,F as $,M as j,N as l,I as w,J as q,G as c,l as y,W as it}from"./vendor-vue-g7iCcTkf.js";import{A as dt}from"./AppLayout-BfEUsI4L.js";import"./vendor-utils-CpgP2uT4.js";import"./app-DIuSMidk.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CG_QM0dl.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const ut={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},pt={class:"bg-white rounded-xl shadow-lg p-6 mb-8"},gt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4"},mt=["value"],xt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ct={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},bt={class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-red-500"},ft={class:"flex items-center justify-between"},vt={class:"text-2xl font-bold text-gray-900"},yt={class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-orange-500"},_t={class:"flex items-center justify-between"},wt={class:"text-2xl font-bold text-gray-900"},kt={class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-yellow-500"},ht={class:"flex items-center justify-between"},Tt={class:"text-2xl font-bold text-gray-900"},Ct={class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500"},Dt={class:"flex items-center justify-between"},St={class:"text-lg font-bold text-gray-900"},Mt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},$t={class:"bg-white rounded-xl shadow-lg p-6"},jt={class:"space-y-4"},Pt={class:"flex items-center gap-3"},Nt={class:"font-medium"},Ut={class:"text-right"},Lt={class:"font-bold"},Vt={class:"text-sm text-gray-600"},At={class:"bg-white rounded-xl shadow-lg p-6 lg:col-span-2"},Ht={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Rt={class:"text-lg font-bold text-gray-900"},Bt={class:"text-lg font-bold text-gray-900"},It={class:"text-lg font-bold text-gray-900"},Ft={class:"text-lg font-bold text-gray-900"},Wt={class:"bg-white rounded-xl shadow-lg p-6"},Jt={key:0,class:"mb-4 flex flex-col sm:flex-row justify-between items-center gap-4"},Ot={class:"text-sm text-gray-600"},Et={key:0,class:"flex gap-1"},Yt=["disabled"],qt=["disabled"],zt=["onClick"],Kt=["disabled"],Xt=["disabled"],Zt={key:1,class:"text-center py-8 text-gray-500"},Gt={key:2,class:"overflow-x-auto"},Qt={class:"min-w-full divide-y divide-gray-200"},te={class:"bg-white divide-y divide-gray-200"},ee={class:"px-6 py-4 whitespace-nowrap"},se={class:"text-sm font-medium text-gray-900"},ae={class:"text-sm text-gray-500"},le={class:"text-xs text-gray-400"},oe={class:"px-6 py-4 whitespace-nowrap"},re={class:"text-sm text-gray-900"},ne={class:"text-xs text-gray-500"},ie={class:"px-6 py-4 whitespace-nowrap"},de={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},pe={class:"px-6 py-4 whitespace-nowrap"},ge={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},me=["onClick"],xe={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},ce={class:"relative top-10 mx-auto p-5 border w-11/12 md:w-4/5 lg:w-3/4 shadow-lg rounded-md bg-white max-h-[90vh] overflow-y-auto"},be={class:"mt-3"},fe={key:0,class:"text-center py-8"},ve={key:1},ye={class:"mb-4 p-3 bg-gray-50 rounded-lg"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},we={class:"text-sm text-gray-600"},ke={class:"font-medium"},he={class:"text-sm text-gray-600"},Te={class:"font-medium"},Ce={class:"text-sm text-gray-600"},De={class:"font-medium"},Se={class:"text-sm text-gray-600"},Me={class:"font-medium"},$e={class:"text-sm text-gray-600 mt-2"},je={class:"font-medium"},Pe={class:"mb-4 p-4 bg-blue-50 rounded-lg"},Ne={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ue={class:"mb-4 flex flex-col sm:flex-row justify-between items-center gap-4"},Le={class:"flex items-center gap-2"},Ve={key:0,class:"text-sm text-gray-600"},Ae={class:"overflow-x-auto"},He={class:"min-w-full divide-y divide-gray-200"},Re={class:"bg-gray-50 sticky top-0"},Be={class:"bg-white divide-y divide-gray-200"},Ie={class:"px-4 py-2 text-sm text-gray-900"},Fe={class:"px-4 py-2 text-sm text-gray-900 font-mono"},We={class:"px-4 py-2 text-sm"},Je={class:"px-4 py-2 text-sm text-gray-900 font-mono"},Oe={class:"px-4 py-2 text-sm text-gray-900 font-mono"},Ee={class:"px-4 py-2 text-sm text-gray-900"},Ye={class:"mt-6"},qe={key:0,class:"flex flex-col sm:flex-row justify-between items-center gap-4"},ze={class:"text-sm text-gray-600"},Ke={key:0,class:"flex gap-1"},Xe=["disabled"],Ze=["disabled"],Ge=["onClick"],Qe=["disabled"],ts=["disabled"],es={key:1,class:"text-sm text-gray-500"},ss={key:1,class:"w-full text-center text-sm text-gray-500"},as={key:2,class:"text-center py-8 text-gray-500"},xs={__name:"CustomerAnalytics",props:{suspiciousData:Object,yearOptions:Array,currentYear:Number,currentPeriod:String,filters:Object},setup(g){var F,W,J,O,E,Y;const k=g,V=h(k.currentYear),A=h(k.currentPeriod),H=h(!1),R=h(!1),f=h(null),M=h([]),x=h({search:((F=k.filters)==null?void 0:F.search)||"",suspicion_level:((W=k.filters)==null?void 0:W.suspicion_level)||"",sort_by:((J=k.filters)==null?void 0:J.sort_by)||"transaction_count",sort_order:((O=k.filters)==null?void 0:O.sort_order)||"desc",per_page:((E=k.filters)==null?void 0:E.per_page)||10,page:((Y=k.filters)==null?void 0:Y.page)||1}),i=h({current_page:1,last_page:1,per_page:10,total:0,from:0,to:0}),u=ot(()=>{var a;return((a=k.suspiciousData)==null?void 0:a.pagination)||{current_page:1,last_page:1,per_page:10,total:0,from:0,to:0}}),o=h({search:"",type:"",sort_by:"created_at",sort_order:"asc",per_page:10,page:1});let B=null,I=null;function P(a,e=0){return a.toLocaleString("id-ID",{minimumFractionDigits:e,maximumFractionDigits:e})}function z(a){return"Rp "+a.toLocaleString("id-ID")}function T(){it.visit("/crm/customer-analytics",{data:{year:V.value,period:A.value,...x.value},preserveState:!0})}function K(a){switch(a){case"Tinggi":return"bg-red-50 border-l-4 border-red-500";case"Sedang":return"bg-orange-50 border-l-4 border-orange-500";case"Rendah":return"bg-yellow-50 border-l-4 border-yellow-500";default:return"bg-gray-50 border-l-4 border-gray-500"}}function X(a){switch(a){case"Tinggi":return"bg-red-500";case"Sedang":return"bg-orange-500";case"Rendah":return"bg-yellow-500";default:return"bg-gray-500"}}function Z(a){return a>=5?"bg-red-100 text-red-800":a>=3?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}function G(a){switch(a){case"Tinggi":return"bg-red-100 text-red-800";case"Sedang":return"bg-orange-100 text-orange-800";case"Rendah":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}}async function Q(a){f.value=a,H.value=!0,o.value={search:"",type:"",sort_by:"created_at",sort_order:"asc",per_page:10,page:1},await C()}async function C(){if(f.value){R.value=!0;try{const a=f.value.transaction_date.split("/"),e=a.length===3?`${a[2]}-${a[1].padStart(2,"0")}-${a[0].padStart(2,"0")}`:f.value.transaction_date,m=new URLSearchParams({customer_id:f.value.customer_id,date:e,page:o.value.page,per_page:o.value.per_page,search:o.value.search,type:o.value.type,sort_by:o.value.sort_by,sort_order:o.value.sort_order}),v=await fetch(`/crm/customer-analytics/transactions?${m}`,{headers:{"X-Requested-With":"XMLHttpRequest"}});if(v.ok){const d=await v.json();M.value=d.transactions,i.value=d.pagination}else M.value=[],i.value={current_page:1,last_page:1,per_page:10,total:0,from:0,to:0}}catch(a){console.error("Error fetching transaction details:",a),M.value=[]}finally{R.value=!1}}}function tt(){H.value=!1,f.value=null,M.value=[],i.value={current_page:1,last_page:1,per_page:10,total:0,from:0,to:0}}function et(){clearTimeout(B),B=setTimeout(()=>{o.value.page=1,C()},500)}function st(){clearTimeout(I),I=setTimeout(()=>{x.value.page=1,T()},500)}function N(a){a>=1&&a<=i.value.last_page&&a!=="..."&&(o.value.page=a,C())}function U(a){a>=1&&a!=="..."&&(x.value.page=a,T())}function L(a){o.value.sort_by===a?o.value.sort_order=o.value.sort_order==="asc"?"desc":"asc":(o.value.sort_by=a,o.value.sort_order="asc"),o.value.page=1,C()}function at(){const a=i.value.current_page,e=i.value.last_page,m=2;if(e<=7)return Array.from({length:e},(p,_)=>_+1);const v=[],d=[];for(let p=Math.max(2,a-m);p<=Math.min(e-1,a+m);p++)v.push(p);return a-m>2?d.push(1,"..."):d.push(1),d.push(...v),a+m<e-1?d.push("...",e):e>1&&d.push(e),d.filter((p,_,s)=>p==="..."?!0:s.indexOf(p)===_)}function lt(){if(!u.value)return[];const a=u.value.current_page,e=u.value.last_page,m=2;if(e<=7)return Array.from({length:e},(p,_)=>_+1);const v=[],d=[];for(let p=Math.max(2,a-m);p<=Math.min(e-1,a+m);p++)v.push(p);return a-m>2?d.push(1,"..."):d.push(1),d.push(...v),a+m<e-1?d.push("...",e):e>1&&d.push(e),d.filter((p,_,s)=>p==="..."?!0:s.indexOf(p)===_)}return(a,e)=>(r(),rt(dt,{title:"Customer Analytics"},{default:nt(()=>{var m,v,d,p,_;return[t("div",ut,[e[62]||(e[62]=t("div",{class:"mb-8"},[t("div",{class:"flex justify-between items-center"},[t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"},"Customer Analytics"),t("p",{class:"mt-2 text-gray-600"},"Analisis transaksi mencurigakan member")])])],-1)),t("div",pt,[t("div",gt,[t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tahun",-1)),b(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>V.value=s),onChange:T,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(r(!0),n($,null,j(g.yearOptions,s=>(r(),n("option",{key:s,value:s},l(s),9,mt))),128))],544),[[w,V.value]])]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Periode",-1)),b(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>A.value=s),onChange:T,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[29]||(e[29]=[t("option",{value:"1"},"Januari - Juni",-1),t("option",{value:"2"},"Juli - Desember",-1)]),544),[[w,A.value]])]),t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Level Kecurigaan",-1)),b(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>x.value.suspicion_level=s),onChange:T,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[31]||(e[31]=[t("option",{value:""},"Semua Level",-1),t("option",{value:"Tinggi"},"Tinggi",-1),t("option",{value:"Sedang"},"Sedang",-1),t("option",{value:"Rendah"},"Rendah",-1)]),544),[[w,x.value.suspicion_level]])]),t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Urutkan",-1)),b(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>x.value.sort_by=s),onChange:T,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[33]||(e[33]=[t("option",{value:"transaction_count"},"Jumlah Transaksi",-1),t("option",{value:"total_value"},"Total Nilai",-1),t("option",{value:"customer_name"},"Nama Customer",-1),t("option",{value:"transaction_date"},"Tanggal Transaksi",-1)]),544),[[w,x.value.sort_by]])])]),t("div",xt,[t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Cari",-1)),b(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>x.value.search=s),onInput:st,type:"text",placeholder:"Nama, ID, telepon, email, cabang...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[q,x.value.search]])]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Urutan",-1)),b(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>x.value.sort_order=s),onChange:T,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[36]||(e[36]=[t("option",{value:"desc"},"Tertinggi",-1),t("option",{value:"asc"},"Terendah",-1)]),544),[[w,x.value.sort_order]])]),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tampilkan",-1)),b(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>x.value.per_page=s),onChange:T,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[38]||(e[38]=[t("option",{value:"10"},"10 data",-1),t("option",{value:"25"},"25 data",-1),t("option",{value:"50"},"50 data",-1),t("option",{value:"100"},"100 data",-1)]),544),[[w,x.value.per_page]])])])]),t("div",ct,[t("div",bt,[t("div",ft,[t("div",null,[e[40]||(e[40]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Member Mencurigakan",-1)),t("p",vt,l(P(g.suspiciousData.summary.total_suspicious_customers)),1)]),e[41]||(e[41]=t("div",{class:"bg-red-100 p-3 rounded-lg"},[t("i",{class:"fa-solid fa-exclamation-triangle text-red-600 text-xl"})],-1))])]),t("div",yt,[t("div",_t,[t("div",null,[e[42]||(e[42]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Hari Mencurigakan",-1)),t("p",wt,l(P(g.suspiciousData.summary.total_suspicious_days)),1)]),e[43]||(e[43]=t("div",{class:"bg-orange-100 p-3 rounded-lg"},[t("i",{class:"fa-solid fa-calendar-exclamation text-orange-600 text-xl"})],-1))])]),t("div",kt,[t("div",ht,[t("div",null,[e[44]||(e[44]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Transaksi",-1)),t("p",Tt,l(P(g.suspiciousData.summary.total_transactions)),1)]),e[45]||(e[45]=t("div",{class:"bg-yellow-100 p-3 rounded-lg"},[t("i",{class:"fa-solid fa-receipt text-yellow-600 text-xl"})],-1))])]),t("div",Ct,[t("div",Dt,[t("div",null,[e[46]||(e[46]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Nilai Transaksi",-1)),t("p",St,l(g.suspiciousData.summary.total_value_formatted),1)]),e[47]||(e[47]=t("div",{class:"bg-purple-100 p-3 rounded-lg"},[t("i",{class:"fa-solid fa-money-bill-wave text-purple-600 text-xl"})],-1))])])]),t("div",Mt,[t("div",$t,[e[48]||(e[48]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[t("i",{class:"fa-solid fa-chart-pie text-red-500"}),c(" Distribusi Level Kecurigaan ")],-1)),t("div",jt,[(r(!0),n($,null,j(g.suspiciousData.suspicionLevels,(s,S)=>(r(),n("div",{key:S,class:y(["flex items-center justify-between p-3 rounded-lg",K(S)])},[t("div",Pt,[t("div",{class:y(["w-3 h-3 rounded-full",X(S)])},null,2),t("span",Nt,l(S),1)]),t("div",Ut,[t("p",Lt,l(s.count)+" hari",1),t("p",Vt,l(s.total_value_formatted),1)])],2))),128))])]),t("div",At,[e[53]||(e[53]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[t("i",{class:"fa-solid fa-info-circle text-blue-500"}),c(" Informasi Periode ")],-1)),t("div",Ht,[t("div",null,[e[49]||(e[49]=t("p",{class:"text-sm font-medium text-gray-600"},"Periode Aktif",-1)),t("p",Rt,l(g.suspiciousData.summary.period_name),1)]),t("div",null,[e[50]||(e[50]=t("p",{class:"text-sm font-medium text-gray-600"},"Rata-rata Transaksi/Hari",-1)),t("p",Bt,l(P(g.suspiciousData.summary.average_transactions_per_day,1)),1)]),t("div",null,[e[51]||(e[51]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Point",-1)),t("p",It,l(P(g.suspiciousData.summary.total_points)),1)]),t("div",null,[e[52]||(e[52]=t("p",{class:"text-sm font-medium text-gray-600"},"Nilai Rata-rata/Transaksi",-1)),t("p",Ft,l(z(g.suspiciousData.summary.total_value/g.suspiciousData.summary.total_transactions)),1)])])])]),t("div",Wt,[e[61]||(e[61]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[t("i",{class:"fa-solid fa-table text-gray-500"}),c(" Daftar Transaksi Mencurigakan ")],-1)),u.value.total>0?(r(),n("div",Jt,[t("div",Ot," Menampilkan "+l(u.value.from||0)+" - "+l(u.value.to||0)+" dari "+l(u.value.total||0)+" data ",1),u.value.last_page>1?(r(),n("div",Et,[t("button",{onClick:e[7]||(e[7]=s=>U(1)),disabled:u.value.current_page===1,class:"px-3 py-2 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",title:"Halaman Pertama"},e[54]||(e[54]=[t("i",{class:"fa-solid fa-angles-left"},null,-1)]),8,Yt),t("button",{onClick:e[8]||(e[8]=s=>U(u.value.current_page-1)),disabled:u.value.current_page===1,class:"px-3 py-2 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",title:"Halaman Sebelumnya"},e[55]||(e[55]=[t("i",{class:"fa-solid fa-chevron-left"},null,-1)]),8,qt),(r(!0),n($,null,j(lt(),s=>(r(),n("button",{key:s,onClick:S=>s!=="..."?U(s):null,class:y(["px-3 py-2 border rounded-md text-sm min-w-[40px]",s===u.value.current_page?"bg-blue-600 text-white border-blue-600":s==="..."?"border-gray-300 text-gray-500 cursor-default":"border-gray-300 text-gray-700 hover:bg-gray-50"])},l(s),11,zt))),128)),t("button",{onClick:e[9]||(e[9]=s=>U(u.value.current_page+1)),disabled:u.value.current_page===u.value.last_page,class:"px-3 py-2 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",title:"Halaman Selanjutnya"},e[56]||(e[56]=[t("i",{class:"fa-solid fa-chevron-right"},null,-1)]),8,Kt),t("button",{onClick:e[10]||(e[10]=s=>U(u.value.last_page)),disabled:u.value.current_page===u.value.last_page,class:"px-3 py-2 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",title:"Halaman Terakhir"},e[57]||(e[57]=[t("i",{class:"fa-solid fa-angles-right"},null,-1)]),8,Xt)])):D("",!0)])):D("",!0),g.suspiciousData.transactions.length===0?(r(),n("div",Zt,e[58]||(e[58]=[t("i",{class:"fa-solid fa-shield-check text-4xl mb-4"},null,-1),t("p",null,"Tidak ada transaksi mencurigakan untuk periode ini",-1)]))):(r(),n("div",Gt,[t("table",Qt,[e[60]||(e[60]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Member"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tanggal"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Jumlah Transaksi"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Point"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Nilai"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Level"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),t("tbody",te,[(r(!0),n($,null,j(g.suspiciousData.transactions,s=>(r(),n("tr",{key:`${s.customer_id}-${s.transaction_date}`,class:"hover:bg-gray-50"},[t("td",ee,[t("div",null,[t("div",se,l(s.customer_name),1),t("div",ae,l(s.costumers_id),1),t("div",le,l(s.telepon),1)])]),t("td",oe,[t("div",re,l(s.transaction_date),1),t("div",ne,l(s.first_transaction)+" - "+l(s.last_transaction),1)]),t("td",ie,[t("span",{class:y(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",Z(s.transaction_count)])},l(s.transaction_count)+"x ",3)]),t("td",de,l(s.total_points_formatted),1),t("td",ue,l(s.total_value_formatted),1),t("td",pe,[t("span",{class:y(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",G(s.suspicion_level)])},l(s.suspicion_level),3)]),t("td",ge,[t("button",{onClick:S=>Q(s),class:"text-blue-600 hover:text-blue-900 flex items-center gap-1"},e[59]||(e[59]=[t("i",{class:"fa-solid fa-eye"},null,-1),c(" Detail ")]),8,me)])]))),128))])])]))])]),H.value?(r(),n("div",xe,[t("div",ce,[t("div",be,[t("div",{class:"flex justify-between items-center mb-4"},[e[64]||(e[64]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Detail Transaksi",-1)),t("button",{onClick:tt,class:"text-gray-400 hover:text-gray-600"},e[63]||(e[63]=[t("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),R.value?(r(),n("div",fe,e[65]||(e[65]=[t("i",{class:"fa-solid fa-spinner fa-spin text-2xl text-blue-600"},null,-1),t("p",{class:"mt-2 text-gray-600"},"Memuat detail transaksi...",-1)]))):M.value.length>0?(r(),n("div",ve,[t("div",ye,[t("div",_e,[t("div",null,[t("p",we,[e[66]||(e[66]=c("Member: ")),t("span",ke,l((m=f.value)==null?void 0:m.customer_name),1)]),t("p",he,[e[67]||(e[67]=c("ID: ")),t("span",Te,l((v=f.value)==null?void 0:v.costumers_id),1)])]),t("div",null,[t("p",Ce,[e[68]||(e[68]=c("Telepon: ")),t("span",De,l(((d=f.value)==null?void 0:d.telepon)||"-"),1)]),t("p",Se,[e[69]||(e[69]=c("Email: ")),t("span",Me,l(((p=f.value)==null?void 0:p.email)||"-"),1)])])]),t("p",$e,[e[70]||(e[70]=c("Tanggal: ")),t("span",je,l((_=f.value)==null?void 0:_.transaction_date),1)])]),t("div",Pe,[t("div",Ne,[t("div",null,[e[71]||(e[71]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Cari",-1)),b(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>o.value.search=s),onInput:et,type:"text",placeholder:"Bill number, cabang, nama, email, telepon...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[q,o.value.search]])]),t("div",null,[e[73]||(e[73]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tipe Transaksi",-1)),b(t("select",{"onUpdate:modelValue":e[12]||(e[12]=s=>o.value.type=s),onChange:e[13]||(e[13]=()=>{o.value.page=1,C()}),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[72]||(e[72]=[t("option",{value:""},"Semua",-1),t("option",{value:"1"},"Top Up",-1),t("option",{value:"2"},"Redeem",-1)]),544),[[w,o.value.type]])]),t("div",null,[e[75]||(e[75]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Urutkan",-1)),b(t("select",{"onUpdate:modelValue":e[14]||(e[14]=s=>o.value.sort_by=s),onChange:e[15]||(e[15]=()=>{o.value.page=1,C()}),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[74]||(e[74]=[t("option",{value:"created_at"},"Waktu",-1),t("option",{value:"point"},"Point",-1),t("option",{value:"jml_trans"},"Nilai",-1),t("option",{value:"no_bill"},"Bill Number",-1)]),544),[[w,o.value.sort_by]])]),t("div",null,[e[77]||(e[77]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Urutan",-1)),b(t("select",{"onUpdate:modelValue":e[16]||(e[16]=s=>o.value.sort_order=s),onChange:e[17]||(e[17]=()=>{o.value.page=1,C()}),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[76]||(e[76]=[t("option",{value:"asc"},"A-Z",-1),t("option",{value:"desc"},"Z-A",-1)]),544),[[w,o.value.sort_order]])])])]),t("div",Ue,[t("div",Le,[e[79]||(e[79]=t("label",{class:"text-sm font-medium text-gray-700"},"Tampilkan:",-1)),b(t("select",{"onUpdate:modelValue":e[18]||(e[18]=s=>o.value.per_page=s),onChange:e[19]||(e[19]=()=>{o.value.page=1,C()}),class:"px-3 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[78]||(e[78]=[t("option",{value:"5"},"5 data",-1),t("option",{value:"10"},"10 data",-1),t("option",{value:"25"},"25 data",-1),t("option",{value:"50"},"50 data",-1),t("option",{value:"100"},"100 data",-1)]),544),[[w,o.value.per_page]]),e[80]||(e[80]=t("span",{class:"text-sm text-gray-600"},"per halaman",-1))]),i.value.total>0?(r(),n("div",Ve," Menampilkan "+l(i.value.from||0)+" - "+l(i.value.to||0)+" dari "+l(i.value.total)+" data ",1)):D("",!0)]),t("div",Ae,[t("table",He,[t("thead",Re,[t("tr",null,[t("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer",onClick:e[20]||(e[20]=s=>L("created_at"))},[e[81]||(e[81]=c(" Waktu ")),o.value.sort_by==="created_at"?(r(),n("i",{key:0,class:y([o.value.sort_order==="asc"?"fa-solid fa-sort-up":"fa-solid fa-sort-down","ml-1"])},null,2)):D("",!0)]),t("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer",onClick:e[21]||(e[21]=s=>L("no_bill"))},[e[82]||(e[82]=c(" Bill Number ")),o.value.sort_by==="no_bill"?(r(),n("i",{key:0,class:y([o.value.sort_order==="asc"?"fa-solid fa-sort-up":"fa-solid fa-sort-down","ml-1"])},null,2)):D("",!0)]),e[85]||(e[85]=t("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Tipe",-1)),t("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer",onClick:e[22]||(e[22]=s=>L("point"))},[e[83]||(e[83]=c(" Point ")),o.value.sort_by==="point"?(r(),n("i",{key:0,class:y([o.value.sort_order==="asc"?"fa-solid fa-sort-up":"fa-solid fa-sort-down","ml-1"])},null,2)):D("",!0)]),t("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer",onClick:e[23]||(e[23]=s=>L("jml_trans"))},[e[84]||(e[84]=c(" Nilai ")),o.value.sort_by==="jml_trans"?(r(),n("i",{key:0,class:y([o.value.sort_order==="asc"?"fa-solid fa-sort-up":"fa-solid fa-sort-down","ml-1"])},null,2)):D("",!0)]),e[86]||(e[86]=t("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Cabang",-1))])]),t("tbody",Be,[(r(!0),n($,null,j(M.value,s=>(r(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",Ie,l(s.created_at),1),t("td",Fe,l(s.bill_number),1),t("td",We,[t("span",{class:y(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.type==="1"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"])},l(s.type_text),3)]),t("td",Je,l(s.point_formatted),1),t("td",Oe,l(s.jml_trans_formatted),1),t("td",Ee,l(s.cabang_name),1)]))),128))])])]),t("div",Ye,[i.value.total>0?(r(),n("div",qe,[t("div",ze," Halaman "+l(i.value.current_page)+" dari "+l(i.value.last_page),1),i.value.last_page>1?(r(),n("div",Ke,[t("button",{onClick:e[24]||(e[24]=s=>N(1)),disabled:i.value.current_page===1,class:"px-3 py-2 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",title:"Halaman Pertama"},e[87]||(e[87]=[t("i",{class:"fa-solid fa-angles-left"},null,-1)]),8,Xe),t("button",{onClick:e[25]||(e[25]=s=>N(i.value.current_page-1)),disabled:i.value.current_page===1,class:"px-3 py-2 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",title:"Halaman Sebelumnya"},e[88]||(e[88]=[t("i",{class:"fa-solid fa-chevron-left"},null,-1)]),8,Ze),(r(!0),n($,null,j(at(),s=>(r(),n("button",{key:s,onClick:S=>s!=="..."?N(s):null,class:y(["px-3 py-2 border rounded-md text-sm min-w-[40px]",s===i.value.current_page?"bg-blue-600 text-white border-blue-600":s==="..."?"border-gray-300 text-gray-500 cursor-default":"border-gray-300 text-gray-700 hover:bg-gray-50"])},l(s),11,Ge))),128)),t("button",{onClick:e[26]||(e[26]=s=>N(i.value.current_page+1)),disabled:i.value.current_page===i.value.last_page,class:"px-3 py-2 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",title:"Halaman Selanjutnya"},e[89]||(e[89]=[t("i",{class:"fa-solid fa-chevron-right"},null,-1)]),8,Qe),t("button",{onClick:e[27]||(e[27]=s=>N(i.value.last_page)),disabled:i.value.current_page===i.value.last_page,class:"px-3 py-2 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",title:"Halaman Terakhir"},e[90]||(e[90]=[t("i",{class:"fa-solid fa-angles-right"},null,-1)]),8,ts)])):(r(),n("div",es," Semua data ditampilkan ("+l(i.value.total)+" data) ",1))])):(r(),n("div",ss," Tidak ada data untuk ditampilkan "))])])):(r(),n("div",as,e[91]||(e[91]=[t("i",{class:"fa-solid fa-exclamation-triangle text-2xl mb-2"},null,-1),t("p",null,"Tidak ada detail transaksi",-1)])))])])])):D("",!0)]}),_:1}))}};export{xs as default};
