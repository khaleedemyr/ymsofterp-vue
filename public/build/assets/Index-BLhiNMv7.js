import{r as p,c as Q,w as _,a as J,A as H,B as i,C as $,D as t,L as d,G as m,H as v,E as y,l as x,F as b,M as h,N as l,I as L,J as F,W as j}from"./vendor-vue-g7iCcTkf.js";import{A as z}from"./AppLayout-CytV2Jsj.js";import"./vendor-utils-CpgP2uT4.js";import"./app-B-3LCfNP.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-BWyEbEQC.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const G={class:"w-full py-8 px-2"},K={class:"bg-white rounded-xl shadow-xl p-6 mb-6"},X={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4"},Y=["disabled"],Z=["value"],tt={key:0,class:"text-xs text-gray-500 mt-1"},et=["disabled"],st=["value"],lt={class:"flex items-end"},at=["disabled"],ot={key:0,class:"fa-solid fa-spinner fa-spin mr-1"},rt={key:1,class:"fa-solid fa-search mr-1"},it={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},nt={key:0,class:"bg-white rounded-xl shadow-xl p-12 text-center"},dt={key:1,class:"space-y-6"},ut={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},mt={class:"bg-blue-50 p-4 rounded-lg"},gt={class:"text-2xl font-bold text-blue-600"},pt={class:"bg-green-50 p-4 rounded-lg"},xt={class:"text-2xl font-bold text-green-600"},ct={class:"bg-purple-50 p-4 rounded-lg"},ft={class:"text-2xl font-bold text-purple-600"},yt={class:"bg-orange-50 p-4 rounded-lg"},_t={class:"text-2xl font-bold text-orange-600"},vt={class:"bg-gray-50 px-6 py-4 border-b"},bt={class:"flex justify-between items-start"},ht={class:"text-lg font-bold text-gray-900"},wt={class:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},kt={class:"ml-2 font-medium"},St={class:"ml-2 font-medium"},Dt={class:"ml-2 font-medium"},Ot={class:"ml-2 font-medium"},Ct={key:0,class:"mt-2 text-sm text-gray-600"},qt={class:"mt-2 text-sm text-gray-600"},Lt={key:1,class:"mt-2"},Tt={class:"mt-1 flex flex-wrap gap-2"},At={key:0,class:"ml-1"},Ft={class:"text-right"},jt={class:"mt-2 text-sm font-bold text-blue-600"},Mt={class:"overflow-x-auto"},Et={class:"min-w-full divide-y divide-gray-200"},Vt={class:"bg-white divide-y divide-gray-200"},It={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},Rt={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},Nt={class:"px-4 py-4 text-sm text-gray-900"},Pt={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},Wt={class:"px-4 py-4 whitespace-nowrap text-sm text-right text-gray-900"},Bt={class:"px-4 py-4 whitespace-nowrap text-sm text-right text-gray-900"},Ut={class:"px-4 py-4 whitespace-nowrap text-sm text-right"},Qt={class:"px-4 py-4 whitespace-nowrap text-sm text-right text-gray-900"},Jt=["title"],Ht={class:"mt-6 flex flex-col sm:flex-row justify-between items-center gap-4 p-6 bg-white rounded-xl shadow-xl border-t"},$t={class:"text-sm text-gray-700"},zt={class:"font-semibold text-gray-900"},Gt={class:"font-semibold text-gray-900"},Kt={class:"font-semibold text-gray-900"},Xt={class:"flex gap-2"},Yt={key:2,class:"bg-white rounded-xl shadow-xl p-12 text-center"},de={__name:"Index",props:{stockOpnames:{type:Array,default:()=>[]},outlets:{type:Array,default:()=>[]},warehouseOutlets:{type:Array,default:()=>[]},totals:{type:Object,default:()=>({total_qty_diff_small:0,total_qty_diff_medium:0,total_qty_diff_large:0,total_value_adjustment:0})},pagination:{type:Object,default:()=>({current_page:1,per_page:50,total_items:0,total_pages:0})},filters:{type:Object,default:()=>({outlet_id:"",warehouse_outlet_id:"",date:"",search:"",per_page:50,page:1})},user_outlet_id:{type:Number,default:null}},setup(M){const n=M,c=p(!1),T=p(n.outlets||[]),w=p(n.warehouseOutlets||[]),k=p(n.stockOpnames||[]),f=p(n.totals||{}),u=p(n.pagination||{}),r=p({...n.filters}),S=Q(()=>n.user_outlet_id&&String(n.user_outlet_id)==="1");function E(s){const e=T.value.find(a=>String(a.id)===String(s));return e?e.name:""}function V(){if(!r.value.outlet_id){w.value=[],r.value.warehouse_outlet_id="";return}j.get(route("outlet-stock-opname-report.index"),{...r.value,outlet_id:r.value.outlet_id,load:!1},{preserveState:!0,preserveScroll:!0,only:["warehouseOutlets","filters"]})}function D(){c.value=!0,r.value.page=1;const s={...r.value,load:!0};j.get(route("outlet-stock-opname-report.index"),s,{preserveState:!0,preserveScroll:!0,onFinish:()=>{c.value=!1}})}function A(s){r.value.page=s,D()}function g(s){return s==null?"0":parseFloat(s).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2})}function O(s){return s==null?"Rp 0":"Rp "+parseFloat(s).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2})}function I(s){return s?new Date(s).toLocaleDateString("id-ID"):"-"}function R(s){return s?new Date(s).toLocaleString("id-ID",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}function C(s){if(s==null)return"0";const e=parseFloat(s),a=e.toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2});return e>0?"+"+a:a}function N(s){if(s==null)return"Rp 0";const e=parseFloat(s),a="Rp "+e.toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2});return e>0?"+"+a:a}function q(s){return s>0?"text-green-600 font-semibold":s<0?"text-red-600 font-semibold":"text-gray-900"}function P(s){return s>0?"text-green-600":s<0?"text-red-600":"text-gray-900"}function W(s){return{DRAFT:"bg-gray-100 text-gray-700 border border-gray-300",SUBMITTED:"bg-yellow-100 text-yellow-700 border border-yellow-300",APPROVED:"bg-green-100 text-green-700 border border-green-300",REJECTED:"bg-red-100 text-red-700 border border-red-300",COMPLETED:"bg-blue-100 text-blue-700 border border-blue-300"}[s]||"bg-gray-100 text-gray-700 border border-gray-300"}function B(s){return s==="APPROVED"?"bg-green-100 text-green-800":s==="REJECTED"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}return _(()=>n.stockOpnames,s=>{k.value=s||[]},{immediate:!0}),_(()=>n.totals,s=>{f.value=s||{}},{immediate:!0}),_(()=>n.pagination,s=>{u.value=s||{}},{immediate:!0}),_(()=>n.warehouseOutlets,s=>{w.value=s||[]},{immediate:!0}),_(()=>n.filters,s=>{r.value={...s},n.user_outlet_id&&String(n.user_outlet_id)!=="1"&&!r.value.outlet_id&&(r.value.outlet_id=String(n.user_outlet_id))},{immediate:!0}),J(()=>{k.value=n.stockOpnames||[],f.value=n.totals||{},u.value=n.pagination||{},w.value=n.warehouseOutlets||[],r.value={...n.filters}}),(s,e)=>(i(),H(z,null,{default:$(()=>[t("div",G,[e[37]||(e[37]=t("div",{class:"flex items-center justify-between mb-6"},[t("h1",{class:"text-2xl font-bold flex items-center gap-2"},[t("i",{class:"fa-solid fa-file-lines text-blue-500"}),m(" Outlet Stock Opname Report ")])],-1)),t("div",K,[t("div",X,[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Outlet",-1)),v(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.outlet_id=a),onChange:V,class:x(["w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",{"bg-gray-100 cursor-not-allowed":!S.value}]),disabled:!S.value},[e[7]||(e[7]=t("option",{value:""},"Pilih Outlet",-1)),(i(!0),d(b,null,h(T.value,a=>(i(),d("option",{key:a.id,value:a.id},l(a.name),9,Z))),128))],42,Y),[[L,r.value.outlet_id]]),!S.value&&r.value.outlet_id?(i(),d("p",tt,[e[8]||(e[8]=t("i",{class:"fa-solid fa-info-circle mr-1"},null,-1)),m(" Outlet: "+l(E(r.value.outlet_id)),1)])):y("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Warehouse Outlet",-1)),v(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.warehouse_outlet_id=a),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!r.value.outlet_id},[e[10]||(e[10]=t("option",{value:""},"Pilih Warehouse",-1)),(i(!0),d(b,null,h(w.value,a=>(i(),d("option",{key:a.id,value:a.id},l(a.name),9,st))),128))],8,et),[[L,r.value.warehouse_outlet_id]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal",-1)),v(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=a=>r.value.date=a),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[F,r.value.date]])]),t("div",lt,[t("button",{onClick:D,disabled:c.value,class:"w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed"},[c.value?(i(),d("i",ot)):(i(),d("i",rt)),m(" "+l(c.value?"Loading...":"Load Data"),1)],8,at)])]),t("div",it,[t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Cari",-1)),v(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>r.value.search=a),placeholder:"Cari berdasarkan nomor opname, nama item, atau notes...",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[F,r.value.search]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Per Halaman",-1)),v(t("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>r.value.per_page=a),onChange:D,class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},e[14]||(e[14]=[t("option",{value:25},"25",-1),t("option",{value:50},"50",-1),t("option",{value:100},"100",-1),t("option",{value:200},"200",-1)]),544),[[L,r.value.per_page]])])])]),c.value?(i(),d("div",nt,e[16]||(e[16]=[t("div",{class:"text-blue-500"},[t("i",{class:"fa-solid fa-spinner fa-spin text-4xl mb-4"}),t("p",{class:"text-lg font-medium"},"Memuat data...")],-1)]))):k.value.length>0?(i(),d("div",dt,[t("div",ut,[t("div",mt,[e[17]||(e[17]=t("div",{class:"text-sm text-gray-600 mb-1"},"Total Selisih Qty Small",-1)),t("div",gt,l(g(f.value.total_qty_diff_small)),1)]),t("div",pt,[e[18]||(e[18]=t("div",{class:"text-sm text-gray-600 mb-1"},"Total Selisih Qty Medium",-1)),t("div",xt,l(g(f.value.total_qty_diff_medium)),1)]),t("div",ct,[e[19]||(e[19]=t("div",{class:"text-sm text-gray-600 mb-1"},"Total Selisih Qty Large",-1)),t("div",ft,l(g(f.value.total_qty_diff_large)),1)]),t("div",yt,[e[20]||(e[20]=t("div",{class:"text-sm text-gray-600 mb-1"},"Total Value Adjustment",-1)),t("div",_t,l(O(f.value.total_value_adjustment)),1)])]),(i(!0),d(b,null,h(k.value,a=>(i(),d("div",{key:a.id,class:"bg-white rounded-xl shadow-xl overflow-hidden"},[t("div",vt,[t("div",bt,[t("div",null,[t("h3",ht,l(a.opname_number),1),t("div",wt,[t("div",null,[e[21]||(e[21]=t("span",{class:"text-gray-600"},"Tanggal:",-1)),t("span",kt,l(a.opname_date),1)]),t("div",null,[e[22]||(e[22]=t("span",{class:"text-gray-600"},"Outlet:",-1)),t("span",St,l(a.outlet),1)]),t("div",null,[e[23]||(e[23]=t("span",{class:"text-gray-600"},"Warehouse:",-1)),t("span",Dt,l(a.warehouse_outlet),1)]),t("div",null,[e[24]||(e[24]=t("span",{class:"text-gray-600"},"Items:",-1)),t("span",Ot,l(a.items_count),1)])]),a.notes?(i(),d("div",Ct,[e[25]||(e[25]=t("span",{class:"font-medium"},"Notes:",-1)),m(" "+l(a.notes),1)])):y("",!0),t("div",qt,[e[26]||(e[26]=t("span",{class:"font-medium"},"Created By:",-1)),m(" "+l(a.created_by)+" ",1),e[27]||(e[27]=t("span",{class:"ml-4 font-medium"},"Created At:",-1)),m(" "+l(R(a.created_at)),1)]),a.approvers&&a.approvers.length>0?(i(),d("div",Lt,[e[28]||(e[28]=t("span",{class:"text-sm font-medium text-gray-600"},"Approvers:",-1)),t("div",Tt,[(i(!0),d(b,null,h(a.approvers,o=>(i(),d("span",{key:o.level,class:x(["inline-flex items-center px-2 py-1 rounded text-xs font-medium",B(o.status)])},[m(" Level "+l(o.level)+": "+l(o.name)+" ",1),o.approved_at?(i(),d("span",At,"("+l(I(o.approved_at))+")",1)):y("",!0)],2))),128))])])):y("",!0)]),t("div",Ft,[t("span",{class:x(["inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold",W(a.status)])},l(a.status),3),t("div",jt," Total Adjustment: "+l(O(a.total_value_adjustment)),1)])])]),t("div",Mt,[t("table",Et,[e[29]||(e[29]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Item Code"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Item Name"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Category"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Qty System"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Qty Physical"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Selisih"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"MAC"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Value Adjustment"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Reason")])],-1)),t("tbody",Vt,[(i(!0),d(b,null,h(a.items,(o,U)=>(i(),d("tr",{key:o.id,class:"hover:bg-gray-50"},[t("td",It,l(U+1),1),t("td",Rt,l(o.item_code),1),t("td",Nt,l(o.item_name),1),t("td",Pt,l(o.category_name),1),t("td",Wt,[t("div",null,"S: "+l(g(o.qty_system_small))+" "+l(o.small_unit_name),1),t("div",null,"M: "+l(g(o.qty_system_medium))+" "+l(o.medium_unit_name),1),t("div",null,"L: "+l(g(o.qty_system_large))+" "+l(o.large_unit_name),1)]),t("td",Bt,[t("div",null,"S: "+l(g(o.qty_physical_small))+" "+l(o.small_unit_name),1),t("div",null,"M: "+l(g(o.qty_physical_medium))+" "+l(o.medium_unit_name),1),t("div",null,"L: "+l(g(o.qty_physical_large))+" "+l(o.large_unit_name),1)]),t("td",Ut,[t("div",{class:x(q(o.qty_diff_small))}," S: "+l(C(o.qty_diff_small))+" "+l(o.small_unit_name),3),t("div",{class:x(q(o.qty_diff_medium))}," M: "+l(C(o.qty_diff_medium))+" "+l(o.medium_unit_name),3),t("div",{class:x(q(o.qty_diff_large))}," L: "+l(C(o.qty_diff_large))+" "+l(o.large_unit_name),3)]),t("td",Qt,l(O(o.mac_before)),1),t("td",{class:x(["px-4 py-4 whitespace-nowrap text-sm font-semibold text-right",P(o.value_adjustment)])},l(N(o.value_adjustment)),3),t("td",{class:"px-4 py-4 text-sm text-gray-900 max-w-xs truncate",title:o.reason},l(o.reason||"-"),9,Jt)]))),128))])])])]))),128)),t("div",Ht,[t("div",$t,[e[30]||(e[30]=m(" Menampilkan ")),t("span",zt,l((u.value.current_page-1)*u.value.per_page+1),1),e[31]||(e[31]=m(" - ")),t("span",Gt,l(Math.min(u.value.current_page*u.value.per_page,u.value.total_items)),1),e[32]||(e[32]=m(" dari ")),t("span",Kt,l(u.value.total_items),1),e[33]||(e[33]=m(" data "))]),t("div",Xt,[u.value.current_page>1?(i(),d("button",{key:0,onClick:e[5]||(e[5]=a=>A(u.value.current_page-1)),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition"},e[34]||(e[34]=[t("i",{class:"fa-solid fa-chevron-left mr-1"},null,-1),m(" Sebelumnya ")]))):y("",!0),u.value.current_page<u.value.total_pages?(i(),d("button",{key:1,onClick:e[6]||(e[6]=a=>A(u.value.current_page+1)),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition"},e[35]||(e[35]=[m(" Selanjutnya "),t("i",{class:"fa-solid fa-chevron-right ml-1"},null,-1)]))):y("",!0)])])])):(i(),d("div",Yt,e[36]||(e[36]=[t("i",{class:"fa-solid fa-inbox text-gray-400 text-6xl mb-4"},null,-1),t("p",{class:"text-gray-500 text-lg font-medium"},"Tidak ada data stock opname",-1),t("p",{class:"text-gray-400 text-sm mt-2"},'Pilih filter dan klik "Load Data" untuk melihat data',-1)])))])]),_:1}))}};export{de as default};
