import{r as y,W as Q,w as V,a as L,a8 as U,L as u,B as c,x,Q as j,U as H,C as A,D as t,E as S,G as k,S as G,H as O,J as $,N as o,F as h,M as C,l as E,Y as J}from"./vendor-vue-g7iCcTkf.js";import{A as K}from"./AppLayout-B4yqCJld.js";import{l as Y}from"./lodash-DB3HVzpp.js";import{m as X}from"./vendor-charts-CuqD4wLC.js";import"./vendor-utils-CpgP2uT4.js";import"./app-CX1ZKpmy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DJpuzLQV.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const Z={class:"max-w-7xl w-full mx-auto py-8 px-2"},q={class:"flex justify-between items-center mb-6"},tt={class:"mb-6 bg-white rounded-xl shadow-lg p-6 border border-gray-100"},et={class:"flex flex-wrap gap-4 items-center"},st={class:"flex items-center gap-2"},ot={class:"relative"},lt={class:"flex items-center gap-2"},at={class:"relative"},rt={class:"flex gap-2"},nt={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},it={class:"bg-white rounded-xl shadow-lg p-6 border border-gray-100"},dt={class:"flex items-center"},ut={class:"ml-4"},ct={class:"text-2xl font-bold text-gray-900"},gt={class:"bg-white rounded-xl shadow-lg p-6 border border-gray-100"},pt={class:"flex items-center"},ft={class:"ml-4"},xt={class:"text-2xl font-bold text-gray-900"},mt={class:"bg-white rounded-xl shadow-lg p-6 border border-gray-100"},bt={class:"flex items-center"},vt={class:"ml-4"},yt={class:"text-2xl font-bold text-gray-900"},ht={class:"bg-white rounded-xl shadow-lg p-6 border border-gray-100"},_t={class:"flex items-center"},wt={class:"ml-4"},St={class:"text-2xl font-bold text-gray-900"},kt={class:"space-y-8"},Ct=["onClick"],Dt={class:"flex items-center justify-between"},Bt={class:"flex items-center gap-4"},Rt={class:"text-xl font-bold text-gray-800"},Tt={class:"text-sm text-gray-600"},jt={class:"flex items-center gap-4"},At={class:"text-right"},Ot={class:"text-2xl font-bold text-blue-600"},$t={class:"text-sm text-gray-600"},Et={class:"flex items-center"},Ft={class:"w-16 h-16 relative"},Nt={class:"w-16 h-16 transform -rotate-90",viewBox:"0 0 36 36"},Wt=["stroke-dashoffset"],Mt={class:"absolute inset-0 flex items-center justify-center"},zt={class:"text-sm font-bold text-gray-700"},It={key:0,class:"px-6 pb-6"},Pt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Qt={class:"bg-gray-50 rounded-lg p-4"},Vt={class:"bg-gray-50 rounded-lg p-4"},Lt={class:"space-y-3"},Ut={class:"flex justify-between items-center"},Ht={class:"font-semibold text-blue-600"},Gt={class:"flex justify-between items-center"},Jt={class:"font-semibold text-blue-600"},Kt={class:"flex justify-between items-center"},Yt={class:"font-semibold text-gray-800"},Xt={class:"flex justify-between items-center"},Zt={class:"font-semibold text-gray-800"},qt={class:"mt-6"},te={class:"space-y-4"},ee={class:"flex justify-between items-start mb-3"},se={class:"flex-1"},oe={class:"font-medium text-gray-800 mb-2"},le={class:"flex items-center gap-4 text-sm text-gray-600"},ae=["onClick"],re={key:0,class:"mt-4"},ne={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},ie={class:"space-y-2"},de={class:"flex items-center gap-2"},ue={class:"text-sm text-gray-600"},ce={class:"w-20 bg-gray-200 rounded-full h-2"},ge={class:"text-sm font-medium text-gray-800"},pe={key:0,class:"text-center py-12"},fe={components:{apexchart:X}},De=Object.assign(fe,{__name:"Report",props:{categories:Array,totalSurveys:Number,totalResponses:Number,overallAverage:Number,overallPercentage:Number,filters:Object},setup(g){var R,T;const _=g,r=y(((R=_.filters)==null?void 0:R.date_from)||""),n=y(((T=_.filters)==null?void 0:T.date_to)||""),p=y([]),m=y({}),b=Y.debounce(()=>{Q.get("/employee-survey-report",{date_from:r.value,date_to:n.value},{preserveState:!0,replace:!0})},400);V([r,n],()=>{b()});function D(){if(r.value&&n.value&&r.value>n.value){const l=r.value;r.value=n.value,n.value=l}b()}function F(){r.value="",n.value="",b()}function w(l){const a=new Date().toISOString().split("T")[0];switch(l){case"today":r.value=a,n.value=a;break;case"week":const s=new Date;s.setDate(s.getDate()-7),r.value=s.toISOString().split("T")[0],n.value=a;break;case"month":const d=new Date;d.setDate(d.getDate()-30),r.value=d.toISOString().split("T")[0],n.value=a;break}b()}function N(l){const e=p.value.indexOf(l);e>-1?p.value.splice(e,1):p.value.push(l)}function W(l,e){const a=`${l}-${e}`;m.value[a]=!m.value[a]}function M(l){return{chart:{type:"donut",height:300,toolbar:{show:!0},animations:{enabled:!0,easing:"easeinout",speed:800}},labels:["Score","Remaining"],colors:["#3B82F6","#E5E7EB"],plotOptions:{pie:{donut:{size:"70%",labels:{show:!0,name:{show:!0,fontSize:"14px",fontWeight:600,color:"#374151"},value:{show:!0,fontSize:"16px",fontWeight:700,color:"#1F2937",formatter:function(e){return e+"%"}},total:{show:!0,showAlways:!0,label:"Total",fontSize:"14px",fontWeight:600,color:"#374151",formatter:function(e){return e.globals.seriesTotals.reduce((a,s)=>a+s,0)+"%"}}}}}},dataLabels:{enabled:!1},legend:{position:"bottom",fontSize:"14px",fontWeight:600},tooltip:{y:{formatter:function(e){return e+"%"}}}}}function z(l){return[l.percentage,100-l.percentage]}function I(l){return{chart:{type:"bar",height:200,toolbar:{show:!0},animations:{enabled:!0,easing:"easeinout",speed:800}},xaxis:{categories:["Score 5","Score 4","Score 3","Score 2","Score 1"],title:{text:"Score"},labels:{style:{fontWeight:600},rotate:-45}},yaxis:{title:{text:"Responses"},min:0,labels:{style:{fontWeight:600},formatter:e=>Math.round(e)}},colors:["#10B981","#3B82F6","#F59E0B","#EF4444","#6B7280"],plotOptions:{bar:{borderRadius:4,columnWidth:"60%"}},dataLabels:{enabled:!1},legend:{show:!1},grid:{borderColor:"#e5e7eb",strokeDashArray:4},tooltip:{y:{formatter:function(e){return e+" responses"}}}}}function P(l){return[{name:"Responses",data:[5,4,3,2,1].map(s=>l.score_distribution[s])}]}function B(l,e){return e===0?0:Math.round(l/e*100)}return L(()=>{_.categories.length>0&&p.value.push(0)}),(l,e)=>{const a=U("apexchart");return c(),u(h,null,[x(j(H),{title:"Employee Survey Report"}),x(K,null,{default:A(()=>[t("div",Z,[t("div",q,[e[6]||(e[6]=t("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[t("i",{class:"fa-solid fa-chart-bar text-blue-500"}),k(" Employee Survey Report ")],-1)),x(j(G),{href:l.route("employee-survey.index"),class:"bg-gray-500 hover:bg-gray-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"},{default:A(()=>e[5]||(e[5]=[t("i",{class:"fas fa-arrow-left mr-2"},null,-1),k(" Kembali ke Survey ")])),_:1},8,["href"])]),t("div",tt,[t("div",et,[t("div",st,[e[8]||(e[8]=t("label",{class:"text-sm font-medium text-gray-700"},"Dari:",-1)),t("div",ot,[e[7]||(e[7]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("i",{class:"fa-solid fa-calendar text-gray-400"})],-1)),O(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.value=s),onInput:D,type:"date",class:"pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"},null,544),[[$,r.value]])])]),t("div",lt,[e[10]||(e[10]=t("label",{class:"text-sm font-medium text-gray-700"},"Sampai:",-1)),t("div",at,[e[9]||(e[9]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("i",{class:"fa-solid fa-calendar text-gray-400"})],-1)),O(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.value=s),onInput:D,type:"date",class:"pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"},null,544),[[$,n.value]])])]),t("div",rt,[t("button",{onClick:e[2]||(e[2]=s=>w("today")),class:"px-3 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600 transition-all duration-300 text-sm"}," Hari Ini "),t("button",{onClick:e[3]||(e[3]=s=>w("week")),class:"px-3 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600 transition-all duration-300 text-sm"}," Minggu Ini "),t("button",{onClick:e[4]||(e[4]=s=>w("month")),class:"px-3 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600 transition-all duration-300 text-sm"}," Bulan Ini "),t("button",{onClick:F,class:"px-3 py-2 bg-gray-500 text-white rounded-lg shadow hover:bg-gray-600 transition-all duration-300 text-sm flex items-center gap-1"},e[11]||(e[11]=[t("i",{class:"fas fa-times"},null,-1),k(" Clear ")]))])])]),t("div",nt,[t("div",it,[t("div",dt,[e[13]||(e[13]=t("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600"},[t("i",{class:"fa-solid fa-clipboard-list text-2xl"})],-1)),t("div",ut,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Survey",-1)),t("p",ct,o(g.totalSurveys),1)])])]),t("div",gt,[t("div",pt,[e[15]||(e[15]=t("div",{class:"p-3 rounded-full bg-green-100 text-green-600"},[t("i",{class:"fa-solid fa-comments text-2xl"})],-1)),t("div",ft,[e[14]||(e[14]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Responses",-1)),t("p",xt,o(g.totalResponses),1)])])]),t("div",mt,[t("div",bt,[e[17]||(e[17]=t("div",{class:"p-3 rounded-full bg-yellow-100 text-yellow-600"},[t("i",{class:"fa-solid fa-star text-2xl"})],-1)),t("div",vt,[e[16]||(e[16]=t("p",{class:"text-sm font-medium text-gray-600"},"Average Score",-1)),t("p",yt,o(g.overallAverage)+"/5",1)])])]),t("div",ht,[t("div",_t,[e[19]||(e[19]=t("div",{class:"p-3 rounded-full bg-purple-100 text-purple-600"},[t("i",{class:"fa-solid fa-percentage text-2xl"})],-1)),t("div",wt,[e[18]||(e[18]=t("p",{class:"text-sm font-medium text-gray-600"},"Overall Percentage",-1)),t("p",St,o(g.overallPercentage)+"%",1)])])])]),t("div",kt,[(c(!0),u(h,null,C(g.categories,(s,d)=>(c(),u("div",{key:d,class:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden"},[t("div",{class:"p-6 cursor-pointer hover:bg-gray-50 transition-colors",onClick:i=>N(d)},[t("div",Dt,[t("div",Bt,[e[20]||(e[20]=t("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600"},[t("i",{class:"fa-solid fa-chart-pie text-xl"})],-1)),t("div",null,[t("h3",Rt,o(s.name),1),t("p",Tt,o(s.total_responses)+" responses",1)])]),t("div",jt,[t("div",At,[t("p",Ot,o(s.average_score)+"/5",1),t("p",$t,o(s.percentage)+"%",1)]),t("div",Et,[t("div",Ft,[(c(),u("svg",Nt,[e[21]||(e[21]=t("path",{class:"text-gray-200",stroke:"currentColor","stroke-width":"3",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"},null,-1)),t("path",{class:"text-blue-500",stroke:"currentColor","stroke-width":"3",fill:"none","stroke-dasharray":"100, 100","stroke-dashoffset":100-s.percentage,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"},null,8,Wt)])),t("div",Mt,[t("span",zt,o(s.percentage)+"%",1)])]),t("i",{class:E(["fa-solid text-gray-400 text-xl ml-2 transition-transform",p.value.includes(d)?"fa-chevron-up":"fa-chevron-down"])},null,2)])])])],8,Ct),p.value.includes(d)?(c(),u("div",It,[t("div",Pt,[t("div",Qt,[e[22]||(e[22]=t("h4",{class:"text-lg font-semibold mb-4 text-gray-800"},"Category Overview",-1)),x(a,{type:"donut",options:M(s),series:z(s),height:"300"},null,8,["options","series"])]),t("div",Vt,[e[27]||(e[27]=t("h4",{class:"text-lg font-semibold mb-4 text-gray-800"},"Statistics",-1)),t("div",Lt,[t("div",Ut,[e[23]||(e[23]=t("span",{class:"text-sm text-gray-600"},"Average Score:",-1)),t("span",Ht,o(s.average_score)+"/5",1)]),t("div",Gt,[e[24]||(e[24]=t("span",{class:"text-sm text-gray-600"},"Percentage:",-1)),t("span",Jt,o(s.percentage)+"%",1)]),t("div",Kt,[e[25]||(e[25]=t("span",{class:"text-sm text-gray-600"},"Total Responses:",-1)),t("span",Yt,o(s.total_responses),1)]),t("div",Xt,[e[26]||(e[26]=t("span",{class:"text-sm text-gray-600"},"Total Surveys:",-1)),t("span",Zt,o(s.total_surveys),1)])])])]),t("div",qt,[e[30]||(e[30]=t("h4",{class:"text-lg font-semibold mb-4 text-gray-800"},"Questions Detail",-1)),t("div",te,[(c(!0),u(h,null,C(s.questions,(i,v)=>(c(),u("div",{key:v,class:"border rounded-lg p-4 bg-white"},[t("div",ee,[t("div",se,[t("h5",oe,o(i.text),1),t("div",le,[t("span",null,"Avg: "+o(i.average_score)+"/5",1),t("span",null,"Percentage: "+o(i.percentage)+"%",1),t("span",null,"Responses: "+o(i.total_responses),1)])]),t("button",{onClick:f=>W(d,v),class:"text-blue-500 hover:text-blue-700 transition-colors"},[t("i",{class:E(["fa-solid",m.value[`${d}-${v}`]?"fa-chevron-up":"fa-chevron-down"])},null,2)],8,ae)]),m.value[`${d}-${v}`]?(c(),u("div",re,[t("div",ne,[t("div",null,[e[28]||(e[28]=t("h6",{class:"text-sm font-medium text-gray-700 mb-2"},"Score Distribution",-1)),x(a,{type:"bar",options:I(i),series:P(i),height:"200"},null,8,["options","series"])]),t("div",null,[e[29]||(e[29]=t("h6",{class:"text-sm font-medium text-gray-700 mb-2"},"Score Breakdown",-1)),t("div",ie,[(c(),u(h,null,C([5,4,3,2,1],f=>t("div",{key:f,class:"flex items-center justify-between"},[t("div",de,[t("span",ue,o(f)+":",1),t("div",ce,[t("div",{class:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:J({width:B(i.score_distribution[f],i.total_responses)+"%"})},null,4)])]),t("span",ge,o(i.score_distribution[f])+" ("+o(B(i.score_distribution[f],i.total_responses))+"%) ",1)])),64))])])])])):S("",!0)]))),128))])])])):S("",!0)]))),128))]),g.categories.length===0?(c(),u("div",pe,e[31]||(e[31]=[t("div",{class:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4"},[t("i",{class:"fa-solid fa-chart-bar text-gray-400 text-3xl"})],-1),t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Belum ada data survey",-1),t("p",{class:"text-gray-500 mb-6"},"Tidak ada survey yang tersedia untuk periode yang dipilih",-1)]))):S("",!0)])]),_:1})],64)}}});export{De as default};
