import{r as y,w as W,W as A,c as B,A as P,B as a,C as V,D as t,H as _,J as C,L as r,F as h,M as v,N as i,I as T,G as E,E as d}from"./vendor-vue-g7iCcTkf.js";import{A as R}from"./AppLayout-C6QNM8cp.js";import"./vendor-utils-CpgP2uT4.js";import"./app-D-uxhaxN.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-cFrDwyHJ.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const U={class:"w-full min-h-screen py-8 px-2 md:px-6"},$={class:"flex flex-col md:flex-row md:items-center gap-4 mb-4"},q={class:"flex items-center gap-2"},F=["value"],M={class:"flex items-center gap-2"},G={class:"flex items-center gap-2"},j=["disabled"],Q={key:0,class:"animate-spin mr-2"},H={key:1,class:"mr-2"},J={class:"bg-white rounded-xl shadow-lg overflow-hidden"},K={class:"overflow-x-auto"},O={class:"min-w-full divide-y divide-gray-200"},z={class:"bg-white divide-y divide-gray-200"},X=["rowspan"],Y=["rowspan"],Z=["rowspan"],I=["rowspan"],tt=["rowspan"],et={class:"px-6 py-4 whitespace-nowrap text-sm"},st={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},at={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},rt={class:"px-6 py-4 whitespace-nowrap text-sm"},ot=["rowspan"],lt=["rowspan"],nt=["rowspan"],it={class:"px-6 py-4 whitespace-nowrap text-sm"},pt={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},ut={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},_t={__name:"Report",props:{processes:Array,warehouses:Array,filters:Object},setup(D){const c=D,x=y(c.filters.search||""),w=y(c.filters.warehouse_id||""),m=y(c.filters.from||""),g=y(c.filters.to||""),k=y(!1);W([x,w,m,g],()=>{A.get(route("butcher-processes.report"),{search:x.value,warehouse_id:w.value,from:m.value,to:g.value},{preserveState:!0,preserveScroll:!0,replace:!0})});const S=B(()=>{let p=c.processes;if(w.value&&(p=p.filter(s=>{var l;return s.warehouse_name===((l=c.warehouses.find(n=>n.id==w.value))==null?void 0:l.name)})),!x.value)return p;const e=x.value.toLowerCase();return p.filter(s=>{var l;return s.number.toLowerCase().includes(e)||((l=s.gr_number)==null?void 0:l.toLowerCase().includes(e))||s.warehouse_name.toLowerCase().includes(e)||s.items.some(n=>n.whole_item_name.toLowerCase().includes(e)||n.pcs_item_name.toLowerCase().includes(e))})});function f(p){return p?new Date(p).toLocaleDateString("id-ID"):"-"}function b(p){return p==null?"-":Number(p)%1===0?Number(p):Number(p).toLocaleString("id-ID",{minimumFractionDigits:0,maximumFractionDigits:2})}function L(p){const e=[];let s=null,l=null;return p.forEach(n=>{const o=[n.whole_item_name,n.slaughter_date,n.packing_date,n.batch_est].join("|");o!==s&&(l={key:o,items:[]},e.push(l),s=o),l.items.push(n)}),e}function N(){k.value=!0,window.location.reload()}return(p,e)=>(a(),P(R,null,{default:V(()=>[t("div",U,[e[12]||(e[12]=t("h1",{class:"text-2xl font-bold mb-6"},"Butcher Report",-1)),t("div",$,[_(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>x.value=s),type:"text",placeholder:"Cari nomor proses, GR, warehouse, item...",class:"px-4 py-2 border border-gray-300 rounded-lg w-full md:w-64 focus:ring-blue-500 focus:border-blue-500"},null,512),[[C,x.value]]),t("div",q,[e[5]||(e[5]=t("label",{class:"text-sm"},"Warehouse",-1)),_(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>w.value=s),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[e[4]||(e[4]=t("option",{value:""},"Semua Warehouse",-1)),(a(!0),r(h,null,v(D.warehouses,s=>(a(),r("option",{key:s.id,value:s.id},i(s.name),9,F))),128))],512),[[T,w.value]])]),t("div",M,[e[6]||(e[6]=t("label",{class:"text-sm"},"Dari",-1)),_(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>m.value=s),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[C,m.value]])]),t("div",G,[e[7]||(e[7]=t("label",{class:"text-sm"},"Sampai",-1)),_(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=s=>g.value=s),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[C,g.value]])]),t("button",{onClick:N,disabled:k.value,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-700"},[k.value?(a(),r("span",Q,e[8]||(e[8]=[t("i",{class:"fas fa-spinner"},null,-1)]))):(a(),r("span",H,e[9]||(e[9]=[t("i",{class:"fas fa-sync-alt"},null,-1)]))),e[10]||(e[10]=E(" Load Data "))],8,j)]),t("div",J,[t("div",K,[t("table",O,[e[11]||(e[11]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Tanggal"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"No. Proses"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Warehouse"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"No. GR"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Item Whole"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Item PCS"),t("th",{class:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Qty Whole"),t("th",{class:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Qty PCS"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Unit"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Tgl Potong"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Tgl Packing"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Batch EST"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Exp Date"),t("th",{class:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Susut Air"),t("th",{class:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"MAC PCS")])],-1)),t("tbody",z,[(a(!0),r(h,null,v(S.value,s=>(a(),r(h,{key:s.id},[(a(!0),r(h,null,v(L(s.items),(l,n)=>(a(),r(h,{key:l.key},[(a(!0),r(h,null,v(l.items,(o,u)=>(a(),r("tr",{key:`${s.id}-${n}-${u}`,class:"hover:bg-gray-50 transition"},[n===0&&u===0?(a(),r("td",{key:0,class:"px-6 py-4 whitespace-nowrap text-sm",rowspan:s.items.length},i(f(s.process_date)),9,X)):d("",!0),n===0&&u===0?(a(),r("td",{key:1,class:"px-6 py-4 whitespace-nowrap text-sm",rowspan:s.items.length},i(s.number),9,Y)):d("",!0),n===0&&u===0?(a(),r("td",{key:2,class:"px-6 py-4 whitespace-nowrap text-sm",rowspan:s.items.length},i(s.warehouse_name),9,Z)):d("",!0),n===0&&u===0?(a(),r("td",{key:3,class:"px-6 py-4 whitespace-nowrap text-sm",rowspan:s.items.length},i(s.gr_number),9,I)):d("",!0),u===0?(a(),r("td",{key:4,class:"px-6 py-4 whitespace-nowrap text-sm",rowspan:l.items.length},i(o.whole_item_name),9,tt)):d("",!0),t("td",et,i(o.pcs_item_name),1),t("td",st,i(b(o.whole_qty)),1),t("td",at,i(b(o.pcs_qty)),1),t("td",rt,i(o.unit_name),1),u===0?(a(),r("td",{key:5,class:"px-6 py-4 whitespace-nowrap text-sm",rowspan:l.items.length},i(f(o.slaughter_date)),9,ot)):d("",!0),u===0?(a(),r("td",{key:6,class:"px-6 py-4 whitespace-nowrap text-sm",rowspan:l.items.length},i(f(o.packing_date)),9,lt)):d("",!0),u===0?(a(),r("td",{key:7,class:"px-6 py-4 whitespace-nowrap text-sm",rowspan:l.items.length},i(o.batch_est),9,nt)):d("",!0),t("td",it,i(f(o.exp_date)),1),t("td",pt,i(o.susut_air.qty?`${b(o.susut_air.qty)} ${o.susut_air.unit}`:"-"),1),t("td",ut,i(b(o.mac_pcs)),1)]))),128))],64))),128))],64))),128))])])])])])]),_:1}))}};export{_t as default};
