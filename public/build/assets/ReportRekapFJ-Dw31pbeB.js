import{r as m,c as p,w as F,A as j,B as s,C as H,D as t,L as r,E as I,N as u,H as k,J as T,F as w,M as D,I as J,G as _,l as R,W as E}from"./vendor-vue-g7iCcTkf.js";import{A as Y}from"./AppLayout-D6FAfGlz.js";import"./vendor-utils-CpgP2uT4.js";import"./app-dzBjFUgD.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CUUHZNnG.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const $={class:"w-full py-8 px-2"},z={key:0,class:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg"},G={class:"flex items-center gap-2 text-blue-800"},Q={class:"flex flex-col md:flex-row md:items-center gap-4 mb-4"},q={class:"flex items-center gap-2"},K={class:"flex items-center gap-2"},X={class:"flex items-center gap-2"},Z=["value"],ee={key:1,class:"bg-white rounded-xl shadow-lg p-8 text-center text-gray-500 font-bold"},te={key:2,class:"bg-white rounded-xl shadow-lg p-8 text-center text-gray-500 font-bold"},ae={key:3,class:"bg-white rounded-xl shadow-lg overflow-x-auto w-full"},le={class:"w-full min-w-full border border-gray-300"},se={class:"bg-yellow-300 text-gray-900"},ne={key:0},oe=["colspan"],re={class:"px-4 py-2 border border-gray-200"},ie={class:"px-4 py-2 border border-gray-200"},ue={key:4,class:"flex justify-between items-center mt-4"},de={class:"text-sm text-gray-600"},ge={class:"flex gap-1"},me=["disabled"],pe={class:"px-2"},ce=["disabled"],Se={__name:"ReportRekapFJ",props:{outlets:Array,items:Array,filters:Object},setup(v){var L,M;const f=v,n=m(((L=f.filters)==null?void 0:L.from)||""),o=m(((M=f.filters)==null?void 0:M.to)||""),c=m(""),g=m(25),i=m(1),y=m(!1),b=p(()=>{if(!c.value)return f.items;const l=c.value.toLowerCase();return f.items.filter(e=>e.item_name&&e.item_name.toLowerCase().includes(l)||e.unit_name&&e.unit_name.toLowerCase().includes(l))}),x=p(()=>Math.ceil(b.value.length/g.value)||1),h=p(()=>(i.value-1)*g.value),O=p(()=>Math.min(h.value+S.value.length,b.value.length)),S=p(()=>b.value.slice(h.value,h.value+g.value)),C=p(()=>{if(!n.value||!o.value)return"";const l=e=>new Date(e).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"});return`${l(n.value)} - ${l(o.value)}`});function V(){i.value>1&&i.value--}function B(){i.value<x.value&&i.value++}F([g,c],()=>{i.value=1}),F([n,o],([l,e],[a,d])=>{(a!==void 0||d!==void 0)&&(y.value=!1),i.value=1});function N(){const e=new Date().toISOString().split("T")[0];n.value=e,o.value=e}function A(){const l=new Date,e=l.getDay(),a=new Date(l);a.setDate(l.getDate()-e+(e===0?-6:1));const d=new Date(a);d.setDate(a.getDate()+6),n.value=a.toISOString().split("T")[0],o.value=d.toISOString().split("T")[0]}function U(){const l=new Date,e=new Date(l.getFullYear(),l.getMonth(),1),a=new Date(l.getFullYear(),l.getMonth()+1,0);n.value=e.toISOString().split("T")[0],o.value=a.toISOString().split("T")[0]}function P(){if(!n.value||!o.value){alert("Silakan pilih rentang tanggal terlebih dahulu");return}if(new Date(n.value)>new Date(o.value)){alert('Tanggal "Sampai" tidak boleh lebih kecil dari tanggal "Dari"');return}y.value=!0,E.get("/report-rekap-fj",{from:n.value,to:o.value},{preserveState:!0,preserveScroll:!0})}function W(l){return l==null?"":Number(l).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2})}return(l,e)=>(s(),j(Y,null,{default:H(()=>[t("div",$,[e[16]||(e[16]=t("h1",{class:"text-2xl font-bold mb-6"},"Report Rekap FJ",-1)),C.value?(s(),r("div",z,[t("div",G,[e[4]||(e[4]=t("i",{class:"fa fa-calendar text-blue-600"},null,-1)),e[5]||(e[5]=t("span",{class:"font-medium"},"Rentang Tanggal:",-1)),t("span",null,u(C.value),1)])])):I("",!0),t("div",Q,[t("div",q,[e[6]||(e[6]=t("label",{class:"text-sm font-medium text-gray-700"},"Dari:",-1)),k(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),type:"date",class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[T,n.value]])]),t("div",K,[e[7]||(e[7]=t("label",{class:"text-sm font-medium text-gray-700"},"Sampai:",-1)),k(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>o.value=a),type:"date",class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[T,o.value]])]),k(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>c.value=a),type:"text",placeholder:"Cari item/unit...",class:"px-4 py-2 border border-gray-300 rounded-lg w-full md:w-64 focus:ring-blue-500 focus:border-blue-500"},null,512),[[T,c.value]]),t("div",X,[e[8]||(e[8]=t("label",{class:"text-sm"},"Tampilkan",-1)),k(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>g.value=a),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[(s(),r(w,null,D([10,25,50,100],a=>t("option",{key:a,value:a},u(a),9,Z)),64))],512),[[J,g.value]]),e[9]||(e[9]=t("span",{class:"text-sm"},"data",-1))]),t("button",{onClick:N,class:"inline-flex items-center px-3 py-2 bg-green-600 text-white rounded-md font-semibold hover:bg-green-700 mr-2"},e[10]||(e[10]=[t("span",{class:"mr-2"},[t("i",{class:"fas fa-calendar-day"})],-1),_(" Hari Ini ")])),t("button",{onClick:A,class:"inline-flex items-center px-3 py-2 bg-purple-600 text-white rounded-md font-semibold hover:bg-purple-700 mr-2"},e[11]||(e[11]=[t("span",{class:"mr-2"},[t("i",{class:"fas fa-calendar-week"})],-1),_(" Minggu Ini ")])),t("button",{onClick:U,class:"inline-flex items-center px-3 py-2 bg-orange-600 text-white rounded-md font-semibold hover:bg-orange-700 mr-2"},e[12]||(e[12]=[t("span",{class:"mr-2"},[t("i",{class:"fas fa-calendar-alt"})],-1),_(" Bulan Ini ")])),t("button",{onClick:P,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-700"},e[13]||(e[13]=[t("span",{class:"mr-2"},[t("i",{class:"fas fa-sync-alt"})],-1),_(" Load Data ")]))]),!n.value||!o.value?(s(),r("div",ee," Silakan pilih rentang tanggal terlebih dahulu ")):y.value?(s(),r("div",ae,[t("table",le,[t("thead",null,[t("tr",se,[e[14]||(e[14]=t("th",{class:"px-4 py-2 border border-gray-300"},"Nama Items",-1)),e[15]||(e[15]=t("th",{class:"px-4 py-2 border border-gray-300"},"Unit",-1)),(s(!0),r(w,null,D(v.outlets,a=>(s(),r("th",{key:a.id_outlet,class:"px-4 py-2 border border-gray-300 text-right"},u(a.nama_outlet),1))),128))])]),t("tbody",null,[S.value.length?I("",!0):(s(),r("tr",ne,[t("td",{colspan:2+v.outlets.length,class:"text-center py-10 text-gray-400"},"Tidak ada data.",8,oe)])),(s(!0),r(w,null,D(S.value,a=>(s(),r("tr",{key:a.item_name+"-"+a.unit_name},[t("td",re,u(a.item_name),1),t("td",ie,u(a.unit_name),1),(s(!0),r(w,null,D(v.outlets,d=>(s(),r("td",{key:d.id_outlet,class:"px-4 py-2 border border-gray-200 text-right"},u(a[d.nama_outlet]?W(a[d.nama_outlet]):""),1))),128))]))),128))])])])):(s(),r("div",te,' Silakan klik "Load Data" untuk menampilkan laporan ')),n.value&&o.value&&y.value&&b.value.length?(s(),r("div",ue,[t("div",de," Menampilkan "+u(h.value+1)+" - "+u(O.value)+" dari "+u(b.value.length)+" data ",1),t("div",ge,[t("button",{onClick:V,disabled:i.value===1,class:R(["px-3 py-1 rounded border text-sm",i.value===1?"bg-gray-200 text-gray-400":"bg-white text-blue-700 hover:bg-blue-50"])},"<",10,me),t("span",pe,"Halaman "+u(i.value)+" / "+u(x.value),1),t("button",{onClick:B,disabled:i.value===x.value,class:R(["px-3 py-1 rounded border text-sm",i.value===x.value?"bg-gray-200 text-gray-400":"bg-white text-blue-700 hover:bg-blue-50"])},">",10,ce)])])):I("",!0)])]),_:1}))}};export{Se as default};
