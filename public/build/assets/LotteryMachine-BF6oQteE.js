import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as m,a as E,w as G,L as n,B as r,D as t,E as g,G as p,N as i,F as v,M as _,Y as I,l as W}from"./vendor-vue-g7iCcTkf.js";import"./vendor-utils-CpgP2uT4.js";const Y={class:"min-h-screen bg-gradient-to-br from-red-900 via-purple-900 to-blue-900 flex items-center justify-center p-4"},j={class:"max-w-7xl w-full"},O={class:"text-center mb-8"},V={class:"text-yellow-200 text-lg"},F={class:"text-blue-200 text-sm"},P={class:"flex justify-center mb-8"},X={class:"bg-black bg-opacity-50 rounded-3xl p-8 shadow-2xl backdrop-blur-sm border-4 border-yellow-400"},H={class:"lottery-machine-frame bg-gradient-to-b from-gray-800 to-gray-900 rounded-2xl p-6 border-2 border-yellow-300"},R={class:"balls-container h-96 w-full bg-gradient-to-b from-blue-900 to-purple-900 rounded-xl p-4 border-2 border-yellow-200 relative overflow-hidden"},U={class:"text-center"},q={class:"truncate px-1"},J={key:0,class:"text-xs opacity-75 truncate px-1"},K={class:"absolute inset-0 pointer-events-none"},Q={class:"text-center mt-6"},Z=["disabled"],tt={key:0,class:"text-center mb-8"},et={class:"bg-black bg-opacity-50 rounded-2xl p-6 shadow-2xl max-w-2xl mx-auto backdrop-blur-sm border-2 border-yellow-400"},ot={class:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white p-6 rounded-xl border-2 border-yellow-300"},lt={class:"text-2xl font-bold mb-2"},st={key:0,class:"text-lg text-yellow-100"},at={key:1,class:"text-lg text-yellow-100"},nt={key:1,class:"bg-black bg-opacity-50 rounded-2xl p-6 shadow-2xl backdrop-blur-sm border-2 border-yellow-400"},rt={class:"text-2xl font-bold text-yellow-400 mb-4 flex items-center gap-2"},it={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 max-h-96 overflow-y-auto"},dt={class:"absolute -top-1 -right-1 bg-yellow-500 text-black rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold"},ct={class:"font-bold text-sm mb-1 truncate"},ut={key:0,class:"text-xs text-yellow-100 truncate"},bt={__name:"LotteryMachine",props:{roulettes:Array},setup(w){const s=w,c=m(!1),d=m(null),h=m([]),M=m(0),b=m([]),y=()=>{if(!s.roulettes||s.roulettes.length===0){console.log("No roulettes data available");return}console.log("Initializing lottery machine with",s.roulettes.length,"participants"),M.value=s.roulettes.length;const l=[...s.roulettes].sort(()=>Math.random()-.5);b.value=l,console.log("Display balls initialized with",b.value.length,"balls")},S=l=>{const e=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-orange-500","bg-teal-500","bg-cyan-500","bg-lime-500","bg-emerald-500"],o=Math.random()*30+40,a=Math.random()*85+7.5,u=Math.random()*85+7.5,x=e[l%e.length];return{width:`${o}px`,height:`${o}px`,left:`${a}%`,top:`${u}%`,backgroundColor:x.replace("bg-","").split("-")[0],zIndex:Math.floor(Math.random()*10)+1}},$=l=>{const e=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-orange-500","bg-teal-500","bg-cyan-500","bg-lime-500","bg-emerald-500"],o=Math.random()*30+40,a=e[l%e.length],u=Date.now()*.002,x=25+Math.random()*15,k=.8+Math.random()*.4,f=l*.2,B=Math.sin(u*.5+f)*10,L=Math.cos(u*.7+f)*10,T=50+Math.sin(u*k+f)*x+B,A=50+Math.cos(u*k+f)*x+L;return{width:`${o}px`,height:`${o}px`,left:`${Math.max(5,Math.min(95,T))}%`,top:`${Math.max(5,Math.min(95,A))}%`,backgroundColor:a.replace("bg-","").split("-")[0],zIndex:Math.floor(Math.random()*10)+1}},z=l=>{const e=Math.random()*20+10,o=Math.random()*100,a=Math.random()*5;return{width:`${e}px`,height:`${e}px`,left:`${o}%`,bottom:"-20px",animationDelay:`${a}s`}},C=()=>{if(c.value||!s.roulettes||s.roulettes.length===0){console.log("Cannot start lottery");return}console.log("Starting lottery with",s.roulettes.length,"participants"),c.value=!0,d.value=null;const l=Math.floor(Math.random()*s.roulettes.length),e=s.roulettes[l];console.log("Selected winner:",e.nama),setTimeout(()=>{c.value=!1;const o=[...s.roulettes].sort(()=>Math.random()-.5);b.value=o;const a=b.value.findIndex(u=>u.id===e.id);a!==-1&&(b.value[a]={...e,style:{width:"120px",height:"120px",left:"50%",top:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#fbbf24",zIndex:100}}),setTimeout(()=>{d.value=e,h.value.push(e),console.log("Lottery completed")},1e3)},4e3)},N=()=>{c.value=!1,d.value=null,h.value=[],y()};return E(()=>{var l;console.log("LotteryMachine mounted with",(l=s.roulettes)==null?void 0:l.length,"participants"),y()}),G(()=>s.roulettes,l=>{console.log("Roulettes data changed:",l==null?void 0:l.length,"participants"),l&&l.length>0&&y()},{immediate:!0}),(l,e)=>(r(),n("div",Y,[t("div",j,[t("div",O,[e[0]||(e[0]=t("h1",{class:"text-4xl font-bold text-white mb-2"},[t("i",{class:"fa-solid fa-dice text-yellow-400 mr-3"}),p(" YMSoft LOTTERY MACHINE ")],-1)),t("p",V,"Total Peserta: "+i(w.roulettes.length.toLocaleString())+" orang",1),t("p",F,"Menampilkan "+i(M.value)+" bola dalam mesin",1)]),t("div",P,[t("div",X,[t("div",H,[t("div",R,[(r(!0),n(v,null,_(b.value,(o,a)=>(r(),n("div",{key:o.id,class:W(["ball absolute rounded-full text-white flex items-center justify-center text-xs font-bold border-2 border-white shadow-lg transition-all duration-300",{"winner-ball":d.value&&d.value.id===o.id&&!c.value,"spinning-ball":c.value}]),style:I(c.value?$(a):S(a))},[t("div",U,[t("div",q,i(o.nama),1),o.no_hp?(r(),n("div",J,i(o.no_hp),1)):g("",!0)])],6))),128)),t("div",K,[(r(),n(v,null,_(20,o=>t("div",{key:o,class:"bubble absolute bg-white bg-opacity-20 rounded-full animate-bubble",style:I(z())},null,4)),64))])]),t("div",Q,[t("button",{onClick:C,disabled:c.value,class:"bg-gradient-to-r from-red-500 to-pink-600 text-white px-12 py-4 rounded-full text-2xl font-bold shadow-2xl hover:shadow-3xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105"},[e[1]||(e[1]=t("i",{class:"fa-solid fa-play mr-3"},null,-1)),p(" "+i(c.value?"DRAWING...":"DRAW WINNER!"),1)],8,Z)])])])]),d.value?(r(),n("div",tt,[t("div",et,[e[2]||(e[2]=t("h2",{class:"text-3xl font-bold text-yellow-400 mb-4"},[t("i",{class:"fa-solid fa-trophy mr-3"}),p(" CONGRATULATIONS! ")],-1)),t("div",ot,[t("h3",lt,i(d.value.nama),1),d.value.email?(r(),n("p",st,i(d.value.email),1)):g("",!0),d.value.no_hp?(r(),n("p",at,i(d.value.no_hp),1)):g("",!0)])])])):g("",!0),h.value.length>0?(r(),n("div",nt,[t("h3",rt,[e[3]||(e[3]=t("i",{class:"fa-solid fa-trophy"},null,-1)),p(" Semua Pemenang ("+i(h.value.length)+") ",1)]),t("div",it,[(r(!0),n(v,null,_(h.value,(o,a)=>(r(),n("div",{key:o.id,class:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white p-3 rounded-lg border border-yellow-300 relative"},[t("div",dt,i(a+1),1),t("h4",ct,i(o.nama),1),o.no_hp?(r(),n("p",ut,i(o.no_hp),1)):g("",!0)]))),128))])])):g("",!0),t("div",{class:"text-center mt-8"},[t("button",{onClick:N,class:"bg-gray-600 hover:bg-gray-700 text-white px-8 py-3 rounded-xl font-semibold transition-all border-2 border-gray-500"},e[4]||(e[4]=[t("i",{class:"fa-solid fa-redo mr-2"},null,-1),p(" Reset Game ")]))])])]))}},pt=D(bt,[["__scopeId","data-v-946157d2"]]);export{pt as default};
