import{r as n,w as P,a as R,L as f,E as C,B as x,D as t,H as T,J as B,F as M,M as N,N as a}from"./vendor-vue-g7iCcTkf.js";import{a as D}from"./vendor-utils-CpgP2uT4.js";const L={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40"},S={class:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-y-auto relative animate-fadeIn"},V={class:"p-6"},$={class:"mb-4"},j={class:"overflow-x-auto"},z={class:"min-w-full text-sm rounded-xl overflow-hidden"},A={class:"py-2 px-3 font-semibold text-blue-700"},E={class:"py-2 px-3"},F={class:"py-2 px-3"},I={class:"py-2 px-3"},q={class:"py-2 px-3"},H={class:"py-2 px-3 text-right"},J={class:"py-2 px-3"},O={class:"py-2 px-3"},U={class:"py-2 px-3 text-center"},G=["onClick"],K={class:"flex justify-between items-center mt-4"},Q={class:"text-sm text-gray-500"},W={class:"flex gap-2"},X=["disabled"],Y=["disabled"],st={__name:"AllPRModal",props:{show:Boolean},emits:["close","open-detail"],setup(m,{emit:h}){const y=h,b=n([]),l=n(1),u=n(10),r=n(0),c=n(1),i=n(""),v=n(!1);let p=null;async function d(){v.value=!0;try{const o=await D.get("/api/maintenance-pr-latest",{params:{page:l.value,perPage:u.value,search:i.value}});b.value=o.data.data,r.value=o.data.total,c.value=o.data.lastPage}finally{v.value=!1}}function _(o){return o?"Rp "+Number(o).toLocaleString("id-ID"):"Rp 0"}function g(){l.value>1&&(l.value--,d())}function w(){l.value<c.value&&(l.value++,d())}function k(o){y("open-detail",o)}return P(i,()=>{l.value=1,p&&clearTimeout(p),p=setTimeout(()=>{d()},300)}),R(()=>{d()}),(o,e)=>m.show?(x(),f("div",L,[t("div",S,[t("button",{onClick:e[0]||(e[0]=s=>o.$emit("close")),class:"absolute top-3 right-3 text-gray-400 hover:text-red-500 text-xl z-10"},e[2]||(e[2]=[t("i",{class:"fas fa-times"},null,-1)])),t("div",V,[e[7]||(e[7]=t("h2",{class:"text-xl font-bold mb-4"},"Semua Purchase Requisition",-1)),t("div",$,[T(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>i.value=s),placeholder:"Cari PR...",class:"w-full md:w-64 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[B,i.value]])]),t("div",j,[t("table",z,[e[4]||(e[4]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"py-2 px-3 text-left font-bold"},"PR Number"),t("th",{class:"py-2 px-3 text-left font-bold"},"Task Number"),t("th",{class:"py-2 px-3 text-left font-bold"},"Title"),t("th",{class:"py-2 px-3 text-left font-bold"},"Outlet"),t("th",{class:"py-2 px-3 text-left font-bold"},"Status"),t("th",{class:"py-2 px-3 text-right font-bold"},"Total"),t("th",{class:"py-2 px-3 text-left font-bold"},"Tanggal"),t("th",{class:"py-2 px-3 text-left font-bold"},"Created By"),t("th",{class:"py-2 px-3 text-center font-bold"},"Action")])],-1)),t("tbody",null,[(x(!0),f(M,null,N(b.value,s=>(x(),f("tr",{key:s.id,class:"hover:bg-blue-50 transition"},[t("td",A,a(s.pr_number),1),t("td",E,a(s.task_number||"-"),1),t("td",F,a(s.title||"-"),1),t("td",I,a(s.nama_outlet||"-"),1),t("td",q,a(s.status),1),t("td",H,a(_(s.total_amount)),1),t("td",J,a(s.created_at?s.created_at.substring(0,10):"-"),1),t("td",O,a(s.created_by||"-"),1),t("td",U,[t("button",{class:"p-2 rounded hover:bg-blue-100 transition",onClick:Z=>k(s)},e[3]||(e[3]=[t("i",{class:"fas fa-eye text-blue-600"},null,-1)]),8,G)])]))),128))])])]),t("div",K,[t("div",Q," Menampilkan "+a((l.value-1)*u.value+1)+" - "+a(Math.min(l.value*u.value,r.value))+" dari "+a(r.value)+" data ",1),t("div",W,[t("button",{onClick:g,disabled:l.value===1,class:"px-3 py-1 rounded border disabled:opacity-50 disabled:cursor-not-allowed"},e[5]||(e[5]=[t("i",{class:"fas fa-chevron-left"},null,-1)]),8,X),t("button",{onClick:w,disabled:l.value===c.value,class:"px-3 py-1 rounded border disabled:opacity-50 disabled:cursor-not-allowed"},e[6]||(e[6]=[t("i",{class:"fas fa-chevron-right"},null,-1)]),8,Y)])])])])])):C("",!0)}};export{st as default};
