import{r as x,W as g,w as tt,A as et,B as a,C as st,D as t,x as lt,G as R,l as d,N as o,H as C,I as T,J as at,L as n,E as v,F as y,M as h,Y as nt}from"./vendor-vue-g7iCcTkf.js";import{l as rt}from"./lodash-DB3HVzpp.js";import{S as w}from"./app-CZyV0iGJ.js";import it from"./ChartOfAccountFormModal-DvuRuRG3.js";import{A as ot}from"./AppLayout-Dr73aeKz.js";import{a as ut}from"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DbuU0LgT.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const dt={class:"w-full py-8 px-4"},ct={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},pt={class:"flex items-center justify-between"},xt={class:"text-2xl font-bold text-gray-900"},ft={class:"flex items-center justify-between"},gt={class:"text-2xl font-bold text-gray-900"},yt={class:"text-xs text-gray-500"},bt={class:"flex items-center justify-between"},mt={class:"text-2xl font-bold text-gray-900"},vt={class:"text-xs text-gray-500"},ht={class:"flex items-center justify-between"},wt={class:"text-2xl font-bold text-gray-900"},kt={class:"mb-4 flex gap-4 flex-wrap"},At={class:"bg-white rounded-2xl shadow-lg overflow-x-auto"},Ct={class:"min-w-full divide-y divide-blue-200"},_t={class:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900"},Mt={key:0,class:"text-gray-600"},St={key:1,class:"font-semibold"},Tt={class:"px-4 py-2 whitespace-nowrap text-sm text-gray-900"},Bt={class:"flex items-center"},Lt={class:"font-semibold"},Ot={key:1,class:"text-xs text-gray-400 ml-2"},$t={class:"px-4 py-2 whitespace-nowrap text-sm text-gray-500"},jt={key:0,class:"text-gray-600"},Et={key:1,class:"text-gray-400"},Pt={class:"px-4 py-2 whitespace-nowrap text-sm"},Nt={class:"px-4 py-2 text-sm text-gray-500"},Dt={class:"px-4 py-2 whitespace-nowrap text-sm text-gray-900"},Ht={key:0,class:"font-medium"},Rt={key:1,class:"text-gray-400"},qt={class:"px-4 py-2 whitespace-nowrap text-sm"},Ft={key:1,class:"text-gray-400"},Vt={class:"px-4 py-2 text-sm text-gray-500"},Kt={key:0,class:"flex flex-col gap-1"},Ut={class:"font-medium text-gray-900"},Gt={class:"text-xs text-gray-500"},Wt={key:1,class:"text-gray-400"},Yt={class:"px-4 py-2 text-sm"},zt={key:0,class:"flex flex-col gap-1"},It={key:0,class:"flex flex-wrap gap-1"},Xt={key:1,class:"text-gray-400"},Jt={class:"px-4 py-2 whitespace-nowrap text-center"},Qt=["onClick"],Zt={class:"px-4 py-2 whitespace-nowrap text-center flex gap-2 justify-center"},te=["onClick"],ee=["onClick"],se=["onClick"],le={key:0},ae={class:"mt-4 flex justify-between items-center"},ne={class:"text-sm text-gray-600"},re={key:0,class:"inline-flex -space-x-px"},ie=["onClick","innerHTML"],oe=["innerHTML"],we={__name:"Index",props:{chartOfAccounts:Object,filters:Object,parents:Array,menus:Array,allMenus:Array,allCoAs:Array,statistics:{type:Object,default:()=>({total:0,active:0,inactive:0,by_type:{Asset:0,Liability:0,Equity:0,Revenue:0,Expense:0}})}},setup(r){var P,N,D,H;const c=r,b=x(((P=c.filters)==null?void 0:P.search)||""),p=x(((N=c.filters)==null?void 0:N.type)||""),u=x(((D=c.filters)==null?void 0:D.is_active)||"all"),f=x(((H=c.filters)==null?void 0:H.per_page)||15),m=x(!1),k=x("create"),A=x(null),q=rt.debounce(()=>{g.get("/chart-of-accounts",{search:b.value,type:p.value,is_active:u.value==="all"?null:u.value==="1"?"1":"0",per_page:f.value},{preserveState:!0,replace:!0})},400);tt([u,p,f],()=>{g.get("/chart-of-accounts",{search:b.value,type:p.value,is_active:u.value==="all"?null:u.value==="1"?"1":"0",per_page:f.value},{preserveState:!0,replace:!0})});function F(){q()}function V(l){if(l){const e=new URL(l,window.location.origin);e.searchParams.set("search",b.value),e.searchParams.set("type",p.value),e.searchParams.set("is_active",u.value==="all"?"":u.value),e.searchParams.set("per_page",f.value),g.visit(e.toString(),{preserveState:!0,replace:!0})}}function _(l){u.value=l}function K(l){p.value=l}function U(){k.value="create",A.value=null,m.value=!0}function G(l){k.value="create",A.value={parent_id:l.id},m.value=!0}function W(l){k.value="edit",A.value=l,m.value=!0}async function Y(l){(await w.fire({title:"Hapus Chart of Account?",text:`Yakin ingin menghapus "${l.name}"?`,icon:"warning",showCancelButton:!0,confirmColor:"#3085d6",cancelColor:"#d33",confirmText:"Ya, Hapus!",cancelText:"Batal"})).isConfirmed&&g.delete(`/chart-of-accounts/${l.id}`,{onSuccess:()=>w.fire("Berhasil","Chart of Account berhasil dihapus!","success")})}function B(){m.value=!1}function z(){B(),g.reload({preserveState:!0})}function L(l){if(!l.parent)return null;const e=[l.code];let s=l.parent;for(;s;)e.unshift(s.code),s=s.parent||null;return e.join(".")}function O(l){if(!l.parent)return 0;let e=1,s=l.parent;for(;s&&s.parent;)e++,s=s.parent;return e}function $(l){if(!l.parent)return"";const e=[l.parent.name];let s=l.parent.parent;for(;s;)e.unshift(s.name),s=s.parent||null;return e.join(" > ")}function I(l){return{pr_ops:"Purchase Requisition",purchase_payment:"Payment Application",travel_application:"Travel Application",kasbon:"Kasbon"}[l]||l}function j(l){return l?Array.isArray(l)?l:[l]:[]}function E(l){return l?Array.isArray(l)?l:[l]:[]}function X(l){if(!c.allMenus)return`Menu #${l}`;const e=c.allMenus.find(s=>s.id===l);return e?e.parent?`${e.parent.name} > ${e.name}`:e.name:`Menu #${l}`}function J(l){if(!c.allMenus)return"";const e=c.allMenus.find(s=>s.id===l);return e?e.code:""}function Q(l){return l?new Intl.NumberFormat("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2}).format(l):"0"}async function Z(l){var s,i,M;const e=l.is_active;l.is_active=l.is_active==1?0:1;try{(s=(await ut.patch(`/chart-of-accounts/${l.id}/toggle-status`,{},{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json"}})).data)!=null&&s.success?(g.reload({preserveState:!0,only:["chartOfAccounts","statistics"]}),w.fire({icon:"success",title:"Berhasil",text:"Status berhasil diubah",timer:1500,showConfirmButton:!1})):(l.is_active=e,w.fire({icon:"error",title:"Error",text:"Gagal mengubah status"}))}catch(S){l.is_active=e,console.error("Toggle status error:",S),w.fire({icon:"error",title:"Error",text:((M=(i=S.response)==null?void 0:i.data)==null?void 0:M.message)||"Gagal mengubah status"})}}return(l,e)=>(a(),et(ot,{title:"Chart of Account"},{default:st(()=>[t("div",dt,[t("div",{class:"flex justify-between items-center mb-6"},[e[8]||(e[8]=t("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[t("i",{class:"fa-solid fa-chart-line text-blue-500"}),R(" Chart of Account ")],-1)),t("button",{onClick:U,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"}," + Buat CoA Baru ")]),t("div",ct,[t("div",{class:d(["rounded-xl shadow-lg p-6 border-l-4 cursor-pointer transition-all relative",u.value==="all"?"bg-blue-50 border-blue-500 shadow-xl":"bg-white border-blue-500 hover:shadow-xl"]),onClick:e[0]||(e[0]=s=>_("all")),title:"Klik untuk melihat semua CoA"},[t("div",pt,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-gray-600"},"Total CoA",-1)),t("p",xt,o(r.statistics.total),1),e[10]||(e[10]=t("p",{class:"text-xs text-gray-500"},"100% dari total",-1))]),e[11]||(e[11]=t("div",{class:"bg-blue-100 p-3 rounded-full"},[t("i",{class:"fa-solid fa-chart-line text-blue-600 text-xl"})],-1))]),e[12]||(e[12]=t("div",{class:"absolute top-2 right-2 text-xs text-gray-400"},[t("i",{class:"fa-solid fa-mouse-pointer"})],-1))],2),t("div",{class:d(["rounded-xl shadow-lg p-6 border-l-4 cursor-pointer transition-all relative",u.value==="1"?"bg-green-50 border-green-500 shadow-xl":"bg-white border-green-500 hover:shadow-xl"]),onClick:e[1]||(e[1]=s=>_("1")),title:"Klik untuk melihat CoA aktif"},[t("div",ft,[t("div",null,[e[13]||(e[13]=t("p",{class:"text-sm font-medium text-gray-600"},"CoA Aktif",-1)),t("p",gt,o(r.statistics.active),1),t("p",yt,o(r.statistics.total>0?Math.round(r.statistics.active/r.statistics.total*100):0)+"% dari total",1)]),e[14]||(e[14]=t("div",{class:"bg-green-100 p-3 rounded-full"},[t("i",{class:"fa-solid fa-check-circle text-green-600 text-xl"})],-1))]),e[15]||(e[15]=t("div",{class:"absolute top-2 right-2 text-xs text-gray-400"},[t("i",{class:"fa-solid fa-mouse-pointer"})],-1))],2),t("div",{class:d(["rounded-xl shadow-lg p-6 border-l-4 cursor-pointer transition-all relative",u.value==="0"?"bg-red-50 border-red-500 shadow-xl":"bg-white border-red-500 hover:shadow-xl"]),onClick:e[2]||(e[2]=s=>_("0")),title:"Klik untuk melihat CoA non-aktif"},[t("div",bt,[t("div",null,[e[16]||(e[16]=t("p",{class:"text-sm font-medium text-gray-600"},"CoA Non-Aktif",-1)),t("p",mt,o(r.statistics.inactive),1),t("p",vt,o(r.statistics.total>0?Math.round(r.statistics.inactive/r.statistics.total*100):0)+"% dari total",1)]),e[17]||(e[17]=t("div",{class:"bg-red-100 p-3 rounded-full"},[t("i",{class:"fa-solid fa-times-circle text-red-600 text-xl"})],-1))]),e[18]||(e[18]=t("div",{class:"absolute top-2 right-2 text-xs text-gray-400"},[t("i",{class:"fa-solid fa-mouse-pointer"})],-1))],2),t("div",{class:d(["rounded-xl shadow-lg p-6 border-l-4 cursor-pointer transition-all relative",p.value==="Asset"?"bg-green-50 border-green-500 shadow-xl":"bg-white border-green-500 hover:shadow-xl"]),onClick:e[3]||(e[3]=s=>K("Asset")),title:"Klik untuk melihat CoA Asset"},[t("div",ht,[t("div",null,[e[19]||(e[19]=t("p",{class:"text-sm font-medium text-gray-600"},"Asset",-1)),t("p",wt,o(r.statistics.by_type.Asset),1),e[20]||(e[20]=t("p",{class:"text-xs text-gray-500"},"Tipe Asset",-1))]),e[21]||(e[21]=t("div",{class:"bg-green-100 p-3 rounded-full"},[t("i",{class:"fa-solid fa-wallet text-green-600 text-xl"})],-1))]),e[22]||(e[22]=t("div",{class:"absolute top-2 right-2 text-xs text-gray-400"},[t("i",{class:"fa-solid fa-mouse-pointer"})],-1))],2)]),t("div",kt,[C(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>u.value=s),class:"form-input rounded-xl"},e[23]||(e[23]=[t("option",{value:"all"},"Semua Status",-1),t("option",{value:"1"},"Aktif",-1),t("option",{value:"0"},"Non-Aktif",-1)]),512),[[T,u.value]]),C(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>p.value=s),class:"form-input rounded-xl"},e[24]||(e[24]=[t("option",{value:""},"Semua Tipe",-1),t("option",{value:"Asset"},"Asset",-1),t("option",{value:"Liability"},"Liability",-1),t("option",{value:"Equity"},"Equity",-1),t("option",{value:"Revenue"},"Revenue",-1),t("option",{value:"Expense"},"Expense",-1)]),512),[[T,p.value]]),C(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>f.value=s),class:"form-input rounded-xl"},e[25]||(e[25]=[t("option",{value:"10"},"10 per halaman",-1),t("option",{value:"15"},"15 per halaman",-1),t("option",{value:"25"},"25 per halaman",-1),t("option",{value:"50"},"50 per halaman",-1),t("option",{value:"100"},"100 per halaman",-1)]),512),[[T,f.value]]),C(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>b.value=s),onInput:F,type:"text",placeholder:"Cari berdasarkan code, name, atau description...",class:"flex-1 px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition min-w-64"},null,544),[[at,b.value]])]),t("div",At,[t("table",Ct,[e[32]||(e[32]=t("thead",{class:"bg-blue-600 text-white"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Code"),t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Name"),t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Parent"),t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Type"),t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Description"),t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Budget Limit"),t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Static/Dynamic"),t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Menu"),t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Payment"),t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Status"),t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Aksi")])],-1)),t("tbody",null,[(a(!0),n(y,null,h(r.chartOfAccounts.data,s=>(a(),n("tr",{key:s.id,class:d(["hover:bg-blue-50 transition",{"bg-blue-50":s.parent_id}])},[t("td",_t,[L(s)?(a(),n("span",Mt,o(L(s)),1)):(a(),n("span",St,o(s.code),1))]),t("td",Tt,[t("div",Bt,[s.parent_id?(a(),n("span",{key:0,style:nt({paddingLeft:O(s)*20+"px"}),class:"text-gray-600"},[(a(!0),n(y,null,h(O(s),i=>(a(),n("span",{key:i,class:"inline-block mr-1"},"│"))),128)),e[26]||(e[26]=R("└─ "))],4)):v("",!0),t("span",Lt,o(s.name),1),s.parent?(a(),n("span",Ot,"("+o($(s))+")",1)):v("",!0)])]),t("td",$t,[s.parent?(a(),n("span",jt,o($(s)),1)):(a(),n("span",Et,"-"))]),t("td",Pt,[t("span",{class:d(["px-2 py-1 text-xs font-semibold rounded-full",{"bg-green-100 text-green-800":s.type==="Asset","bg-red-100 text-red-800":s.type==="Liability","bg-blue-100 text-blue-800":s.type==="Equity","bg-yellow-100 text-yellow-800":s.type==="Revenue","bg-purple-100 text-purple-800":s.type==="Expense"}])},o(s.type),3)]),t("td",Nt,o(s.description||"-"),1),t("td",Dt,[s.budget_limit?(a(),n("span",Ht," Rp "+o(Q(s.budget_limit)),1)):(a(),n("span",Rt,"-"))]),t("td",qt,[s.static_or_dynamic?(a(),n("span",{key:0,class:d(["px-2 py-1 text-xs font-semibold rounded-full",{"bg-blue-100 text-blue-800":s.static_or_dynamic==="static","bg-purple-100 text-purple-800":s.static_or_dynamic==="dynamic"}])},o(s.static_or_dynamic==="static"?"Static":"Dynamic"),3)):(a(),n("span",Ft,"-"))]),t("td",Vt,[E(s.menu_id).length>0?(a(),n("div",Kt,[(a(!0),n(y,null,h(E(s.menu_id),i=>(a(),n("div",{key:i,class:"flex flex-col"},[t("span",Ut,o(X(i)),1),t("span",Gt,o(J(i)),1)]))),128))])):(a(),n("span",Wt,"-"))]),t("td",Yt,[s.show_in_menu_payment?(a(),n("div",zt,[e[27]||(e[27]=t("span",{class:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"}," Show in Payment ",-1)),j(s.mode_payment).length>0?(a(),n("div",It,[(a(!0),n(y,null,h(j(s.mode_payment),i=>(a(),n("span",{key:i,class:d(["px-2 py-1 text-xs font-semibold rounded-full",{"bg-blue-100 text-blue-800":i==="pr_ops","bg-green-100 text-green-800":i==="purchase_payment","bg-purple-100 text-purple-800":i==="travel_application","bg-orange-100 text-orange-800":i==="kasbon"}])},o(I(i)),3))),128))])):v("",!0)])):(a(),n("span",Xt,"-"))]),t("td",Jt,[t("button",{onClick:i=>Z(s),type:"button",class:d(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",s.is_active==1?"bg-blue-600":"bg-gray-200"])},[t("span",{class:d(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",s.is_active==1?"translate-x-6":"translate-x-1"])},null,2)],10,Qt)]),t("td",Zt,[t("button",{onClick:i=>G(s),class:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200 transition",title:"Tambah Child"},e[28]||(e[28]=[t("i",{class:"fa-solid fa-plus"},null,-1)]),8,te),t("button",{onClick:i=>W(s),class:"px-2 py-1 rounded bg-yellow-200 text-yellow-900 hover:bg-yellow-300 transition",title:"Edit"},e[29]||(e[29]=[t("i",{class:"fa-solid fa-pen-to-square"},null,-1)]),8,ee),t("button",{onClick:i=>Y(s),class:"px-2 py-1 rounded bg-red-500 text-white hover:bg-red-600 transition",title:"Hapus"},e[30]||(e[30]=[t("i",{class:"fa-solid fa-trash"},null,-1)]),8,se)])],2))),128)),r.chartOfAccounts.data.length===0?(a(),n("tr",le,e[31]||(e[31]=[t("td",{colspan:"11",class:"text-center py-8 text-gray-400"},"Tidak ada data",-1)]))):v("",!0)])])]),t("div",ae,[t("div",ne," Menampilkan "+o(r.chartOfAccounts.from||0)+" - "+o(r.chartOfAccounts.to||0)+" dari "+o(r.chartOfAccounts.total||0)+" data ",1),r.chartOfAccounts.links&&r.chartOfAccounts.links.length>3?(a(),n("nav",re,[(a(!0),n(y,null,h(r.chartOfAccounts.links,(s,i)=>(a(),n(y,{key:i},[s.url?(a(),n("button",{key:0,onClick:M=>V(s.url),class:d(["px-3 py-1 border border-gray-300",s.active?"bg-blue-600 text-white":"bg-white text-blue-700 hover:bg-blue-50"]),innerHTML:s.label},null,10,ie)):(a(),n("span",{key:1,class:"px-3 py-1 border border-gray-200 text-gray-400",innerHTML:s.label},null,8,oe))],64))),128))])):v("",!0)])]),lt(it,{show:m.value,mode:k.value,chartOfAccount:A.value,parents:r.parents,menus:r.menus,allCoAs:r.allCoAs,onClose:B,onSuccess:z},null,8,["show","mode","chartOfAccount","parents","menus","allCoAs"])]),_:1}))}};export{we as default};
