import{r as d,A as F,B as s,C as N,D as t,L as o,N as i,G as b,H as f,F as u,M as m,I as g,Q as V,E as O,W as B}from"./vendor-vue-g7iCcTkf.js";import{A as C}from"./AppLayout-BaHOzAR0.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./app-e_83ELsm.js";import"./vendor-charts-CuqD4wLC.js";import"./ProfileUpdateModal-DOFHeIjT.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const j={class:"max-w-5xl mx-auto px-2 md:px-0 py-8"},E={key:0,class:"text-sm text-gray-500 mb-6"},I={key:1,class:"text-sm text-gray-500 mb-6"},P={class:"flex flex-col md:flex-row md:items-end gap-4 mb-6"},U={class:"flex-1 min-w-[180px]"},$=["value"],J={class:"flex-1 min-w-[180px]"},H=["value"],W={class:"flex-1 min-w-[120px]"},Y=["value"],z={class:"flex-1 min-w-[100px]"},G=["value"],Q=["disabled"],R={key:0,class:"fa fa-spinner fa-spin"},q={key:1,class:"fa fa-search"},K={class:"bg-white rounded-2xl shadow overflow-hidden relative"},X={key:0,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10"},Z={class:"w-full"},tt={class:"px-4 py-2"},et={class:"px-4 py-2 text-right font-mono"},lt={class:"px-4 py-2 text-right font-mono"},st={class:"px-4 py-2 text-right font-mono"},ot={class:"px-4 py-2 text-right font-mono"},at={class:"px-4 py-2 text-center"},it=["onClick"],nt={key:0},rt={colspan:"6",class:"text-center py-8 text-gray-400"},dt={key:0,class:"text-lg"},ut={key:1},mt={class:"bg-blue-100 font-bold"},pt={class:"px-4 py-2 text-right font-mono"},xt={class:"px-4 py-2 text-right font-mono"},ct={class:"px-4 py-2 text-right font-mono"},bt={class:"px-4 py-2 text-right font-mono"},ft={__name:"OutletSummary",props:{rows:Array,outlets:Array,divisions:Array,filter:Object,period:Object},setup(a){var w,k,_,A;const p=a,y=d(((w=p.filter)==null?void 0:w.outlet_id)||""),v=d(((k=p.filter)==null?void 0:k.division_id)||""),x=d(((_=p.filter)==null?void 0:_.bulan)||new Date().getMonth()+1),c=d(((A=p.filter)==null?void 0:A.tahun)||new Date().getFullYear()),r=d(!1),S=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],T=Array.from({length:5},(h,l)=>new Date().getFullYear()-l);function D(){r.value=!0,B.get("/attendance-report/outlet-summary",{outlet_id:y.value||"",division_id:v.value||"",bulan:x.value,tahun:c.value},{preserveState:!0,replace:!0,onFinish:()=>{r.value=!1}})}function L(h,l){const e=`/attendance-report/employee-summary?outlet_id=${h}&bulan=${x.value}&tahun=${c.value}`;window.open(e,"_blank")}return(h,l)=>(s(),F(C,{title:"Attendance per Outlet"},{default:N(()=>[t("div",j,[l[16]||(l[16]=t("div",{class:"text-2xl font-bold text-gray-800 mb-2"},"Attendance Summary per Outlet",-1)),a.period?(s(),o("div",E,"Periode: "+i(a.period.start)+" s.d. "+i(a.period.end),1)):(s(),o("div",I,'Pilih filter dan klik "Tampilkan" untuk melihat data')),l[17]||(l[17]=t("div",{class:"flex gap-2 mb-4"},[t("a",{href:"/attendance-report",class:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-xl shadow flex items-center gap-2"},[t("i",{class:"fa fa-calendar"}),b(" Detail Report ")]),t("a",{href:"/attendance-report/employee-summary",class:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-xl shadow flex items-center gap-2"},[t("i",{class:"fa fa-users"}),b(" Employee Summary ")])],-1)),t("div",P,[t("div",U,[l[5]||(l[5]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Outlet",-1)),f(t("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>y.value=e),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[l[4]||(l[4]=t("option",{value:""},"Semua Outlet",-1)),(s(!0),o(u,null,m(a.outlets,e=>(s(),o("option",{key:e.id,value:e.id},i(e.name),9,$))),128))],512),[[g,y.value]])]),t("div",J,[l[7]||(l[7]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Divisi",-1)),f(t("select",{"onUpdate:modelValue":l[1]||(l[1]=e=>v.value=e),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[l[6]||(l[6]=t("option",{value:""},"Semua Divisi",-1)),(s(!0),o(u,null,m(a.divisions,e=>(s(),o("option",{key:e.id,value:e.id},i(e.name),9,H))),128))],512),[[g,v.value]])]),t("div",W,[l[8]||(l[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Bulan",-1)),f(t("select",{"onUpdate:modelValue":l[2]||(l[2]=e=>x.value=e),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(s(),o(u,null,m(S,(e,n)=>t("option",{key:n+1,value:n+1},i(e),9,Y)),64))],512),[[g,x.value]])]),t("div",z,[l[9]||(l[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tahun",-1)),f(t("select",{"onUpdate:modelValue":l[3]||(l[3]=e=>c.value=e),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(s(!0),o(u,null,m(V(T),e=>(s(),o("option",{key:e,value:e},i(e),9,G))),128))],512),[[g,c.value]])]),t("div",null,[t("button",{onClick:D,disabled:r.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white px-6 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2"},[r.value?(s(),o("i",R)):(s(),o("i",q)),b(" "+i(r.value?"Loading...":"Tampilkan"),1)],8,Q)])]),t("div",K,[r.value?(s(),o("div",X,l[10]||(l[10]=[t("div",{class:"text-center"},[t("i",{class:"fa fa-spinner fa-spin text-4xl text-blue-600 mb-2"}),t("div",{class:"text-gray-600 font-medium"},"Memuat data...")],-1)]))):O("",!0),t("table",Z,[l[15]||(l[15]=t("thead",{class:"bg-blue-600 text-white"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Outlet"),t("th",{class:"px-4 py-3 text-right text-xs font-bold uppercase tracking-wider"},"Total Telat (menit)"),t("th",{class:"px-4 py-3 text-right text-xs font-bold uppercase tracking-wider"},"Total Lembur (jam)"),t("th",{class:"px-4 py-3 text-right text-xs font-bold uppercase tracking-wider"},"Avg Lembur per Orang (jam)"),t("th",{class:"px-4 py-3 text-right text-xs font-bold uppercase tracking-wider"},"Total PH (hari)"),t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Aksi")])],-1)),t("tbody",null,[(s(!0),o(u,null,m(a.rows,e=>(s(),o("tr",{key:e.nama_outlet,class:"odd:bg-blue-50"},[t("td",tt,i(e.nama_outlet),1),t("td",et,i(e.total_telat),1),t("td",lt,i(e.total_lembur),1),t("td",st,i(e.average_lembur_per_person||0),1),t("td",ot,i(e.total_ph_days||0),1),t("td",at,[t("button",{onClick:n=>L(e.outlet_id,e.nama_outlet),class:"bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-1 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-1",title:"Lihat Employee Summary untuk {{ r.nama_outlet }}"},l[11]||(l[11]=[t("i",{class:"fa fa-users text-xs"},null,-1),b(" Detail ")]),8,it)])]))),128)),!a.rows||a.rows.length===0?(s(),o("tr",nt,[t("td",rt,[a.period?(s(),o("div",ut,"Tidak ada data untuk periode yang dipilih")):(s(),o("div",dt,l[12]||(l[12]=[t("i",{class:"fa fa-filter text-4xl mb-2 text-gray-300"},null,-1),t("div",null,'Pilih filter dan klik "Tampilkan" untuk melihat data',-1)])))])])):O("",!0)]),t("tfoot",null,[t("tr",mt,[l[13]||(l[13]=t("td",{class:"px-4 py-2 text-right"},"TOTAL",-1)),t("td",pt,i((a.rows||[]).reduce((e,n)=>e+(n.total_telat||0),0)),1),t("td",xt,i((a.rows||[]).reduce((e,n)=>e+(n.total_lembur||0),0)),1),t("td",ct,i((a.rows||[]).length>0?((a.rows||[]).reduce((e,n)=>e+(n.average_lembur_per_person||0),0)/(a.rows||[]).length).toFixed(2):0),1),t("td",bt,i((a.rows||[]).reduce((e,n)=>e+(n.total_ph_days||0),0)),1),l[14]||(l[14]=t("td",{class:"px-4 py-2"},null,-1))])])])])])]),_:1}))}},Tt=M(ft,[["__scopeId","data-v-5a3d03cb"]]);export{Tt as default};
