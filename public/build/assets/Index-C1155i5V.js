import{r as y,w as v,c as k,A as C,B as r,C as N,D as t,L as o,E as u,G as m,H as D,J as F,N as s,l as d,F as h,M as _,W as S}from"./vendor-vue-g7iCcTkf.js";import{A as R}from"./AppLayout-DuOTY_8o.js";import"./vendor-utils-CpgP2uT4.js";import"./app-BjOxw_aQ.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-B2Hc20Ep.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const O={class:"w-full py-8 px-2"},A={class:"bg-white rounded-xl shadow-xl p-6 mb-6"},T={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},G={class:"flex items-end gap-2"},B=["disabled"],L={key:0,class:"fa-solid fa-spinner fa-spin mr-1"},I={key:1,class:"fa-solid fa-search mr-1"},E=["href"],M={class:"border-b border-gray-200 mb-6"},P={class:"flex gap-1","aria-label":"Tabs"},V={key:0,class:"bg-white rounded-xl shadow-xl p-12 text-center"},W={key:1,class:"bg-white rounded-xl shadow-xl overflow-x-auto"},$={class:"min-w-full divide-y divide-gray-200"},U={class:"bg-white divide-y divide-gray-200"},j={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900"},z={class:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900"},H={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},J={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},q={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},K={class:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900 text-right"},Q={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},X={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},Y={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},Z={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},tt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},et={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},st={key:0},at={key:2,class:"bg-white rounded-xl shadow-xl overflow-x-auto"},it={class:"min-w-full divide-y divide-gray-200"},rt={class:"bg-white divide-y divide-gray-200"},ot={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900"},xt={class:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900"},pt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},nt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},ct={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},dt={class:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900 text-right"},lt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},gt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},ut={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},yt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},mt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},ht={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},_t={key:0},ft={key:3,class:"bg-white rounded-xl shadow-xl overflow-x-auto"},bt={class:"min-w-full divide-y divide-gray-200"},wt={class:"bg-white divide-y divide-gray-200"},vt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900"},kt={class:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900"},Ct={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},Nt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},Dt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},Ft={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},St={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},Rt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},Ot={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},At={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},Tt={class:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900 text-right"},Gt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right"},Bt={key:0},zt={__name:"Index",props:{outlets:{type:Array,default:()=>[]},reportRows:{type:Array,default:()=>[]},cogsRows:{type:Array,default:()=>[]},categoryCostRows:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({bulan:""})}},setup(x){const f=x,c=y(!1),l=y({...f.filters}),p=y("cost_inventory");v(()=>f.filters,n=>{l.value={...n}},{immediate:!0});const w=k(()=>{const n=l.value.bulan||"";return`/cost-report/export?bulan=${encodeURIComponent(n)}`});function i(n){if(n==null||n==="")return"0";const a=Number(n);return isNaN(a)?"0":new Intl.NumberFormat("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a)}function b(){c.value=!0,S.get("/cost-report",{bulan:l.value.bulan,load:1},{preserveState:!1,preserveScroll:!0,onFinish:()=>{c.value=!1}})}return(n,a)=>(r(),C(R,null,{default:N(()=>[t("div",O,[a[13]||(a[13]=t("div",{class:"flex items-center justify-between mb-6"},[t("h1",{class:"text-2xl font-bold flex items-center gap-2"},[t("i",{class:"fa-solid fa-coins text-amber-500"}),m(" Cost Report ")])],-1)),t("div",A,[t("div",T,[t("div",null,[a[4]||(a[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bulan",-1)),D(t("input",{type:"month","onUpdate:modelValue":a[0]||(a[0]=e=>l.value.bulan=e),onChange:b,class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[F,l.value.bulan]])]),t("div",G,[t("button",{onClick:b,disabled:c.value,class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed"},[c.value?(r(),o("i",L)):(r(),o("i",I)),m(" "+s(c.value?"Loading...":"Load Data"),1)],8,B),t("a",{href:w.value,target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center px-4 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700 transition"},a[5]||(a[5]=[t("i",{class:"fa-solid fa-file-excel mr-1"},null,-1),m(" Export to Excel ")]),8,E)])])]),t("div",M,[t("nav",P,[t("button",{type:"button",onClick:a[1]||(a[1]=e=>p.value="cost_inventory"),class:d([p.value==="cost_inventory"?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","px-4 py-3 border-b-2 font-medium text-sm transition"])}," Cost Inventory ",2),t("button",{type:"button",onClick:a[2]||(a[2]=e=>p.value="cogs"),class:d([p.value==="cogs"?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","px-4 py-3 border-b-2 font-medium text-sm transition"])}," COGS ",2),t("button",{type:"button",onClick:a[3]||(a[3]=e=>p.value="category_cost"),class:d([p.value==="category_cost"?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","px-4 py-3 border-b-2 font-medium text-sm transition"])}," Category Cost ",2)])]),c.value?(r(),o("div",V,a[6]||(a[6]=[t("div",{class:"text-blue-500"},[t("i",{class:"fa-solid fa-spinner fa-spin text-4xl mb-4"}),t("p",{class:"text-lg font-medium"},"Memuat data...")],-1)]))):p.value==="cost_inventory"?(r(),o("div",W,[t("table",$,[a[8]||(a[8]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Outlet"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Begin Inventory (Total MAC)"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Official Cost"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Cost RND"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Outlet Transfer"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Barang Tersedia"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ending Inventory"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"COGS Aktual"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Sales Before Discount"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Discount"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Sales After Discount"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"% Discount vs Sales")])],-1)),t("tbody",U,[(r(!0),o(h,null,_(x.reportRows||[],(e,g)=>(r(),o("tr",{key:e.outlet_id},[t("td",j,s(g+1),1),t("td",z,s(e.outlet_name),1),t("td",H,s(i(e.total_begin_mac)),1),t("td",J,s(i(e.official_cost)),1),t("td",q,s(i(e.cost_rnd)),1),t("td",{class:d(["px-4 py-3 whitespace-nowrap text-sm text-right",(e.outlet_transfer||0)<0?"text-red-600":"text-gray-900"])},s(i(e.outlet_transfer)),3),t("td",K,s(i(e.total_barang_tersedia)),1),t("td",Q,s(i(e.ending_inventory)),1),t("td",X,s(i(e.cogs_aktual)),1),t("td",Y,s(i(e.sales_before_discount)),1),t("td",Z,s(i(e.discount)),1),t("td",tt,s(i(e.sales_after_discount)),1),t("td",et,s(e.pct_discount!=null?Number(e.pct_discount).toFixed(2)+"%":"-"),1)]))),128)),!x.reportRows||x.reportRows.length===0?(r(),o("tr",st,a[7]||(a[7]=[t("td",{colspan:"13",class:"px-4 py-8 text-center text-gray-500"},"Tidak ada data. Pilih bulan lalu klik Load Data.",-1)]))):u("",!0)])])])):p.value==="cogs"?(r(),o("div",at,[t("table",it,[a[10]||(a[10]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Outlet"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"COGS"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Category Cost"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Meal Employees"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"COGS Pembanding"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Deviasi"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Toleransi 2%"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"% COGS Pembanding"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"% COGS Actual Before Disc"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"% COGS Actual After Disc"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"% COGS Foods"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"% Deviasi"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"% Category Cost")])],-1)),t("tbody",rt,[(r(!0),o(h,null,_(x.cogsRows||[],(e,g)=>(r(),o("tr",{key:e.outlet_id},[t("td",ot,s(g+1),1),t("td",xt,s(e.outlet_name),1),t("td",pt,s(i(e.cogs)),1),t("td",nt,s(i(e.category_cost)),1),t("td",ct,s(i(e.meal_employees)),1),t("td",dt,s(i(e.cogs_pembanding)),1),t("td",{class:d(["px-4 py-3 whitespace-nowrap text-sm text-right",(e.deviasi||0)<0?"text-red-600":(e.deviasi||0)>0?"text-green-600":"text-gray-900"])},s(i(e.deviasi)),3),t("td",lt,s(i(e.toleransi_2_pct)),1),t("td",gt,s(e.pct_cogs_pembanding!=null?Number(e.pct_cogs_pembanding).toFixed(2)+"%":"-"),1),t("td",ut,s(e.pct_cogs_actual_before_disc!=null?Number(e.pct_cogs_actual_before_disc).toFixed(2)+"%":"-"),1),t("td",yt,s(e.pct_cogs_actual_after_disc!=null?Number(e.pct_cogs_actual_after_disc).toFixed(2)+"%":"-"),1),t("td",mt,s(e.pct_cogs_foods!=null?Number(e.pct_cogs_foods).toFixed(2)+"%":"-"),1),t("td",{class:d(["px-4 py-3 whitespace-nowrap text-sm text-right",(e.pct_deviasi||0)<0?"text-red-600":(e.pct_deviasi||0)>0?"text-green-600":"text-gray-900"])},s(e.pct_deviasi!=null?Number(e.pct_deviasi).toFixed(2)+"%":"-"),3),t("td",ht,s(e.pct_category_cost!=null?Number(e.pct_category_cost).toFixed(2)+"%":"-"),1)]))),128)),!x.cogsRows||x.cogsRows.length===0?(r(),o("tr",_t,a[9]||(a[9]=[t("td",{colspan:"14",class:"px-4 py-8 text-center text-gray-500"},"Tidak ada data. Pilih bulan lalu klik Load Data.",-1)]))):u("",!0)])])])):p.value==="category_cost"?(r(),o("div",ft,[t("table",bt,[a[12]||(a[12]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Outlet"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Guest Supplies"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"% Guest Supplies"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Spoilage"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"% Spoilage"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Waste"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"% Waste"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Non Commodity"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"% Non Commodity"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Category Cost"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"% Category Cost")])],-1)),t("tbody",wt,[(r(!0),o(h,null,_(x.categoryCostRows||[],(e,g)=>(r(),o("tr",{key:e.outlet_id},[t("td",vt,s(g+1),1),t("td",kt,s(e.outlet_name),1),t("td",Ct,s(i(e.guest_supplies)),1),t("td",Nt,s(e.pct_guest_supplies!=null?Number(e.pct_guest_supplies).toFixed(2)+"%":"-"),1),t("td",Dt,s(i(e.spoilage)),1),t("td",Ft,s(e.pct_spoilage!=null?Number(e.pct_spoilage).toFixed(2)+"%":"-"),1),t("td",St,s(i(e.waste)),1),t("td",Rt,s(e.pct_waste!=null?Number(e.pct_waste).toFixed(2)+"%":"-"),1),t("td",Ot,s(i(e.non_commodity)),1),t("td",At,s(e.pct_non_commodity!=null?Number(e.pct_non_commodity).toFixed(2)+"%":"-"),1),t("td",Tt,s(i(e.category_cost)),1),t("td",Gt,s(e.pct_category_cost!=null?Number(e.pct_category_cost).toFixed(2)+"%":"-"),1)]))),128)),!x.categoryCostRows||x.categoryCostRows.length===0?(r(),o("tr",Bt,a[11]||(a[11]=[t("td",{colspan:"12",class:"px-4 py-8 text-center text-gray-500"},"Tidak ada data. Pilih bulan lalu klik Load Data.",-1)]))):u("",!0)])])])):u("",!0)])]),_:1}))}};export{zt as default};
