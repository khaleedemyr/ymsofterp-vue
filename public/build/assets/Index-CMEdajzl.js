import{r as n,a as B,A as T,B as o,C as E,D as e,L as c,E as y,G as x,N as b,O as V,x as S,Q as M,H as N,J as j,F as A,M as D}from"./vendor-vue-g7iCcTkf.js";import{a as u}from"./vendor-utils-CpgP2uT4.js";import{S as r}from"./app-DGqVli5-.js";import{A as F}from"./AppLayout-BDukGJW2.js";import{s as U}from"./vue-multiselect.esm-V-bx43V9.js";/* empty css                            */import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-charts-CuqD4wLC.js";import"./ProfileUpdateModal-CnwZ944E.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const H={class:"max-w-5xl w-full mx-auto py-8 px-2"},I={key:0,class:"fixed inset-0 z-40 flex items-center justify-center bg-black bg-opacity-40 transition-all"},$={class:"max-w-lg mx-auto py-8 px-2 bg-white rounded-2xl shadow-2xl"},z={class:"text-2xl font-bold text-blue-700 mb-6"},L={class:"flex justify-end gap-2 mt-8"},q=["disabled"],Y={key:0},J={key:1},P={class:"bg-white rounded-xl shadow-lg overflow-hidden mt-8"},Q={class:"min-w-full divide-y divide-gray-200"},K={class:"bg-white divide-y divide-gray-200"},R={key:0},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"px-6 py-4 whitespace-nowrap"},Z={class:"px-6 py-4 whitespace-nowrap text-center"},ee=["onClick"],te=["onClick"],ae={__name:"Index",setup(se){const p=n([]),m=n([]),d=n(!1),l=n(!1),f=n(!1),s=n({id:null,user_id:null,nilai:""});B(async()=>{await g(),await h()});async function g(){try{const a=await u.get("/api/officer-check/users");a.data&&(m.value=a.data)}catch(a){console.error("Error fetching users:",a),r.fire("Error","Gagal mengambil data users","error")}}async function h(){try{const a=await u.get("/api/officer-check");a.data&&(p.value=a.data)}catch(a){console.error("Error fetching OCs:",a),r.fire("Error","Gagal mengambil data Officer Check","error")}}function v(){s.value={id:null,user_id:null,nilai:""},l.value=!1,d.value=!0}function w(a){s.value={id:a.id,user_id:m.value.find(t=>t.id===a.user_id),nilai:a.nilai},l.value=!0,d.value=!0}function k(){d.value=!1}async function _(){const a={user_id:typeof s.value.user_id=="object"?s.value.user_id.id:s.value.user_id,nilai:s.value.nilai};if((await r.fire({title:l.value?"Simpan perubahan OC?":"Tambah Officer Check?",text:l.value?"Data OC akan diperbarui.":"Data OC akan ditambahkan.",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Simpan",cancelButtonText:"Batal"})).isConfirmed){f.value=!0;try{l.value?await u.put(`/api/officer-check/${s.value.id}`,a):await u.post("/api/officer-check",a),d.value=!1,await h(),r.fire("Berhasil",l.value?"Officer Check berhasil diupdate!":"Officer Check berhasil ditambahkan!","success")}catch{r.fire("Gagal","Terjadi kesalahan saat menyimpan data.","error")}finally{f.value=!1}}}async function C(a){if((await r.fire({title:"Hapus Officer Check?",text:"Data OC akan dihapus permanen!",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal"})).isConfirmed)try{await u.delete(`/api/officer-check/${a}`),await h(),r.fire("Berhasil","Officer Check berhasil dihapus!","success")}catch{r.fire("Gagal","Terjadi kesalahan saat menghapus data.","error")}}return(a,t)=>(o(),T(F,null,{default:E(()=>[e("div",H,[e("div",{class:"flex justify-between items-center mb-6"},[t[3]||(t[3]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-user-check text-blue-500"}),x(" Officer Check ")],-1)),e("button",{onClick:v,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2"},t[2]||(t[2]=[e("i",{class:"fa-solid fa-plus"},null,-1),x(" Tambah OC ")]))]),d.value?(o(),c("div",I,[e("div",$,[e("h2",z,b(l.value?"Edit Officer Check":"Tambah Officer Check"),1),e("form",{onSubmit:V(_,["prevent"]),class:"space-y-5 bg-white rounded-2xl shadow-xl p-8"},[e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"User",-1)),S(M(U),{modelValue:s.value.user_id,"onUpdate:modelValue":t[0]||(t[0]=i=>s.value.user_id=i),options:m.value,searchable:!0,label:"name","track-by":"id",placeholder:"Pilih User",class:"mt-1"},null,8,["modelValue","options"])]),e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nilai OC",-1)),N(e("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>s.value.nilai=i),type:"number",class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[j,s.value.nilai]])]),e("div",L,[e("button",{type:"button",onClick:k,class:"px-4 py-2 rounded bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200"},"Batal"),e("button",{type:"submit",disabled:f.value,class:"px-6 py-2 rounded bg-blue-600 text-white font-bold hover:bg-blue-700"},[f.value?(o(),c("span",Y,t[6]||(t[6]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x(" Menyimpan... ")]))):(o(),c("span",J," Simpan "))],8,q)])],32)])])):y("",!0),e("div",P,[e("table",Q,[t[8]||(t[8]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"User"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nilai OC"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",K,[p.value.length===0?(o(),c("tr",R,t[7]||(t[7]=[e("td",{colspan:"3",class:"text-center py-10 text-gray-400"},"Tidak ada data Officer Check.",-1)]))):y("",!0),(o(!0),c(A,null,D(p.value,i=>(o(),c("tr",{key:i.id,class:"hover:bg-gray-50"},[e("td",W,b(i.user_name),1),e("td",X,b(i.nilai),1),e("td",Z,[e("button",{class:"px-2 py-1 bg-yellow-400 rounded mr-2",onClick:O=>w(i)},"Edit",8,ee),e("button",{class:"px-2 py-1 bg-red-500 text-white rounded",onClick:O=>C(i.id)},"Hapus",8,te)])]))),128))])])])])]),_:1}))}},xe=G(ae,[["__scopeId","data-v-21d0d26c"]]);export{xe as default};
