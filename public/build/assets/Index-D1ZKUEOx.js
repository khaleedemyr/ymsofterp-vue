import{r as k,c as P,A as oe,B as l,C as ae,D as e,L as r,E as w,G as p,H as x,O as C,J as B,l as _,F as D,M as T,N as s,I as G,W as f}from"./vendor-vue-g7iCcTkf.js";import{A as ne}from"./AppLayout-BqYoiRQJ.js";import{S as $}from"./app-D7xoXxxM.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-Sbw2UVT4.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const se={class:"w-full py-8 px-0"},le={class:"flex flex-wrap gap-3 mb-4 items-center"},re={class:"relative"},ie=["placeholder"],ue={class:"p-2 border-b border-gray-200 sticky top-0 bg-white"},de={class:"py-1"},ce=["onClick"],pe={key:0,class:"px-4 py-2 text-gray-500 text-sm"},be={class:"bg-white rounded-2xl shadow-2xl overflow-x-auto transition-all"},xe={class:"w-full min-w-full divide-y divide-gray-200"},fe={class:"bg-white divide-y divide-gray-200"},ge={key:0},me={class:"px-6 py-3"},ve={class:"text-sm font-medium text-gray-900"},ke={class:"text-xs text-gray-500"},_e={class:"px-6 py-3"},ye={class:"text-sm text-gray-900"},he={class:"text-xs text-gray-500"},we={class:"text-xs text-gray-400"},Ce={class:"px-6 py-3 whitespace-nowrap"},Be={class:"px-6 py-3"},Se={class:"text-sm text-gray-900"},De={class:"px-6 py-3 text-right whitespace-nowrap"},Te={class:"px-6 py-3 text-right whitespace-nowrap"},$e={class:"text-sm font-bold text-blue-600"},Le={class:"px-6 py-3"},Ae={key:0,class:"text-xs"},Ee={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},Ie={key:1,class:"text-gray-400"},Me={class:"px-6 py-3"},Ne={key:0,class:"text-sm text-gray-900"},Ve={key:1,class:"text-sm text-gray-900"},Ue={key:2,class:"text-gray-400 text-sm"},Fe={class:"px-6 py-3 whitespace-nowrap"},He={class:"flex gap-2"},Oe=["onClick"],Re=["onClick"],je=["onClick"],Pe={key:0,class:"mt-4 flex justify-center"},Ge={class:"flex gap-1"},ze=["onClick","disabled","innerHTML"],ot={__name:"Index",props:{bankBooks:Object,bankAccounts:Array,filters:Object},setup(d){var I,M,N,V,U;const u=d,n=k({bank_account_id:((I=u.filters)==null?void 0:I.bank_account_id)||"",date_from:((M=u.filters)==null?void 0:M.date_from)||"",date_to:((N=u.filters)==null?void 0:N.date_to)||"",transaction_type:((V=u.filters)==null?void 0:V.transaction_type)||"",per_page:((U=u.filters)==null?void 0:U.per_page)||20}),c=k(""),g=k(""),b=k(!1),y=k(!1),S=P(()=>{if(!n.value.bank_account_id)return"";const a=u.bankAccounts.find(t=>t.id==n.value.bank_account_id);return a?`${a.bank_name} - ${a.account_number} (${a.outlet_name})`:""}),L=P(()=>{if(!c.value)return u.bankAccounts;const a=c.value.toLowerCase();return u.bankAccounts.filter(t=>{const o=(t.bank_name||"").toLowerCase(),i=(t.account_number||"").toLowerCase(),v=(t.account_name||"").toLowerCase(),h=(t.outlet_name||"").toLowerCase();return o.includes(a)||i.includes(a)||v.includes(a)||h.includes(a)})}),A=a=>{n.value.bank_account_id=a,g.value=a?S.value:"",c.value="",b.value=!1,y.value=!1,m()},z=()=>{setTimeout(()=>{y.value||(b.value=!1,g.value=S.value,c.value="")},200)},J=()=>{b.value=!0,c.value=g.value},K=()=>{b.value=!0};function m(){f.get("/bank-books",n.value,{preserveState:!0,replace:!0})}function W(a){if(!a)return;const t={...n.value},i=new URL(a).searchParams.get("page");i&&(t.page=i),f.get("/bank-books",t,{preserveState:!1,preserveScroll:!1,replace:!0})}function Y(){f.visit("/bank-books/create")}function q(a){f.visit(`/bank-books/${a.id}`)}function Q(a){f.visit(`/bank-books/${a.id}/edit`)}async function X(a){(await $.fire({title:"Hapus Entri?",text:"Yakin ingin menghapus entri ini?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal"})).isConfirmed&&f.delete(`/bank-books/${a.id}`,{onSuccess:()=>{$.fire({icon:"success",title:"Berhasil",text:"Entri berhasil dihapus",timer:1500,showConfirmButton:!1})},onError:()=>{$.fire({icon:"error",title:"Gagal",text:"Gagal menghapus entri"})}})}function Z(a){return a?new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}function ee(a){return a?new Date(a).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"}function E(a){return a?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a):"Rp 0"}function te(){const a=new URLSearchParams;n.value.bank_account_id&&a.append("bank_account_id",n.value.bank_account_id),n.value.date_from&&a.append("date_from",n.value.date_from),n.value.date_to&&a.append("date_to",n.value.date_to),n.value.transaction_type&&a.append("transaction_type",n.value.transaction_type);const t=`/bank-books/export${a.toString()?"?"+a.toString():""}`;window.open(t,"_blank")}return(a,t)=>(l(),oe(ne,null,{default:ae(()=>[e("div",se,[e("div",{class:"flex justify-between items-center mb-6"},[t[15]||(t[15]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-book"}),p(" Buku Bank ")],-1)),e("div",{class:"flex gap-3"},[e("button",{onClick:te,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"},t[14]||(t[14]=[e("i",{class:"fa fa-file-excel mr-2"},null,-1),p(" Export Report ")])),e("button",{onClick:Y,class:"bg-gradient-to-r from-green-500 to-green-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"}," + Tambah Entri ")])]),e("div",le,[e("div",{class:"relative",onClick:t[9]||(t[9]=C(()=>{},["stop"]))},[e("div",re,[x(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>g.value=o),onFocus:t[1]||(t[1]=o=>b.value=!0),onBlur:z,onInput:J,placeholder:S.value||"Cari atau pilih bank...",class:"w-80 px-4 py-2 pr-10 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},null,40,ie),[[B,g.value]]),t[16]||(t[16]=e("i",{class:"fa-solid fa-chevron-down absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"},null,-1))]),b.value?(l(),r("div",{key:0,class:"absolute z-50 mt-1 w-80 bg-white border border-gray-300 rounded-xl shadow-lg max-h-60 overflow-y-auto",onMousedown:t[8]||(t[8]=C(()=>{},["prevent"]))},[e("div",ue,[x(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=o=>c.value=o),onInput:K,onFocus:t[3]||(t[3]=o=>y.value=!0),onBlur:t[4]||(t[4]=o=>y.value=!1),placeholder:"Cari bank...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400"},null,544),[[B,c.value]])]),e("div",de,[e("div",{onMousedown:t[5]||(t[5]=C(()=>{},["prevent"])),onClick:t[6]||(t[6]=o=>A("")),class:_(["px-4 py-2 cursor-pointer hover:bg-blue-50",n.value.bank_account_id===""?"bg-blue-100 font-semibold":""])}," Semua Bank ",34),(l(!0),r(D,null,T(L.value,o=>(l(),r("div",{key:o.id,onMousedown:t[7]||(t[7]=C(()=>{},["prevent"])),onClick:i=>A(o.id),class:_(["px-4 py-2 cursor-pointer hover:bg-blue-50",n.value.bank_account_id==o.id?"bg-blue-100 font-semibold":""])},s(o.bank_name)+" - "+s(o.account_number)+" ("+s(o.outlet_name)+") ",43,ce))),128)),L.value.length===0?(l(),r("div",pe," Bank tidak ditemukan ")):w("",!0)])],32)):w("",!0)]),x(e("input",{type:"date","onUpdate:modelValue":t[10]||(t[10]=o=>n.value.date_from=o),onChange:m,class:"px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",placeholder:"Dari Tanggal"},null,544),[[B,n.value.date_from]]),x(e("input",{type:"date","onUpdate:modelValue":t[11]||(t[11]=o=>n.value.date_to=o),onChange:m,class:"px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",placeholder:"Sampai Tanggal"},null,544),[[B,n.value.date_to]]),x(e("select",{"onUpdate:modelValue":t[12]||(t[12]=o=>n.value.transaction_type=o),onChange:m,class:"px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},t[17]||(t[17]=[e("option",{value:""},"Semua Tipe",-1),e("option",{value:"credit"},"Credit (Masuk)",-1),e("option",{value:"debit"},"Debit (Keluar)",-1)]),544),[[G,n.value.transaction_type]]),x(e("select",{"onUpdate:modelValue":t[13]||(t[13]=o=>n.value.per_page=o),onChange:m,class:"px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},t[18]||(t[18]=[e("option",{value:"20"},"20 per halaman",-1),e("option",{value:"50"},"50 per halaman",-1),e("option",{value:"100"},"100 per halaman",-1)]),544),[[G,n.value.per_page]])]),e("div",be,[e("table",xe,[t[25]||(t[25]=e("thead",{class:"bg-gradient-to-r from-blue-100 to-blue-200"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider rounded-tl-2xl"},"Tanggal"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Bank"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Tipe"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Keterangan"),e("th",{class:"px-6 py-3 text-right text-xs font-bold text-blue-700 uppercase tracking-wider"},"Jumlah"),e("th",{class:"px-6 py-3 text-right text-xs font-bold text-blue-700 uppercase tracking-wider"},"Saldo"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Referensi"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Created By"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider rounded-tr-2xl"},"Aksi")])],-1)),e("tbody",fe,[!d.bankBooks.data||!d.bankBooks.data.length?(l(),r("tr",ge,t[19]||(t[19]=[e("td",{colspan:"9",class:"text-center py-10 text-gray-400"},"Belum ada data buku bank.",-1)]))):w("",!0),(l(!0),r(D,null,T(d.bankBooks.data,o=>{var i,v,h,F,H,O,R;return l(),r("tr",{key:o.id,class:"hover:bg-blue-50 transition"},[e("td",me,[e("div",ve,s(Z(o.transaction_date)),1),e("div",ke,s(ee(o.created_at||o.updated_at)),1)]),e("td",_e,[e("div",ye,s((i=o.bank_account)==null?void 0:i.bank_name),1),e("div",he,s((v=o.bank_account)==null?void 0:v.account_number),1),e("div",we,s(((F=(h=o.bank_account)==null?void 0:h.outlet)==null?void 0:F.nama_outlet)||"Head Office"),1)]),e("td",Ce,[e("span",{class:_([o.transaction_type==="credit"?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 py-1 rounded-full text-xs font-semibold"])},s(o.transaction_type==="credit"?"Credit":"Debit"),3)]),e("td",Be,[e("div",Se,s(o.description||"-"),1)]),e("td",De,[e("span",{class:_([o.transaction_type==="credit"?"text-green-600":"text-red-600","text-sm font-semibold"])},s(o.transaction_type==="credit"?"+":"-")+s(E(o.amount)),3)]),e("td",Te,[e("span",$e,s(E(o.balance)),1)]),e("td",Le,[o.reference_type?(l(),r("div",Ae,[e("span",Ee,s(o.reference_type)+" #"+s(o.reference_id),1)])):(l(),r("span",Ie,"-"))]),e("td",Me,[o.kasir_name?(l(),r("div",Ne,[t[20]||(t[20]=e("i",{class:"fa-solid fa-user mr-1 text-blue-500"},null,-1)),p(" "+s(o.kasir_name),1)])):o.creator?(l(),r("div",Ve,[t[21]||(t[21]=e("i",{class:"fa-solid fa-user mr-1 text-blue-500"},null,-1)),p(" "+s(((H=o.creator)==null?void 0:H.nama_lengkap)||((O=o.creator)==null?void 0:O.nama_panggilan)||((R=o.creator)==null?void 0:R.email)||"-"),1)])):(l(),r("span",Ue,"-"))]),e("td",Fe,[e("div",He,[e("button",{onClick:j=>q(o),class:"inline-flex items-center btn btn-xs bg-blue-100 text-blue-800 hover:bg-blue-200 rounded px-2 py-1 font-semibold transition"},t[22]||(t[22]=[e("i",{class:"fa fa-eye mr-1"},null,-1),p(" Detail ")]),8,Oe),e("button",{onClick:j=>Q(o),class:"inline-flex items-center btn btn-xs bg-yellow-100 text-yellow-800 hover:bg-yellow-200 rounded px-2 py-1 font-semibold transition"},t[23]||(t[23]=[e("i",{class:"fa fa-pencil-alt mr-1"},null,-1),p(" Edit ")]),8,Re),e("button",{onClick:j=>X(o),class:"inline-flex items-center btn btn-xs bg-red-100 text-red-700 hover:bg-red-200 rounded px-2 py-1 font-semibold transition"},t[24]||(t[24]=[e("i",{class:"fa fa-trash mr-1"},null,-1),p(" Hapus ")]),8,je)])])])}),128))])])]),d.bankBooks.links&&d.bankBooks.links.length>3?(l(),r("div",Pe,[e("div",Ge,[(l(!0),r(D,null,T(d.bankBooks.links,(o,i)=>(l(),r("button",{key:i,onClick:v=>W(o.url),disabled:!o.url,class:_(["px-3 py-2 rounded-lg text-sm font-medium transition",o.active?"bg-blue-600 text-white":o.url?"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300":"bg-gray-100 text-gray-400 cursor-not-allowed"]),innerHTML:o.label},null,10,ze))),128))])])):w("",!0)])]),_:1}))}};export{ot as default};
