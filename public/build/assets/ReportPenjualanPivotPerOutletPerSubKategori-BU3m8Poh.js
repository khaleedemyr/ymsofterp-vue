import{r as v,c as m,w as V,A as j,B as l,C as A,D as e,L as r,E as C,H as k,J as P,F as x,M as y,N as o,I as B,G as F,l as D,W as T}from"./vendor-vue-g7iCcTkf.js";import{A as U}from"./AppLayout-Dr73aeKz.js";import"./vendor-utils-CpgP2uT4.js";import"./app-CZyV0iGJ.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DbuU0LgT.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const O={class:"w-full py-8 px-2"},E={class:"flex flex-col md:flex-row md:items-center gap-4 mb-4"},H={class:"flex items-center gap-2"},K=["value"],R={key:0,class:"bg-white rounded-xl shadow-lg p-8 text-center text-gray-500 font-bold"},W={key:1,class:"bg-white rounded-xl shadow-lg overflow-x-auto w-full"},z={class:"w-full min-w-full border border-gray-300"},G={class:"bg-yellow-300 text-gray-900"},J={key:0},Q=["colspan"],q={class:"px-4 py-2 border border-gray-200"},X={class:"px-4 py-2 border border-gray-200"},Y={key:2,class:"flex justify-between items-center mt-4"},Z={class:"text-sm text-gray-600"},$={class:"flex gap-1"},ee=["disabled"],te={class:"px-2"},ae=["disabled"],ce={__name:"ReportPenjualanPivotPerOutletPerSubKategori",props:{outlets:Array,items:Array,filters:Object},setup(c){var w;const f=c,i=v(((w=f.filters)==null?void 0:w.tanggal)||""),d=v(""),n=v(25),s=v(1),p=m(()=>{if(!d.value)return f.items;const u=d.value.toLowerCase();return f.items.filter(t=>t.item_name&&t.item_name.toLowerCase().includes(u)||t.unit_name&&t.unit_name.toLowerCase().includes(u))}),g=m(()=>Math.ceil(p.value.length/n.value)||1),b=m(()=>(s.value-1)*n.value),L=m(()=>Math.min(b.value+h.value.length,p.value.length)),h=m(()=>p.value.slice(b.value,b.value+n.value));function S(){s.value>1&&s.value--}function I(){s.value<g.value&&s.value++}V([n,d],()=>{s.value=1});function M(){T.get("/report-penjualan-pivot-per-outlet-per-sub-kategori",{tanggal:i.value},{preserveState:!0,preserveScroll:!0})}function N(u){return u==null?"":Number(u).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2})}return(u,t)=>(l(),j(U,null,{default:A(()=>[e("div",O,[t[8]||(t[8]=e("h1",{class:"text-2xl font-bold mb-6"},"Report Penjualan Pivot per Outlet per Sub Kategori",-1)),e("div",E,[k(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>i.value=a),type:"date",class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[P,i.value]]),k(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>d.value=a),type:"text",placeholder:"Cari item/unit...",class:"px-4 py-2 border border-gray-300 rounded-lg w-full md:w-64 focus:ring-blue-500 focus:border-blue-500"},null,512),[[P,d.value]]),e("div",H,[t[3]||(t[3]=e("label",{class:"text-sm"},"Tampilkan",-1)),k(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>n.value=a),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[(l(),r(x,null,y([10,25,50,100],a=>e("option",{key:a,value:a},o(a),9,K)),64))],512),[[B,n.value]]),t[4]||(t[4]=e("span",{class:"text-sm"},"data",-1))]),e("button",{onClick:M,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-700"},t[5]||(t[5]=[e("span",{class:"mr-2"},[e("i",{class:"fas fa-sync-alt"})],-1),F(" Load Data ")]))]),i.value?(l(),r("div",W,[e("table",z,[e("thead",null,[e("tr",G,[t[6]||(t[6]=e("th",{class:"px-4 py-2 border border-gray-300"},"Nama Items",-1)),t[7]||(t[7]=e("th",{class:"px-4 py-2 border border-gray-300"},"Unit",-1)),(l(!0),r(x,null,y(c.outlets,a=>(l(),r("th",{key:a.id_outlet,class:"px-4 py-2 border border-gray-300 text-right"},o(a.nama_outlet),1))),128))])]),e("tbody",null,[h.value.length?C("",!0):(l(),r("tr",J,[e("td",{colspan:2+c.outlets.length,class:"text-center py-10 text-gray-400"},"Tidak ada data.",8,Q)])),(l(!0),r(x,null,y(h.value,a=>(l(),r("tr",{key:a.item_name+"-"+a.unit_name},[e("td",q,o(a.item_name),1),e("td",X,o(a.unit_name),1),(l(!0),r(x,null,y(c.outlets,_=>(l(),r("td",{key:_.id_outlet,class:"px-4 py-2 border border-gray-200 text-right"},o(a[_.nama_outlet]?N(a[_.nama_outlet]):""),1))),128))]))),128))])])])):(l(),r("div",R," Silakan pilih tanggal terlebih dahulu ")),i.value&&p.value.length?(l(),r("div",Y,[e("div",Z," Menampilkan "+o(b.value+1)+" - "+o(L.value)+" dari "+o(p.value.length)+" data ",1),e("div",$,[e("button",{onClick:S,disabled:s.value===1,class:D(["px-3 py-1 rounded border text-sm",s.value===1?"bg-gray-200 text-gray-400":"bg-white text-blue-700 hover:bg-blue-50"])},"<",10,ee),e("span",te,"Halaman "+o(s.value)+" / "+o(g.value),1),e("button",{onClick:I,disabled:s.value===g.value,class:D(["px-3 py-1 rounded border text-sm",s.value===g.value?"bg-gray-200 text-gray-400":"bg-white text-blue-700 hover:bg-blue-50"])},">",10,ae)])])):C("",!0)])]),_:1}))}};export{ce as default};
