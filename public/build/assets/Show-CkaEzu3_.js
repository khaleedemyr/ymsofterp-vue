import{c as f,A as F,B as l,C,D as e,G as o,x as G,L as d,E as g,Q as J,S as W,N as n,l as c,F as Y,M as $,W as p}from"./vendor-vue-g7iCcTkf.js";import{A as q}from"./AppLayout-U5X72hCR.js";import{S as x}from"./app-CMkuePvF.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DCdSPjRr.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const z={class:"w-full py-8 px-4"},M={class:"flex justify-between items-center mb-6"},Q={class:"flex gap-3"},U={class:"bg-white rounded-xl shadow-lg p-6"},H={class:"mb-8"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},X={class:"p-3 bg-gray-50 rounded-md font-mono"},Z={class:"p-3"},ee={class:"p-3 bg-gray-50 rounded-md"},te={class:"p-3 bg-gray-50 rounded-md"},se={class:"font-medium"},re={class:"text-sm text-gray-500"},ae={class:"p-3 bg-gray-50 rounded-md"},ne={class:"p-3"},ie={class:"md:col-span-2"},oe={class:"p-3 bg-gray-50 rounded-md min-h-[100px] whitespace-pre-wrap"},le={key:0,class:"mb-8"},de={class:"bg-gray-50 p-4 rounded-md"},ue={class:"space-y-4"},ge={class:"flex items-center space-x-4"},me={class:"flex items-center space-x-3"},ce={class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},fe={class:"flex-1"},be={class:"font-semibold text-gray-900 text-lg"},pe={class:"text-sm text-gray-600 flex items-center mt-1"},xe={key:0,class:"text-sm text-blue-600 font-medium mt-1 flex items-center"},ye={key:1,class:"text-sm text-gray-600 mt-2 p-2 bg-gray-100 rounded border-l-4 border-blue-400"},ve={class:"text-right"},he={key:0,class:"text-xs text-gray-500 mt-1"},ke={key:1,class:"text-xs text-gray-500 mt-1"},Ee={class:"mb-8"},we={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},De={class:"p-3 bg-gray-50 rounded-md"},_e={class:"p-3 bg-gray-50 rounded-md"},Ve={__name:"Show",props:{resignation:Object,auth:{type:Object,default:()=>({user:null})}},setup(i){const r=i,m=f(()=>{var s;return((s=r.auth)==null?void 0:s.user)||null}),S=f(()=>{if(!m.value||!r.resignation)return!1;const s=m.value.id_role==="5af56935b011a",u=(r.resignation.created_by||r.resignation.creator&&r.resignation.creator.id)==m.value.id;return(r.resignation.status==="draft"||r.resignation.status==="rejected")&&(u||s)}),j=f(()=>{if(!m.value||!r.resignation)return!1;const s=m.value.id_role==="5af56935b011a",u=(r.resignation.created_by||r.resignation.creator&&r.resignation.creator.id)==m.value.id;return(r.resignation.status==="draft"||r.resignation.status==="rejected")&&(u||s)}),A=f(()=>{var s;return!((s=r.resignation)!=null&&s.approval_flows)||r.resignation.approval_flows.length===0?[]:[...r.resignation.approval_flows].sort((t,u)=>(t.approval_level||0)-(u.approval_level||0))});function B(){p.visit(`/employee-resignations/${r.resignation.id}/edit`)}function N(){x.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(s=>{s.isConfirmed&&p.delete(`/employee-resignations/${r.resignation.id}`,{onSuccess:()=>{x.fire("Deleted!","Employee resignation has been deleted.","success").then(()=>{p.visit("/employee-resignations")})},onError:t=>{x.fire("Error!",t.message||"Failed to delete employee resignation.","error")}})})}function R(s){switch(s){case"draft":return"bg-gray-100 text-gray-800";case"submitted":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function I(s){switch(s){case"draft":return"Draft";case"submitted":return"Submitted";case"approved":return"Approved";case"rejected":return"Rejected";default:return s}}function P(s){return s?new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"-"}function b(s){return s?new Date(s).toLocaleString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function T(s){switch(s){case"APPROVED":return"border-green-300 bg-green-50";case"REJECTED":return"border-red-300 bg-red-50";case"PENDING":return"border-yellow-300 bg-yellow-50";default:return"border-gray-300 bg-gray-50"}}function V(s){switch(s){case"APPROVED":return"fa fa-check-circle text-green-600";case"REJECTED":return"fa fa-times-circle text-red-600";case"PENDING":return"fa fa-clock text-yellow-600";default:return"fa fa-question-circle text-gray-600"}}function L(s){switch(s){case"APPROVED":return"bg-green-100";case"REJECTED":return"bg-red-100";case"PENDING":return"bg-yellow-100";default:return"bg-gray-100"}}function O(s){switch(s){case"APPROVED":return"bg-green-100 text-green-800";case"REJECTED":return"bg-red-100 text-red-800";case"PENDING":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}}return(s,t)=>(l(),F(q,{title:"Employee Resignation Detail"},{default:C(()=>{var u,y,v,h;return[e("div",z,[e("div",M,[t[3]||(t[3]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-user-minus text-red-500"}),o(" Employee Resignation Detail ")],-1)),e("div",Q,[G(J(W),{href:"/employee-resignations",class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"},{default:C(()=>t[0]||(t[0]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),o(" Back to List ")])),_:1}),S.value?(l(),d("button",{key:0,onClick:B,class:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},t[1]||(t[1]=[e("i",{class:"fas fa-edit mr-2"},null,-1),o(" Edit ")]))):g("",!0),j.value?(l(),d("button",{key:1,onClick:N,class:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded"},t[2]||(t[2]=[e("i",{class:"fas fa-trash mr-2"},null,-1),o(" Delete ")]))):g("",!0)])]),e("div",U,[e("div",H,[t[11]||(t[11]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4 bg-gray-100 p-3 rounded-md"},"Basic Information",-1)),e("div",K,[e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Resignation Number",-1)),e("div",X,n(i.resignation.resignation_number||"-"),1)]),e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),e("div",Z,[e("span",{class:c(["px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full",R(i.resignation.status)])},n(I(i.resignation.status)),3)])]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Outlet",-1)),e("div",ee,n(((u=i.resignation.outlet)==null?void 0:u.nama_outlet)||"-"),1)]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Employee",-1)),e("div",te,[e("div",se,n(((y=i.resignation.employee)==null?void 0:y.nama_lengkap)||"-"),1),e("div",re,n(((v=i.resignation.employee)==null?void 0:v.nik)||"-"),1)])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Resignation Date",-1)),e("div",ae,n(P(i.resignation.resignation_date)),1)]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Resignation Type",-1)),e("div",ne,[e("span",{class:c(["px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full",i.resignation.resignation_type==="prosedural"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},n(i.resignation.resignation_type==="prosedural"?"Prosedural":"Non Prosedural"),3)])]),e("div",ie,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Notes",-1)),e("div",oe,n(i.resignation.notes||"-"),1)])])]),i.resignation.approval_flows&&i.resignation.approval_flows.length>0?(l(),d("div",le,[t[19]||(t[19]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4 bg-gray-100 p-3 rounded-md flex items-center"},[e("i",{class:"fa fa-users mr-2 text-blue-500"}),o(" Approval Flow ")],-1)),e("div",de,[e("div",ue,[(l(!0),d(Y,null,$(A.value,a=>{var k,E,w,D,_;return l(),d("div",{key:a.id,class:c(["flex items-center justify-between p-4 border border-gray-200 rounded-lg",T(a.status)])},[e("div",ge,[e("div",me,[e("span",ce,[t[12]||(t[12]=e("i",{class:"fa fa-layer-group mr-1"},null,-1)),o(" Level "+n(a.approval_level),1)]),e("div",{class:c(["w-10 h-10 rounded-full flex items-center justify-center shadow-md",L(a.status)])},[e("i",{class:c(V(a.status))},null,2)],2)]),e("div",fe,[e("div",be,n(((k=a.approver)==null?void 0:k.nama_lengkap)||((E=a.approver)==null?void 0:E.name)||"Unknown"),1),e("div",pe,[t[13]||(t[13]=e("i",{class:"fa fa-envelope mr-2"},null,-1)),o(n(((w=a.approver)==null?void 0:w.email)||"-"),1)]),(_=(D=a.approver)==null?void 0:D.jabatan)!=null&&_.nama_jabatan?(l(),d("div",xe,[t[14]||(t[14]=e("i",{class:"fa fa-briefcase mr-2"},null,-1)),o(n(a.approver.jabatan.nama_jabatan),1)])):g("",!0),a.comments?(l(),d("div",ye,[t[15]||(t[15]=e("strong",{class:"text-gray-800"},"Comments:",-1)),o(" "+n(a.comments),1)])):g("",!0)])]),e("div",ve,[e("div",{class:c(["text-sm font-medium px-3 py-1 rounded-full",O(a.status)])},[t[16]||(t[16]=e("i",{class:"fa fa-circle mr-1 text-xs"},null,-1)),o(n(a.status),1)],2),a.approved_at?(l(),d("div",he,[t[17]||(t[17]=e("i",{class:"fa fa-check-circle mr-1 text-green-500"},null,-1)),o("Approved: "+n(b(a.approved_at)),1)])):g("",!0),a.rejected_at?(l(),d("div",ke,[t[18]||(t[18]=e("i",{class:"fa fa-times-circle mr-1 text-red-500"},null,-1)),o("Rejected: "+n(b(a.rejected_at)),1)])):g("",!0)])],2)}),128))])])])):g("",!0),e("div",Ee,[t[22]||(t[22]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4 bg-gray-100 p-3 rounded-md"},"Creator Information",-1)),e("div",we,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Created By",-1)),e("div",De,n(((h=i.resignation.creator)==null?void 0:h.nama_lengkap)||"-"),1)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Created At",-1)),e("div",_e,n(b(i.resignation.created_at)),1)])])])])])]}),_:1}))}};export{Ve as default};
