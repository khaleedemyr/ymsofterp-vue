import{P as S,c as V,A as C,B as a,C as f,D as e,G as d,O as M,H as o,Q as s,L as u,F as c,M as y,N as i,I as b,J as p,x as D,S as U,E as A}from"./vendor-vue-g7iCcTkf.js";import{A as N}from"./AppLayout-IVexHyAO.js";import"./vendor-utils-CpgP2uT4.js";import"./app-V2AeMLhf.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-BZZ_tA4T.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const B={class:"max-w-4xl w-full mx-auto py-8 px-2"},I=["value"],P=["value"],T={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},L={class:"flex justify-end gap-3 pt-4 border-t border-gray-200"},O=["disabled"],R={key:0,class:"fa-solid fa-spinner fa-spin"},X={__name:"Create",props:{assets:Array,schedules:Array},setup(g){const x=g,n=S({asset_id:"",maintenance_schedule_id:null,maintenance_date:new Date().toISOString().split("T")[0],maintenance_type:"",cost:null,vendor:"",notes:"",status:"Scheduled",performed_by:null}),m=V(()=>n.asset_id?x.schedules.filter(r=>r.asset_id==n.asset_id&&r.is_active):[]);function v(){m.value.length>0&&(n.maintenance_schedule_id=m.value[0].id,n.maintenance_type=m.value[0].maintenance_type)}function k(r){return r?new Date(r).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}function w(){n.post("/asset-management/maintenances",{preserveScroll:!0})}return(r,t)=>(a(),C(N,null,{default:f(()=>[e("div",B,[t[23]||(t[23]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-wrench text-blue-500"}),d(" Record Maintenance ")])],-1)),e("form",{onSubmit:M(w,["prevent"]),class:"bg-white rounded-xl shadow-lg p-6 space-y-6"},[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d(" Asset "),e("span",{class:"text-red-500"},"*")],-1)),o(e("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>s(n).asset_id=l),required:"",onChange:v,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[t[9]||(t[9]=e("option",{value:""},"Pilih Asset",-1)),(a(!0),u(c,null,y(g.assets,l=>(a(),u("option",{key:l.id,value:l.id},i(l.asset_code)+" - "+i(l.name),9,I))),128))],544),[[b,s(n).asset_id]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Maintenance Schedule (Optional)",-1)),o(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>s(n).maintenance_schedule_id=l),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[t[11]||(t[11]=e("option",{value:""},"Tidak dari Schedule",-1)),(a(!0),u(c,null,y(m.value,l=>(a(),u("option",{key:l.id,value:l.id},i(l.maintenance_type)+" - "+i(l.frequency)+" (Next: "+i(k(l.next_maintenance_date))+") ",9,P))),128))],512),[[b,s(n).maintenance_schedule_id]])]),e("div",T,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d(" Maintenance Date "),e("span",{class:"text-red-500"},"*")],-1)),o(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=l=>s(n).maintenance_date=l),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[p,s(n).maintenance_date]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d(" Maintenance Type "),e("span",{class:"text-red-500"},"*")],-1)),o(e("select",{"onUpdate:modelValue":t[3]||(t[3]=l=>s(n).maintenance_type=l),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[14]||(t[14]=[e("option",{value:""},"Pilih Tipe",-1),e("option",{value:"Cleaning"},"Cleaning",-1),e("option",{value:"Service"},"Service",-1),e("option",{value:"Repair"},"Repair",-1),e("option",{value:"Inspection"},"Inspection",-1)]),512),[[b,s(n).maintenance_type]])])]),e("div",_,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Cost",-1)),o(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=l=>s(n).cost=l),step:"0.01",min:"0",placeholder:"0",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[p,s(n).cost]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Vendor",-1)),o(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=l=>s(n).vendor=l),placeholder:"Masukkan vendor/service provider",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[p,s(n).vendor]])])]),e("div",q,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d(" Status "),e("span",{class:"text-red-500"},"*")],-1)),o(e("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>s(n).status=l),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[18]||(t[18]=[e("option",{value:"Scheduled"},"Scheduled",-1),e("option",{value:"In Progress"},"In Progress",-1),e("option",{value:"Completed"},"Completed",-1),e("option",{value:"Cancelled"},"Cancelled",-1)]),512),[[b,s(n).status]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Performed By",-1)),o(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=l=>s(n).performed_by=l),placeholder:"Nama teknisi/performer",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[p,s(n).performed_by]])])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),o(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=l=>s(n).notes=l),rows:"4",placeholder:"Masukkan catatan maintenance...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[p,s(n).notes]])]),e("div",L,[D(s(U),{href:"/asset-management/maintenances",class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"},{default:f(()=>t[22]||(t[22]=[d(" Batal ")])),_:1}),e("button",{type:"submit",disabled:s(n).processing,class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center gap-2 disabled:opacity-50"},[s(n).processing?(a(),u("i",R)):A("",!0),e("span",null,i(s(n).processing?"Menyimpan...":"Simpan"),1)],8,O)])],32)])]),_:1}))}};export{X as default};
