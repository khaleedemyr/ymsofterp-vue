import{$ as C,c as m,r as v,A as R,B as l,C as L,D as e,G as i,N as s,L as r,F as N,M as j,E as p,W as S}from"./vendor-vue-g7iCcTkf.js";import{A as I}from"./AppLayout-DkG6xw-a.js";import{S as A}from"./app-5ZP5W-3z.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-COEZdPkp.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const K={class:"max-w-3xl w-full mx-auto py-8 px-2"},M={class:"flex items-center gap-2 mb-6"},T={class:"bg-white rounded-2xl shadow p-6 mb-6"},$={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},P={class:"font-semibold"},V={class:"bg-white rounded-2xl shadow p-6 mb-6"},W={class:"w-full min-w-full divide-y divide-gray-200"},q={class:"px-3 py-2"},E={key:0,class:"text-xs text-gray-500 mt-1"},G={key:0},H={key:1},O={key:2},Q={class:"px-3 py-2"},U={class:"px-3 py-2"},z={class:"px-3 py-2"},J={class:"px-3 py-2"},X={class:"bg-white rounded-2xl shadow p-6 mb-6"},Y={key:0,class:"mb-4"},Z={key:0},tt={key:0},et={key:1,class:"text-gray-500"},st={key:2,class:"mt-2"},ot={class:"mb-2"},at={key:0},nt={key:0},lt={key:1,class:"text-gray-500"},rt={key:1},ct={__name:"Show",props:{prFood:Object},setup(n){var _;const u=n,o=((_=C().props.auth)==null?void 0:_.user)||{},b=m(()=>(o==null?void 0:o.id_role)==="5af56935b011a"&&(o==null?void 0:o.status)==="A"),g=m(()=>{var t;const d=(t=u.prFood.warehouse)==null?void 0:t.name;return d==="MK1 Hot Kitchen"||d==="MK2 Cold Kitchen"}),h=m(()=>g.value?!1:((o==null?void 0:o.id_jabatan)===172&&(o==null?void 0:o.status)==="A"||b.value)&&u.prFood.status==="draft"&&!u.prFood.assistant_ssd_manager_approved_at),B=m(()=>g.value?((o==null?void 0:o.id_jabatan)===179&&(o==null?void 0:o.status)==="A"||b.value)&&u.prFood.status==="draft"&&!u.prFood.ssd_manager_approved_at:((o==null?void 0:o.id_jabatan)===161&&(o==null?void 0:o.status)==="A"||b.value)&&u.prFood.status==="draft"&&u.prFood.assistant_ssd_manager_approved_at&&!u.prFood.ssd_manager_approved_at);m(()=>!1);const x=m(()=>g.value?"Sous Chef MK":"SSD Manager");v(""),v(""),v("");async function f(d){const{value:t}=await A.fire({title:d?"Approve PR?":"Reject PR?",input:"textarea",inputLabel:"Catatan (opsional)",inputValue:"",showCancelButton:!0,confirmButtonText:d?"Approve":"Reject",cancelButtonText:"Batal"});t!==void 0&&S.post(route("pr-foods.approve-assistant-ssd-manager",u.prFood.id),{approved:d,assistant_ssd_manager_note:t})}async function c(d){x.value;const{value:t}=await A.fire({title:d?"Approve PR?":"Reject PR?",input:"textarea",inputLabel:"Catatan (opsional)",inputValue:"",showCancelButton:!0,confirmButtonText:d?"Approve":"Reject",cancelButtonText:"Batal"});t!==void 0&&S.post(route("pr-foods.approve-ssd-manager",u.prFood.id),{approved:d,ssd_manager_note:t})}return(d,t)=>(l(),R(I,null,{default:L(()=>{var y,F,k,w;return[e("div",K,[e("div",M,[e("button",{onClick:t[0]||(t[0]=a=>d.$inertia.visit("/pr-foods")),class:"text-blue-500 hover:underline"},t[5]||(t[5]=[e("i",{class:"fa fa-arrow-left"},null,-1),i(" Kembali")])),t[6]||(t[6]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2 ml-4"},[e("i",{class:"fa-solid fa-file-invoice text-blue-500"}),i(" Detail PR Foods ")],-1))]),e("div",T,[e("div",$,[e("div",null,[t[7]||(t[7]=e("b",null,"No. PR:",-1)),i(" "+s(n.prFood.pr_number),1)]),e("div",null,[t[8]||(t[8]=e("b",null,"Tanggal:",-1)),i(" "+s(new Date(n.prFood.tanggal).toLocaleDateString("id-ID")),1)]),e("div",null,[t[9]||(t[9]=e("b",null,"Warehouse:",-1)),i(" "+s((y=n.prFood.warehouse)==null?void 0:y.name),1)]),e("div",null,[t[10]||(t[10]=e("b",null,"Requester:",-1)),i(" "+s((F=n.prFood.requester)==null?void 0:F.nama_lengkap),1)]),e("div",null,[t[11]||(t[11]=e("b",null,"Status:",-1)),t[12]||(t[12]=i()),e("span",P,s(n.prFood.status),1)])]),e("div",null,[t[13]||(t[13]=e("b",null,"Keterangan:",-1)),i(" "+s(n.prFood.description),1)])]),e("div",V,[t[16]||(t[16]=e("h2",{class:"text-lg font-bold mb-2"},"Detail Item",-1)),e("table",W,[t[15]||(t[15]=e("thead",{class:"bg-gradient-to-r from-blue-50 to-blue-100"},[e("tr",null,[e("th",{class:"px-3 py-2 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Item"),e("th",{class:"px-3 py-2 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Qty"),e("th",{class:"px-3 py-2 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Unit"),e("th",{class:"px-3 py-2 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Note"),e("th",{class:"px-3 py-2 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Tgl Kedatangan")])],-1)),e("tbody",null,[(l(!0),r(N,null,j(n.prFood.items,a=>{var D;return l(),r("tr",{key:a.id},[e("td",q,[e("div",null,s((D=a.item)==null?void 0:D.name),1),a.stock_small!==void 0?(l(),r("div",E,[t[14]||(t[14]=i(" Stok: ")),a.unit_small?(l(),r("span",G,s(Number(a.stock_small).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2}))+" "+s(a.unit_small),1)):p("",!0),a.unit_medium?(l(),r("span",H," | "+s(Number(a.stock_medium).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2}))+" "+s(a.unit_medium),1)):p("",!0),a.unit_large?(l(),r("span",O," | "+s(Number(a.stock_large).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2}))+" "+s(a.unit_large),1)):p("",!0)])):p("",!0)]),e("td",Q,s(a.qty),1),e("td",U,s(a.unit),1),e("td",z,s(a.note),1),e("td",J,s(a.arrival_date?new Date(a.arrival_date).toLocaleDateString("id-ID"):"-"),1)])}),128))])])]),e("div",X,[t[22]||(t[22]=e("h2",{class:"text-lg font-bold mb-2"},"Approval",-1)),g.value?p("",!0):(l(),r("div",Y,[t[19]||(t[19]=e("b",null,"Asisten SSD Manager:",-1)),n.prFood.assistant_ssd_manager_approved_at?(l(),r("span",Z,[t[17]||(t[17]=e("span",{class:"text-green-600 font-semibold"},"Approved",-1)),t[18]||(t[18]=i(" oleh ")),e("b",null,s(((k=n.prFood.assistant_ssd_manager)==null?void 0:k.nama_lengkap)||n.prFood.assistant_ssd_manager_approved_by),1),i(" pada "+s(new Date(n.prFood.assistant_ssd_manager_approved_at).toLocaleString("id-ID"))+" ",1),n.prFood.assistant_ssd_manager_note?(l(),r("span",tt,"- Note: "+s(n.prFood.assistant_ssd_manager_note),1)):p("",!0)])):(l(),r("span",et,"Belum di-approve")),h.value?(l(),r("div",st,[e("button",{onClick:t[1]||(t[1]=a=>f(!0)),class:"px-4 py-2 rounded bg-green-600 text-white font-semibold hover:bg-green-700 mr-2"},"Approve (Asisten SSD Manager)"),e("button",{onClick:t[2]||(t[2]=a=>f(!1)),class:"px-4 py-2 rounded bg-red-600 text-white font-semibold hover:bg-red-700"},"Reject")])):p("",!0)])),e("div",ot,[e("b",null,s(x.value)+":",1),n.prFood.ssd_manager_approved_at?(l(),r("span",at,[t[20]||(t[20]=e("span",{class:"text-green-600 font-semibold"},"Approved",-1)),t[21]||(t[21]=i(" oleh ")),e("b",null,s(((w=n.prFood.ssd_manager)==null?void 0:w.nama_lengkap)||n.prFood.ssd_manager_approved_by),1),i(" pada "+s(new Date(n.prFood.ssd_manager_approved_at).toLocaleString("id-ID"))+" ",1),n.prFood.ssd_manager_note?(l(),r("span",nt,"- Note: "+s(n.prFood.ssd_manager_note),1)):p("",!0)])):(l(),r("span",lt,"Belum di-approve"))]),B.value?(l(),r("div",rt,[e("button",{onClick:t[3]||(t[3]=a=>c(!0)),class:"px-4 py-2 rounded bg-green-600 text-white font-semibold hover:bg-green-700 mr-2"},"Approve ("+s(x.value)+")",1),e("button",{onClick:t[4]||(t[4]=a=>c(!1)),class:"px-4 py-2 rounded bg-red-600 text-white font-semibold hover:bg-red-700"},"Reject")])):p("",!0)])])]}),_:1}))}};export{ct as default};
