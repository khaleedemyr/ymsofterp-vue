import{r as c,c as H,w as E,A as O,B as i,C as W,D as t,L as r,E as _,N as o,G as n,H as g,J as k,F as C,M as D,I as U,l as S,Q as j,W as d,x as R}from"./vendor-vue-g7iCcTkf.js";import{A as X}from"./AppLayout-Cg9_BqdS.js";import Z from"./Form-DnwUJTaK.js";import{S as B}from"./app-CL3toCqm.js";import{a as tt}from"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DcALjTaB.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vue-multiselect.esm-V-bx43V9.js";/* empty css                            */import"./vendor-charts-CuqD4wLC.js";const et={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},st={class:"mb-8"},lt={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6"},at={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-5 border border-blue-200 shadow-sm"},ot={class:"flex items-center justify-between"},nt={class:"text-2xl font-bold text-blue-900"},it={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-5 border border-green-200 shadow-sm"},rt={class:"flex items-center justify-between"},dt={class:"text-2xl font-bold text-green-900"},ut={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-5 border border-purple-200 shadow-sm"},ct={class:"flex items-center justify-between"},xt={class:"text-2xl font-bold text-purple-900"},pt={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 mb-6"},ft={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 items-end"},bt={class:"relative"},mt=["value"],gt={class:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden"},vt={class:"overflow-x-auto"},ht={class:"w-full min-w-full"},yt={class:"bg-white divide-y divide-gray-100"},wt={key:0},_t={class:"px-6 py-4 whitespace-nowrap"},kt={class:"text-sm font-semibold text-gray-900"},Ct={class:"px-6 py-4 whitespace-nowrap"},Dt={class:"text-sm text-gray-700"},St={class:"px-6 py-4 whitespace-nowrap"},jt={class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800"},Bt={class:"px-6 py-4"},Mt={class:"text-sm font-medium text-gray-900"},Tt={class:"px-6 py-4 whitespace-nowrap text-right"},Ft={class:"text-sm font-semibold text-gray-900"},It={class:"px-6 py-4 whitespace-nowrap text-right"},Pt={class:"text-sm font-semibold text-green-600"},Vt={class:"px-6 py-4 whitespace-nowrap"},Lt={class:"inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-800"},Nt={class:"px-6 py-4 whitespace-nowrap"},Ht={class:"flex items-center"},Ut={class:"text-sm text-gray-700"},At={class:"px-6 py-4"},Yt=["title"],$t={class:"px-6 py-4 whitespace-nowrap text-center"},Gt={class:"flex items-center justify-center gap-2"},Jt=["onClick"],Kt=["onClick"],Qt={key:0,class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 mt-6"},qt={class:"flex flex-col sm:flex-row justify-between items-center gap-4"},zt={class:"text-sm text-gray-700 font-medium"},Et={class:"font-bold text-blue-600"},Ot={class:"font-bold text-blue-600"},Wt={class:"font-bold text-gray-900"},Rt={class:"flex items-center gap-2"},Xt=["disabled"],Zt={class:"flex items-center gap-1.5"},te=["disabled","onClick","innerHTML"],ee=["disabled"],se={key:1},le={class:"fixed inset-0 bg-black bg-opacity-40 z-50 flex items-center justify-center"},ae={class:"bg-white rounded-xl shadow-2xl w-full max-w-3xl p-6 relative max-h-[90vh] overflow-y-auto"},ve={__name:"Index",props:{productions:Object,items:Array,filters:Object},setup(h){var F,I,P,V,L;const u=h,y=c(!1),x=c(((F=u.filters)==null?void 0:F.search)||""),p=c(((I=u.filters)==null?void 0:I.item_id)||""),f=c(((P=u.filters)==null?void 0:P.from_date)||""),b=c(((V=u.filters)==null?void 0:V.to_date)||""),m=c(((L=u.filters)==null?void 0:L.per_page)||15),a=H(()=>u.productions||{data:[],total:0,from:0,to:0,last_page:1,links:[],prev_page_url:null,next_page_url:null}),A=H(()=>{if(!a.value.data||a.value.data.length===0)return 0;const l=new Date,e=l.getMonth(),s=l.getFullYear();return a.value.data.filter(w=>{const N=new Date(w.production_date);return N.getMonth()===e&&N.getFullYear()===s}).length});E(()=>u.filters,l=>{x.value=(l==null?void 0:l.search)||"",p.value=(l==null?void 0:l.item_id)||"",f.value=(l==null?void 0:l.from_date)||"",b.value=(l==null?void 0:l.to_date)||"",m.value=(l==null?void 0:l.per_page)||15},{immediate:!0});function v(){d.get("/mk-production",{search:x.value,item_id:p.value,from_date:f.value,to_date:b.value,per_page:m.value},{preserveState:!0,replace:!0})}function M(){v()}function T(){v()}function Y(){v()}function $(){x.value="",p.value="",f.value="",b.value="",m.value=15,v()}function G(l){return l?new Date(l).toLocaleDateString("id-ID"):"-"}function J(l){return l?new Date(l).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"}function K(){y.value=!1,d.reload()}function Q(){d.visit(route("mk-production.create"))}function q(l){d.visit(route("mk-production.show",l))}function z(l){B.fire({title:"Hapus Produksi?",text:"Data dan stok akan di-rollback. Lanjutkan?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal",confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280"}).then(e=>{e.isConfirmed&&tt.delete(`/mk-production/${l}`).then(()=>{B.fire({title:"Berhasil",text:"Data berhasil dihapus & stok di-rollback",icon:"success",confirmButtonColor:"#3b82f6"}),d.reload()}).catch(()=>{B.fire({title:"Gagal",text:"Gagal menghapus data",icon:"error",confirmButtonColor:"#ef4444"})})})}return(l,e)=>(i(),O(X,null,{default:W(()=>[t("div",et,[t("div",st,[t("div",{class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"},[e[9]||(e[9]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900 flex items-center gap-3 mb-2"},[t("div",{class:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg"},[t("i",{class:"fa-solid fa-industry text-white text-xl"})]),t("span",null,"MK Production")]),t("p",{class:"text-gray-600 ml-16"},"Kelola produksi dan monitoring batch production")],-1)),t("button",{onClick:Q,class:"group relative inline-flex items-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 font-semibold transform hover:-translate-y-0.5"},e[8]||(e[8]=[t("i",{class:"fa-solid fa-plus-circle text-lg"},null,-1),t("span",null,"Create New Production",-1)]))]),t("div",lt,[t("div",at,[t("div",ot,[t("div",null,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-blue-700 mb-1"},"Total Production",-1)),t("p",nt,o(a.value.total||0),1)]),e[11]||(e[11]=t("div",{class:"p-3 bg-blue-500 rounded-lg"},[t("i",{class:"fa-solid fa-chart-line text-white text-xl"})],-1))])]),t("div",it,[t("div",rt,[t("div",null,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-green-700 mb-1"},"This Month",-1)),t("p",dt,o(A.value),1)]),e[13]||(e[13]=t("div",{class:"p-3 bg-green-500 rounded-lg"},[t("i",{class:"fa-solid fa-calendar-check text-white text-xl"})],-1))])]),t("div",ut,[t("div",ct,[t("div",null,[e[14]||(e[14]=t("p",{class:"text-sm font-medium text-purple-700 mb-1"},"Showing",-1)),t("p",xt,o(a.value.from||0)+"-"+o(a.value.to||0),1)]),e[15]||(e[15]=t("div",{class:"p-3 bg-purple-500 rounded-lg"},[t("i",{class:"fa-solid fa-list text-white text-xl"})],-1))])])])]),t("div",pt,[e[25]||(e[25]=t("div",{class:"flex items-center gap-2 mb-5"},[t("div",{class:"p-2 bg-blue-100 rounded-lg"},[t("i",{class:"fa-solid fa-filter text-blue-600"})]),t("h3",{class:"text-lg font-bold text-gray-800"},"Filter & Pencarian")],-1)),t("div",ft,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa-solid fa-search text-blue-500 mr-1"}),n(" Cari ")],-1)),t("div",bt,[g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>x.value=s),onInput:M,type:"text",placeholder:"Cari item, batch, user, catatan...",class:"w-full pl-10 pr-4 py-2.5 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,544),[[k,x.value]]),e[16]||(e[16]=t("i",{class:"fa-solid fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},null,-1))])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa-solid fa-box text-blue-500 mr-1"}),n(" Item ")],-1)),g(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>p.value=s),onChange:M,class:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white"},[e[18]||(e[18]=t("option",{value:""},"Semua Item",-1)),(i(!0),r(C,null,D(h.items,s=>(i(),r("option",{key:s.id,value:s.id},o(s.name),9,mt))),128))],544),[[U,p.value]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa-solid fa-calendar-day text-blue-500 mr-1"}),n(" Dari Tanggal ")],-1)),g(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>f.value=s),onChange:T,type:"date",class:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,544),[[k,f.value]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa-solid fa-calendar-check text-blue-500 mr-1"}),n(" Sampai Tanggal ")],-1)),g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>b.value=s),onChange:T,type:"date",class:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,544),[[k,b.value]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa-solid fa-list-ol text-blue-500 mr-1"}),n(" Per Halaman ")],-1)),g(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>m.value=s),onChange:Y,class:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white"},e[22]||(e[22]=[t("option",{value:"10"},"10",-1),t("option",{value:"15"},"15",-1),t("option",{value:"25"},"25",-1),t("option",{value:"50"},"50",-1),t("option",{value:"100"},"100",-1)]),544),[[U,m.value]])]),t("div",null,[t("button",{onClick:$,class:"w-full px-4 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl transition-all font-semibold border-2 border-gray-200 hover:border-gray-300 flex items-center justify-center gap-2"},e[24]||(e[24]=[t("i",{class:"fa-solid fa-rotate-left"},null,-1),n(" Clear Filter ")]))])])]),t("div",gt,[t("div",vt,[t("table",ht,[e[31]||(e[31]=t("thead",{class:"bg-gradient-to-r from-blue-600 to-blue-700"},[t("tr",null,[t("th",{class:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider"},[t("div",{class:"flex items-center gap-2"},[t("i",{class:"fa-solid fa-calendar text-blue-200"}),t("span",null,"Tanggal")])]),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider"},[t("div",{class:"flex items-center gap-2"},[t("i",{class:"fa-solid fa-clock text-blue-200"}),t("span",null,"Jam")])]),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider"},[t("div",{class:"flex items-center gap-2"},[t("i",{class:"fa-solid fa-barcode text-blue-200"}),t("span",null,"Batch")])]),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider"},[t("div",{class:"flex items-center gap-2"},[t("i",{class:"fa-solid fa-box text-blue-200"}),t("span",null,"Item")])]),t("th",{class:"px-6 py-4 text-right text-xs font-bold text-white uppercase tracking-wider"},[t("div",{class:"flex items-center justify-end gap-2"},[t("i",{class:"fa-solid fa-calculator text-blue-200"}),t("span",null,"Qty")])]),t("th",{class:"px-6 py-4 text-right text-xs font-bold text-white uppercase tracking-wider"},[t("div",{class:"flex items-center justify-end gap-2"},[t("i",{class:"fa-solid fa-check-circle text-blue-200"}),t("span",null,"Qty Jadi")])]),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider"},[t("div",{class:"flex items-center gap-2"},[t("i",{class:"fa-solid fa-ruler text-blue-200"}),t("span",null,"Unit")])]),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider"},[t("div",{class:"flex items-center gap-2"},[t("i",{class:"fa-solid fa-user text-blue-200"}),t("span",null,"Created By")])]),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider"},[t("div",{class:"flex items-center gap-2"},[t("i",{class:"fa-solid fa-note-sticky text-blue-200"}),t("span",null,"Catatan")])]),t("th",{class:"px-6 py-4 text-center text-xs font-bold text-white uppercase tracking-wider"},[t("div",{class:"flex items-center justify-center gap-2"},[t("i",{class:"fa-solid fa-gear text-blue-200"}),t("span",null,"Aksi")])])])],-1)),t("tbody",yt,[a.value.data.length===0?(i(),r("tr",wt,e[26]||(e[26]=[t("td",{colspan:"10",class:"px-6 py-16 text-center"},[t("div",{class:"flex flex-col items-center justify-center"},[t("div",{class:"p-4 bg-gray-100 rounded-full mb-4"},[t("i",{class:"fa-solid fa-inbox text-4xl text-gray-400"})]),t("p",{class:"text-gray-500 text-lg font-medium"},"Tidak ada data produksi"),t("p",{class:"text-gray-400 text-sm mt-1"},"Mulai dengan membuat produksi baru")])],-1)]))):_("",!0),(i(!0),r(C,null,D(a.value.data,s=>(i(),r("tr",{key:s.id,class:"hover:bg-blue-50 transition-all duration-150 border-b border-gray-50"},[t("td",_t,[t("div",kt,o(G(s.production_date)),1)]),t("td",Ct,[t("div",Dt,o(J(s.created_at)),1)]),t("td",St,[t("span",jt,[e[27]||(e[27]=t("i",{class:"fa-solid fa-barcode mr-1.5"},null,-1)),n(" "+o(s.batch_number),1)])]),t("td",Bt,[t("div",Mt,o(s.item_name),1)]),t("td",Tt,[t("div",Ft,o(Number(s.qty).toFixed(2)),1)]),t("td",It,[t("div",Pt,o(Number(s.qty_jadi).toFixed(2)),1)]),t("td",Vt,[t("span",Lt,o(s.unit_name),1)]),t("td",Nt,[t("div",Ht,[e[28]||(e[28]=t("div",{class:"flex-shrink-0 h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center mr-2"},[t("i",{class:"fa-solid fa-user text-blue-600 text-xs"})],-1)),t("div",Ut,o(s.created_by_name),1)])]),t("td",At,[t("div",{class:"text-sm text-gray-600 max-w-xs truncate",title:s.notes},o(s.notes||"-"),9,Yt)]),t("td",$t,[t("div",Gt,[t("button",{onClick:w=>q(s.id),class:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-xs font-semibold transition-all duration-200 shadow-sm hover:shadow-md"},e[29]||(e[29]=[t("i",{class:"fa-solid fa-eye"},null,-1),t("span",null,"Detail",-1)]),8,Jt),t("button",{onClick:w=>z(s.id),class:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-red-500 hover:bg-red-600 text-white rounded-lg text-xs font-semibold transition-all duration-200 shadow-sm hover:shadow-md"},e[30]||(e[30]=[t("i",{class:"fa-solid fa-trash"},null,-1),t("span",null,"Hapus",-1)]),8,Kt)])])]))),128))])])])]),a.value.last_page>1?(i(),r("div",Qt,[t("div",qt,[t("div",zt,[e[32]||(e[32]=t("i",{class:"fa-solid fa-info-circle text-blue-500 mr-2"},null,-1)),e[33]||(e[33]=n(" Menampilkan ")),t("span",Et,o(a.value.from||0),1),e[34]||(e[34]=n(" sampai ")),t("span",Ot,o(a.value.to||0),1),e[35]||(e[35]=n(" dari ")),t("span",Wt,o(a.value.total),1),e[36]||(e[36]=n(" data "))]),t("div",Rt,[t("button",{onClick:e[5]||(e[5]=()=>a.value.prev_page_url&&j(d).visit(a.value.prev_page_url,{preserveState:!0,replace:!0})),disabled:!a.value.prev_page_url,class:S(["inline-flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200",a.value.prev_page_url?"bg-blue-500 text-white hover:bg-blue-600 shadow-md hover:shadow-lg transform hover:-translate-y-0.5":"bg-gray-200 text-gray-400 cursor-not-allowed"])},e[37]||(e[37]=[t("i",{class:"fa-solid fa-chevron-left"},null,-1),t("span",null,"Sebelumnya",-1)]),10,Xt),t("div",Zt,[(i(!0),r(C,null,D(a.value.links,s=>(i(),r("button",{key:s.label,disabled:!s.url,onClick:()=>s.url&&j(d).visit(s.url,{preserveState:!0,replace:!0}),innerHTML:s.label,class:S(["px-4 py-2 rounded-xl text-sm font-semibold transition-all duration-200 min-w-[40px]",[s.active?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200 hover:shadow-sm",s.url?"cursor-pointer hover:scale-105":"opacity-50 cursor-not-allowed"]])},null,10,te))),128))]),t("button",{onClick:e[6]||(e[6]=()=>a.value.next_page_url&&j(d).visit(a.value.next_page_url,{preserveState:!0,replace:!0})),disabled:!a.value.next_page_url,class:S(["inline-flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200",a.value.next_page_url?"bg-blue-500 text-white hover:bg-blue-600 shadow-md hover:shadow-lg transform hover:-translate-y-0.5":"bg-gray-200 text-gray-400 cursor-not-allowed"])},e[38]||(e[38]=[t("span",null,"Selanjutnya",-1),t("i",{class:"fa-solid fa-chevron-right"},null,-1)]),10,ee)])])])):_("",!0),y.value?(i(),r("div",se,[t("div",le,[t("div",ae,[t("button",{onClick:e[7]||(e[7]=s=>y.value=!1),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500"},e[39]||(e[39]=[t("i",{class:"fa-solid fa-xmark text-2xl"},null,-1)])),R(Z,{items:h.items,onSuccess:K},null,8,["items"])])])])):_("",!0)])]),_:1}))}};export{ve as default};
