import{r as c,A as S,B as b,C as B,D as e,N as C,G as p,O as D,x as l,l as d,H as h,J as E,L as v,E as f,V as I,W as M}from"./vendor-vue-g7iCcTkf.js";import{A as U}from"./AppLayout-DFHlgV7Y.js";import{P as $}from"./PrimaryButton-BbBAD9SX.js";import{_ as y}from"./TextInput-B7P_xVe4.js";import{_ as i,a as m}from"./InputLabel-Bg0AMQZ3.js";import{S as V}from"./app-BAhc_I4B.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-Cwic3ZqH.js";import"./vendor-charts-CuqD4wLC.js";const F={class:"max-w-4xl mx-auto py-8 px-4"},L={class:"flex justify-between items-center mb-6"},A={class:"text-2xl font-bold text-gray-800"},G={class:"bg-white rounded-lg shadow p-6"},R=["src"],T={key:1,class:"mt-4"},W=["src"],q=["src"],J={key:1,class:"mt-4"},O=["src"],z={class:"flex items-center"},H={class:"flex justify-end gap-4"},se={__name:"Edit",props:{banner:{type:Object,required:!0}},setup(u){const o=u,a=c({title:o.banner.title||"",subtitle:o.banner.subtitle||"",description:o.banner.description||"",background_image:null,content_image:null,order:o.banner.order||0,is_active:o.banner.is_active||!1}),n=c({}),g=c(!1),w=c(o.banner.background_image?`/storage/${o.banner.background_image}`:null),k=c(o.banner.content_image?`/storage/${o.banner.content_image}`:null);function j(s){const t=s.target.files[0];if(t){a.value.background_image=t;const r=new FileReader;r.onload=x=>{w.value=x.target.result},r.readAsDataURL(t)}}function N(s){const t=s.target.files[0];if(t){a.value.content_image=t;const r=new FileReader;r.onload=x=>{k.value=x.target.result},r.readAsDataURL(t)}}function P(){g.value=!0;const s=new FormData;s.append("title",a.value.title),s.append("subtitle",a.value.subtitle||""),s.append("description",a.value.description||""),s.append("order",a.value.order),s.append("is_active",a.value.is_active?1:0),s.append("_method","PUT"),a.value.background_image&&s.append("background_image",a.value.background_image),a.value.content_image&&s.append("content_image",a.value.content_image),M.post(`/web-profile/banners/${o.banner.id}`,s,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{V.fire("Berhasil!","Banner berhasil diperbarui.","success")},onError:t=>{n.value=t,g.value=!1,V.fire("Error!","Gagal memperbarui banner. Silakan periksa form yang diisi.","error")},onFinish:()=>{g.value=!1}})}function _(){M.visit("/web-profile/banners")}return(s,t)=>(b(),S(U,{title:"Edit Banner"},{default:B(()=>[e("div",F,[e("div",L,[e("h1",A,"Edit Banner: "+C(u.banner.title),1),e("button",{onClick:_,class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"},t[5]||(t[5]=[e("i",{class:"fa-solid fa-arrow-left mr-2"},null,-1),p(" Back ")]))]),t[12]||(t[12]=e("div",{class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6"},[e("h3",{class:"font-semibold text-yellow-800 mb-2"},[e("i",{class:"fa-solid fa-exclamation-triangle mr-2"}),p(" Image Requirements ")]),e("div",{class:"text-sm text-yellow-700 space-y-2"},[e("div",null,[e("strong",null,"Background Image:"),p(" Min 1920x1080px, Max 5MB, Formats: JPG/PNG/WEBP ")]),e("div",null,[e("strong",null,"Content Image:"),p(" Min 800x600px, Max 5MB, Formats: JPG/PNG/WEBP ")]),e("div",{class:"text-xs text-yellow-600 mt-2"}," * Leave empty to keep existing image ")])],-1)),e("div",G,[e("form",{onSubmit:D(P,["prevent"]),class:"space-y-6"},[e("div",null,[l(i,{for:"title",value:"Title *"}),l(y,{id:"title",modelValue:a.value.title,"onUpdate:modelValue":t[0]||(t[0]=r=>a.value.title=r),type:"text",class:d(["mt-1 block w-full",{"border-red-500":n.value.title}]),required:""},null,8,["modelValue","class"]),l(m,{message:n.value.title,class:"mt-2"},null,8,["message"])]),e("div",null,[l(i,{for:"subtitle",value:"Subtitle"}),l(y,{id:"subtitle",modelValue:a.value.subtitle,"onUpdate:modelValue":t[1]||(t[1]=r=>a.value.subtitle=r),type:"text",class:d(["mt-1 block w-full",{"border-red-500":n.value.subtitle}])},null,8,["modelValue","class"]),l(m,{message:n.value.subtitle,class:"mt-2"},null,8,["message"])]),e("div",null,[l(i,{for:"description",value:"Description"}),h(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=r=>a.value.description=r),rows:"3",class:d(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",{"border-red-500":n.value.description}])},null,2),[[E,a.value.description]]),l(m,{message:n.value.description,class:"mt-2"},null,8,["message"])]),e("div",null,[l(i,{for:"background_image",value:"Background Image"}),t[7]||(t[7]=e("p",{class:"text-xs text-gray-500 mb-2"},"Current image:",-1)),u.banner.background_image&&!a.value.background_image?(b(),v("img",{key:0,src:`/storage/${u.banner.background_image}`,alt:"Current background",class:"mb-2 max-w-full h-48 object-cover rounded-lg border border-gray-300"},null,8,R)):f("",!0),e("input",{id:"background_image",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:j,class:d(["mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",{"border-red-500":n.value.background_image}])},null,34),l(m,{message:n.value.background_image,class:"mt-2"},null,8,["message"]),t[8]||(t[8]=e("p",{class:"mt-1 text-xs text-gray-500"},"Leave empty to keep current image. Min: 1920x1080px, Max: 5MB",-1)),a.value.background_image?(b(),v("div",T,[t[6]||(t[6]=e("p",{class:"text-sm font-medium text-gray-700 mb-2"},"New preview:",-1)),e("img",{src:w.value,alt:"New background preview",class:"max-w-full h-48 object-cover rounded-lg border border-gray-300"},null,8,W)])):f("",!0)]),e("div",null,[l(i,{for:"content_image",value:"Content Image"}),t[10]||(t[10]=e("p",{class:"text-xs text-gray-500 mb-2"},"Current image:",-1)),u.banner.content_image&&!a.value.content_image?(b(),v("img",{key:0,src:`/storage/${u.banner.content_image}`,alt:"Current content",class:"mb-2 max-w-full h-48 object-cover rounded-lg border border-gray-300"},null,8,q)):f("",!0),e("input",{id:"content_image",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:N,class:d(["mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",{"border-red-500":n.value.content_image}])},null,34),l(m,{message:n.value.content_image,class:"mt-2"},null,8,["message"]),t[11]||(t[11]=e("p",{class:"mt-1 text-xs text-gray-500"},"Leave empty to keep current image. Min: 800x600px, Max: 5MB",-1)),a.value.content_image?(b(),v("div",J,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-gray-700 mb-2"},"New preview:",-1)),e("img",{src:k.value,alt:"New content preview",class:"max-w-full h-48 object-cover rounded-lg border border-gray-300"},null,8,O)])):f("",!0)]),e("div",null,[l(i,{for:"order",value:"Order"}),l(y,{id:"order",modelValue:a.value.order,"onUpdate:modelValue":t[3]||(t[3]=r=>a.value.order=r),modelModifiers:{number:!0},type:"number",class:d(["mt-1 block w-full",{"border-red-500":n.value.order}]),min:"0"},null,8,["modelValue","class"]),l(m,{message:n.value.order,class:"mt-2"},null,8,["message"])]),e("div",z,[h(e("input",{id:"is_active","onUpdate:modelValue":t[4]||(t[4]=r=>a.value.is_active=r),type:"checkbox",class:"rounded border-gray-300 text-blue-600 shadow-sm focus:ring-blue-500"},null,512),[[I,a.value.is_active]]),l(i,{for:"is_active",value:"Activate this banner",class:"ml-2"})]),e("div",H,[e("button",{type:"button",onClick:_,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"}," Cancel "),l($,{disabled:g.value},{default:B(()=>[p(C(g.value?"Saving...":"Save Changes"),1)]),_:1},8,["disabled"])])],32)])])]),_:1}))}};export{se as default};
