import{r as p,c as d,w as T,a as j,A as K,B as o,C as Q,D as e,L as r,E as O,H as f,J as q,F as _,M as h,N as l,I as S,G as M,l as W,W as G}from"./vendor-vue-g7iCcTkf.js";import{A as H}from"./AppLayout-BKllqouQ.js";import"./vendor-utils-CpgP2uT4.js";import"./app-DlrnVByK.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-10Z7fBeb.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const R={class:"max-w-7xl mx-auto py-8 px-4"},z={class:"mb-4"},J={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-4"},X={class:"flex flex-col"},Y=["disabled"],Z=["value"],$={class:"flex flex-col"},ee=["value"],te={class:"flex flex-col"},ae=["value"],se={class:"flex flex-col"},le=["value"],oe={class:"flex flex-col sm:flex-row sm:items-center gap-4 mb-4"},re={class:"flex items-center gap-2"},ie=["value"],ne=["disabled"],ue={key:0,class:"animate-spin mr-2"},de={key:1,class:"mr-2"},pe={key:0,class:"bg-red-50 border-l-4 border-red-400 text-red-800 p-4 rounded my-8 text-center font-semibold"},ce={key:1,class:"bg-blue-50 border-l-4 border-blue-400 text-blue-800 p-4 rounded my-8 text-center font-semibold"},xe={key:2,class:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 p-4 rounded my-8 text-center font-semibold"},me={key:3,class:"bg-white rounded-xl shadow-lg overflow-x-auto"},ge={class:"min-w-full divide-y divide-gray-200"},ye={class:"bg-white divide-y divide-gray-200"},be={key:0},ve={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},fe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-700"},_e={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-700"},he={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-700"},ke={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},we={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},Se={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm"},Le={class:"px-6 py-4 whitespace-nowrap text-sm"},Oe={class:"px-6 py-4 whitespace-nowrap text-sm"},De={class:"px-6 py-4 whitespace-nowrap text-sm"},Ve={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},Ne={key:0},Ae={class:"bg-gray-50 font-bold"},Me={class:"px-6 py-3 text-right"},Be={key:0,class:"flex justify-between items-center mt-4"},Te={class:"text-sm text-gray-600"},We={class:"flex gap-1"},Ie=["disabled"],Fe={class:"px-2"},Ue=["disabled"],Je={__name:"InventoryValueReport",props:{stocks:Array,outlets:Array,categories:Array,items:Array,warehouse_outlets:Array,user_outlet_id:[String,Number],error:String},setup(x){const i=x,k=p(""),m=p(25),n=p(1),u=p(""),g=p(""),y=p(""),c=p(""),w=p(!1),D=d(()=>String(i.user_outlet_id)==="1"),C=d(()=>u.value||c.value||g.value||y.value),b=d(()=>{let s=i.stocks;if(u.value&&(s=s.filter(a=>String(a.outlet_name)===String(u.value))),c.value&&(s=s.filter(a=>String(a.warehouse_outlet_id)===String(c.value))),g.value&&(s=s.filter(a=>a.category_name===g.value)),y.value&&(s=s.filter(a=>a.item_name===y.value)),!k.value)return s;const t=k.value.toLowerCase();return s.filter(a=>a.item_name&&a.item_name.toLowerCase().includes(t)||a.outlet_name&&a.outlet_name.toLowerCase().includes(t)||a.category_name&&a.category_name.toLowerCase().includes(t))}),I=d(()=>{let s=i.warehouse_outlets;if(!D.value&&i.user_outlet_id&&(s=s.filter(t=>String(t.outlet_id)===String(i.user_outlet_id))),u.value){const t=i.outlets.find(a=>a.name===u.value);t&&(s=s.filter(a=>String(a.outlet_id)===String(t.id)))}return s}),L=d(()=>Math.ceil(b.value.length/m.value)||1),V=d(()=>(n.value-1)*m.value),B=d(()=>Math.min(V.value+m.value,b.value.length)),N=d(()=>b.value.slice(V.value,B.value));function F(){n.value>1&&n.value--}function U(){n.value<L.value&&n.value++}T([m,k],()=>{n.value=1}),T(u,()=>{c.value=""});function A(s){return!s||Number(s)===0?"-":Number(s).toLocaleString("id-ID",{minimumFractionDigits:0,maximumFractionDigits:0})}function v(s){return!s||Number(s)===0?"-":Number(s).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2})}const E=d(()=>N.value.reduce((s,t)=>s+(Number(t.total_value)||0),0));function P(){if(!C.value){alert("Silakan pilih minimal satu filter terlebih dahulu!");return}w.value=!0;const s={outlet_id:u.value||"",warehouse_outlet_id:c.value||"",category_id:g.value||"",item_id:y.value||""};Object.keys(s).forEach(t=>{s[t]||delete s[t]}),G.get("/outlet-inventory/inventory-value-report",s,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{w.value=!1},onError:t=>{w.value=!1,console.error("Error loading data:",t)}})}return j(()=>{if(!D.value&&i.user_outlet_id){const s=i.outlets.find(t=>String(t.id)===String(i.user_outlet_id));s&&(u.value=s.name)}}),(s,t)=>(o(),K(H,null,{default:Q(()=>[e("div",R,[t[24]||(t[24]=e("h1",{class:"text-2xl font-bold mb-6"},"Laporan Nilai Persediaan Outlet",-1)),e("div",z,[f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>k.value=a),type:"text",placeholder:"Cari barang, outlet, kategori...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[q,k.value]])]),e("div",J,[e("div",X,[t[7]||(t[7]=e("label",{class:"text-sm font-medium text-gray-700 mb-1"},"Outlet",-1)),f(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>u.value=a),disabled:!D.value,class:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500"},[t[6]||(t[6]=e("option",{value:""},"Semua Outlet",-1)),(o(!0),r(_,null,h(x.outlets,a=>(o(),r("option",{key:a.id,value:a.name},l(a.name),9,Z))),128))],8,Y),[[S,u.value]])]),e("div",$,[t[9]||(t[9]=e("label",{class:"text-sm font-medium text-gray-700 mb-1"},"Warehouse Outlet",-1)),f(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>c.value=a),class:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500"},[t[8]||(t[8]=e("option",{value:""},"Semua Warehouse",-1)),(o(!0),r(_,null,h(I.value,a=>(o(),r("option",{key:a.id,value:a.id},l(a.name),9,ee))),128))],512),[[S,c.value]])]),e("div",te,[t[11]||(t[11]=e("label",{class:"text-sm font-medium text-gray-700 mb-1"},"Kategori",-1)),f(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>g.value=a),class:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500"},[t[10]||(t[10]=e("option",{value:""},"Semua Kategori",-1)),(o(!0),r(_,null,h(x.categories,a=>(o(),r("option",{key:a.id,value:a.name},l(a.name),9,ae))),128))],512),[[S,g.value]])]),e("div",se,[t[13]||(t[13]=e("label",{class:"text-sm font-medium text-gray-700 mb-1"},"Barang",-1)),f(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>y.value=a),class:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500"},[t[12]||(t[12]=e("option",{value:""},"Semua Barang",-1)),(o(!0),r(_,null,h(x.items,a=>(o(),r("option",{key:a.id,value:a.name},l(a.name),9,le))),128))],512),[[S,y.value]])])]),e("div",oe,[e("div",re,[t[14]||(t[14]=e("label",{class:"text-sm font-medium text-gray-700"},"Tampilkan",-1)),f(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>m.value=a),class:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500"},[(o(),r(_,null,h([10,25,50,100],a=>e("option",{key:a,value:a},l(a),9,ie)),64))],512),[[S,m.value]]),t[15]||(t[15]=e("span",{class:"text-sm text-gray-600"},"data",-1))]),e("button",{onClick:P,disabled:w.value,class:"inline-flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[w.value?(o(),r("span",ue,t[16]||(t[16]=[e("i",{class:"fas fa-spinner"},null,-1)]))):(o(),r("span",de,t[17]||(t[17]=[e("i",{class:"fas fa-sync-alt"},null,-1)]))),t[18]||(t[18]=M(" Load Data "))],8,ne)]),i.error?(o(),r("div",pe,l(i.error),1)):C.value?C.value&&x.stocks.length===0?(o(),r("div",xe,t[20]||(t[20]=[e("i",{class:"fas fa-exclamation-triangle mr-2"},null,-1),M(" Tidak ada data persediaan untuk filter yang dipilih. Coba ubah filter atau pilih kombinasi filter yang berbeda. ")]))):C.value&&x.stocks.length>0?(o(),r("div",me,[e("table",ge,[t[23]||(t[23]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Barang"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Outlet"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Warehouse Outlet"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Kategori"),e("th",{class:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Qty Small"),e("th",{class:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Qty Medium"),e("th",{class:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Qty Large"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Last Cost Small"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"MAC"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Last Cost Medium"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Last Cost Large"),e("th",{class:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Total Value")])],-1)),e("tbody",ye,[b.value.length?O("",!0):(o(),r("tr",be,t[21]||(t[21]=[e("td",{colspan:"11",class:"text-center py-10 text-gray-400"},"Tidak ada data persediaan.",-1)]))),(o(!0),r(_,null,h(N.value,a=>(o(),r("tr",{key:a.item_name+a.outlet_name,class:"hover:bg-gray-50 transition"},[e("td",ve,l(a.item_name),1),e("td",fe,l(a.outlet_name),1),e("td",_e,l(a.warehouse_outlet_name||"-"),1),e("td",he,l(a.category_name||"-"),1),e("td",ke,l(A(a.qty_small)),1),e("td",we,l(A(a.qty_medium)),1),e("td",Se,l(A(a.qty_large)),1),e("td",Ce,l(v(a.last_cost_small)),1),e("td",Le,l(v(a.mac)),1),e("td",Oe,l(v(a.last_cost_medium)),1),e("td",De,l(v(a.last_cost_large)),1),e("td",Ve,l(v(a.total_value)),1)]))),128))]),N.value.length?(o(),r("tfoot",Ne,[e("tr",Ae,[t[22]||(t[22]=e("td",{colspan:"10",class:"text-right px-6 py-3"},"Grand Total",-1)),e("td",Me,l(v(E.value)),1)])])):O("",!0)]),b.value.length?(o(),r("div",Be,[e("div",Te," Menampilkan "+l(V.value+1)+" - "+l(B.value)+" dari "+l(b.value.length)+" data ",1),e("div",We,[e("button",{onClick:F,disabled:n.value===1,class:W(["px-3 py-1 rounded border text-sm",n.value===1?"bg-gray-200 text-gray-400":"bg-white text-blue-700 hover:bg-blue-50"])},"<",10,Ie),e("span",Fe,"Halaman "+l(n.value)+" / "+l(L.value),1),e("button",{onClick:U,disabled:n.value===L.value,class:W(["px-3 py-1 rounded border text-sm",n.value===L.value?"bg-gray-200 text-gray-400":"bg-white text-blue-700 hover:bg-blue-50"])},">",10,Ue)])])):O("",!0)])):O("",!0):(o(),r("div",ce,t[19]||(t[19]=[e("i",{class:"fas fa-info-circle mr-2"},null,-1),M(' Silakan pilih minimal satu filter (Outlet, Warehouse Outlet, Kategori, atau Barang), kemudian klik tombol "Load Data" untuk melihat laporan nilai persediaan. ')])))])]),_:1}))}};export{Je as default};
