import{r as w,c as y,A as D,B as o,C as E,D as e,E as f,x as ve,Q as be,S as he,G as J,L as i,N as r,F as m,M as _,l as b,O as S,W as H}from"./vendor-vue-g7iCcTkf.js";import{A as pe}from"./AppLayout-DZJ25Yod.js";import fe from"./TrainingDetailModal-DfRU62Ic.js";import ge from"./QuickScheduleModal-Bo7LUjSF.js";import xe from"./InvitationModal-BRWc7nTE.js";import me from"./TrainerInvitationModal-DwdTlwOD.js";import ye from"./QRCodeModal-Bn5kZ7Hm.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./app-BujIObx9.js";import"./vendor-charts-CuqD4wLC.js";import"./ProfileUpdateModal-DNpNU_ax.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./browser-CCaIc0XY.js";import"./vue-multiselect.esm-V-bx43V9.js";/* empty css                            */const _e={class:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 relative overflow-hidden"},ke={class:"relative z-10 py-8 px-6"},De={class:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl p-6 mb-6"},Ce={class:"flex items-center justify-between"},Se={class:"flex items-center space-x-4"},$e={class:"flex items-center space-x-4"},Me={class:"flex items-center space-x-2"},Te={class:"text-xl font-bold text-white px-4"},je={class:"flex bg-white/10 rounded-lg p-1"},Ae=["onClick"],Fe={class:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl p-6"},Ye={class:"grid grid-cols-7 gap-2 mb-4"},Ie={class:"grid grid-cols-7 gap-2"},Le=["onClick"],Ne={class:"text-right mb-2 relative"},Be={key:0,class:"absolute -top-1 -right-1"},He=["title"],Qe={class:"space-y-1"},We=["onClick"],Pe={class:"flex items-center justify-between"},Ke={class:"flex items-center space-x-2"},Re={class:"truncate"},Ve={class:"flex items-center space-x-1"},Ee={class:"text-xs opacity-75"},Je=["onClick"],Oe={class:"text-xs opacity-75 mt-1"},ze={class:"grid grid-cols-7 gap-2 mb-4"},qe={class:"grid grid-cols-7 gap-2"},Ge={class:"flex items-center justify-between mb-2"},Ue={class:"text-sm font-semibold text-white"},Xe={class:"space-y-1"},Ze=["onClick"],et={class:"flex items-center justify-between"},tt={class:"flex items-center space-x-2"},st={class:"truncate"},at={class:"text-xs opacity-75"},lt={class:"text-xs opacity-75 mt-1"},ot={class:"text-white/80 mb-3"},nt={class:"space-y-2"},rt=["onClick"],it={class:"flex items-center justify-between"},dt={class:"flex items-center space-x-2"},ut={class:"truncate"},ct={class:"text-xs opacity-75"},vt={class:"text-xs opacity-75 mt-1"},bt={key:0,class:"text-white/60"},ht={key:3,class:"space-y-2"},pt=["onClick"],ft={class:"flex items-center justify-between"},gt={class:"flex items-center space-x-3"},xt={class:"text-xs opacity-75"},mt={class:"flex items-center space-x-2"},yt={class:"truncate"},wt={class:"text-xs opacity-75"},_t={key:0,class:"text-white/60"},kt={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6"},Dt={class:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl p-4"},Ct={class:"flex items-center space-x-3"},St={class:"text-2xl font-bold text-white"},$t={class:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl p-4"},Mt={class:"flex items-center space-x-3"},Tt={class:"text-2xl font-bold text-white"},jt={class:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl p-4"},At={class:"flex items-center space-x-3"},Ft={class:"text-2xl font-bold text-white"},Yt={class:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl p-4"},It={class:"flex items-center space-x-3"},Lt={class:"text-2xl font-bold text-white"},Nt={__name:"Index",props:{schedules:Array,canCreateSchedule:Boolean,currentMonth:Number,currentYear:Number,availableParticipants:Array,availableTrainers:Array,divisions:Array,jabatans:Array,levels:Array,courses:Array,outlets:Array,holidays:Array},setup(h){const g=h,u=w("Month"),p=w(new Date(g.currentYear,g.currentMonth-1,1)),k=w(null),$=w(!1),F=w(!1),Y=w(!1),I=w(!1),Q=w(null),v=w(""),O=["Month","Week","Day","List"],W=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],P=y(()=>p.value.toLocaleDateString("id-ID",{month:"long",year:"numeric"})),z=y(()=>{var s,t;if(u.value==="Month")return P.value;if(u.value==="Week"){const n=K.value;return`${N((s=n[0])==null?void 0:s.date)} – ${N((t=n[6])==null?void 0:t.date)}`}return u.value==="Day"?N(v.value||L.value):`${P.value}`}),q=y(()=>{const s=p.value.getFullYear(),t=p.value.getMonth(),n=new Date(s,t,1),d=new Date(n);d.setDate(d.getDate()-n.getDay());const a=[],l=new Date(d);for(;l.getMonth()<=t&&a.length<42;){const c=l.getFullYear(),x=String(l.getMonth()+1).padStart(2,"0"),C=String(l.getDate()).padStart(2,"0");a.push({date:`${c}-${x}-${C}`,dayNumber:l.getDate(),isCurrentMonth:l.getMonth()===t,isToday:l.toDateString()===new Date().toDateString(),isPast:l<new Date(new Date().setHours(0,0,0,0)),isHoliday:G(`${c}-${x}-${C}`)}),l.setDate(l.getDate()+1)}return a}),L=y(()=>{const s=new Date,t=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),d=String(s.getDate()).padStart(2,"0");return`${t}-${n}-${d}`}),K=y(()=>{const s=v.value?new Date(v.value):new Date,t=new Date(s);t.setDate(t.getDate()-t.getDay());const n=[];for(let d=0;d<7;d++){const a=new Date(t);a.setDate(t.getDate()+d);const l=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),x=String(a.getDate()).padStart(2,"0");n.push({date:`${l}-${c}-${x}`,dayNumber:a.getDate()})}return n}),R=y(()=>[...g.schedules].sort((s,t)=>{const n=`${s.scheduled_date} ${s.start_time}`,d=`${t.scheduled_date} ${t.start_time}`;return n.localeCompare(d)})),G=s=>g.holidays.some(t=>t.date===s),U=s=>{const t=g.holidays.find(n=>n.date===s);return t?t.description:null},N=s=>{if(!s)return"";const[t,n,d]=s.split("-");return`${d}/${n}/${t}`},X=y(()=>g.schedules.length),Z=y(()=>g.schedules.filter(s=>s.status==="ongoing").length),ee=y(()=>g.schedules.filter(s=>s.status==="completed").length),te=y(()=>Array.isArray(g.schedules)?g.schedules.reduce((s,t)=>{const n=typeof t.participant_count=="number"?t.participant_count:Array.isArray(t.invitations)?t.invitations.length:0;return s+(Number.isFinite(n)?n:0)},0):0),se=s=>{const t=["border border-white/10"];return s.isHoliday?t.push("bg-red-500/20 border-red-500/30"):s.isToday?t.push("bg-blue-500/20 border-blue-500/30"):s.isCurrentMonth&&t.push("bg-white/5"),s.isCurrentMonth||t.push("opacity-50"),t.join(" ")},ae=s=>{const t=[];return s.isHoliday?t.push("text-red-300 font-bold"):s.isToday?t.push("text-blue-300 font-bold"):s.isCurrentMonth?t.push("text-white"):t.push("text-white/50"),t.join(" ")},M=s=>{const t={draft:"bg-gray-500/20 border-gray-500/30",published:"bg-blue-500/20 border-blue-500/30",ongoing:"bg-green-500/20 border-green-500/30",completed:"bg-purple-500/20 border-purple-500/30",cancelled:"bg-red-500/20 border-red-500/30"};return t[s]||t.draft},T=s=>typeof s.participant_count=="number"?s.participant_count:Array.isArray(s.invitations)?s.invitations.length:0,j=s=>(console.log("Looking for trainings on date:",s),console.log("Available schedules:",g.schedules),g.schedules.filter(t=>{const n=t.scheduled_date?t.scheduled_date.split("T")[0]:null;if(console.log("Schedule date (formatted):",n,"Looking for:",s,"Match:",n===s),n){const d=new Date(n),a=new Date(s),l=d.getMonth()===a.getMonth(),c=d.getFullYear()===a.getFullYear();console.log("Same month:",l,"Same year:",c)}return n===s})),le=s=>{s.isCurrentMonth&&(v.value=s.date,$.value=!0)},A=s=>{k.value=s},oe=()=>{v.value="",$.value=!0},ne=()=>{$.value=!1,v.value=""},re=()=>{if(u.value==="Month"||u.value==="List")p.value=new Date(p.value.getFullYear(),p.value.getMonth()-1,1),H.get(route("lms.schedules.index"),{year:p.value.getFullYear(),month:p.value.getMonth()+1});else if(u.value==="Week"||u.value==="Day"){const s=v.value?new Date(v.value):new Date;s.setDate(s.getDate()-(u.value==="Day"?1:7));const t=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),d=String(s.getDate()).padStart(2,"0");v.value=`${t}-${n}-${d}`}},ie=()=>{if(u.value==="Month"||u.value==="List")p.value=new Date(p.value.getFullYear(),p.value.getMonth()+1,1),H.get(route("lms.schedules.index"),{year:p.value.getFullYear(),month:p.value.getMonth()+1});else if(u.value==="Week"||u.value==="Day"){const s=v.value?new Date(v.value):new Date;s.setDate(s.getDate()+(u.value==="Day"?1:7));const t=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),d=String(s.getDate()).padStart(2,"0");v.value=`${t}-${n}-${d}`}},de=s=>{H.visit(route("lms.schedules.edit",s.id))},ue=s=>{F.value=!0},ce=s=>{Y.value=!0},V=s=>{Q.value=s,I.value=!0},B=()=>{setTimeout(()=>{window.location.reload()},100)};return(s,t)=>(o(),D(pe,null,{default:E(()=>{var n,d;return[e("div",_e,[t[19]||(t[19]=e("div",{class:"absolute inset-0 overflow-hidden"},[e("div",{class:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"}),e("div",{class:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),e("div",{class:"absolute top-40 left-40 w-80 h-80 bg-pink-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"})],-1)),e("div",ke,[e("div",De,[e("div",Ce,[e("div",Se,[ve(be(he),{href:s.route("lms.courses.index"),class:"px-4 py-2 bg-white/20 backdrop-blur-sm border border-white/30 rounded-xl text-white font-semibold hover:bg-white/30 transition-all duration-300 transform hover:scale-105"},{default:E(()=>t[4]||(t[4]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),J(" Kembali ke Training ")])),_:1},8,["href"]),t[5]||(t[5]=e("h1",{class:"text-3xl font-bold text-white"},"Jadwal Training",-1))]),e("div",$e,[e("div",Me,[e("button",{onClick:re,class:"p-2 bg-white/20 rounded-lg hover:bg-white/30 transition-all"},t[6]||(t[6]=[e("i",{class:"fas fa-chevron-left text-white"},null,-1)])),e("span",Te,r(z.value),1),e("button",{onClick:ie,class:"p-2 bg-white/20 rounded-lg hover:bg-white/30 transition-all"},t[7]||(t[7]=[e("i",{class:"fas fa-chevron-right text-white"},null,-1)]))]),e("div",je,[(o(),i(m,null,_(O,a=>e("button",{key:a,onClick:l=>u.value=a,class:b([u.value===a?"bg-white/20 text-white":"text-white/70","px-3 py-1 rounded-md transition-all"])},r(a),11,Ae)),64))]),h.canCreateSchedule?(o(),i("button",{key:0,onClick:oe,class:"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl font-semibold hover:from-green-600 hover:to-green-700 transition-all"},t[8]||(t[8]=[e("i",{class:"fas fa-plus mr-2"},null,-1),J(" Jadwalkan Training ")]))):f("",!0)])])]),e("div",Fe,[u.value==="Month"?(o(),i(m,{key:0},[e("div",Ye,[(o(),i(m,null,_(W,a=>e("div",{key:a,class:"text-center text-white/70 font-semibold py-2"},r(a),1)),64))]),e("div",Ie,[(o(!0),i(m,null,_(q.value,a=>(o(),i("div",{key:a.date,onClick:l=>le(a),class:b([se(a),"min-h-32 p-2 rounded-lg cursor-pointer transition-all hover:bg-white/10"])},[e("div",Ne,[e("span",{class:b([ae(a),"text-sm font-semibold"])},r(a.dayNumber),3),a.isHoliday?(o(),i("div",Be,[e("i",{class:"fas fa-calendar-times text-red-400 text-xs",title:U(a.date)},null,8,He)])):f("",!0)]),e("div",Qe,[(o(!0),i(m,null,_(j(a.date),l=>{var c,x;return o(),i("div",{key:l.id,onClick:S(C=>A(l),["stop"]),class:b([M(l.status),"px-2 py-1 rounded text-xs text-white font-medium truncate hover:bg-white/20 transition-all"])},[e("div",Pe,[e("div",Ke,[e("span",Re,r(((c=l.course)==null?void 0:c.title)||"Training"),1),(x=l.course)!=null&&x.type?(o(),i("span",{key:0,class:b({"px-1 py-0.5 text-xs rounded-full":!0,"bg-blue-500/20 text-blue-200 border border-blue-500/30":l.course.type==="online","bg-green-500/20 text-green-200 border border-green-500/30":l.course.type==="offline"})},[e("i",{class:b({"fas fa-video":l.course.type==="online","fas fa-users":l.course.type==="offline"})},null,2)],2)):f("",!0)]),e("div",Ve,[e("span",Ee,r(T(l))+" peserta",1),e("button",{onClick:S(C=>V(l),["stop"]),class:"text-xs opacity-75 hover:opacity-100 transition-opacity",title:"Lihat QR Code"},t[9]||(t[9]=[e("i",{class:"fas fa-qrcode"},null,-1)]),8,Je)])]),e("div",Oe,r(l.start_time)+" - "+r(l.end_time),1)],10,We)}),128))])],10,Le))),128))])],64)):u.value==="Week"?(o(),i(m,{key:1},[e("div",ze,[(o(),i(m,null,_(W,a=>e("div",{key:a,class:"text-center text-white/70 font-semibold py-2"},r(a),1)),64))]),e("div",qe,[(o(!0),i(m,null,_(K.value,a=>(o(),i("div",{key:a.date,class:"min-h-32 p-2 rounded-lg bg-white/5 border border-white/10"},[e("div",Ge,[e("span",Ue,r(a.dayNumber),1)]),e("div",Xe,[(o(!0),i(m,null,_(j(a.date),l=>{var c,x;return o(),i("div",{key:l.id,onClick:S(C=>A(l),["stop"]),class:b([M(l.status),"px-2 py-1 rounded text-xs text-white font-medium truncate hover:bg-white/20 transition-all"])},[e("div",et,[e("div",tt,[e("span",st,r(((c=l.course)==null?void 0:c.title)||"Training"),1),(x=l.course)!=null&&x.type?(o(),i("span",{key:0,class:b({"px-1 py-0.5 text-xs rounded-full":!0,"bg-blue-500/20 text-blue-200 border border-blue-500/30":l.course.type==="online","bg-green-500/20 text-green-200 border border-green-500/30":l.course.type==="offline"})},[e("i",{class:b({"fas fa-video":l.course.type==="online","fas fa-users":l.course.type==="offline"})},null,2)],2)):f("",!0)]),e("span",at,r(T(l))+" peserta",1)]),e("div",lt,r(l.start_time)+" - "+r(l.end_time),1)],10,Ze)}),128))])]))),128))])],64)):u.value==="Day"?(o(),i(m,{key:2},[e("div",ot,r(s.selectedDateLabel),1),e("div",nt,[(o(!0),i(m,null,_(j(v.value||L.value),a=>{var l,c;return o(),i("div",{key:a.id,onClick:S(x=>A(a),["stop"]),class:b([M(a.status),"px-3 py-2 rounded text-sm text-white font-medium hover:bg-white/20 transition-all border border-white/10"])},[e("div",it,[e("div",dt,[e("span",ut,r(((l=a.course)==null?void 0:l.title)||"Training"),1),(c=a.course)!=null&&c.type?(o(),i("span",{key:0,class:b({"px-1 py-0.5 text-xs rounded-full":!0,"bg-blue-500/20 text-blue-200 border border-blue-500/30":a.course.type==="online","bg-green-500/20 text-green-200 border border-green-500/30":a.course.type==="offline"})},[e("i",{class:b({"fas fa-video":a.course.type==="online","fas fa-users":a.course.type==="offline"})},null,2)],2)):f("",!0)]),e("span",ct,r(T(a))+" peserta",1)]),e("div",vt,r(a.start_time)+" - "+r(a.end_time),1)],10,rt)}),128)),j(v.value||L.value).length===0?(o(),i("div",bt,"Tidak ada training.")):f("",!0)])],64)):(o(),i("div",ht,[(o(!0),i(m,null,_(R.value,a=>{var l,c;return o(),i("div",{key:a.id,onClick:S(x=>A(a),["stop"]),class:b([M(a.status),"px-3 py-2 rounded text-sm text-white font-medium hover:bg-white/20 transition-all border border-white/10"])},[e("div",ft,[e("div",gt,[e("span",xt,r(a.scheduled_date),1),e("div",mt,[e("span",yt,r(((l=a.course)==null?void 0:l.title)||"Training"),1),(c=a.course)!=null&&c.type?(o(),i("span",{key:0,class:b({"px-1 py-0.5 text-xs rounded-full":!0,"bg-blue-500/20 text-blue-200 border border-blue-500/30":a.course.type==="online","bg-green-500/20 text-green-200 border border-green-500/30":a.course.type==="offline"})},[e("i",{class:b({"fas fa-video":a.course.type==="online","fas fa-users":a.course.type==="offline"})},null,2)],2)):f("",!0)])]),e("span",wt,r(T(a))+" peserta • "+r(a.start_time)+" - "+r(a.end_time),1)])],10,pt)}),128)),R.value.length===0?(o(),i("div",_t,"Belum ada training.")):f("",!0)]))]),e("div",kt,[e("div",Dt,[e("div",Ct,[t[11]||(t[11]=e("div",{class:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center"},[e("i",{class:"fas fa-calendar text-blue-400"})],-1)),e("div",null,[e("div",St,r(X.value),1),t[10]||(t[10]=e("div",{class:"text-sm text-white/70"},"Total Training",-1))])])]),e("div",$t,[e("div",Mt,[t[13]||(t[13]=e("div",{class:"w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center"},[e("i",{class:"fas fa-play text-green-400"})],-1)),e("div",null,[e("div",Tt,r(Z.value),1),t[12]||(t[12]=e("div",{class:"text-sm text-white/70"},"Sedang Berlangsung",-1))])])]),e("div",jt,[e("div",At,[t[15]||(t[15]=e("div",{class:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center"},[e("i",{class:"fas fa-check text-purple-400"})],-1)),e("div",null,[e("div",Ft,r(ee.value),1),t[14]||(t[14]=e("div",{class:"text-sm text-white/70"},"Selesai",-1))])])]),e("div",Yt,[e("div",It,[t[17]||(t[17]=e("div",{class:"w-10 h-10 bg-yellow-500/20 rounded-lg flex items-center justify-center"},[e("i",{class:"fas fa-users text-yellow-400"})],-1)),e("div",null,[e("div",Lt,r(te.value),1),t[16]||(t[16]=e("div",{class:"text-sm text-white/70"},"Total Peserta",-1))])])])]),t[18]||(t[18]=e("div",{class:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl p-4 mt-6"},[e("h3",{class:"text-white font-medium mb-3"},"Keterangan Kalender"),e("div",{class:"flex flex-wrap items-center gap-6"},[e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-4 h-4 bg-blue-500/20 border border-blue-500/30 rounded"}),e("span",{class:"text-white/70 text-sm"},"Hari Ini")]),e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-4 h-4 bg-red-500/20 border border-red-500/30 rounded"}),e("span",{class:"text-white/70 text-sm"},"Hari Libur")]),e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-calendar-times text-red-400 text-sm"}),e("span",{class:"text-white/70 text-sm"},"Indikator Libur (hover untuk detail)")]),e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-4 h-4 bg-green-500/20 border border-green-500/30 rounded"}),e("span",{class:"text-white/70 text-sm"},"Training Sedang Berlangsung")])])],-1))]),k.value?(o(),D(fe,{key:0,training:k.value,"available-participants":h.availableParticipants,divisions:h.divisions,jabatans:h.jabatans,levels:h.levels,"can-invite":!0,"can-edit":!0,onClose:t[0]||(t[0]=a=>k.value=null),onEdit:de,onInvite:ue,onInviteTrainer:ce,onQrCode:V},null,8,["training","available-participants","divisions","jabatans","levels"])):f("",!0),F.value?(o(),D(xe,{key:1,training:k.value,divisions:h.divisions,jabatans:h.jabatans,levels:h.levels,"invited-participants":((n=k.value)==null?void 0:n.invitations)||[],onClose:t[1]||(t[1]=a=>F.value=!1),onInvited:B},null,8,["training","divisions","jabatans","levels","invited-participants"])):f("",!0),Y.value?(o(),D(me,{key:2,training:k.value,"available-trainers":h.availableTrainers,divisions:h.divisions,jabatans:h.jabatans,"invited-trainers":((d=k.value)==null?void 0:d.scheduleTrainers)||[],onClose:t[2]||(t[2]=a=>Y.value=!1),onInvited:B},null,8,["training","available-trainers","divisions","jabatans","invited-trainers"])):f("",!0),$.value?(o(),D(ge,{key:3,courses:h.courses,outlets:h.outlets,"selected-date":v.value,onClose:ne,onCreated:B},null,8,["courses","outlets","selected-date"])):f("",!0),I.value?(o(),D(ye,{key:4,training:Q.value,onClose:t[3]||(t[3]=a=>I.value=!1)},null,8,["training"])):f("",!0)])]}),_:1}))}},ts=we(Nt,[["__scopeId","data-v-f76cd116"]]);export{ts as default};
