import{a as N}from"./vendor-utils-CpgP2uT4.js";import{m as z}from"./vendor-charts-CuqD4wLC.js";import{r as _,w as F,c as u,a8 as M,L as n,E as O,B as c,D as e,l as v,N as l,x as A,F as E,M as P}from"./vendor-vue-g7iCcTkf.js";const V={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},H={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},G={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-6xl sm:w-full"},q={class:"bg-white px-6 py-4 border-b border-gray-200"},J={class:"flex items-center justify-between"},K={class:"flex items-center space-x-3"},Q={class:"text-2xl"},U={class:"text-lg font-semibold text-gray-900"},X={class:"text-sm text-gray-600"},Y={class:"bg-white px-6 py-4"},Z={key:0,class:"text-center py-8"},$={key:1,class:"text-center py-8"},ee={class:"text-red-600"},te={key:2,class:"space-y-6"},se={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ae={class:"flex items-center justify-between"},le={class:"text-2xl font-bold text-gray-900"},oe={class:"p-4 rounded-lg border border-gray-200 bg-gray-50"},re={class:"flex items-center justify-between"},de={class:"text-2xl font-bold text-gray-900"},ie={class:"p-4 rounded-lg border border-gray-200 bg-gray-50"},ne={class:"flex items-center justify-between"},ce={class:"text-2xl font-bold text-gray-900"},ue={class:"p-4 rounded-lg border border-gray-200 bg-gray-50"},ye={class:"flex items-center justify-between"},xe={class:"text-2xl font-bold text-gray-900"},ge={key:0,class:"bg-white border border-gray-200 rounded-lg p-6"},pe={class:"text-lg font-semibold text-gray-900 mb-4"},me={class:"h-64"},ve={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},fe={class:"px-6 py-4 border-b border-gray-200"},be={class:"text-lg font-semibold text-gray-900"},he={class:"text-sm text-gray-600"},_e={class:"overflow-x-auto"},we={class:"min-w-full divide-y divide-gray-200"},ke={class:"bg-white divide-y divide-gray-200"},De={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Fe={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600"},Oe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},We={key:3,class:"text-center py-8"},Ie={class:"text-gray-600"},Se={components:{apexchart:z}},Le=Object.assign(Se,{__name:"OutletWeekendWeekdayModal",props:{isOpen:Boolean,selectedOutlet:Object,selectedRegion:String,selectedDayType:String,dateFrom:String,dateTo:String},emits:["close"],setup(d,{emit:W}){const s=d,I=W,f=_(!1),o=_(null),g=_(null);F(()=>[s.selectedOutlet,s.selectedDayType,s.dateFrom,s.dateTo],([a,t,r,i])=>{a&&t&&r&&i&&s.isOpen&&w(a.outlet_code,t,r,i)},{immediate:!0}),F(()=>s.isOpen,a=>{a&&s.selectedOutlet&&s.selectedDayType&&s.dateFrom&&s.dateTo?w(s.selectedOutlet.outlet_code,s.selectedDayType,s.dateFrom,s.dateTo):a||(o.value=null,g.value=null)});async function w(a,t,r,i){if(!(!a||!t||!r||!i)){f.value=!0,g.value=null;try{const y=await N.get("/sales-outlet-dashboard/outlet-weekend-weekday-detail",{params:{outlet_code:a,day_type:t,date_from:r,date_to:i}});o.value=y.data}catch(y){console.error("Error fetching weekend/weekday data:",y),g.value="Gagal memuat data weekend/weekday",o.value=null}finally{f.value=!1}}}function b(){I("close")}function p(a){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(a)}function m(a){return new Intl.NumberFormat("id-ID").format(a)}const S=u(()=>(s.selectedDayType==="Weekend","ðŸ“…")),k=u(()=>s.selectedDayType==="Weekend"?"purple":"blue"),h=u(()=>s.selectedDayType==="Weekend"?"bg-purple-50":"bg-blue-50"),B=u(()=>s.selectedDayType==="Weekend"?"text-purple-800":"text-blue-800"),R=u(()=>s.selectedDayType==="Weekend"?"border-purple-200":"border-blue-200"),j=u(()=>{var a;return(a=o.value)!=null&&a.daily_data?[{name:"Revenue",data:o.value.daily_data.map(t=>t.revenue)}]:[]}),L=u(()=>{var a,t;return{chart:{type:"line",height:300,toolbar:{show:!0},animations:{enabled:!0,easing:"easeinout",speed:800}},stroke:{width:3,curve:"smooth"},markers:{size:5,colors:["#fff"],strokeColors:[k.value==="purple"?"#8B5CF6":"#3B82F6"],strokeWidth:3,hover:{size:8}},xaxis:{categories:((t=(a=o.value)==null?void 0:a.daily_data)==null?void 0:t.map(r=>new Date(r.date).toLocaleDateString("id-ID",{day:"2-digit",month:"short"})))||[],title:{text:"Tanggal"},labels:{style:{fontWeight:600},rotate:-45}},yaxis:{title:{text:"Revenue (Rp)"},labels:{style:{fontWeight:600},formatter:function(r){return"Rp "+r.toLocaleString("id-ID")}}},colors:[k.value==="purple"?"#8B5CF6":"#3B82F6"],grid:{borderColor:"#e5e7eb",strokeDashArray:4},tooltip:{y:{formatter:function(r){return"Rp "+r.toLocaleString("id-ID")}}},dataLabels:{enabled:!1}}});return(a,t)=>{var i,y,D,T,C;const r=M("apexchart");return d.isOpen?(c(),n("div",V,[e("div",H,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:b}),e("div",G,[e("div",q,[e("div",J,[e("div",K,[e("div",{class:v(["p-2 rounded-lg",h.value])},[e("span",Q,l(S.value),1)],2),e("div",null,[e("h3",U," Detail "+l(d.selectedDayType)+" - "+l((i=d.selectedOutlet)==null?void 0:i.outlet_name),1),e("p",X,l(d.selectedRegion),1)])]),e("button",{onClick:b,class:"text-gray-400 hover:text-gray-600 transition-colors"},t[0]||(t[0]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))])]),e("div",Y,[f.value?(c(),n("div",Z,t[1]||(t[1]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Memuat data...",-1)]))):g.value?(c(),n("div",$,[t[2]||(t[2]=e("div",{class:"text-red-500 text-4xl mb-2"},[e("i",{class:"fa-solid fa-exclamation-triangle"})],-1)),e("p",ee,l(g.value),1)])):o.value?(c(),n("div",te,[e("div",se,[e("div",{class:v(["p-4 rounded-lg border-2",R.value,h.value])},[e("div",ae,[e("div",null,[e("p",{class:v(["text-sm font-medium",B.value])},"Total Revenue",2),e("p",le,l(p(((y=o.value.summary)==null?void 0:y.total_revenue)||0)),1)]),e("div",{class:v(["p-2 rounded-lg",h.value])},t[3]||(t[3]=[e("i",{class:"fa-solid fa-money-bill-wave text-xl text-gray-600"},null,-1)]),2)])],2),e("div",oe,[e("div",re,[e("div",null,[t[4]||(t[4]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Orders",-1)),e("p",de,l(m(((D=o.value.summary)==null?void 0:D.total_orders)||0)),1)]),t[5]||(t[5]=e("div",{class:"p-2 rounded-lg bg-gray-100"},[e("i",{class:"fa-solid fa-receipt text-xl text-gray-600"})],-1))])]),e("div",ie,[e("div",ne,[e("div",null,[t[6]||(t[6]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Pax",-1)),e("p",ce,l(m(((T=o.value.summary)==null?void 0:T.total_pax)||0)),1)]),t[7]||(t[7]=e("div",{class:"p-2 rounded-lg bg-gray-100"},[e("i",{class:"fa-solid fa-users text-xl text-gray-600"})],-1))])]),e("div",ue,[e("div",ye,[e("div",null,[t[8]||(t[8]=e("p",{class:"text-sm font-medium text-gray-600"},"Avg Check",-1)),e("p",xe,l(p(((C=o.value.summary)==null?void 0:C.avg_check)||0)),1)]),t[9]||(t[9]=e("div",{class:"p-2 rounded-lg bg-gray-100"},[e("i",{class:"fa-solid fa-calculator text-xl text-gray-600"})],-1))])])]),o.value.daily_data&&o.value.daily_data.length>0?(c(),n("div",ge,[e("h4",pe," Trend Revenue "+l(d.selectedDayType)+" Harian ",1),e("div",me,[A(r,{type:"line",height:"300",options:L.value,series:j.value},null,8,["options","series"])])])):O("",!0),e("div",ve,[e("div",fe,[e("h4",be," Data Harian "+l(d.selectedDayType),1),e("p",he," Periode: "+l(new Date(d.dateFrom).toLocaleDateString("id-ID"))+" - "+l(new Date(d.dateTo).toLocaleDateString("id-ID")),1)]),e("div",_e,[e("table",we,[t[10]||(t[10]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tanggal "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Orders "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Pax "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Revenue "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Avg Check ")])],-1)),e("tbody",ke,[(c(!0),n(E,null,P(o.value.daily_data,x=>(c(),n("tr",{key:x.date,class:"hover:bg-gray-50"},[e("td",De,l(new Date(x.date).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})),1),e("td",Te,l(m(x.orders)),1),e("td",Ce,l(m(x.pax)),1),e("td",Fe,l(p(x.revenue)),1),e("td",Oe,l(p(x.avg_check)),1)]))),128))])])])])])):(c(),n("div",We,[t[11]||(t[11]=e("div",{class:"text-gray-400 text-4xl mb-2"},[e("i",{class:"fa-solid fa-chart-bar"})],-1)),e("p",Ie,"Tidak ada data "+l(d.selectedDayType)+" untuk outlet ini",1)]))]),e("div",{class:"bg-gray-50 px-6 py-3 border-t border-gray-200"},[e("div",{class:"flex justify-end"},[e("button",{onClick:b,class:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors"}," Tutup ")])])])])])):O("",!0)}}});export{Le as default};
