import{r as p,A as j,B as i,C as F,D as e,L as n,E as m,G as u,O as I,H as _,J as k,F as v,M as N,N as r,l as P,W as c}from"./vendor-vue-g7iCcTkf.js";import{A as U}from"./AppLayout-CSX-_rnh.js";import{S as w}from"./app-DcTypqnW.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-B1e0pQ9F.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const W={class:"max-w-7xl mx-auto py-8 px-2"},H={class:"bg-white rounded-xl shadow-lg overflow-hidden"},Y={class:"overflow-x-auto"},z={class:"min-w-full divide-y divide-gray-200"},J={class:"bg-white divide-y divide-gray-200"},q={key:0},K={class:"px-6 py-3"},Q={class:"px-6 py-3"},X={class:"px-6 py-3"},Z={class:"px-6 py-3"},ee={class:"px-6 py-3"},te={class:"px-6 py-3"},se={class:"flex flex-col"},oe={class:"font-medium text-gray-900"},le={class:"text-xs text-gray-500"},ie={class:"px-6 py-3"},ae={class:"px-6 py-3"},ne=["onClick"],re=["onClick"],de=["onClick","disabled"],ue={key:0},ce={key:1},pe={key:0,class:"flex justify-center mt-6"},fe={class:"inline-flex rounded-md shadow-sm items-center gap-1"},xe=["disabled"],ge={class:"flex items-center gap-1"},be=["onClick"],me={key:1,class:"px-2 text-gray-400"},ve=["disabled"],Ne={__name:"Index",props:{goodReceives:Object,user_id_outlet:Number,filters:Object,outlets:Array,canDelete:Boolean},setup(O){var D,R,B,T;const o=O,f=p(null),C=p(((D=o.filters)==null?void 0:D.outlet_id)||""),x=p(((R=o.filters)==null?void 0:R.search)||""),g=p(((B=o.filters)==null?void 0:B.from)||""),b=p(((T=o.filters)==null?void 0:T.to)||"");function S(){c.visit(route("outlet-food-good-receives.index",{outlet_id:C.value||void 0,search:x.value||void 0,from:g.value||void 0,to:b.value||void 0}))}function y(l){c.visit(route("outlet-food-good-receives.index",{outlet_id:C.value||void 0,search:x.value||void 0,from:g.value||void 0,to:b.value||void 0,page:l}))}function G(){if(!o.goodReceives||!o.goodReceives.last_page)return[];const l=o.goodReceives.current_page,t=o.goodReceives.last_page,s=[];if(t<=7)for(let a=1;a<=t;a++)s.push(a);else{s.push(1),l>3&&s.push("...");const a=Math.max(2,l-1),d=Math.min(t-1,l+1);for(let h=a;h<=d;h++)s.push(h);l<t-2&&s.push("..."),s.push(t)}return s}function $(){c.visit(route("outlet-food-good-receives.create"))}function M(l){c.visit(route("outlet-food-good-receives.show",l))}function V(l){c.visit(route("outlet-food-good-receives.edit",l))}function A(l){w.fire({title:"Yakin hapus data ini?",text:"Data akan dihapus permanen!",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, hapus",cancelButtonText:"Batal",reverseButtons:!0}).then(async t=>{var s,a;if(t.isConfirmed){f.value=l;try{const d=await axios.delete(`/outlet-food-good-receives/${l}`);if(d.data&&d.data.success)w.fire({icon:"success",title:"Berhasil",text:"Data berhasil dihapus!",timer:1500,showConfirmButton:!1}),setTimeout(()=>c.reload(),1200);else throw new Error("Gagal menghapus data")}catch(d){w.fire({icon:"error",title:"Gagal",text:((a=(s=d.response)==null?void 0:s.data)==null?void 0:a.message)||d.message||"Gagal menghapus data"})}finally{f.value=null}}})}function E(l){return l?new Date(l).toLocaleDateString("id-ID"):"-"}function L(l){return l?new Date(l).toLocaleString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}return(l,t)=>(i(),j(U,null,{default:F(()=>[e("div",W,[e("div",{class:"flex justify-between items-center mb-6"},[t[5]||(t[5]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-truck text-blue-500"}),u(" Good Receive Outlet ")],-1)),e("div",{class:"flex gap-2"},[e("button",{onClick:$,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"}," + Tambah Baru ")])]),e("form",{onSubmit:I(S,["prevent"]),class:"flex flex-wrap gap-2 mb-4 items-end"},[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-xs font-bold mb-1"},"Cari",-1)),_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>x.value=s),type:"text",class:"form-input rounded border px-2 py-1",placeholder:"Cari nomor GR, DO, outlet..."},null,512),[[k,x.value]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-xs font-bold mb-1"},"Tanggal Dari",-1)),_(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>g.value=s),type:"date",class:"form-input rounded border px-2 py-1"},null,512),[[k,g.value]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-xs font-bold mb-1"},"Tanggal Sampai",-1)),_(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>b.value=s),type:"date",class:"form-input rounded border px-2 py-1"},null,512),[[k,b.value]])]),t[9]||(t[9]=e("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded font-bold"},"Terapkan",-1))],32),e("div",H,[e("div",Y,[e("table",z,[t[15]||(t[15]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Tanggal"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Nomor GR"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Outlet"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Warehouse Outlet"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Nomor DO"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Creator"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",J,[o.goodReceives.data.length?m("",!0):(i(),n("tr",q,t[10]||(t[10]=[e("td",{colspan:"8",class:"text-center py-10 text-blue-300"},"Tidak ada data.",-1)]))),(i(!0),n(v,null,N(o.goodReceives.data,s=>(i(),n("tr",{key:s.id},[e("td",K,r(E(s.receive_date)),1),e("td",Q,r(s.number),1),e("td",X,r(s.outlet_name),1),e("td",Z,r(s.warehouse_outlet_name||"-"),1),e("td",ee,r(s.delivery_order_number),1),e("td",te,[e("div",se,[e("span",oe,r(s.creator_name||"-"),1),e("span",le,r(L(s.created_at)),1)])]),e("td",ie,r(s.status),1),e("td",ae,[e("button",{class:"inline-flex items-center btn btn-xs bg-blue-100 text-blue-800 hover:bg-blue-200 rounded px-2 py-1 font-semibold transition",onClick:a=>M(s.id)},t[11]||(t[11]=[e("i",{class:"fa fa-eye mr-1"},null,-1),u(" Detail ")]),8,ne),o.canDelete?(i(),n(v,{key:0},[s.outlet_payment_id?m("",!0):(i(),n("button",{key:0,class:"inline-flex items-center btn btn-xs bg-yellow-100 text-yellow-800 hover:bg-yellow-200 rounded px-2 py-1 font-semibold transition ml-2",onClick:a=>V(s.id)},t[12]||(t[12]=[e("i",{class:"fa fa-edit mr-1"},null,-1),u(" Edit ")]),8,re)),e("button",{class:"inline-flex items-center btn btn-xs bg-red-100 text-red-700 hover:bg-red-200 rounded px-2 py-1 font-semibold transition ml-2",onClick:a=>A(s.id),disabled:f.value===s.id},[f.value===s.id?(i(),n("span",ue,t[13]||(t[13]=[e("i",{class:"fa fa-spinner fa-spin mr-1"},null,-1),u(" Menghapus...")]))):(i(),n("span",ce,t[14]||(t[14]=[e("i",{class:"fa fa-trash mr-1"},null,-1),u(" Hapus")])))],8,de)],64)):m("",!0)])]))),128))])])])]),o.goodReceives&&o.goodReceives.data&&o.goodReceives.last_page>1?(i(),n("div",pe,[e("nav",fe,[e("button",{disabled:o.goodReceives.current_page===1,onClick:t[3]||(t[3]=s=>y(o.goodReceives.current_page-1)),class:"px-3 py-1 border bg-white text-blue-700 hover:bg-blue-100 rounded-l disabled:opacity-50 disabled:cursor-not-allowed"},t[16]||(t[16]=[e("i",{class:"fas fa-chevron-left"},null,-1),u(" Previous ")]),8,xe),e("div",ge,[(i(!0),n(v,null,N(G(),s=>(i(),n(v,{key:s},[s!=="..."?(i(),n("button",{key:0,onClick:a=>y(s),class:P(["px-3 py-1 border font-medium transition",s===o.goodReceives.current_page?"bg-blue-600 text-white":"bg-white text-blue-700 hover:bg-blue-100"])},r(s),11,be)):(i(),n("span",me,"..."))],64))),128))]),e("button",{disabled:o.goodReceives.current_page===o.goodReceives.last_page,onClick:t[4]||(t[4]=s=>y(o.goodReceives.current_page+1)),class:"px-3 py-1 border bg-white text-blue-700 hover:bg-blue-100 rounded-r disabled:opacity-50 disabled:cursor-not-allowed"},t[17]||(t[17]=[u(" Next "),e("i",{class:"fas fa-chevron-right"},null,-1)]),8,ve)])])):m("",!0)])]),_:1}))}};export{Ne as default};
