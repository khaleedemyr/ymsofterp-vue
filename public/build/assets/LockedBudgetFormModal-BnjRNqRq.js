import{P as M,r as O,c as D,w as p,L as d,E as b,B as l,D as e,N as u,O as E,H as v,G as y,I as x,Q as i,l as f,F as w,M as k}from"./vendor-vue-g7iCcTkf.js";import{S as c}from"./app-dzBjFUgD.js";import"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";const F={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},I={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},L={class:"mt-3"},N={class:"flex justify-between items-center mb-4"},U={class:"text-lg font-medium text-gray-900"},j={class:"space-y-4"},q=["value"],A={key:0,class:"mt-1 text-sm text-red-600"},z=["disabled"],T=["value"],G={key:0,class:"mt-1 text-sm text-red-600"},H=["value"],K={key:0,class:"mt-1 text-sm text-red-600"},P={class:"relative"},Q=["value"],R={key:0,class:"mt-1 text-sm text-red-600"},$={class:"mt-6 flex justify-end space-x-3"},J=["disabled"],ee={__name:"LockedBudgetFormModal",props:{show:Boolean,mode:String,budget:Object,categories:Array,subCategories:Array,outlets:Array},emits:["close","success"],setup(g,{emit:h}){const n=g,_=h,t=M({category_id:"",sub_category_id:"",outlet_id:"",budget:""}),r=O({}),S=D(()=>!t.category_id||!n.subCategories?[]:n.subCategories.filter(s=>s.category_id==t.category_id&&s.status==="active"));p(()=>t.category_id,s=>{t.sub_category_id=""}),p(()=>n.budget,s=>{s&&n.mode==="edit"&&(t.category_id=s.category_id||"",t.sub_category_id=s.sub_category_id||"",t.outlet_id=s.outlet_id||"",t.budget=s.budget||"")},{immediate:!0}),p(()=>n.show,s=>{s&&n.mode==="create"&&(t.reset(),r.value={})});const C=()=>{if(r.value={},!t.category_id){r.value.category_id="Category is required";return}if(!t.sub_category_id){r.value.sub_category_id="Sub Category is required";return}if(!t.outlet_id){r.value.outlet_id="Outlet is required";return}if(!t.budget||t.budget<=0){r.value.budget="Budget must be greater than 0";return}c.fire({title:"Menyimpan Data...",text:"Mohon tunggu sebentar",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{c.showLoading()}}),n.mode==="create"?t.post("/locked-budget-food-categories",{onSuccess:s=>{c.close(),c.fire("Berhasil","Data berhasil disimpan!","success"),_("success"),m()},onError:s=>{c.close(),r.value=s}}):t.put(`/locked-budget-food-categories/${n.budget.id}`,{onSuccess:s=>{c.close(),c.fire("Berhasil","Data berhasil diperbarui!","success"),_("success"),m()},onError:s=>{c.close(),r.value=s}})},m=()=>{_("close"),t.reset(),r.value={}},B=s=>s.replace(/[^\d]/g,""),V=s=>{const o=B(s.target.value);t.budget=o};return(s,o)=>g.show?(l(),d("div",F,[e("div",I,[e("div",L,[e("div",N,[e("h3",U,u(g.mode==="create"?"Tambah Budget":"Edit Budget"),1),e("button",{onClick:m,class:"text-gray-400 hover:text-gray-600"},o[3]||(o[3]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("form",{onSubmit:E(C,["prevent"])},[e("div",j,[e("div",null,[o[5]||(o[5]=e("label",{for:"category_id",class:"block text-sm font-medium text-gray-700 mb-1"},[y(" Category "),e("span",{class:"text-red-500"},"*")],-1)),v(e("select",{id:"category_id","onUpdate:modelValue":o[0]||(o[0]=a=>i(t).category_id=a),class:f(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":r.value.category_id}])},[o[4]||(o[4]=e("option",{value:""},"Select Category",-1)),(l(!0),d(w,null,k(g.categories,a=>(l(),d("option",{key:a.id,value:a.id},u(a.name),9,q))),128))],2),[[x,i(t).category_id]]),r.value.category_id?(l(),d("p",A,u(r.value.category_id),1)):b("",!0)]),e("div",null,[o[7]||(o[7]=e("label",{for:"sub_category_id",class:"block text-sm font-medium text-gray-700 mb-1"},[y(" Sub Category "),e("span",{class:"text-red-500"},"*")],-1)),v(e("select",{id:"sub_category_id","onUpdate:modelValue":o[1]||(o[1]=a=>i(t).sub_category_id=a),disabled:!i(t).category_id,class:f(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",{"border-red-500":r.value.sub_category_id}])},[o[6]||(o[6]=e("option",{value:""},"Select Sub Category",-1)),(l(!0),d(w,null,k(S.value,a=>(l(),d("option",{key:a.id,value:a.id},u(a.name),9,T))),128))],10,z),[[x,i(t).sub_category_id]]),r.value.sub_category_id?(l(),d("p",G,u(r.value.sub_category_id),1)):b("",!0)]),e("div",null,[o[9]||(o[9]=e("label",{for:"outlet_id",class:"block text-sm font-medium text-gray-700 mb-1"},[y(" Outlet "),e("span",{class:"text-red-500"},"*")],-1)),v(e("select",{id:"outlet_id","onUpdate:modelValue":o[2]||(o[2]=a=>i(t).outlet_id=a),class:f(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":r.value.outlet_id}])},[o[8]||(o[8]=e("option",{value:""},"Select Outlet",-1)),(l(!0),d(w,null,k(g.outlets,a=>(l(),d("option",{key:a.id_outlet,value:a.id_outlet},u(a.nama_outlet),9,H))),128))],2),[[x,i(t).outlet_id]]),r.value.outlet_id?(l(),d("p",K,u(r.value.outlet_id),1)):b("",!0)]),e("div",null,[o[11]||(o[11]=e("label",{for:"budget",class:"block text-sm font-medium text-gray-700 mb-1"},[y(" Budget "),e("span",{class:"text-red-500"},"*")],-1)),e("div",P,[o[10]||(o[10]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"Rp")],-1)),e("input",{id:"budget",type:"text",value:i(t).budget,onInput:V,placeholder:"0",class:f(["w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":r.value.budget}])},null,42,Q)]),r.value.budget?(l(),d("p",R,u(r.value.budget),1)):b("",!0)])]),e("div",$,[e("button",{type:"button",onClick:m,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"}," Batal "),e("button",{type:"submit",disabled:i(t).processing,class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},u(g.mode==="create"?"Simpan":"Update"),9,J)])],32)])])])):b("",!0)}};export{ee as default};
