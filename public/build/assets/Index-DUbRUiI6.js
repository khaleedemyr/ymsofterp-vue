import{r as y,W as i,w as G,A as H,B as l,C as Q,D as e,G as g,H as v,J as W,L as o,F as A,M as S,N as r,I as C,E as _,l as X}from"./vendor-vue-g7iCcTkf.js";import{l as z}from"./lodash-DB3HVzpp.js";import{S as w}from"./app-YbzOJwkz.js";import{A as F}from"./AppLayout-nEB-Gr2i.js";import{a as V}from"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DIps1Q-A.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const K={class:"max-w-7xl w-full mx-auto py-8 px-2"},J={class:"bg-white rounded-xl shadow-lg p-4 mb-6"},Y={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},Z=["value"],ee=["value"],te={class:"bg-white rounded-xl shadow-lg overflow-hidden"},se={class:"overflow-x-auto"},ae={class:"min-w-full divide-y divide-gray-200"},le={class:"bg-white divide-y divide-gray-200"},oe={key:0},re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ne={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600"},ie={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},de={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ue={key:0,class:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs"},pe={key:1,class:"text-gray-400"},ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},xe={key:0},ge={key:0,class:"font-medium"},me={key:1,class:"text-xs text-gray-400"},be={key:1,class:"text-gray-400"},fe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ye={key:0,class:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs"},ve={key:1,class:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs"},we={class:"px-6 py-4 whitespace-nowrap"},he={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ke={class:"flex items-center gap-2"},Ce=["onClick"],_e=["onClick"],Ae=["onClick"],Se=["onClick"],Be={key:0,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},Te={class:"flex items-center justify-between"},$e={class:"flex-1 flex justify-between sm:hidden"},Pe=["disabled"],Me=["disabled"],je={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Le={class:"text-sm text-gray-700"},Ve={class:"font-medium"},Re={class:"font-medium"},Ee={class:"font-medium"},Ne={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Oe=["disabled"],qe={class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},De=["disabled"],Ye={__name:"Index",props:{assets:Object,categories:Array,outlets:Array,filters:Object},setup(a){var T,$,P,M,j;const m=a,b=y(((T=m.filters)==null?void 0:T.search)||""),d=y((($=m.filters)==null?void 0:$.category_id)||""),u=y(((P=m.filters)==null?void 0:P.outlet_id)||""),p=y(((M=m.filters)==null?void 0:M.status)||"all"),c=y(((j=m.filters)==null?void 0:j.per_page)||15),R=z.debounce(()=>{i.get("/asset-management/assets",{search:b.value,category_id:d.value,outlet_id:u.value,status:p.value,per_page:c.value},{preserveState:!0,replace:!0})},400);function E(){R()}function h(n){if(n){const t=new URL(n);t.searchParams.set("search",b.value),t.searchParams.set("category_id",d.value),t.searchParams.set("outlet_id",u.value),t.searchParams.set("status",p.value),t.searchParams.set("per_page",c.value),i.visit(t.toString(),{preserveState:!0,replace:!0})}}function N(n){i.visit(`/asset-management/assets/${n.id}`)}function O(){i.visit("/asset-management/assets/create")}function q(n){i.visit(`/asset-management/assets/${n.id}/edit`)}async function D(n){var t;try{(t=(await V.post(`/asset-management/assets/${n.id}/generate-qr-code`,{},{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).data)!=null&&t.success&&(w.fire("Berhasil","QR Code berhasil di-generate","success"),B())}catch{w.fire("Error","Gagal generate QR Code","error")}}async function I(n){var s,k,x;if((await w.fire({title:"Apakah Anda yakin?",text:`Asset "${n.name}" akan dihapus`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"})).isConfirmed)try{const f=await V.delete(`/asset-management/assets/${n.id}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});((s=f.data)!=null&&s.success||f.status===200)&&(w.fire("Berhasil","Asset berhasil dihapus","success"),B())}catch(f){let L="Gagal menghapus data";(x=(k=f.response)==null?void 0:k.data)!=null&&x.message&&(L=f.response.data.message),w.fire("Error",L,"error")}}function U(n){return{Active:"bg-green-100 text-green-800",Maintenance:"bg-yellow-100 text-yellow-800",Disposed:"bg-red-100 text-red-800",Lost:"bg-gray-100 text-gray-800",Transfer:"bg-blue-100 text-blue-800"}[n]||"bg-gray-100 text-gray-800"}function B(){i.reload({preserveState:!0,replace:!0})}return G([d,u,p,c],()=>{i.get("/asset-management/assets",{search:b.value,category_id:d.value,outlet_id:u.value,status:p.value,per_page:c.value},{preserveState:!0,replace:!0})}),(n,t)=>(l(),H(F,null,{default:Q(()=>[e("div",K,[e("div",{class:"flex justify-between items-center mb-6"},[t[10]||(t[10]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-boxes text-blue-500"}),g(" Assets ")],-1)),e("button",{onClick:O,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2"},t[9]||(t[9]=[e("i",{class:"fa-solid fa-plus"},null,-1),g(" Tambah Asset ")]))]),e("div",J,[e("div",Y,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),v(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>b.value=s),onInput:E,placeholder:"Cari asset code, nama, brand...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,544),[[W,b.value]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),v(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>d.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[t[12]||(t[12]=e("option",{value:""},"Semua Kategori",-1)),(l(!0),o(A,null,S(a.categories,s=>(l(),o("option",{key:s.id,value:s.id},r(s.name),9,Z))),128))],512),[[C,d.value]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Outlet",-1)),v(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>u.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[t[14]||(t[14]=e("option",{value:""},"Semua Outlet",-1)),t[15]||(t[15]=e("option",{value:"null"},"Tidak Terikat Outlet",-1)),(l(!0),o(A,null,S(a.outlets,s=>(l(),o("option",{key:s.id,value:s.id},r(s.name),9,ee))),128))],512),[[C,u.value]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),v(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>p.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[17]||(t[17]=[e("option",{value:"all"},"Semua Status",-1),e("option",{value:"Active"},"Active",-1),e("option",{value:"Maintenance"},"Maintenance",-1),e("option",{value:"Disposed"},"Disposed",-1),e("option",{value:"Lost"},"Lost",-1),e("option",{value:"Transfer"},"Transfer",-1)]),512),[[C,p.value]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Per Page",-1)),v(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>c.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[19]||(t[19]=[e("option",{value:"10"},"10",-1),e("option",{value:"15"},"15",-1),e("option",{value:"25"},"25",-1),e("option",{value:"50"},"50",-1)]),512),[[C,c.value]])])])]),e("div",te,[e("div",se,[e("table",ae,[t[26]||(t[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Asset Code"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nama"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Kategori"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Brand/Model"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Outlet"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",le,[a.assets.data&&a.assets.data.length===0?(l(),o("tr",oe,t[21]||(t[21]=[e("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"}," Tidak ada data ",-1)]))):_("",!0),(l(!0),o(A,null,S(a.assets.data,(s,k)=>(l(),o("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",re,r((a.assets.current_page-1)*a.assets.per_page+k+1),1),e("td",ne,r(s.asset_code),1),e("td",ie,r(s.name),1),e("td",de,[s.category?(l(),o("span",ue,r(s.category.name),1)):(l(),o("span",pe,"-"))]),e("td",ce,[s.brand||s.model?(l(),o("div",xe,[s.brand?(l(),o("div",ge,r(s.brand),1)):_("",!0),s.model?(l(),o("div",me,r(s.model),1)):_("",!0)])):(l(),o("span",be,"-"))]),e("td",fe,[s.current_outlet?(l(),o("span",ye,r(s.current_outlet.name),1)):(l(),o("span",ve," Tidak Terikat "))]),e("td",we,[e("span",{class:X([U(s.status),"px-2 py-1 rounded-full text-xs font-medium"])},r(s.status),3)]),e("td",he,[e("div",ke,[e("button",{onClick:x=>N(s),class:"text-green-600 hover:text-green-900",title:"View"},t[22]||(t[22]=[e("i",{class:"fa-solid fa-eye"},null,-1)]),8,Ce),e("button",{onClick:x=>q(s),class:"text-blue-600 hover:text-blue-900",title:"Edit"},t[23]||(t[23]=[e("i",{class:"fa-solid fa-edit"},null,-1)]),8,_e),e("button",{onClick:x=>D(s),class:"text-purple-600 hover:text-purple-900",title:"Generate QR Code"},t[24]||(t[24]=[e("i",{class:"fa-solid fa-qrcode"},null,-1)]),8,Ae),e("button",{onClick:x=>I(s),class:"text-red-600 hover:text-red-900",title:"Hapus"},t[25]||(t[25]=[e("i",{class:"fa-solid fa-trash"},null,-1)]),8,Se)])])]))),128))])])]),a.assets.last_page>1?(l(),o("div",Be,[e("div",Te,[e("div",$e,[e("button",{onClick:t[5]||(t[5]=s=>h(a.assets.prev_page_url)),disabled:!a.assets.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,Pe),e("button",{onClick:t[6]||(t[6]=s=>h(a.assets.next_page_url)),disabled:!a.assets.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,Me)]),e("div",je,[e("div",null,[e("p",Le,[t[27]||(t[27]=g(" Menampilkan ")),e("span",Ve,r(a.assets.from),1),t[28]||(t[28]=g(" sampai ")),e("span",Re,r(a.assets.to),1),t[29]||(t[29]=g(" dari ")),e("span",Ee,r(a.assets.total),1),t[30]||(t[30]=g(" hasil "))])]),e("div",null,[e("nav",Ne,[e("button",{onClick:t[7]||(t[7]=s=>h(a.assets.prev_page_url)),disabled:!a.assets.prev_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[31]||(t[31]=[e("i",{class:"fa-solid fa-chevron-left"},null,-1)]),8,Oe),e("span",qe," Page "+r(a.assets.current_page)+" of "+r(a.assets.last_page),1),e("button",{onClick:t[8]||(t[8]=s=>h(a.assets.next_page_url)),disabled:!a.assets.next_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[32]||(t[32]=[e("i",{class:"fa-solid fa-chevron-right"},null,-1)]),8,De)])])])])])):_("",!0)])])]),_:1}))}};export{Ye as default};
