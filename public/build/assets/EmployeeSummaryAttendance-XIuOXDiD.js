import{r as x,w as U,a as $,A as B,B as n,C as L,D as t,L as r,E as I,x as V,Q as h,H as _,F as g,M as y,N as a,I as S,G as k,l as b,X as J,W}from"./vendor-vue-g7iCcTkf.js";import{A as Y}from"./AppLayout-D6FAfGlz.js";import{a as G}from"./vendor-utils-CpgP2uT4.js";import{s as C}from"./vue-multiselect.esm-V-bx43V9.js";/* empty css                            */import"./app-dzBjFUgD.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CUUHZNnG.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const P={class:"py-12"},z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},H={class:"bg-white rounded-2xl shadow-lg overflow-hidden mb-6"},Q={class:"p-6"},X={class:"flex flex-wrap gap-4 items-end"},q={class:"flex-1 min-w-[200px]"},Z={class:"flex-1 min-w-[200px]"},K={class:"flex-1 min-w-[120px]"},tt=["value"],et={class:"flex-1 min-w-[100px]"},st=["value"],ot={class:"flex gap-2"},lt=["disabled"],at=["disabled"],nt={key:0,class:"bg-white rounded-2xl shadow-lg overflow-hidden"},rt={class:"px-6 py-4 border-b border-gray-200"},it={class:"flex justify-between items-center"},dt={class:"text-sm text-gray-500"},ut={class:"p-6"},ct={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},pt={class:"bg-blue-50 p-4 rounded-lg border border-blue-200"},xt={class:"text-2xl font-bold text-blue-900"},mt={class:"bg-green-50 p-4 rounded-lg border border-green-200"},bt={class:"text-2xl font-bold text-green-900"},ft={class:"bg-yellow-50 p-4 rounded-lg border border-yellow-200"},gt={class:"text-2xl font-bold text-yellow-900"},yt={class:"bg-purple-50 p-4 rounded-lg border border-purple-200"},vt={class:"text-2xl font-bold text-purple-900"},wt={class:"overflow-x-auto"},ht={class:"w-full divide-y divide-blue-200"},_t={class:"bg-white divide-y divide-blue-200"},kt={class:"px-4 py-2 whitespace-nowrap font-medium text-gray-900"},Dt={class:"px-4 py-2 whitespace-nowrap text-center font-mono text-sm"},Tt={class:"px-4 py-2 whitespace-nowrap text-center font-mono text-sm"},Et={class:"px-4 py-2 whitespace-nowrap text-center font-mono"},At={class:"px-4 py-2 whitespace-nowrap text-center font-mono"},Rt={class:"px-4 py-2 whitespace-nowrap text-center font-mono"},Lt={class:"px-4 py-2 whitespace-nowrap text-center font-mono"},Vt={class:"px-4 py-2 whitespace-nowrap text-center"},St=["onClick"],Ct={class:"px-6 py-4 bg-gray-50 border-b border-gray-200"},Ot={class:"text-md font-semibold text-gray-700"},jt={class:"p-6"},Ft={class:"overflow-x-auto"},Mt={class:"w-full divide-y divide-blue-200"},Nt={class:"bg-white divide-y divide-blue-200"},Ut={class:"px-4 py-2 whitespace-nowrap font-mono text-gray-900"},$t={class:"px-4 py-2 whitespace-nowrap text-center font-mono"},Bt={class:"px-4 py-2 whitespace-nowrap text-center font-mono"},It={class:"px-4 py-2 whitespace-nowrap text-center font-mono"},Jt={class:"px-4 py-2 whitespace-nowrap text-center font-mono"},Wt={class:"px-4 py-2 whitespace-nowrap text-center"},Yt={key:0,class:"text-red-600 font-semibold"},Gt={key:1,class:"text-blue-600 font-semibold"},Pt={key:2,class:"text-green-600 font-semibold"},zt={key:1,class:"bg-white rounded-2xl shadow-lg overflow-hidden"},ne={__name:"EmployeeSummaryAttendance",props:{employeeRows:{type:Array,default:()=>[]},outlets:Array,divisions:Array,filter:Object},setup(i){const f=i,c=x(""),p=x(""),d=x(new Date().getMonth()+1),u=x(new Date().getFullYear()),O=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],j=Array.from({length:5},(o,e)=>new Date().getFullYear()-e),v=x(!1),w=x(!1),m=x(new Set);f.filter&&(c.value=f.filter.outlet_id||"",p.value=f.filter.division_id||"",d.value=f.filter.bulan||new Date().getMonth()+1,u.value=f.filter.tahun||new Date().getFullYear());const D=()=>{v.value=!0,W.get(route("attendance-report.employee-summary-attendance"),{outlet_id:c.value,division_id:p.value,bulan:d.value,tahun:u.value},{preserveState:!0,onFinish:()=>{v.value=!1}})},F=o=>{m.value.has(o)?m.value.delete(o):m.value.add(o)},T=o=>o?new Date(o).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-",M=o=>o?new Date(o).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",E=o=>{if(!o||o===0)return"0 menit";const e=Math.floor(o/60),s=o%60;return e>0?`${e} jam ${s} menit`:`${s} menit`},A=o=>!o||o===0?"0 jam":`${o} jam`,N=async()=>{w.value=!0;try{const o=await G.post(route("attendance-report.employee-summary-attendance.export"),{outlet_id:c.value,division_id:p.value,bulan:d.value,tahun:u.value},{responseType:"blob"}),e=window.URL.createObjectURL(new Blob([o.data])),s=document.createElement("a");s.href=e,s.setAttribute("download",`employee-summary-attendance-${d.value}-${u.value}.xlsx`),document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(e)}catch(o){console.error("Export error:",o),alert("Gagal mengexport data")}finally{w.value=!1}};return U([c,p,d,u],()=>{m.value.clear()}),$(()=>{(c.value||p.value||d.value||u.value)&&D()}),(o,e)=>(n(),B(Y,{title:"Employee Summary Attendance"},{header:L(()=>e[4]||(e[4]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Employee Summary Attendance ",-1)])),default:L(()=>[t("div",P,[t("div",z,[t("div",H,[e[11]||(e[11]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-semibold text-gray-700"},"Filter Data")],-1)),t("div",Q,[t("div",X,[t("div",q,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Outlet",-1)),V(h(C),{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),options:i.outlets,searchable:!0,placeholder:"Pilih Outlet",label:"name","track-by":"id","allow-empty":!0,"close-on-select":!0},null,8,["modelValue","options"])]),t("div",Z,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Division",-1)),V(h(C),{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=s=>p.value=s),options:i.divisions,searchable:!0,placeholder:"Pilih Division",label:"name","track-by":"id","allow-empty":!0,"close-on-select":!0},null,8,["modelValue","options"])]),t("div",K,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Bulan",-1)),_(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>d.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(n(),r(g,null,y(O,(s,l)=>t("option",{key:l,value:l+1},a(s),9,tt)),64))],512),[[S,d.value]])]),t("div",et,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tahun",-1)),_(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>u.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(n(!0),r(g,null,y(h(j),s=>(n(),r("option",{key:s,value:s},a(s),9,st))),128))],512),[[S,u.value]])]),t("div",ot,[t("button",{onClick:D,disabled:v.value,class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg"},e[9]||(e[9]=[t("i",{class:"fa fa-search mr-2"},null,-1),k(" Tampilkan ")]),8,lt),t("button",{onClick:N,disabled:w.value||!i.employeeRows||i.employeeRows.length===0,class:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-xl shadow flex items-center gap-2"},e[10]||(e[10]=[t("i",{class:"fa fa-file-excel-o"},null,-1),k(" Export to Excel ")]),8,at)])])])]),i.employeeRows.length>0?(n(),r("div",nt,[t("div",rt,[t("div",it,[e[12]||(e[12]=t("h3",{class:"text-lg font-semibold text-gray-700"}," Employee Summary Attendance ",-1)),t("div",dt," Total: "+a(i.employeeRows.length)+" employees ",1)])]),t("div",ut,[t("div",ct,[t("div",pt,[e[13]||(e[13]=t("div",{class:"text-sm font-medium text-blue-600"},"Total Employees",-1)),t("div",xt,a(i.employeeRows.length),1)]),t("div",mt,[e[14]||(e[14]=t("div",{class:"text-sm font-medium text-green-600"},"Total Working Days",-1)),t("div",bt,a(i.employeeRows.reduce((s,l)=>s+l.total_working_days,0)),1)]),t("div",ft,[e[15]||(e[15]=t("div",{class:"text-sm font-medium text-yellow-600"},"Total Telat (menit)",-1)),t("div",gt,a(i.employeeRows.reduce((s,l)=>s+l.total_telat,0)),1)]),t("div",yt,[e[16]||(e[16]=t("div",{class:"text-sm font-medium text-purple-600"},"Total Lembur (jam)",-1)),t("div",vt,a(i.employeeRows.reduce((s,l)=>s+l.total_lembur,0)),1)])]),t("div",wt,[t("table",ht,[e[18]||(e[18]=t("thead",{class:"bg-blue-600 text-white"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"}," Employee "),t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"}," Outlet "),t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"}," Division "),t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"}," Total Telat "),t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"}," Total Lembur "),t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"}," Total Off "),t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"}," Working Days "),t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"}," Aksi ")])],-1)),t("tbody",_t,[(n(!0),r(g,null,y(i.employeeRows,(s,l)=>(n(),r("tr",{key:s.user_id,class:b([l%2===1?"bg-blue-50":"","hover:bg-blue-100"])},[t("td",kt,a(s.nama_lengkap),1),t("td",Dt,a(s.nama_outlet||"-"),1),t("td",Tt,a(s.nama_divisi||"-"),1),t("td",Et,[t("span",{class:b(s.total_telat>0?"text-red-600 font-semibold":"text-gray-500")},a(E(s.total_telat)),3)]),t("td",At,[t("span",{class:b(s.total_lembur>0?"text-green-600 font-semibold":"text-gray-500")},a(A(s.total_lembur)),3)]),t("td",Rt,a(s.total_off),1),t("td",Lt,a(s.total_working_days),1),t("td",Vt,[t("button",{onClick:R=>F(s.user_id),class:"px-3 py-1 rounded bg-blue-100 text-blue-700 hover:bg-blue-200 transition text-xs font-semibold"},[e[17]||(e[17]=t("i",{class:"fa fa-list mr-1"},null,-1)),k(" "+a(m.value.has(s.user_id)?"Collapse":"View Details"),1)],8,St)])],2))),128))])])])]),(n(!0),r(g,null,y(i.employeeRows,s=>_((n(),r("div",{key:`daily-${s.user_id}`,class:"border-t border-gray-200"},[t("div",Ct,[t("h5",Ot," Daily Details - "+a(s.nama_lengkap),1)]),t("div",jt,[t("div",Ft,[t("table",Mt,[e[19]||(e[19]=t("thead",{class:"bg-blue-600 text-white"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"}," Tanggal "),t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"}," Jam Masuk "),t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"}," Jam Keluar "),t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"}," Telat "),t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"}," Lembur "),t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"}," Status ")])],-1)),t("tbody",Nt,[(n(!0),r(g,null,y(s.details,(l,R)=>(n(),r("tr",{key:l.tanggal,class:b([R%2===1?"bg-blue-50":"","hover:bg-blue-100"])},[t("td",Ut,a(M(l.tanggal)),1),t("td",$t,a(T(l.jam_masuk)),1),t("td",Bt,a(T(l.jam_keluar)),1),t("td",It,[t("span",{class:b(l.telat>0?"text-red-600 font-semibold":"text-gray-500")},a(E(l.telat)),3)]),t("td",Jt,[t("span",{class:b(l.lembur>0?"text-green-600 font-semibold":"text-gray-500")},a(A(l.lembur)),3)]),t("td",Wt,[l.is_off?(n(),r("span",Yt,"OFF")):l.is_cross_day?(n(),r("span",Gt,"Cross Day")):(n(),r("span",Pt,"Normal"))])],2))),128))])])])])])),[[J,m.value.has(s.user_id)]])),128))])):v.value?I("",!0):(n(),r("div",zt,e[20]||(e[20]=[t("div",{class:"p-6 text-center text-gray-500"},[t("i",{class:"fa fa-info-circle text-4xl text-gray-400 mb-4"}),t("p",{class:"text-lg font-medium"},"Tidak ada data untuk ditampilkan"),t("p",{class:"text-sm"},"Silakan pilih filter dan klik Tampilkan")],-1)])))])])]),_:1}))}};export{ne as default};
