import{r as n,w as T,L as i,E as D,B as d,D as t,H as P,J as j,Q as g,F as h,M as _,N as o}from"./vendor-vue-g7iCcTkf.js";import{a as B}from"./vendor-utils-CpgP2uT4.js";import{l as C}from"./lodash-DB3HVzpp.js";const N={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},$={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},E={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-5xl sm:w-full"},F={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},M={class:"sm:flex sm:items-start"},O={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},S={class:"flex justify-between items-center mb-4"},V={class:"mb-4 flex justify-between items-center"},A={key:0,class:"flex justify-center items-center h-48"},H={key:1},L={class:"overflow-x-auto"},z={class:"min-w-full text-sm rounded-xl overflow-hidden"},I={class:"py-2 px-3 font-semibold text-blue-700"},J={class:"py-2 px-3"},Q={class:"py-2 px-3"},U={class:"py-2 px-3"},q={class:"py-2 px-3"},G={class:"py-2 px-3"},K={class:"py-2 px-3 text-red-500 font-bold"},R={class:"mt-4 flex justify-between items-center"},W={class:"text-xs text-gray-500"},X={class:"flex gap-2 items-center"},Y=["disabled"],Z={class:"px-3 py-1"},tt=["disabled"],at={__name:"AllOverdueTasksModal",props:{show:Boolean},emits:["close"],setup(x,{emit:et}){const w=x,m=n([]),f=n(0),a=n(1),k=n(10),r=n(1),u=n(""),c=n(!1);async function p(){c.value=!0;try{const l=await B.get("/api/overdue-tasks/all",{params:{page:a.value,perPage:k.value,search:u.value}});m.value=l.data.data,f.value=l.data.total,r.value=l.data.lastPage}finally{c.value=!1}}const v=C.debounce(()=>{a.value=1,p()},300);T(()=>w.show,l=>{l&&(a.value=1,u.value="",p())});function b(l){l>=1&&l<=r.value&&(a.value=l,p())}return(l,e)=>x.show?(d(),i("div",N,[t("div",$,[e[9]||(e[9]=t("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[t("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),e[10]||(e[10]=t("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"â€‹",-1)),t("div",E,[t("div",F,[t("div",M,[t("div",O,[t("div",S,[e[6]||(e[6]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Semua Task Overdue",-1)),t("button",{onClick:e[0]||(e[0]=s=>l.$emit("close")),class:"text-gray-400 hover:text-gray-500"},e[5]||(e[5]=[t("i",{class:"fas fa-times"},null,-1)]))]),t("div",V,[P(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),onInput:e[2]||(e[2]=(...s)=>g(v)&&g(v)(...s)),placeholder:"Cari task...",class:"w-64 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[j,u.value]])]),c.value?(d(),i("div",A,e[7]||(e[7]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"},null,-1)]))):(d(),i("div",H,[t("div",L,[t("table",z,[e[8]||(e[8]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"py-2 px-3 text-left font-bold"},"Task Number"),t("th",{class:"py-2 px-3 text-left font-bold"},"Title"),t("th",{class:"py-2 px-3 text-left font-bold"},"Outlet"),t("th",{class:"py-2 px-3 text-left font-bold"},"Assigned To"),t("th",{class:"py-2 px-3 text-left font-bold"},"Due Date"),t("th",{class:"py-2 px-3 text-left font-bold"},"Finish Date"),t("th",{class:"py-2 px-3 text-left font-bold"},"Hari Telat")])],-1)),t("tbody",null,[(d(!0),i(h,null,_(m.value,s=>(d(),i("tr",{key:s.id,class:"hover:bg-blue-50 transition"},[t("td",I,o(s.task_number||"-"),1),t("td",J,o(s.title),1),t("td",Q,o(s.outlet),1),t("td",U,[(d(!0),i(h,null,_(s.assigned_to,y=>(d(),i("span",{key:y,class:"inline-block bg-indigo-100 text-indigo-700 rounded px-2 py-0.5 mr-1 text-xs font-semibold"},o(y),1))),128))]),t("td",q,o(s.due_date),1),t("td",G,o(s.completed_at),1),t("td",K,o(s.late_days),1)]))),128))])])]),t("div",R,[t("div",W,"Total: "+o(f.value),1),t("div",X,[t("button",{onClick:e[3]||(e[3]=s=>b(a.value-1)),disabled:a.value===1,class:"px-3 py-1 rounded bg-gray-100 text-gray-700 disabled:opacity-50"},"Prev",8,Y),t("span",Z,o(a.value)+" / "+o(r.value),1),t("button",{onClick:e[4]||(e[4]=s=>b(a.value+1)),disabled:a.value===r.value,class:"px-3 py-1 rounded bg-gray-100 text-gray-700 disabled:opacity-50"},"Next",8,tt)])])]))])])])])])])):D("",!0)}};export{at as default};
