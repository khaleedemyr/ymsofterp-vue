import{P as M,w as R,A as V,B as l,C as W,D as t,G as m,H as f,Q as r,J as y,I as O,L as n,F as w,M as _,l as h,N as a,E as S,W as p}from"./vendor-vue-g7iCcTkf.js";import{A as $}from"./AppLayout-DS2U8tWW.js";import{S as b}from"./app-Vi2dpKR6.js";import{a as U}from"./vendor-utils-CpgP2uT4.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-Do674Z4r.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const J={class:"max-w-7xl mx-auto py-8 px-2"},Q={class:"bg-white rounded-xl shadow-lg p-4 mb-6"},z={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},G={class:"md:col-span-2"},Y={class:"flex justify-between items-center mt-4"},K={class:"flex items-center gap-2"},X={class:"bg-white rounded-2xl shadow-2xl overflow-x-auto transition-all"},Z={class:"w-full min-w-full divide-y divide-gray-200"},tt={class:"px-6 py-4 whitespace-nowrap text-sm"},et={class:"space-y-1"},st={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ot={class:"space-y-1"},at={class:"font-medium"},it={class:"text-gray-500 text-xs"},lt={class:"text-gray-500 text-xs"},nt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},rt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},dt={class:"space-y-1"},ut={class:"font-medium"},ct={class:"text-gray-500 text-xs"},pt={class:"px-6 py-4 text-sm text-gray-900"},xt={key:0,class:"space-y-1"},mt={class:"font-medium"},ft={class:"text-gray-500 ml-2"},bt={key:1,class:"text-gray-400"},gt={class:"px-6 py-4 text-sm text-gray-900"},yt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},wt={class:"flex items-center gap-2"},_t=["onClick"],ht=["onClick"],vt=["onClick"],kt={class:"flex justify-between items-center mt-4"},Ct={class:"text-sm text-gray-600"},Dt={class:"flex gap-2"},Tt=["disabled","onClick","innerHTML"],Bt={__name:"Index",props:{headers:Object,productionsByHeader:Object,filters:Object,canDelete:Boolean},setup(u){var C,D,T,B;const c=u,i=M({date_from:((C=c.filters)==null?void 0:C.date_from)||"",date_to:((D=c.filters)==null?void 0:D.date_to)||"",search:((T=c.filters)==null?void 0:T.search)||"",per_page:((B=c.filters)==null?void 0:B.per_page)||10});function I(o){return o?new Date(o).toLocaleDateString("id-ID",{year:"numeric",month:"2-digit",day:"2-digit"}):"-"}function F(o){return o?new Date(o).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"}function v(o){return o==null?"0.00":new Intl.NumberFormat("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o)}function k(o){return c.productionsByHeader[o]||[]}function x(){i.get(route("outlet-wip.index"),{preserveState:!0,preserveScroll:!0})}function P(){i.reset(),i.get(route("outlet-wip.index"),{preserveState:!0,preserveScroll:!0})}function E(){p.visit(route("outlet-wip.create"))}function j(){p.visit(route("outlet-wip.report"))}function L(o){p.visit(route("outlet-wip.show",o))}function A(o){p.visit(route("outlet-wip.edit",o))}function N(o){b.fire({title:"Hapus Produksi WIP?",text:"Data yang dihapus tidak dapat dikembalikan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"}).then(s=>{s.isConfirmed&&U.delete(route("outlet-wip.destroy",o)).then(e=>{e.data.success?(b.fire("Terhapus!","Data produksi WIP berhasil dihapus.","success"),p.reload()):b.fire("Error!",e.data.message||"Terjadi kesalahan saat menghapus data.","error")}).catch(e=>{console.error("Error deleting production:",e),b.fire("Error!","Terjadi kesalahan saat menghapus data.","error")})})}let g=null;return R(()=>i.search,()=>{g&&clearTimeout(g),g=setTimeout(()=>{x()},500)}),(o,s)=>(l(),V($,null,{default:W(()=>[t("div",J,[t("div",{class:"flex justify-between items-center mb-6"},[s[5]||(s[5]=t("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[t("i",{class:"fa-solid fa-industry text-blue-500"}),m(" Outlet WIP Production ")],-1)),t("div",{class:"flex gap-3"},[t("button",{onClick:j,class:"bg-gradient-to-r from-green-500 to-green-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"},s[4]||(s[4]=[t("i",{class:"fa-solid fa-chart-bar mr-2"},null,-1),m(" Laporan ")])),t("button",{onClick:E,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"}," + Create New ")])]),t("div",Q,[t("div",z,[t("div",G,[s[6]||(s[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),f(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>r(i).search=e),onInput:x,placeholder:"Cari nomor, batch, outlet, warehouse, status...",class:"input input-bordered w-full"},null,544),[[y,r(i).search]])]),t("div",null,[s[7]||(s[7]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal Dari",-1)),f(t("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=e=>r(i).date_from=e),onChange:x,class:"input input-bordered w-full"},null,544),[[y,r(i).date_from]])]),t("div",null,[s[8]||(s[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal Sampai",-1)),f(t("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=e=>r(i).date_to=e),onChange:x,class:"input input-bordered w-full"},null,544),[[y,r(i).date_to]])])]),t("div",Y,[t("div",K,[s[10]||(s[10]=t("label",{class:"text-sm font-medium text-gray-700"},"Per Page:",-1)),f(t("select",{"onUpdate:modelValue":s[3]||(s[3]=e=>r(i).per_page=e),onChange:x,class:"input input-bordered w-20"},s[9]||(s[9]=[t("option",{value:10},"10",-1),t("option",{value:25},"25",-1),t("option",{value:50},"50",-1),t("option",{value:100},"100",-1)]),544),[[O,r(i).per_page]])]),t("button",{onClick:P,class:"btn btn-sm btn-outline"}," Reset Filter ")])]),t("div",X,[t("table",Z,[s[16]||(s[16]=t("thead",{class:"bg-gradient-to-r from-blue-50 to-blue-100"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider rounded-tl-2xl"},"Nomor"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Tanggal"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Batch"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Outlet"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Item Produksi"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Catatan"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider rounded-tr-2xl"},"Aksi")])],-1)),t("tbody",null,[(l(!0),n(w,null,_(u.headers.data,e=>(l(),n("tr",{key:e.id,class:"bg-white hover:bg-gray-50 transition-colors"},[t("td",tt,[t("div",et,[t("span",{class:h(["font-semibold block",{"text-orange-600":e.number&&e.number.startsWith("DRAFT-"),"text-blue-600":e.number&&!e.number.startsWith("DRAFT-"),"text-gray-500":!e.number}])},a(e.number||(e.source_type==="old"?"Data Lama":"-")),3),t("span",{class:h(["px-2 py-1 rounded text-xs font-semibold inline-block",{"bg-orange-100 text-orange-700":e.status==="DRAFT","bg-blue-100 text-blue-700":e.status==="SUBMITTED","bg-green-100 text-green-700":e.status==="PROCESSED"}])},a(e.status),3)])]),t("td",st,[t("div",ot,[t("div",at,a(I(e.production_date)),1),t("div",it,a(F(e.created_at)),1),t("div",lt,[s[11]||(s[11]=t("i",{class:"fa-solid fa-user mr-1"},null,-1)),m(a(e.created_by_name),1)])])]),t("td",nt,a(e.batch_number||"-"),1),t("td",rt,[t("div",dt,[t("div",ut,a(e.outlet_name),1),t("div",ct,[s[12]||(s[12]=t("i",{class:"fa-solid fa-warehouse mr-1"},null,-1)),m(a(e.warehouse_outlet_name),1)])])]),t("td",pt,[k(e.id).length>0?(l(),n("div",xt,[(l(!0),n(w,null,_(k(e.id),(d,H)=>(l(),n("div",{key:`${e.id}-${d.item_id}-${H}`,class:"text-xs"},[t("span",mt,a(d.item_name),1),t("span",ft," (Qty: "+a(v(d.qty))+", Jadi: "+a(v(d.qty_jadi))+" "+a(d.unit_name)+") ",1)]))),128))])):(l(),n("span",bt,"-"))]),t("td",gt,a(e.notes||"-"),1),t("td",yt,[t("div",wt,[t("button",{onClick:d=>L(e.id),class:"text-blue-600 hover:text-blue-900",title:"Detail"},s[13]||(s[13]=[t("i",{class:"fa-solid fa-eye"},null,-1)]),8,_t),e.status==="DRAFT"&&e.source_type!=="old"?(l(),n("button",{key:0,onClick:d=>A(e.id),class:"text-green-600 hover:text-green-900",title:"Edit"},s[14]||(s[14]=[t("i",{class:"fa-solid fa-edit"},null,-1)]),8,ht)):S("",!0),c.canDelete?(l(),n("button",{key:1,onClick:d=>N(e.id),class:"text-red-600 hover:text-red-900",title:"Hapus"},s[15]||(s[15]=[t("i",{class:"fa-solid fa-trash"},null,-1)]),8,vt)):S("",!0)])])]))),128))])])]),t("div",kt,[t("div",Ct," Menampilkan "+a(u.headers.from||0)+" sampai "+a(u.headers.to||0)+" dari "+a(u.headers.total||0)+" data ",1),t("div",Dt,[(l(!0),n(w,null,_(u.headers.links,e=>(l(),n("button",{key:e.label,disabled:!e.url,onClick:()=>e.url&&r(p).visit(e.url,{preserveState:!0,replace:!0}),innerHTML:e.label,class:h(["px-3 py-1 rounded-lg border text-sm font-semibold",[e.active?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-700 hover:bg-blue-50",e.url?"cursor-pointer":"opacity-50 cursor-not-allowed"]])},null,10,Tt))),128))])])])]),_:1}))}},Mt=q(Bt,[["__scopeId","data-v-b830dbd5"]]);export{Mt as default};
