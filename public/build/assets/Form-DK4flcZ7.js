import{c as _,r as y,a as S,A as T,B as c,C as M,D as e,G as r,N as u,O as E,H as i,L as x,F as U,M as C,I as k,J as p,W as g}from"./vendor-vue-g7iCcTkf.js";import{A as V}from"./AppLayout-BE0dNalr.js";import{S as d}from"./app-C51E4rvH.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-D219A2Up.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const A={class:"w-full py-8 px-0"},D={class:"flex justify-between items-center mb-6"},h={class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},O={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},F=["value"],q={class:"lg:col-span-2"},I={class:"flex justify-end gap-2 mt-8"},P=["disabled"],$={__name:"Form",props:{bankBook:Object,bankAccounts:Array,mode:String},setup(v){const n=v,s=_(()=>n.mode==="edit"),b=y(!1),a=y({bank_account_id:"",transaction_date:new Date().toISOString().split("T")[0],transaction_type:"",amount:"",description:"",reference_type:"",reference_id:""});S(()=>{n.bankBook&&(a.value={bank_account_id:n.bankBook.bank_account_id||"",transaction_date:n.bankBook.transaction_date?new Date(n.bankBook.transaction_date).toISOString().split("T")[0]:"",transaction_type:n.bankBook.transaction_type||"",amount:n.bankBook.amount||"",description:n.bankBook.description||"",reference_type:n.bankBook.reference_type||"",reference_id:n.bankBook.reference_id||""})});function m(){g.visit("/bank-books")}async function w(){if(!(await d.fire({title:s.value?"Update Entri?":"Simpan Entri?",text:s.value?"Yakin ingin update entri buku bank ini?":"Yakin ingin menyimpan entri buku bank ini?",icon:"question",showCancelButton:!0,confirmButtonText:s.value?"Update":"Simpan",cancelButtonText:"Batal"})).isConfirmed)return;b.value=!0,d.fire({title:s.value?"Mengupdate...":"Menyimpan...",allowOutsideClick:!1,didOpen:()=>{d.showLoading()}});const t=()=>{d.fire({icon:"success",title:"Berhasil",text:s.value?"Entri berhasil diupdate":"Entri berhasil disimpan",timer:1500,showConfirmButton:!1}),m()},o=l=>{let f="Gagal menyimpan data";l&&l.response&&l.response.data&&l.response.data.message?f=l.response.data.message:l&&l.message&&(f=l.message),d.fire({icon:"error",title:"Gagal",text:f}),b.value=!1};try{s.value?await g.put(`/bank-books/${n.bankBook.id}`,a.value,{onSuccess:t,onError:o}):await g.post("/bank-books",a.value,{onSuccess:t,onError:o})}catch(l){o(l)}}return(B,t)=>(c(),T(V,null,{default:M(()=>[e("div",A,[e("div",D,[e("h1",h,[t[7]||(t[7]=e("i",{class:"fa-solid fa-book"},null,-1)),r(" "+u(s.value?"Edit Entri Buku Bank":"Tambah Entri Buku Bank"),1)]),e("button",{onClick:m,class:"bg-gray-500 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"},t[8]||(t[8]=[e("i",{class:"fa fa-arrow-left mr-1"},null,-1),r(" Kembali ")]))]),e("form",{onSubmit:E(w,["prevent"]),class:"bg-white rounded-2xl shadow-2xl p-6"},[e("div",O,[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[r("Bank Account "),e("span",{class:"text-red-500"},"*")],-1)),i(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.bank_account_id=o),class:"w-full border border-blue-200 rounded-lg px-4 py-3 focus:ring-blue-500 focus:border-blue-500 shadow-sm",required:""},[t[9]||(t[9]=e("option",{value:""},"Pilih Bank",-1)),(c(!0),x(U,null,C(v.bankAccounts,o=>(c(),x("option",{key:o.id,value:o.id},u(o.bank_name)+" - "+u(o.account_number)+" ("+u(o.outlet_name)+") ",9,F))),128))],512),[[k,a.value.bank_account_id]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[r("Tanggal Transaksi "),e("span",{class:"text-red-500"},"*")],-1)),i(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=o=>a.value.transaction_date=o),class:"w-full border border-blue-200 rounded-lg px-4 py-3 focus:ring-blue-500 focus:border-blue-500 shadow-sm",required:""},null,512),[[p,a.value.transaction_date]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[r("Tipe Transaksi "),e("span",{class:"text-red-500"},"*")],-1)),i(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.transaction_type=o),class:"w-full border border-blue-200 rounded-lg px-4 py-3 focus:ring-blue-500 focus:border-blue-500 shadow-sm",required:""},t[12]||(t[12]=[e("option",{value:""},"Pilih Tipe",-1),e("option",{value:"credit"},"Credit (Masuk)",-1),e("option",{value:"debit"},"Debit (Keluar)",-1)]),512),[[k,a.value.transaction_type]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[r("Jumlah "),e("span",{class:"text-red-500"},"*")],-1)),i(e("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=o=>a.value.amount=o),step:"0.01",min:"0.01",class:"w-full border border-blue-200 rounded-lg px-4 py-3 focus:ring-blue-500 focus:border-blue-500 shadow-sm",placeholder:"0.00",required:""},null,512),[[p,a.value.amount]])]),e("div",q,[t[15]||(t[15]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Keterangan",-1)),i(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=o=>a.value.description=o),rows:"3",class:"w-full border border-blue-200 rounded-lg px-4 py-3 focus:ring-blue-500 focus:border-blue-500 shadow-sm",placeholder:"Masukkan keterangan transaksi..."},null,512),[[p,a.value.description]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Tipe Referensi",-1)),i(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>a.value.reference_type=o),class:"w-full border border-blue-200 rounded-lg px-4 py-3 focus:ring-blue-500 focus:border-blue-500 shadow-sm"},t[16]||(t[16]=[e("option",{value:""},"Tidak Ada",-1),e("option",{value:"outlet_payment"},"Outlet Payment",-1),e("option",{value:"food_payment"},"Food Payment",-1),e("option",{value:"non_food_payment"},"Non Food Payment",-1),e("option",{value:"manual"},"Manual",-1)]),512),[[k,a.value.reference_type]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"ID Referensi",-1)),i(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=o=>a.value.reference_id=o),class:"w-full border border-blue-200 rounded-lg px-4 py-3 focus:ring-blue-500 focus:border-blue-500 shadow-sm",placeholder:"Masukkan ID referensi jika ada"},null,512),[[p,a.value.reference_id]])])]),e("div",I,[e("button",{type:"button",onClick:m,class:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-semibold shadow-sm"}," Batal "),e("button",{type:"submit",disabled:b.value,class:"px-6 py-3 bg-blue-600 text-white rounded-lg font-bold shadow-lg hover:bg-blue-700 transition-all disabled:bg-gray-400 disabled:cursor-not-allowed"},u(b.value?"Menyimpan...":s.value?"Update":"Simpan"),9,P)])],32)])]),_:1}))}};export{$ as default};
