import{r as p,c as b,A as C,B as o,C as L,D as t,H as g,J as V,L as r,F as x,M as y,N as l,I as v,G as D,E as h}from"./vendor-vue-g7iCcTkf.js";import{A as N}from"./AppLayout-C6QNM8cp.js";import"./vendor-utils-CpgP2uT4.js";import"./app-D-uxhaxN.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-cFrDwyHJ.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const A={class:"max-w-4xl mx-auto py-8 px-4"},T={class:"flex flex-col md:flex-row md:items-center gap-4 mb-4"},B={class:"flex items-center gap-2"},R=["value"],S={class:"flex items-center gap-2"},F=["value"],K=["disabled"],W={key:0,class:"animate-spin mr-2"},M={key:1,class:"mr-2"},U={class:"bg-white rounded-xl shadow-lg overflow-x-auto"},E={class:"min-w-full divide-y divide-gray-200"},G={class:"bg-white divide-y divide-gray-200"},I={key:0},H={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},J={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},P={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},j={key:0},q={class:"bg-gray-50 font-bold"},z={class:"px-6 py-3 text-right"},oe={__name:"CategoryRecapReport",props:{recaps:Array,categories:Array,warehouses:Array},setup(m){const _=m,n=p(""),i=p(""),d=p(""),c=p(!1),u=b(()=>{let s=_.recaps;if(i.value&&(s=s.filter(a=>a.category_name===i.value)),d.value&&(s=s.filter(a=>a.warehouse_name===d.value)),!n.value)return s;const e=n.value.toLowerCase();return s.filter(a=>a.category_name&&a.category_name.toLowerCase().includes(e)||a.warehouse_name&&a.warehouse_name.toLowerCase().includes(e))}),w=b(()=>u.value.reduce((s,e)=>s+(Number(e.total_value)||0),0));function f(s){return!s||Number(s)===0?"-":Number(s).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2})}function k(){c.value=!0,window.location.reload()}return(s,e)=>(o(),C(N,null,{default:L(()=>[t("div",A,[e[13]||(e[13]=t("h1",{class:"text-2xl font-bold mb-6"},"Laporan Rekap Persediaan per Kategori",-1)),t("div",T,[g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),type:"text",placeholder:"Cari kategori/gudang...",class:"px-4 py-2 border border-gray-300 rounded-lg w-full md:w-64 focus:ring-blue-500 focus:border-blue-500"},null,512),[[V,n.value]]),t("div",B,[e[4]||(e[4]=t("label",{class:"text-sm"},"Kategori",-1)),g(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>i.value=a),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[e[3]||(e[3]=t("option",{value:""},"Semua Kategori",-1)),(o(!0),r(x,null,y(m.categories,a=>(o(),r("option",{key:a.id,value:a.name},l(a.name),9,R))),128))],512),[[v,i.value]])]),t("div",S,[e[6]||(e[6]=t("label",{class:"text-sm"},"Warehouse",-1)),g(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>d.value=a),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[e[5]||(e[5]=t("option",{value:""},"Semua Warehouse",-1)),(o(!0),r(x,null,y(m.warehouses,a=>(o(),r("option",{key:a.id,value:a.name},l(a.name),9,F))),128))],512),[[v,d.value]])]),t("button",{onClick:k,disabled:c.value,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-700"},[c.value?(o(),r("span",W,e[7]||(e[7]=[t("i",{class:"fas fa-spinner"},null,-1)]))):(o(),r("span",M,e[8]||(e[8]=[t("i",{class:"fas fa-sync-alt"},null,-1)]))),e[9]||(e[9]=D(" Load Data "))],8,K)]),t("div",U,[t("table",E,[e[12]||(e[12]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Kategori"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Warehouse"),t("th",{class:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Total Value")])],-1)),t("tbody",G,[u.value.length?h("",!0):(o(),r("tr",I,e[10]||(e[10]=[t("td",{colspan:"3",class:"text-center py-10 text-gray-400"},"Tidak ada data rekap kategori.",-1)]))),(o(!0),r(x,null,y(u.value,a=>(o(),r("tr",{key:a.category_name+"-"+a.warehouse_name,class:"hover:bg-gray-50 transition"},[t("td",H,l(a.category_name||"-"),1),t("td",J,l(a.warehouse_name||"-"),1),t("td",P,l(f(a.total_value)),1)]))),128))]),u.value.length?(o(),r("tfoot",j,[t("tr",q,[e[11]||(e[11]=t("td",{class:"text-right px-6 py-3",colspan:"2"},"Grand Total",-1)),t("td",z,l(f(w.value)),1)])])):h("",!0)])])])]),_:1}))}};export{oe as default};
