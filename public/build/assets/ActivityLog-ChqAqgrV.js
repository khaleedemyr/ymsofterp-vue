import{k as B,r as O,A as k,B as d,C as c,D as t,L as i,E as y,G as x,H as b,Z as P,J as v,F as p,M as m,N as a,I as f,l as V,Q as L,S as M,O as I,W as J}from"./vendor-vue-g7iCcTkf.js";import{A as z}from"./AppLayout-PZ6hJL3l.js";import"./vendor-utils-CpgP2uT4.js";import"./app-HnvVj7H8.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-BAmbAIMe.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const E={class:"w-full py-8 px-0"},K={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6"},R={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},W={class:"lg:col-span-2"},q=["value"],G=["value"],H=["value"],Q={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},Z={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 border-l-4 border-blue-500"},$={class:"flex items-center justify-between"},X={class:"text-2xl font-bold text-gray-900 dark:text-white"},Y={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 border-l-4 border-green-500"},tt={class:"flex items-center justify-between"},et={class:"text-2xl font-bold text-gray-900 dark:text-white"},rt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 border-l-4 border-yellow-500"},at={class:"flex items-center justify-between"},st={class:"text-2xl font-bold text-gray-900 dark:text-white"},lt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 border-l-4 border-purple-500"},dt={class:"flex items-center justify-between"},ot={class:"text-2xl font-bold text-gray-900 dark:text-white"},it={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden"},nt={class:"overflow-x-auto"},gt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},xt={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ut={key:0},yt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-white"},bt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-white"},pt={class:"flex items-center"},mt={class:"px-4 py-3 whitespace-nowrap"},ft={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-white"},kt={class:"px-4 py-3 text-sm text-gray-900 dark:text-white max-w-md"},ct=["title"],vt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400"},wt={class:"px-4 py-3 whitespace-nowrap text-sm"},ht=["onClick"],_t={key:0,class:"px-4 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600"},At={class:"flex items-center justify-between"},Ct={class:"text-sm text-gray-700 dark:text-gray-300"},Dt={class:"flex gap-2"},Ut={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"},St={class:"p-6 space-y-4"},Tt={class:"grid grid-cols-2 gap-4"},jt={class:"text-gray-900 dark:text-white"},Vt={class:"text-gray-900 dark:text-white"},Lt={class:"text-gray-900 dark:text-white"},Mt={class:"text-gray-900 dark:text-white"},Nt={class:"text-gray-900 dark:text-white"},Ft={class:"text-gray-900 dark:text-white text-xs break-all"},Bt={class:"text-gray-900 dark:text-white mt-1"},Ot={key:0},Pt={class:"mt-1 p-3 bg-gray-100 dark:bg-gray-900 rounded text-xs text-gray-900 dark:text-white overflow-x-auto"},It={key:1},Jt={class:"mt-1 p-3 bg-gray-100 dark:bg-gray-900 rounded text-xs text-gray-900 dark:text-white overflow-x-auto"},Xt={__name:"ActivityLog",props:{logs:Object,users:Array,activityTypes:Array,modules:Array,filters:Object},setup(l){var A,C,D,U,S,T,j;const u=l,s=B({user_id:((A=u.filters)==null?void 0:A.user_id)||"",activity_type:((C=u.filters)==null?void 0:C.activity_type)||"",module:((D=u.filters)==null?void 0:D.module)||"",date_from:((U=u.filters)==null?void 0:U.date_from)||"",date_to:((S=u.filters)==null?void 0:S.date_to)||"",search:((T=u.filters)==null?void 0:T.search)||"",per_page:((j=u.filters)==null?void 0:j.per_page)||25}),o=O(null);function n(){J.get("/report/activity-log",s,{preserveState:!0,preserveScroll:!0})}function N(){s.user_id="",s.activity_type="",s.module="",s.date_from="",s.date_to="",s.search="",s.per_page=25,n()}function F(g){o.value=g}function w(){o.value=null}function h(g){return g?new Date(g).toLocaleString("id-ID",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"}function _(g){return{create:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",update:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",delete:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",approve:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",reject:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",login:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",logout:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}[g==null?void 0:g.toLowerCase()]||"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}return(g,e)=>(d(),k(z,null,{default:c(()=>[t("div",E,[t("div",{class:"flex justify-between items-center mb-6"},[e[8]||(e[8]=t("h1",{class:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2"},[t("i",{class:"fa-solid fa-list-alt"}),x(" Activity Log Report ")],-1)),t("div",{class:"flex gap-2 items-center"},[t("button",{onClick:N,class:"bg-gray-500 text-white px-4 py-2 rounded-lg shadow hover:bg-gray-600 transition-all font-semibold"},e[7]||(e[7]=[t("i",{class:"fa fa-refresh mr-2"},null,-1),x(" Reset ")]))])]),t("div",K,[e[21]||(e[21]=t("h2",{class:"text-lg font-semibold text-gray-800 dark:text-white mb-4"},[t("i",{class:"fa fa-filter mr-2"}),x(" Filters ")],-1)),t("div",R,[t("div",W,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Search (Description, Module, User, IP) ",-1)),b(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>s.search=r),onKeyup:P(n,["enter"]),placeholder:"Search...",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,544),[[v,s.search]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"User",-1)),b(t("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>s.user_id=r),onChange:n,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[e[10]||(e[10]=t("option",{value:""},"All Users",-1)),(d(!0),i(p,null,m(l.users,r=>(d(),i("option",{key:r.id,value:r.id},a(r.nama_lengkap),9,q))),128))],544),[[f,s.user_id]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Activity Type",-1)),b(t("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>s.activity_type=r),onChange:n,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[e[12]||(e[12]=t("option",{value:""},"All Types",-1)),(d(!0),i(p,null,m(l.activityTypes,r=>(d(),i("option",{key:r,value:r},a(r),9,G))),128))],544),[[f,s.activity_type]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Module",-1)),b(t("select",{"onUpdate:modelValue":e[3]||(e[3]=r=>s.module=r),onChange:n,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[e[14]||(e[14]=t("option",{value:""},"All Modules",-1)),(d(!0),i(p,null,m(l.modules,r=>(d(),i("option",{key:r,value:r},a(r),9,H))),128))],544),[[f,s.module]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Date From",-1)),b(t("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=r=>s.date_from=r),onChange:n,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,544),[[v,s.date_from]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Date To",-1)),b(t("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=r=>s.date_to=r),onChange:n,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},null,544),[[v,s.date_to]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Per Page",-1)),b(t("select",{"onUpdate:modelValue":e[6]||(e[6]=r=>s.per_page=r),onChange:n,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},e[18]||(e[18]=[t("option",{value:10},"10",-1),t("option",{value:25},"25",-1),t("option",{value:50},"50",-1),t("option",{value:100},"100",-1)]),544),[[f,s.per_page]])]),t("div",{class:"flex items-end"},[t("button",{onClick:n,class:"w-full bg-blue-500 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-600 transition-all font-semibold"},e[20]||(e[20]=[t("i",{class:"fa fa-search mr-2"},null,-1),x(" Apply Filters ")]))])])]),t("div",Q,[t("div",Z,[t("div",$,[t("div",null,[e[22]||(e[22]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Total Logs",-1)),t("p",X,a(l.logs.total||0),1)]),e[23]||(e[23]=t("i",{class:"fa fa-list text-blue-500 text-2xl"},null,-1))])]),t("div",Y,[t("div",tt,[t("div",null,[e[24]||(e[24]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Showing",-1)),t("p",et,a(l.logs.from||0)+" - "+a(l.logs.to||0),1)]),e[25]||(e[25]=t("i",{class:"fa fa-eye text-green-500 text-2xl"},null,-1))])]),t("div",rt,[t("div",at,[t("div",null,[e[26]||(e[26]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Unique Users",-1)),t("p",st,a(l.users.length),1)]),e[27]||(e[27]=t("i",{class:"fa fa-users text-yellow-500 text-2xl"},null,-1))])]),t("div",lt,[t("div",dt,[t("div",null,[e[28]||(e[28]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Modules",-1)),t("p",ot,a(l.modules.length),1)]),e[29]||(e[29]=t("i",{class:"fa fa-cubes text-purple-500 text-2xl"},null,-1))])])]),t("div",it,[t("div",nt,[t("table",gt,[e[33]||(e[33]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Date & Time "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," User "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Activity Type "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Module "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Description "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," IP Address "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",xt,[l.logs.data&&l.logs.data.length===0?(d(),i("tr",ut,e[30]||(e[30]=[t("td",{colspan:"7",class:"px-4 py-8 text-center text-gray-500 dark:text-gray-400"},[t("i",{class:"fa fa-inbox text-4xl mb-2"}),t("p",null,"No activity logs found")],-1)]))):y("",!0),(d(!0),i(p,null,m(l.logs.data,r=>(d(),i("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[t("td",yt,a(h(r.created_at)),1),t("td",bt,[t("div",pt,[e[31]||(e[31]=t("i",{class:"fa fa-user mr-2 text-gray-400"},null,-1)),x(" "+a(r.user_name||"Unknown"),1)])]),t("td",mt,[t("span",{class:V([_(r.activity_type),"px-2 py-1 text-xs font-semibold rounded-full"])},a(r.activity_type),3)]),t("td",ft,a(r.module||"-"),1),t("td",kt,[t("div",{class:"truncate",title:r.description},a(r.description||"-"),9,ct)]),t("td",vt,a(r.ip_address||"-"),1),t("td",wt,[t("button",{onClick:zt=>F(r),class:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-semibold"},e[32]||(e[32]=[t("i",{class:"fa fa-eye mr-1"},null,-1),x(" View ")]),8,ht)])]))),128))])])]),l.logs.data&&l.logs.data.length>0?(d(),i("div",_t,[t("div",At,[t("div",Ct," Showing "+a(l.logs.from)+" to "+a(l.logs.to)+" of "+a(l.logs.total)+" results ",1),t("div",Dt,[l.logs.prev_page_url?(d(),k(L(M),{key:0,href:l.logs.prev_page_url,class:"px-3 py-1 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-500"},{default:c(()=>e[34]||(e[34]=[x(" Previous ")])),_:1},8,["href"])):y("",!0),l.logs.next_page_url?(d(),k(L(M),{key:1,href:l.logs.next_page_url,class:"px-3 py-1 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-500"},{default:c(()=>e[35]||(e[35]=[x(" Next ")])),_:1},8,["href"])):y("",!0)])])])):y("",!0)]),o.value?(d(),i("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-[9999] flex items-center justify-center p-4",onClick:I(w,["self"])},[t("div",Ut,[t("div",{class:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex justify-between items-center"},[e[37]||(e[37]=t("h2",{class:"text-xl font-bold text-gray-800 dark:text-white"},[t("i",{class:"fa fa-info-circle mr-2"}),x(" Activity Log Detail ")],-1)),t("button",{onClick:w,class:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"},e[36]||(e[36]=[t("i",{class:"fa fa-times text-xl"},null,-1)]))]),t("div",St,[t("div",Tt,[t("div",null,[e[38]||(e[38]=t("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Date & Time",-1)),t("p",jt,a(h(o.value.created_at)),1)]),t("div",null,[e[39]||(e[39]=t("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"User",-1)),t("p",Vt,a(o.value.user_name||"Unknown"),1)]),t("div",null,[e[40]||(e[40]=t("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Activity Type",-1)),t("p",Lt,[t("span",{class:V([_(o.value.activity_type),"px-2 py-1 text-xs font-semibold rounded-full"])},a(o.value.activity_type),3)])]),t("div",null,[e[41]||(e[41]=t("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Module",-1)),t("p",Mt,a(o.value.module||"-"),1)]),t("div",null,[e[42]||(e[42]=t("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"IP Address",-1)),t("p",Nt,a(o.value.ip_address||"-"),1)]),t("div",null,[e[43]||(e[43]=t("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"User Agent",-1)),t("p",Ft,a(o.value.user_agent||"-"),1)])]),t("div",null,[e[44]||(e[44]=t("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Description",-1)),t("p",Bt,a(o.value.description||"-"),1)]),o.value.old_data?(d(),i("div",Ot,[e[45]||(e[45]=t("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Old Data",-1)),t("pre",Pt,a(JSON.stringify(o.value.old_data,null,2)),1)])):y("",!0),o.value.new_data?(d(),i("div",It,[e[46]||(e[46]=t("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"New Data",-1)),t("pre",Jt,a(JSON.stringify(o.value.new_data,null,2)),1)])):y("",!0)])])])):y("",!0)])]),_:1}))}};export{Xt as default};
