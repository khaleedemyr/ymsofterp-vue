import{r as x,w as D,W as d,c as O,A as F,B as a,C,D as e,x as B,G as h,Q as K,l as f,H as Y,J as j,L as l,E as A,F as y,M as w,N as i}from"./vendor-vue-g7iCcTkf.js";import{l as z}from"./lodash-DB3HVzpp.js";import{S as M}from"./app-5sHs3Z-e.js";import{A as P}from"./AppLayout-IyEgvQ-G.js";import R from"./SubCategoryFormModal-DjQxnNr6.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as W}from"./vendor-ui-CrPgGUUb.js";import"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./ProfileUpdateModal-C59QAxMM.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vue-multiselect.esm-V-bx43V9.js";/* empty css                            */const G={class:"max-w-7xl w-full mx-auto py-8 px-2"},J={class:"flex items-center gap-3 mb-4"},Q={class:"mb-4"},q={class:"bg-white rounded-2xl shadow-2xl overflow-x-auto transition-all"},X={class:"w-full min-w-full divide-y divide-gray-200"},Z={key:0},ee={class:"px-6 py-3 font-semibold"},te={class:"px-6 py-3"},se={class:"px-6 py-3"},oe={class:"px-6 py-3 text-gray-500"},ae={class:"px-6 py-3"},le=["onClick"],re={class:"px-6 py-3"},ie={class:"px-6 py-3"},ne={key:0},ue={key:0},ce={key:0},de={key:1},pe={key:1,class:"text-gray-400"},xe={key:1,class:"text-gray-400"},fe={class:"px-6 py-3"},be={class:"flex gap-2"},ge=["onClick"],me=["onClick"],ve={class:"flex justify-end mt-4 gap-2"},he=["disabled","onClick","innerHTML"],ye={__name:"Index",props:{subCategories:Array,categories:Array,coas:Array,regions:Array,outlets:Array},setup(u){var S;const p=u,c=x(((S=p.filters)==null?void 0:S.search)||""),b=x(!1),g=x("create"),m=x(null),n=x(!1);D(n,o=>{d.get("/sub-categories",{search:c.value,status:o?"inactive":"active"},{preserveState:!0,replace:!0})});const L=z.debounce(()=>{d.get("/sub-categories",{search:c.value,status:n.value?"inactive":"active"},{preserveState:!0,replace:!0})},400);function T(){L()}function V(o){o&&d.visit(o,{preserveState:!0,replace:!0})}function H(){g.value="create",m.value=null,b.value=!0}function I(o){g.value="edit",m.value=o,b.value=!0}async function N(o){(await M.fire({title:"Hapus Sub Kategori?",text:`Yakin ingin menghapus sub kategori "${o.name}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed&&d.delete(route("sub-categories.destroy",o.id),{onSuccess:()=>M.fire("Berhasil","Sub kategori berhasil dihapus!","success")})}function _(){d.reload({preserveState:!0,replace:!0})}function $(){b.value=!1}function E(o){const s=o.status==="active"?"inactive":"active";d.patch(route("sub-categories.toggle-status",o.id),{status:s},{preserveState:!0,onSuccess:_})}const k=O(()=>{if(!p.subCategories||!p.subCategories.data)return[];let o=p.subCategories.data;if(c.value){const s=c.value.toLowerCase();o=o.filter(t=>t.code&&t.code.toLowerCase().includes(s)||t.name&&t.name.toLowerCase().includes(s)||t.description&&t.description.toLowerCase().includes(s))}return n.value?o=o.filter(s=>s.status==="inactive"):o=o.filter(s=>s.status==="active"),o});return(o,s)=>(a(),F(P,null,{default:C(()=>[e("div",G,[e("div",{class:"flex justify-between items-center mb-6"},[s[2]||(s[2]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-tag text-blue-500"}),h(" Sub Categories ")],-1)),e("button",{onClick:H,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"}," + Buat Sub Kategori Baru ")]),e("div",J,[B(K(W),{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=t=>n.value=t),class:f([n.value?"bg-blue-600":"bg-gray-200","relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none"])},{default:C(()=>[e("span",{class:f([n.value?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition"])},null,2)]),_:1},8,["modelValue","class"]),s[3]||(s[3]=e("span",{class:"ml-2 text-sm text-gray-700"},"Tampilkan Inactive",-1))]),e("div",Q,[Y(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>c.value=t),onInput:T,type:"text",placeholder:"Cari sub kategori...",class:"w-full px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},null,544),[[j,c.value]])]),e("div",q,[e("table",X,[s[7]||(s[7]=e("thead",{class:"bg-gradient-to-r from-blue-50 to-blue-100"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider rounded-tl-2xl"},"Nama"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Kategori"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"CoA"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Deskripsi"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Show POS"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Availability"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider rounded-tr-2xl"},"Aksi")])],-1)),e("tbody",null,[k.value.length===0?(a(),l("tr",Z,s[4]||(s[4]=[e("td",{colspan:"8",class:"text-center py-10 text-gray-400"},"Tidak ada data sub kategori.",-1)]))):A("",!0),(a(!0),l(y,null,w(k.value,t=>{var v;return a(),l("tr",{key:t.id,class:"hover:bg-blue-50 transition shadow-sm"},[e("td",ee,i(t.name),1),e("td",te,i(((v=u.categories.find(r=>r.id===t.category_id))==null?void 0:v.name)||"-"),1),e("td",se,i(t.coa?`${t.coa.code} - ${t.coa.name}`:"-"),1),e("td",oe,i(t.description||"-"),1),e("td",ae,[e("button",{class:f([t.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700","px-2 py-1 rounded-full text-xs font-semibold shadow hover:opacity-80 transition"]),onClick:r=>E(t)},i(t.status),11,le)]),e("td",re,[e("span",{class:f([t.show_pos==1?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700","px-2 py-1 rounded-full text-xs font-semibold shadow"])},i(t.show_pos==1?"Yes":"No"),3)]),e("td",ie,[t.show_pos===1?(a(),l("div",ne,[t.availabilities&&t.availabilities.length>0?(a(),l("div",ue,[(a(!0),l(y,null,w(t.availabilities,r=>(a(),l("div",{key:r.id,class:"mb-1"},[r.availability_type==="byRegion"&&r.region?(a(),l("span",ce," Region: "+i(r.region.name),1)):r.availability_type==="byOutlet"&&r.outlet?(a(),l("span",de," Outlet: "+i(r.outlet.nama_outlet),1)):A("",!0)]))),128))])):(a(),l("span",pe,"All Outlets"))])):(a(),l("span",xe,"-"))]),e("td",fe,[e("div",be,[e("button",{onClick:r=>I(t),class:"inline-flex items-center btn btn-xs bg-yellow-100 text-yellow-800 hover:bg-yellow-200 rounded px-2 py-1 font-semibold transition"},s[5]||(s[5]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M15.232 5.232l3.536 3.536M9 13l6-6m2 2l-6 6m-2 2h6a2 2 0 002-2v-6a2 2 0 00-2-2H7a2 2 0 00-2 2v6a2 2 0 002 2z"})],-1),h(" Edit ")]),8,ge),e("button",{onClick:r=>N(t),class:"inline-flex items-center btn btn-xs bg-red-100 text-red-700 hover:bg-red-200 rounded px-2 py-1 font-semibold transition"},s[6]||(s[6]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M6 18L18 6M6 6l12 12"})],-1),h(" Hapus ")]),8,me)])])])}),128))])])]),e("div",ve,[(a(!0),l(y,null,w(p.subCategories.links,t=>(a(),l("button",{key:t.label,disabled:!t.url,onClick:v=>V(t.url),innerHTML:t.label,class:f(["px-3 py-1 rounded-lg border text-sm font-semibold",[t.active?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-700 hover:bg-blue-50",t.url?"cursor-pointer":"opacity-50 cursor-not-allowed"]])},null,10,he))),128))]),B(R,{show:b.value,mode:g.value,"sub-category":m.value,categories:u.categories,coas:u.coas,regions:u.regions,outlets:u.outlets,onClose:$,onSuccess:_},null,8,["show","mode","sub-category","categories","coas","regions","outlets"])])]),_:1}))}},Ee=U(ye,[["__scopeId","data-v-fee83a54"]]);export{Ee as default};
