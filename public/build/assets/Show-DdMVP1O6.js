import{r as D,c as $,A as se,B as n,C as j,D as e,L as l,E as r,G as u,N as i,l as y,x as ie,Q as G,S as V,F as k,M as R,Y as we,H as ne,J as ke,V as Re,O as _e,W as N}from"./vendor-vue-g7iCcTkf.js";import{A as qe}from"./AppLayout-BE0dNalr.js";import{a as Ie}from"./vendor-utils-CpgP2uT4.js";import"./app-C51E4rvH.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-D219A2Up.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const Ee={class:"w-full py-8 px-4"},De={class:"flex justify-between items-center mb-6"},Ce={class:"flex items-center gap-3"},Te={class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},Pe={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},Ae={class:"flex space-x-2"},Ue={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Oe={class:"lg:col-span-2 space-y-6"},Se={class:"bg-white rounded-xl shadow-lg p-6"},je={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ne={class:"text-lg font-semibold text-gray-900"},Be={class:"text-gray-900"},Le={class:"text-lg font-semibold text-green-600"},Me={class:"text-gray-900"},Fe={key:0},$e={class:"text-gray-900"},Ge={key:1},Ve={class:"text-gray-900"},ze={key:2},Je={class:"text-gray-900"},Ke={key:3},We={class:"text-gray-900"},He={class:"text-gray-900"},Qe={key:0,class:"mt-4"},Ye={class:"text-gray-900 mt-1"},Xe={key:0,class:"bg-white rounded-xl shadow-lg p-6"},Ze={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},et={class:"ml-2 text-xs font-normal text-gray-500"},tt={key:0,class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},st={class:"font-semibold text-gray-900"},it={class:"font-semibold text-green-800"},nt={class:"font-semibold text-gray-900"},lt={key:1,class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},ot={class:"font-semibold text-gray-900"},at={class:"text-xs text-gray-500 mt-1"},rt={class:"font-semibold text-green-800"},ut={class:"font-semibold text-gray-900"},dt={key:1,class:"bg-white rounded-xl shadow-lg p-6"},ct={class:"space-y-4"},gt={key:0},mt={class:"flex flex-wrap gap-2"},xt={key:1},ft={class:"text-gray-900 bg-gray-50 p-3 rounded-lg border border-gray-200 whitespace-pre-wrap"},bt={key:2},yt={class:"text-gray-900 bg-gray-50 p-3 rounded-lg border border-gray-200 whitespace-pre-wrap"},pt={key:2,class:"bg-white rounded-xl shadow-lg p-6"},ht={class:"space-y-4"},vt={class:"text-lg font-semibold text-gray-900"},wt={key:0},kt={class:"text-gray-900 bg-gray-50 p-3 rounded-lg border border-gray-200 whitespace-pre-wrap"},Rt={key:3,class:"bg-white rounded-xl shadow-lg p-6"},_t={class:"space-y-6"},qt={class:"text-md font-semibold text-gray-900 mb-3 flex items-center"},It={class:"space-y-4"},Et={class:"text-sm font-semibold text-gray-700 mb-2"},Dt={class:"overflow-x-auto"},Ct={class:"min-w-full divide-y divide-gray-200"},Tt={class:"bg-white divide-y divide-gray-200"},Pt={class:"px-3 py-2 text-sm text-gray-900"},At={key:0,class:"text-xs text-gray-500 mt-1"},Ut={key:0},Ot={key:1,class:"text-xs text-gray-500 mt-1"},St={class:"px-3 py-2 text-sm text-gray-900"},jt={class:"px-3 py-2 text-sm text-gray-900"},Nt={class:"px-3 py-2 text-sm text-gray-900"},Bt={class:"px-3 py-2 text-sm text-gray-900 text-right"},Lt={class:"mt-4 pt-4 border-t border-gray-200"},Mt={class:"flex justify-end"},Ft={class:"text-right"},$t={class:"text-lg font-bold text-gray-900"},Gt={key:4,class:"bg-white rounded-xl shadow-lg p-6"},Vt={class:"overflow-x-auto"},zt={class:"min-w-full divide-y divide-gray-200"},Jt={class:"bg-white divide-y divide-gray-200"},Kt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Wt={key:0,class:"text-xs text-gray-500 mt-1"},Ht={key:0},Qt={key:1,class:"text-xs text-gray-500 mt-1"},Yt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Xt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Zt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},es={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right"},ts={class:"px-6 py-4 text-right font-bold text-gray-900"},ss={key:5,class:"bg-white rounded-xl shadow-lg p-6"},is={class:"space-y-4"},ns={class:"flex items-center space-x-4"},ls={class:"flex items-center space-x-3"},os={class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},as={class:"flex-1"},rs={class:"font-semibold text-gray-900 text-lg"},us={class:"text-sm text-gray-600 flex items-center mt-1"},ds={key:0,class:"text-sm text-blue-600 font-medium mt-1 flex items-center"},cs={key:1,class:"text-sm text-gray-600 mt-2 p-2 bg-gray-100 rounded border-l-4 border-blue-400"},gs={class:"text-right"},ms={key:0,class:"text-xs text-gray-500 mt-1"},xs={key:1,class:"text-xs text-gray-500 mt-1"},fs={key:6,class:"bg-white rounded-xl shadow-lg p-6"},bs={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},ys={class:"ml-2 text-sm font-normal text-gray-600"},ps={key:0,class:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg"},hs={class:"text-sm text-blue-600"},vs={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ws={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},ks={class:"flex items-center justify-between"},Rs={class:"text-sm font-medium text-blue-600"},_s={class:"text-2xl font-bold text-blue-800"},qs={key:0,class:"text-xs text-gray-500 mt-1"},Is={class:"bg-orange-50 border border-orange-200 rounded-lg p-4"},Es={class:"flex items-center justify-between"},Ds={class:"text-2xl font-bold text-orange-800"},Cs={class:"bg-green-50 border border-green-200 rounded-lg p-4"},Ts={class:"flex items-center justify-between"},Ps={class:"mt-4"},As={class:"flex justify-between text-sm text-gray-600 mb-2"},Us={class:"w-full bg-gray-200 rounded-full h-3"},Os={key:1,class:"mt-4 p-3 bg-red-100 border border-red-300 rounded text-red-800 text-sm"},Ss={key:0},js={key:1},Ns={key:2,class:"mt-4 p-3 bg-yellow-100 border border-yellow-300 rounded text-yellow-800 text-sm"},Bs={key:7,class:"bg-white rounded-xl shadow-lg p-6"},Ls={class:"p-4 bg-blue-50 rounded-lg"},Ms={class:"text-sm text-gray-500 mt-1"},Fs={key:8,class:"bg-white rounded-xl shadow-lg p-6"},$s={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},Gs={class:"ml-2 bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full"},Vs={class:"space-y-4"},zs={key:0,class:"text-sm font-semibold text-gray-700 mb-3 flex items-center"},Js={class:"ml-2 bg-gray-100 text-gray-800 text-xs font-medium px-2 py-0.5 rounded-full"},Ks={class:"space-y-3"},Ws={class:"flex items-center space-x-3"},Hs={key:0,class:"relative"},Qs=["src","alt","onClick"],Ys={class:"text-sm font-medium text-gray-900"},Xs={class:"flex items-center space-x-4 text-xs text-gray-500"},Zs={class:"flex items-center space-x-2"},ei=["onClick"],ti=["onClick"],si=["onClick"],ii={key:9,class:"bg-white rounded-xl shadow-lg p-6"},ni={class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},li={key:0,class:"ml-2 bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full"},oi={key:0,class:"space-y-3"},ai={class:"flex items-center space-x-3"},ri={key:0,class:"relative"},ui=["src","alt","onClick"],di={class:"text-sm font-medium text-gray-900"},ci={class:"flex items-center space-x-4 text-xs text-gray-500"},gi={class:"flex items-center space-x-2"},mi=["onClick"],xi=["onClick"],fi=["onClick"],bi={key:1,class:"text-center py-8 text-gray-500"},yi={key:10,class:"bg-white rounded-xl shadow-lg p-6"},pi={class:"bg-white rounded-xl shadow-lg p-6"},hi={class:"mb-4 p-4 bg-gray-50 rounded-lg"},vi={class:"mt-2 flex items-center justify-between"},wi={class:"flex items-center"},ki=["disabled"],Ri={key:0,class:"space-y-4"},_i={class:"flex items-center justify-between mb-2"},qi={class:"flex items-center space-x-2"},Ii={class:"font-medium text-gray-900"},Ei={key:0,class:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full"},Di={class:"text-sm text-gray-500"},Ci={class:"text-gray-700"},Ti={key:1,class:"text-center py-8 text-gray-500"},Pi={class:"space-y-6"},Ai={class:"bg-white rounded-xl shadow-lg p-6"},Ui={class:"space-y-2"},Oi={key:4,class:"text-center py-4 text-gray-500"},Si={class:"bg-white rounded-xl shadow-lg p-6"},ji={class:"space-y-4"},Ni={class:"flex items-center space-x-3"},Bi={class:"text-xs text-gray-500"},Li={key:0,class:"flex items-center space-x-3"},Mi={class:"text-xs text-gray-500"},Fi={key:1,class:"flex items-center space-x-3"},$i={class:"text-xs text-gray-500"},Gi=["src","alt"],Vi={class:"absolute bottom-4 left-4 right-4 text-center"},zi={class:"text-white bg-black bg-opacity-50 px-3 py-1 rounded-lg text-sm"},sn={__name:"Show",props:{purchaseRequisition:Object,budgetInfo:Object,modeSpecificData:Object,currentUser:Object},setup(s){const d=s,C=D(""),A=D(!1),le=D(!1);D("");const B=D(!1),E=D(null),z=$(()=>{var a;return(d.purchaseRequisition.status==="DRAFT"||d.purchaseRequisition.status==="SUBMITTED")&&d.purchaseRequisition.created_by===((a=d.currentUser)==null?void 0:a.id)}),J=$(()=>{var a;return d.purchaseRequisition.status==="DRAFT"&&d.purchaseRequisition.created_by===((a=d.currentUser)==null?void 0:a.id)}),L=$(()=>{var m,v;if(d.purchaseRequisition.status!=="SUBMITTED")return!1;const a=(m=d.purchaseRequisition.approval_flows)==null?void 0:m.find(f=>{var h;return f.approver_id===((h=d.currentUser)==null?void 0:h.id)&&f.status==="PENDING"});if(!a)return!1;const t=(v=d.purchaseRequisition.approval_flows)==null?void 0:v.filter(f=>f.status==="PENDING");if(!t||t.length===0)return!1;const g=t.reduce((f,h)=>h.approval_level<f.approval_level?h:f);return a.approval_level===g.approval_level});function oe(a){return{DRAFT:"bg-gray-100 text-gray-800",SUBMITTED:"bg-yellow-100 text-yellow-800",APPROVED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800",PROCESSED:"bg-blue-100 text-blue-800",COMPLETED:"bg-purple-100 text-purple-800"}[a]||"bg-gray-100 text-gray-800"}function ae(a){return{LOW:"bg-green-100 text-green-800",MEDIUM:"bg-yellow-100 text-yellow-800",HIGH:"bg-orange-100 text-orange-800",URGENT:"bg-red-100 text-red-800"}[a]||"bg-gray-100 text-gray-800"}function b(a){return a?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a):"-"}function w(a){return a?new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function U(a){const t=a.split(".").pop().toLowerCase();return{pdf:"fa-file-pdf text-red-500",doc:"fa-file-word text-blue-500",docx:"fa-file-word text-blue-500",xls:"fa-file-excel text-green-500",xlsx:"fa-file-excel text-green-500",ppt:"fa-file-powerpoint text-orange-500",pptx:"fa-file-powerpoint text-orange-500",jpg:"fa-file-image text-purple-500",jpeg:"fa-file-image text-purple-500",png:"fa-file-image text-purple-500",gif:"fa-file-image text-purple-500",webp:"fa-file-image text-purple-500",bmp:"fa-file-image text-purple-500",txt:"fa-file-alt text-gray-500",zip:"fa-file-archive text-yellow-500",rar:"fa-file-archive text-yellow-500"}[t]||"fa-file text-gray-500"}function O(a){const t=["jpg","jpeg","png","gif","webp","bmp"],g=a.split(".").pop().toLowerCase();return t.includes(g)}function K(a){if(a===0)return"0 Bytes";const t=1024,g=["Bytes","KB","MB","GB"],m=Math.floor(Math.log(a)/Math.log(t));return parseFloat((a/Math.pow(t,m)).toFixed(2))+" "+g[m]}function W(a){const t=document.createElement("a");t.href=`/purchase-requisitions/attachments/${a.id}/download`,t.download=a.file_name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}function H(a){var t,g,m;return a.uploaded_by===((t=window.authUser)==null?void 0:t.id)||((m=(g=window.authUser)==null?void 0:g.roles)==null?void 0:m.includes("admin"))}async function Q(a){var t,g;if(confirm("Are you sure you want to delete this file?"))try{if((await Ie.delete(`/purchase-requisitions/attachments/${a.id}`)).data.success){const v=d.purchaseRequisition.attachments.findIndex(f=>f.id===a.id);v>-1&&d.purchaseRequisition.attachments.splice(v,1)}}catch(m){console.error("Failed to delete attachment:",m),alert(`Failed to delete file: ${((g=(t=m.response)==null?void 0:t.data)==null?void 0:g.message)||m.message}`)}}function S(a){E.value=a,B.value=!0}function Y(){B.value=!1,E.value=null}function re(a){switch(a){case"APPROVED":return"bg-green-50 border-green-200";case"REJECTED":return"bg-red-50 border-red-200";case"PENDING":return"bg-yellow-50 border-yellow-200";default:return"bg-gray-50 border-gray-200"}}function ue(a){switch(a){case"APPROVED":return"bg-green-100 text-green-600";case"REJECTED":return"bg-red-100 text-red-600";case"PENDING":return"bg-yellow-100 text-yellow-600";default:return"bg-gray-100 text-gray-600"}}function de(a){switch(a){case"APPROVED":return"fa fa-check text-sm";case"REJECTED":return"fa fa-times text-sm";case"PENDING":return"fa fa-clock text-sm";default:return"fa fa-question text-sm"}}function ce(a){switch(a){case"APPROVED":return"text-green-600";case"REJECTED":return"text-red-600";case"PENDING":return"text-yellow-600";default:return"text-gray-600"}}function M(a){return["January","February","March","April","May","June","July","August","September","October","November","December"][a-1]||"Unknown"}function ge(a,t){const g=a/t*100;return g>=100?"bg-red-500":g>=80?"bg-yellow-500":g>=60?"bg-orange-500":"bg-green-500"}function F(){return d.budgetInfo?d.budgetInfo.budget_type==="PER_OUTLET"?d.budgetInfo.outlet_budget:d.budgetInfo.category_budget:0}function X(){return d.budgetInfo?d.budgetInfo.budget_type==="PER_OUTLET"?d.budgetInfo.outlet_used_amount:d.budgetInfo.category_used_amount:0}function q(){return d.budgetInfo?d.budgetInfo.budget_type==="PER_OUTLET"?d.budgetInfo.outlet_remaining_amount:d.budgetInfo.category_remaining_amount:0}function Z(){const a=X(),t=F();return t===0?0:a/t*100}const me=()=>{N.visit(`/purchase-requisitions/${d.purchaseRequisition.id}/edit`)},xe=()=>{N.post(`/purchase-requisitions/${d.purchaseRequisition.id}/comments`,{comment:C.value,is_internal:A.value},{onSuccess:()=>{C.value="",A.value=!1}})},fe=()=>{N.post(`/purchase-requisitions/${d.purchaseRequisition.id}/submit`)},be=()=>{N.post(`/purchase-requisitions/${d.purchaseRequisition.id}/approve`)};function ye(a){return{pr_ops:"Purchase Requisition",purchase_payment:"Payment Application",travel_application:"Travel Application",kasbon:"Kasbon"}[a]||a}function pe(a){return{pr_ops:"bg-blue-100 text-blue-800",purchase_payment:"bg-green-100 text-green-800",travel_application:"bg-purple-100 text-purple-800",kasbon:"bg-orange-100 text-orange-800"}[a]||"bg-gray-100 text-gray-800"}function he(a){if(!a||a.length===0)return{};const t={};return a.forEach(g=>{var _,T,P,o,p,c;const m=g.outlet_id||"no-outlet",v=((_=g.outlet)==null?void 0:_.nama_outlet)||((P=(T=d.purchaseRequisition)==null?void 0:T.outlet)==null?void 0:P.nama_outlet)||"General",f=g.category_id||"no-category",h=((o=g.category)==null?void 0:o.name)||((c=(p=d.purchaseRequisition)==null?void 0:p.category)==null?void 0:c.name)||"General";t[m]||(t[m]={outlet_id:m,outlet_name:v,categories:{}}),t[m].categories[f]||(t[m].categories[f]={category_id:f,category_name:h,items:[]}),t[m].categories[f].items.push(g)}),t}function ve(a){if(!a||a.length===0)return{};const t={};return a.forEach(g=>{var f,h,_;const m=g.outlet_id||"no-outlet",v=((f=g.outlet)==null?void 0:f.nama_outlet)||((_=(h=d.purchaseRequisition)==null?void 0:h.outlet)==null?void 0:_.nama_outlet)||"General";t[m]||(t[m]={outlet_id:m,outlet_name:v,attachments:[]}),t[m].attachments.push(g)}),t}return(a,t)=>(n(),se(qe,{title:"Payment Details"},{default:j(()=>{var g,m,v,f,h,_,T,P;return[e("div",Ee,[e("div",De,[e("div",Ce,[e("h1",Te,[t[6]||(t[6]=e("i",{class:"fa-solid fa-shopping-cart text-blue-500"},null,-1)),u(" Payment: "+i(s.purchaseRequisition.pr_number),1)]),s.purchaseRequisition.mode?(n(),l("span",{key:0,class:y(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",pe(s.purchaseRequisition.mode)])},i(ye(s.purchaseRequisition.mode)),3)):(n(),l("span",Pe," Legacy Data "))]),e("div",Ae,[s.purchaseRequisition.status==="DRAFT"||s.purchaseRequisition.status==="SUBMITTED"?(n(),se(G(V),{key:0,href:`/purchase-requisitions/${s.purchaseRequisition.id}/edit`,class:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"},{default:j(()=>t[7]||(t[7]=[e("i",{class:"fas fa-edit mr-2"},null,-1),u(" Edit ")])),_:1},8,["href"])):r("",!0),ie(G(V),{href:"/purchase-requisitions",class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"},{default:j(()=>t[8]||(t[8]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),u(" Back to List ")])),_:1})])]),e("div",Ue,[e("div",Oe,[e("div",Se,[t[21]||(t[21]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Basic Information",-1)),e("div",je,[e("div",null,[t[9]||(t[9]=e("label",{class:"text-sm font-medium text-gray-600"},"PR Number",-1)),e("p",Ne,i(s.purchaseRequisition.pr_number),1)]),e("div",null,[t[10]||(t[10]=e("label",{class:"text-sm font-medium text-gray-600"},"Status",-1)),e("span",{class:y(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",oe(s.purchaseRequisition.status)])},i(s.purchaseRequisition.status),3)]),e("div",null,[t[11]||(t[11]=e("label",{class:"text-sm font-medium text-gray-600"},"Title",-1)),e("p",Be,i(s.purchaseRequisition.title),1)]),e("div",null,[t[12]||(t[12]=e("label",{class:"text-sm font-medium text-gray-600"},"Amount",-1)),e("p",Le,i(b(s.purchaseRequisition.amount)),1)]),e("div",null,[t[13]||(t[13]=e("label",{class:"text-sm font-medium text-gray-600"},"Division",-1)),e("p",Me,i(((g=s.purchaseRequisition.division)==null?void 0:g.nama_divisi)||"-"),1)]),!s.purchaseRequisition.mode||!["pr_ops","purchase_payment","travel_application"].includes(s.purchaseRequisition.mode)?(n(),l("div",Fe,[t[14]||(t[14]=e("label",{class:"text-sm font-medium text-gray-600"},"Category",-1)),e("p",$e,i(((m=s.purchaseRequisition.category)==null?void 0:m.name)||"-"),1)])):r("",!0),!s.purchaseRequisition.mode||!["pr_ops","purchase_payment","travel_application"].includes(s.purchaseRequisition.mode)?(n(),l("div",Ge,[t[15]||(t[15]=e("label",{class:"text-sm font-medium text-gray-600"},"Outlet",-1)),e("p",Ve,i(((v=s.purchaseRequisition.outlet)==null?void 0:v.nama_outlet)||"-"),1)])):r("",!0),s.purchaseRequisition.mode==="kasbon"?(n(),l("div",ze,[t[16]||(t[16]=e("label",{class:"text-sm font-medium text-gray-600"},"Category",-1)),e("p",Je,i(((f=s.purchaseRequisition.category)==null?void 0:f.name)||"-"),1)])):r("",!0),s.purchaseRequisition.mode==="kasbon"?(n(),l("div",Ke,[t[17]||(t[17]=e("label",{class:"text-sm font-medium text-gray-600"},"Outlet",-1)),e("p",We,i(((h=s.purchaseRequisition.outlet)==null?void 0:h.nama_outlet)||"-"),1)])):r("",!0),e("div",null,[t[18]||(t[18]=e("label",{class:"text-sm font-medium text-gray-600"},"Priority",-1)),e("span",{class:y(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",ae(s.purchaseRequisition.priority)])},i(s.purchaseRequisition.priority),3)]),e("div",null,[t[19]||(t[19]=e("label",{class:"text-sm font-medium text-gray-600"},"Created Date",-1)),e("p",He,i(w(s.purchaseRequisition.created_at)),1)])]),s.purchaseRequisition.description?(n(),l("div",Qe,[t[20]||(t[20]=e("label",{class:"text-sm font-medium text-gray-600"},"Description",-1)),e("p",Ye,i(s.purchaseRequisition.description),1)])):r("",!0)]),s.budgetInfo&&s.purchaseRequisition.mode!=="kasbon"?(n(),l("div",Xe,[e("h2",Ze,[t[22]||(t[22]=e("i",{class:"fa fa-chart-pie mr-2 text-green-500"},null,-1)),t[23]||(t[23]=u(" Budget Information ")),e("span",et," ("+i(s.budgetInfo.budget_type==="PER_OUTLET"?"Per Outlet":"Global")+") ",1)]),s.budgetInfo.budget_type==="GLOBAL"?(n(),l("div",tt,[e("div",null,[t[24]||(t[24]=e("p",{class:"text-gray-600 mb-1"},"Category Budget",-1)),e("p",st,i(b(s.budgetInfo.category_budget)),1)]),e("div",null,[t[25]||(t[25]=e("p",{class:"text-gray-600 mb-1"},"Used Amount",-1)),e("p",it,i(b(s.budgetInfo.category_used_amount)),1)]),e("div",null,[t[26]||(t[26]=e("p",{class:"text-gray-600 mb-1"},"Remaining Budget",-1)),e("p",{class:y(["font-semibold",s.budgetInfo.category_remaining_amount<0?"text-red-800":"text-green-800"])},i(b(s.budgetInfo.category_remaining_amount)),3)]),e("div",null,[t[27]||(t[27]=e("p",{class:"text-gray-600 mb-1"},"Period",-1)),e("p",nt,i(M(s.budgetInfo.current_month))+" "+i(s.budgetInfo.current_year),1)])])):s.budgetInfo.budget_type==="PER_OUTLET"?(n(),l("div",lt,[e("div",null,[t[28]||(t[28]=e("p",{class:"text-gray-600 mb-1"},"Outlet Budget",-1)),e("p",ot,i(b(s.budgetInfo.outlet_budget)),1),e("p",at,i(((_=s.budgetInfo.outlet_info)==null?void 0:_.name)||"Unknown"),1)]),e("div",null,[t[29]||(t[29]=e("p",{class:"text-gray-600 mb-1"},"Used Amount",-1)),e("p",rt,i(b(s.budgetInfo.outlet_used_amount)),1)]),e("div",null,[t[30]||(t[30]=e("p",{class:"text-gray-600 mb-1"},"Remaining Budget",-1)),e("p",{class:y(["font-semibold",s.budgetInfo.outlet_remaining_amount<0?"text-red-800":"text-green-800"])},i(b(s.budgetInfo.outlet_remaining_amount)),3)]),e("div",null,[t[31]||(t[31]=e("p",{class:"text-gray-600 mb-1"},"Period",-1)),e("p",ut,i(M(s.budgetInfo.current_month))+" "+i(s.budgetInfo.current_year),1)])])):r("",!0)])):r("",!0),s.purchaseRequisition.mode==="travel_application"&&s.modeSpecificData?(n(),l("div",dt,[t[36]||(t[36]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},[e("i",{class:"fa fa-plane mr-2 text-purple-500"}),u(" Informasi Perjalanan Dinas ")],-1)),e("div",ct,[s.modeSpecificData.travel_outlets&&s.modeSpecificData.travel_outlets.length>0?(n(),l("div",gt,[t[33]||(t[33]=e("label",{class:"text-sm font-medium text-gray-600 mb-2 block"},"Outlet Tujuan Perjalanan Dinas",-1)),e("div",mt,[(n(!0),l(k,null,R(s.modeSpecificData.travel_outlets,o=>(n(),l("span",{key:o.id,class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-purple-100 text-purple-800"},[t[32]||(t[32]=e("i",{class:"fa fa-store mr-2"},null,-1)),u(" "+i(o.name),1)]))),128))])])):r("",!0),s.modeSpecificData.travel_agenda?(n(),l("div",xt,[t[34]||(t[34]=e("label",{class:"text-sm font-medium text-gray-600 mb-2 block"},"Agenda Kerja",-1)),e("div",ft,i(s.modeSpecificData.travel_agenda),1)])):r("",!0),s.modeSpecificData.travel_notes?(n(),l("div",bt,[t[35]||(t[35]=e("label",{class:"text-sm font-medium text-gray-600 mb-2 block"},"Notes",-1)),e("div",yt,i(s.modeSpecificData.travel_notes),1)])):r("",!0)])])):r("",!0),s.purchaseRequisition.mode==="kasbon"&&s.modeSpecificData?(n(),l("div",pt,[t[39]||(t[39]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},[e("i",{class:"fa fa-money-bill-wave mr-2 text-orange-500"}),u(" Informasi Kasbon ")],-1)),e("div",ht,[e("div",null,[t[37]||(t[37]=e("label",{class:"text-sm font-medium text-gray-600 mb-2 block"},"Nilai Kasbon",-1)),e("p",vt,i(b(s.modeSpecificData.kasbon_amount||0)),1)]),s.modeSpecificData.kasbon_reason?(n(),l("div",wt,[t[38]||(t[38]=e("label",{class:"text-sm font-medium text-gray-600 mb-2 block"},"Reason / Alasan Kasbon",-1)),e("div",kt,i(s.modeSpecificData.kasbon_reason),1)])):r("",!0)])])):r("",!0),s.purchaseRequisition.items&&s.purchaseRequisition.items.length>0&&["pr_ops","purchase_payment"].includes(s.purchaseRequisition.mode)?(n(),l("div",Rt,[t[46]||(t[46]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Items",-1)),e("div",_t,[(n(!0),l(k,null,R(he(s.purchaseRequisition.items),(o,p)=>(n(),l("div",{key:p,class:"bg-gray-50 p-4 rounded-lg border border-gray-200"},[e("h3",qt,[t[40]||(t[40]=e("i",{class:"fa fa-store mr-2 text-blue-500"},null,-1)),u(" Outlet: "+i(o.outlet_name),1)]),e("div",It,[(n(!0),l(k,null,R(o.categories,(c,I)=>(n(),l("div",{key:I,class:"ml-4 border-l-2 border-gray-300 pl-4"},[e("h4",Et,[t[41]||(t[41]=e("i",{class:"fa fa-tag mr-1"},null,-1)),u(" Category: "+i(c.category_name),1)]),e("div",Dt,[e("table",Ct,[t[44]||(t[44]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Item Name"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Qty"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Unit"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Unit Price"),e("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase"},"Subtotal")])],-1)),e("tbody",Tt,[(n(!0),l(k,null,R(c.items,x=>(n(),l("tr",{key:x.id},[e("td",Pt,[u(i(x.item_name)+" ",1),x.item_type==="allowance"&&x.allowance_recipient_name?(n(),l("div",At,[t[42]||(t[42]=e("i",{class:"fa fa-user mr-1"},null,-1)),u(" Penerima: "+i(x.allowance_recipient_name)+" ",1),x.allowance_account_number?(n(),l("span",Ut," | No. Rek: "+i(x.allowance_account_number),1)):r("",!0)])):r("",!0),x.item_type==="others"&&x.others_notes?(n(),l("div",Ot,[t[43]||(t[43]=e("i",{class:"fa fa-sticky-note mr-1"},null,-1)),u(" Notes: "+i(x.others_notes),1)])):r("",!0)]),e("td",St,i(x.qty),1),e("td",jt,i(x.unit),1),e("td",Nt,i(b(x.unit_price)),1),e("td",Bt,i(b(x.subtotal)),1)]))),128))])])])]))),128))])]))),128))]),e("div",Lt,[e("div",Mt,[e("div",Ft,[t[45]||(t[45]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Amount:",-1)),e("p",$t,i(b(s.purchaseRequisition.amount)),1)])])])])):r("",!0),s.purchaseRequisition.items&&s.purchaseRequisition.items.length>0&&!["pr_ops","purchase_payment","kasbon"].includes(s.purchaseRequisition.mode)?(n(),l("div",Gt,[t[51]||(t[51]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Items",-1)),e("div",Vt,[e("table",zt,[t[50]||(t[50]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Item Name"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Qty"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Unit"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Unit Price"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subtotal")])],-1)),e("tbody",Jt,[(n(!0),l(k,null,R(s.purchaseRequisition.items,o=>(n(),l("tr",{key:o.id},[e("td",Kt,[u(i(o.item_name)+" ",1),o.item_type==="allowance"&&o.allowance_recipient_name?(n(),l("div",Wt,[t[47]||(t[47]=e("i",{class:"fa fa-user mr-1"},null,-1)),u(" Penerima: "+i(o.allowance_recipient_name)+" ",1),o.allowance_account_number?(n(),l("span",Ht," | No. Rek: "+i(o.allowance_account_number),1)):r("",!0)])):r("",!0),o.item_type==="others"&&o.others_notes?(n(),l("div",Qt,[t[48]||(t[48]=e("i",{class:"fa fa-sticky-note mr-1"},null,-1)),u(" Notes: "+i(o.others_notes),1)])):r("",!0)]),e("td",Yt,i(o.qty),1),e("td",Xt,i(o.unit),1),e("td",Zt,i(b(o.unit_price)),1),e("td",es,i(b(o.subtotal)),1)]))),128))]),e("tfoot",null,[e("tr",null,[t[49]||(t[49]=e("td",{colspan:"4",class:"px-6 py-4 text-right font-bold text-gray-900"},"Total Amount:",-1)),e("td",ts,i(b(s.purchaseRequisition.amount)),1)])])])])])):r("",!0),s.purchaseRequisition.approval_flows&&s.purchaseRequisition.approval_flows.length>0?(n(),l("div",ss,[t[59]||(t[59]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},[e("i",{class:"fa fa-users mr-2 text-blue-500"}),u(" Approval Flow ")],-1)),e("div",is,[(n(!0),l(k,null,R(s.purchaseRequisition.approval_flows,(o,p)=>{var c,I,x,ee,te;return n(),l("div",{key:o.id,class:y(["flex items-center justify-between p-4 border border-gray-200 rounded-lg bg-gradient-to-r from-gray-50 to-white",re(o.status)])},[e("div",ns,[e("div",ls,[e("span",os,[t[52]||(t[52]=e("i",{class:"fa fa-layer-group mr-1"},null,-1)),u(" Level "+i(o.approval_level),1)]),e("div",{class:y(["w-10 h-10 rounded-full flex items-center justify-center shadow-md",ue(o.status)])},[e("i",{class:y(de(o.status))},null,2)],2)]),e("div",as,[e("div",rs,i(((c=o.approver)==null?void 0:c.nama_lengkap)||((I=o.approver)==null?void 0:I.name)),1),e("div",us,[t[53]||(t[53]=e("i",{class:"fa fa-envelope mr-2"},null,-1)),u(i((x=o.approver)==null?void 0:x.email),1)]),(te=(ee=o.approver)==null?void 0:ee.jabatan)!=null&&te.nama_jabatan?(n(),l("div",ds,[t[54]||(t[54]=e("i",{class:"fa fa-briefcase mr-2"},null,-1)),u(i(o.approver.jabatan.nama_jabatan),1)])):r("",!0),o.comments?(n(),l("div",cs,[t[55]||(t[55]=e("strong",{class:"text-gray-800"},"Comments:",-1)),u(" "+i(o.comments),1)])):r("",!0)])]),e("div",gs,[e("div",{class:y(["text-sm font-medium px-3 py-1 rounded-full",ce(o.status)])},[t[56]||(t[56]=e("i",{class:"fa fa-circle mr-1 text-xs"},null,-1)),u(i(o.status),1)],2),o.approved_at?(n(),l("div",ms,[t[57]||(t[57]=e("i",{class:"fa fa-check-circle mr-1 text-green-500"},null,-1)),u("Approved: "+i(w(o.approved_at)),1)])):r("",!0),o.rejected_at?(n(),l("div",xs,[t[58]||(t[58]=e("i",{class:"fa fa-times-circle mr-1 text-red-500"},null,-1)),u("Rejected: "+i(w(o.rejected_at)),1)])):r("",!0)])],2)}),128))])])):r("",!0),s.budgetInfo&&s.purchaseRequisition.mode!=="kasbon"?(n(),l("div",fs,[e("h2",bs,[t[60]||(t[60]=e("i",{class:"fa fa-chart-pie mr-2 text-green-500"},null,-1)),u(" "+i(s.budgetInfo.budget_type==="PER_OUTLET"?"Outlet Budget Information":"Category Budget Information")+" - "+i(M(s.budgetInfo.current_month))+" "+i(s.budgetInfo.current_year)+" ",1),e("span",ys," ("+i(s.budgetInfo.budget_type==="PER_OUTLET"?"Per Outlet":"Global")+") ",1)]),s.budgetInfo.budget_type==="PER_OUTLET"&&s.budgetInfo.outlet_info?(n(),l("div",ps,[e("p",hs,[t[61]||(t[61]=e("i",{class:"fa fa-store mr-2"},null,-1)),t[62]||(t[62]=e("strong",null,"Outlet:",-1)),u(" "+i(s.budgetInfo.outlet_info.name),1)])])):r("",!0),e("div",vs,[e("div",ws,[e("div",ks,[e("div",null,[e("p",Rs,i(s.budgetInfo.budget_type==="PER_OUTLET"?"Outlet Budget":"Total Budget"),1),e("p",_s,i(b(s.budgetInfo.budget_type==="PER_OUTLET"?s.budgetInfo.outlet_budget:s.budgetInfo.category_budget)),1),s.budgetInfo.budget_type==="PER_OUTLET"?(n(),l("p",qs," Global: "+i(b(s.budgetInfo.category_budget)),1)):r("",!0)]),t[63]||(t[63]=e("div",{class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"},[e("i",{class:"fa fa-wallet text-blue-600 text-xl"})],-1))])]),e("div",Is,[e("div",Es,[e("div",null,[t[64]||(t[64]=e("p",{class:"text-sm font-medium text-orange-600"},"Used This Month",-1)),e("p",Ds,i(b(s.budgetInfo.budget_type==="PER_OUTLET"?s.budgetInfo.outlet_used_amount:s.budgetInfo.category_used_amount)),1)]),t[65]||(t[65]=e("div",{class:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center"},[e("i",{class:"fa fa-chart-line text-orange-600 text-xl"})],-1))])]),e("div",Cs,[e("div",Ts,[e("div",null,[t[66]||(t[66]=e("p",{class:"text-sm font-medium text-green-600"},"Remaining Budget",-1)),e("p",{class:y(["text-2xl font-bold",q()<0?"text-red-800":"text-green-800"])},i(b(q())),3)]),e("div",{class:y(["w-12 h-12 rounded-full flex items-center justify-center",q()<0?"bg-red-100":"bg-green-100"])},[e("i",{class:y(["fa fa-piggy-bank text-xl",q()<0?"text-red-600":"text-green-600"])},null,2)],2)])])]),e("div",Ps,[e("div",As,[t[67]||(t[67]=e("span",null,"Budget Usage",-1)),e("span",null,i(Math.round(Z()))+"%",1)]),e("div",Us,[e("div",{class:y(["h-3 rounded-full transition-all duration-300",ge(X(),F())]),style:we({width:Math.min(Z(),100)+"%"})},null,6)])]),q()<0?(n(),l("div",Os,[t[68]||(t[68]=e("i",{class:"fa fa-exclamation-triangle mr-2"},null,-1)),t[69]||(t[69]=e("strong",null,"Budget Exceeded!",-1)),s.budgetInfo.budget_type==="PER_OUTLET"?(n(),l("span",Ss," This outlet has exceeded its monthly budget limit. ")):(n(),l("span",js," This category has exceeded its monthly budget limit. "))])):q()<F()*.1?(n(),l("div",Ns,[t[70]||(t[70]=e("i",{class:"fa fa-exclamation-circle mr-2"},null,-1)),t[71]||(t[71]=e("strong",null,"Budget Warning!",-1)),u(" Only "+i(b(q()))+" remaining. ",1)])):r("",!0)])):r("",!0),s.purchaseRequisition.ticket&&!["pr_ops","purchase_payment","travel_application","kasbon"].includes(s.purchaseRequisition.mode)?(n(),l("div",Bs,[t[72]||(t[72]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Related Ticket",-1)),e("div",Ls,[ie(G(V),{href:`/tickets/${s.purchaseRequisition.ticket.id}`,class:"text-blue-600 hover:text-blue-800 font-medium"},{default:j(()=>[u(i(s.purchaseRequisition.ticket.ticket_number)+" - "+i(s.purchaseRequisition.ticket.title),1)]),_:1},8,["href"]),e("p",Ms,i((T=s.purchaseRequisition.ticket.outlet)==null?void 0:T.nama_outlet)+" - "+i(w(s.purchaseRequisition.ticket.created_at)),1)])])):r("",!0),s.purchaseRequisition.attachments&&s.purchaseRequisition.attachments.length>0&&["pr_ops","purchase_payment"].includes(s.purchaseRequisition.mode)?(n(),l("div",Fs,[e("h2",$s,[t[73]||(t[73]=e("i",{class:"fa fa-paperclip mr-2 text-blue-500"},null,-1)),t[74]||(t[74]=u(" Attachments ")),e("span",Gs,i(s.purchaseRequisition.attachments.length),1)]),e("div",Vs,[(n(!0),l(k,null,R(ve(s.purchaseRequisition.attachments),(o,p)=>(n(),l("div",{key:p,class:"bg-gray-50 p-4 rounded-lg border border-gray-200"},[p!=="no-outlet"?(n(),l("h3",zs,[t[75]||(t[75]=e("i",{class:"fa fa-store mr-2 text-blue-500"},null,-1)),u(" Outlet: "+i(o.outlet_name)+" ",1),e("span",Js,i(o.attachments.length),1)])):r("",!0),e("div",Ks,[(n(!0),l(k,null,R(o.attachments,c=>{var I;return n(),l("div",{key:c.id,class:"flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},[e("div",Ws,[O(c.file_name)?(n(),l("div",Hs,[e("img",{src:`/purchase-requisitions/attachments/${c.id}/view`,alt:c.file_name,class:"w-16 h-16 object-cover rounded-lg border border-gray-300 cursor-pointer hover:opacity-80 transition-opacity",onClick:x=>S(c),onError:t[0]||(t[0]=x=>{x.target.style.display="none",x.target.nextElementSibling.style.display="block"})},null,40,Qs),e("i",{class:y([U(c.file_name),"text-2xl absolute inset-0 flex items-center justify-center bg-gray-100 rounded-lg"]),style:{display:"none"}},null,2)])):(n(),l("i",{key:1,class:y([U(c.file_name),"text-2xl"])},null,2)),e("div",null,[e("p",Ys,i(c.file_name),1),e("div",Xs,[e("span",null,i(K(c.file_size)),1),t[76]||(t[76]=e("span",null,"•",-1)),e("span",null,"Uploaded by "+i(((I=c.uploader)==null?void 0:I.nama_lengkap)||"Unknown User"),1),t[77]||(t[77]=e("span",null,"•",-1)),e("span",null,i(w(c.created_at)),1)])])]),e("div",Zs,[O(c.file_name)?(n(),l("button",{key:0,onClick:x=>S(c),class:"p-2 text-green-600 hover:text-green-800 hover:bg-green-100 rounded-md transition-colors",title:"View Image"},t[78]||(t[78]=[e("i",{class:"fa fa-eye"},null,-1)]),8,ei)):r("",!0),e("button",{onClick:x=>W(c),class:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded-md transition-colors",title:"Download"},t[79]||(t[79]=[e("i",{class:"fa fa-download"},null,-1)]),8,ti),H(c)?(n(),l("button",{key:1,onClick:x=>Q(c),class:"p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded-md transition-colors",title:"Delete"},t[80]||(t[80]=[e("i",{class:"fa fa-trash"},null,-1)]),8,si)):r("",!0)])])}),128))])]))),128))])])):r("",!0),["pr_ops","purchase_payment"].includes(s.purchaseRequisition.mode)?r("",!0):(n(),l("div",ii,[e("h2",ni,[t[81]||(t[81]=e("i",{class:"fa fa-paperclip mr-2 text-blue-500"},null,-1)),t[82]||(t[82]=u(" Attachments ")),s.purchaseRequisition.attachments&&s.purchaseRequisition.attachments.length>0?(n(),l("span",li,i(s.purchaseRequisition.attachments.length),1)):r("",!0)]),s.purchaseRequisition.attachments&&s.purchaseRequisition.attachments.length>0?(n(),l("div",oi,[(n(!0),l(k,null,R(s.purchaseRequisition.attachments,o=>{var p;return n(),l("div",{key:o.id,class:"flex items-center justify-between p-4 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors"},[e("div",ai,[O(o.file_name)?(n(),l("div",ri,[e("img",{src:`/purchase-requisitions/attachments/${o.id}/view`,alt:o.file_name,class:"w-16 h-16 object-cover rounded-lg border border-gray-300 cursor-pointer hover:opacity-80 transition-opacity",onClick:c=>S(o),onError:t[1]||(t[1]=c=>{c.target.style.display="none",c.target.nextElementSibling.style.display="block"})},null,40,ui),e("i",{class:y([U(o.file_name),"text-2xl absolute inset-0 flex items-center justify-center bg-gray-100 rounded-lg"]),style:{display:"none"}},null,2)])):(n(),l("i",{key:1,class:y([U(o.file_name),"text-2xl"])},null,2)),e("div",null,[e("p",di,i(o.file_name),1),e("div",ci,[e("span",null,i(K(o.file_size)),1),t[83]||(t[83]=e("span",null,"•",-1)),e("span",null,"Uploaded by "+i(((p=o.uploader)==null?void 0:p.nama_lengkap)||"Unknown User"),1),t[84]||(t[84]=e("span",null,"•",-1)),e("span",null,i(w(o.created_at)),1)])])]),e("div",gi,[O(o.file_name)?(n(),l("button",{key:0,onClick:c=>S(o),class:"p-2 text-green-600 hover:text-green-800 hover:bg-green-100 rounded-md transition-colors",title:"View Image"},t[85]||(t[85]=[e("i",{class:"fa fa-eye"},null,-1)]),8,mi)):r("",!0),e("button",{onClick:c=>W(o),class:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded-md transition-colors",title:"Download"},t[86]||(t[86]=[e("i",{class:"fa fa-download"},null,-1)]),8,xi),H(o)?(n(),l("button",{key:1,onClick:c=>Q(o),class:"p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded-md transition-colors",title:"Delete"},t[87]||(t[87]=[e("i",{class:"fa fa-trash"},null,-1)]),8,fi)):r("",!0)])])}),128))])):(n(),l("div",bi,t[88]||(t[88]=[e("i",{class:"fa fa-paperclip text-4xl mb-2"},null,-1),e("p",null,"No attachments uploaded yet",-1)])))])),["pr_ops","purchase_payment"].includes(s.purchaseRequisition.mode)&&(!s.purchaseRequisition.attachments||s.purchaseRequisition.attachments.length===0)?(n(),l("div",yi,t[89]||(t[89]=[e("h2",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center"},[e("i",{class:"fa fa-paperclip mr-2 text-blue-500"}),u(" Attachments ")],-1),e("div",{class:"text-center py-8 text-gray-500"},[e("i",{class:"fa fa-paperclip text-4xl mb-2"}),e("p",null,"No attachments uploaded yet")],-1)]))):r("",!0),e("div",pi,[t[91]||(t[91]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Comments",-1)),e("div",hi,[ne(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=o=>C.value=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add a comment..."},null,512),[[ke,C.value]]),e("div",vi,[e("label",wi,[ne(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>A.value=o),type:"checkbox",class:"mr-2"},null,512),[[Re,A.value]]),t[90]||(t[90]=e("span",{class:"text-sm text-gray-600"},"Internal comment",-1))]),e("button",{onClick:xe,disabled:!C.value.trim(),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"}," Add Comment ",8,ki)])]),s.purchaseRequisition.comments&&s.purchaseRequisition.comments.length>0?(n(),l("div",Ri,[(n(!0),l(k,null,R(s.purchaseRequisition.comments,o=>{var p;return n(),l("div",{key:o.id,class:"p-4 border border-gray-200 rounded-lg"},[e("div",_i,[e("div",qi,[e("span",Ii,i(((p=o.user)==null?void 0:p.nama_lengkap)||"Unknown User"),1),o.is_internal?(n(),l("span",Ei," Internal ")):r("",!0)]),e("span",Di,i(w(o.created_at)),1)]),e("p",Ci,i(o.comment),1)])}),128))])):(n(),l("div",Ti," No comments yet "))])]),e("div",Pi,[e("div",Ai,[t[97]||(t[97]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Actions",-1)),e("div",Ui,[z.value?(n(),l("button",{key:0,onClick:me,class:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700"},t[92]||(t[92]=[e("i",{class:"fa fa-edit mr-2"},null,-1),u("Edit ")]))):r("",!0),J.value?(n(),l("button",{key:1,onClick:fe,class:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},t[93]||(t[93]=[e("i",{class:"fa fa-paper-plane mr-2"},null,-1),u("Submit for Approval ")]))):r("",!0),L.value?(n(),l("button",{key:2,onClick:be,class:"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700"},t[94]||(t[94]=[e("i",{class:"fa fa-check mr-2"},null,-1),u("Approve ")]))):r("",!0),L.value?(n(),l("button",{key:3,onClick:t[4]||(t[4]=o=>le.value=!0),class:"w-full px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700"},t[95]||(t[95]=[e("i",{class:"fa fa-times mr-2"},null,-1),u("Reject ")]))):r("",!0),!z.value&&!J.value&&!L.value?(n(),l("div",Oi,t[96]||(t[96]=[e("i",{class:"fa fa-info-circle mr-2"},null,-1),u(" No actions available for you ")]))):r("",!0)])]),e("div",Si,[t[104]||(t[104]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Status Timeline",-1)),e("div",ji,[e("div",Ni,[t[99]||(t[99]=e("div",{class:"w-3 h-3 bg-green-500 rounded-full"},null,-1)),e("div",null,[t[98]||(t[98]=e("p",{class:"text-sm font-medium text-gray-900"},"Created",-1)),e("p",Bi,i(w(s.purchaseRequisition.created_at)),1)])]),s.purchaseRequisition.status!=="DRAFT"?(n(),l("div",Li,[t[101]||(t[101]=e("div",{class:"w-3 h-3 bg-blue-500 rounded-full"},null,-1)),e("div",null,[t[100]||(t[100]=e("p",{class:"text-sm font-medium text-gray-900"},"Submitted",-1)),e("p",Mi,i(w(s.purchaseRequisition.updated_at)),1)])])):r("",!0),["APPROVED","PROCESSED","COMPLETED"].includes(s.purchaseRequisition.status)?(n(),l("div",Fi,[t[103]||(t[103]=e("div",{class:"w-3 h-3 bg-green-500 rounded-full"},null,-1)),e("div",null,[t[102]||(t[102]=e("p",{class:"text-sm font-medium text-gray-900"},"Approved",-1)),e("p",$i,i(w(s.purchaseRequisition.approved_ssd_at)),1)])])):r("",!0)])])])])]),B.value?(n(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",onClick:Y},[e("div",{class:"relative max-w-4xl max-h-full p-4",onClick:t[5]||(t[5]=_e(()=>{},["stop"]))},[e("button",{onClick:Y,class:"absolute top-2 right-2 z-10 p-2 text-white bg-black bg-opacity-50 rounded-full hover:bg-opacity-75 transition-colors"},t[105]||(t[105]=[e("i",{class:"fa fa-times text-xl"},null,-1)])),E.value?(n(),l("img",{key:0,src:`/purchase-requisitions/attachments/${E.value.id}/view`,alt:E.value.file_name,class:"max-w-full max-h-full object-contain rounded-lg"},null,8,Gi)):r("",!0),e("div",Vi,[e("p",zi,i((P=E.value)==null?void 0:P.file_name),1)])])])):r("",!0)]}),_:1}))}};export{sn as default};
