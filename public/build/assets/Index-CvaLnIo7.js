import{r as C,W as b,w as F,A as Y,B as l,C as z,D as e,G as v,H as B,J,L as d,F as P,M as R,N as o,I as A,E as j,l as K}from"./vendor-vue-g7iCcTkf.js";import{l as Q}from"./lodash-DB3HVzpp.js";import{S as p}from"./app-CUjRlmlQ.js";import{A as Z}from"./AppLayout-lnDyFfsm.js";import{a as $}from"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CXOsavaw.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const ee={class:"max-w-7xl w-full mx-auto py-8 px-2"},te={class:"bg-white rounded-xl shadow-lg p-4 mb-6"},se={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},ae=["value"],re=["value"],oe={class:"bg-white rounded-xl shadow-lg overflow-hidden"},ne={class:"overflow-x-auto"},le={class:"min-w-full divide-y divide-gray-200"},ie={class:"bg-white divide-y divide-gray-200"},de={key:0},ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},pe={class:"px-6 py-4 whitespace-nowrap"},ce={class:"text-sm font-medium text-blue-600"},fe={class:"text-xs text-gray-500"},me={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},xe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ge={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ve={class:"px-6 py-4 whitespace-nowrap"},ye={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},we={class:"flex items-center gap-2"},he=["onClick"],ke=["onClick"],Ce=["onClick"],Be=["onClick"],je={key:0,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},Te={class:"flex items-center justify-between"},Ae={class:"flex-1 flex justify-between sm:hidden"},_e=["disabled"],Se=["disabled"],Pe={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Re={class:"text-sm text-gray-700"},$e={class:"font-medium"},qe={class:"font-medium"},Ve={class:"font-medium"},Le={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Me=["disabled"],De={class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},Ie=["disabled"],Je={__name:"Index",props:{transfers:Object,assets:Array,outlets:Array,filters:Object},setup(a){var q,V,L,M,D;const y=a,w=C(((q=y.filters)==null?void 0:q.search)||""),f=C(((V=y.filters)==null?void 0:V.asset_id)||""),m=C(((L=y.filters)==null?void 0:L.outlet_id)||""),x=C(((M=y.filters)==null?void 0:M.status)||"all"),g=C(((D=y.filters)==null?void 0:D.per_page)||15),I=Q.debounce(()=>{b.get("/asset-management/transfers",{search:w.value,asset_id:f.value,outlet_id:m.value,status:x.value,per_page:g.value},{preserveState:!0,replace:!0})},400);function O(){I()}function T(r){if(r){const t=new URL(r);t.searchParams.set("search",w.value),t.searchParams.set("asset_id",f.value),t.searchParams.set("outlet_id",m.value),t.searchParams.set("status",x.value),t.searchParams.set("per_page",g.value),b.visit(t.toString(),{preserveState:!0,replace:!0})}}function E(){b.visit("/asset-management/transfers/create")}function N(r){b.visit(`/asset-management/transfers/${r.id}`)}async function U(r){var s,u,i,n,c,h;if((await p.fire({title:"Approve Transfer?",text:`Transfer asset "${(s=r.asset)==null?void 0:s.name}" dari ${(u=r.from_outlet)==null?void 0:u.name} ke ${(i=r.to_outlet)==null?void 0:i.name}?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Approve",cancelButtonText:"Batal"})).isConfirmed)try{(n=(await $.post(`/asset-management/transfers/${r.id}/approve`,{},{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).data)!=null&&n.success&&(p.fire("Berhasil","Transfer berhasil di-approve","success"),_())}catch(k){p.fire("Error",((h=(c=k.response)==null?void 0:c.data)==null?void 0:h.message)||"Gagal approve transfer","error")}}async function X(r){var s,u,i;const{value:t}=await p.fire({title:"Reject Transfer?",input:"textarea",inputLabel:"Alasan Rejection",inputPlaceholder:"Masukkan alasan rejection...",inputAttributes:{"aria-label":"Masukkan alasan rejection"},showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Reject",cancelButtonText:"Batal",inputValidator:n=>{if(!n)return"Alasan rejection harus diisi!"}});if(t)try{(s=(await $.post(`/asset-management/transfers/${r.id}/reject`,{rejection_reason:t},{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).data)!=null&&s.success&&(p.fire("Berhasil","Transfer berhasil di-reject","success"),_())}catch(n){p.fire("Error",((i=(u=n.response)==null?void 0:u.data)==null?void 0:i.message)||"Gagal reject transfer","error")}}async function W(r){var s,u,i,n;if((await p.fire({title:"Complete Transfer?",text:`Konfirmasi bahwa asset sudah dipindahkan ke ${(s=r.to_outlet)==null?void 0:s.name}?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Complete",cancelButtonText:"Batal"})).isConfirmed)try{(u=(await $.post(`/asset-management/transfers/${r.id}/complete`,{},{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).data)!=null&&u.success&&(p.fire("Berhasil","Transfer berhasil di-complete","success"),_())}catch(c){p.fire("Error",((n=(i=c.response)==null?void 0:i.data)==null?void 0:n.message)||"Gagal complete transfer","error")}}function G(r){return{Pending:"bg-yellow-100 text-yellow-800",Approved:"bg-green-100 text-green-800",Completed:"bg-blue-100 text-blue-800",Rejected:"bg-red-100 text-red-800"}[r]||"bg-gray-100 text-gray-800"}function H(r){return r?new Date(r).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}function _(){b.reload({preserveState:!0,replace:!0})}return F([f,m,x,g],()=>{b.get("/asset-management/transfers",{search:w.value,asset_id:f.value,outlet_id:m.value,status:x.value,per_page:g.value},{preserveState:!0,replace:!0})}),(r,t)=>(l(),Y(Z,null,{default:z(()=>[e("div",ee,[e("div",{class:"flex justify-between items-center mb-6"},[t[10]||(t[10]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-exchange-alt text-blue-500"}),v(" Asset Transfers ")],-1)),e("button",{onClick:E,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2"},t[9]||(t[9]=[e("i",{class:"fa-solid fa-plus"},null,-1),v(" Request Transfer ")]))]),e("div",te,[e("div",se,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),B(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>w.value=s),onInput:O,placeholder:"Cari asset code atau nama...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,544),[[J,w.value]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Asset",-1)),B(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[t[12]||(t[12]=e("option",{value:""},"Semua Asset",-1)),(l(!0),d(P,null,R(a.assets,s=>(l(),d("option",{key:s.id,value:s.id},o(s.asset_code)+" - "+o(s.name),9,ae))),128))],512),[[A,f.value]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Outlet",-1)),B(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>m.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[t[14]||(t[14]=e("option",{value:""},"Semua Outlet",-1)),(l(!0),d(P,null,R(a.outlets,s=>(l(),d("option",{key:s.id,value:s.id},o(s.name),9,re))),128))],512),[[A,m.value]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),B(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>x.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[16]||(t[16]=[e("option",{value:"all"},"Semua Status",-1),e("option",{value:"Pending"},"Pending",-1),e("option",{value:"Approved"},"Approved",-1),e("option",{value:"Completed"},"Completed",-1),e("option",{value:"Rejected"},"Rejected",-1)]),512),[[A,x.value]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Per Page",-1)),B(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>g.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[18]||(t[18]=[e("option",{value:"10"},"10",-1),e("option",{value:"15"},"15",-1),e("option",{value:"25"},"25",-1),e("option",{value:"50"},"50",-1)]),512),[[A,g.value]])])])]),e("div",oe,[e("div",ne,[e("table",le,[t[25]||(t[25]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Asset"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"From Outlet"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"To Outlet"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Transfer Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Requested By"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",ie,[a.transfers.data&&a.transfers.data.length===0?(l(),d("tr",de,t[20]||(t[20]=[e("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"}," Tidak ada data ",-1)]))):j("",!0),(l(!0),d(P,null,R(a.transfers.data,(s,u)=>{var i,n,c,h,k;return l(),d("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",ue,o((a.transfers.current_page-1)*a.transfers.per_page+u+1),1),e("td",pe,[e("div",null,[e("p",ce,o((i=s.asset)==null?void 0:i.asset_code),1),e("p",fe,o((n=s.asset)==null?void 0:n.name),1)])]),e("td",me,o(((c=s.from_outlet)==null?void 0:c.name)||"-"),1),e("td",xe,o(((h=s.to_outlet)==null?void 0:h.name)||"-"),1),e("td",ge,o(H(s.transfer_date)),1),e("td",be,o(((k=s.requester)==null?void 0:k.name)||"-"),1),e("td",ve,[e("span",{class:K([G(s.status),"px-2 py-1 rounded-full text-xs font-medium"])},o(s.status),3)]),e("td",ye,[e("div",we,[e("button",{onClick:S=>N(s),class:"text-green-600 hover:text-green-900",title:"View"},t[21]||(t[21]=[e("i",{class:"fa-solid fa-eye"},null,-1)]),8,he),s.status==="Pending"?(l(),d("button",{key:0,onClick:S=>U(s),class:"text-blue-600 hover:text-blue-900",title:"Approve"},t[22]||(t[22]=[e("i",{class:"fa-solid fa-check"},null,-1)]),8,ke)):j("",!0),s.status==="Approved"?(l(),d("button",{key:1,onClick:S=>W(s),class:"text-green-600 hover:text-green-900",title:"Complete"},t[23]||(t[23]=[e("i",{class:"fa-solid fa-check-circle"},null,-1)]),8,Ce)):j("",!0),s.status==="Pending"?(l(),d("button",{key:2,onClick:S=>X(s),class:"text-red-600 hover:text-red-900",title:"Reject"},t[24]||(t[24]=[e("i",{class:"fa-solid fa-times"},null,-1)]),8,Be)):j("",!0)])])])}),128))])])]),a.transfers.last_page>1?(l(),d("div",je,[e("div",Te,[e("div",Ae,[e("button",{onClick:t[5]||(t[5]=s=>T(a.transfers.prev_page_url)),disabled:!a.transfers.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,_e),e("button",{onClick:t[6]||(t[6]=s=>T(a.transfers.next_page_url)),disabled:!a.transfers.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,Se)]),e("div",Pe,[e("div",null,[e("p",Re,[t[26]||(t[26]=v(" Menampilkan ")),e("span",$e,o(a.transfers.from),1),t[27]||(t[27]=v(" sampai ")),e("span",qe,o(a.transfers.to),1),t[28]||(t[28]=v(" dari ")),e("span",Ve,o(a.transfers.total),1),t[29]||(t[29]=v(" hasil "))])]),e("div",null,[e("nav",Le,[e("button",{onClick:t[7]||(t[7]=s=>T(a.transfers.prev_page_url)),disabled:!a.transfers.prev_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[30]||(t[30]=[e("i",{class:"fa-solid fa-chevron-left"},null,-1)]),8,Me),e("span",De," Page "+o(a.transfers.current_page)+" of "+o(a.transfers.last_page),1),e("button",{onClick:t[8]||(t[8]=s=>T(a.transfers.next_page_url)),disabled:!a.transfers.next_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[31]||(t[31]=[e("i",{class:"fa-solid fa-chevron-right"},null,-1)]),8,Ie)])])])])])):j("",!0)])])]),_:1}))}};export{Je as default};
