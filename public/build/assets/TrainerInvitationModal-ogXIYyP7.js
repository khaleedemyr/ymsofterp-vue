import{r as h,c as D,w as G,L as n,B as i,D as t,E as T,N as o,H as b,J as y,a6 as S,G as j,I as W,F as L,M as $,W as F}from"./vendor-vue-g7iCcTkf.js";import{S as c}from"./app-3SxMownK.js";import"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";const H={class:"fixed inset-0 z-50 flex items-center justify-center"},z={class:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},J={class:"flex items-center justify-between mb-6"},K={class:"text-white/70 mt-1"},Q={class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4 mb-6"},R={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-white"},q={class:"flex items-center space-x-2"},X={class:"flex items-center space-x-2"},Y={class:"flex items-center space-x-2"},Z={class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4 mb-6"},ee={class:"relative"},te={class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4 mb-6"},le={class:"flex space-x-4"},ae={class:"flex items-center space-x-2 cursor-pointer"},se={class:"flex items-center space-x-2 cursor-pointer"},ne={key:0,class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4 mb-6"},ie={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},re={class:"mt-4"},oe=["disabled"],de={key:1,class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4 mb-6"},ue={class:"flex justify-between items-center mb-4"},ce={class:"text-white/70 text-sm"},pe={class:"flex items-center space-x-2"},be={class:"space-y-3 max-h-96 overflow-y-auto"},me={class:"flex items-center space-x-3"},ve={class:"w-10 h-10 rounded-full overflow-hidden bg-white/10 flex items-center justify-center"},he=["src","alt"],xe={key:1,class:"fas fa-user text-white/50"},fe={class:"text-white font-medium"},ge={class:"text-white/70 text-sm"},we={class:"text-white/50 text-xs"},ye={class:"flex items-center space-x-2"},ke={key:0,class:"text-green-400 text-sm"},_e=["onClick"],Te={key:0,class:"flex justify-center items-center space-x-2 mt-4"},je=["disabled"],Ce={class:"text-white/70 text-sm"},De=["disabled"],Ee={key:2,class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4 mb-6"},Ne={class:"space-y-2"},Se={class:"flex items-center space-x-3"},Le={class:"w-8 h-8 rounded-full overflow-hidden bg-white/10 flex items-center justify-center"},$e=["src","alt"],Ue={key:1,class:"fas fa-user text-white/50"},Ve={class:"text-white"},Me=["onClick"],Be={class:"flex justify-end space-x-3"},Ae=["disabled"],Ie={key:0,class:"fas fa-spinner fa-spin mr-2"},Oe={key:1,class:"fas fa-paper-plane mr-2"},ze={__name:"TrainerInvitationModal",props:{training:Object,availableTrainers:{type:Array,default:()=>[]},divisions:{type:Array,default:()=>[]},jabatans:{type:Array,default:()=>[]},invitedTrainers:{type:Array,default:()=>[]}},emits:["close","invited"],setup(m,{emit:U}){const v=m,E=U,g=h(""),u=h([]),p=h(1),w=h(10),k=h(!1),x=h("internal"),r=h({name:"",email:"",phone:"",company:""}),C=D(()=>{if(!g.value)return v.availableTrainers;const a=g.value.toLowerCase();return v.availableTrainers.filter(e=>{var s,d,l,f;return e.nama_lengkap.toLowerCase().includes(a)||((d=(s=e.jabatan)==null?void 0:s.nama_jabatan)==null?void 0:d.toLowerCase().includes(a))||((f=(l=e.divisi)==null?void 0:l.nama_divisi)==null?void 0:f.toLowerCase().includes(a))})}),_=D(()=>Math.ceil(C.value.length/w.value)),V=D(()=>{const a=(p.value-1)*w.value,e=a+w.value;return C.value.slice(a,e)}),M=a=>new Date(a).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),B=a=>v.invitedTrainers.some(e=>e.trainer_id===a),A=a=>{u.value.find(e=>e.id===a.id)||u.value.push(a)},I=a=>{u.value=u.value.filter(e=>e.id!==a)},O=()=>{if(!r.value.name)return;const a={id:"external_"+Date.now(),nama_lengkap:r.value.name,email:r.value.email,phone:r.value.phone,company:r.value.company,trainer_type:"external",is_external:!0};u.value.push(a),r.value={name:"",email:"",phone:"",company:""}},P=async()=>{if(u.value.length!==0){k.value=!0,console.log("=== SHOWING LOADING MODAL ==="),console.log("Swal object:",c),console.log("Swal.fire method:",typeof c.fire);try{c.fire({title:"Sabar Bu Ghea....",text:"Antosan sakedap Bu Ghea, Nuju loding",icon:"info",showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,backdrop:!0,didOpen:()=>{c.showLoading()}}),console.log("Loading modal should be visible now")}catch(a){console.error("Error showing loading modal:",a)}try{const a=s=>{if(!s||s==="")return null;if(typeof s=="string"&&/^\d{2}:\d{2}$/.test(s))return s;try{const d=new Date(`2000-01-01T${s}`);return isNaN(d.getTime())?null:d.toTimeString().slice(0,5)}catch(d){return console.warn("Error formatting time:",s,d),null}},e=u.value.map(s=>{var l;const d={is_primary_trainer:!1,start_time:a(v.training.start_time),end_time:a(v.training.end_time),notes:`Diundang sebagai trainer untuk training ${(l=v.training.course)==null?void 0:l.title}`};return s.is_external?{...d,trainer_type:"external",external_trainer_name:s.nama_lengkap,external_trainer_email:s.email,external_trainer_phone:s.phone,external_trainer_company:s.company}:{...d,trainer_id:s.id,trainer_type:"internal"}});await F.post(route("lms.schedules.invite-trainers",v.training.id),{trainers:e},{onSuccess:()=>{c.close(),c.fire({icon:"success",title:"Berhasil",text:`${u.value.length} trainer berhasil diundang`}),E("close"),E("invited")},onError:s=>{c.close(),c.fire({icon:"error",title:"Error",text:Object.values(s)[0]||"Terjadi kesalahan saat mengundang trainer"})}})}catch{c.close(),c.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat mengundang trainer"})}finally{k.value=!1}}};return G(g,()=>{p.value=1}),(a,e)=>{var s,d;return i(),n("div",H,[e[36]||(e[36]=t("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm"},null,-1)),t("div",z,[t("div",J,[t("div",null,[e[12]||(e[12]=t("h3",{class:"text-2xl font-bold text-white"},"Undang Trainer",-1)),t("p",K,o((s=m.training.course)==null?void 0:s.title),1)]),t("button",{onClick:e[0]||(e[0]=l=>a.$emit("close")),class:"text-white/70 hover:text-white"},e[13]||(e[13]=[t("i",{class:"fas fa-times text-xl"},null,-1)]))]),t("div",Q,[t("div",R,[t("div",q,[e[14]||(e[14]=t("i",{class:"fas fa-calendar text-blue-400"},null,-1)),t("span",null,o(M(m.training.scheduled_date)),1)]),t("div",X,[e[15]||(e[15]=t("i",{class:"fas fa-clock text-green-400"},null,-1)),t("span",null,o(m.training.start_time)+" - "+o(m.training.end_time),1)]),t("div",Y,[e[16]||(e[16]=t("i",{class:"fas fa-chalkboard-teacher text-purple-400"},null,-1)),t("span",null,o(((d=m.training.scheduleTrainers)==null?void 0:d.length)||0)+" trainer terdaftar",1)])])]),t("div",Z,[t("div",ee,[e[17]||(e[17]=t("i",{class:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-white/50"},null,-1)),b(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>g.value=l),type:"text",placeholder:"Cari trainer berdasarkan nama, jabatan, atau divisi...",class:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500/50"},null,512),[[y,g.value]])])]),t("div",te,[e[20]||(e[20]=t("h4",{class:"text-lg font-semibold text-white mb-4"},"Tipe Trainer",-1)),t("div",le,[t("label",ae,[b(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>x.value=l),type:"radio",value:"internal",class:"text-blue-500 focus:ring-blue-500"},null,512),[[S,x.value]]),e[18]||(e[18]=t("span",{class:"text-white"},"Internal Trainer",-1))]),t("label",se,[b(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>x.value=l),type:"radio",value:"external",class:"text-purple-500 focus:ring-purple-500"},null,512),[[S,x.value]]),e[19]||(e[19]=t("span",{class:"text-white"},"External Trainer",-1))])])]),x.value==="external"?(i(),n("div",ne,[e[26]||(e[26]=t("h4",{class:"text-lg font-semibold text-white mb-4"},"Data External Trainer",-1)),t("div",ie,[t("div",null,[e[21]||(e[21]=t("label",{class:"block text-white/70 text-sm mb-2"},"Nama Lengkap *",-1)),b(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>r.value.name=l),type:"text",placeholder:"Nama lengkap trainer",class:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500/50"},null,512),[[y,r.value.name]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-white/70 text-sm mb-2"},"Email",-1)),b(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>r.value.email=l),type:"email",placeholder:"email@example.com",class:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500/50"},null,512),[[y,r.value.email]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-white/70 text-sm mb-2"},"No. Telepon",-1)),b(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>r.value.phone=l),type:"tel",placeholder:"08123456789",class:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500/50"},null,512),[[y,r.value.phone]])]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-white/70 text-sm mb-2"},"Perusahaan",-1)),b(t("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>r.value.company=l),type:"text",placeholder:"Nama perusahaan",class:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500/50"},null,512),[[y,r.value.company]])])]),t("div",re,[t("button",{onClick:O,disabled:!r.value.name,class:"px-4 py-2 bg-purple-500/20 border border-purple-500/30 rounded-lg text-purple-200 hover:bg-purple-500/30 disabled:opacity-50 disabled:cursor-not-allowed transition-all"},e[25]||(e[25]=[t("i",{class:"fas fa-plus mr-2"},null,-1),j("Tambah External Trainer ")]),8,oe)])])):T("",!0),x.value==="internal"?(i(),n("div",de,[e[33]||(e[33]=t("h4",{class:"text-lg font-semibold text-white mb-4"},"Internal Trainer Tersedia",-1)),t("div",ue,[t("p",ce," Menampilkan "+o(C.value.length)+" dari "+o(m.availableTrainers.length)+" trainer ",1),t("div",pe,[e[28]||(e[28]=t("span",{class:"text-white/70 text-sm"},"Per halaman:",-1)),b(t("select",{"onUpdate:modelValue":e[8]||(e[8]=l=>w.value=l),class:"px-2 py-1 bg-white/10 border border-white/20 rounded text-white text-sm"},e[27]||(e[27]=[t("option",{value:"10",class:"bg-gray-800"},"10",-1),t("option",{value:"25",class:"bg-gray-800"},"25",-1),t("option",{value:"50",class:"bg-gray-800"},"50",-1)]),512),[[W,w.value]])])]),t("div",be,[(i(!0),n(L,null,$(V.value,l=>{var f,N;return i(),n("div",{key:l.id,class:"flex items-center justify-between p-3 bg-white/5 border border-white/10 rounded-lg hover:bg-white/10 transition-all"},[t("div",me,[t("div",ve,[l.avatar?(i(),n("img",{key:0,src:"/storage/"+l.avatar,alt:l.nama_lengkap,class:"w-full h-full object-cover"},null,8,he)):(i(),n("i",xe))]),t("div",null,[t("h5",fe,o(l.nama_lengkap),1),t("p",ge,o(((f=l.jabatan)==null?void 0:f.nama_jabatan)||"-"),1),t("p",we,o(((N=l.divisi)==null?void 0:N.nama_divisi)||"-"),1)])]),t("div",ye,[B(l.id)?(i(),n("span",ke,e[29]||(e[29]=[t("i",{class:"fas fa-check mr-1"},null,-1),j("Sudah diundang ")]))):(i(),n("button",{key:1,onClick:Pe=>A(l),class:"px-4 py-2 bg-blue-500/20 border border-blue-500/30 rounded-lg text-blue-200 hover:bg-blue-500/30 transition-all"},e[30]||(e[30]=[t("i",{class:"fas fa-plus mr-2"},null,-1),j("Undang ")]),8,_e))])])}),128))]),_.value>1?(i(),n("div",Te,[t("button",{onClick:e[9]||(e[9]=l=>p.value=Math.max(1,p.value-1)),disabled:p.value===1,class:"px-3 py-1 bg-white/10 border border-white/20 rounded text-white/70 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white/20"},e[31]||(e[31]=[t("i",{class:"fas fa-chevron-left"},null,-1)]),8,je),t("span",Ce,o(p.value)+" dari "+o(_.value),1),t("button",{onClick:e[10]||(e[10]=l=>p.value=Math.min(_.value,p.value+1)),disabled:p.value===_.value,class:"px-3 py-1 bg-white/10 border border-white/20 rounded text-white/70 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white/20"},e[32]||(e[32]=[t("i",{class:"fas fa-chevron-right"},null,-1)]),8,De)])):T("",!0)])):T("",!0),u.value.length>0?(i(),n("div",Ee,[e[35]||(e[35]=t("h4",{class:"text-lg font-semibold text-white mb-4"},"Trainer yang Akan Diundang",-1)),t("div",Ne,[(i(!0),n(L,null,$(u.value,l=>(i(),n("div",{key:l.id,class:"flex items-center justify-between p-3 bg-white/10 border border-white/20 rounded-lg"},[t("div",Se,[t("div",Le,[l.avatar?(i(),n("img",{key:0,src:"/storage/"+l.avatar,alt:l.nama_lengkap,class:"w-full h-full object-cover"},null,8,$e)):(i(),n("i",Ue))]),t("span",Ve,o(l.nama_lengkap),1)]),t("button",{onClick:f=>I(l.id),class:"text-red-400 hover:text-red-300"},e[34]||(e[34]=[t("i",{class:"fas fa-times"},null,-1)]),8,Me)]))),128))])])):T("",!0),t("div",Be,[t("button",{onClick:e[11]||(e[11]=l=>a.$emit("close")),class:"px-6 py-2 bg-white/10 border border-white/20 rounded-lg text-white/70 hover:text-white hover:bg-white/20 transition-all"}," Batal "),t("button",{onClick:P,disabled:u.value.length===0||k.value,class:"px-6 py-2 bg-blue-500/20 border border-blue-500/30 rounded-lg text-blue-200 hover:bg-blue-500/30 disabled:opacity-50 disabled:cursor-not-allowed transition-all"},[k.value?(i(),n("i",Ie)):(i(),n("i",Oe)),j(" Undang "+o(u.value.length)+" Trainer ",1)],8,Ae)])])])}}};export{ze as default};
