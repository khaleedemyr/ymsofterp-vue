import{r as h,c as L,L as n,B as l,x as j,Q as N,U as T,C as $,D as t,E as i,N as o,l as k,G as r,F as _,M as I,H as K,J as F,W as p}from"./vendor-vue-g7iCcTkf.js";import{A as O}from"./AppLayout-D6FAfGlz.js";import{S as c}from"./app-dzBjFUgD.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CUUHZNnG.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const R={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},G={class:"mb-6"},U={class:"flex items-center gap-4 mb-4"},V={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},W={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-5 border border-blue-200 shadow-sm"},E={class:"text-xl font-bold text-blue-900 font-mono"},z={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-5 border border-purple-200 shadow-sm"},q={class:"text-xl font-bold text-purple-900"},H={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-5 border border-green-200 shadow-sm"},Q={class:"text-xl font-bold text-green-900"},Y={class:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-5 border border-orange-200 shadow-sm"},J={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 mb-6"},P={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},X={class:"space-y-4"},Z={class:"text-base font-medium text-gray-900 bg-gray-50 px-4 py-2.5 rounded-lg border border-gray-200"},tt={class:"flex items-center gap-2 bg-gray-50 px-4 py-2.5 rounded-lg border border-gray-200"},et={class:"w-8 h-8 bg-blue-200 rounded-full flex items-center justify-center text-blue-800 font-bold text-xs"},st={class:"text-base font-medium text-gray-900"},at={class:"space-y-4"},ot={class:"text-base font-medium text-gray-900 bg-gray-50 px-4 py-2.5 rounded-lg border border-gray-200"},nt={class:"text-base text-gray-900 bg-gray-50 px-4 py-2.5 rounded-lg border border-gray-200 min-h-[60px]"},lt={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 mb-6"},rt={class:"overflow-x-auto"},it={class:"w-full min-w-full"},dt={class:"bg-white divide-y divide-gray-100"},ut={key:0},ct={class:"px-6 py-4"},mt={class:"text-sm font-medium text-gray-900"},gt={class:"px-6 py-4 whitespace-nowrap text-right"},xt={class:"text-sm font-semibold text-gray-900"},ft={class:"px-6 py-4 whitespace-nowrap"},bt={class:"inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-800"},pt={class:"px-6 py-4"},vt={class:"text-sm text-gray-700 max-w-md"},yt={key:0,class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 mb-6"},wt={class:"space-y-4"},ht={class:"flex justify-end gap-3"},jt=["disabled"],kt=["disabled"],_t={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},St={class:"space-y-4"},Ct={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},At={class:"text-sm text-gray-700 mb-1"},Dt={class:"text-sm text-gray-600"},Bt={key:0,class:"text-sm text-gray-700 mt-2 italic"},Mt={key:1,class:"bg-indigo-50 border border-indigo-200 rounded-lg p-4"},Lt={class:"text-sm text-gray-700 mb-1"},Nt={class:"text-sm text-gray-600"},Tt={key:0,class:"text-sm text-gray-700 mt-2 italic"},$t={key:2,class:"bg-green-50 border border-green-200 rounded-lg p-4"},It={class:"text-sm text-gray-700 mb-1"},Kt={class:"text-sm text-gray-600"},Ft={key:0,class:"text-sm text-gray-700 mt-2 italic"},Ot={key:3,class:"text-center py-8 text-gray-400"},Rt={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30"},Jt={__name:"Show",props:{adjustment:Object,user:Object},setup(s){const d=s,f=h(""),m=h(!1),S=L(()=>{if(!d.user)return!1;const a=d.adjustment.status,e=d.user.id_jabatan,g=d.user.id_role==="5af56935b011a"&&d.user.status==="A";if(a==="waiting_approval"){if(g)return!0;const x=d.adjustment.warehouse;return x&&["MK1 Hot Kitchen","MK2 Cold Kitchen"].includes(x.name)?e===179:[172,161].includes(e)}return a==="waiting_ssd_manager"?g||[161,172].includes(e):a==="waiting_cost_control"?g||e===167:!1});function C(){c.fire({title:"Approve Stock Adjustment?",text:"Setelah approve, data akan diproses ke inventory jika sudah final. Lanjutkan?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",preConfirm:()=>(m.value=!0,p.post(`/food-inventory-adjustment/${d.adjustment.id}/approve`,{note:f.value},{preserveScroll:!0,onSuccess:()=>{c.fire("Berhasil","Stock adjustment berhasil di-approve!","success"),p.reload()},onError:a=>{c.fire("Gagal",(a==null?void 0:a.error)||"Gagal approve","error")},onFinish:()=>{m.value=!1}})),allowOutsideClick:()=>!c.isLoading()})}function A(){c.fire({title:"Reject Stock Adjustment?",text:"Data akan ditolak dan tidak diproses ke inventory. Lanjutkan?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, Reject",cancelButtonText:"Batal",confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",preConfirm:()=>(m.value=!0,p.post(`/food-inventory-adjustment/${d.adjustment.id}/reject`,{note:f.value},{preserveScroll:!0,onSuccess:()=>{c.fire("Ditolak","Stock adjustment berhasil direject.","success"),p.reload()},onError:a=>{c.fire("Gagal",(a==null?void 0:a.error)||"Gagal reject","error")},onFinish:()=>{m.value=!1}})),allowOutsideClick:()=>!c.isLoading()})}function D(a){switch(a){case"waiting_approval":return"Menunggu Approval";case"waiting_ssd_manager":return"Menunggu SSD Manager";case"waiting_cost_control":return"Menunggu Cost Control";case"approved":return"Approved";case"rejected":return"Rejected";default:return a}}function B(a){const e="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold";switch(a){case"approved":return`${e} bg-green-100 text-green-800`;case"rejected":return`${e} bg-red-100 text-red-800`;case"waiting_approval":case"waiting_ssd_manager":case"waiting_cost_control":return`${e} bg-yellow-100 text-yellow-800`;default:return`${e} bg-gray-100 text-gray-800`}}function M(a){return a?new Date(a).toLocaleDateString("id-ID"):"-"}function b(a){return a?new Date(a).toLocaleString("id-ID"):"-"}function v(a){return`User ID: ${a}`}return(a,e)=>(l(),n(_,null,[j(N(T),{title:"Stock Adjustment #"+s.adjustment.number},null,8,["title"]),j(O,null,{default:$(()=>{var g,x,y;return[t("div",R,[t("div",G,[t("div",U,[t("button",{onClick:e[0]||(e[0]=u=>a.$inertia.visit("/food-inventory-adjustment")),class:"p-2 hover:bg-gray-100 rounded-lg transition-colors"},e[2]||(e[2]=[t("i",{class:"fa fa-arrow-left text-gray-600 text-xl"},null,-1)])),e[3]||(e[3]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900 flex items-center gap-3 mb-2"},[t("div",{class:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg"},[t("i",{class:"fa-solid fa-boxes-stacked text-white text-xl"})]),t("span",null,"Stock Adjustment Detail")]),t("p",{class:"text-gray-600 ml-16"},"Detail informasi penyesuaian stok inventory")],-1))])]),t("div",V,[t("div",W,[e[4]||(e[4]=t("div",{class:"flex items-center justify-between mb-2"},[t("p",{class:"text-sm font-medium text-blue-700"},"Adjustment Number"),t("div",{class:"p-2 bg-blue-500 rounded-lg"},[t("i",{class:"fa-solid fa-hashtag text-white text-sm"})])],-1)),t("p",E,o(s.adjustment.number),1)]),t("div",z,[e[5]||(e[5]=t("div",{class:"flex items-center justify-between mb-2"},[t("p",{class:"text-sm font-medium text-purple-700"},"Adjustment Date"),t("div",{class:"p-2 bg-purple-500 rounded-lg"},[t("i",{class:"fa-solid fa-calendar text-white text-sm"})])],-1)),t("p",q,o(M(s.adjustment.date)),1)]),t("div",H,[e[6]||(e[6]=t("div",{class:"flex items-center justify-between mb-2"},[t("p",{class:"text-sm font-medium text-green-700"},"Type"),t("div",{class:"p-2 bg-green-500 rounded-lg"},[t("i",{class:"fa-solid fa-tag text-white text-sm"})])],-1)),t("p",Q,[t("span",{class:k(s.adjustment.type==="in"?"text-green-700":"text-red-700")},o(s.adjustment.type==="in"?"Stock In":"Stock Out"),3)])]),t("div",Y,[e[7]||(e[7]=t("div",{class:"flex items-center justify-between mb-2"},[t("p",{class:"text-sm font-medium text-orange-700"},"Status"),t("div",{class:"p-2 bg-orange-500 rounded-lg"},[t("i",{class:"fa-solid fa-info-circle text-white text-sm"})])],-1)),t("span",{class:k(B(s.adjustment.status))},o(D(s.adjustment.status)),3)])]),t("div",J,[e[12]||(e[12]=t("div",{class:"flex items-center gap-2 mb-5"},[t("div",{class:"p-2 bg-blue-100 rounded-lg"},[t("i",{class:"fa-solid fa-info-circle text-blue-600"})]),t("h3",{class:"text-lg font-bold text-gray-800"},"Detail Information")],-1)),t("div",P,[t("div",X,[t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa-solid fa-warehouse text-blue-500 mr-2"}),r(" Warehouse ")],-1)),t("p",Z,o(((g=s.adjustment.warehouse)==null?void 0:g.name)||"-"),1)]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa-solid fa-user text-blue-500 mr-2"}),r(" Created By ")],-1)),t("div",tt,[t("div",et,o((x=s.adjustment.creator)!=null&&x.nama_lengkap?s.adjustment.creator.nama_lengkap.charAt(0).toUpperCase():"?"),1),t("span",st,o(((y=s.adjustment.creator)==null?void 0:y.nama_lengkap)||"-"),1)])])]),t("div",at,[t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa-solid fa-clock text-blue-500 mr-2"}),r(" Created At ")],-1)),t("p",ot,o(b(s.adjustment.created_at)),1)]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa-solid fa-note-sticky text-blue-500 mr-2"}),r(" Reason ")],-1)),t("p",nt,o(s.adjustment.reason||"-"),1)])])])]),t("div",lt,[e[15]||(e[15]=t("div",{class:"flex items-center gap-2 mb-5"},[t("div",{class:"p-2 bg-indigo-100 rounded-lg"},[t("i",{class:"fa-solid fa-list-check text-indigo-600"})]),t("h3",{class:"text-lg font-bold text-gray-800"},"Detail Items")],-1)),t("div",rt,[t("table",it,[e[14]||(e[14]=t("thead",{class:"bg-gradient-to-r from-indigo-600 to-indigo-700"},[t("tr",null,[t("th",{class:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider"},[t("div",{class:"flex items-center gap-2"},[t("i",{class:"fa-solid fa-box text-indigo-200"}),t("span",null,"Item")])]),t("th",{class:"px-6 py-4 text-right text-xs font-bold text-white uppercase tracking-wider"},[t("div",{class:"flex items-center justify-end gap-2"},[t("i",{class:"fa-solid fa-calculator text-indigo-200"}),t("span",null,"Quantity")])]),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider"},[t("div",{class:"flex items-center gap-2"},[t("i",{class:"fa-solid fa-ruler text-indigo-200"}),t("span",null,"Unit")])]),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider"},[t("div",{class:"flex items-center gap-2"},[t("i",{class:"fa-solid fa-note-sticky text-indigo-200"}),t("span",null,"Note")])])])],-1)),t("tbody",dt,[!s.adjustment.items||s.adjustment.items.length===0?(l(),n("tr",ut,e[13]||(e[13]=[t("td",{colspan:"4",class:"px-6 py-12 text-center"},[t("div",{class:"flex flex-col items-center justify-center"},[t("div",{class:"p-4 bg-gray-100 rounded-full mb-4"},[t("i",{class:"fa-solid fa-inbox text-4xl text-gray-400"})]),t("p",{class:"text-gray-500 text-lg font-medium"},"Tidak ada item")])],-1)]))):i("",!0),(l(!0),n(_,null,I(s.adjustment.items,u=>{var w;return l(),n("tr",{key:u.id,class:"hover:bg-indigo-50 transition-all duration-150"},[t("td",ct,[t("div",mt,o(((w=u.item)==null?void 0:w.name)||"-"),1)]),t("td",gt,[t("div",xt,o(Number(u.qty).toFixed(2)),1)]),t("td",ft,[t("span",bt,o(u.unit),1)]),t("td",pt,[t("div",vt,o(u.note||"-"),1)])])}),128))])])])]),S.value?(l(),n("div",yt,[e[19]||(e[19]=t("div",{class:"flex items-center gap-2 mb-5"},[t("div",{class:"p-2 bg-amber-100 rounded-lg"},[t("i",{class:"fa-solid fa-check-circle text-amber-600"})]),t("h3",{class:"text-lg font-bold text-gray-800"},"Approval")],-1)),t("div",wt,[t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa-solid fa-note-sticky text-blue-500 mr-2"}),r(" Catatan Approval (Opsional) ")],-1)),K(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=u=>f.value=u),class:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none",rows:"3",placeholder:"Masukkan catatan approval..."},null,512),[[F,f.value]])]),t("div",ht,[t("button",{onClick:A,disabled:m.value,class:"px-6 py-2.5 bg-red-500 hover:bg-red-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all font-semibold transform hover:-translate-y-0.5"},e[17]||(e[17]=[t("i",{class:"fa-solid fa-times mr-2"},null,-1),r(" Reject ")]),8,jt),t("button",{onClick:C,disabled:m.value,class:"px-6 py-2.5 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl shadow-lg hover:shadow-xl transition-all font-semibold transform hover:-translate-y-0.5"},e[18]||(e[18]=[t("i",{class:"fa-solid fa-check mr-2"},null,-1),r(" Approve ")]),8,kt)])])])):i("",!0),t("div",_t,[e[30]||(e[30]=t("div",{class:"flex items-center gap-2 mb-5"},[t("div",{class:"p-2 bg-purple-100 rounded-lg"},[t("i",{class:"fa-solid fa-history text-purple-600"})]),t("h3",{class:"text-lg font-bold text-gray-800"},"Riwayat Approval")],-1)),t("div",St,[s.adjustment.approved_by_assistant_ssd_manager?(l(),n("div",Ct,[e[22]||(e[22]=t("div",{class:"flex items-center justify-between mb-2"},[t("div",{class:"flex items-center gap-2"},[t("i",{class:"fa-solid fa-user-check text-blue-600"}),t("span",{class:"font-semibold text-blue-900"},"Asisten SSD Manager")]),t("span",{class:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded-full"},"Approved")],-1)),t("p",At,[e[20]||(e[20]=t("i",{class:"fa-solid fa-user mr-1"},null,-1)),r(" "+o(v(s.adjustment.approved_by_assistant_ssd_manager)),1)]),t("p",Dt,[e[21]||(e[21]=t("i",{class:"fa-solid fa-clock mr-1"},null,-1)),r(" "+o(b(s.adjustment.approved_at_assistant_ssd_manager)),1)]),s.adjustment.assistant_ssd_manager_note?(l(),n("p",Bt,' "'+o(s.adjustment.assistant_ssd_manager_note)+'" ',1)):i("",!0)])):i("",!0),s.adjustment.approved_by_ssd_manager?(l(),n("div",Mt,[e[25]||(e[25]=t("div",{class:"flex items-center justify-between mb-2"},[t("div",{class:"flex items-center gap-2"},[t("i",{class:"fa-solid fa-user-shield text-indigo-600"}),t("span",{class:"font-semibold text-indigo-900"},"SSD Manager / Sous Chef MK")]),t("span",{class:"text-xs text-indigo-600 bg-indigo-100 px-2 py-1 rounded-full"},"Approved")],-1)),t("p",Lt,[e[23]||(e[23]=t("i",{class:"fa-solid fa-user mr-1"},null,-1)),r(" "+o(v(s.adjustment.approved_by_ssd_manager)),1)]),t("p",Nt,[e[24]||(e[24]=t("i",{class:"fa-solid fa-clock mr-1"},null,-1)),r(" "+o(b(s.adjustment.approved_at_ssd_manager)),1)]),s.adjustment.ssd_manager_note?(l(),n("p",Tt,' "'+o(s.adjustment.ssd_manager_note)+'" ',1)):i("",!0)])):i("",!0),s.adjustment.approved_by_cost_control_manager?(l(),n("div",$t,[e[28]||(e[28]=t("div",{class:"flex items-center justify-between mb-2"},[t("div",{class:"flex items-center gap-2"},[t("i",{class:"fa-solid fa-user-tie text-green-600"}),t("span",{class:"font-semibold text-green-900"},"Cost Control Manager")]),t("span",{class:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded-full"},"Final Approved")],-1)),t("p",It,[e[26]||(e[26]=t("i",{class:"fa-solid fa-user mr-1"},null,-1)),r(" "+o(v(s.adjustment.approved_by_cost_control_manager)),1)]),t("p",Kt,[e[27]||(e[27]=t("i",{class:"fa-solid fa-clock mr-1"},null,-1)),r(" "+o(b(s.adjustment.approved_at_cost_control_manager)),1)]),s.adjustment.cost_control_manager_note?(l(),n("p",Ft,' "'+o(s.adjustment.cost_control_manager_note)+'" ',1)):i("",!0)])):i("",!0),!s.adjustment.approved_by_assistant_ssd_manager&&!s.adjustment.approved_by_ssd_manager&&!s.adjustment.approved_by_cost_control_manager?(l(),n("div",Ot,e[29]||(e[29]=[t("i",{class:"fa-solid fa-clock text-4xl mb-3"},null,-1),t("p",{class:"text-lg font-medium"},"Belum ada approval",-1)]))):i("",!0)])]),m.value?(l(),n("div",Rt,e[31]||(e[31]=[t("div",{class:"bg-white px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3"},[t("div",{class:"w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),t("span",{class:"font-semibold text-gray-700"},"Memproses...")],-1)]))):i("",!0)])]}),_:1})],64))}};export{Jt as default};
