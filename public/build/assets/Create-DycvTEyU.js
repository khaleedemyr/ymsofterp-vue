import{P as ke,c as he,w as Ve,r as y,a as je,A as Ce,B as d,C as oe,D as t,O as Ue,L as p,E as c,H as n,J as m,F as M,M as T,N as g,Q as s,a6 as _,G as le,l as se,V as f,x as $,W as re}from"./vendor-vue-g7iCcTkf.js";import{A as Pe}from"./AppLayout-C6QNM8cp.js";import{a as P}from"./vendor-utils-CpgP2uT4.js";import{s as N}from"./vue-multiselect.esm-V-bx43V9.js";/* empty css                            */import{S as A}from"./app-D-uxhaxN.js";import{_ as Ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-cFrDwyHJ.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const De={class:"py-12"},Ee={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Se={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Me={class:"mb-8"},Te={class:"mb-4"},$e={class:"relative"},Ne={key:0,class:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto"},Fe=["onClick"],Be={class:"font-medium"},Ie={class:"text-sm text-gray-600"},Le={key:0,class:"bg-gray-50 p-4 rounded-md"},Oe={class:"space-y-4"},Re={class:"mb-8"},qe={class:"bg-gray-50 p-4 rounded-md"},Ge={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Je={class:"flex items-center"},ze={class:"flex items-center"},Ke={class:"flex items-center"},Ye={class:"flex items-center"},He={class:"flex items-center"},We={class:"flex items-center"},Qe={class:"mt-4"},Xe={key:0,class:"mt-1 text-sm text-red-600"},Ze={class:"mb-8"},et={class:"bg-gray-50 p-4 rounded-md"},tt={class:"space-y-6"},ot={class:"border-b border-gray-200 pb-4"},lt={class:"flex items-center justify-between mb-3"},st={class:"flex items-center"},rt={class:"ml-6"},nt={class:"border-b border-gray-200 pb-4"},at={class:"flex items-center justify-between mb-3"},it={class:"flex items-center"},dt={class:"flex space-x-2"},pt={class:"ml-6"},mt={class:"border-b border-gray-200 pb-4"},ut={class:"flex items-center justify-between mb-3"},yt={class:"flex items-center"},gt={class:"ml-6"},vt={class:"ml-6"},bt={key:0,class:"mt-3"},ct={class:"text-sm text-gray-600 space-y-1"},ft=["onClick"],xt={class:"mb-8"},_t={class:"bg-gray-50 p-4 rounded-md"},wt={class:"space-y-6"},kt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 items-center"},ht={class:"flex items-center"},Vt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 items-center"},jt={class:"flex items-center"},Ct={class:"grid grid-cols-1 md:grid-cols-3 gap-4 items-center"},Ut={class:"flex items-center"},Pt=["disabled"],At={key:0,class:"text-xs text-gray-500 block"},Dt={class:"space-y-2"},Et={class:"grid grid-cols-2 gap-2"},St=["disabled"],Mt=["disabled"],Tt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 items-center"},$t={class:"flex items-center"},Nt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 items-center"},Ft={class:"flex items-center"},Bt={class:"mb-8"},It={class:"bg-gray-50 p-4 rounded-md"},Lt={class:"mb-8"},Ot={class:"mb-4"},Rt={class:"relative"},qt={key:0,class:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto"},Gt=["onClick"],Jt={class:"font-medium"},zt={class:"text-sm text-gray-600"},Kt={key:0,class:"text-xs text-blue-600 font-medium"},Yt={key:0,class:"space-y-2"},Ht={class:"flex items-center space-x-3"},Wt={class:"flex items-center space-x-2"},Qt=["onClick"],Xt=["onClick"],Zt={class:"flex items-center space-x-2"},eo={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},to={class:"font-medium"},oo={class:"text-sm text-gray-600"},lo={key:0,class:"text-xs text-blue-600 font-medium"},so=["onClick"],ro={class:"flex justify-end space-x-4"},no=["disabled"],ao={__name:"Create",setup(io){const o=ke({employee_id:"",employee_name:"",employee_position:"",employee_division:"",employee_unit_property:"",employee_join_date:"",employment_type:"",employment_effective_date:"",kpi_required:!1,kpi_date:"",psikotest_required:!1,psikotest_score:"",psikotest_date:"",training_attendance_required:!1,training_attendance_date:"",position_change:!1,position_from:"",position_to:"",level_change:!1,level_from:"",level_to:"",salary_change:!1,salary_from:"",salary_to:"",gaji_pokok_to:"",tunjangan_to:"",department_change:!1,department_from:"",department_to:"",division_change:!1,division_from:"",division_to:"",unit_property_change:!1,unit_property_from:"",unit_property_to:"",comments:"",kpi_attachment:null,psikotest_attachment:null,training_attachment:null,other_attachments:[],hod_approver_id:"",gm_approver_id:"",gm_hr_approver_id:"",bod_approver_id:"",approvers:[],status:"pending"}),w=he(()=>o.employment_type&&o.employment_type!=="extend_contract_without_adjustment"&&o.employment_type!=="termination");Ve(()=>o.employment_type,r=>{(r==="extend_contract_without_adjustment"||r==="termination")&&(o.salary_change=!1,o.gaji_pokok_to="",o.tunjangan_to="",o.salary_to="")});const k=y(""),h=y([]),D=y(!1),I=y(null),L=y(!1),V=y([]),j=y([]),C=y([]),U=y([]),F=y([]),x=y(""),E=y([]),B=y(!1),O=r=>r?r.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","):"",ne=r=>r?r.toString().replace(/\D/g,""):"",ae=async()=>{var r;try{console.log("Fetching dropdown data...");const e=route("employee-movements.dropdown-data");console.log("Request URL:",e);const a=await P.get(e);console.log("Dropdown data response:",a.data),a.data.success?(V.value=a.data.positions,j.value=a.data.levels,C.value=a.data.divisions,U.value=a.data.outlets,console.log("Positions loaded:",V.value.length),console.log("Levels loaded:",j.value.length),console.log("Divisions loaded:",C.value.length),console.log("Outlets loaded:",U.value.length)):console.error("API returned success: false")}catch(e){console.error("Error fetching dropdown data:",e),console.error("Error details:",(r=e.response)==null?void 0:r.data)}},ie=async()=>{var r;try{console.log("Fetching approvers data...");const e=route("employee-movements.approvers"),a=await P.get(e);console.log("Approvers data response:",a.data),a.data.success?(F.value=a.data.approvers,console.log("Approvers loaded:",F.value.length)):console.error("API returned success: false")}catch(e){console.error("Error fetching approvers data:",e),console.error("Error details:",(r=e.response)==null?void 0:r.data)}};je(()=>{console.log("Component mounted, fetching dropdown data..."),ae(),ie(),setTimeout(()=>{console.log("Positions after delay:",V.value),console.log("Levels after delay:",j.value),console.log("Divisions after delay:",C.value),console.log("Outlets after delay:",U.value),console.log("Approvers after delay:",F.value)},2e3)});const de=async()=>{if(k.value.length<2){h.value=[],D.value=!1;return}L.value=!0;try{const r=await P.get(route("employee-movements.search-employee"),{params:{search:k.value}});h.value=r.data,D.value=!0}catch(r){console.error("Error searching employees:",r)}finally{L.value=!1}},pe=async r=>{var e,a,l;I.value=r,o.employee_id=r.id,o.employee_name=r.nama_lengkap,o.employee_position=((e=r.jabatan)==null?void 0:e.nama_jabatan)||"",o.employee_division=((a=r.divisi)==null?void 0:a.nama_divisi)||"",o.employee_unit_property=((l=r.outlet)==null?void 0:l.nama_outlet)||"",o.employee_join_date=r.tanggal_masuk||"";try{const v=(await P.get(route("employee-movements.employee-details",r.id))).data;o.position_from=v.position||"",o.level_from=v.current_level||"",o.salary_from=O(v.current_salary||0),o.division_from=v.division||"",o.unit_property_from=v.unit_property||""}catch(i){console.error("Error fetching employee details:",i)}k.value=r.nama_lengkap,D.value=!1,h.value=[]},me=()=>{var G,J,z,K,Y,H,W,Q,X,Z,ee,te;if(!o.employment_effective_date){A.fire({title:"Validation Error",text:"Effective Date wajib diisi",icon:"error",confirmButtonText:"OK"});return}const r=parseInt(o.gaji_pokok_to)||0,e=parseInt(o.tunjangan_to)||0;if(o.salary_to=r+e,o.salary_change)if(o.salary_from&&o.salary_from!==""&&o.salary_from!==null){const b=ne(o.salary_from);o.salary_from=b&&parseInt(b)||0}else o.salary_from=0;else o.salary_from=null;const a=((G=o.position_to)==null?void 0:G.id)||"",l=((J=o.level_to)==null?void 0:J.id)||"",i=((z=o.division_to)==null?void 0:z.id)||"",v=((K=o.unit_property_to)==null?void 0:K.id)||"",ce=((Y=o.hod_approver_id)==null?void 0:Y.id)||"",fe=((H=o.gm_approver_id)==null?void 0:H.id)||"",xe=((W=o.gm_hr_approver_id)==null?void 0:W.id)||"",_e=((Q=o.bod_approver_id)==null?void 0:Q.id)||"",u={employee:o.employee_name,employment_type:o.employment_type,effective_date:o.employment_effective_date,position_change:o.position_change?"Yes":"No",position_to:((X=o.position_to)==null?void 0:X.name)||"-",level_change:o.level_change?"Yes":"No",level_to:((Z=o.level_to)==null?void 0:Z.name)||"-",salary_change:o.salary_change?"Yes":"No",salary_to:o.salary_to?O(o.salary_to):"-",division_change:o.division_change?"Yes":"No",division_to:((ee=o.division_to)==null?void 0:ee.name)||"-",unit_property_change:o.unit_property_change?"Yes":"No",unit_property_to:((te=o.unit_property_to)==null?void 0:te.name)||"-",comments:o.comments||"-"};o.position_to=a,o.level_to=l,o.division_to=i,o.unit_property_to=v,o.hod_approver_id=ce,o.gm_approver_id=fe,o.gm_hr_approver_id=xe,o.bod_approver_id=_e;const we=o.approvers.filter(b=>b&&b.id).map(b=>b.id);[...o.approvers],o.approvers=we,A.fire({title:"Confirm Employee Movement",html:`
      <div class="text-left">
        <h3 class="font-bold text-lg mb-3">Summary:</h3>
        <div class="space-y-2 text-sm">
          <div><strong>Employee:</strong> ${u.employee}</div>
          <div><strong>Employment Type:</strong> ${u.employment_type}</div>
          <div><strong>Effective Date:</strong> ${u.effective_date||"-"}</div>
          <hr class="my-2">
          <div><strong>Position Change:</strong> ${u.position_change}</div>
          <div><strong>New Position:</strong> ${u.position_to}</div>
          <div><strong>Level Change:</strong> ${u.level_change}</div>
          <div><strong>New Level:</strong> ${u.level_to}</div>
          <div><strong>Salary Change:</strong> ${u.salary_change}</div>
          <div><strong>New Salary:</strong> ${u.salary_to}</div>
          <div><strong>Division Change:</strong> ${u.division_change}</div>
          <div><strong>New Division:</strong> ${u.division_to}</div>
          <div><strong>Unit/Property Change:</strong> ${u.unit_property_change}</div>
          <div><strong>New Unit/Property:</strong> ${u.unit_property_to}</div>
          <div><strong>Adjustment Effective Date:</strong> ${u.adjustment_effective_date||"-"}</div>
          <hr class="my-2">
          <div><strong>Comments:</strong> ${u.comments}</div>
        </div>
      </div>
    `,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Save Employee Movement",cancelButtonText:"Cancel",showLoaderOnConfirm:!0,preConfirm:()=>new Promise(b=>{o.approvers=o.approvers.filter(S=>S!=null&&S!==""),console.log("Submitting approvers:",o.approvers),console.log("Form data before submit:",{approvers:o.approvers,approversType:typeof o.approvers,approversIsArray:Array.isArray(o.approvers),approversLength:o.approvers.length}),o.post(route("employee-movements.store"),{onSuccess:()=>{b()},onError:S=>{A.showValidationMessage(`Request failed: ${Object.values(S).join(", ")}`),b(!1)},forceFormData:!0})}),allowOutsideClick:()=>!A.isLoading()}).then(b=>{b.isConfirmed&&A.fire({title:"Success!",text:"Employee Movement has been saved successfully.",icon:"success",confirmButtonText:"OK"}).then(()=>{re.visit("/employee-movements")})})},ue=r=>{const e=Array.from(r.target.files);o.other_attachments=[...o.other_attachments,...e]},ye=r=>{o.other_attachments.splice(r,1)},ge=()=>{re.visit("/employee-movements")},R=async(r="")=>{try{const e=await P.get("/employee-movements/approvers",{params:{search:r},headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});e.data.success&&(E.value=e.data.approvers.map(a=>{var l;return{id:a.id,name:a.nama_lengkap,email:a.email||"",jabatan:((l=a.jabatan)==null?void 0:l.nama_jabatan)||""}}),B.value=!0)}catch(e){console.error("Failed to load approvers:",e),E.value=[]}},ve=r=>{o.approvers.find(e=>e.id===r.id)||o.approvers.push(r),x.value="",B.value=!1},be=r=>{o.approvers.splice(r,1)},q=(r,e)=>{const a=o.approvers.splice(r,1)[0];o.approvers.splice(e,0,a)};return(r,e)=>(d(),Ce(Pe,{title:"Create Employee Movement"},{header:oe(()=>e[46]||(e[46]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Create Employee Movement ",-1)])),default:oe(()=>{var a;return[t("div",De,[t("div",Ee,[t("div",Se,[t("form",{onSubmit:Ue(me,["prevent"]),class:"p-6"},[t("div",Me,[e[52]||(e[52]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Employee Details",-1)),t("div",Te,[e[47]||(e[47]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search Employee",-1)),t("div",$e,[n(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>k.value=l),onInput:de,type:"text",placeholder:"Search by name, NIK, or email...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[m,k.value]]),D.value&&h.value.length>0?(d(),p("div",Ne,[(d(!0),p(M,null,T(h.value,l=>{var i;return d(),p("div",{key:l.id,onClick:v=>pe(l),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200 last:border-b-0"},[t("div",Be,g(l.nama_lengkap),1),t("div",Ie," NIK: "+g(l.nik)+" | "+g(((i=l.jabatan)==null?void 0:i.nama_jabatan)||"No Position"),1)],8,Fe)}),128))])):c("",!0)])]),I.value?(d(),p("div",Le,[t("div",Oe,[t("div",null,[e[48]||(e[48]=t("label",{class:"block text-sm font-medium text-gray-700"},"Position",-1)),n(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>s(o).employee_position=l),type:"text",readonly:"",class:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"},null,512),[[m,s(o).employee_position]])]),t("div",null,[e[49]||(e[49]=t("label",{class:"block text-sm font-medium text-gray-700"},"Division",-1)),n(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>s(o).employee_division=l),type:"text",readonly:"",class:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"},null,512),[[m,s(o).employee_division]])]),t("div",null,[e[50]||(e[50]=t("label",{class:"block text-sm font-medium text-gray-700"},"Unit/Property",-1)),n(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>s(o).employee_unit_property=l),type:"text",readonly:"",class:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"},null,512),[[m,s(o).employee_unit_property]])]),t("div",null,[e[51]||(e[51]=t("label",{class:"block text-sm font-medium text-gray-700"},"Join Date",-1)),n(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>s(o).employee_join_date=l),type:"date",readonly:"",class:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"},null,512),[[m,s(o).employee_join_date]])])])])):c("",!0)]),t("div",Re,[e[60]||(e[60]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Employment & Renewal",-1)),t("div",qe,[t("div",Ge,[t("div",Je,[n(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>s(o).employment_type=l),type:"radio",value:"extend_contract_without_adjustment",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[_,s(o).employment_type]]),e[53]||(e[53]=t("label",{class:"ml-2 text-sm text-gray-700"},"Extend contract without adjustment",-1))]),t("div",ze,[n(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>s(o).employment_type=l),type:"radio",value:"extend_contract_with_adjustment",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[_,s(o).employment_type]]),e[54]||(e[54]=t("label",{class:"ml-2 text-sm text-gray-700"},"Extend contract with adjustment",-1))]),t("div",Ke,[n(t("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>s(o).employment_type=l),type:"radio",value:"promotion",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[_,s(o).employment_type]]),e[55]||(e[55]=t("label",{class:"ml-2 text-sm text-gray-700"},"Promotion",-1))]),t("div",Ye,[n(t("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>s(o).employment_type=l),type:"radio",value:"demotion",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[_,s(o).employment_type]]),e[56]||(e[56]=t("label",{class:"ml-2 text-sm text-gray-700"},"Demotion",-1))]),t("div",He,[n(t("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>s(o).employment_type=l),type:"radio",value:"mutation",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[_,s(o).employment_type]]),e[57]||(e[57]=t("label",{class:"ml-2 text-sm text-gray-700"},"Mutation",-1))]),t("div",We,[n(t("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>s(o).employment_type=l),type:"radio",value:"termination",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[_,s(o).employment_type]]),e[58]||(e[58]=t("label",{class:"ml-2 text-sm text-gray-700"},"Termination",-1))])]),t("div",Qe,[e[59]||(e[59]=t("label",{class:"block text-sm font-medium text-gray-700"},[le(" Effective Date "),t("span",{class:"text-red-500"},"*")],-1)),n(t("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>s(o).employment_effective_date=l),type:"date",required:"",class:se(["mt-1 w-full px-3 py-2 border border-gray-300 rounded-md",{"border-red-500":!s(o).employment_effective_date}])},null,2),[[m,s(o).employment_effective_date]]),s(o).employment_effective_date?c("",!0):(d(),p("p",Xe,"Effective Date wajib diisi"))])])]),t("div",Ze,[e[73]||(e[73]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Supporting Documents",-1)),t("div",et,[t("div",tt,[t("div",ot,[t("div",lt,[t("div",st,[n(t("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>s(o).kpi_required=l),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[f,s(o).kpi_required]]),e[61]||(e[61]=t("label",{class:"ml-2 text-sm font-medium text-gray-700"},"Key Performance Indicators (KPI)",-1))]),n(t("input",{"onUpdate:modelValue":e[13]||(e[13]=l=>s(o).kpi_date=l),type:"date",class:"px-3 py-2 border border-gray-300 rounded-md text-sm"},null,512),[[m,s(o).kpi_date]])]),t("div",rt,[e[62]||(e[62]=t("label",{class:"block text-sm text-gray-600 mb-2"},"Upload KPI Document (PDF/Image)",-1)),t("input",{onChange:e[14]||(e[14]=l=>s(o).kpi_attachment=l.target.files[0]),type:"file",accept:".pdf,.jpg,.jpeg,.png",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),e[63]||(e[63]=t("p",{class:"text-xs text-gray-500 mt-1"},"Max file size: 2MB. Allowed formats: PDF, JPG, JPEG, PNG",-1))])]),t("div",nt,[t("div",at,[t("div",it,[n(t("input",{"onUpdate:modelValue":e[15]||(e[15]=l=>s(o).psikotest_required=l),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[f,s(o).psikotest_required]]),e[64]||(e[64]=t("label",{class:"ml-2 text-sm font-medium text-gray-700"},"Psikotest Result by Training Manager: score =",-1))]),t("div",dt,[n(t("input",{"onUpdate:modelValue":e[16]||(e[16]=l=>s(o).psikotest_score=l),type:"text",placeholder:"Score",class:"px-3 py-2 border border-gray-300 rounded-md w-20 text-sm"},null,512),[[m,s(o).psikotest_score]]),n(t("input",{"onUpdate:modelValue":e[17]||(e[17]=l=>s(o).psikotest_date=l),type:"date",class:"px-3 py-2 border border-gray-300 rounded-md text-sm"},null,512),[[m,s(o).psikotest_date]])])]),t("div",pt,[e[65]||(e[65]=t("label",{class:"block text-sm text-gray-600 mb-2"},"Upload Psikotest Result (PDF/Image)",-1)),t("input",{onChange:e[18]||(e[18]=l=>s(o).psikotest_attachment=l.target.files[0]),type:"file",accept:".pdf,.jpg,.jpeg,.png",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),e[66]||(e[66]=t("p",{class:"text-xs text-gray-500 mt-1"},"Max file size: 2MB. Allowed formats: PDF, JPG, JPEG, PNG",-1))])]),t("div",mt,[t("div",ut,[t("div",yt,[n(t("input",{"onUpdate:modelValue":e[19]||(e[19]=l=>s(o).training_attendance_required=l),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[f,s(o).training_attendance_required]]),e[67]||(e[67]=t("label",{class:"ml-2 text-sm font-medium text-gray-700"},"Training Attendance Record by Training Manager",-1))]),n(t("input",{"onUpdate:modelValue":e[20]||(e[20]=l=>s(o).training_attendance_date=l),type:"date",class:"px-3 py-2 border border-gray-300 rounded-md text-sm"},null,512),[[m,s(o).training_attendance_date]])]),t("div",gt,[e[68]||(e[68]=t("label",{class:"block text-sm text-gray-600 mb-2"},"Upload Training Record (PDF/Image)",-1)),t("input",{onChange:e[21]||(e[21]=l=>s(o).training_attachment=l.target.files[0]),type:"file",accept:".pdf,.jpg,.jpeg,.png",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),e[69]||(e[69]=t("p",{class:"text-xs text-gray-500 mt-1"},"Max file size: 2MB. Allowed formats: PDF, JPG, JPEG, PNG",-1))])]),t("div",null,[e[72]||(e[72]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Other Supporting Documents",-1)),t("div",vt,[t("input",{onChange:ue,type:"file",multiple:"",accept:".pdf,.jpg,.jpeg,.png",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),e[71]||(e[71]=t("p",{class:"text-xs text-gray-500 mt-1"},"Max file size: 2MB per file. Allowed formats: PDF, JPG, JPEG, PNG",-1)),s(o).other_attachments.length>0?(d(),p("div",bt,[e[70]||(e[70]=t("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Selected files:",-1)),t("ul",ct,[(d(!0),p(M,null,T(s(o).other_attachments,(l,i)=>(d(),p("li",{key:i,class:"flex items-center justify-between"},[t("span",null,g(l.name),1),t("button",{onClick:v=>ye(i),type:"button",class:"text-red-600 hover:text-red-800 text-xs"}," Remove ",8,ft)]))),128))])])):c("",!0)])])])])]),t("div",xt,[e[91]||(e[91]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Adjustment & Movement",-1)),t("div",_t,[t("div",wt,[t("div",kt,[t("div",ht,[n(t("input",{"onUpdate:modelValue":e[22]||(e[22]=l=>s(o).position_change=l),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[f,s(o).position_change]]),e[74]||(e[74]=t("label",{class:"ml-2 text-sm text-gray-700"},"Position",-1))]),t("div",null,[e[75]||(e[75]=t("label",{class:"block text-xs text-gray-600 mb-1"},"From",-1)),n(t("input",{"onUpdate:modelValue":e[23]||(e[23]=l=>s(o).position_from=l),type:"text",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"},null,512),[[m,s(o).position_from]])]),t("div",null,[e[76]||(e[76]=t("label",{class:"block text-xs text-gray-600 mb-1"},"To",-1)),$(s(N),{modelValue:s(o).position_to,"onUpdate:modelValue":e[24]||(e[24]=l=>s(o).position_to=l),options:V.value,searchable:!0,"clear-on-select":!1,"close-on-select":!0,"show-labels":!1,"track-by":"id",label:"name",placeholder:"Select position...",class:"w-full",onOpen:e[25]||(e[25]=()=>console.log("Position multiselect opened, options:",V.value))},null,8,["modelValue","options"])])]),t("div",Vt,[t("div",jt,[n(t("input",{"onUpdate:modelValue":e[26]||(e[26]=l=>s(o).level_change=l),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[f,s(o).level_change]]),e[77]||(e[77]=t("label",{class:"ml-2 text-sm text-gray-700"},"Level",-1))]),t("div",null,[e[78]||(e[78]=t("label",{class:"block text-xs text-gray-600 mb-1"},"From",-1)),n(t("input",{"onUpdate:modelValue":e[27]||(e[27]=l=>s(o).level_from=l),type:"text",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"},null,512),[[m,s(o).level_from]])]),t("div",null,[e[79]||(e[79]=t("label",{class:"block text-xs text-gray-600 mb-1"},"To",-1)),$(s(N),{modelValue:s(o).level_to,"onUpdate:modelValue":e[28]||(e[28]=l=>s(o).level_to=l),options:j.value,searchable:!0,"clear-on-select":!1,"close-on-select":!0,"show-labels":!1,"track-by":"id",label:"name",placeholder:"Select level...",class:"w-full",onOpen:e[29]||(e[29]=()=>console.log("Level multiselect opened, options:",j.value))},null,8,["modelValue","options"])])]),t("div",Ct,[t("div",Ut,[n(t("input",{"onUpdate:modelValue":e[30]||(e[30]=l=>s(o).salary_change=l),type:"checkbox",disabled:!w.value,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed"},null,8,Pt),[[f,s(o).salary_change]]),t("label",{class:se(["ml-2 text-sm text-gray-700",{"text-gray-400":!w.value}])},[e[80]||(e[80]=le(" Salary ")),w.value?c("",!0):(d(),p("span",At," (Not available for "+g(((a=s(o).employment_type)==null?void 0:a.replace(/_/g," "))||"selected type")+") ",1))],2)]),t("div",null,[e[81]||(e[81]=t("label",{class:"block text-xs text-gray-600 mb-1"},"From",-1)),n(t("input",{"onUpdate:modelValue":e[31]||(e[31]=l=>s(o).salary_from=l),type:"text",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"},null,512),[[m,s(o).salary_from]])]),t("div",Dt,[e[84]||(e[84]=t("label",{class:"block text-xs text-gray-600 mb-1"},"To",-1)),t("div",Et,[t("div",null,[e[82]||(e[82]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Gaji Pokok",-1)),n(t("input",{"onUpdate:modelValue":e[32]||(e[32]=l=>s(o).gaji_pokok_to=l),type:"number",min:"0",step:"1",placeholder:"0",disabled:!w.value||!s(o).salary_change,class:"w-full px-3 py-2 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-100"},null,8,St),[[m,s(o).gaji_pokok_to,void 0,{number:!0}]])]),t("div",null,[e[83]||(e[83]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Tunjangan",-1)),n(t("input",{"onUpdate:modelValue":e[33]||(e[33]=l=>s(o).tunjangan_to=l),type:"number",min:"0",step:"1",placeholder:"0",disabled:!w.value||!s(o).salary_change,class:"w-full px-3 py-2 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-100"},null,8,Mt),[[m,s(o).tunjangan_to,void 0,{number:!0}]])])])])]),t("div",Tt,[t("div",$t,[n(t("input",{"onUpdate:modelValue":e[34]||(e[34]=l=>s(o).division_change=l),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[f,s(o).division_change]]),e[85]||(e[85]=t("label",{class:"ml-2 text-sm text-gray-700"},"Division",-1))]),t("div",null,[e[86]||(e[86]=t("label",{class:"block text-xs text-gray-600 mb-1"},"From",-1)),n(t("input",{"onUpdate:modelValue":e[35]||(e[35]=l=>s(o).division_from=l),type:"text",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"},null,512),[[m,s(o).division_from]])]),t("div",null,[e[87]||(e[87]=t("label",{class:"block text-xs text-gray-600 mb-1"},"To",-1)),$(s(N),{modelValue:s(o).division_to,"onUpdate:modelValue":e[36]||(e[36]=l=>s(o).division_to=l),options:C.value,searchable:!0,"clear-on-select":!1,"close-on-select":!0,"show-labels":!1,"track-by":"id",label:"name",placeholder:"Select division...",class:"w-full",onOpen:e[37]||(e[37]=()=>console.log("Division multiselect opened, options:",C.value))},null,8,["modelValue","options"])])]),t("div",Nt,[t("div",Ft,[n(t("input",{"onUpdate:modelValue":e[38]||(e[38]=l=>s(o).unit_property_change=l),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[f,s(o).unit_property_change]]),e[88]||(e[88]=t("label",{class:"ml-2 text-sm text-gray-700"},"Unit/Property",-1))]),t("div",null,[e[89]||(e[89]=t("label",{class:"block text-xs text-gray-600 mb-1"},"From",-1)),n(t("input",{"onUpdate:modelValue":e[39]||(e[39]=l=>s(o).unit_property_from=l),type:"text",readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100"},null,512),[[m,s(o).unit_property_from]])]),t("div",null,[e[90]||(e[90]=t("label",{class:"block text-xs text-gray-600 mb-1"},"To",-1)),$(s(N),{modelValue:s(o).unit_property_to,"onUpdate:modelValue":e[40]||(e[40]=l=>s(o).unit_property_to=l),options:U.value,searchable:!0,"clear-on-select":!1,"close-on-select":!0,"show-labels":!1,"track-by":"id",label:"name",placeholder:"Select outlet...",class:"w-full",onOpen:e[41]||(e[41]=()=>console.log("Outlet multiselect opened, options:",U.value))},null,8,["modelValue","options"])])])])])]),t("div",Bt,[e[93]||(e[93]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Comments",-1)),t("div",It,[e[92]||(e[92]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"(Explain reason for movement.)",-1)),n(t("textarea",{"onUpdate:modelValue":e[42]||(e[42]=l=>s(o).comments=l),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter comments here..."},null,512),[[m,s(o).comments]])])]),t("div",Lt,[e[98]||(e[98]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Approval Flow",-1)),e[99]||(e[99]=t("p",{class:"text-sm text-gray-600 mb-4"},"Add approvers in order from lowest to highest level. The first approver will be the lowest level, and the last approver will be the highest level.",-1)),t("div",Ot,[t("div",Rt,[n(t("input",{"onUpdate:modelValue":e[43]||(e[43]=l=>x.value=l),type:"text",placeholder:"Search users by name, email, or jabatan...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onInput:e[44]||(e[44]=l=>x.value.length>=2&&R(x.value)),onFocus:e[45]||(e[45]=l=>x.value.length>=2&&R(x.value))},null,544),[[m,x.value]]),B.value&&E.value.length>0?(d(),p("div",qt,[(d(!0),p(M,null,T(E.value,l=>(d(),p("div",{key:l.id,onClick:i=>ve(l),class:"px-3 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200 last:border-b-0"},[t("div",Jt,g(l.name),1),t("div",zt,g(l.email),1),l.jabatan?(d(),p("div",Kt,g(l.jabatan),1)):c("",!0)],8,Gt))),128))])):c("",!0)])]),s(o).approvers.length>0?(d(),p("div",Yt,[e[97]||(e[97]=t("h4",{class:"font-medium text-gray-700"},"Approval Order (Lowest to Highest):",-1)),(d(!0),p(M,null,T(s(o).approvers,(l,i)=>(d(),p("div",{key:l.id,class:"flex items-center justify-between p-3 rounded-md bg-gray-50 border border-gray-200"},[t("div",Ht,[t("div",Wt,[i>0?(d(),p("button",{key:0,onClick:v=>q(i,i-1),class:"p-1 text-gray-500 hover:text-gray-700",title:"Move Up"},e[94]||(e[94]=[t("i",{class:"fa fa-arrow-up"},null,-1)]),8,Qt)):c("",!0),i<s(o).approvers.length-1?(d(),p("button",{key:1,onClick:v=>q(i,i+1),class:"p-1 text-gray-500 hover:text-gray-700",title:"Move Down"},e[95]||(e[95]=[t("i",{class:"fa fa-arrow-down"},null,-1)]),8,Xt)):c("",!0)]),t("div",Zt,[t("span",eo," Level "+g(i+1),1),t("div",null,[t("div",to,g(l.name),1),t("div",oo,g(l.email),1),l.jabatan?(d(),p("div",lo,g(l.jabatan),1)):c("",!0)])])]),t("button",{onClick:v=>be(i),class:"p-1 text-red-500 hover:text-red-700",title:"Remove Approver"},e[96]||(e[96]=[t("i",{class:"fa fa-times"},null,-1)]),8,so)]))),128))])):c("",!0)]),t("div",ro,[t("button",{type:"button",onClick:ge,class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50"}," Cancel "),t("button",{type:"submit",disabled:s(o).processing,class:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 disabled:opacity-50"},g(s(o).processing?"Saving...":"Save Employee Movement"),9,no)])],32)])])])]}),_:1}))}},ko=Ae(ao,[["__scopeId","data-v-eb0ad17d"]]);export{ko as default};
