import{r as w,c as T,w as I,W as f,A as P,B as l,C as U,D as e,G as r,L as i,N as n,O as W,H as h,J as k,I as Y,E as m,F as B,M as j,l as x}from"./vendor-vue-g7iCcTkf.js";import{A as z}from"./AppLayout-hxs5t3XP.js";import{S as g}from"./app-D6rf3j_5.js";import{l as J}from"./lodash-DB3HVzpp.js";import{a as K}from"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-D4k-zQf5.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const q={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},Q={class:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-6 backdrop-blur-sm"},X={class:"flex items-center justify-between mb-6"},Z={class:"text-sm text-gray-500"},ee={key:0,class:"text-blue-600 font-semibold"},te={key:1,class:"text-gray-400"},ae={class:"space-y-1"},se={class:"space-y-1"},oe={class:"space-y-1"},re={class:"space-y-1"},le={class:"flex justify-end gap-3 mt-6 pt-6 border-t border-gray-200"},ie={class:"bg-gradient-to-r from-blue-50 to-cyan-50 border-l-4 border-blue-500 rounded-xl p-4 mb-6 shadow-sm"},ne={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3"},de={class:"flex items-center gap-2 text-sm font-semibold text-blue-800"},ue={class:"font-bold text-blue-900"},ce={class:"font-bold text-blue-900"},fe={key:0,class:"ml-2 px-2 py-0.5 bg-blue-200 rounded-full text-xs"},pe=["disabled"],me={key:0},xe={key:1},ge={class:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden"},be={class:"overflow-x-auto"},ye={class:"min-w-full divide-y divide-gray-200"},he={class:"bg-white divide-y divide-gray-100"},ve={key:0,class:"hover:bg-gray-50"},_e={class:"px-6 py-4 whitespace-nowrap"},we={class:"text-sm font-medium text-gray-900"},ke={class:"px-6 py-4 whitespace-nowrap"},Ce={class:"text-sm font-semibold text-gray-900 font-mono"},De={class:"px-6 py-4"},Fe={class:"text-sm text-gray-900 font-medium"},Se={class:"px-6 py-4"},Te={class:"text-sm text-gray-700"},Be={class:"px-6 py-4"},je={class:"text-sm text-gray-700"},Ee={class:"px-6 py-4 whitespace-nowrap"},Me={class:"px-6 py-4 whitespace-nowrap text-right"},Le={class:"text-sm font-bold text-blue-700"},Re={class:"px-6 py-4 whitespace-nowrap"},He={class:"px-6 py-4 whitespace-nowrap"},Ne={class:"flex items-center justify-center gap-2"},Oe=["onClick"],Ve=["onClick","disabled"],$e={key:0},Ae={key:1},Ge={key:1,class:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold text-gray-400 bg-gray-100 rounded-lg cursor-not-allowed",title:"Hanya admin yang dapat menghapus transaksi"},Ie={class:"flex flex-wrap justify-end items-center gap-2 mt-6"},Pe=["disabled","onClick","innerHTML"],tt={__name:"Index",props:{user:Object,retailFoods:Object,filters:Object,canDelete:Boolean},setup(v){var C,D,F,S;const d=v,b=w(null),p=w(!1),s=w({search:((C=d.filters)==null?void 0:C.search)||"",date_from:((D=d.filters)==null?void 0:D.date_from)||"",date_to:((F=d.filters)==null?void 0:F.date_to)||"",payment_method:((S=d.filters)==null?void 0:S.payment_method)||""}),y=T(()=>s.value.search||s.value.date_from||s.value.date_to||s.value.payment_method),E=T(()=>{let o=0;return s.value.search&&o++,s.value.date_from&&o++,s.value.date_to&&o++,s.value.payment_method&&o++,o}),M=J.debounce(()=>{_()},500);I(()=>s.value.search,()=>{M()});function _(){const o={};s.value.search&&(o.search=s.value.search),s.value.date_from&&(o.date_from=s.value.date_from),s.value.date_to&&(o.date_to=s.value.date_to),s.value.payment_method&&(o.payment_method=s.value.payment_method),f.get("/retail-food",o,{preserveState:!0,replace:!0})}function L(){s.value={search:"",date_from:"",date_to:"",payment_method:""},f.get("/retail-food",{},{preserveState:!0,replace:!0})}function R(){f.visit(route("retail-food.report-supplier"))}function H(){f.visit("/retail-food/create")}function N(o){f.visit(`/retail-food/${o}`)}function O(o){o&&f.visit(o,{preserveState:!0,replace:!0})}async function V(o){var a,u;if((await g.fire({title:"Hapus Transaksi?",text:`Yakin ingin menghapus transaksi ${o.retail_number}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed){b.value=o.id;try{const c=await K.delete(`/retail-food/${o.id}`);c.data&&c.data.message&&(g.fire({icon:"success",title:"Berhasil",text:c.data.message,timer:1500,showConfirmButton:!1}),setTimeout(()=>f.reload(),1200))}catch(c){g.fire({icon:"error",title:"Gagal",text:((u=(a=c.response)==null?void 0:a.data)==null?void 0:u.message)||"Gagal menghapus transaksi"})}finally{b.value=null}}}function $(o){return o?new Date(o).toLocaleDateString("id-ID"):"-"}function A(o){return o?"Rp "+Number(o).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2}):"Rp 0"}async function G(){var o,t;if(!p.value){p.value=!0;try{const a=new URLSearchParams;s.value.search&&a.append("search",s.value.search),s.value.date_from&&a.append("date_from",s.value.date_from),s.value.date_to&&a.append("date_to",s.value.date_to),s.value.payment_method&&a.append("payment_method",s.value.payment_method);const u=`/retail-food/export?${a.toString()}`;window.open(u,"_blank"),g.fire({icon:"success",title:"Export Dimulai",text:"File Excel sedang didownload...",timer:2e3,showConfirmButton:!1})}catch(a){g.fire({icon:"error",title:"Gagal Export",text:((t=(o=a.response)==null?void 0:o.data)==null?void 0:t.error)||"Gagal melakukan export data"})}finally{p.value=!1}}}return(o,t)=>(l(),P(z,null,{default:U(()=>[e("div",q,[e("div",{class:"mb-8"},[e("div",{class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-2"},[t[6]||(t[6]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 flex items-center gap-3"},[e("div",{class:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg"},[e("i",{class:"fa-solid fa-store text-white text-xl"})]),e("span",null,"Outlet Retail Food")]),e("p",{class:"text-sm text-gray-500 mt-1 ml-14"},"Kelola transaksi retail food outlet")],-1)),e("div",{class:"flex gap-3"},[e("button",{onClick:R,class:"group relative inline-flex items-center gap-2 bg-gradient-to-r from-green-500 to-green-600 text-white px-5 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 font-semibold hover:from-green-600 hover:to-green-700 transform hover:-translate-y-0.5"},t[4]||(t[4]=[e("i",{class:"fa-solid fa-chart-line"},null,-1),e("span",null,"Report Supplier",-1)])),e("button",{onClick:H,class:"group relative inline-flex items-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 font-semibold hover:from-blue-600 hover:to-blue-700 transform hover:-translate-y-0.5"},t[5]||(t[5]=[e("i",{class:"fa-solid fa-plus text-lg"},null,-1),e("span",null,"Tambah Baru",-1)]))])])]),e("div",Q,[e("div",X,[t[9]||(t[9]=e("h3",{class:"text-lg font-bold text-gray-800 flex items-center gap-2"},[e("div",{class:"p-1.5 bg-blue-100 rounded-lg"},[e("i",{class:"fa-solid fa-filter text-blue-600"})]),r(" Filter Data ")],-1)),e("div",Z,[y.value?(l(),i("span",ee,[t[7]||(t[7]=e("i",{class:"fa-solid fa-check-circle mr-1"},null,-1)),r(n(E.value)+" filter aktif ",1)])):(l(),i("span",te,t[8]||(t[8]=[e("i",{class:"fa-solid fa-info-circle mr-1"},null,-1),r("Tidak ada filter aktif ")])))])]),e("form",{onSubmit:W(_,["prevent"]),class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},[e("div",ae,[t[10]||(t[10]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-1"},[e("i",{class:"fa-solid fa-search mr-1 text-gray-400"}),r("Cari ")],-1)),h(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>s.value.search=a),placeholder:"No. transaksi, supplier, outlet...",class:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white"},null,512),[[k,s.value.search]])]),e("div",se,[t[11]||(t[11]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-1"},[e("i",{class:"fa-solid fa-calendar-alt mr-1 text-gray-400"}),r("Tanggal Dari ")],-1)),h(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=a=>s.value.date_from=a),class:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white"},null,512),[[k,s.value.date_from]])]),e("div",oe,[t[12]||(t[12]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-1"},[e("i",{class:"fa-solid fa-calendar-check mr-1 text-gray-400"}),r("Tanggal Sampai ")],-1)),h(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=a=>s.value.date_to=a),class:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white"},null,512),[[k,s.value.date_to]])]),e("div",re,[t[14]||(t[14]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-1"},[e("i",{class:"fa-solid fa-credit-card mr-1 text-gray-400"}),r("Metode Pembayaran ")],-1)),h(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>s.value.payment_method=a),class:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50 hover:bg-white"},t[13]||(t[13]=[e("option",{value:""},"Semua",-1),e("option",{value:"cash"},"Cash",-1),e("option",{value:"contra_bon"},"Contra Bon",-1)]),512),[[Y,s.value.payment_method]])])],32),e("div",le,[y.value?(l(),i("button",{key:0,onClick:L,class:"inline-flex items-center gap-2 px-5 py-2.5 text-sm font-semibold text-gray-700 bg-gray-100 border-2 border-gray-200 rounded-xl hover:bg-gray-200 hover:border-gray-300 transition-all duration-200"},t[15]||(t[15]=[e("i",{class:"fa-solid fa-times"},null,-1),r(" Reset Filter ")]))):m("",!0),e("button",{onClick:_,class:"inline-flex items-center gap-2 px-5 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl hover:from-blue-600 hover:to-blue-700 shadow-md hover:shadow-lg transition-all duration-200 transform hover:-translate-y-0.5"},t[16]||(t[16]=[e("i",{class:"fa-solid fa-search"},null,-1),r(" Terapkan Filter ")]))])]),e("div",ie,[e("div",ne,[e("div",de,[t[20]||(t[20]=e("i",{class:"fa-solid fa-info-circle text-lg"},null,-1)),e("span",null,[t[17]||(t[17]=r("Menampilkan ")),e("span",ue,n(d.retailFoods.data.length),1),t[18]||(t[18]=r(" dari ")),e("span",ce,n(d.retailFoods.total),1),t[19]||(t[19]=r(" transaksi"))]),y.value?(l(),i("span",fe," (dengan filter) ")):m("",!0)]),y.value&&d.retailFoods.total>0?(l(),i("button",{key:0,onClick:G,disabled:p.value,class:"inline-flex items-center gap-2 px-4 py-2 text-sm font-semibold text-white bg-gradient-to-r from-green-500 to-green-600 rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg transition-all duration-200 transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"},[t[21]||(t[21]=e("i",{class:"fa-solid fa-file-excel"},null,-1)),p.value?(l(),i("span",me,"Exporting...")):(l(),i("span",xe,"Export Excel"))],8,pe)):m("",!0)])]),e("div",ge,[e("div",be,[e("table",ye,[t[27]||(t[27]=e("thead",{class:"bg-gradient-to-r from-gray-50 to-gray-100"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider border-r border-gray-200"},[e("div",{class:"flex items-center gap-2"},[e("i",{class:"fa-solid fa-calendar text-gray-400"}),r(" Tanggal ")])]),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider border-r border-gray-200"},[e("div",{class:"flex items-center gap-2"},[e("i",{class:"fa-solid fa-hashtag text-gray-400"}),r(" No. Transaksi ")])]),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider border-r border-gray-200"},[e("div",{class:"flex items-center gap-2"},[e("i",{class:"fa-solid fa-store text-gray-400"}),r(" Outlet ")])]),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider border-r border-gray-200"},[e("div",{class:"flex items-center gap-2"},[e("i",{class:"fa-solid fa-warehouse text-gray-400"}),r(" Warehouse Outlet ")])]),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider border-r border-gray-200"},[e("div",{class:"flex items-center gap-2"},[e("i",{class:"fa-solid fa-truck text-gray-400"}),r(" Supplier ")])]),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider border-r border-gray-200"},[e("div",{class:"flex items-center gap-2"},[e("i",{class:"fa-solid fa-credit-card text-gray-400"}),r(" Metode Pembayaran ")])]),e("th",{class:"px-6 py-4 text-right text-xs font-bold text-gray-700 uppercase tracking-wider border-r border-gray-200"},[e("div",{class:"flex items-center justify-end gap-2"},[e("i",{class:"fa-solid fa-money-bill-wave text-gray-400"}),r(" Total ")])]),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider border-r border-gray-200"},[e("div",{class:"flex items-center gap-2"},[e("i",{class:"fa-solid fa-info-circle text-gray-400"}),r(" Status ")])]),e("th",{class:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider"},[e("div",{class:"flex items-center justify-center gap-2"},[e("i",{class:"fa-solid fa-cog text-gray-400"}),r(" Aksi ")])])])],-1)),e("tbody",he,[d.retailFoods.data.length?m("",!0):(l(),i("tr",ve,t[22]||(t[22]=[e("td",{colspan:"9",class:"text-center py-16"},[e("div",{class:"flex flex-col items-center gap-3"},[e("div",{class:"p-4 bg-gray-100 rounded-full"},[e("i",{class:"fa-solid fa-inbox text-4xl text-gray-400"})]),e("p",{class:"text-gray-500 font-medium"},"Tidak ada data transaksi"),e("p",{class:"text-sm text-gray-400"},"Coba ubah filter atau tambahkan transaksi baru")])],-1)]))),(l(!0),i(B,null,j(d.retailFoods.data,a=>{var u;return l(),i("tr",{key:a.id,class:"hover:bg-blue-50/50 transition-colors duration-150 border-b border-gray-100"},[e("td",_e,[e("div",we,n($(a.transaction_date)),1)]),e("td",ke,[e("div",Ce,n(a.retail_number),1)]),e("td",De,[e("div",Fe,n(((u=a.outlet)==null?void 0:u.nama_outlet)||"-"),1)]),e("td",Se,[e("div",Te,n(a.warehouse_outlet_name||"-"),1)]),e("td",Be,[e("div",je,n(a.supplier_name||"-"),1)]),e("td",Ee,[e("span",{class:x({"inline-flex items-center px-3 py-1.5 text-xs font-bold rounded-full shadow-sm":!0,"bg-green-100 text-green-800 border border-green-200":a.payment_method==="cash","bg-blue-100 text-blue-800 border border-blue-200":a.payment_method==="contra_bon"})},[e("i",{class:x({"fa-solid fa-money-bill-wave mr-1.5":a.payment_method==="cash","fa-solid fa-credit-card mr-1.5":a.payment_method==="contra_bon"})},null,2),r(" "+n(a.payment_method==="cash"?"Cash":"Contra Bon"),1)],2)]),e("td",Me,[e("div",Le,n(A(a.total_amount)),1)]),e("td",Re,[e("span",{class:x({"inline-flex items-center px-3 py-1.5 text-xs font-bold rounded-full shadow-sm":!0,"bg-yellow-100 text-yellow-800 border border-yellow-200":a.status==="draft","bg-green-100 text-green-800 border border-green-200":a.status==="approved"})},[e("i",{class:x({"fa-solid fa-file-alt mr-1.5":a.status==="draft","fa-solid fa-check-circle mr-1.5":a.status==="approved"})},null,2),r(" "+n(a.status==="draft"?"Draft":"Approved"),1)],2)]),e("td",He,[e("div",Ne,[e("button",{class:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold text-white bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg hover:from-blue-600 hover:to-blue-700 shadow-sm hover:shadow transition-all duration-200 transform hover:scale-105",onClick:c=>N(a.id)},t[23]||(t[23]=[e("i",{class:"fa fa-eye"},null,-1),r(" Detail ")]),8,Oe),v.canDelete?(l(),i("button",{key:0,class:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold text-white bg-gradient-to-r from-red-500 to-red-600 rounded-lg hover:from-red-600 hover:to-red-700 shadow-sm hover:shadow transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",onClick:c=>V(a),disabled:b.value===a.id,title:"Hapus transaksi"},[b.value===a.id?(l(),i("span",$e,t[24]||(t[24]=[e("i",{class:"fa fa-spinner fa-spin"},null,-1)]))):(l(),i("span",Ae,t[25]||(t[25]=[e("i",{class:"fa fa-trash"},null,-1)])))],8,Ve)):v.canDelete?m("",!0):(l(),i("span",Ge,t[26]||(t[26]=[e("i",{class:"fa fa-lock"},null,-1)])))])])])}),128))])])])]),e("div",Ie,[(l(!0),i(B,null,j(d.retailFoods.links,a=>(l(),i("button",{key:a.label,disabled:!a.url,onClick:u=>O(a.url),innerHTML:a.label,class:x(["px-4 py-2 rounded-xl border-2 text-sm font-semibold transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",[a.active?"bg-gradient-to-r from-blue-500 to-blue-600 text-white border-blue-600 shadow-lg":"bg-white text-blue-700 border-blue-200 hover:bg-blue-50 hover:border-blue-300",a.url?"cursor-pointer":"cursor-not-allowed"]])},null,10,Pe))),128))])])]),_:1}))}};export{tt as default};
