import{r as I,a as j,A as S,B as o,C as k,D as t,G as a,H as D,J as T,N as l,L as r,F,M,l as R,W as C}from"./vendor-vue-g7iCcTkf.js";import{A as B}from"./AppLayout-DQ4wNTsP.js";import"./vendor-utils-CpgP2uT4.js";import"./app-DAB8i6cE.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CinBCb2E.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const q={class:"py-12"},O={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},V={class:"bg-white rounded-xl shadow-lg p-6 mb-6"},A={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},E={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},J={class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500"},L={class:"flex items-center justify-between"},H={class:"text-2xl font-bold text-gray-900"},U={class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500"},W={class:"flex items-center justify-between"},z={class:"text-2xl font-bold text-gray-900"},G={class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500"},P={class:"flex items-center justify-between"},K={class:"text-lg font-bold text-gray-900"},Q={class:"bg-white rounded-xl shadow-lg p-6 mb-8"},X={key:0,class:"text-center py-8 text-gray-500"},Y={key:1,class:"overflow-x-auto"},Z={class:"min-w-full divide-y divide-gray-200"},$={class:"bg-white divide-y divide-gray-200"},tt={class:"px-6 py-4 whitespace-nowrap"},et={class:"flex items-center"},st={key:1,class:"text-sm font-medium text-gray-900"},at={class:"px-6 py-4 whitespace-nowrap"},lt={class:"flex items-center"},it={class:"ml-4"},ot={class:"text-sm font-medium text-gray-900"},rt={class:"text-sm text-gray-500"},nt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},dt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ct={class:"px-6 py-4 whitespace-nowrap"},pt={class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"},xt={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900"},ut={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},ft={class:"bg-white rounded-xl shadow-lg p-6"},mt={key:0,class:"text-center py-8 text-gray-500"},gt={key:1,class:"overflow-x-auto"},yt={class:"min-w-full divide-y divide-gray-200"},ht={class:"bg-white divide-y divide-gray-200"},_t={class:"px-6 py-4 whitespace-nowrap"},bt={class:"flex items-center"},wt={key:1,class:"text-sm font-medium text-gray-900"},vt={class:"px-6 py-4 whitespace-nowrap"},kt={class:"flex items-center"},Dt={class:"ml-4"},Tt={class:"text-sm font-medium text-gray-900"},Ft={class:"text-sm text-gray-500"},Mt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Rt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Nt={class:"px-6 py-4 whitespace-nowrap"},It={class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"},jt={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900"},St={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},Ut={__name:"MemberReports",props:{reportData:{type:Object,default:()=>({summary:{},top_by_value:[],top_by_frequency:[]})},filters:{type:Object,default:()=>({})}},setup(d){const x=d,c=I({date_from:x.filters.date_from||m(),date_to:x.filters.date_to||g()});function m(){const i=new Date;return i.setMonth(i.getMonth()-1),i.toISOString().split("T")[0]}function g(){return new Date().toISOString().split("T")[0]}function p(i,e=0){return i==null?"0":new Intl.NumberFormat("id-ID").format(Number(i).toFixed(e))}function f(i){return i==null?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(i)}function y(i){switch(i){case 1:return"text-yellow-600";case 2:return"text-gray-500";case 3:return"text-orange-600";default:return"text-gray-900"}}function u(){C.visit("/crm/member-reports",{data:c.value,preserveState:!0,replace:!0})}function N(){c.value={date_from:m(),date_to:g()},u()}return j(()=>{!x.filters.date_from&&!x.filters.date_to&&u()}),(i,e)=>(o(),S(B,{title:"Member Reports"},{header:k(()=>e[2]||(e[2]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},[t("i",{class:"fa-solid fa-chart-line text-blue-600 mr-2"}),a(" Member Reports ")],-1)])),default:k(()=>{var h,_,b,w,v;return[t("div",q,[t("div",O,[t("div",V,[e[6]||(e[6]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[t("i",{class:"fa-solid fa-filter text-gray-500"}),a(" Filter Data ")],-1)),t("div",A,[t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[t("i",{class:"fa-solid fa-calendar text-gray-500 mr-1"}),a(" Tanggal Dari ")],-1)),D(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>c.value.date_from=s),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:u},null,544),[[T,c.value.date_from]])]),t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[t("i",{class:"fa-solid fa-calendar text-gray-500 mr-1"}),a(" Tanggal Sampai ")],-1)),D(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>c.value.date_to=s),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:u},null,544),[[T,c.value.date_to]])]),t("div",{class:"flex items-end"},[t("button",{onClick:N,class:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},e[5]||(e[5]=[t("i",{class:"fa-solid fa-rotate-left mr-2"},null,-1),a(" Reset Filter ")]))])])]),t("div",E,[t("div",J,[t("div",L,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Member",-1)),t("p",H,l(p(((h=d.reportData.summary)==null?void 0:h.total_members)||0)),1)]),e[8]||(e[8]=t("div",{class:"bg-blue-100 p-3 rounded-lg"},[t("i",{class:"fa-solid fa-users text-blue-600 text-xl"})],-1))])]),t("div",U,[t("div",W,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Transaksi",-1)),t("p",z,l(p(((_=d.reportData.summary)==null?void 0:_.total_transactions)||0)),1)]),e[10]||(e[10]=t("div",{class:"bg-green-100 p-3 rounded-lg"},[t("i",{class:"fa-solid fa-receipt text-green-600 text-xl"})],-1))])]),t("div",G,[t("div",P,[t("div",null,[e[11]||(e[11]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Nilai Transaksi",-1)),t("p",K,l(((b=d.reportData.summary)==null?void 0:b.total_value_formatted)||"Rp 0"),1)]),e[12]||(e[12]=t("div",{class:"bg-purple-100 p-3 rounded-lg"},[t("i",{class:"fa-solid fa-money-bill-wave text-purple-600 text-xl"})],-1))])])]),t("div",Q,[e[16]||(e[16]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[t("i",{class:"fa-solid fa-trophy text-yellow-500"}),a(" Top 20 Member dengan Nilai Transaksi Terbesar ")],-1)),((w=d.reportData.top_by_value)==null?void 0:w.length)===0?(o(),r("div",X,e[13]||(e[13]=[t("i",{class:"fa-solid fa-chart-bar text-4xl mb-4"},null,-1),t("p",null,"Tidak ada data untuk periode ini",-1)]))):(o(),r("div",Y,[t("table",Z,[e[15]||(e[15]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("i",{class:"fa-solid fa-hashtag mr-1"}),a(" Rank ")]),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("i",{class:"fa-solid fa-user mr-1"}),a(" Member ")]),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("i",{class:"fa-solid fa-phone mr-1"}),a(" Telepon ")]),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("i",{class:"fa-solid fa-envelope mr-1"}),a(" Email ")]),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("i",{class:"fa-solid fa-receipt mr-1"}),a(" Jumlah Transaksi ")]),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("i",{class:"fa-solid fa-money-bill-wave mr-1"}),a(" Total Nilai ")]),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("i",{class:"fa-solid fa-chart-line mr-1"}),a(" Rata-rata/Transaksi ")])])],-1)),t("tbody",$,[(o(!0),r(F,null,M(d.reportData.top_by_value,(s,n)=>(o(),r("tr",{key:s.customer_id,class:"hover:bg-gray-50"},[t("td",tt,[t("div",et,[n<3?(o(),r("span",{key:0,class:R(["text-lg font-bold",y(n+1)])},l(n+1),3)):(o(),r("span",st,l(n+1),1))])]),t("td",at,[t("div",lt,[e[14]||(e[14]=t("div",{class:"flex-shrink-0 h-10 w-10"},[t("div",{class:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center"},[t("i",{class:"fa-solid fa-user text-blue-600"})])],-1)),t("div",it,[t("div",ot,l(s.customer_name),1),t("div",rt,"ID: "+l(s.customer_id),1)])])]),t("td",nt,l(s.phone||"-"),1),t("td",dt,l(s.email||"-"),1),t("td",ct,[t("span",pt,l(p(s.transaction_count)),1)]),t("td",xt,l(f(s.total_value)),1),t("td",ut,l(f(s.average_value)),1)]))),128))])])]))]),t("div",ft,[e[20]||(e[20]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[t("i",{class:"fa-solid fa-shopping-cart text-green-500"}),a(" Top 20 Member Paling Sering Berbelanja ")],-1)),((v=d.reportData.top_by_frequency)==null?void 0:v.length)===0?(o(),r("div",mt,e[17]||(e[17]=[t("i",{class:"fa-solid fa-shopping-bag text-4xl mb-4"},null,-1),t("p",null,"Tidak ada data untuk periode ini",-1)]))):(o(),r("div",gt,[t("table",yt,[e[19]||(e[19]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("i",{class:"fa-solid fa-hashtag mr-1"}),a(" Rank ")]),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("i",{class:"fa-solid fa-user mr-1"}),a(" Member ")]),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("i",{class:"fa-solid fa-phone mr-1"}),a(" Telepon ")]),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("i",{class:"fa-solid fa-envelope mr-1"}),a(" Email ")]),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("i",{class:"fa-solid fa-receipt mr-1"}),a(" Jumlah Transaksi ")]),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("i",{class:"fa-solid fa-money-bill-wave mr-1"}),a(" Total Nilai ")]),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[t("i",{class:"fa-solid fa-calendar mr-1"}),a(" Frekuensi/Hari ")])])],-1)),t("tbody",ht,[(o(!0),r(F,null,M(d.reportData.top_by_frequency,(s,n)=>(o(),r("tr",{key:s.customer_id,class:"hover:bg-gray-50"},[t("td",_t,[t("div",bt,[n<3?(o(),r("span",{key:0,class:R(["text-lg font-bold",y(n+1)])},l(n+1),3)):(o(),r("span",wt,l(n+1),1))])]),t("td",vt,[t("div",kt,[e[18]||(e[18]=t("div",{class:"flex-shrink-0 h-10 w-10"},[t("div",{class:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center"},[t("i",{class:"fa-solid fa-user text-green-600"})])],-1)),t("div",Dt,[t("div",Tt,l(s.customer_name),1),t("div",Ft,"ID: "+l(s.customer_id),1)])])]),t("td",Mt,l(s.phone||"-"),1),t("td",Rt,l(s.email||"-"),1),t("td",Nt,[t("span",It,l(p(s.transaction_count)),1)]),t("td",jt,l(f(s.total_value)),1),t("td",St,l(p(s.frequency_per_day,2)),1)]))),128))])])]))])])])]}),_:1}))}};export{Ut as default};
