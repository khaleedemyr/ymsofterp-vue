import{r as c,A as S,B as i,C as O,D as e,L as n,E as f,G as d,Q as I,S as P,O as U,H as _,J as k,F as v,M as N,N as r,l as W,W as p}from"./vendor-vue-g7iCcTkf.js";import{A as H}from"./AppLayout-D_GBiqpN.js";import{S as w}from"./app-D3yJLFoH.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DW6hwgWG.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const Y={class:"max-w-7xl mx-auto py-8 px-2"},z={class:"flex justify-between items-center mb-6"},J={class:"flex gap-2"},Q={class:"bg-white rounded-xl shadow-lg overflow-hidden"},q={class:"overflow-x-auto"},K={class:"min-w-full divide-y divide-gray-200"},X={class:"bg-white divide-y divide-gray-200"},Z={key:0},ee={class:"px-6 py-3"},te={class:"px-6 py-3"},se={class:"px-6 py-3"},oe={class:"px-6 py-3"},le={class:"px-6 py-3"},ie={class:"px-6 py-3"},ae={class:"flex flex-col"},ne={class:"font-medium text-gray-900"},re={class:"text-xs text-gray-500"},de={class:"px-6 py-3"},ue={class:"px-6 py-3"},pe=["onClick"],ce=["onClick"],fe=["onClick","disabled"],xe={key:0},ge={key:1},be={key:0,class:"flex justify-center mt-6"},me={class:"inline-flex rounded-md shadow-sm items-center gap-1"},ve=["disabled"],ye={class:"flex items-center gap-1"},he=["onClick"],_e={key:1,class:"px-2 text-gray-400"},ke=["disabled"],$e={__name:"Index",props:{goodReceives:Object,user_id_outlet:Number,filters:Object,outlets:Array,canDelete:Boolean},setup(G){var D,R,B,T;const o=G,x=c(null),C=c(((D=o.filters)==null?void 0:D.outlet_id)||""),g=c(((R=o.filters)==null?void 0:R.search)||""),b=c(((B=o.filters)==null?void 0:B.from)||""),m=c(((T=o.filters)==null?void 0:T.to)||"");function $(){p.visit(route("outlet-food-good-receives.index",{outlet_id:C.value||void 0,search:g.value||void 0,from:b.value||void 0,to:m.value||void 0}))}function y(l){p.visit(route("outlet-food-good-receives.index",{outlet_id:C.value||void 0,search:g.value||void 0,from:b.value||void 0,to:m.value||void 0,page:l}))}function M(){if(!o.goodReceives||!o.goodReceives.last_page)return[];const l=o.goodReceives.current_page,t=o.goodReceives.last_page,s=[];if(t<=7)for(let a=1;a<=t;a++)s.push(a);else{s.push(1),l>3&&s.push("...");const a=Math.max(2,l-1),u=Math.min(t-1,l+1);for(let h=a;h<=u;h++)s.push(h);l<t-2&&s.push("..."),s.push(t)}return s}function V(){p.visit(route("outlet-food-good-receives.create"))}function A(l){p.visit(route("outlet-food-good-receives.show",l))}function E(l){p.visit(route("outlet-food-good-receives.edit",l))}function L(l){w.fire({title:"Yakin hapus data ini?",text:"Data akan dihapus permanen!",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, hapus",cancelButtonText:"Batal",reverseButtons:!0}).then(async t=>{var s,a;if(t.isConfirmed){x.value=l;try{const u=await axios.delete(`/outlet-food-good-receives/${l}`);if(u.data&&u.data.success)w.fire({icon:"success",title:"Berhasil",text:"Data berhasil dihapus!",timer:1500,showConfirmButton:!1}),setTimeout(()=>p.reload(),1200);else throw new Error("Gagal menghapus data")}catch(u){w.fire({icon:"error",title:"Gagal",text:((a=(s=u.response)==null?void 0:s.data)==null?void 0:a.message)||u.message||"Gagal menghapus data"})}finally{x.value=null}}})}function j(l){return l?new Date(l).toLocaleDateString("id-ID"):"-"}function F(l){return l?new Date(l).toLocaleString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}return(l,t)=>(i(),S(H,null,{default:O(()=>[e("div",Y,[e("div",z,[t[6]||(t[6]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-truck text-blue-500"}),d(" Good Receive Outlet ")],-1)),e("div",J,[o.user_id_outlet===1?(i(),S(I(P),{key:0,href:"/delivery-orders-not-received",class:"bg-gradient-to-r from-purple-500 to-purple-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold inline-flex items-center gap-2"},{default:O(()=>t[5]||(t[5]=[e("i",{class:"fa-solid fa-chart-bar"},null,-1),d(" Report DO Belum GR ")])),_:1})):f("",!0),e("button",{onClick:V,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"}," + Tambah Baru ")])]),e("form",{onSubmit:U($,["prevent"]),class:"flex flex-wrap gap-2 mb-4 items-end"},[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-xs font-bold mb-1"},"Cari",-1)),_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>g.value=s),type:"text",class:"form-input rounded border px-2 py-1",placeholder:"Cari nomor GR, DO, outlet..."},null,512),[[k,g.value]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-xs font-bold mb-1"},"Tanggal Dari",-1)),_(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>b.value=s),type:"date",class:"form-input rounded border px-2 py-1"},null,512),[[k,b.value]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-xs font-bold mb-1"},"Tanggal Sampai",-1)),_(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>m.value=s),type:"date",class:"form-input rounded border px-2 py-1"},null,512),[[k,m.value]])]),t[10]||(t[10]=e("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded font-bold"},"Terapkan",-1))],32),e("div",Q,[e("div",q,[e("table",K,[t[16]||(t[16]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Tanggal"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Nomor GR"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Outlet"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Warehouse Outlet"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Nomor DO"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Creator"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",X,[o.goodReceives.data.length?f("",!0):(i(),n("tr",Z,t[11]||(t[11]=[e("td",{colspan:"8",class:"text-center py-10 text-blue-300"},"Tidak ada data.",-1)]))),(i(!0),n(v,null,N(o.goodReceives.data,s=>(i(),n("tr",{key:s.id},[e("td",ee,r(j(s.receive_date)),1),e("td",te,r(s.number),1),e("td",se,r(s.outlet_name),1),e("td",oe,r(s.warehouse_outlet_name||"-"),1),e("td",le,r(s.delivery_order_number),1),e("td",ie,[e("div",ae,[e("span",ne,r(s.creator_name||"-"),1),e("span",re,r(F(s.created_at)),1)])]),e("td",de,r(s.status),1),e("td",ue,[e("button",{class:"inline-flex items-center btn btn-xs bg-blue-100 text-blue-800 hover:bg-blue-200 rounded px-2 py-1 font-semibold transition",onClick:a=>A(s.id)},t[12]||(t[12]=[e("i",{class:"fa fa-eye mr-1"},null,-1),d(" Detail ")]),8,pe),o.canDelete?(i(),n(v,{key:0},[s.outlet_payment_id?f("",!0):(i(),n("button",{key:0,class:"inline-flex items-center btn btn-xs bg-yellow-100 text-yellow-800 hover:bg-yellow-200 rounded px-2 py-1 font-semibold transition ml-2",onClick:a=>E(s.id)},t[13]||(t[13]=[e("i",{class:"fa fa-edit mr-1"},null,-1),d(" Edit ")]),8,ce)),e("button",{class:"inline-flex items-center btn btn-xs bg-red-100 text-red-700 hover:bg-red-200 rounded px-2 py-1 font-semibold transition ml-2",onClick:a=>L(s.id),disabled:x.value===s.id},[x.value===s.id?(i(),n("span",xe,t[14]||(t[14]=[e("i",{class:"fa fa-spinner fa-spin mr-1"},null,-1),d(" Menghapus...")]))):(i(),n("span",ge,t[15]||(t[15]=[e("i",{class:"fa fa-trash mr-1"},null,-1),d(" Hapus")])))],8,fe)],64)):f("",!0)])]))),128))])])])]),o.goodReceives&&o.goodReceives.data&&o.goodReceives.last_page>1?(i(),n("div",be,[e("nav",me,[e("button",{disabled:o.goodReceives.current_page===1,onClick:t[3]||(t[3]=s=>y(o.goodReceives.current_page-1)),class:"px-3 py-1 border bg-white text-blue-700 hover:bg-blue-100 rounded-l disabled:opacity-50 disabled:cursor-not-allowed"},t[17]||(t[17]=[e("i",{class:"fas fa-chevron-left"},null,-1),d(" Previous ")]),8,ve),e("div",ye,[(i(!0),n(v,null,N(M(),s=>(i(),n(v,{key:s},[s!=="..."?(i(),n("button",{key:0,onClick:a=>y(s),class:W(["px-3 py-1 border font-medium transition",s===o.goodReceives.current_page?"bg-blue-600 text-white":"bg-white text-blue-700 hover:bg-blue-100"])},r(s),11,he)):(i(),n("span",_e,"..."))],64))),128))]),e("button",{disabled:o.goodReceives.current_page===o.goodReceives.last_page,onClick:t[4]||(t[4]=s=>y(o.goodReceives.current_page+1)),class:"px-3 py-1 border bg-white text-blue-700 hover:bg-blue-100 rounded-r disabled:opacity-50 disabled:cursor-not-allowed"},t[18]||(t[18]=[d(" Next "),e("i",{class:"fas fa-chevron-right"},null,-1)]),8,ke)])])):f("",!0)])]),_:1}))}};export{$e as default};
