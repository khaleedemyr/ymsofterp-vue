import{A as z}from"./AppLayout-zB0hvXOw.js";import{r as h,c as T,A as V,B as n,C as F,D as t,L as i,E as u,G as x,N as o,l as N,F as y,M as v}from"./vendor-vue-g7iCcTkf.js";import"./app-BgZdqVzD.js";import"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-C4ea0y0B.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const K={class:"w-full min-h-screen py-8 px-2 md:px-6"},M={class:"flex justify-between items-center mb-8"},U={class:"flex gap-2"},G=["href"],H=["href"],P={class:"bg-white rounded-xl shadow-lg p-6 mb-6"},q={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},J={class:"space-y-3"},Q={class:"text-lg font-semibold text-gray-800"},R={class:"text-lg font-semibold text-gray-800"},W={class:"text-lg font-semibold text-gray-800"},X={class:"space-y-3"},Y={class:"text-lg font-semibold text-gray-800"},Z={class:"text-sm text-gray-600"},tt={class:"text-lg font-semibold text-gray-800"},et={key:0,class:"mt-6"},st={class:"mt-2 p-4 bg-gray-50 rounded-lg"},ot={class:"text-gray-800 whitespace-pre-wrap"},nt={key:0,class:"space-y-6"},it={class:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2"},lt={class:"space-y-4"},at={class:"flex items-start gap-3 mb-3"},ct={class:"flex-shrink-0 mt-1"},rt={class:"flex-1"},dt={class:"font-medium text-gray-800"},ut={key:0,class:"text-sm text-gray-600 mt-1"},mt={key:0,class:"mb-3"},gt={class:"mt-1 p-3 bg-gray-50 rounded-lg"},pt={class:"text-gray-800 whitespace-pre-wrap"},xt={key:1,class:"mb-3"},bt={class:"text-sm font-medium text-gray-500"},ft={class:"mt-2 flex gap-2 flex-wrap"},ht=["src","alt","onClick","onError","onLoad"],yt={key:1,class:"bg-white rounded-xl shadow-lg p-6 text-center"},vt={class:"relative max-w-4xl max-h-full p-4"},_t=["src","alt"],wt={key:0,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2"},kt={class:"bg-white bg-opacity-20 text-white px-3 py-1 rounded"},Ot={__name:"Show",props:{inspection:Object},setup(l){const $=l,b=h(!1),d=h([]),c=h(0),_=T(()=>{const a={};return $.inspection.details.forEach(e=>{var s,g;const r=e.inspection_subject_id,m=((s=e.subject)==null?void 0:s.name)||e.subject_name||"Unknown Subject";console.log("Detail data:",{id:e.id,documentation_paths:e.documentation_paths,type:typeof e.documentation_paths,isArray:Array.isArray(e.documentation_paths),length:(g=e.documentation_paths)==null?void 0:g.length}),a[r]||(a[r]={subject_id:r,subject_name:m,items:[]}),a[r].items.push(e)}),Object.values(a)}),A=a=>new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}),B=(a,e)=>{d.value=a,c.value=e,b.value=!0},w=()=>{b.value=!1,d.value=[],c.value=0},E=()=>{c.value>0&&c.value--},O=()=>{c.value<d.value.length-1&&c.value++};return(a,e)=>(n(),V(z,null,{default:F(()=>{var r;return[t("div",K,[t("div",M,[e[2]||(e[2]=t("h1",{class:"text-3xl font-bold text-blue-800 flex items-center gap-3"},[t("i",{class:"fa-solid fa-clipboard-check text-blue-500"}),x(" Outlet/HO Inspection Detail ")],-1)),t("div",U,[t("a",{href:a.route("dynamic-inspections.edit",l.inspection.id),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition flex items-center gap-2"},e[0]||(e[0]=[t("i",{class:"fa-solid fa-edit"},null,-1),x(" Edit ")]),8,G),t("a",{href:a.route("dynamic-inspections.index"),class:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition flex items-center gap-2"},e[1]||(e[1]=[t("i",{class:"fa-solid fa-arrow-left"},null,-1),x(" Kembali ")]),8,H)])]),t("div",P,[e[10]||(e[10]=t("h2",{class:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2"},[t("i",{class:"fa-solid fa-info-circle text-blue-600"}),x(" Inspection Information ")],-1)),t("div",q,[t("div",null,[t("div",J,[t("div",null,[e[3]||(e[3]=t("label",{class:"text-sm font-medium text-gray-500"},"Inspection Number",-1)),t("p",Q,o(l.inspection.inspection_number),1)]),t("div",null,[e[4]||(e[4]=t("label",{class:"text-sm font-medium text-gray-500"},"Outlet",-1)),t("p",R,o(((r=l.inspection.outlet)==null?void 0:r.nama_outlet)||"N/A"),1)]),t("div",null,[e[5]||(e[5]=t("label",{class:"text-sm font-medium text-gray-500"},"Tanggal Inspection",-1)),t("p",W,o(A(l.inspection.inspection_date)),1)])])]),t("div",null,[t("div",X,[t("div",null,[e[6]||(e[6]=t("label",{class:"text-sm font-medium text-gray-500"},"PIC",-1)),t("p",Y,o(l.inspection.pic_name),1),t("p",Z,o(l.inspection.pic_position)+" - "+o(l.inspection.pic_division),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"text-sm font-medium text-gray-500"},"Outlet Leader",-1)),t("p",tt,o(l.inspection.outlet_leader||"N/A"),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"text-sm font-medium text-gray-500"},"Status",-1)),t("span",{class:N(["px-3 py-1 text-sm font-medium rounded-full",l.inspection.status==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},o(l.inspection.status==="completed"?"Completed":"Draft"),3)])])])]),l.inspection.general_notes?(n(),i("div",et,[e[9]||(e[9]=t("label",{class:"text-sm font-medium text-gray-500"},"Catatan/Komentar",-1)),t("div",st,[t("p",ot,o(l.inspection.general_notes),1)])])):u("",!0)]),_.value.length>0?(n(),i("div",nt,[(n(!0),i(y,null,v(_.value,m=>(n(),i("div",{key:m.subject_id,class:"bg-white rounded-xl shadow-lg p-6"},[t("h3",it,[e[11]||(e[11]=t("i",{class:"fa-solid fa-list-check text-blue-600"},null,-1)),x(" "+o(m.subject_name),1)]),t("div",lt,[(n(!0),i(y,null,v(m.items,s=>{var g,k,j,I,D,C;return n(),i("div",{key:s.id,class:"border border-gray-200 rounded-lg p-4"},[t("div",at,[t("div",ct,[t("i",{class:N(["fa-solid text-lg",s.is_checked?"fa-check-circle text-green-600":"fa-times-circle text-red-600"])},null,2)]),t("div",rt,[t("div",dt,o(((g=s.subjectItem)==null?void 0:g.name)||((k=s.subject_item)==null?void 0:k.name)||"Unknown Item"),1),(j=s.subjectItem)!=null&&j.description||(I=s.subject_item)!=null&&I.description?(n(),i("div",ut,o(((D=s.subjectItem)==null?void 0:D.description)||((C=s.subject_item)==null?void 0:C.description)),1)):u("",!0)])]),s.notes?(n(),i("div",mt,[e[12]||(e[12]=t("label",{class:"text-sm font-medium text-gray-500"},"Notes",-1)),t("div",gt,[t("p",pt,o(s.notes),1)])])):u("",!0),s.documentation_paths&&s.documentation_paths.length>0?(n(),i("div",xt,[t("label",bt,"Dokumentasi ("+o(s.documentation_paths.length)+" files)",1),t("div",ft,[(n(!0),i(y,null,v(s.documentation_paths,(p,f)=>(n(),i("img",{key:f,src:`/storage/${p}`,alt:`Documentation ${f+1}`,class:"w-20 h-20 object-cover rounded-lg border border-gray-200 cursor-pointer hover:shadow-lg transition",onClick:L=>B(s.documentation_paths.map(S=>`/storage/${S}`),f),onError:L=>console.error("Image failed to load:",`/storage/${p}`,"Doc value:",p),onLoad:L=>console.log("Image loaded successfully:",`/storage/${p}`,"Doc value:",p)},null,40,ht))),128))])])):u("",!0)])}),128))])]))),128))])):(n(),i("div",yt,e[13]||(e[13]=[t("i",{class:"fa-solid fa-clipboard-list text-gray-400 text-4xl mb-4"},null,-1),t("h3",{class:"text-lg font-medium text-gray-600 mb-2"},"Tidak ada detail inspection",-1),t("p",{class:"text-gray-500"},"Belum ada item yang di-inspect untuk inspection ini.",-1)]))),b.value?(n(),i("div",{key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",onClick:w},[t("div",vt,[t("button",{onClick:w,class:"absolute top-4 right-4 text-white text-2xl hover:text-gray-300 z-10"},e[14]||(e[14]=[t("i",{class:"fa-solid fa-times"},null,-1)])),t("img",{src:d.value[c.value],alt:`Image ${c.value+1}`,class:"max-w-full max-h-full object-contain"},null,8,_t),d.value.length>1?(n(),i("div",wt,[t("button",{onClick:E,class:"bg-white bg-opacity-20 text-white px-3 py-1 rounded hover:bg-opacity-30"},e[15]||(e[15]=[t("i",{class:"fa-solid fa-chevron-left"},null,-1)])),t("span",kt,o(c.value+1)+" / "+o(d.value.length),1),t("button",{onClick:O,class:"bg-white bg-opacity-20 text-white px-3 py-1 rounded hover:bg-opacity-30"},e[16]||(e[16]=[t("i",{class:"fa-solid fa-chevron-right"},null,-1)]))])):u("",!0)])])):u("",!0)])]}),_:1}))}};export{Ot as default};
