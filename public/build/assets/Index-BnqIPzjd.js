import{r as U,c as H,A as k,B as l,C as c,D as e,L as u,E as p,G as o,x as O,Q as x,S as g,H as w,J as C,I as A,F as R,M as V,N as n,l as M,W as P}from"./vendor-vue-g7iCcTkf.js";import{A as J}from"./AppLayout-BfEUsI4L.js";import{a as W}from"./vendor-utils-CpgP2uT4.js";import{S as D}from"./app-DIuSMidk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CG_QM0dl.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const q={class:"w-full py-8 px-4"},G={class:"flex justify-between items-center mb-6"},X={class:"flex gap-3"},z={class:"bg-white rounded-xl shadow-lg p-6 mb-6"},Q={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},Y=["disabled"],$=["value"],K={class:"bg-white rounded-xl shadow-lg overflow-hidden"},Z={class:"overflow-x-auto"},ee={class:"min-w-full divide-y divide-gray-200"},te={class:"bg-white divide-y divide-gray-200"},se={key:0},oe={class:"px-6 py-4 whitespace-nowrap"},ae={class:"text-sm font-semibold text-gray-900"},re={class:"px-6 py-4 whitespace-nowrap"},le={class:"text-sm text-gray-700"},ie={class:"px-6 py-4 whitespace-nowrap"},ne={class:"text-sm text-gray-700"},de={class:"px-6 py-4 whitespace-nowrap"},ue={class:"text-sm text-gray-700"},fe={class:"px-6 py-4 whitespace-nowrap"},ce={class:"px-6 py-4 whitespace-nowrap"},pe={class:"text-sm text-gray-700"},xe={class:"px-6 py-4 whitespace-nowrap"},ge={class:"flex items-center justify-center gap-2 flex-wrap"},me=["href"],be=["onClick"],ye={key:0,class:"mt-6 flex flex-col sm:flex-row justify-between items-center gap-4"},he={class:"text-sm text-gray-600 bg-gray-50 px-4 py-2 rounded-lg"},we={class:"font-semibold text-gray-900"},ve={class:"font-semibold text-gray-900"},ke={class:"font-semibold text-gray-900"},De={class:"flex gap-2"},Me={__name:"Index",props:{stockOpnames:Object,outlets:Array,filters:Object,user_outlet_id:[String,Number],canDelete:Boolean},setup(r){var E,S,_,T,B;const f=r,i=U({search:((E=f.filters)==null?void 0:E.search)||"",status:((S=f.filters)==null?void 0:S.status)||"all",outlet_id:((_=f.filters)==null?void 0:_.outlet_id)||"",date_from:((T=f.filters)==null?void 0:T.date_from)||"",date_to:((B=f.filters)==null?void 0:B.date_to)||""}),L=H(()=>String(f.user_outlet_id)==="1");function m(){P.get(route("stock-opnames.index"),i.value,{preserveState:!0,preserveScroll:!0})}function j(a){return a?new Date(a).toLocaleDateString("id-ID"):"-"}function F(a){return{DRAFT:"bg-gray-100 text-gray-700 border border-gray-300",SUBMITTED:"bg-yellow-100 text-yellow-700 border border-yellow-300",APPROVED:"bg-green-100 text-green-700 border border-green-300",REJECTED:"bg-red-100 text-red-700 border border-red-300",COMPLETED:"bg-blue-100 text-blue-700 border border-blue-300"}[a]||"bg-gray-100 text-gray-700 border border-gray-300"}function I(a){return{DRAFT:"fa-solid fa-file",SUBMITTED:"fa-solid fa-paper-plane",APPROVED:"fa-solid fa-check-circle",REJECTED:"fa-solid fa-times-circle",COMPLETED:"fa-solid fa-check-double"}[a]||"fa-solid fa-info-circle"}async function N(a){const t=await D.fire({title:"Hapus Stock Opname?",text:"Apakah Anda yakin ingin menghapus stock opname ini? Tindakan ini tidak dapat dibatalkan.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal",reverseButtons:!0,showLoaderOnConfirm:!0,preConfirm:async()=>{var s,b,y,h;try{return await W.delete(route("stock-opnames.destroy",a),{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})}catch(d){let v="Gagal menghapus stock opname";return(b=(s=d.response)==null?void 0:s.data)!=null&&b.message?v=d.response.data.message:(h=(y=d.response)==null?void 0:y.data)!=null&&h.error?v=d.response.data.error:d.message&&(v=d.message),D.showValidationMessage(v),!1}},allowOutsideClick:()=>!D.isLoading()});t.isConfirmed&&t.value?(await D.fire({title:"Berhasil!",text:"Stock opname berhasil dihapus.",icon:"success",confirmButtonColor:"#3085d6",timer:2e3,timerProgressBar:!0}),P.reload()):t.isDismissed}return(a,t)=>(l(),k(J,null,{default:c(()=>[e("div",q,[e("div",G,[t[7]||(t[7]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-clipboard-check text-blue-500"}),o(" Stock Opname ")],-1)),e("div",X,[O(x(g),{href:a.route("outlet-stock-opname-report.index"),class:"bg-gradient-to-r from-green-500 to-green-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"},{default:c(()=>t[5]||(t[5]=[e("i",{class:"fa-solid fa-file-lines mr-2"},null,-1),o(" Report ")])),_:1},8,["href"]),O(x(g),{href:a.route("stock-opnames.create"),class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"},{default:c(()=>t[6]||(t[6]=[e("i",{class:"fa-solid fa-plus mr-2"},null,-1),o(" Buat Stock Opname Baru ")])),_:1},8,["href"])])]),e("div",z,[e("div",Q,[w(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>i.value.search=s),onInput:m,placeholder:"Cari opname number, notes...",class:"px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[C,i.value.search]]),w(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>i.value.status=s),onChange:m,class:"px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},t[8]||(t[8]=[e("option",{value:"all"},"Semua Status",-1),e("option",{value:"DRAFT"},"Draft",-1),e("option",{value:"SUBMITTED"},"Submitted",-1),e("option",{value:"APPROVED"},"Approved",-1),e("option",{value:"REJECTED"},"Rejected",-1),e("option",{value:"COMPLETED"},"Completed",-1)]),544),[[A,i.value.status]]),w(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>i.value.outlet_id=s),onChange:m,class:"px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!L.value},[t[9]||(t[9]=e("option",{value:""},"Semua Outlet",-1)),(l(!0),u(R,null,V(r.outlets,s=>(l(),u("option",{key:s.id,value:s.id},n(s.name),9,$))),128))],40,Y),[[A,i.value.outlet_id]]),w(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=s=>i.value.date_from=s),onChange:m,class:"px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[C,i.value.date_from]]),w(e("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=s=>i.value.date_to=s),onChange:m,class:"px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[C,i.value.date_to]])])]),e("div",K,[e("div",Z,[e("table",ee,[t[19]||(t[19]=e("thead",{class:"bg-gradient-to-r from-blue-50 to-indigo-50"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},[e("i",{class:"fa-solid fa-hashtag mr-2 text-blue-500"}),o("Opname Number ")]),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},[e("i",{class:"fa-solid fa-store mr-2 text-blue-500"}),o("Outlet ")]),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},[e("i",{class:"fa-solid fa-warehouse mr-2 text-blue-500"}),o("Warehouse Outlet ")]),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},[e("i",{class:"fa-solid fa-calendar mr-2 text-blue-500"}),o("Tanggal ")]),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},[e("i",{class:"fa-solid fa-info-circle mr-2 text-blue-500"}),o("Status ")]),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},[e("i",{class:"fa-solid fa-user mr-2 text-blue-500"}),o("Created By ")]),e("th",{class:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider"},[e("i",{class:"fa-solid fa-cog mr-2 text-blue-500"}),o("Actions ")])])],-1)),e("tbody",te,[r.stockOpnames.data.length===0?(l(),u("tr",se,t[10]||(t[10]=[e("td",{colspan:"7",class:"text-center py-16"},[e("div",{class:"flex flex-col items-center justify-center"},[e("i",{class:"fa-solid fa-inbox text-6xl text-gray-300 mb-4"}),e("p",{class:"text-gray-500 text-lg font-medium"},"Tidak ada data stock opname"),e("p",{class:"text-gray-400 text-sm mt-2"},"Mulai dengan membuat stock opname baru")])],-1)]))):p("",!0),(l(!0),u(R,null,V(r.stockOpnames.data,s=>{var b,y,h;return l(),u("tr",{key:s.id,class:"hover:bg-blue-50 transition-colors duration-150"},[e("td",oe,[e("div",ae,n(s.opname_number),1)]),e("td",re,[e("div",le,[t[11]||(t[11]=e("i",{class:"fa-solid fa-store mr-2 text-gray-400"},null,-1)),o(" "+n(((b=s.outlet)==null?void 0:b.nama_outlet)||"-"),1)])]),e("td",ie,[e("div",ne,[t[12]||(t[12]=e("i",{class:"fa-solid fa-warehouse mr-2 text-gray-400"},null,-1)),o(" "+n(((y=s.warehouse_outlet)==null?void 0:y.name)||"-"),1)])]),e("td",de,[e("div",ue,[t[13]||(t[13]=e("i",{class:"fa-solid fa-calendar mr-2 text-gray-400"},null,-1)),o(" "+n(j(s.opname_date)),1)])]),e("td",fe,[e("span",{class:M([F(s.status),"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold"])},[e("i",{class:M([I(s.status),"mr-1.5"])},null,2),o(" "+n(s.status),1)],2)]),e("td",ce,[e("div",pe,[t[14]||(t[14]=e("i",{class:"fa-solid fa-user mr-2 text-gray-400"},null,-1)),o(" "+n(((h=s.creator)==null?void 0:h.nama_lengkap)||"-"),1)])]),e("td",xe,[e("div",ge,[O(x(g),{href:a.route("stock-opnames.show",s.id),class:"inline-flex items-center px-3 py-1.5 bg-blue-500 text-white text-xs font-semibold rounded-lg hover:bg-blue-600 transition-colors shadow-sm",title:"View Details"},{default:c(()=>t[15]||(t[15]=[e("i",{class:"fa-solid fa-eye mr-1.5"},null,-1),o(" View ")])),_:2},1032,["href"]),s.status==="APPROVED"?(l(),u("a",{key:0,href:a.route("stock-opnames.export-excel",s.id),class:"inline-flex items-center px-3 py-1.5 bg-emerald-600 text-white text-xs font-semibold rounded-lg hover:bg-emerald-700 transition-colors shadow-sm",title:"Download Excel"},t[16]||(t[16]=[e("i",{class:"fa-solid fa-file-excel mr-1.5"},null,-1),o(" Excel ")]),8,me)):p("",!0),s.status==="DRAFT"?(l(),k(x(g),{key:1,href:a.route("stock-opnames.edit",s.id),class:"inline-flex items-center px-3 py-1.5 bg-green-500 text-white text-xs font-semibold rounded-lg hover:bg-green-600 transition-colors shadow-sm",title:"Edit"},{default:c(()=>t[17]||(t[17]=[e("i",{class:"fa-solid fa-edit mr-1.5"},null,-1),o(" Edit ")])),_:2},1032,["href"])):p("",!0),s.status==="DRAFT"&&f.canDelete?(l(),u("button",{key:2,onClick:d=>N(s.id),class:"inline-flex items-center px-3 py-1.5 bg-red-500 text-white text-xs font-semibold rounded-lg hover:bg-red-600 transition-colors shadow-sm",title:"Delete"},t[18]||(t[18]=[e("i",{class:"fa-solid fa-trash mr-1.5"},null,-1),o(" Delete ")]),8,be)):p("",!0)])])])}),128))])])])]),r.stockOpnames.data.length>0?(l(),u("div",ye,[e("div",he,[t[20]||(t[20]=e("i",{class:"fa-solid fa-info-circle mr-2 text-blue-500"},null,-1)),t[21]||(t[21]=o(" Menampilkan ")),e("span",we,n(r.stockOpnames.from),1),t[22]||(t[22]=o(" - ")),e("span",ve,n(r.stockOpnames.to),1),t[23]||(t[23]=o(" dari ")),e("span",ke,n(r.stockOpnames.total),1),t[24]||(t[24]=o(" data "))]),e("div",De,[r.stockOpnames.prev_page_url?(l(),k(x(g),{key:0,href:r.stockOpnames.prev_page_url,class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 text-sm font-semibold text-gray-700 rounded-lg hover:bg-gray-50 transition-colors shadow-sm"},{default:c(()=>t[25]||(t[25]=[e("i",{class:"fa-solid fa-chevron-left mr-2"},null,-1),o(" Prev ")])),_:1},8,["href"])):p("",!0),r.stockOpnames.next_page_url?(l(),k(x(g),{key:1,href:r.stockOpnames.next_page_url,class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 text-sm font-semibold text-gray-700 rounded-lg hover:bg-gray-50 transition-colors shadow-sm"},{default:c(()=>t[26]||(t[26]=[o(" Next "),e("i",{class:"fa-solid fa-chevron-right ml-2"},null,-1)])),_:1},8,["href"])):p("",!0)])])):p("",!0)])]),_:1}))}};export{Me as default};
