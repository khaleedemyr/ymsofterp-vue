import{r as i,c,w as F,A as P,B as o,C as U,D as e,L as r,E as V,H as m,J as Q,F as g,M as y,N as a,I as w,G as W,l as N}from"./vendor-vue-g7iCcTkf.js";import{A as q}from"./AppLayout-CytV2Jsj.js";import"./vendor-utils-CpgP2uT4.js";import"./app-B-3LCfNP.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-BWyEbEQC.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const K={class:"max-w-7xl mx-auto py-8 px-4"},R={class:"flex flex-col md:flex-row md:items-center gap-4 mb-4"},E={class:"flex items-center gap-2"},G=["value"],H={class:"flex items-center gap-2"},j=["value"],z={class:"flex items-center gap-2"},J=["value"],O={class:"flex items-center gap-2"},X=["value"],Y=["disabled"],Z={key:0,class:"animate-spin mr-2"},$={key:1,class:"mr-2"},ee={class:"bg-white rounded-xl shadow-lg overflow-x-auto"},te={class:"min-w-full divide-y divide-gray-200"},se={class:"bg-white divide-y divide-gray-200"},ae={key:0},le={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},oe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-700"},re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-700"},ne={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},ie={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},de={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},ue={class:"px-6 py-4 whitespace-nowrap text-sm"},pe={class:"px-6 py-4 whitespace-nowrap text-sm"},ce={class:"px-6 py-4 whitespace-nowrap text-sm"},xe={class:"px-6 py-4 whitespace-nowrap text-sm"},me={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},ge={key:0},ye={class:"bg-gray-50 font-bold"},ve={class:"px-6 py-3 text-right"},be={key:0,class:"flex justify-between items-center mt-4"},fe={class:"text-sm text-gray-600"},he={class:"flex gap-1"},_e=["disabled"],we={class:"px-2"},ke=["disabled"],Te={__name:"InventoryValueReport",props:{stocks:Array,warehouses:Array,categories:Array,items:Array},setup(v){const M=v,x=i(""),d=i(25),n=i(1),b=i(""),f=i(""),h=i(""),k=i(!1),u=c(()=>{let l=M.stocks;if(b.value&&(l=l.filter(t=>String(t.warehouse_name)===String(b.value))),f.value&&(l=l.filter(t=>t.category_name===f.value)),h.value&&(l=l.filter(t=>t.item_name===h.value)),!x.value)return l;const s=x.value.toLowerCase();return l.filter(t=>t.item_name&&t.item_name.toLowerCase().includes(s)||t.warehouse_name&&t.warehouse_name.toLowerCase().includes(s)||t.category_name&&t.category_name.toLowerCase().includes(s))}),_=c(()=>Math.ceil(u.value.length/d.value)||1),C=c(()=>(n.value-1)*d.value),D=c(()=>Math.min(C.value+d.value,u.value.length)),L=c(()=>u.value.slice(C.value,D.value));function A(){n.value>1&&n.value--}function B(){n.value<_.value&&n.value++}F([d,x],()=>{n.value=1});function S(l){return!l||Number(l)===0?"-":Number(l).toLocaleString("id-ID",{minimumFractionDigits:0,maximumFractionDigits:0})}function p(l){return!l||Number(l)===0?"-":Number(l).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2})}const I=c(()=>L.value.reduce((l,s)=>l+(Number(s.total_value)||0),0));function T(){k.value=!0,window.location.reload()}return(l,s)=>(o(),P(q,null,{default:U(()=>[e("div",K,[s[19]||(s[19]=e("h1",{class:"text-2xl font-bold mb-6"},"Laporan Nilai Persediaan (Inventory Value Report)",-1)),e("div",R,[m(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>x.value=t),type:"text",placeholder:"Cari barang, warehouse, kategori...",class:"px-4 py-2 border border-gray-300 rounded-lg w-full md:w-64 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Q,x.value]]),e("div",E,[s[6]||(s[6]=e("label",{class:"text-sm"},"Warehouse",-1)),m(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>b.value=t),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[s[5]||(s[5]=e("option",{value:""},"Semua Warehouse",-1)),(o(!0),r(g,null,y(v.warehouses,t=>(o(),r("option",{key:t.id,value:t.name},a(t.name),9,G))),128))],512),[[w,b.value]])]),e("div",H,[s[8]||(s[8]=e("label",{class:"text-sm"},"Kategori",-1)),m(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>f.value=t),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[s[7]||(s[7]=e("option",{value:""},"Semua Kategori",-1)),(o(!0),r(g,null,y(v.categories,t=>(o(),r("option",{key:t.id,value:t.name},a(t.name),9,j))),128))],512),[[w,f.value]])]),e("div",z,[s[10]||(s[10]=e("label",{class:"text-sm"},"Barang",-1)),m(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>h.value=t),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[s[9]||(s[9]=e("option",{value:""},"Semua Barang",-1)),(o(!0),r(g,null,y(v.items,t=>(o(),r("option",{key:t.id,value:t.name},a(t.name),9,J))),128))],512),[[w,h.value]])]),e("div",O,[s[11]||(s[11]=e("label",{class:"text-sm"},"Tampilkan",-1)),m(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>d.value=t),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[(o(),r(g,null,y([10,25,50,100],t=>e("option",{key:t,value:t},a(t),9,X)),64))],512),[[w,d.value]]),s[12]||(s[12]=e("span",{class:"text-sm"},"data",-1))]),e("button",{onClick:T,disabled:k.value,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-700"},[k.value?(o(),r("span",Z,s[13]||(s[13]=[e("i",{class:"fas fa-spinner"},null,-1)]))):(o(),r("span",$,s[14]||(s[14]=[e("i",{class:"fas fa-sync-alt"},null,-1)]))),s[15]||(s[15]=W(" Load Data "))],8,Y)]),e("div",ee,[e("table",te,[s[18]||(s[18]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Barang"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Warehouse"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Kategori"),e("th",{class:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Qty Small"),e("th",{class:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Qty Medium"),e("th",{class:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Qty Large"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Last Cost Small"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"MAC"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Last Cost Medium"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Last Cost Large"),e("th",{class:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Total Value")])],-1)),e("tbody",se,[u.value.length?V("",!0):(o(),r("tr",ae,s[16]||(s[16]=[e("td",{colspan:"11",class:"text-center py-10 text-gray-400"},"Tidak ada data persediaan.",-1)]))),(o(!0),r(g,null,y(L.value,t=>(o(),r("tr",{key:t.item_name+t.warehouse_name,class:"hover:bg-gray-50 transition"},[e("td",le,a(t.item_name),1),e("td",oe,a(t.warehouse_name),1),e("td",re,a(t.category_name||"-"),1),e("td",ne,a(S(t.qty_small)),1),e("td",ie,a(S(t.qty_medium)),1),e("td",de,a(S(t.qty_large)),1),e("td",ue,a(p(t.last_cost_small)),1),e("td",pe,a(p(t.mac)),1),e("td",ce,a(p(t.last_cost_medium)),1),e("td",xe,a(p(t.last_cost_large)),1),e("td",me,a(p(t.total_value)),1)]))),128))]),L.value.length?(o(),r("tfoot",ge,[e("tr",ye,[s[17]||(s[17]=e("td",{colspan:"10",class:"text-right px-6 py-3"},"Grand Total",-1)),e("td",ve,a(p(I.value)),1)])])):V("",!0)])]),u.value.length?(o(),r("div",be,[e("div",fe," Menampilkan "+a(C.value+1)+" - "+a(D.value)+" dari "+a(u.value.length)+" data ",1),e("div",he,[e("button",{onClick:A,disabled:n.value===1,class:N(["px-3 py-1 rounded border text-sm",n.value===1?"bg-gray-200 text-gray-400":"bg-white text-blue-700 hover:bg-blue-50"])},"<",10,_e),e("span",we,"Halaman "+a(n.value)+" / "+a(_.value),1),e("button",{onClick:B,disabled:n.value===_.value,class:N(["px-3 py-1 rounded border text-sm",n.value===_.value?"bg-gray-200 text-gray-400":"bg-white text-blue-700 hover:bg-blue-50"])},">",10,ke)])])):V("",!0)])]),_:1}))}};export{Te as default};
