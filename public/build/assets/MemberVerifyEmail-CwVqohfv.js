import{_ as P}from"./GuestLayout--n0xQdyQ.js";import{P as C}from"./PrimaryButton-BbBAD9SX.js";import{r as x,c as b,A as S,B as a,C as p,x as v,D as e,Q as B,U as E,L as r,E as i,l as h,N as n,G as _}from"./vendor-vue-g7iCcTkf.js";import"./ApplicationLogo-Qyufs_gZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";const N={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-yellow-400 via-yellow-300 to-yellow-500 py-12 px-4 sm:px-6 lg:px-8"},j={class:"max-w-md w-full space-y-8 bg-white rounded-2xl shadow-2xl p-8"},A={class:"text-center"},J={class:"text-center text-2xl font-bold text-gray-900"},O={key:0},T={key:1},U={key:2},G={class:"text-sm"},M={key:0,class:"bg-gray-50 rounded-lg p-4 space-y-2"},R={class:"text-sm"},z={class:"text-gray-900 ml-2"},D={class:"text-sm"},F={class:"text-gray-900 ml-2"},H={class:"text-sm"},I={class:"text-gray-900 ml-2"},L={key:1,class:"text-center text-gray-600 text-sm"},Q={key:2,class:"space-y-3"},Y={key:0,class:"flex items-center justify-center"},$={key:1},q={key:0,class:"bg-green-50 text-green-800 text-sm rounded-lg p-3 border border-green-200"},K={key:1,class:"bg-red-50 text-red-800 text-sm rounded-lg p-3 border border-red-200"},W={key:3,class:"text-center text-gray-600 text-sm"},re={__name:"MemberVerifyEmail",props:{success:{type:Boolean,default:!1},message:{type:String,default:""},alreadyVerified:{type:Boolean,default:!1},member:{type:Object,default:null}},setup(s){const o=s,d=x(!1),m=x(""),l=x(""),w=b(()=>o.success?o.alreadyVerified?"text-yellow-500":"text-green-500":"text-red-500"),k=b(()=>o.success?o.alreadyVerified?"ℹ":"✓":"✗"),V=async()=>{var y;if(!((y=o.member)!=null&&y.email)){l.value="Email not found. Please contact support.";return}d.value=!0,m.value="",l.value="";try{const t="/api/mobile/member/auth/resend-verification",u=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:o.member.email})}),g=u.headers.get("content-type");let c;if(g&&g.includes("application/json"))c=await u.json();else{const f=await u.text();console.error("Resend verification: server returned non-JSON",{status:u.status,url:t,body:f==null?void 0:f.substring(0,500)}),l.value="Server error. Please try again later.";return}c.success?m.value=c.message||"Verification email has been sent. Please check your inbox.":l.value=c.message||c.error||"Failed to send verification email. Please try again."}catch(t){console.error("Resend verification error:",t),l.value="An error occurred. Please try again later."}finally{d.value=!1}};return(y,t)=>(a(),S(P,null,{default:p(()=>[v(B(E),{title:"Email Verification - Justus Group"}),e("div",N,[e("div",j,[t[6]||(t[6]=e("div",{class:"text-center"},[e("h1",{class:"text-4xl font-bold"},[e("span",{class:"text-black"},"JUST"),e("span",{class:"text-yellow-500"},"US")]),e("p",{class:"text-gray-600 text-sm tracking-widest mt-1"},"GROUP")],-1)),e("div",A,[e("div",{class:h(["text-6xl mb-4",w.value])},n(k.value),3)]),e("h2",J,[s.success&&!s.alreadyVerified?(a(),r("span",O,"Email Verified!")):s.alreadyVerified?(a(),r("span",T,"Already Verified")):(a(),r("span",U,"Verification Failed"))]),e("div",{class:h(["rounded-lg p-4 text-center",s.success&&!s.alreadyVerified?"bg-green-50 text-green-800 border border-green-200":s.alreadyVerified?"bg-yellow-50 text-yellow-800 border border-yellow-200":"bg-red-50 text-red-800 border border-red-200"])},[e("p",G,n(s.message||"Processing..."),1)],2),s.member?(a(),r("div",M,[e("p",R,[t[0]||(t[0]=e("span",{class:"font-semibold text-gray-700"},"Member ID:",-1)),e("span",z,n(s.member.member_id),1)]),e("p",D,[t[1]||(t[1]=e("span",{class:"font-semibold text-gray-700"},"Name:",-1)),e("span",F,n(s.member.nama_lengkap),1)]),e("p",H,[t[2]||(t[2]=e("span",{class:"font-semibold text-gray-700"},"Email:",-1)),e("span",I,n(s.member.email),1)])])):i("",!0),s.success&&!s.alreadyVerified?(a(),r("div",L,t[3]||(t[3]=[e("p",null,"You can now use all features of the Justus Group member app.",-1)]))):i("",!0),!s.success&&s.member?(a(),r("div",Q,[v(C,{onClick:V,disabled:d.value,class:"w-full"},{default:p(()=>[d.value?(a(),r("span",Y,t[4]||(t[4]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),_(" Sending... ")]))):(a(),r("span",$,"Resend Verification Email"))]),_:1},8,["disabled"]),m.value?(a(),r("div",q,n(m.value),1)):i("",!0),l.value?(a(),r("div",K,n(l.value),1)):i("",!0)])):i("",!0),!s.success&&!s.member?(a(),r("div",W,t[5]||(t[5]=[e("p",null,"Please contact support if you continue to experience issues.",-1)]))):i("",!0)])])]),_:1}))}};export{re as default};
