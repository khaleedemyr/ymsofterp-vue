import{P as U,r as V,A,B as r,C as D,D as e,G as y,O as w,L as i,E as S,H as a,Q as s,F as p,M as f,N as g,I as c,J as m}from"./vendor-vue-g7iCcTkf.js";import{S as b}from"./app-CX1ZKpmy.js";import{A as q}from"./AppLayout-B4yqCJld.js";import"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DJpuzLQV.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const I={class:"max-w-xl w-full mx-auto py-8 px-2"},T={class:"bg-white rounded-xl shadow-lg p-6"},j={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},E=["value"],L=["value"],M={class:"grid grid-cols-1 gap-4 mb-4"},N={class:"mb-4"},h={key:0,class:"mb-4"},F={class:"flex flex-wrap gap-2"},G=["src"],O=["onClick"],R={class:"mt-6 flex justify-end"},K=["disabled"],H={key:0,class:"fa-solid fa-spinner fa-spin"},J={key:1,class:"fa-solid fa-save"},lt={__name:"ActionPlanGuestReview",props:{outlets:Array,pics:Array},setup(k){const x=k,o=U({outlet:"",tanggal:"",dept:"KITCHEN",pic:"",problem:"",analisa:"",preventive:"",status:"",documentation:[]}),u=V([]),C=n=>{const t=n.target.files;for(let l=0;l<t.length;l++){const d=t[l];o.documentation.push(d);const v=URL.createObjectURL(d);u.value.push(v)}},B=n=>{o.documentation.splice(n,1),u.value.splice(n,1)},P=async()=>{if(!o.documentation.length){b.fire({title:"Error!",text:"Dokumentasi (foto) wajib diupload!",icon:"error",confirmButtonColor:"#3085d6"});return}(await b.fire({title:"Konfirmasi",text:"Apakah anda yakin ingin menyimpan data ini?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Simpan",cancelButtonText:"Batal",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"})).isConfirmed&&o.post("/ops-kitchen/action-plan-guest-review",{onSuccess:()=>{b.fire({title:"Berhasil!",text:"Data berhasil disimpan",icon:"success",confirmButtonColor:"#3085d6"}),o.reset(),u.value=[]},onError:t=>{b.fire({title:"Error!",text:"Terjadi kesalahan saat menyimpan data",icon:"error",confirmButtonColor:"#3085d6"})}})};return(n,t)=>(r(),A(q,null,{default:D(()=>[e("div",I,[t[25]||(t[25]=e("div",{class:"flex justify-between items-center mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-clipboard-list text-blue-500"}),y(" Action Plan Guest Review ")])],-1)),e("div",T,[e("form",{onSubmit:w(P,["prevent"])},[t[22]||(t[22]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-2"},"Informasi Umum",-1)),e("div",j,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Outlet",-1)),a(e("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>s(o).outlet=l),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},[t[8]||(t[8]=e("option",{value:""},"Pilih Outlet",-1)),(r(!0),i(p,null,f(x.outlets,l=>(r(),i("option",{key:l.id_outlet,value:l.id_outlet},g(l.nama_outlet),9,E))),128))],512),[[c,s(o).outlet]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tanggal",-1)),a(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=l=>s(o).tanggal=l),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[m,s(o).tanggal]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"Dept. Concern",-1)),a(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=l=>s(o).dept=l),readonly:"",class:"mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm"},null,512),[[m,s(o).dept]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"PIC",-1)),a(e("select",{"onUpdate:modelValue":t[3]||(t[3]=l=>s(o).pic=l),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},[t[12]||(t[12]=e("option",{value:""},"Pilih PIC",-1)),(r(!0),i(p,null,f(x.pics,l=>(r(),i("option",{key:l.id,value:l.id},g(l.nama_lengkap),9,L))),128))],512),[[c,s(o).pic]])])]),t[23]||(t[23]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-2 mt-6"},"Detail Komplain",-1)),e("div",M,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"Problem",-1)),a(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=l=>s(o).problem=l),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[m,s(o).problem]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Analisa",-1)),a(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=l=>s(o).analisa=l),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[m,s(o).analisa]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700"},"Preventive Action",-1)),a(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=l=>s(o).preventive=l),rows:"2",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[m,s(o).preventive]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),a(e("select",{"onUpdate:modelValue":t[7]||(t[7]=l=>s(o).status=l),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},t[17]||(t[17]=[e("option",{value:""},"Pilih Status",-1),e("option",{value:"Done"},"Done",-1),e("option",{value:"Progress"},"Progress",-1)]),512),[[c,s(o).status]])])]),t[24]||(t[24]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-2 mt-6"},"Dokumentasi",-1)),e("div",N,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Upload Foto (max 5)",-1)),e("input",{type:"file",multiple:"",onChange:C,accept:"image/*",class:"mt-1 block w-full"},null,32)]),u.value.length>0?(r(),i("div",h,[t[21]||(t[21]=e("div",{class:"font-bold mb-2"},"Preview Gambar:",-1)),e("div",F,[(r(!0),i(p,null,f(u.value,(l,d)=>(r(),i("div",{key:d,class:"relative"},[e("img",{src:l,style:{"max-width":"90px","max-height":"90px","border-radius":"8px","object-fit":"cover"}},null,8,G),e("button",{onClick:w(v=>B(d),["prevent"]),class:"absolute top-1 right-1 text-red-500 bg-white rounded-full p-1"},t[20]||(t[20]=[e("i",{class:"fa-solid fa-xmark"},null,-1)]),8,O)]))),128))])])):S("",!0),e("div",R,[e("button",{type:"submit",class:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg flex items-center gap-2",disabled:s(o).processing},[s(o).processing?(r(),i("i",H)):(r(),i("i",J)),y(" "+g(s(o).processing?"Menyimpan...":"Submit"),1)],8,K)])],32)])])]),_:1}))}};export{lt as default};
