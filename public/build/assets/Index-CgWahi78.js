import{$ as ye,c as S,r as f,w as ae,a as xe,A as we,B as n,C as O,D as t,L as i,E as k,G as h,H as v,F as V,M as A,N as u,I as M,Q as B,J as D,x as le,l as E,W as ke}from"./vendor-vue-g7iCcTkf.js";import{A as he}from"./AppLayout-CytV2Jsj.js";import{S as x}from"./app-B-3LCfNP.js";import{a as K}from"./vendor-utils-CpgP2uT4.js";import{s as se}from"./vue-multiselect.esm-V-bx43V9.js";/* empty css                            */import{_ as De}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-BWyEbEQC.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const _e={class:"py-6"},Te={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Ie={class:"bg-white rounded-2xl shadow-lg p-6 mb-6"},Se={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Ve={key:0},Ae=["value"],Me={key:1},$e={class:"w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-gray-700"},Ce=["value"],Fe={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},Oe={class:"flex justify-end mt-6"},Ee=["disabled"],Ue={key:0,class:"fa-solid fa-spinner fa-spin mr-2"},Pe={key:1,class:"fa-solid fa-search mr-2"},je={key:0,class:"bg-white rounded-2xl shadow-lg overflow-hidden"},Ke={class:"overflow-x-auto"},He={class:"w-full"},Le={class:"bg-white divide-y divide-gray-200"},Ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ye={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},We={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ge=["onClick"],Je={key:1,class:"bg-white rounded-2xl shadow-lg overflow-hidden"},ze={class:"overflow-x-auto"},Re={class:"w-full"},Qe={class:"bg-white divide-y divide-gray-200"},qe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Xe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ze={class:"px-6 py-4 whitespace-nowrap"},et={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},tt=["onClick"],at={key:2,class:"bg-white rounded-2xl shadow-lg p-6"},lt={class:"space-y-6"},st={key:0,class:"space-y-4"},nt={class:"flex items-center justify-between"},it={key:0,class:"text-xs text-gray-500"},ot=["value"],rt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ut={class:"space-y-2"},dt={key:1},ct={key:2,class:"flex justify-end"},mt=["disabled"],ft={key:0,class:"fa-solid fa-spinner fa-spin mr-2"},vt={key:1,class:"fa-solid fa-plus mr-2"},pt={key:3,class:"text-center py-8 text-gray-500"},gt={key:3,class:"bg-white rounded-2xl shadow-lg p-8 text-center"},bt={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},yt={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},xt={class:"mt-3"},wt={class:"flex items-center justify-between mb-4"},kt={class:"text-lg font-medium text-gray-900"},ht={class:"space-y-4"},Dt={class:"bg-gray-50 p-3 rounded-lg"},_t={class:"text-sm text-gray-600"},Tt={class:"text-sm text-gray-600"},It={class:"p-3 bg-gray-100 rounded-lg"},St={key:0},Vt={key:1,class:"text-sm text-gray-700"},At=["value"],Mt={key:1,class:"space-y-2"},$t={class:"flex justify-end space-x-3 pt-4"},Ct=["disabled"],Ft={key:0,class:"fa-solid fa-spinner fa-spin mr-2"},Ot={key:1,class:"fa-solid fa-check mr-2"},Et={__name:"Index",props:{outlets:Array,divisions:Array,users:Array,shifts:Array,scheduleData:Array,attendanceData:Array,filters:Object},setup(p){var R,Q,q,X,Z,ee,te;const m=p,$=((Q=(R=ye().props.auth)==null?void 0:R.user)==null?void 0:Q.id_outlet)||"",ne=S(()=>$==1),g=f(((q=m.filters)==null?void 0:q.outlet_id)||""),_=f(((X=m.filters)==null?void 0:X.division_id)||""),U=f(((Z=m.filters)==null?void 0:Z.start_date)||""),P=f(((ee=m.filters)==null?void 0:ee.end_date)||""),d=f(null),C=f([]),j=f(!1),w=f(((te=m.filters)==null?void 0:te.correction_type)||"schedule"),I=f(!1),b=f(!1),o=f({outletId:"",scanDate:"",scanTime:"",inoutmode:"1",reason:""}),y=f({canSubmit:!0,remaining:2,used:0,period:null}),H=f(!1),L=f(!1),s=f({id:null,type:"schedule",currentValue:null,newValue:null,newDate:"",newTime:"",reason:"",userInfo:null,dateInfo:null});S(()=>g.value?m.users||[]:[]),S(()=>_.value?m.shifts||[]:[]);const ie=S(()=>{if(!s.value.userInfo)return console.log("No user info found, returning all shifts"),m.shifts||[];const l=s.value.userInfo.schedule_division_id||s.value.userInfo.user_division_id;if(!l)return console.log("No division ID found, returning all shifts"),m.shifts||[];console.log("Division ID:",l),console.log("All shifts:",m.shifts);const e=(m.shifts||[]).filter(c=>c.division_id==l);return console.log("Filtered shifts:",e),e}),oe=S(()=>d.value?(m.scheduleData||[]).filter(l=>l.user_id===d.value.id):m.scheduleData||[]),re=S(()=>d.value?(m.attendanceData||[]).filter(l=>l.user_id===d.value.id):m.attendanceData||[]);async function Y(){j.value=!0;try{const l={};g.value&&(l.outlet_id=g.value),_.value&&(l.division_id=_.value);const e=await K.get("/api/attendance-report/employees",{params:l});C.value=e.data}catch(l){console.error("Error fetching employees:",l),C.value=[]}finally{j.value=!1}}ae([g,_],async()=>{g.value?await Y():(C.value=[],d.value=null)}),ae([d,()=>o.value.scanDate],async()=>{w.value==="manual_attendance"&&d.value&&o.value.scanDate&&await ve()}),xe(async()=>{g.value&&await Y()});function W(){if(!g.value||!U.value||!P.value){x.fire("Lengkapi Filter","Silakan lengkapi outlet, tanggal mulai, dan tanggal akhir!","warning");return}I.value=!0,ke.get("/schedule-attendance-correction",{outlet_id:g.value,division_id:_.value,start_date:U.value,end_date:P.value,user_id:d.value?d.value.id:"",correction_type:w.value},{preserveState:!0,replace:!0,onFinish:()=>{I.value=!1}})}function ue(l){if(!l)return"";const e=new Date(l),c=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),T=String(e.getHours()).padStart(2,"0"),F=String(e.getMinutes()).padStart(2,"0");return`${c}-${r}-${a}T${T}:${F}`}function G(l,e){let c="",r="";if(e==="attendance"&&l.scan_date){const a=new Date(l.scan_date);c=a.toISOString().split("T")[0],r=a.toTimeString().split(" ")[0].slice(0,5)}s.value={id:e==="schedule"?l.id:`${l.sn}_${l.pin}_${l.scan_date}`,type:e,currentValue:e==="schedule"?l.shift_name||"OFF":l.scan_date,newValue:e==="schedule"?l.shift_id:l.scan_date?ue(l.scan_date):"",newDate:e==="schedule"?"":c,newTime:e==="schedule"?"":r,reason:"",userInfo:l,dateInfo:e==="schedule"?l.tanggal:l.scan_date},L.value=!0}function N(){L.value=!1,b.value=!1,s.value={id:null,type:"schedule",currentValue:null,newValue:null,newDate:"",newTime:"",reason:"",userInfo:null,dateInfo:null}}async function de(){var e,c;if(!o.value.outletId||!o.value.scanDate||!o.value.scanTime||!o.value.reason.trim()){x.fire("Error","Outlet absen, tanggal, waktu, dan alasan harus diisi!","error");return}if(!/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(o.value.scanTime)){x.fire("Error","Format waktu tidak valid! Gunakan format HH:MM (00:00 - 23:59)","error");return}if(!d.value){x.fire("Error","Pilih karyawan terlebih dahulu!","error");return}if(!b.value){b.value=!0;try{let r=o.value.scanDate;if(r.includes("/")){const[pe,ge,be]=r.split("/");r=`${be}-${pe.padStart(2,"0")}-${ge.padStart(2,"0")}`}const a=`${r} ${o.value.scanTime}:00`,T={user_id:d.value.id,outlet_id:o.value.outletId,scan_date:a,inoutmode:parseInt(o.value.inoutmode),reason:o.value.reason},F=await K.post("/schedule-attendance-correction/manual-attendance",T);F.data.success?(await x.fire("Berhasil!",F.data.message,"success"),o.value={outletId:"",scanDate:"",scanTime:"",inoutmode:"1",reason:""},d.value=null,y.value={canSubmit:!0,remaining:5,used:0,period:null}):x.fire("Error",F.data.message||"Terjadi kesalahan","error")}catch(r){console.error("Manual attendance error:",r),x.fire("Error",((c=(e=r.response)==null?void 0:e.data)==null?void 0:c.message)||"Terjadi kesalahan","error")}finally{b.value=!1}}}async function ce(){var l,e;if(!s.value.reason.trim()){x.fire("Error","Alasan koreksi harus diisi!","error");return}if(s.value.type==="attendance"&&!/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(s.value.newTime)){x.fire("Error","Format waktu tidak valid! Gunakan format HH:MM (00:00 - 23:59)","error");return}if(!b.value){b.value=!0;try{const c=s.value.type==="schedule"?"/schedule-attendance-correction/schedule":"/schedule-attendance-correction/attendance",r={reason:s.value.reason};if(s.value.type==="schedule")r.schedule_id=s.value.id,r.shift_id=s.value.newValue;else{r.sn=s.value.userInfo.sn,r.pin=s.value.userInfo.pin;const T=`${s.value.newDate} ${s.value.newTime}:00`;r.scan_date=T,r.inoutmode=s.value.userInfo.inoutmode,r.old_scan_date=s.value.userInfo.scan_date}const a=await K.post(c,r);a.data.success?(await x.fire("Berhasil!",a.data.message,"success"),N(),W()):x.fire("Error",a.data.message||"Terjadi kesalahan","error")}catch(c){console.error("Correction error:",c),x.fire("Error",((e=(l=c.response)==null?void 0:l.data)==null?void 0:e.message)||"Terjadi kesalahan","error")}finally{b.value=!1}}}function J(l){return l?new Date(l).toLocaleDateString("id-ID"):""}function z(l){return l?new Date(l).toLocaleString("id-ID",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):""}function me(l){const e=l.target.value;e.length===2&&!e.includes(":")&&(s.value.newTime=e+":"),e.length>5&&(s.value.newTime=e.slice(0,5))}function fe(l){const e=l.target.value;e.length===2&&!e.includes(":")&&(o.value.scanTime=e+":"),e.length>5&&(o.value.scanTime=e.slice(0,5))}async function ve(){if(!(!d.value||!o.value.scanDate)){H.value=!0;try{let l=o.value.scanDate;if(l.includes("/")){const[c,r,a]=l.split("/");l=`${a}-${c.padStart(2,"0")}-${r.padStart(2,"0")}`}const e=await K.get("/api/schedule-attendance-correction/check-manual-limit",{params:{user_id:d.value.id,scan_date:l}});e.data.success&&(y.value={canSubmit:e.data.can_submit,remaining:e.data.remaining,used:e.data.used,period:e.data.period})}catch(l){console.error("Error checking manual attendance limit:",l),y.value={canSubmit:!0,remaining:5,used:0,period:null}}finally{H.value=!1}}}return $&&$!=1&&(g.value=$),(l,e)=>(n(),we(he,{title:"Schedule/Attendance Correction"},{default:O(()=>{var c,r;return[t("div",_e,[t("div",Te,[e[51]||(e[51]=t("div",{class:"mb-6"},[t("h1",{class:"text-3xl font-bold text-gray-900 flex items-center"},[t("i",{class:"fa-solid fa-edit text-blue-500 mr-3"}),h(" Schedule/Attendance Correction ")]),t("p",{class:"text-gray-600 mt-2"}," Koreksi jadwal shift dan data kehadiran yang sudah tercatat ")],-1)),t("div",Ie,[e[28]||(e[28]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Filter Data",-1)),t("div",Se,[ne.value?(n(),i("div",Ve,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Outlet",-1)),v(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>g.value=a),class:"w-full form-input rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"},[e[16]||(e[16]=t("option",{value:""},"-- Pilih Outlet --",-1)),(n(!0),i(V,null,A(p.outlets,a=>(n(),i("option",{key:a.id,value:a.id},u(a.name),9,Ae))),128))],512),[[M,g.value]])])):(n(),i("div",Me,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Outlet",-1)),t("div",$e,u(((c=p.outlets.find(a=>a.id==B($)))==null?void 0:c.name)||"Outlet tidak ditemukan"),1)])),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Divisi",-1)),v(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>_.value=a),class:"w-full form-input rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"},[e[19]||(e[19]=t("option",{value:""},"-- Pilih Divisi --",-1)),(n(!0),i(V,null,A(p.divisions,a=>(n(),i("option",{key:a.id,value:a.id},u(a.name),9,Ce))),128))],512),[[M,_.value]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Mulai",-1)),v(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=a=>U.value=a),class:"w-full form-input rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"},null,512),[[D,U.value]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Akhir",-1)),v(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=a=>P.value=a),class:"w-full form-input rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"},null,512),[[D,P.value]])])]),t("div",Fe,[t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nama Karyawan ",-1)),le(B(se),{modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=a=>d.value=a),options:C.value,loading:j.value,searchable:!0,"clear-on-select":!1,"close-on-select":!0,"show-labels":!1,"track-by":"id",label:"name",placeholder:"Pilih atau cari karyawan...",disabled:!g.value},{noOptions:O(()=>e[23]||(e[23]=[t("div",{class:"text-center py-2 text-gray-500"}," Pilih outlet terlebih dahulu ",-1)])),noResult:O(()=>e[24]||(e[24]=[t("div",{class:"text-center py-2 text-gray-500"}," Tidak ada karyawan ditemukan ",-1)])),_:1},8,["modelValue","options","loading","disabled"])]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tipe Koreksi",-1)),v(t("select",{"onUpdate:modelValue":e[5]||(e[5]=a=>w.value=a),class:"w-full form-input rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"},e[26]||(e[26]=[t("option",{value:"schedule"},"Schedule Correction",-1),t("option",{value:"attendance"},"Attendance Correction",-1),t("option",{value:"manual_attendance"},"Manual Attendance Entry",-1)]),512),[[M,w.value]])])]),t("div",Oe,[t("button",{onClick:W,disabled:I.value,class:"bg-blue-600 text-white px-6 py-2 rounded-xl shadow hover:bg-blue-700 disabled:opacity-50"},[I.value?(n(),i("i",Ue)):(n(),i("i",Pe)),h(" "+u(I.value?"Loading...":"Tampilkan Data"),1)],8,Ee)])]),w.value==="schedule"&&p.scheduleData&&p.scheduleData.length?(n(),i("div",je,[e[31]||(e[31]=t("div",{class:"px-6 py-4 bg-blue-600 text-white"},[t("h3",{class:"text-lg font-semibold"},"Schedule Data")],-1)),t("div",Ke,[t("table",He,[e[30]||(e[30]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tanggal"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Karyawan"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Shift"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),t("tbody",Le,[(n(!0),i(V,null,A(oe.value,a=>(n(),i("tr",{key:a.id},[t("td",Ne,u(J(a.tanggal)),1),t("td",Be,u(a.nama_lengkap),1),t("td",Ye,u(a.shift_name||"OFF"),1),t("td",We,[t("button",{onClick:T=>G(a,"schedule"),class:"text-blue-600 hover:text-blue-900"},e[29]||(e[29]=[t("i",{class:"fa-solid fa-edit mr-1"},null,-1),h(" Koreksi ")]),8,Ge)])]))),128))])])])])):k("",!0),w.value==="attendance"&&p.attendanceData&&p.attendanceData.length?(n(),i("div",Je,[e[34]||(e[34]=t("div",{class:"px-6 py-4 bg-green-600 text-white"},[t("h3",{class:"text-lg font-semibold"},"Attendance Data")],-1)),t("div",ze,[t("table",Re,[e[33]||(e[33]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Karyawan"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tanggal/Waktu"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),t("tbody",Qe,[(n(!0),i(V,null,A(re.value,a=>(n(),i("tr",{key:`${a.sn}_${a.pin}_${a.scan_date}`},[t("td",qe,u(a.nama_lengkap),1),t("td",Xe,u(z(a.scan_date)),1),t("td",Ze,[t("span",{class:E([a.inoutmode==1?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},u(a.inoutmode==1?"IN":"OUT"),3)]),t("td",et,[t("button",{onClick:T=>G(a,"attendance"),class:"text-blue-600 hover:text-blue-900"},e[32]||(e[32]=[t("i",{class:"fa-solid fa-edit mr-1"},null,-1),h(" Koreksi ")]),8,tt)])]))),128))])])])])):k("",!0),w.value==="manual_attendance"?(n(),i("div",at,[e[49]||(e[49]=t("div",{class:"px-6 py-4 bg-purple-600 text-white -m-6 mb-6"},[t("h3",{class:"text-lg font-semibold"},"Manual Attendance Entry"),t("p",{class:"text-sm opacity-90"},"Input absen manual untuk karyawan yang lupa absen")],-1)),t("div",lt,[t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pilih Karyawan",-1)),le(B(se),{modelValue:d.value,"onUpdate:modelValue":e[6]||(e[6]=a=>d.value=a),options:C.value,loading:j.value,searchable:!0,"clear-on-select":!1,"close-on-select":!0,"show-labels":!1,"track-by":"id",label:"name",placeholder:"Pilih atau cari karyawan...",disabled:!g.value},{noOptions:O(()=>e[35]||(e[35]=[t("div",{class:"text-center py-2 text-gray-500"}," Pilih outlet terlebih dahulu ",-1)])),noResult:O(()=>e[36]||(e[36]=[t("div",{class:"text-center py-2 text-gray-500"}," Tidak ada karyawan ditemukan ",-1)])),_:1},8,["modelValue","options","loading","disabled"])]),d.value?(n(),i("div",st,[y.value.period?(n(),i("div",{key:0,class:E(["p-3 rounded-lg",y.value.canSubmit?"bg-blue-50 border border-blue-200":"bg-red-50 border border-red-200"])},[t("div",nt,[t("div",null,[t("div",{class:E(["text-sm font-medium",y.value.canSubmit?"text-blue-800":"text-red-800"])},e[38]||(e[38]=[t("i",{class:"fa-solid fa-info-circle mr-1"},null,-1),h(" Limit Input Absen Manual ")]),2),t("div",{class:E(["text-xs mt-1",y.value.canSubmit?"text-blue-600":"text-red-600"])}," Periode: "+u(y.value.period.start_formatted)+" - "+u(y.value.period.end_formatted),3),t("div",{class:E(["text-xs",y.value.canSubmit?"text-blue-600":"text-red-600"])}," Digunakan: "+u(y.value.used)+"/5 â€¢ Sisa: "+u(y.value.remaining),3)]),H.value?(n(),i("div",it,e[39]||(e[39]=[t("i",{class:"fa-solid fa-spinner fa-spin"},null,-1)]))):k("",!0)])],2)):k("",!0),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Outlet Absen *",-1)),v(t("select",{"onUpdate:modelValue":e[7]||(e[7]=a=>o.value.outletId=a),class:"w-full form-input rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"},[e[40]||(e[40]=t("option",{value:""},"-- Pilih Outlet Absen --",-1)),(n(!0),i(V,null,A(p.outlets,a=>(n(),i("option",{key:a.id,value:a.id},u(a.name),9,ot))),128))],512),[[M,o.value.outletId]]),e[42]||(e[42]=t("p",{class:"text-xs text-gray-500 mt-1"},"Pilih outlet dimana karyawan melakukan absen",-1))]),t("div",rt,[t("div",null,[e[43]||(e[43]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal & Waktu",-1)),t("div",ut,[v(t("input",{type:"date","onUpdate:modelValue":e[8]||(e[8]=a=>o.value.scanDate=a),class:"w-full form-input rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"},null,512),[[D,o.value.scanDate]]),v(t("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=a=>o.value.scanTime=a),placeholder:"HH:MM (24 jam)",pattern:"^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$",class:"w-full form-input rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500",onInput:fe},null,544),[[D,o.value.scanTime]])]),e[44]||(e[44]=t("p",{class:"text-xs text-gray-500 mt-1"},"Format: YYYY-MM-DD HH:MM (24 jam) - Contoh: 14:30, 09:15, 23:45",-1))]),t("div",null,[e[46]||(e[46]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),v(t("select",{"onUpdate:modelValue":e[10]||(e[10]=a=>o.value.inoutmode=a),class:"w-full form-input rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"},e[45]||(e[45]=[t("option",{value:"1"},"Check In",-1),t("option",{value:"2"},"Check Out",-1)]),512),[[M,o.value.inoutmode]])])])])):k("",!0),d.value?(n(),i("div",dt,[e[47]||(e[47]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Alasan",-1)),v(t("textarea",{"onUpdate:modelValue":e[11]||(e[11]=a=>o.value.reason=a),rows:"3",class:"w-full form-input rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500",placeholder:"Jelaskan alasan input absen manual..."},null,512),[[D,o.value.reason]])])):k("",!0),d.value?(n(),i("div",ct,[t("button",{onClick:de,disabled:b.value||!o.value.outletId||!o.value.scanDate||!o.value.scanTime||!o.value.reason||!y.value.canSubmit,class:"bg-purple-600 text-white px-6 py-2 rounded-xl shadow hover:bg-purple-700 disabled:opacity-50"},[b.value?(n(),i("i",ft)):(n(),i("i",vt)),h(" "+u(b.value?"Mengirim...":"Kirim Permohonan"),1)],8,mt)])):(n(),i("div",pt,e[48]||(e[48]=[t("i",{class:"fa-solid fa-user-plus text-4xl mb-4"},null,-1),t("p",null,"Pilih karyawan terlebih dahulu untuk input absen manual",-1)])))])])):k("",!0),!I.value&&(w.value==="schedule"&&(!p.scheduleData||p.scheduleData.length===0)||w.value==="attendance"&&(!p.attendanceData||p.attendanceData.length===0))?(n(),i("div",gt,e[50]||(e[50]=[t("i",{class:"fa-solid fa-inbox text-gray-400 text-4xl mb-4"},null,-1),t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Tidak ada data",-1),t("p",{class:"text-gray-500"},'Silakan pilih filter dan klik "Tampilkan Data" untuk melihat data yang tersedia.',-1)]))):k("",!0)])]),L.value?(n(),i("div",bt,[t("div",yt,[t("div",xt,[t("div",wt,[t("h3",kt," Koreksi "+u(s.value.type==="schedule"?"Schedule":"Attendance"),1),t("button",{onClick:N,class:"text-gray-400 hover:text-gray-600"},e[52]||(e[52]=[t("i",{class:"fa-solid fa-times"},null,-1)]))]),t("div",ht,[t("div",Dt,[t("p",_t,[e[53]||(e[53]=t("strong",null,"Karyawan:",-1)),h(" "+u(((r=s.value.userInfo)==null?void 0:r.nama_lengkap)||"Unknown"),1)]),t("p",Tt,[e[54]||(e[54]=t("strong",null,"Tanggal:",-1)),h(" "+u(J(s.value.dateInfo)),1)])]),t("div",null,[e[55]||(e[55]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nilai Saat Ini",-1)),t("div",It,[s.value.type==="schedule"?(n(),i("span",St,u(s.value.currentValue||"OFF"),1)):(n(),i("span",Vt,u(z(s.value.currentValue)),1))])]),t("div",null,[e[58]||(e[58]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nilai Baru",-1)),s.value.type==="schedule"?v((n(),i("select",{key:0,"onUpdate:modelValue":e[12]||(e[12]=a=>s.value.newValue=a),class:"w-full form-input rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"},[e[56]||(e[56]=t("option",{value:null},"OFF",-1)),(n(!0),i(V,null,A(ie.value,a=>(n(),i("option",{key:a.id,value:a.id},u(a.shift_name)+" ("+u(a.time_start)+" - "+u(a.time_end)+") ",9,At))),128))],512)),[[M,s.value.newValue]]):(n(),i("div",Mt,[v(t("input",{type:"date","onUpdate:modelValue":e[13]||(e[13]=a=>s.value.newDate=a),class:"w-full form-input rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"},null,512),[[D,s.value.newDate]]),v(t("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=a=>s.value.newTime=a),placeholder:"HH:MM (24 jam format)",pattern:"^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$",class:"w-full form-input rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500",onInput:me},null,544),[[D,s.value.newTime]]),e[57]||(e[57]=t("p",{class:"text-xs text-gray-500"},"Format: 00:00 - 23:59 (24 jam)",-1))]))]),t("div",null,[e[59]||(e[59]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Alasan Koreksi *",-1)),v(t("textarea",{"onUpdate:modelValue":e[15]||(e[15]=a=>s.value.reason=a),rows:"3",class:"w-full form-input rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500",placeholder:"Jelaskan alasan koreksi..."},null,512),[[D,s.value.reason]])]),t("div",$t,[t("button",{onClick:N,class:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200"}," Batal "),t("button",{onClick:ce,disabled:b.value,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed flex items-center"},[b.value?(n(),i("i",Ft)):(n(),i("i",Ot)),h(" "+u(b.value?"Menyimpan...":"Koreksi"),1)],8,Ct)])])])])])):k("",!0)]}),_:1}))}},Rt=De(Et,[["__scopeId","data-v-4765cbf4"]]);export{Rt as default};
