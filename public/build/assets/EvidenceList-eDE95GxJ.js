import{a as T,f as A}from"./vendor-utils-CpgP2uT4.js";import{r as d,a as J,L as t,B as a,x as l,D as e,F as m,M as _,C as r,Q as o,E as f,l as K,N as g}from"./vendor-vue-g7iCcTkf.js";import{Y as S,h as p,_ as $,G as j,S as M}from"./vendor-ui-CrPgGUUb.js";import{i as O}from"./id-C4ThNj35.js";const R={key:0,class:"flex justify-center py-4"},U={key:1,class:"text-center py-4 text-gray-500"},W={key:2,class:"space-y-4"},X={class:"text-xs text-gray-500 mb-1"},Z={class:"ml-2"},ee={key:0,class:"text-sm text-gray-700 mb-2"},te={key:1,class:"mb-2"},ae={class:"flex flex-wrap gap-2"},se=["src","onClick"],le=["onClick"],oe={key:2,class:"mb-2"},ne={class:"flex flex-wrap gap-2"},re=["src","onClick"],ie={class:"fixed inset-0 overflow-y-auto"},ue={class:"flex min-h-full items-center justify-center p-4"},ce=["src"],de={class:"fixed inset-0 overflow-y-auto"},fe={class:"flex min-h-full items-center justify-center"},ve={class:"relative aspect-video bg-black rounded-lg overflow-hidden"},pe=["src"],he={class:"flex justify-center gap-2 mt-4"},ye=["onClick"],me=["src"],_e={class:"fixed inset-0 overflow-y-auto"},ge={class:"flex min-h-full items-center justify-center p-4"},xe=["src"],Se={__name:"EvidenceList",props:{taskId:{type:[Number,String],required:!0}},setup(D){const E=D,x=d([]),w=d(!0),b=d(!1),h=d(null),k=d(!1),v=d([]),u=d(0),C=d(!1),y=d(null),I=d(null);function N(i){return A(new Date(i),"dd MMMM yyyy HH:mm",{locale:O})}function L(i,n){h.value=i,b.value=!0}function z(){b.value=!1,h.value=null}function F(i,n=0){v.value=i,u.value=n,k.value=!0}function V(){k.value=!1,u.value=0,v.value=[]}function G(){u.value>0&&u.value--}function H(){u.value<v.value.length-1&&u.value++}function Y(i){u.value=i}function q(i){y.value=i,C.value=!0}function P(){I.value&&I.value.pause(),C.value=!1,y.value=null}async function Q(){w.value=!0;try{const i=await T.get(`/api/maintenance-evidence/${E.taskId}`);x.value=i.data}catch(i){console.error("Error loading evidences:",i)}finally{w.value=!1}}return J(()=>{Q()}),(i,n)=>(a(),t("div",null,[w.value?(a(),t("div",R,n[0]||(n[0]=[e("i",{class:"fas fa-spinner fa-spin text-2xl text-blue-500"},null,-1)]))):x.value.length===0?(a(),t("div",U," Belum ada evidence ")):(a(),t("div",W,[(a(!0),t(m,null,_(x.value,s=>(a(),t("div",{key:s.id,class:"mb-4 p-2 rounded bg-gray-50"},[e("div",X,[e("span",null,"Dibuat oleh: "+g(s.created_by_name||"-"),1),e("span",Z,g(N(s.created_at)),1)]),s.notes?(a(),t("div",ee,g(s.notes),1)):f("",!0),s.photos&&s.photos.length?(a(),t("div",te,[e("div",ae,[(a(!0),t(m,null,_(s.photos.slice(0,3),(c,B)=>(a(),t("img",{key:c.id,src:`/storage/${c.path}`,class:"w-16 h-16 object-cover rounded cursor-pointer",onClick:we=>L(c,s.photos)},null,8,se))),128)),s.photos.length>3?(a(),t("div",{key:0,class:"w-16 h-16 rounded bg-gray-100 flex items-center justify-center text-xs text-gray-600 cursor-pointer",onClick:c=>F(s.photos,3)}," +"+g(s.photos.length-3),9,le)):f("",!0)])])):f("",!0),s.videos&&s.videos.length?(a(),t("div",oe,[e("div",ne,[(a(!0),t(m,null,_(s.videos,c=>(a(),t("video",{key:c.id,src:`/storage/${c.path}`,class:"w-24 h-16 rounded cursor-pointer",onClick:B=>q(c)},null,8,re))),128))])])):f("",!0)]))),128))])),l(o(M),{appear:"",show:b.value,as:"template"},{default:r(()=>[l(o(S),{as:"div",onClose:z,class:"relative z-50"},{default:r(()=>[l(o(p),{enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[l(o($),{class:"fixed inset-0 bg-black/75"})]),_:1}),e("div",ie,[e("div",ue,[l(o(p),{enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[l(o(j),{class:"relative bg-white rounded-lg max-w-3xl"},{default:r(()=>[e("button",{onClick:z,class:"absolute -top-10 right-0 text-white hover:text-gray-300"},n[1]||(n[1]=[e("i",{class:"fas fa-times text-xl"},null,-1)])),h.value?(a(),t("img",{key:0,src:`/storage/${h.value.path}`,class:"rounded-lg"},null,8,ce)):f("",!0)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),l(o(M),{appear:"",show:k.value,as:"template"},{default:r(()=>[l(o(S),{as:"div",onClose:V,class:"relative z-50"},{default:r(()=>[l(o(p),{enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[l(o($),{class:"fixed inset-0 bg-black/90"})]),_:1}),e("div",de,[e("div",fe,[l(o(p),{enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[l(o(j),{class:"relative w-full max-w-4xl p-4"},{default:r(()=>[u.value>0?(a(),t("button",{key:0,onClick:G,class:"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 z-10"},n[2]||(n[2]=[e("i",{class:"fas fa-chevron-left text-3xl"},null,-1)]))):f("",!0),u.value<v.value.length-1?(a(),t("button",{key:1,onClick:H,class:"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 z-10"},n[3]||(n[3]=[e("i",{class:"fas fa-chevron-right text-3xl"},null,-1)]))):f("",!0),e("button",{onClick:V,class:"absolute top-4 right-4 text-white hover:text-gray-300 z-10"},n[4]||(n[4]=[e("i",{class:"fas fa-times text-xl"},null,-1)])),e("div",ve,[v.value[u.value]?(a(),t("img",{key:0,src:`/storage/${v.value[u.value].path}`,class:"w-full h-full object-contain"},null,8,pe)):f("",!0)]),e("div",he,[(a(!0),t(m,null,_(v.value,(s,c)=>(a(),t("button",{key:s.id,onClick:B=>Y(c),class:K(["w-16 h-12 rounded overflow-hidden border-2",u.value===c?"border-white":"border-transparent"])},[e("img",{src:`/storage/${s.path}`,class:"w-full h-full object-cover"},null,8,me)],10,ye))),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),l(o(M),{appear:"",show:C.value,as:"template"},{default:r(()=>[l(o(S),{as:"div",onClose:P,class:"relative z-50"},{default:r(()=>[l(o(p),{enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[l(o($),{class:"fixed inset-0 bg-black/75"})]),_:1}),e("div",_e,[e("div",ge,[l(o(p),{enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[l(o(j),{class:"relative bg-black rounded-lg overflow-hidden max-w-3xl"},{default:r(()=>[e("button",{onClick:P,class:"absolute top-4 right-4 text-white hover:text-gray-300 z-10"},n[5]||(n[5]=[e("i",{class:"fas fa-times text-xl"},null,-1)])),y.value?(a(),t("video",{key:0,src:`/storage/${y.value.path}`,ref_key:"videoPlayer",ref:I,controls:"",class:"w-full"},null,8,xe)):f("",!0)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]))}};export{Se as default};
