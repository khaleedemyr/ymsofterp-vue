import{k as V,A as P,B as l,C as b,D as t,x as v,G as u,Q as k,S as w,H as C,J as E,L as r,F as B,M as $,N as o,I as _,E as p,l as h,W as S}from"./vendor-vue-g7iCcTkf.js";import{A as F}from"./AppLayout-Cg9_BqdS.js";import{S as g}from"./app-CL3toCqm.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DcALjTaB.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const O={class:"w-full min-h-screen py-8 px-2 md:px-6"},L={class:"max-w-7xl mx-auto"},U={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4"},z={class:"bg-white rounded-lg shadow-sm border p-6 mb-6"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},J=["value"],Y={class:"mt-4 flex justify-between items-center"},q={class:"flex items-center gap-2"},G={class:"bg-white rounded-lg shadow-sm border overflow-hidden"},H={class:"overflow-x-auto"},Q={class:"min-w-full divide-y divide-gray-200"},R={class:"bg-white divide-y divide-gray-200"},K={key:0},X={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Z={class:"px-6 py-4"},tt={class:"text-sm font-medium text-gray-900"},et={class:"text-sm text-gray-500 truncate max-w-xs"},st={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},at={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},nt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},lt={key:0},rt={key:1,class:"text-gray-400 italic"},ot={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},it={class:"px-6 py-4 whitespace-nowrap"},dt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ut={class:"flex items-center gap-2"},ct=["onClick"],xt=["onClick","title"],pt=["onClick"],mt={key:0,class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},ft={class:"flex-1 flex justify-between sm:hidden"},gt={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},yt={class:"text-sm text-gray-700"},bt={class:"font-medium"},ht={class:"font-medium"},vt={class:"font-medium"},kt={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},wt=["onClick"],Mt={__name:"Index",props:{soals:Object,statusOptions:Array,filters:Object},setup(n){const m=n,i=V({search:m.filters.search||"",status:m.filters.status||"all",per_page:m.filters.per_page||10}),y=()=>{S.get("/master-soal-new",i,{preserveState:!0,replace:!0})},A=()=>{Object.assign(i,{search:"",status:"all",per_page:10}),y()},f=a=>{S.get("/master-soal-new",{...i,page:a},{preserveState:!0,replace:!0})},T=()=>{const a=m.soals.current_page,e=m.soals.last_page,s=2,c=[],d=[];for(let x=Math.max(2,a-s);x<=Math.min(e-1,a+s);x++)c.push(x);return a-s>2?d.push(1,"..."):d.push(1),d.push(...c),a+s<e-1?d.push("...",e):e>1&&d.push(e),d},j=a=>{if(a<60)return`${a} detik`;const e=Math.floor(a/60),s=a%60;return s===0?`${e} menit`:`${e}m ${s}s`},D=a=>!a.pertanyaans||!Array.isArray(a.pertanyaans)?0:a.pertanyaans.reduce((s,c)=>s+(c.waktu_detik||0),0),N=async a=>{const e=a.status==="active"?"nonaktifkan":"aktifkan";(await g.fire({title:`Apakah Anda yakin ingin ${e} soal ini?`,text:`Soal "${a.judul}" akan ${e}.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:`Ya, ${e}!`,cancelButtonText:"Batal"})).isConfirmed&&(window.location.href=`/master-soal-new/${a.id}/toggle-status`)},M=async a=>{(await g.fire({title:"Duplicate Soal",text:`Apakah Anda yakin ingin menduplikasi soal "${a.judul}"?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#7c3aed",cancelButtonColor:"#6b7280",confirmButtonText:"Ya, duplicate!",cancelButtonText:"Batal"})).isConfirmed&&(window.location.href=`/master-soal-new/${a.id}/duplicate`)},W=async a=>{(await g.fire({title:"Apakah Anda yakin ingin menghapus soal ini?",text:`Soal "${a.judul}" akan dihapus secara permanen.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"})).isConfirmed&&S.delete(`/master-soal-new/${a.id}`,{onSuccess:()=>{g.fire("Berhasil!","Soal berhasil dihapus!","success")},onError:s=>{g.fire("Error!","Gagal menghapus soal: "+(s.message||"Unknown error"),"error")}})};return(a,e)=>(l(),P(F,null,{default:b(()=>[t("div",O,[t("div",L,[t("div",U,[e[8]||(e[8]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900 flex items-center gap-3"},[t("i",{class:"fa-solid fa-clipboard-question text-blue-600"}),u(" Master Data Soal ")])],-1)),v(k(w),{href:"/master-soal-new/create",class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors"},{default:b(()=>e[7]||(e[7]=[t("i",{class:"fa-solid fa-plus"},null,-1),u(" Tambah Soal ")])),_:1})]),t("div",z,[t("div",I,[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Cari",-1)),C(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>i.search=s),type:"text",placeholder:"Cari judul atau deskripsi...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onInput:y},null,544),[[E,i.search]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),C(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>i.status=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:y},[(l(!0),r(B,null,$(n.statusOptions,s=>(l(),r("option",{key:s.value,value:s.value},o(s.label),9,J))),128))],544),[[_,i.status]])])]),t("div",Y,[t("div",q,[e[12]||(e[12]=t("label",{class:"text-sm font-medium text-gray-700"},"Per halaman:",-1)),C(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>i.per_page=s),class:"px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:y},e[11]||(e[11]=[t("option",{value:"5"},"5",-1),t("option",{value:"10"},"10",-1),t("option",{value:"15"},"15",-1),t("option",{value:"25"},"25",-1),t("option",{value:"50"},"50",-1)]),544),[[_,i.per_page]])]),t("button",{onClick:A,class:"text-sm text-gray-600 hover:text-gray-800 flex items-center gap-1"},e[13]||(e[13]=[t("i",{class:"fa-solid fa-rotate-left"},null,-1),u(" Reset Filter ")]))])]),t("div",G,[t("div",H,[t("table",Q,[e[19]||(e[19]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," No "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Judul Soal "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Jumlah Pertanyaan "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Waktu Total "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total Skor "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Aksi ")])],-1)),t("tbody",R,[n.soals.data.length===0?(l(),r("tr",K,e[14]||(e[14]=[t("td",{colspan:"7",class:"px-6 py-12 text-center text-gray-500"},[t("i",{class:"fa-solid fa-inbox text-4xl mb-4 block"}),u(" Tidak ada data soal ")],-1)]))):p("",!0),(l(!0),r(B,null,$(n.soals.data,(s,c)=>{var d;return l(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",X,o((n.soals.current_page-1)*n.soals.per_page+c+1),1),t("td",Z,[t("div",tt,o(s.judul),1),t("div",et,o(s.deskripsi||"Tidak ada deskripsi"),1)]),t("td",st,[t("span",at,o(((d=s.pertanyaans)==null?void 0:d.length)||0)+" pertanyaan ",1)]),t("td",nt,[s.pertanyaans&&s.pertanyaans.length>0?(l(),r("span",lt,o(j(D(s))),1)):(l(),r("span",rt," Belum ada pertanyaan "))]),t("td",ot,o(s.skor_total),1),t("td",it,[t("span",{class:h(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},o(s.status==="active"?"Aktif":"Tidak Aktif"),3)]),t("td",dt,[t("div",ut,[v(k(w),{href:`/master-soal-new/${s.id}`,class:"text-blue-600 hover:text-blue-900",title:"Lihat Detail"},{default:b(()=>e[15]||(e[15]=[t("i",{class:"fa-solid fa-eye"},null,-1)])),_:2},1032,["href"]),v(k(w),{href:`/master-soal-new/${s.id}/edit`,class:"text-yellow-600 hover:text-yellow-900",title:"Edit"},{default:b(()=>e[16]||(e[16]=[t("i",{class:"fa-solid fa-edit"},null,-1)])),_:2},1032,["href"]),t("button",{onClick:x=>M(s),class:"text-purple-600 hover:text-purple-900",title:"Duplicate"},e[17]||(e[17]=[t("i",{class:"fa-solid fa-copy"},null,-1)]),8,ct),t("button",{onClick:x=>N(s),class:h(s.status==="active"?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"),title:s.status==="active"?"Nonaktifkan":"Aktifkan"},[t("i",{class:h(s.status==="active"?"fa-solid fa-ban":"fa-solid fa-check")},null,2)],10,xt),t("button",{onClick:x=>W(s),class:"text-red-600 hover:text-red-900",title:"Hapus"},e[18]||(e[18]=[t("i",{class:"fa-solid fa-trash"},null,-1)]),8,pt)])])])}),128))])])]),n.soals.data.length>0?(l(),r("div",mt,[t("div",ft,[n.soals.prev_page_url?(l(),r("button",{key:0,onClick:e[3]||(e[3]=s=>f(n.soals.current_page-1)),class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Previous ")):p("",!0),n.soals.next_page_url?(l(),r("button",{key:1,onClick:e[4]||(e[4]=s=>f(n.soals.current_page+1)),class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Next ")):p("",!0)]),t("div",gt,[t("div",null,[t("p",yt,[e[20]||(e[20]=u(" Menampilkan ")),t("span",bt,o(n.soals.from),1),e[21]||(e[21]=u(" sampai ")),t("span",ht,o(n.soals.to),1),e[22]||(e[22]=u(" dari ")),t("span",vt,o(n.soals.total),1),e[23]||(e[23]=u(" hasil "))])]),t("div",null,[t("nav",kt,[n.soals.prev_page_url?(l(),r("button",{key:0,onClick:e[5]||(e[5]=s=>f(n.soals.current_page-1)),class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},e[24]||(e[24]=[t("i",{class:"fa-solid fa-chevron-left"},null,-1)]))):p("",!0),(l(!0),r(B,null,$(T(),s=>(l(),r("button",{key:s,onClick:c=>f(s),class:h(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s===n.soals.current_page?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"])},o(s),11,wt))),128)),n.soals.next_page_url?(l(),r("button",{key:1,onClick:e[6]||(e[6]=s=>f(n.soals.current_page+1)),class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},e[25]||(e[25]=[t("i",{class:"fa-solid fa-chevron-right"},null,-1)]))):p("",!0)])])])])):p("",!0)])])])]),_:1}))}};export{Mt as default};
