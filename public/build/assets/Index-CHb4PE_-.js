const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/app-BSTQjgZq.js","assets/vendor-utils-CpgP2uT4.js","assets/vendor-vue-g7iCcTkf.js","assets/vendor-charts-CuqD4wLC.js","assets/app-DCFt-5I9.css"])))=>i.map(i=>d[i]);
import{_ as P}from"./app-BSTQjgZq.js";import{r as C,w as I,A as J,B as n,C as Q,D as t,L as s,E as r,G as p,H as m,J as B,F as h,M as w,N as l,I as D,l as k,W as g}from"./vendor-vue-g7iCcTkf.js";import{u as X,A as Z}from"./AppLayout-De2jf5tO.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./ProfileUpdateModal-vaJ7DgVJ.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const te={class:"w-full py-8 px-0"},oe={class:"flex flex-wrap gap-3 mb-4 items-center"},ae={class:"flex-1 min-w-64"},ne=["value"],se=["disabled"],le={key:0,class:"fa fa-download"},re={key:1,src:"/images/logo-icon.png",alt:"Loading",class:"w-4 h-4 animate-spin-fast"},ie={key:0,class:"bg-white border border-gray-200 rounded-2xl p-12 text-center"},de={key:1,class:"bg-blue-50 border border-blue-200 rounded-2xl p-8 text-center"},ue={key:2,class:"bg-white rounded-2xl shadow-2xl overflow-x-auto transition-all"},ce={class:"w-full min-w-full divide-y divide-gray-200"},pe={key:0},be=["rowspan"],fe=["rowspan"],xe={class:"text-blue-600 font-medium"},ge=["rowspan"],me=["rowspan"],ye={class:"text-sm font-medium text-gray-900"},he=["rowspan"],_e={key:0},ve={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},we={key:1},ke={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},Pe={key:2},Ce={class:"px-6 py-3"},Be={class:"font-medium text-gray-900"},De={key:0,class:"text-xs text-gray-500"},Te={class:"px-6 py-3"},Le={key:0,class:"space-y-1"},Me={class:"inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs"},Ae={key:0,class:"text-xs text-gray-600"},Se={key:1,class:"text-xs text-gray-600"},je={key:1,class:"text-gray-400"},Ee=["rowspan"],Fe={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},$e={class:"px-6 py-3 text-right"},Ie={class:"font-semibold text-gray-900"},Ne={key:0,class:"text-xs text-gray-500"},Oe=["rowspan"],Ve=["rowspan"],Re=["rowspan"],Ge={class:"flex gap-2"},He=["onClick"],Ue=["onClick"],Ye=["onClick"],qe=["onClick"],Ke=["onClick"],We={key:3,class:"flex justify-between items-center mt-4"},ze={class:"text-sm text-gray-600"},Je={class:"flex gap-2"},Qe=["disabled","onClick","innerHTML"],Xe={__name:"Index",props:{payments:Object,suppliers:Array,filters:Object,dataLoaded:{type:Boolean,default:!1}},setup(b){var A,S,j,E,F,$;const f=b,T=new Date().toISOString().split("T")[0],d=C({supplier:((A=f.filters)==null?void 0:A.supplier)||"",status:((S=f.filters)==null?void 0:S.status)||"",date_from:((j=f.filters)==null?void 0:j.date_from)||T,date_to:((E=f.filters)==null?void 0:E.date_to)||T,search:((F=f.filters)==null?void 0:F.search)||"",per_page:(($=f.filters)==null?void 0:$.per_page)||"10"}),y=C(f.dataLoaded||!1),x=C(!1),{showLoading:_,hideLoading:u}=X();I(()=>f.dataLoaded,a=>{y.value=a,x.value=!1},{immediate:!0}),I(()=>{var a,e;return(e=(a=f.payments)==null?void 0:a.data)==null?void 0:e.length},a=>{a&&a>0&&(y.value=!0,x.value=!1)},{immediate:!0});function N(a){return a?new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}function L(a){return a==null?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a)}function O(a,e=null){return a==="pending"&&e&&e.approved_finance_manager_by?"bg-orange-100 text-orange-800":{pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",paid:"bg-blue-100 text-blue-800",rejected:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"}[a]||"bg-gray-100 text-gray-800"}function V(a,e=null){return a==="pending"&&e&&e.approved_finance_manager_by?"Pending GM Finance":{pending:"Pending",approved:"Approved",paid:"Paid",rejected:"Rejected",cancelled:"Cancelled"}[a]||a}function R(a){return{cash:"bg-green-100 text-green-800",transfer:"bg-blue-100 text-blue-800",check:"bg-purple-100 text-purple-800"}[a]||"bg-gray-100 text-gray-800"}function G(a){return{cash:"Cash",transfer:"Transfer",check:"Check"}[a]||a}function H(a){a&&g.visit(a,{preserveState:!0,replace:!0})}function M(){x.value=!0,y.value=!0,_("Memuat Data Non Food Payment...","Mohon tunggu sebentar"),g.get("/non-food-payments",{...d.value,load_data:!0},{preserveState:!0,replace:!0,onFinish:()=>{x.value=!1,u()},onError:()=>{x.value=!1,u()}})}function U(){g.get("/non-food-payments/create")}function Y(a){a&&a.id&&g.get(`/non-food-payments/${a.id}`)}function q(a){a&&a.id&&g.get(`/non-food-payments/${a.id}/edit`)}function K(a){a&&a.id&&P(async()=>{const{default:e}=await import("./app-BSTQjgZq.js").then(o=>o.s);return{default:e}},__vite__mapDeps([0,1,2,3,4])).then(({default:e})=>{e.fire({title:"Hapus Payment?",text:"Data yang dihapus tidak dapat dikembalikan.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"}).then(o=>{o.isConfirmed&&(_("Menghapus Payment...","Mohon tunggu sebentar"),g.delete(`/non-food-payments/${a.id}`,{onSuccess:()=>{u(),e.fire("Berhasil","Payment berhasil dihapus!","success")},onError:()=>{u(),e.fire("Gagal","Gagal menghapus Payment","error")},onFinish:()=>{u()}}))})})}function W(a){a&&a.id&&P(async()=>{const{default:e}=await import("./app-BSTQjgZq.js").then(o=>o.s);return{default:e}},__vite__mapDeps([0,1,2,3,4])).then(({default:e})=>{e.fire({title:"Approve Payment?",text:"Apakah Anda yakin ingin menyetujui payment ini?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Approve!",cancelButtonText:"Batal"}).then(o=>{o.isConfirmed&&(_("Menyetujui Payment...","Mohon tunggu sebentar"),g.post(`/non-food-payments/${a.id}/approve`,{},{onSuccess:()=>{u(),e.fire("Berhasil","Payment berhasil disetujui!","success")},onError:()=>{u(),e.fire("Gagal","Gagal menyetujui Payment","error")},onFinish:()=>{u()}}))})})}function z(a){a&&a.id&&P(async()=>{const{default:e}=await import("./app-BSTQjgZq.js").then(o=>o.s);return{default:e}},__vite__mapDeps([0,1,2,3,4])).then(({default:e})=>{e.fire({title:"Tandai sebagai Dibayar?",text:"Apakah Anda yakin payment ini sudah dibayar?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Tandai!",cancelButtonText:"Batal"}).then(o=>{o.isConfirmed&&(_("Menandai Payment sebagai Dibayar...","Mohon tunggu sebentar"),g.post(`/non-food-payments/${a.id}/mark-as-paid`,{},{onSuccess:()=>{u(),e.fire("Berhasil","Payment berhasil ditandai sebagai dibayar!","success")},onError:()=>{u(),e.fire("Gagal","Gagal menandai Payment sebagai dibayar","error")},onFinish:()=>{u()}}))})})}return(a,e)=>(n(),J(Z,null,{default:Q(()=>[t("div",te,[t("div",{class:"flex justify-between items-center mb-6"},[e[6]||(e[6]=t("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[t("i",{class:"fa-solid fa-credit-card"}),p(" Non Food Payments ")],-1)),t("div",{class:"flex gap-2 items-center"},[t("button",{onClick:U,class:"bg-gradient-to-r from-green-500 to-green-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"}," + Buat Payment ")])]),t("div",oe,[t("div",ae,[m(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>d.value.search=o),placeholder:"Cari payment number, supplier, creator, PO/PR number...",class:"w-full px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},null,512),[[B,d.value.search]])]),m(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>d.value.supplier=o),class:"px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},[e[7]||(e[7]=t("option",{value:""},"Semua Supplier",-1)),(n(!0),s(h,null,w(b.suppliers,o=>(n(),s("option",{key:o.id,value:o.id},l(o.name),9,ne))),128))],512),[[D,d.value.supplier]]),m(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>d.value.status=o),class:"px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},e[8]||(e[8]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"pending_finance_manager"},"Pending GM Finance",-1),t("option",{value:"approved"},"Approved",-1),t("option",{value:"paid"},"Paid",-1),t("option",{value:"rejected"},"Rejected",-1),t("option",{value:"cancelled"},"Cancelled",-1)]),512),[[D,d.value.status]]),m(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=o=>d.value.date_from=o),class:"px-2 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",placeholder:"Dari Tanggal",title:"Dari Tanggal"},null,512),[[B,d.value.date_from]]),m(t("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=o=>d.value.date_to=o),class:"px-2 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",placeholder:"Sampai Tanggal",title:"Sampai Tanggal"},null,512),[[B,d.value.date_to]]),t("button",{onClick:M,disabled:x.value,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-6 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[x.value?(n(),s("img",re)):(n(),s("i",le)),p(" "+l(x.value?"Loading...":"Load Data"),1)],8,se),m(t("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>d.value.per_page=o),class:"px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},e[9]||(e[9]=[t("option",{value:"10"},"10 per halaman",-1),t("option",{value:"25"},"25 per halaman",-1),t("option",{value:"50"},"50 per halaman",-1),t("option",{value:"100"},"100 per halaman",-1)]),512),[[D,d.value.per_page]])]),x.value?(n(),s("div",ie,e[10]||(e[10]=[t("div",{class:"flex flex-col items-center justify-center"},[t("img",{src:"/images/logo-icon.png",alt:"Loading",class:"w-16 h-16 animate-spin mb-4"}),t("p",{class:"text-gray-700 text-lg font-semibold"},"Memuat Data..."),t("p",{class:"text-gray-500 text-sm mt-2"},"Mohon tunggu sebentar")],-1)]))):y.value?(n(),s("div",ue,[t("table",ce,[e[26]||(e[26]=t("thead",{class:"bg-gradient-to-r from-blue-100 to-blue-200"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider rounded-tl-2xl"},"No. Payment"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Tanggal Payment"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Supplier"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"COA"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"No. PO/PR"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Outlet"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Kategori"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Creator"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Amount"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Payment Method"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider rounded-tr-2xl"},"Aksi")])],-1)),t("tbody",null,[!b.payments.data||!b.payments.data.length?(n(),s("tr",pe,e[15]||(e[15]=[t("td",{colspan:"12",class:"text-center py-10 text-gray-400"},"Belum ada data Non Food Payment.",-1)]))):r("",!0),(n(!0),s(h,null,w(b.payments.data,o=>(n(),s(h,{key:o.id},[(n(!0),s(h,null,w(o.outlet_breakdown||[],(i,c)=>(n(),s("tr",{key:`${o.id}-${(i==null?void 0:i.outlet_id)||c}`,class:k(["hover:bg-blue-50 transition shadow-sm",{"border-t-2 border-blue-200":c>0}])},[c===0?(n(),s("td",{key:0,class:"px-6 py-3 font-mono font-semibold text-blue-700",rowspan:(o.outlet_breakdown||[]).length},l(o.payment_number),9,be)):r("",!0),c===0?(n(),s("td",{key:1,class:"px-6 py-3",rowspan:(o.outlet_breakdown||[]).length},[t("span",xe,l(N(o.payment_date)),1),e[16]||(e[16]=t("div",{class:"text-xs text-gray-500"},"Payment Date",-1))],8,fe)):r("",!0),c===0?(n(),s("td",{key:2,class:"px-6 py-3",rowspan:(o.outlet_breakdown||[]).length},l(o.supplier_name||"-"),9,ge)):r("",!0),c===0?(n(),s("td",{key:3,class:"px-6 py-3",rowspan:(o.outlet_breakdown||[]).length},[t("div",ye,l(o.coa_code?o.coa_code+" - "+(o.coa_name||""):"-"),1)],8,me)):r("",!0),c===0?(n(),s("td",{key:4,class:"px-6 py-3",rowspan:(o.outlet_breakdown||[]).length},[o.payment_type==="PO"?(n(),s("div",_e,[t("span",ve,[e[17]||(e[17]=t("i",{class:"fa fa-file-invoice mr-1"},null,-1)),p(" "+l(o.po_number||"-"),1)])])):o.payment_type==="PR"?(n(),s("div",we,[t("span",ke,[e[18]||(e[18]=t("i",{class:"fa fa-clipboard-list mr-1"},null,-1)),p(" "+l(o.pr_number||"-"),1)])])):(n(),s("div",Pe,e[19]||(e[19]=[t("span",{class:"text-gray-400"},"-",-1)])))],8,he)):r("",!0),t("td",Ce,[t("div",Be,l(i.outlet_name||"-"),1),i.pr_number?(n(),s("div",De,"PR: "+l(i.pr_number),1)):r("",!0)]),t("td",Te,[i.category_name?(n(),s("div",Le,[t("span",Me,l(i.category_name),1),i.category_division?(n(),s("div",Ae,l(i.category_division),1)):r("",!0),i.category_subcategory?(n(),s("div",Se,l(i.category_subcategory),1)):r("",!0)])):(n(),s("div",je,"-"))]),c===0?(n(),s("td",{key:5,class:"px-6 py-3",rowspan:(o.outlet_breakdown||[]).length},[t("span",Fe,[e[20]||(e[20]=t("i",{class:"fa fa-user mr-1"},null,-1)),p(" "+l(o.creator_name||"-"),1)])],8,Ee)):r("",!0),t("td",$e,[t("div",Ie,l(L(i.outlet_total)),1),(o.outlet_breakdown||[]).length>1?(n(),s("div",Ne," dari "+l(L(o.amount)),1)):r("",!0)]),c===0?(n(),s("td",{key:6,class:"px-6 py-3",rowspan:(o.outlet_breakdown||[]).length},[t("span",{class:k([R(o.payment_method),"px-2 py-1 rounded-full text-xs font-semibold shadow"])},l(G(o.payment_method)),3)],8,Oe)):r("",!0),c===0?(n(),s("td",{key:7,class:"px-6 py-3",rowspan:(o.outlet_breakdown||[]).length},[t("span",{class:k([O(o.status,o),"px-2 py-1 rounded-full text-xs font-semibold shadow"])},l(V(o.status,o)),3)],8,Ve)):r("",!0),c===0?(n(),s("td",{key:8,class:"px-6 py-3",rowspan:(o.outlet_breakdown||[]).length},[t("div",Ge,[t("button",{onClick:v=>Y(o),class:"inline-flex items-center btn btn-xs bg-blue-100 text-blue-800 hover:bg-blue-200 rounded px-2 py-1 font-semibold transition"},e[21]||(e[21]=[t("i",{class:"fa fa-eye mr-1"},null,-1),p(" Detail ")]),8,He),o.status==="pending"?(n(),s("button",{key:0,onClick:v=>q(o),class:"inline-flex items-center btn btn-xs bg-yellow-100 text-yellow-800 hover:bg-yellow-200 rounded px-2 py-1 font-semibold transition"},e[22]||(e[22]=[t("i",{class:"fa fa-pencil-alt mr-1"},null,-1),p(" Edit ")]),8,Ue)):r("",!0),o.status==="pending"?(n(),s("button",{key:1,onClick:v=>K(o),class:"inline-flex items-center btn btn-xs bg-red-100 text-red-700 hover:bg-red-200 rounded px-2 py-1 font-semibold transition"},e[23]||(e[23]=[t("i",{class:"fa fa-trash mr-1"},null,-1),p(" Hapus ")]),8,Ye)):r("",!0),o.status==="pending"?(n(),s("button",{key:2,onClick:v=>W(o),class:"inline-flex items-center btn btn-xs bg-green-100 text-green-800 hover:bg-green-200 rounded px-2 py-1 font-semibold transition"},e[24]||(e[24]=[t("i",{class:"fa fa-check mr-1"},null,-1),p(" Approve ")]),8,qe)):r("",!0),o.status==="approved"?(n(),s("button",{key:3,onClick:v=>z(o),class:"inline-flex items-center btn btn-xs bg-blue-100 text-blue-800 hover:bg-blue-200 rounded px-2 py-1 font-semibold transition"},e[25]||(e[25]=[t("i",{class:"fa fa-money-bill-wave mr-1"},null,-1),p(" Paid ")]),8,Ke)):r("",!0)])],8,Re)):r("",!0)],2))),128))],64))),128))])])])):(n(),s("div",de,[e[12]||(e[12]=t("i",{class:"fa fa-info-circle text-blue-500 text-4xl mb-4"},null,-1)),e[13]||(e[13]=t("p",{class:"text-gray-700 text-lg font-semibold mb-2"},"Data Belum Dimuat",-1)),e[14]||(e[14]=t("p",{class:"text-gray-600 mb-4"},'Klik tombol "Load Data" untuk memuat data Non Food Payment',-1)),t("button",{onClick:M,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-6 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"},e[11]||(e[11]=[t("i",{class:"fa fa-download mr-2"},null,-1),p(" Load Data ")]))])),y.value?(n(),s("div",We,[t("div",ze," Menampilkan "+l(b.payments.from||0)+" - "+l(b.payments.to||0)+" dari "+l(b.payments.total||0)+" data ",1),t("div",Je,[(n(!0),s(h,null,w(b.payments.links,o=>(n(),s("button",{key:o.label,disabled:!o.url,onClick:i=>H(o.url),innerHTML:o.label,class:k(["px-3 py-1 rounded-lg border text-sm font-semibold",[o.active?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-700 hover:bg-blue-50",o.url?"cursor-pointer":"opacity-50 cursor-not-allowed"]])},null,10,Qe))),128))])])):r("",!0)])]),_:1}))}},dt=ee(Xe,[["__scopeId","data-v-0e7f8e95"]]);export{dt as default};
