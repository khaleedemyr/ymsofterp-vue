import{a4 as J,r as p,w as ie,W as ae,A as Re,B as n,C as Ge,D as t,x as Y,L as i,E as U,G as x,H as K,J as Ke,F as O,M,N as y,I as ue,l as X,Q as Ve,Y as Ne,V as Q}from"./vendor-vue-g7iCcTkf.js";import{A as He}from"./AppLayout-BdiuRSin.js";import{S as b}from"./app-xIQ7JztA.js";import ze from"./ItemFormModal-B6oqHXll.js";import qe from"./ModalDetailItem-DRu4qcTo.js";import We from"./EditItemModal-DOjG76aB.js";import{N as Ye}from"./vue-easy-lightbox.esm.min-H9agbAmC.js";import{a as E}from"./vendor-utils-CpgP2uT4.js";import Xe from"./ItemBarcodeModal-D0e6q81w.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-LiNpoaCg.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";import"./vue-multiselect.esm-V-bx43V9.js";/* empty css                            */import"./Modal-BBL5yay4.js";import"./SecondaryButton-DMNVinm_.js";import"./SmallPrintPreview-D5SLHx1-.js";import"./JsBarcode-7kUKaxTf.js";import"./jspdf.es.min-BSj55_LI.js";var Z={exports:{}},Je=Z.exports,de;function Qe(){return de||(de=1,function(g,z){(function(A,P){P()})(Je,function(){function A(d,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function P(d,c,T){var m=new XMLHttpRequest;m.open("GET",d),m.responseType="blob",m.onload=function(){L(m.response,c,T)},m.onerror=function(){console.error("could not download file")},m.send()}function $(d){var c=new XMLHttpRequest;c.open("HEAD",d,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function D(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(c)}}var k=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof J=="object"&&J.global===J?J:void 0,V=k.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),L=k.saveAs||(typeof window!="object"||window!==k?function(){}:"download"in HTMLAnchorElement.prototype&&!V?function(d,c,T){var m=k.URL||k.webkitURL,I=document.createElement("a");c=c||d.name||"download",I.download=c,I.rel="noopener",typeof d=="string"?(I.href=d,I.origin===location.origin?D(I):$(I.href)?P(d,c,T):D(I,I.target="_blank")):(I.href=m.createObjectURL(d),setTimeout(function(){m.revokeObjectURL(I.href)},4e4),setTimeout(function(){D(I)},0))}:"msSaveOrOpenBlob"in navigator?function(d,c,T){if(c=c||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(A(d,T),c);else if($(d))P(d,c,T);else{var m=document.createElement("a");m.href=d,m.target="_blank",setTimeout(function(){D(m)})}}:function(d,c,T,m){if(m=m||open("","_blank"),m&&(m.document.title=m.document.body.innerText="downloading..."),typeof d=="string")return P(d,c,T);var I=d.type==="application/octet-stream",N=/constructor/i.test(k.HTMLElement)||k.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||I&&N||V)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var h=_.result;h=j?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),m?m.location.href=h:location=h,m=null},_.readAsDataURL(d)}else{var F=k.URL||k.webkitURL,C=F.createObjectURL(d);m?m.location=C:location.href=C,m=null,setTimeout(function(){F.revokeObjectURL(C)},4e4)}});k.saveAs=L.saveAs=L,g.exports=L})}(Z)),Z.exports}var Ze=Qe();const et={class:"max-w-7xl w-full mx-auto py-8 px-2"},tt={class:"bg-white rounded-xl shadow-lg p-4 mb-6"},ot={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},st=["value"],at={class:"relative inline-block text-left mb-4 export-dropdown"},lt={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10"},rt={class:"py-1"},nt={class:"relative inline-block text-left mb-4 import-dropdown"},it={key:0,class:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10"},ut={class:"py-1"},dt={class:"bg-white rounded-xl shadow-lg overflow-hidden"},ct={class:"min-w-full divide-y divide-gray-200"},pt={class:"bg-white divide-y divide-gray-200"},gt={key:0},mt={class:"px-6 py-4 whitespace-nowrap"},ft={class:"flex items-center"},vt={class:"flex-shrink-0 h-10 w-10"},xt=["src","onClick"],yt={key:1,class:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center"},bt={class:"ml-4"},ht={class:"text-sm font-medium text-gray-900"},wt={class:"text-sm text-gray-500"},kt={class:"px-6 py-4 whitespace-nowrap"},It={class:"text-sm text-gray-900"},Ct={class:"text-sm text-gray-500"},Bt={class:"px-6 py-4 whitespace-nowrap"},Tt={class:"text-sm text-gray-900"},Ut={class:"px-6 py-4 whitespace-nowrap"},Ot={class:"px-6 py-4 whitespace-nowrap"},Mt={class:"inline-flex items-center cursor-pointer"},Pt=["checked","onChange"],St={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Et={class:"flex justify-end gap-2"},Dt=["onClick"],Ft=["onClick"],At=["onClick"],$t={class:"flex justify-end mt-4 gap-2"},Lt=["disabled","onClick","innerHTML"],jt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},_t={class:"bg-white rounded-xl shadow-2xl w-full max-w-4xl p-6 relative max-h-[90vh] overflow-y-auto"},Rt={class:"text-xl font-bold mb-4 flex items-center gap-2"},Gt={key:0,class:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg"},Kt={key:1},Vt={class:"overflow-x-auto"},Nt={class:"min-w-full divide-y divide-gray-200 mb-4"},Ht={class:"bg-gray-50"},zt={key:0,class:"mb-4"},qt={class:"w-full bg-gray-200 rounded-full h-4 mb-2"},Wt={class:"text-xs text-gray-700"},Yt={key:1},Xt={class:"max-h-48 overflow-y-auto"},Jt={class:"min-w-full divide-y divide-gray-200"},Qt={class:"px-3 py-1 text-xs"},Zt={class:"px-3 py-1 text-xs"},eo={class:"px-3 py-1 text-xs"},to={class:"flex justify-end gap-2 mt-4"},oo={key:2,class:"text-gray-500"},so={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},ao={class:"bg-white rounded-xl shadow-2xl w-full max-w-2xl p-6 max-h-[90vh] overflow-y-auto"},lo={class:"space-y-4"},ro={class:"border border-gray-300 rounded-lg p-2 max-h-40 overflow-y-auto"},no=["value"],io={class:"border border-gray-300 rounded-lg p-2 max-h-40 overflow-y-auto"},uo=["value"],co={class:"block text-sm font-medium text-gray-700 mb-1"},po={key:0,class:"text-blue-500 text-xs ml-2"},go={class:"border border-gray-300 rounded-lg p-2 max-h-40 overflow-y-auto"},mo={key:0,class:"text-gray-500 text-sm p-2"},fo=["value"],vo={class:"block text-sm font-medium text-gray-700 mb-1"},xo={key:0,class:"text-blue-500 text-xs ml-2"},yo={class:"border border-gray-300 rounded-lg p-2 max-h-40 overflow-y-auto"},bo={key:0,class:"text-gray-500 text-sm p-2"},ho=["value"],Vo={__name:"Index",props:{items:Object,categories:Array,subCategories:Array,units:Array,warehouseDivisions:Array,menuTypes:Array,regions:Array,outlets:Array,bomItems:Array,modifiers:Array,errors:Object,auth:Object},setup(g){const z=p(""),A=p(""),P=p(""),$=p(!1),D=p(!1),k=p(null),V=p(!1),L=p({}),d=p(!1),c=p(null),T=p(!1),m=p([]),I=p(0),N=p(!1),j=p(!1),_=p(null),F=p(!1),C=p({header:[],preview:[]}),h=p(null),w=p(!1),B=p(0),v=p([]),ee=p(null),te=p(null),S=p(""),oe=p(!1),r=p({regionIds:[],outletIds:[],categoryIds:[],subCategoryIds:[]}),R=p([]),G=p([]),H=p(!1);function ce(a){a&&ae.visit(a,{preserveState:!0,replace:!0})}function pe(){k.value=null,$.value=!0}function ge(a){E.get(`/api/items/${a.id}`).then(e=>{c.value=e.data.item,d.value=!0,console.log("API DATA",e.data)})}async function me(a){L.value={...a},V.value=!0}function fe(){$.value=!1,q()}function q(){ae.reload({preserveState:!0,replace:!0})}const le=a=>{if(!a||!a.path)return null;try{return`/storage/${a.path}`}catch(e){return console.error("Error processing image:",e),null}},ve=async a=>{const e=a.status==="active"?"inactive":"active";(await b.fire({title:"Ubah status item?",text:`Yakin ingin mengubah status item "${a.name}" menjadi ${e}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Ubah!",cancelButtonText:"Batal"})).isConfirmed&&(await window.axios.post(route("items.toggleStatus",a.id),{status:e}),q())};function xe(a){!a.images||a.images.length===0||(m.value=a.images.map(e=>`/storage/${e.path}`),I.value=0,T.value=!0)}function ye(a){a.target.closest(".export-dropdown")||(N.value=!1)}function be(a){a.target.closest(".import-dropdown")||(j.value=!1)}typeof window<"u"&&(window.addEventListener("click",ye),window.addEventListener("click",be));function he(){window.location.href=route("items.import.template")}function we(){window.location.href=route("items.bom.import.template")}function ke(){oe.value=!0}function se(){oe.value=!1,r.value={regionIds:[],outletIds:[],categoryIds:[],subCategoryIds:[]},R.value=[],G.value=[]}async function Ie(){if(r.value.regionIds.length===0&&r.value.outletIds.length===0){R.value=[],G.value=[];return}H.value=!0;try{const a=new URLSearchParams;let e="all";r.value.regionIds.length>0&&r.value.outletIds.length>0?e="all":r.value.regionIds.length>0?e="region":r.value.outletIds.length>0&&(e="outlet"),a.append("price_type",e),r.value.regionIds.length>0&&r.value.regionIds.forEach(s=>{a.append("region_ids[]",s)}),r.value.outletIds.length>0&&r.value.outletIds.forEach(s=>{a.append("outlet_ids[]",s)});const o=await E.get(`/api/items/categories-by-region-outlet?${a.toString()}`);R.value=o.data.categories||[],G.value=o.data.sub_categories||[],r.value.categoryIds=r.value.categoryIds.filter(s=>R.value.some(l=>l.id===s)),r.value.subCategoryIds=r.value.subCategoryIds.filter(s=>G.value.some(l=>l.id===s))}catch(a){console.error("Error fetching categories:",a),R.value=[],G.value=[]}finally{H.value=!1}}ie([()=>r.value.regionIds,()=>r.value.outletIds],()=>{Ie()},{deep:!0});function Ce(){const a=new URLSearchParams;let e="all";r.value.regionIds.length>0&&r.value.outletIds.length>0?e="all":r.value.regionIds.length>0?e="region":r.value.outletIds.length>0&&(e="outlet"),a.append("price_type",e),r.value.regionIds&&r.value.regionIds.length>0&&r.value.regionIds.forEach(s=>{a.append("region_id[]",s)}),r.value.outletIds&&r.value.outletIds.length>0&&r.value.outletIds.forEach(s=>{a.append("outlet_id[]",s)}),r.value.categoryIds&&r.value.categoryIds.length>0&&r.value.categoryIds.forEach(s=>{a.append("category_id[]",s)}),r.value.subCategoryIds&&r.value.subCategoryIds.length>0&&r.value.subCategoryIds.forEach(s=>{a.append("sub_category_id[]",s)});const o=route("items.price-update.template")+(a.toString()?"?"+a.toString():"");window.location.href=o,se()}function Be(){_.value&&_.value.click()}function Te(){ee.value&&ee.value.click()}function Ue(){te.value&&te.value.click()}async function Oe(a){var o,s;const e=a.target.files[0];if(e){h.value=e,S.value="items",C.value={header:[],preview:[]},v.value=[],B.value=0,w.value=!1;const l=new FormData;l.append("file",e);try{const u=await E.post(route("items.import.preview"),l,{headers:{"Content-Type":"multipart/form-data"}});if(u.data.error){b.fire("Error",u.data.message||"Gagal membaca file","error");return}C.value=u.data,F.value=!0}catch(u){console.error("Preview error:",u);const f=((s=(o=u.response)==null?void 0:o.data)==null?void 0:s.message)||u.message||"Gagal membaca file";b.fire("Error",f,"error")}}}async function Me(a){var o,s;const e=a.target.files[0];if(e){console.log("BOM file selected:",e.name,e.size,e.type),h.value=e,S.value="bom",C.value={header:[],preview:[]},v.value=[],B.value=0,w.value=!1;const l=new FormData;l.append("file",e);try{console.log("Sending BOM preview request...");const u=await E.post(route("items.bom.import.preview"),l,{headers:{"Content-Type":"multipart/form-data"}});console.log("BOM preview response:",u.data),C.value=u.data,F.value=!0}catch(u){console.error("BOM preview error:",u),console.error("BOM preview error response:",u.response),b.fire("Error","Gagal membaca file: "+(((s=(o=u.response)==null?void 0:o.data)==null?void 0:s.message)||u.message),"error")}}}async function Pe(a){var o,s;const e=a.target.files[0];if(e){console.log("Price Update file selected:",e.name,e.size,e.type),h.value=e,S.value="price-update",C.value={header:[],preview:[]},v.value=[],B.value=0,w.value=!1;const l=new FormData;l.append("file",e);try{console.log("Sending Price Update preview request...");const u=await E.post(route("items.price-update.preview"),l,{headers:{"Content-Type":"multipart/form-data"}});console.log("Price Update preview response:",u.data),C.value=u.data,F.value=!0}catch(u){console.error("Price Update preview error:",u),console.error("Price Update preview error response:",u.response),b.fire("Error","Gagal membaca file: "+(((s=(o=u.response)==null?void 0:o.data)==null?void 0:s.message)||u.message),"error")}}}async function Se(){var e,o;if(console.log("IMPORT UPLOAD CLICKED"),!h.value)return;w.value=!0,B.value=0,v.value=[];const a=new FormData;a.append("file",h.value);try{const s=await E.post(route("items.import.excel"),a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:f=>{f.total&&(B.value=Math.round(f.loaded*100/f.total))}});if(s.data.error){w.value=!1,b.fire({title:"Import Gagal",text:s.data.message||"Gagal import file",icon:"error",confirmButtonText:"OK"});return}v.value=s.data.results||[],w.value=!1,B.value=100;const l=v.value.filter(f=>f.status==="success").length,u=v.value.length;l===u&&u>0?b.fire({title:"Import Berhasil",text:`Berhasil mengimport ${l} data items`,icon:"success",confirmButtonText:"OK"}).then(()=>{q()}):b.fire({title:"Import Selesai",text:`Berhasil: ${l}, Gagal: ${u-l}`,icon:"warning",confirmButtonText:"OK"})}catch(s){w.value=!1,console.error("Import error:",s);let l="Gagal import file";(o=(e=s.response)==null?void 0:e.data)!=null&&o.message?l=s.response.data.message:s.message&&(l=s.message),b.fire({title:"Import Gagal",text:l,icon:"error",confirmButtonText:"OK"}),v.value=[{row:0,name:"Error",status:"error",message:l}]}}async function Ee(){var e,o;if(console.log("BOM IMPORT UPLOAD CLICKED"),!h.value)return;console.log("Import file:",h.value.name,h.value.size),w.value=!0,B.value=0,v.value=[];const a=new FormData;a.append("file",h.value);try{console.log("Sending BOM import request...");const s=await E.post(route("items.bom.import.excel"),a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:f=>{f.total&&(B.value=Math.round(f.loaded*100/f.total))}});if(console.log("BOM Import response:",s),s.data.error){w.value=!1,b.fire({title:"Import Gagal",text:s.data.message||"Gagal import BOM",icon:"error",confirmButtonText:"OK"});return}v.value=s.data.results||[],w.value=!1,B.value=100;const l=v.value.filter(f=>f.status==="success").length,u=v.value.length;l===u&&u>0?b.fire({title:"Import Berhasil",text:`Berhasil mengimport ${l} data BOM`,icon:"success",confirmButtonText:"OK"}).then(()=>{q()}):b.fire({title:"Import Selesai",text:`Berhasil: ${l}, Gagal: ${u-l}`,icon:"warning",confirmButtonText:"OK"})}catch(s){w.value=!1,console.error("BOM Import error:",s),console.error("BOM Import error response:",s.response);let l="Gagal import BOM";(o=(e=s.response)==null?void 0:e.data)!=null&&o.message?l=s.response.data.message:s.message&&(l=s.message),b.fire({title:"Import Gagal",text:l,icon:"error",confirmButtonText:"OK"}),v.value=[{row:0,name:"Error",status:"error",message:l}]}}function re(){F.value=!1,h.value=null,S.value="",C.value={header:[],preview:[]},v.value=[],B.value=0,w.value=!1}function De(){S.value==="bom"?Ee():S.value==="price-update"?Fe():Se()}function ne(){return S.value==="bom"?"BOM":S.value==="price-update"?"Price Update":"Items"}async function Fe(){var e,o;if(console.log("PRICE UPDATE IMPORT UPLOAD CLICKED"),!h.value)return;console.log("Import file:",h.value.name,h.value.size),w.value=!0,B.value=0,v.value=[];const a=new FormData;a.append("file",h.value);try{console.log("Sending Price Update import request...");const s=await E.post(route("items.price-update.import"),a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:f=>{f.total&&(B.value=Math.round(f.loaded*100/f.total))}});if(console.log("Price Update Import response:",s),s.data.error){w.value=!1,b.fire({title:"Import Gagal",text:s.data.message||"Gagal import Price Update",icon:"error",confirmButtonText:"OK"});return}v.value=s.data.results||[],w.value=!1,B.value=100;const l=v.value.filter(f=>f.status==="success").length,u=v.value.length;if(l===u&&u>0)b.fire({title:"Import Berhasil",text:`Berhasil mengupdate ${l} harga item`,icon:"success",confirmButtonText:"OK"}).then(()=>{q()});else{const f=v.value.filter(W=>W.status==="success"&&W.message==="Successfully updated").length,_e=v.value.filter(W=>W.status==="success"&&W.message.includes("Skipped")).length;b.fire({title:"Import Selesai",text:`Berhasil: ${l} (${f} diupdate, ${_e} dilewati), Gagal: ${u-l}`,icon:"warning",confirmButtonText:"OK"})}}catch(s){w.value=!1,console.error("Price Update Import error:",s),console.error("Price Update Import error response:",s.response);let l="Gagal import Price Update";(o=(e=s.response)==null?void 0:e.data)!=null&&o.message?l=s.response.data.message:s.message&&(l=s.message),b.fire({title:"Import Gagal",text:l,icon:"error",confirmButtonText:"OK"}),v.value=[{row:0,name:"Error",status:"error",message:l}]}}ie([z,A,P],()=>{ae.get(route("items.index"),{search:z.value,category:A.value,status:P.value},{preserveState:!0,replace:!0,only:["items"]})});async function Ae(a){b.fire({title:"Exporting...",text:"Please wait while the file is being generated.",allowOutsideClick:!1,didOpen:()=>{b.showLoading()}});try{const e=a==="excel"?route("items.export.excel"):route("items.export.pdf"),o=await E.get(e,{responseType:"blob"}),s=a==="excel"?"items.xlsx":"items.pdf";Ze.saveAs(o.data,s),b.close()}catch{b.fire("Error","Failed to export file.","error")}}const $e=a=>{k.value=a,D.value=!0},Le=()=>{D.value=!1,k.value=null},je=()=>{$.value=!1,k.value=null};return(a,e)=>(n(),Re(He,null,{default:Ge(()=>[t("div",et,[t("div",{class:"flex justify-between items-center mb-6"},[e[16]||(e[16]=t("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[t("i",{class:"fa-solid fa-boxes-stacked text-blue-500"}),x(" Items ")],-1)),t("button",{onClick:pe,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2"},e[15]||(e[15]=[t("i",{class:"fa-solid fa-plus"},null,-1),x(" Add New Item ")]))]),t("div",tt,[t("div",ot,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),K(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>z.value=o),placeholder:"Search by name or SKU...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[Ke,z.value]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),K(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>A.value=o),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[e[18]||(e[18]=t("option",{value:""},"All Categories",-1)),(n(!0),i(O,null,M(g.categories,o=>(n(),i("option",{key:o.id,value:o.id},y(o.name),9,st))),128))],512),[[ue,A.value]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),K(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>P.value=o),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},e[20]||(e[20]=[t("option",{value:""},"All Status",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"inactive"},"Inactive",-1)]),512),[[ue,P.value]])])])]),t("div",at,[t("button",{onClick:e[3]||(e[3]=o=>N.value=!N.value),class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2"},e[22]||(e[22]=[t("i",{class:"fa-solid fa-file-export"},null,-1),x(" Export "),t("i",{class:"fa-solid fa-chevron-down ml-2"},null,-1)])),N.value?(n(),i("div",lt,[t("div",rt,[t("button",{onClick:e[4]||(e[4]=o=>Ae("excel")),class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},e[23]||(e[23]=[t("i",{class:"fa-solid fa-file-excel text-green-600 mr-2"},null,-1),x(" Export to Excel ")]))])])):U("",!0)]),t("div",nt,[t("button",{onClick:e[5]||(e[5]=o=>j.value=!j.value),class:"bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg flex items-center gap-2"},e[24]||(e[24]=[t("i",{class:"fa-solid fa-file-import"},null,-1),x(" Import "),t("i",{class:"fa-solid fa-chevron-down ml-2"},null,-1)])),j.value?(n(),i("div",it,[t("div",ut,[t("button",{onClick:he,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},e[25]||(e[25]=[t("i",{class:"fa-solid fa-download text-blue-600 mr-2"},null,-1),x(" Download Template Import ")])),t("button",{onClick:we,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},e[26]||(e[26]=[t("i",{class:"fa-solid fa-download text-blue-600 mr-2"},null,-1),x(" Download BOM Template ")])),t("button",{onClick:ke,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},e[27]||(e[27]=[t("i",{class:"fa-solid fa-download text-blue-600 mr-2"},null,-1),x(" Download Price Update Template ")])),e[31]||(e[31]=t("div",{class:"px-4 py-2 text-xs text-gray-500 italic"},' * Kosongkan kolom "New Price" untuk item yang tidak perlu diupdate ',-1)),t("button",{onClick:Be,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},e[28]||(e[28]=[t("i",{class:"fa-solid fa-upload text-green-600 mr-2"},null,-1),x(" Import File ")])),t("button",{onClick:Te,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},e[29]||(e[29]=[t("i",{class:"fa-solid fa-upload text-green-600 mr-2"},null,-1),x(" Import BOM ")])),t("button",{onClick:Ue,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},e[30]||(e[30]=[t("i",{class:"fa-solid fa-upload text-green-600 mr-2"},null,-1),x(" Import Price Update ")])),t("input",{type:"file",ref_key:"importFileInput",ref:_,class:"hidden",onChange:Oe,accept:".xlsx,.xls"},null,544),t("input",{type:"file",ref_key:"bomImportFileInput",ref:ee,class:"hidden",onChange:Me,accept:".xlsx,.xls"},null,544),t("input",{type:"file",ref_key:"priceUpdateFileInput",ref:te,class:"hidden",onChange:Pe,accept:".xlsx,.xls"},null,544)])])):U("",!0)]),t("div",dt,[t("table",ct,[e[38]||(e[38]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Item "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Category "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," SKU "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",pt,[g.items.data.length===0?(n(),i("tr",gt,e[32]||(e[32]=[t("td",{colspan:"6",class:"text-center py-10 text-gray-400"},"Tidak ada data item.",-1)]))):U("",!0),(n(!0),i(O,null,M(g.items.data,o=>{var s,l,u;return n(),i("tr",{key:o.id,class:"hover:bg-gray-50"},[t("td",mt,[t("div",ft,[t("div",vt,[o.images&&o.images.length>0&&le(o.images[0])?(n(),i("img",{key:0,src:le(o.images[0]),class:"h-10 w-10 rounded-full object-cover cursor-pointer",onClick:f=>xe(o),onError:e[6]||(e[6]=f=>f.target.style.display="none")},null,40,xt)):(n(),i("div",yt,e[33]||(e[33]=[t("i",{class:"fa-solid fa-box text-gray-400"},null,-1)])))]),t("div",bt,[t("div",ht,y(o.name),1),t("div",wt,y((s=o.warehouse_division)==null?void 0:s.name),1)])])]),t("td",kt,[t("div",It,y((l=o.category)==null?void 0:l.name),1),t("div",Ct,y((u=o.sub_category)==null?void 0:u.name),1)]),t("td",Bt,[t("div",Tt,y(o.sku),1)]),t("td",Ut,[t("span",{class:X([o.type==="product"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800","px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},y(o.type),3)]),t("td",Ot,[t("label",Mt,[t("input",{type:"checkbox",checked:o.status==="active",onChange:f=>ve(o),class:"sr-only peer"},null,40,Pt),e[34]||(e[34]=t("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:bg-green-500 transition"},null,-1)),t("span",{class:X(["ml-2 text-xs font-bold",o.status==="active"?"text-green-700":"text-red-700"])},y(o.status),3)])]),t("td",St,[t("div",Et,[t("button",{onClick:f=>me(o),class:"text-gray-600 hover:text-indigo-700",title:"Detail"},e[35]||(e[35]=[t("i",{class:"fa-solid fa-eye"},null,-1)]),8,Dt),t("button",{onClick:f=>$e(o),class:"text-indigo-600 hover:text-indigo-900 mr-3 flex items-center gap-1",title:"Kelola Barcode"},e[36]||(e[36]=[t("i",{class:"fa-solid fa-barcode"},null,-1)]),8,Ft),t("button",{onClick:f=>ge(o),class:"text-blue-600 hover:text-blue-900"},e[37]||(e[37]=[t("i",{class:"fa-solid fa-pen-to-square"},null,-1)]),8,At)])])])}),128))])])]),t("div",$t,[(n(!0),i(O,null,M(g.items.links,o=>(n(),i("button",{key:o.label,disabled:!o.url,onClick:s=>ce(o.url),innerHTML:o.label,class:X(["px-3 py-1 rounded-lg border text-sm font-semibold",[o.active?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-700 hover:bg-blue-50",o.url?"cursor-pointer":"opacity-50 cursor-not-allowed"]])},null,10,Lt))),128))]),Y(ze,{show:$.value,item:k.value,categories:g.categories,"sub-categories":g.subCategories,units:g.units,"warehouse-divisions":g.warehouseDivisions,"menu-types":g.menuTypes,regions:g.regions,outlets:g.outlets,"bom-items":g.bomItems,modifiers:g.modifiers,mode:"create",onClose:je},null,8,["show","item","categories","sub-categories","units","warehouse-divisions","menu-types","regions","outlets","bom-items","modifiers"]),Y(qe,{open:V.value,item:L.value,modifiers:g.modifiers,regions:g.regions,outlets:g.outlets,onClose:e[7]||(e[7]=o=>V.value=!1)},null,8,["open","item","modifiers","regions","outlets"]),Y(We,{show:d.value,item:c.value,categories:g.categories,subCategories:g.subCategories,units:g.units,warehouseDivisions:g.warehouseDivisions,menuTypes:g.menuTypes,regions:g.regions,outlets:g.outlets,bomItems:g.bomItems,modifiers:g.modifiers,onClose:e[8]||(e[8]=o=>d.value=!1),onSuccess:fe},null,8,["show","item","categories","subCategories","units","warehouseDivisions","menuTypes","regions","outlets","bomItems","modifiers"]),Y(Ve(Ye),{visible:T.value,imgs:m.value,index:I.value,onHide:e[9]||(e[9]=o=>T.value=!1)},null,8,["visible","imgs","index"]),F.value?(n(),i("div",jt,[t("div",_t,[t("h2",Rt,[e[39]||(e[39]=t("i",{class:"fa-solid fa-eye text-blue-500"},null,-1)),x(" Preview Import "+y(ne()),1)]),S.value==="price-update"?(n(),i("div",Gt,e[40]||(e[40]=[t("p",{class:"text-sm text-blue-700"},[t("i",{class:"fa-solid fa-info-circle mr-1"}),t("strong",null,"Instruksi:"),x(' Hanya item dengan kolom "New Price" yang diisi akan diupdate. Item dengan kolom "New Price" kosong akan dilewati (tidak diupdate). ')],-1)]))):U("",!0),t("button",{onClick:re,class:"absolute top-4 right-4 text-gray-400 hover:text-red-500"},e[41]||(e[41]=[t("i",{class:"fa-solid fa-xmark text-2xl"},null,-1)])),C.value.header.length?(n(),i("div",Kt,[t("div",Vt,[t("table",Nt,[t("thead",Ht,[t("tr",null,[(n(!0),i(O,null,M(C.value.header,o=>(n(),i("th",{key:o,class:"px-3 py-2 text-xs font-bold text-gray-700 uppercase"},y(o),1))),128))])]),t("tbody",null,[(n(!0),i(O,null,M(C.value.preview,(o,s)=>(n(),i("tr",{key:s},[(n(!0),i(O,null,M(C.value.header,l=>(n(),i("td",{key:l,class:"px-3 py-1 text-xs text-gray-800"},y(o[l]),1))),128))]))),128))])])]),w.value?(n(),i("div",zt,[t("div",qt,[t("div",{class:"bg-blue-600 h-4 rounded-full",style:Ne({width:B.value+"%"})},null,4)]),t("div",Wt,"Uploading... "+y(B.value)+"%",1)])):U("",!0),v.value.length?(n(),i("div",Yt,[e[43]||(e[43]=t("h3",{class:"font-bold mb-2"},"Hasil Import:",-1)),t("div",Xt,[t("table",Jt,[e[42]||(e[42]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-3 py-2 text-xs font-bold text-gray-700 uppercase"},"Row"),t("th",{class:"px-3 py-2 text-xs font-bold text-gray-700 uppercase"},"Name"),t("th",{class:"px-3 py-2 text-xs font-bold text-gray-700 uppercase"},"Status"),t("th",{class:"px-3 py-2 text-xs font-bold text-gray-700 uppercase"},"Message")])],-1)),t("tbody",null,[(n(!0),i(O,null,M(v.value,o=>(n(),i("tr",{key:o.row,class:X(o.status==="success"?"bg-green-50":"bg-red-50")},[t("td",Qt,y(o.row),1),t("td",Zt,y(o.name),1),t("td",{class:X(["px-3 py-1 text-xs font-bold",o.status==="success"?"text-green-700":"text-red-700"])},y(o.status),3),t("td",eo,y(o.message),1)],2))),128))])])])])):U("",!0),t("div",to,[t("button",{onClick:re,class:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg"},"Tutup"),!w.value&&!v.value.length?(n(),i("button",{key:0,onClick:e[10]||(e[10]=o=>De()),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2"},[e[44]||(e[44]=t("i",{class:"fa-solid fa-upload"},null,-1)),x(" Upload "+y(ne()),1)])):U("",!0)])])):(n(),i("div",oo,"Tidak ada data yang bisa dipreview."))])])):U("",!0),Y(Xe,{show:D.value,item:k.value,onClose:Le},null,8,["show","item"]),oe.value?(n(),i("div",so,[t("div",ao,[e[55]||(e[55]=t("h2",{class:"text-xl font-bold mb-4 flex items-center gap-2"},[t("i",{class:"fa-solid fa-filter text-blue-500"}),x(" Filter Price Update Template ")],-1)),t("button",{onClick:se,class:"absolute top-4 right-4 text-gray-400 hover:text-red-500"},e[45]||(e[45]=[t("i",{class:"fa-solid fa-xmark text-2xl"},null,-1)])),t("div",lo,[t("div",null,[e[46]||(e[46]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[x(" Region "),t("span",{class:"text-gray-500 text-xs"},"(Bisa pilih beberapa, kosongkan jika tidak perlu)")],-1)),t("div",ro,[(n(!0),i(O,null,M(g.regions,o=>(n(),i("label",{key:o.id,class:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded cursor-pointer"},[K(t("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":e[11]||(e[11]=s=>r.value.regionIds=s),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,no),[[Q,r.value.regionIds]]),t("span",null,y(o.name),1)]))),128))])]),t("div",null,[e[47]||(e[47]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[x(" Outlet "),t("span",{class:"text-gray-500 text-xs"},"(Bisa pilih beberapa, kosongkan jika tidak perlu)")],-1)),t("div",io,[(n(!0),i(O,null,M(g.outlets,o=>(n(),i("label",{key:o.id_outlet,class:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded cursor-pointer"},[K(t("input",{type:"checkbox",value:o.id_outlet,"onUpdate:modelValue":e[12]||(e[12]=s=>r.value.outletIds=s),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,uo),[[Q,r.value.outletIds]]),t("span",null,y(o.nama_outlet),1)]))),128))])]),t("div",null,[t("label",co,[e[49]||(e[49]=x(" Category ")),e[50]||(e[50]=t("span",{class:"text-gray-500 text-xs"},"(Berdasarkan region/outlet yang dipilih)",-1)),H.value?(n(),i("span",po,e[48]||(e[48]=[t("i",{class:"fa-solid fa-spinner fa-spin"},null,-1),x(" Loading... ")]))):U("",!0)]),t("div",go,[R.value.length===0&&!H.value?(n(),i("div",mo," Pilih region/outlet terlebih dahulu atau tidak ada category yang tersedia ")):U("",!0),(n(!0),i(O,null,M(R.value,o=>(n(),i("label",{key:o.id,class:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded cursor-pointer"},[K(t("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":e[13]||(e[13]=s=>r.value.categoryIds=s),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,fo),[[Q,r.value.categoryIds]]),t("span",null,y(o.name),1)]))),128))])]),t("div",null,[t("label",vo,[e[52]||(e[52]=x(" Sub Category ")),e[53]||(e[53]=t("span",{class:"text-gray-500 text-xs"},"(Berdasarkan region/outlet yang dipilih)",-1)),H.value?(n(),i("span",xo,e[51]||(e[51]=[t("i",{class:"fa-solid fa-spinner fa-spin"},null,-1),x(" Loading... ")]))):U("",!0)]),t("div",yo,[G.value.length===0&&!H.value?(n(),i("div",bo," Pilih region/outlet terlebih dahulu atau tidak ada sub category yang tersedia ")):U("",!0),(n(!0),i(O,null,M(G.value,o=>(n(),i("label",{key:o.id,class:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded cursor-pointer"},[K(t("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":e[14]||(e[14]=s=>r.value.subCategoryIds=s),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,ho),[[Q,r.value.subCategoryIds]]),t("span",null,y(o.name),1)]))),128))])])]),t("div",{class:"flex justify-end gap-2 mt-6"},[t("button",{onClick:se,class:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-lg"},"Cancel"),t("button",{onClick:Ce,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2"},e[54]||(e[54]=[t("i",{class:"fa-solid fa-download"},null,-1),x(" Download Template ")]))])])])):U("",!0)])]),_:1}))}};export{Vo as default};
