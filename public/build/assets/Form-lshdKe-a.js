const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/app-BPKNzj_F.js","assets/vendor-utils-CpgP2uT4.js","assets/vendor-vue-g7iCcTkf.js","assets/vendor-charts-CuqD4wLC.js","assets/app-DyCrqql8.css"])))=>i.map(i=>d[i]);
import{_ as A}from"./app-BPKNzj_F.js";import{c as m,r as D,w as F,A as G,B as r,C as R,D as t,G as i,N as l,O as E,L as d,E as g,H as x,F as _,M as y,I as C,J as V,l as P,W as L}from"./vendor-vue-g7iCcTkf.js";import{A as q}from"./AppLayout-1Wm1ZPw9.js";import"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CVHTvH7j.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const M={class:"max-w-4xl mx-auto py-8"},U={class:"text-2xl font-bold text-blue-700 mb-6 flex items-center gap-2"},j={class:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-6"},H=["value"],Q=["value"],W={key:0},$={class:"w-full border border-blue-200 rounded-lg px-4 py-3 bg-gray-50 font-bold text-blue-700 text-lg select-none"},z={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6 my-6"},J={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl shadow-xl border border-blue-200 p-5 transition-all duration-300 hover:scale-105"},Y={class:"text-sm"},K={class:"font-semibold"},X={class:"text-sm"},Z={class:"font-semibold"},tt={class:"text-sm"},et={class:"font-semibold"},st={class:"text-sm"},ot={class:"font-semibold text-purple-700"},lt={class:"text-sm"},at={class:"font-semibold"},it={class:"text-sm"},nt={class:"font-bold text-blue-700"},rt={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl shadow-xl border border-purple-200 p-5 transition-all duration-300 hover:scale-105"},dt={class:"text-sm"},ut={class:"font-semibold"},mt={class:"text-sm"},pt={class:"font-semibold"},bt={key:1,class:"mt-6"},ct={class:"w-full border border-gray-200 rounded-xl shadow"},gt={class:"px-3 py-2 border"},ft={class:"px-3 py-2 border text-right"},vt={class:"px-3 py-2 border"},xt={class:"px-3 py-2 border text-right"},_t={class:"px-3 py-2 border text-right"},yt={key:0,class:"flex gap-2 justify-end mt-2"},ht=["disabled"],wt=["disabled"],St={class:"flex justify-end gap-2 mt-8"},kt={type:"submit",class:"px-6 py-3 bg-blue-600 text-white rounded-lg font-bold shadow-lg hover:bg-blue-700 transition-all"},h=5,Ft={__name:"Form",props:{mode:{type:String,default:"create"},payment:Object,outlets:Array,grList:Array},setup(w){const S=w,k=m(()=>S.mode==="edit"),a=D({outlet_id:"",date:new Date().toISOString().split("T")[0],gr_id:"",total_amount:0}),f=m(()=>a.value.outlet_id?S.grList.filter(o=>o.outlet_id==a.value.outlet_id):[]),n=m(()=>f.value.find(o=>o.id==a.value.gr_id));F(()=>a.value.gr_id,o=>{const e=f.value.find(s=>s.id==o);a.value.total_amount=e&&e.total_amount?e.total_amount:0});const v=m(()=>{var o;return((o=n.value)==null?void 0:o.items)||[]}),u=D(1),N=m(()=>{const o=(u.value-1)*h;return v.value.slice(o,o+h)}),c=m(()=>Math.ceil(v.value.length/h));function B(){L.get("/outlet-payment-suppliers")}function I(o){return new Date(o).toLocaleDateString("id-ID")}function p(o){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(o)}function O(o){return o==null?"":Number(o).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2})}async function T(){if(!a.value.outlet_id||!a.value.gr_id||!a.value.date||!a.value.total_amount){alert("Lengkapi semua data!");return}const o=(await A(async()=>{const{default:s}=await import("./app-BPKNzj_F.js").then(b=>b.s);return{default:s}},__vite__mapDeps([0,1,2,3,4]))).default;(await o.fire({title:"Simpan Payment Supplier?",text:"Yakin ingin menyimpan data payment supplier ini?",icon:"question",showCancelButton:!0,confirmButtonText:"Simpan",cancelButtonText:"Batal"})).isConfirmed&&(o.fire({title:"Menyimpan...",allowOutsideClick:!1,didOpen:()=>{o.showLoading()}}),L.post("/outlet-payment-suppliers",a.value,{onSuccess:()=>{o.fire({icon:"success",title:"Berhasil",text:"Payment supplier berhasil disimpan",timer:1500,showConfirmButton:!1}),B()},onError:s=>{let b="Gagal menyimpan data";s&&s.response&&s.response.data&&s.response.data.message?b=s.response.data.message:s&&s.message&&(b=s.message),o.fire({icon:"error",title:"Gagal",text:b})}}))}return(o,e)=>(r(),G(q,null,{default:R(()=>[t("div",M,[t("h1",U,[e[5]||(e[5]=t("i",{class:"fa-solid fa-money-bill-wave"},null,-1)),i(" "+l(k.value?"Edit Payment Supplier":"Buat Payment Supplier Baru"),1)]),t("form",{onSubmit:E(T,["prevent"])},[t("div",j,[t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Outlet",-1)),x(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.outlet_id=s),class:"w-full border border-blue-200 rounded-lg px-4 py-3 focus:ring-blue-500 focus:border-blue-500 shadow-sm",required:""},[e[6]||(e[6]=t("option",{value:""},"Pilih Outlet",-1)),(r(!0),d(_,null,y(w.outlets,s=>(r(),d("option",{key:s.id,value:s.id},l(s.name),9,H))),128))],512),[[C,a.value.outlet_id]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Tanggal",-1)),x(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>a.value.date=s),class:"w-full border border-blue-200 rounded-lg px-4 py-3 focus:ring-blue-500 focus:border-blue-500 shadow-sm",required:""},null,512),[[V,a.value.date]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"No. GR Supplier",-1)),x(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.gr_id=s),class:"w-full border border-blue-200 rounded-lg px-4 py-3 focus:ring-blue-500 focus:border-blue-500 shadow-sm",required:""},[e[9]||(e[9]=t("option",{value:""},"Pilih GR Supplier",-1)),(r(!0),d(_,null,y(f.value,s=>(r(),d("option",{key:s.id,value:s.id},[i(l(s.gr_number||"-"),1),s.total_amount!==void 0&&s.total_amount!==null?(r(),d("span",W," - "+l(p(s.total_amount)),1)):g("",!0)],8,Q))),128))],512),[[C,a.value.gr_id]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Total Amount",-1)),t("div",$,l(p(a.value.total_amount)),1)])]),n.value?(r(),d("div",z,[t("div",J,[e[18]||(e[18]=t("h3",{class:"font-bold mb-2 text-blue-700 flex items-center gap-2"},[t("i",{class:"fa-solid fa-file-invoice"}),i(" Info GR Supplier")],-1)),t("div",Y,[e[12]||(e[12]=i("No: ")),t("span",K,l(n.value.gr_number),1)]),t("div",X,[e[13]||(e[13]=i("Tanggal: ")),t("span",Z,l(I(n.value.receive_date)),1)]),t("div",tt,[e[14]||(e[14]=i("Outlet: ")),t("span",et,l(n.value.outlet_name),1)]),t("div",st,[e[15]||(e[15]=i("Supplier: ")),t("span",ot,l(n.value.supplier_name||"-"),1)]),t("div",lt,[e[16]||(e[16]=i("Status: ")),t("span",at,l(n.value.status),1)]),t("div",it,[e[17]||(e[17]=i("Amount: ")),t("span",nt,l(p(n.value.total_amount)),1)])]),t("div",rt,[e[21]||(e[21]=t("h3",{class:"font-bold mb-2 text-purple-700 flex items-center gap-2"},[t("i",{class:"fa-solid fa-clipboard-list"}),i(" Info RO Supplier")],-1)),t("div",dt,[e[19]||(e[19]=i("No: ")),t("span",ut,l(n.value.ro_number),1)]),t("div",mt,[e[20]||(e[20]=i("Tanggal: ")),t("span",pt,l(I(n.value.ro_created_at)),1)])])])):g("",!0),n.value&&v.value.length?(r(),d("div",bt,[e[23]||(e[23]=t("h3",{class:"font-bold mb-2 text-blue-700 flex items-center gap-2"},[t("i",{class:"fa-solid fa-list"}),i(" Item di GR ")],-1)),t("table",ct,[e[22]||(e[22]=t("thead",null,[t("tr",{class:"bg-blue-50 text-blue-900"},[t("th",{class:"px-3 py-2 border"},"Nama Item"),t("th",{class:"px-3 py-2 border text-right"},"Qty"),t("th",{class:"px-3 py-2 border"},"Unit"),t("th",{class:"px-3 py-2 border text-right"},"Harga"),t("th",{class:"px-3 py-2 border text-right"},"Subtotal")])],-1)),t("tbody",null,[(r(!0),d(_,null,y(N.value,s=>(r(),d("tr",{key:s.id},[t("td",gt,l(s.item_name),1),t("td",ft,l(O(s.qty_received)),1),t("td",vt,l(s.unit_name),1),t("td",xt,l(p(s.price)),1),t("td",_t,l(p(s.qty_received*s.price)),1)]))),128))])]),c.value>1?(r(),d("div",yt,[t("button",{onClick:e[3]||(e[3]=s=>u.value--),disabled:u.value===1,class:P(["px-3 py-1 rounded border",u.value===1?"bg-gray-200 text-gray-400":"bg-white text-blue-700 hover:bg-blue-50"])},"<",10,ht),t("span",null,"Halaman "+l(u.value)+" / "+l(c.value),1),t("button",{onClick:e[4]||(e[4]=s=>u.value++),disabled:u.value===c.value,class:P(["px-3 py-1 rounded border",u.value===c.value?"bg-gray-200 text-gray-400":"bg-white text-blue-700 hover:bg-blue-50"])},">",10,wt)])):g("",!0)])):g("",!0),t("div",St,[t("button",{type:"button",onClick:B,class:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-semibold shadow-sm"},"Batal"),t("button",kt,l(k.value?"Update":"Simpan"),1)])],32)])]),_:1}))}};export{Ft as default};
