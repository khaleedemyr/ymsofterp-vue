import{a as j}from"./vendor-utils-CpgP2uT4.js";import{m as N}from"./vendor-charts-CuqD4wLC.js";import{r as _,w as L,c as u,a8 as E,L as d,E as C,B as c,D as e,l as v,N as o,x as z,F as A,M as V}from"./vendor-vue-g7iCcTkf.js";const W={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},H={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},G={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-6xl sm:w-full"},q={class:"bg-white px-6 py-4 border-b border-gray-200"},J={class:"flex items-center justify-between"},K={class:"flex items-center space-x-3"},Q={class:"text-2xl"},U={class:"text-lg font-semibold text-gray-900"},X={class:"text-sm text-gray-600"},Y={class:"bg-white px-6 py-4"},Z={key:0,class:"text-center py-8"},$={key:1,class:"text-center py-8"},ee={class:"text-red-600"},te={key:2,class:"space-y-6"},se={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ae={class:"flex items-center justify-between"},oe={class:"text-2xl font-bold text-gray-900"},le={class:"p-4 rounded-lg border border-gray-200 bg-gray-50"},re={class:"flex items-center justify-between"},ie={class:"text-2xl font-bold text-gray-900"},ne={class:"p-4 rounded-lg border border-gray-200 bg-gray-50"},de={class:"flex items-center justify-between"},ce={class:"text-2xl font-bold text-gray-900"},ue={class:"p-4 rounded-lg border border-gray-200 bg-gray-50"},ge={class:"flex items-center justify-between"},xe={class:"text-2xl font-bold text-gray-900"},me={key:0,class:"bg-white border border-gray-200 rounded-lg p-6"},ye={class:"text-lg font-semibold text-gray-900 mb-4"},pe={class:"h-64"},ve={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},fe={class:"px-6 py-4 border-b border-gray-200"},he={class:"text-lg font-semibold text-gray-900"},be={class:"text-sm text-gray-600"},_e={class:"overflow-x-auto"},we={class:"min-w-full divide-y divide-gray-200"},ke={class:"bg-white divide-y divide-gray-200"},De={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Me={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Le={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Fe={key:3,class:"text-center py-8"},Oe={class:"text-gray-600"},Te={components:{apexchart:N}},Re=Object.assign(Te,{__name:"OutletLunchDinnerModal",props:{isOpen:Boolean,selectedOutlet:Object,selectedRegion:String,selectedMealPeriod:String,dateFrom:String,dateTo:String},emits:["close"],setup(i,{emit:F}){const s=i,O=F,f=_(!1),l=_(null),m=_(null);L(()=>[s.selectedOutlet,s.selectedMealPeriod,s.dateFrom,s.dateTo],([a,t,r,n])=>{a&&t&&r&&n&&s.isOpen&&w(a.outlet_code,t,r,n)},{immediate:!0}),L(()=>s.isOpen,a=>{a&&s.selectedOutlet&&s.selectedMealPeriod&&s.dateFrom&&s.dateTo?w(s.selectedOutlet.outlet_code,s.selectedMealPeriod,s.dateFrom,s.dateTo):a||(l.value=null,m.value=null)});async function w(a,t,r,n){if(!(!a||!t||!r||!n)){f.value=!0,m.value=null;try{const g=await j.get("/sales-outlet-dashboard/outlet-lunch-dinner-detail",{params:{outlet_code:a,meal_period:t,date_from:r,date_to:n}});l.value=g.data}catch(g){console.error("Error fetching lunch/dinner data:",g),m.value="Gagal memuat data lunch/dinner",l.value=null}finally{f.value=!1}}}function h(){O("close")}function y(a){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(a)}function p(a){return new Intl.NumberFormat("id-ID").format(a)}const T=u(()=>(s.selectedMealPeriod==="Lunch","ðŸ½ï¸")),k=u(()=>s.selectedMealPeriod==="Lunch"?"blue":"orange"),b=u(()=>s.selectedMealPeriod==="Lunch"?"bg-blue-50":"bg-orange-50"),I=u(()=>s.selectedMealPeriod==="Lunch"?"text-blue-800":"text-orange-800"),S=u(()=>s.selectedMealPeriod==="Lunch"?"border-blue-200":"border-orange-200"),B=u(()=>{var a;return(a=l.value)!=null&&a.daily_data?[{name:"Revenue",data:l.value.daily_data.map(t=>t.revenue)}]:[]}),R=u(()=>{var a,t;return{chart:{type:"line",height:300,toolbar:{show:!0},animations:{enabled:!0,easing:"easeinout",speed:800}},stroke:{width:3,curve:"smooth"},markers:{size:5,colors:["#fff"],strokeColors:[k.value==="blue"?"#3B82F6":"#F59E0B"],strokeWidth:3,hover:{size:8}},xaxis:{categories:((t=(a=l.value)==null?void 0:a.daily_data)==null?void 0:t.map(r=>new Date(r.date).toLocaleDateString("id-ID",{day:"2-digit",month:"short"})))||[],title:{text:"Tanggal"},labels:{style:{fontWeight:600},rotate:-45}},yaxis:{title:{text:"Revenue (Rp)"},labels:{style:{fontWeight:600},formatter:function(r){return"Rp "+r.toLocaleString("id-ID")}}},colors:[k.value==="blue"?"#3B82F6":"#F59E0B"],grid:{borderColor:"#e5e7eb",strokeDashArray:4},tooltip:{y:{formatter:function(r){return"Rp "+r.toLocaleString("id-ID")}}},dataLabels:{enabled:!1}}});return(a,t)=>{var n,g,D,P,M;const r=E("apexchart");return i.isOpen?(c(),d("div",W,[e("div",H,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:h}),e("div",G,[e("div",q,[e("div",J,[e("div",K,[e("div",{class:v(["p-2 rounded-lg",b.value])},[e("span",Q,o(T.value),1)],2),e("div",null,[e("h3",U," Detail "+o(i.selectedMealPeriod)+" - "+o((n=i.selectedOutlet)==null?void 0:n.outlet_name),1),e("p",X,o(i.selectedRegion),1)])]),e("button",{onClick:h,class:"text-gray-400 hover:text-gray-600 transition-colors"},t[0]||(t[0]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))])]),e("div",Y,[f.value?(c(),d("div",Z,t[1]||(t[1]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Memuat data...",-1)]))):m.value?(c(),d("div",$,[t[2]||(t[2]=e("div",{class:"text-red-500 text-4xl mb-2"},[e("i",{class:"fa-solid fa-exclamation-triangle"})],-1)),e("p",ee,o(m.value),1)])):l.value?(c(),d("div",te,[e("div",se,[e("div",{class:v(["p-4 rounded-lg border-2",S.value,b.value])},[e("div",ae,[e("div",null,[e("p",{class:v(["text-sm font-medium",I.value])},"Total Revenue",2),e("p",oe,o(y(((g=l.value.summary)==null?void 0:g.total_revenue)||0)),1)]),e("div",{class:v(["p-2 rounded-lg",b.value])},t[3]||(t[3]=[e("i",{class:"fa-solid fa-money-bill-wave text-xl text-gray-600"},null,-1)]),2)])],2),e("div",le,[e("div",re,[e("div",null,[t[4]||(t[4]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Orders",-1)),e("p",ie,o(p(((D=l.value.summary)==null?void 0:D.total_orders)||0)),1)]),t[5]||(t[5]=e("div",{class:"p-2 rounded-lg bg-gray-100"},[e("i",{class:"fa-solid fa-receipt text-xl text-gray-600"})],-1))])]),e("div",ne,[e("div",de,[e("div",null,[t[6]||(t[6]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Pax",-1)),e("p",ce,o(p(((P=l.value.summary)==null?void 0:P.total_pax)||0)),1)]),t[7]||(t[7]=e("div",{class:"p-2 rounded-lg bg-gray-100"},[e("i",{class:"fa-solid fa-users text-xl text-gray-600"})],-1))])]),e("div",ue,[e("div",ge,[e("div",null,[t[8]||(t[8]=e("p",{class:"text-sm font-medium text-gray-600"},"Avg Check",-1)),e("p",xe,o(y(((M=l.value.summary)==null?void 0:M.avg_check)||0)),1)]),t[9]||(t[9]=e("div",{class:"p-2 rounded-lg bg-gray-100"},[e("i",{class:"fa-solid fa-calculator text-xl text-gray-600"})],-1))])])]),l.value.daily_data&&l.value.daily_data.length>0?(c(),d("div",me,[e("h4",ye," Trend Revenue "+o(i.selectedMealPeriod)+" Harian ",1),e("div",pe,[z(r,{type:"line",height:"300",options:R.value,series:B.value},null,8,["options","series"])])])):C("",!0),e("div",ve,[e("div",fe,[e("h4",he," Data Harian "+o(i.selectedMealPeriod),1),e("p",be," Periode: "+o(new Date(i.dateFrom).toLocaleDateString("id-ID"))+" - "+o(new Date(i.dateTo).toLocaleDateString("id-ID")),1)]),e("div",_e,[e("table",we,[t[10]||(t[10]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tanggal "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Orders "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Pax "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Revenue "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Avg Check ")])],-1)),e("tbody",ke,[(c(!0),d(A,null,V(l.value.daily_data,x=>(c(),d("tr",{key:x.date,class:"hover:bg-gray-50"},[e("td",De,o(new Date(x.date).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})),1),e("td",Pe,o(p(x.orders)),1),e("td",Me,o(p(x.pax)),1),e("td",Le,o(y(x.revenue)),1),e("td",Ce,o(y(x.avg_check)),1)]))),128))])])])])])):(c(),d("div",Fe,[t[11]||(t[11]=e("div",{class:"text-gray-400 text-4xl mb-2"},[e("i",{class:"fa-solid fa-chart-bar"})],-1)),e("p",Oe,"Tidak ada data "+o(i.selectedMealPeriod)+" untuk outlet ini",1)]))]),e("div",{class:"bg-gray-50 px-6 py-3 border-t border-gray-200"},[e("div",{class:"flex justify-end"},[e("button",{onClick:h,class:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors"}," Tutup ")])])])])])):C("",!0)}}});export{Re as default};
