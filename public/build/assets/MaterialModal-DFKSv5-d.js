import{r as c,c as D,L as n,E as d,B as u,D as t,O as F,R as g,H as a,J as m,I as E,N as f,V as I,G as P}from"./vendor-vue-g7iCcTkf.js";import{u as T}from"./useToast-D6Z3J7rW.js";import"./vendor-utils-CpgP2uT4.js";const S={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},U={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},j={class:"inline-block align-bottom bg-slate-800 rounded-2xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full border border-white/20"},C={class:"bg-slate-800 px-6 pt-6 pb-6"},N={class:"space-y-4"},q={key:0},J={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-white/20 border-dashed rounded-xl bg-slate-700/50 hover:bg-slate-700 transition-colors"},O={class:"space-y-1 text-center"},A={class:"flex text-sm text-white/80"},G={for:"file",class:"relative cursor-pointer bg-slate-600 rounded-lg font-medium text-blue-300 hover:text-blue-200 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500 px-4 py-2 transition-colors"},L=["accept"],R={class:"text-xs text-white/60"},z={key:0,class:"mt-2 text-sm text-white/70"},W={key:1},$={class:"flex items-center"},H={class:"bg-slate-700 px-6 py-4 sm:flex sm:flex-row-reverse border-t border-white/20"},K=["disabled"],X={key:0,class:"fas fa-spinner fa-spin mr-2"},ee={__name:"MaterialModal",props:{show:{type:Boolean,default:!1},curriculumItem:{type:Object,required:!0},courseId:{type:[String,Number],required:!0}},emits:["close","saved"],setup(x,{emit:y}){const v=x,w=y,{showToast:p}=T(),r=c(!1),o=c(null),b=c(null),l=c({title:"",description:"",material_type:"",order_number:1,estimated_duration_minutes:15,is_downloadable:!0}),_=D(()=>!l.value.title||!l.value.material_type?!1:l.value.material_type==="link"?!!l.value.external_url:!!o.value),k=()=>{switch(l.value.material_type){case"pdf":return".pdf";case"image":return"image/*";case"video":return"video/*";case"document":return".doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt";default:return"*"}},M=()=>{switch(l.value.material_type){case"pdf":return"PDF files up to 100MB";case"image":return"Image files (JPG, PNG, GIF) up to 100MB";case"video":return"Video files (MP4, AVI, MOV) up to 100MB";case"document":return"Document files (Word, Excel, PowerPoint) up to 100MB";default:return"All files up to 100MB"}},V=i=>{const e=i.target.files[0];if(e){if(e.size>100*1024*1024){p("File terlalu besar. Maksimal 100MB.","error"),i.target.value="",o.value=null;return}o.value=e}},B=async()=>{try{r.value=!0;const i=new FormData;i.append("title",l.value.title),i.append("description",l.value.description),i.append("material_type",l.value.material_type),i.append("order_number",l.value.order_number),i.append("estimated_duration_minutes",l.value.estimated_duration_minutes),i.append("is_downloadable",l.value.is_downloadable),l.value.material_type==="link"?i.append("external_url",l.value.external_url):o.value&&i.append("file",o.value);const s=await(await fetch(`/lms/courses/${v.courseId}/curriculum/sessions/${v.curriculumItem.id}/materials`,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:i})).json();s.success?(p("Materi berhasil ditambahkan","success"),w("saved",s.material)):p(s.message||"Error adding material","error")}catch(i){console.error("Error adding material:",i),p("Error adding material","error")}finally{r.value=!1}},h=()=>{l.value={title:"",description:"",material_type:"",order_number:1,estimated_duration_minutes:15,is_downloadable:!0},o.value=null,b.value&&(b.value.value=""),w("close")};return(i,e)=>x.show?(u(),n("div",S,[t("div",U,[t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:h}),t("div",j,[t("form",{onSubmit:F(B,["prevent"])},[e[19]||(e[19]=g('<div class="bg-gradient-to-r from-blue-600/20 via-purple-600/20 to-pink-600/20 px-6 pt-6 pb-4 border-b border-white/20"><div class="sm:flex sm:items-start"><div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 sm:mx-0 sm:h-10 sm:w-10"><i class="fas fa-file-upload text-white text-lg"></i></div><div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"><h3 class="text-xl leading-6 font-bold text-white"> Tambah Materi Baru </h3><p class="mt-2 text-sm text-white/80"> Tambahkan materi pembelajaran untuk sesi ini. </p></div></div></div>',1)),t("div",C,[t("div",N,[t("div",null,[e[7]||(e[7]=t("label",{for:"title",class:"block text-sm font-medium text-white mb-2"}," Judul Materi * ",-1)),a(t("input",{id:"title","onUpdate:modelValue":e[0]||(e[0]=s=>l.value.title=s),type:"text",required:"",class:"mt-1 block w-full bg-slate-700 border border-white/20 rounded-xl shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-white placeholder-white/50",placeholder:"Contoh: Slide Presentasi"},null,512),[[m,l.value.title]])]),t("div",null,[e[8]||(e[8]=t("label",{for:"description",class:"block text-sm font-medium text-white mb-2"}," Deskripsi Materi ",-1)),a(t("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=s=>l.value.description=s),rows:"3",class:"mt-1 block w-full bg-slate-700 border border-white/20 rounded-xl shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-white placeholder-white/50",placeholder:"Jelaskan isi materi ini..."},null,512),[[m,l.value.description]])]),t("div",null,[e[10]||(e[10]=t("label",{for:"material_type",class:"block text-sm font-medium text-white mb-2"}," Jenis Materi * ",-1)),a(t("select",{id:"material_type","onUpdate:modelValue":e[2]||(e[2]=s=>l.value.material_type=s),required:"",class:"mt-1 block w-full bg-slate-700 border border-white/20 rounded-xl shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-white"},e[9]||(e[9]=[g('<option value="" class="bg-slate-700 text-white">Pilih Jenis Materi</option><option value="pdf" class="bg-slate-700 text-white">PDF Document</option><option value="image" class="bg-slate-700 text-white">Image/Photo</option><option value="video" class="bg-slate-700 text-white">Video</option><option value="document" class="bg-slate-700 text-white">Document (Word, Excel, etc.)</option><option value="link" class="bg-slate-700 text-white">External Link</option>',6)]),512),[[E,l.value.material_type]])]),l.value.material_type&&l.value.material_type!=="link"?(u(),n("div",q,[e[14]||(e[14]=t("label",{for:"file",class:"block text-sm font-medium text-white mb-2"}," File Materi * ",-1)),t("div",J,[t("div",O,[e[13]||(e[13]=t("i",{class:"fas fa-cloud-upload-alt text-4xl text-white/60 mx-auto"},null,-1)),t("div",A,[t("label",G,[e[11]||(e[11]=t("span",null,"Upload file",-1)),t("input",{id:"file",ref_key:"fileInput",ref:b,type:"file",class:"sr-only",onChange:V,accept:k()},null,40,L)]),e[12]||(e[12]=t("p",{class:"pl-1"},"atau drag and drop",-1))]),t("p",R,f(M()),1)])]),o.value?(u(),n("div",z," File dipilih: "+f(o.value.name),1)):d("",!0)])):d("",!0),l.value.material_type==="link"?(u(),n("div",W,[e[15]||(e[15]=t("label",{for:"external_url",class:"block text-sm font-medium text-white mb-2"}," URL Eksternal * ",-1)),a(t("input",{id:"external_url","onUpdate:modelValue":e[3]||(e[3]=s=>l.value.external_url=s),type:"url",required:"",class:"mt-1 block w-full bg-slate-700 border border-white/20 rounded-xl shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-white placeholder-white/50",placeholder:"https://example.com/materi"},null,512),[[m,l.value.external_url]])])):d("",!0),t("div",null,[e[16]||(e[16]=t("label",{for:"order_number",class:"block text-sm font-medium text-white mb-2"}," Urutan * ",-1)),a(t("input",{id:"order_number","onUpdate:modelValue":e[4]||(e[4]=s=>l.value.order_number=s),type:"number",min:"1",required:"",class:"mt-1 block w-full bg-slate-700 border border-white/20 rounded-xl shadow-sm focus:ring-blue-500 focus:border-indigo-500 sm:text-sm text-white placeholder-white/50",placeholder:"1"},null,512),[[m,l.value.order_number]])]),t("div",null,[e[17]||(e[17]=t("label",{for:"estimated_duration_minutes",class:"block text-sm font-medium text-gray-700"}," Durasi Estimasi (menit) ",-1)),a(t("input",{id:"estimated_duration_minutes","onUpdate:modelValue":e[5]||(e[5]=s=>l.value.estimated_duration_minutes=s),type:"number",min:"1",class:"mt-1 block w-full bg-slate-700 border border-white/20 rounded-xl shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-white placeholder-white/50",placeholder:"15"},null,512),[[m,l.value.estimated_duration_minutes]])]),t("div",$,[a(t("input",{id:"is_downloadable","onUpdate:modelValue":e[6]||(e[6]=s=>l.value.is_downloadable=s),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-white/20 rounded bg-slate-700"},null,512),[[I,l.value.is_downloadable]]),e[18]||(e[18]=t("label",{for:"is_downloadable",class:"ml-2 block text-sm text-white"}," Bisa didownload oleh peserta ",-1))])])]),t("div",H,[t("button",{type:"submit",disabled:r.value||!_.value,class:"w-full inline-flex justify-center rounded-xl border border-transparent shadow-lg px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-base font-medium text-white hover:from-green-600 hover:to-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105"},[r.value?(u(),n("i",X)):d("",!0),P(" "+f(r.value?"Menyimpan...":"Tambah Materi"),1)],8,K),t("button",{type:"button",onClick:h,class:"mt-3 w-full inline-flex justify-center rounded-xl border border-white/20 shadow-lg px-6 py-3 bg-slate-600 text-base font-medium text-white hover:bg-slate-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm transition-all duration-300"}," Batal ")])],32)])])])):d("",!0)}};export{ee as default};
