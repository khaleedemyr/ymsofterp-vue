import{r as h,W as O,w as ae,A as se,B as i,C as le,D as e,L as b,E as D,G as C,H as x,J as q,F as $,M as j,N as d,I as M,l as I,O as G,V as ne}from"./vendor-vue-g7iCcTkf.js";import{l as oe}from"./lodash-DB3HVzpp.js";import{S as y}from"./app-CMkuePvF.js";import{A as re}from"./AppLayout-U5X72hCR.js";import{a as E}from"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DCdSPjRr.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const ue={class:"max-w-7xl w-full mx-auto py-8 px-2"},ie={class:"bg-white rounded-xl shadow-lg p-4 mb-6"},de={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ce=["value"],be={class:"bg-white rounded-xl shadow-lg overflow-hidden"},pe={class:"overflow-x-auto"},me={class:"min-w-full divide-y divide-gray-200"},ge={class:"bg-white divide-y divide-gray-200"},fe={key:0},ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},xe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},ye={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ke={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},he={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},we={key:0,class:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs"},_e={key:1,class:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs"},Ae={class:"px-6 py-4 whitespace-nowrap"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Be={class:"flex items-center gap-2"},Se=["onClick"],Ne=["onClick","title"],Oe=["onClick"],$e={key:0,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},je={class:"flex items-center justify-between"},Me={class:"flex-1 flex justify-between sm:hidden"},Te=["disabled"],Pe=["disabled"],Ve={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Re={class:"text-sm text-gray-700"},Ue={class:"font-medium"},qe={class:"font-medium"},Ie={class:"font-medium"},Ee={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Le=["disabled"],De=["onClick"],He=["disabled"],We={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},Xe={class:"mt-3"},ze={class:"flex justify-between items-center mb-4"},Ge={class:"text-lg font-medium text-gray-900"},Ye=["value"],Fe=["value"],Je={class:"flex items-center"},Ke={class:"flex justify-end gap-2 pt-4"},Qe=["disabled"],Ze=["disabled"],et={key:0,class:"fa-solid fa-spinner fa-spin"},bt={__name:"Index",props:{bankAccounts:Object,outlets:Array,coas:Array,filters:Object},setup(n){var H,W,X,z;const T=n,k=h(((H=T.filters)==null?void 0:H.search)||""),v=h(((W=T.filters)==null?void 0:W.outlet_id)||""),f=h(((X=T.filters)==null?void 0:X.status)||"all"),w=h(((z=T.filters)==null?void 0:z.per_page)||15),P=h(!1),B=h("create"),V=h(null),A=h(!1),u=h({bank_name:"",account_number:"",account_name:"",outlet_id:null,coa_id:null,is_active:!0}),Y=oe.debounce(()=>{O.get("/bank-accounts",{search:k.value,outlet_id:v.value,status:f.value,per_page:w.value},{preserveState:!0,replace:!0})},400);function F(){Y()}function R(s){if(!s)return;let t=1;try{let c=s;s.startsWith("/")?c=window.location.origin+s:s.startsWith("http")||(c=window.location.origin+"/"+s);const g=new URL(c).searchParams.get("page");g&&(t=parseInt(g))}catch{const p=s.match(/[?&]page=(\d+)/);p&&(t=parseInt(p[1]))}(isNaN(t)||t<1)&&(t=1);const m={page:t,per_page:w.value||15};k.value&&(m.search=k.value),v.value!==""&&(m.outlet_id=v.value),f.value&&f.value!=="all"&&(m.status=f.value),O.get("/bank-accounts",m,{preserveState:!1,preserveScroll:!1,replace:!0})}function J(s){if(!s||s<1)return;const t={page:s,per_page:w.value||15};k.value&&(t.search=k.value),v.value!==""&&(t.outlet_id=v.value),f.value&&f.value!=="all"&&(t.status=f.value),O.get("/bank-accounts",t,{preserveState:!1,preserveScroll:!1,replace:!0})}function K(){B.value="create",V.value=null,u.value={bank_name:"",account_number:"",account_name:"",outlet_id:null,coa_id:null,is_active:!0},P.value=!0}function Q(s){B.value="edit",V.value=s,u.value={bank_name:s.bank_name,account_number:s.account_number,account_name:s.account_name,outlet_id:s.outlet_id,coa_id:s.coa_id,is_active:s.is_active},P.value=!0}function U(){P.value=!1,V.value=null,u.value={bank_name:"",account_number:"",account_name:"",outlet_id:null,coa_id:null,is_active:!0}}async function Z(){var s,t,m,c,p,g;A.value=!0;try{let o;B.value==="create"?o=await E.post("/bank-accounts",u.value,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}):o=await E.put(`/bank-accounts/${V.value.id}`,u.value,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}),((s=o.data)!=null&&s.success||o.status===200||o.status===201)&&(y.fire("Berhasil",((t=o.data)==null?void 0:t.message)||(B.value==="create"?"Bank account berhasil ditambahkan":"Bank account berhasil diupdate"),"success"),S(),U())}catch(o){let r="Gagal menyimpan data";if((c=(m=o.response)==null?void 0:m.data)!=null&&c.message)r=o.response.data.message;else if((g=(p=o.response)==null?void 0:p.data)!=null&&g.errors){const _=o.response.data.errors;r=Object.values(_).flat().join(", ")}else o.message&&(r=o.message);y.fire("Error",r,"error")}finally{A.value=!1}}async function ee(s){var m,c,p,g,o;if((await y.fire({title:"Hapus Data?",text:`Yakin ingin menghapus bank account "${s.bank_name} - ${s.account_number}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed)try{const r=await E.delete(`/bank-accounts/${s.id}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});(r.status===200||r.status===204||(m=r.data)!=null&&m.success)&&(y.fire("Berhasil",((c=r.data)==null?void 0:c.message)||"Bank account berhasil dihapus","success"),S())}catch(r){((p=r.response)==null?void 0:p.status)===405?(y.fire("Berhasil","Bank account berhasil dihapus","success"),S()):y.fire("Error",((o=(g=r.response)==null?void 0:g.data)==null?void 0:o.message)||"Gagal menghapus data","error")}}async function te(s){var c,p,g,o,r,_,N;const t=s.is_active?"menonaktifkan":"mengaktifkan";if((await y.fire({title:`${s.is_active?"Nonaktifkan":"Aktifkan"} Data?`,text:`Yakin ingin ${t} bank account "${s.bank_name} - ${s.account_number}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:`Ya, ${s.is_active?"Nonaktifkan":"Aktifkan"}!`,cancelButtonText:"Batal"})).isConfirmed)try{const a={bank_name:s.bank_name,account_number:s.account_number,account_name:s.account_name,outlet_id:s.outlet_id,is_active:!s.is_active},l=await E.put(`/bank-accounts/${s.id}`,a,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});((c=l.data)!=null&&c.success||l.status===200)&&(y.fire("Berhasil",((p=l.data)==null?void 0:p.message)||"Status bank account berhasil diubah","success"),S())}catch(a){if(((g=a.response)==null?void 0:g.status)===200||(r=(o=a.response)==null?void 0:o.data)!=null&&r.success)y.fire("Berhasil","Status bank account berhasil diubah","success"),S();else{let l="Gagal mengubah status data";(N=(_=a.response)==null?void 0:_.data)!=null&&N.message?l=a.response.data.message:a.message&&(l=a.message),y.fire("Error",l,"error")}}}function S(){O.reload({preserveState:!0,replace:!0})}return ae([v,f,w],()=>{const s={page:1};k.value&&(s.search=k.value),v.value!==""&&(s.outlet_id=v.value),f.value&&f.value!=="all"&&(s.status=f.value),s.per_page=w.value||15,O.get("/bank-accounts",s,{preserveState:!0,replace:!0})}),(s,t)=>(i(),se(re,null,{default:le(()=>{var m,c,p,g,o,r,_,N;return[e("div",ue,[e("div",{class:"flex justify-between items-center mb-6"},[t[15]||(t[15]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-building-columns text-blue-500"}),C(" Master Data Bank ")],-1)),e("button",{onClick:K,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2"},t[14]||(t[14]=[e("i",{class:"fa-solid fa-plus"},null,-1),C(" Tambah Bank Account ")]))]),e("div",ie,[e("div",de,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),x(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>k.value=a),onInput:F,placeholder:"Cari bank, nomor rekening, atau nama...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,544),[[q,k.value]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Outlet",-1)),x(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>v.value=a),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[t[17]||(t[17]=e("option",{value:""},"Semua Outlet",-1)),t[18]||(t[18]=e("option",{value:"null"},"Tidak Terikat Outlet",-1)),(i(!0),b($,null,j(n.outlets,a=>(i(),b("option",{key:a.id,value:a.id},d(a.name),9,ce))),128))],512),[[M,v.value]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),x(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>f.value=a),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[20]||(t[20]=[e("option",{value:"all"},"Semua Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[M,f.value]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Per Page",-1)),x(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>w.value=a),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[22]||(t[22]=[e("option",{value:"10"},"10",-1),e("option",{value:"15"},"15",-1),e("option",{value:"25"},"25",-1),e("option",{value:"50"},"50",-1)]),512),[[M,w.value]])])])]),e("div",be,[e("div",pe,[e("table",me,[t[27]||(t[27]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nama Bank"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nomor Rekening"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nama Pemilik"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Outlet"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",ge,[!n.bankAccounts||!n.bankAccounts.data||n.bankAccounts.data.length===0?(i(),b("tr",fe,t[24]||(t[24]=[e("td",{colspan:"7",class:"px-6 py-4 text-center text-gray-500"}," Tidak ada data ",-1)]))):(i(!0),b($,{key:1},j(n.bankAccounts.data,(a,l)=>(i(),b("tr",{key:a.id,class:"hover:bg-gray-50"},[e("td",ve,d((n.bankAccounts.current_page-1)*n.bankAccounts.per_page+l+1),1),e("td",xe,d(a.bank_name),1),e("td",ye,d(a.account_number),1),e("td",ke,d(a.account_name),1),e("td",he,[a.outlet?(i(),b("span",we,d(a.outlet.nama_outlet),1)):(i(),b("span",_e," Semua Outlet "))]),e("td",Ae,[e("span",{class:I([a.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 py-1 rounded-full text-xs font-medium"])},d(a.is_active?"Active":"Inactive"),3)]),e("td",Ce,[e("div",Be,[e("button",{onClick:L=>Q(a),class:"text-blue-600 hover:text-blue-900",title:"Edit"},t[25]||(t[25]=[e("i",{class:"fa-solid fa-edit"},null,-1)]),8,Se),e("button",{onClick:L=>te(a),class:I(a.is_active?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900"),title:a.is_active?"Nonaktifkan":"Aktifkan"},[e("i",{class:I(a.is_active?"fa-solid fa-toggle-on":"fa-solid fa-toggle-off")},null,2)],10,Ne),e("button",{onClick:L=>ee(a),class:"text-red-600 hover:text-red-900",title:"Hapus"},t[26]||(t[26]=[e("i",{class:"fa-solid fa-trash"},null,-1)]),8,Oe)])])]))),128))])])]),n.bankAccounts&&n.bankAccounts.last_page>1?(i(),b("div",$e,[e("div",je,[e("div",Me,[e("button",{onClick:t[4]||(t[4]=a=>{var l;return R((l=n.bankAccounts)==null?void 0:l.prev_page_url)}),disabled:!((m=n.bankAccounts)!=null&&m.prev_page_url),class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,Te),e("button",{onClick:t[5]||(t[5]=a=>{var l;return R((l=n.bankAccounts)==null?void 0:l.next_page_url)}),disabled:!((c=n.bankAccounts)!=null&&c.next_page_url),class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,Pe)]),e("div",Ve,[e("div",null,[e("p",Re,[t[28]||(t[28]=C(" Menampilkan ")),e("span",Ue,d(((p=n.bankAccounts)==null?void 0:p.from)||0),1),t[29]||(t[29]=C(" sampai ")),e("span",qe,d(((g=n.bankAccounts)==null?void 0:g.to)||0),1),t[30]||(t[30]=C(" dari ")),e("span",Ie,d(((o=n.bankAccounts)==null?void 0:o.total)||0),1),t[31]||(t[31]=C(" hasil "))])]),e("div",null,[e("nav",Ee,[e("button",{onClick:t[6]||(t[6]=a=>{var l;return R((l=n.bankAccounts)==null?void 0:l.prev_page_url)}),disabled:!((r=n.bankAccounts)!=null&&r.prev_page_url),class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[32]||(t[32]=[e("i",{class:"fa-solid fa-chevron-left"},null,-1)]),8,Le),(i(!0),b($,null,j(Array.from({length:((_=n.bankAccounts)==null?void 0:_.last_page)||0},(a,l)=>l+1),a=>{var l;return i(),b("span",{key:a,onClick:L=>J(a),class:I([a===((l=n.bankAccounts)==null?void 0:l.current_page)?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium cursor-pointer"])},d(a),11,De)}),128)),e("button",{onClick:t[7]||(t[7]=a=>{var l;return R((l=n.bankAccounts)==null?void 0:l.next_page_url)}),disabled:!((N=n.bankAccounts)!=null&&N.next_page_url),class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[33]||(t[33]=[e("i",{class:"fa-solid fa-chevron-right"},null,-1)]),8,He)])])])])])):D("",!0)]),P.value?(i(),b("div",{key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:G(U,["self"])},[e("div",We,[e("div",Xe,[e("div",ze,[e("h3",Ge,d(B.value==="create"?"Tambah Bank Account":"Edit Bank Account"),1),e("button",{onClick:U,class:"text-gray-400 hover:text-gray-600"},t[34]||(t[34]=[e("i",{class:"fa-solid fa-times"},null,-1)]))]),e("form",{onSubmit:G(Z,["prevent"]),class:"space-y-4"},[e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nama Bank *",-1)),x(e("input",{"onUpdate:modelValue":t[8]||(t[8]=a=>u.value.bank_name=a),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Contoh: Bank BCA"},null,512),[[q,u.value.bank_name]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nomor Rekening *",-1)),x(e("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>u.value.account_number=a),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Contoh: 1234567890"},null,512),[[q,u.value.account_number]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nama Pemilik Rekening *",-1)),x(e("input",{"onUpdate:modelValue":t[10]||(t[10]=a=>u.value.account_name=a),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Contoh: PT. ABC"},null,512),[[q,u.value.account_name]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Outlet",-1)),x(e("select",{"onUpdate:modelValue":t[11]||(t[11]=a=>u.value.outlet_id=a),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[t[38]||(t[38]=e("option",{value:null},"Tidak Terikat Outlet (Semua Outlet)",-1)),(i(!0),b($,null,j(n.outlets,a=>(i(),b("option",{key:a.id,value:a.id},d(a.name),9,Ye))),128))],512),[[M,u.value.outlet_id]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Chart of Account (COA)",-1)),x(e("select",{"onUpdate:modelValue":t[12]||(t[12]=a=>u.value.coa_id=a),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[t[40]||(t[40]=e("option",{value:null},"Pilih COA (Opsional)",-1)),(i(!0),b($,null,j(n.coas,a=>(i(),b("option",{key:a.id,value:a.id},d(a.code)+" - "+d(a.name)+" ("+d(a.type)+") ",9,Fe))),128))],512),[[M,u.value.coa_id]]),t[42]||(t[42]=e("p",{class:"mt-1 text-xs text-gray-500"},"Pilih akun COA yang terkait dengan bank account ini untuk pencatatan jurnal",-1))]),e("div",null,[e("label",Je,[x(e("input",{"onUpdate:modelValue":t[13]||(t[13]=a=>u.value.is_active=a),type:"checkbox",class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[ne,u.value.is_active]]),t[43]||(t[43]=e("span",{class:"ml-2 text-sm text-gray-700"},"Active",-1))])]),e("div",Ke,[e("button",{type:"button",onClick:U,disabled:A.value,class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed"}," Batal ",8,Qe),e("button",{type:"submit",disabled:A.value,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[A.value?(i(),b("i",et)):D("",!0),e("span",null,d(A.value?"Menyimpan...":"Simpan"),1)],8,Ze)])],32)])])])):D("",!0)])]}),_:1}))}};export{bt as default};
