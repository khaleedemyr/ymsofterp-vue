import{r as o,W as l,w as j,a as G,A as U,B as i,C as M,D as e,x as A,G as y,Q as z,l as p,H as O,J as W,L as x,F as I,M as J,N as r}from"./vendor-vue-g7iCcTkf.js";import{l as Y}from"./lodash-DB3HVzpp.js";import{S as m}from"./app-BFfP2QJl.js";import{A as P}from"./AppLayout-DwCHohmp.js";import Q from"./JabatanFormModal-q098JifO.js";import{a as q}from"./vendor-utils-CpgP2uT4.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as R}from"./vendor-ui-CrPgGUUb.js";import"./vendor-charts-CuqD4wLC.js";import"./ProfileUpdateModal-BgI6B89c.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const X={class:"max-w-7xl w-full mx-auto py-8 px-2"},Z={class:"flex items-center gap-3 mb-4"},ee={class:"mb-4"},te={class:"bg-white rounded-2xl shadow-lg overflow-hidden"},ae={class:"overflow-x-auto"},se={class:"min-w-full divide-y divide-gray-200"},oe={class:"bg-white divide-y divide-gray-200"},ne={class:"px-6 py-3 font-semibold"},le={class:"px-6 py-3"},re={class:"px-6 py-3"},ie={class:"px-6 py-3"},de={class:"px-6 py-3"},ue={class:"px-6 py-3"},ce=["onClick"],pe={class:"px-6 py-3"},xe={class:"flex gap-2"},me=["onClick"],fe=["onClick"],ve={class:"flex justify-end mt-4 gap-2"},be=["disabled","onClick","innerHTML"],he={__name:"Index",props:{jabatans:Object,filters:Object},setup(f){var k;const d=o(((k=f.filters)==null?void 0:k.search)||""),n=o(!1),u=o(!1),v=o("create"),b=o(null),c=o({jabatans:[],divisis:[],subDivisis:[],levels:[]}),h=o(!1),L=Y.debounce(()=>{l.get("/jabatans",{search:d.value,status:n.value?"inactive":"active"},{preserveState:!0,replace:!0})},400);j(n,t=>{l.get("/jabatans",{search:d.value,status:t?"inactive":"active"},{preserveState:!0,replace:!0})});function T(){L()}function E(t){t&&l.visit(t,{preserveState:!0,replace:!0})}function H(){v.value="create",b.value=null,g(),u.value=!0}function V(t){v.value="edit",b.value=t,g(),u.value=!0}async function N(t){(await m.fire({title:"Hapus Jabatan?",text:`Yakin ingin menghapus jabatan "${t.nama_jabatan}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed&&l.delete(route("jabatans.destroy",t.id_jabatan),{onSuccess:()=>m.fire("Berhasil","Jabatan berhasil dihapus!","success")})}function _(){l.reload({preserveState:!0,replace:!0})}function $(){u.value=!1}function F(t){l.patch(route("jabatans.toggle-status",t.id_jabatan),{},{preserveState:!0,onSuccess:_})}async function g(){h.value=!0;try{const t=await q.get(route("jabatans.dropdown-data"));t.data.success?(c.value={jabatans:t.data.jabatans||[],divisis:t.data.divisis||[],subDivisis:t.data.subDivisis||[],levels:t.data.levels||[]},console.log("Dropdown data loaded:",c.value)):(console.error("Failed to load dropdown data:",t.data.message),m.fire({icon:"error",title:"Error",text:"Gagal memuat data dropdown: "+(t.data.message||"Unknown error")}))}catch(t){console.error("Error fetching dropdown data:",t),m.fire({icon:"error",title:"Error",text:"Gagal memuat data dropdown. Silakan coba lagi."})}finally{h.value=!1}}return G(()=>{console.log("Component mounted, fetching dropdown data..."),g()}),j(c,t=>{console.log("Dropdown data changed:",t)},{deep:!0}),(t,s)=>(i(),U(P,null,{default:M(()=>[e("div",X,[e("div",{class:"flex justify-between items-center mb-6"},[s[2]||(s[2]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-user-tie text-blue-500"}),y(" Master Data Jabatan ")],-1)),e("button",{onClick:H,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"}," + Buat Jabatan Baru ")]),e("div",Z,[A(z(R),{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=a=>n.value=a),class:p([n.value?"bg-blue-600":"bg-gray-200","relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none"])},{default:M(()=>[e("span",{class:p([n.value?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition"])},null,2)]),_:1},8,["modelValue","class"]),s[3]||(s[3]=e("span",{class:"ml-2 text-sm text-gray-700"},"Tampilkan Inactive",-1))]),e("div",ee,[O(e("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>d.value=a),onInput:T,type:"text",placeholder:"Cari nama jabatan...",class:"w-full px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},null,544),[[W,d.value]])]),e("div",te,[e("div",ae,[e("table",se,[s[6]||(s[6]=e("thead",{class:"bg-gradient-to-r from-blue-500 to-blue-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Nama Jabatan"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Atasan"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Divisi"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Sub Divisi"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Level"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",oe,[(i(!0),x(I,null,J(f.jabatans.data,a=>{var w,C,S,B;return i(),x("tr",{key:a.id_jabatan,class:"hover:bg-blue-50 transition shadow-sm"},[e("td",ne,r(a.nama_jabatan),1),e("td",le,r(((w=a.atasan)==null?void 0:w.nama_jabatan)||"-"),1),e("td",re,r(((C=a.divisi)==null?void 0:C.nama_divisi)||"-"),1),e("td",ie,r(((S=a.sub_divisi)==null?void 0:S.nama_sub_divisi)||"-"),1),e("td",de,r(((B=a.level)==null?void 0:B.nama_level)||"-"),1),e("td",ue,[e("button",{class:p([a.status==="A"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700","px-2 py-1 rounded-full text-xs font-semibold shadow hover:opacity-80 transition"]),onClick:D=>F(a)},r(a.status==="A"?"Active":"Inactive"),11,ce)]),e("td",pe,[e("div",xe,[e("button",{onClick:D=>V(a),class:"inline-flex items-center btn btn-xs bg-yellow-100 text-yellow-800 hover:bg-yellow-200 rounded px-2 py-1 font-semibold transition"},s[4]||(s[4]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M15.232 5.232l3.536 3.536M9 13l6-6m2 2l-6 6m-2 2h6a2 2 0 002-2v-6a2 2 0 00-2-2H7a2 2 0 00-2 2v6a2 2 0 002 2z"})],-1),y(" Edit ")]),8,me),e("button",{onClick:D=>N(a),class:"inline-flex items-center btn btn-xs bg-red-100 text-red-700 hover:bg-red-200 rounded px-2 py-1 font-semibold transition"},s[5]||(s[5]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M6 18L18 6M6 6l12 12"})],-1),y(" Hapus ")]),8,fe)])])])}),128))])])])]),e("div",ve,[(i(!0),x(I,null,J(f.jabatans.links,a=>(i(),x("button",{key:a.label,disabled:!a.url,onClick:w=>E(a.url),innerHTML:a.label,class:p(["px-3 py-1 rounded-lg border text-sm font-semibold",[a.active?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-700 hover:bg-blue-50",a.url?"cursor-pointer":"opacity-50 cursor-not-allowed"]])},null,10,be))),128))]),A(Q,{show:u.value,mode:v.value,jabatan:b.value,"dropdown-data":c.value,"is-loading-dropdown":h.value,onClose:$,onSuccess:_},null,8,["show","mode","jabatan","dropdown-data","is-loading-dropdown"])])]),_:1}))}},Le=K(he,[["__scopeId","data-v-d5481519"]]);export{Le as default};
