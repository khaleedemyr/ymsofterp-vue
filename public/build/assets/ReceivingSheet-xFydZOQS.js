import{r as _,c as k,L as r,B as o,D as t,E as w,G as f,H as b,I as C,F as g,M as c,J as v,N as l,W as D,l as N}from"./vendor-vue-g7iCcTkf.js";import{A as S}from"./AppLayout-CCl6N_RX.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./app-DvUgkxHf.js";import"./vendor-charts-CuqD4wLC.js";import"./ProfileUpdateModal-oDgFzWKX.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const R={class:"min-h-screen w-full bg-gray-50 p-0"},z={class:"w-full bg-white shadow-2xl rounded-2xl p-8"},F={class:"bg-gray-50 rounded-xl p-6 mb-8"},O={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},A=["disabled"],I=["value"],V={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-8"},B={class:"summary-card gradient-blue"},L={class:"summary-value"},j={class:"summary-card gradient-green"},M={class:"summary-value"},U={class:"summary-card gradient-yellow"},E={class:"summary-value"},H={class:"summary-card gradient-purple"},W={class:"summary-value"},q={class:"overflow-x-auto"},G={class:"min-w-full rounded-2xl overflow-hidden shadow-lg"},J={class:"bg-[#2563eb] text-white font-bold text-base"},K={class:"px-6 py-4 text-gray-700"},P={class:"px-6 py-4 text-gray-700 font-medium"},Q={class:"px-6 py-4 text-right text-gray-700 font-medium"},X={class:"px-6 py-4 text-right"},Y={class:"px-6 py-4 text-right text-gray-700 font-medium"},Z={class:"px-6 py-4 text-right text-gray-700 font-medium"},$={key:0,class:"text-center py-12"},tt=Object.assign({layout:S},{__name:"ReceivingSheet",props:{report:{type:Array,default:()=>[]},outlets:{type:Array,default:()=>[]},warehouses:{type:Array,default:()=>[]},suppliers:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})},user:{type:Object,required:!0}},setup(d){const i=d,u=_({outlet:i.filters.outlet||"",date_from:i.filters.date_from||"",date_to:i.filters.date_to||""});i.user.id_outlet!=1&&(u.value.outlet=i.user.id_outlet);const x=k(()=>{const p=i.report.reduce((m,a)=>m+(Number(a.omzet)||0),0),e=i.report.reduce((m,a)=>m+(Number(a.cost)||0),0),s=i.report.length>0?i.report.reduce((m,a)=>m+(Number(a.persentase_cost)||0),0)/i.report.length:0;return{total_omzet:p,total_cost:e,avg_persentase_cost:s}}),y=()=>{D.get("/report-receiving-sheet",u.value,{preserveState:!0,preserveScroll:!0})},n=p=>{const e=Number(p)||0;return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)},h=p=>new Date(p).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return(p,e)=>(o(),r("div",R,[t("div",z,[e[19]||(e[19]=t("h1",{class:"text-2xl font-bold mb-6 text-blue-800 flex items-center gap-2"},[t("i",{class:"fa-solid fa-receipt"}),f(" Receiving Sheet Report ")],-1)),t("div",F,[t("div",O,[t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Outlet",-1)),b(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>u.value.outlet=s),disabled:d.user.id_outlet!=1,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:y},[e[3]||(e[3]=t("option",{value:""},"Semua Outlet",-1)),(o(!0),r(g,null,c(d.outlets,s=>(o(),r("option",{key:s.id_outlet,value:s.id_outlet},l(s.nama_outlet),9,I))),128))],40,A),[[C,u.value.outlet]])]),t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Dari Tanggal",-1)),b(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>u.value.date_from=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:y},null,544),[[v,u.value.date_from]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Sampai Tanggal",-1)),b(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>u.value.date_to=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:y},null,544),[[v,u.value.date_to]])]),t("div",{class:"flex items-end"},[t("button",{onClick:y,class:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium"},e[7]||(e[7]=[t("i",{class:"fa-solid fa-search mr-2"},null,-1),f(" Cari ")]))])])]),t("div",V,[t("div",B,[e[8]||(e[8]=t("div",{class:"summary-label"},"Total Omzet",-1)),t("div",L,l(n(x.value.total_omzet)),1)]),t("div",j,[e[9]||(e[9]=t("div",{class:"summary-label"},"Total Cost",-1)),t("div",M,l(n(x.value.total_cost)),1)]),t("div",U,[e[10]||(e[10]=t("div",{class:"summary-label"},"Rata-rata % Cost",-1)),t("div",E,l(x.value.avg_persentase_cost.toFixed(2))+"%",1)]),t("div",H,[e[11]||(e[11]=t("div",{class:"summary-label"},"Total Hari",-1)),t("div",W,l(d.report.length),1)])]),t("div",q,[t("table",G,[t("thead",null,[t("tr",J,[e[12]||(e[12]=t("th",{class:"px-6 py-3 text-left"},"No",-1)),e[13]||(e[13]=t("th",{class:"px-6 py-3 text-left"},"Tanggal",-1)),e[14]||(e[14]=t("th",{class:"px-6 py-3 text-right"},"Omzet",-1)),e[15]||(e[15]=t("th",{class:"px-6 py-3 text-right"},"% Cost",-1)),e[16]||(e[16]=t("th",{class:"px-6 py-3 text-right"},"Cost",-1)),(o(!0),r(g,null,c(d.warehouses,s=>(o(),r("th",{key:"wh-"+s.id,class:"px-6 py-3 text-right"},l(s.name),1))),128)),e[17]||(e[17]=t("th",{class:"px-6 py-3 text-right"},"Retail",-1)),(o(!0),r(g,null,c(d.suppliers,s=>(o(),r("th",{key:"sp-"+s.id,class:"px-6 py-3 text-right"},l(s.name),1))),128))])]),t("tbody",null,[(o(!0),r(g,null,c(d.report,(s,m)=>(o(),r("tr",{key:s.tanggal,class:"bg-white border-b last:border-b-0 hover:bg-blue-50"},[t("td",K,l(m+1),1),t("td",P,l(h(s.tanggal)),1),t("td",Q,l(n(s.omzet)),1),t("td",X,[t("span",{class:N(["font-bold px-2 py-1 rounded text-sm",s.persentase_cost>50?"bg-red-100 text-red-800":s.persentase_cost>30?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"])},l((Number(s.persentase_cost)||0).toFixed(2))+"% ",3)]),t("td",Y,l(n(s.cost)),1),(o(!0),r(g,null,c(d.warehouses,a=>(o(),r("td",{key:"wh-"+a.id,class:"px-6 py-4 text-right text-gray-700 font-medium"},l(n(s["warehouse_"+a.id])),1))),128)),t("td",Z,l(n(s.retail_food)),1),(o(!0),r(g,null,c(d.suppliers,a=>(o(),r("td",{key:"sp-"+a.id,class:"px-6 py-4 text-right text-gray-700 font-medium"},l(n(s["supplier_"+a.id])),1))),128))]))),128))])])]),d.report.length===0?(o(),r("div",$,e[18]||(e[18]=[t("div",{class:"text-gray-400 text-lg"},[t("i",{class:"fa-solid fa-inbox text-4xl mb-4"}),t("p",null,"Tidak ada data untuk ditampilkan")],-1)]))):w("",!0)])]))}}),mt=T(tt,[["__scopeId","data-v-e2455583"]]);export{mt as default};
