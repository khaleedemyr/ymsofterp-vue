import{r as u,c as b,w as Ee,A as xt,B as l,C as Pe,D as e,L as o,E as i,H as S,I as ke,F as h,M as _,N as n,l as w,G as m,O as ft,J as Z,W as bt,n as Ke}from"./vendor-vue-g7iCcTkf.js";import{A as vt}from"./AppLayout-BXpmQkyt.js";import{a as $}from"./vendor-utils-CpgP2uT4.js";import{S as f}from"./app-ErXbte2J.js";import{_ as yt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-C0i_S3gs.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const pt={class:"flex items-center justify-between"},kt={class:"flex items-center gap-4"},ht={class:"text-sm text-gray-600 dark:text-gray-400"},_t={class:"font-medium"},wt={class:"py-4"},Dt={class:"w-full px-4 sm:px-6 lg:px-8"},jt={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg mb-4"},Tt={class:"p-4"},Ct={class:"flex flex-wrap items-center gap-4"},At={class:"flex items-center gap-2"},St=["value"],Bt={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2 sm:gap-3 mb-4"},Ot={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},Mt={class:"p-3 sm:p-4"},Et={class:"flex items-center"},Pt={class:"ml-2 sm:ml-4"},Kt={class:"text-lg sm:text-2xl font-semibold text-gray-900 dark:text-gray-100"},Lt={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},It={class:"p-3 sm:p-4"},Ht={class:"flex items-center"},Ft={class:"ml-2 sm:ml-4"},Rt={class:"text-lg sm:text-2xl font-semibold text-gray-900 dark:text-gray-100"},$t={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},zt={class:"p-3 sm:p-4"},Jt={class:"flex items-center"},Nt={class:"ml-2 sm:ml-4"},Ut={class:"text-lg sm:text-2xl font-semibold text-gray-900 dark:text-gray-100"},Vt={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},Gt={class:"p-3 sm:p-4"},Wt={class:"flex items-center"},Yt={class:"ml-2 sm:ml-4"},Xt={class:"text-lg sm:text-2xl font-semibold text-gray-900 dark:text-gray-100"},Qt={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},Zt={class:"p-3 sm:p-4"},qt={class:"flex items-center"},ea={class:"ml-2 sm:ml-4"},ta={class:"text-lg sm:text-2xl font-semibold text-gray-900 dark:text-gray-100"},aa={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg mb-4"},sa={class:"p-4"},ra={class:"calendar-container"},la={class:"grid grid-cols-7 gap-0.5"},oa={key:0,class:"text-xs sm:text-xs text-red-600 dark:text-red-400 font-bold mb-0.5 leading-tight"},na={key:1,class:"space-y-0.5"},ia={class:"font-medium"},da={key:0,class:"hidden sm:block text-xs opacity-75"},ua={key:1,class:"mt-1 pt-1 border-t border-white/20"},ca={class:"text-xs opacity-90"},ma={class:"sm:hidden flex items-center gap-1"},ga={class:"text-green-400"},xa={key:0,class:"ml-1 text-red-500 font-bold text-xs"},fa={class:"hidden sm:block"},ba={class:"flex items-center gap-1"},va={class:"text-green-400"},ya={key:0,class:"flex items-center gap-1 mt-0.5"},pa={class:"text-red-400"},ka={key:1,class:"flex items-center gap-1 mt-0.5"},ha={key:2,class:"mt-1 space-y-0.5"},_a={key:0,class:"flex items-center gap-1"},wa={class:"text-yellow-400"},Da={key:1,class:"flex flex-col gap-0.5"},ja={class:"flex items-center gap-1"},Ta={class:"text-orange-400"},Ca={key:0,class:"flex items-center gap-1 ml-5"},Aa={class:"text-xs text-purple-400"},Sa=["onClick"],Ba={key:2,class:"mt-1 pt-1 border-t border-white/20"},Oa={class:"text-xs opacity-90"},Ma={class:"flex flex-col gap-0.5"},Ea={class:"flex items-center gap-1"},Pa={class:"text-purple-400"},Ka={key:2,class:"mt-1"},La={class:"w-full text-xs bg-green-500 text-white px-1 py-0.5 rounded"},Ia={class:"hidden sm:inline"},Ha={class:"text-xs text-green-600 dark:text-green-400 mt-0.5"},Fa={key:3,class:"mt-1"},Ra=["onClick"],$a={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},za={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-hidden"},Ja={class:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700"},Na={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},Ua={class:"p-4 overflow-y-auto max-h-[60vh]"},Va={key:0,class:"text-center py-8"},Ga={key:1,class:"text-center py-8"},Wa={key:2,class:"space-y-4"},Ya={class:"flex items-center justify-between mb-3"},Xa={class:"font-semibold text-gray-900 dark:text-gray-100"},Qa={class:"text-sm text-gray-500 dark:text-gray-400"},Za={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qa={class:"space-y-2"},es={class:"flex items-center gap-2"},ts={class:"text-sm text-gray-900 dark:text-gray-100"},as={class:"flex items-center gap-2"},ss={key:0,class:"text-sm text-red-600 font-bold"},rs={key:1,class:"text-sm text-gray-900 dark:text-gray-100"},ls={class:"space-y-2"},os={class:"flex items-center gap-2"},ns={class:"text-sm text-gray-900 dark:text-gray-100"},is={class:"flex items-center gap-2"},ds={class:"text-sm text-gray-900 dark:text-gray-100"},us={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg mb-4"},cs={class:"p-4"},ms={key:0,class:"text-center py-8"},gs={key:1,class:"space-y-3"},xs={class:"flex items-center justify-between"},fs={class:"flex-1"},bs={class:"flex items-center gap-2 mb-2"},vs={class:"text-sm text-gray-600 dark:text-gray-400"},ys={class:"text-sm text-gray-900 dark:text-gray-100 mb-1"},ps={class:"text-sm text-gray-600 dark:text-gray-400 mb-2"},ks={key:0,class:"text-xs mb-2"},hs={key:0},_s={key:1},ws={class:"text-xs text-gray-500 dark:text-gray-400"},Ds={key:0,class:"ml-4"},js=["onClick"],Ts={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4"},Cs={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},As={class:"p-4"},Ss={class:"grid grid-cols-2 gap-4 mb-4"},Bs={class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 border border-blue-200 dark:border-blue-700"},Os={class:"text-center"},Ms={class:"text-2xl font-bold text-blue-900 dark:text-blue-100"},Es={class:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 border border-green-200 dark:border-green-700"},Ps={class:"text-center"},Ks={class:"text-2xl font-bold text-green-900 dark:text-green-100"},Ls={key:0,class:"space-y-2"},Is={class:"space-y-2 max-h-40 overflow-y-auto"},Hs={class:"flex-1"},Fs={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Rs={class:"text-xs text-gray-500 dark:text-gray-400"},$s={class:"text-right"},zs={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Js={key:1,class:"text-center py-4"},Ns={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},Us={class:"p-4"},Vs={class:"grid grid-cols-2 gap-4 mb-4"},Gs={class:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-3 border border-purple-200 dark:border-purple-700"},Ws={class:"text-center"},Ys={class:"text-2xl font-bold text-purple-900 dark:text-purple-100"},Xs={class:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-3 border border-orange-200 dark:border-orange-700"},Qs={class:"text-center"},Zs={class:"text-2xl font-bold text-orange-900 dark:text-orange-100"},qs={key:0,class:"space-y-2"},er={class:"space-y-2 max-h-40 overflow-y-auto"},tr={class:"flex-1"},ar={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},sr={class:"text-xs text-gray-500 dark:text-gray-400"},rr={class:"text-right"},lr={key:1,class:"text-center py-4"},or={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},nr={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] flex flex-col"},ir={class:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0"},dr={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},ur={class:"p-4 overflow-y-auto flex-1"},cr={class:"space-y-4"},mr=["value"],gr={key:0},xr={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},fr={key:0,class:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700"},br={class:"flex items-center justify-between"},vr={class:"text-right"},yr={key:0,class:"flex items-center"},pr={key:1},kr={class:"text-2xl font-bold text-blue-900 dark:text-blue-100"},hr={key:0,class:"mt-3 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded border border-yellow-200 dark:border-yellow-700"},_r={key:1,class:"mt-3"},wr={class:"text-xs"},Dr={class:"mt-2 space-y-1"},jr={class:"font-medium"},Tr={class:"text-gray-500 dark:text-gray-400 ml-2"},Cr={key:1,class:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-700"},Ar={class:"flex items-center justify-between"},Sr={class:"text-right"},Br={class:"text-2xl font-bold text-green-900 dark:text-green-100"},Or={key:0,class:"mt-3 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded border border-yellow-200 dark:border-yellow-700"},Mr={key:1,class:"mt-3 p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-700"},Er={class:"flex items-center"},Pr={class:"text-sm text-blue-800 dark:text-blue-200"},Kr={key:2,class:"mt-4 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-700"},Lr={class:"flex items-center justify-between"},Ir={class:"text-right"},Hr={key:0,class:"flex items-center"},Fr={key:1},Rr={class:"text-2xl font-bold text-purple-900 dark:text-purple-100"},$r={key:0,class:"mt-3 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded border border-yellow-200 dark:border-yellow-700"},zr={key:1,class:"mt-3 p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-700"},Jr={class:"flex items-center"},Nr={class:"text-sm text-blue-800 dark:text-blue-200"},Ur={class:"grid grid-cols-2 gap-3"},Vr=["disabled"],Gr={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Wr={key:3},Yr={class:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border"},Xr={class:"flex items-center justify-between mb-2"},Qr={class:"flex items-center justify-between"},Zr={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},qr={key:0,class:"mt-3 p-2 bg-red-50 dark:bg-red-900/20 rounded border border-red-200 dark:border-red-700"},el={class:"flex items-center"},tl={class:"text-sm text-red-800 dark:text-red-200"},al={key:1,class:"mt-3 p-2 bg-green-50 dark:bg-green-900/20 rounded border border-green-200 dark:border-green-700"},sl={class:"relative"},rl={key:0,class:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-y-auto"},ll=["onClick"],ol={class:"font-medium text-gray-900 dark:text-white"},nl={class:"text-sm text-gray-600 dark:text-gray-400"},il={key:0,class:"text-xs text-blue-600 dark:text-blue-400 font-medium"},dl={key:1,class:"text-xs text-gray-500 dark:text-gray-400"},ul={key:2,class:"text-xs text-green-600 dark:text-green-400 font-medium"},cl={key:0,class:"mt-3 space-y-2"},ml={class:"flex items-start justify-between"},gl={class:"flex-1"},xl={class:"flex items-center gap-2 mb-1"},fl={class:"text-xs font-semibold text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-800 px-2 py-0.5 rounded"},bl={class:"font-medium text-blue-900 dark:text-blue-100"},vl={class:"text-sm text-blue-700 dark:text-blue-300"},yl={key:0,class:"text-xs text-blue-600 dark:text-blue-400 font-medium"},pl={key:1,class:"text-xs text-blue-500 dark:text-blue-400"},kl={key:2,class:"text-xs text-green-600 dark:text-green-400 font-medium"},hl=["onClick"],_l={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},wl={key:0,class:"text-red-500"},Dl={key:1,class:"text-gray-500"},jl={key:0,class:"space-y-3"},Tl={class:"text-xs text-gray-500 dark:text-gray-400 text-center"},Cl={key:0,class:"text-red-500 block"},Al={key:1,class:"space-y-3"},Sl={class:"grid grid-cols-2 gap-3"},Bl=["src","alt"],Ol=["onClick"],Ml={class:"text-xs text-green-600 dark:text-green-400 text-center"},El={class:"flex justify-end gap-3 p-4 border-t border-gray-200 dark:border-gray-700 flex-shrink-0"},Pl=["disabled"],Kl={key:0,class:"fa-solid fa-spinner fa-spin mr-2"},Ll={key:1,class:"fa-solid fa-paper-plane mr-2"},Il={key:2,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50"},Hl={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4"},Fl={class:"p-4"},Rl={key:0,class:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-700"},$l={class:"flex items-center"},zl={class:"text-sm text-red-800 dark:text-red-200"},Jl={key:1,class:"space-y-4"},Nl={class:"relative bg-black rounded-lg overflow-hidden"},Ul={class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex items-center space-x-4"},Vl={class:"absolute top-4 left-4 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-sm"},Gl={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Wl={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4"},Yl={class:"p-4"},Xl={class:"mb-4"},Ql={key:0,class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 mb-4"},Zl={class:"text-sm text-gray-900 dark:text-gray-100"},ql={class:"text-sm text-gray-900 dark:text-gray-100"},eo={class:"text-sm text-gray-600 dark:text-gray-400"},to={class:"mb-4"},ao={class:"flex justify-end gap-3"},so=["disabled"],ro={key:0,class:"fa-solid fa-spinner fa-spin mr-2"},lo={key:1,class:"fa-solid fa-times mr-2"},oo={key:4,class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg mb-4"},no={class:"p-4"},io={class:"space-y-3"},uo={class:"flex items-start justify-between"},co={class:"flex-1"},mo={class:"flex items-center gap-2 mb-2"},go={key:0,class:"fas fa-clock mr-1"},xo={key:1,class:"fas fa-check mr-1"},fo={key:2,class:"fas fa-times mr-1"},bo={class:"text-sm text-gray-500 dark:text-gray-400"},vo={class:"mb-2"},yo={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},po={class:"text-sm text-gray-600 dark:text-gray-400 mb-1"},ko={class:"font-medium"},ho={class:"text-sm text-gray-600 dark:text-gray-400"},_o={class:"mb-2"},wo={class:"ml-4 mt-1 p-2 bg-red-50 dark:bg-red-900/20 rounded border-l-2 border-red-300"},Do={class:"ml-4 mt-1 p-2 bg-green-50 dark:bg-green-900/20 rounded border-l-2 border-green-300"},jo={class:"text-sm text-gray-600 dark:text-gray-400 mb-2"},To={key:0,class:"text-sm text-green-600 dark:text-green-400"},Co={class:"ml-2"},Ao={key:1,class:"text-sm text-red-600 dark:text-red-400"},So={__name:"Index",props:{workSchedules:Array,attendanceRecords:Array,attendanceSummary:Object,calendar:Object,holidays:Array,approvedAbsents:Array,userLeaveRequests:Array,leaveTypes:Array,availableApprovers:Array,phData:Object,extraOffData:Object,correctionRequests:Array,filters:Object,user:Object},setup(x){const y=x,T=u({bulan:y.filters.bulan,tahun:y.filters.tahun}),ne=u(!1),ie=u(""),E=u([]),de=u(!1);u({});const he=u(!1),z=u(y.userLeaveRequests||[]),J=u([]),N=u(!1),_e=u(0),U=u(!1),Le=b(()=>{const s=new Date().getFullYear(),t=[];for(let a=s-2;a<=s+1;a++)t.push(a);return t}),Ie=b(()=>{const s=new Date(y.filters.start_date),t=new Date(y.filters.end_date),a=[],r=new Date(s);r.setDate(s.getDate()-s.getDay());const g=Math.ceil((t-r)/(1e3*60*60*24))+1,A=Math.ceil(g/7)*7;for(let X=0;X<A;X++){const Q=new Date(r);Q.setDate(r.getDate()+X);const oe=Q.toISOString().split("T")[0],it=Q>=s&&Q<=t,dt=oe===new Date().toISOString().split("T")[0],ut=y.calendar[oe]||{},ct=Object.values(ut),mt=y.holidays.find(gt=>gt.date===oe);a.push({date:oe,day:Q.getDate(),isInPayrollPeriod:it,isToday:dt,schedules:ct,holiday:mt})}return a}),ue=b(()=>s=>{if(!y.approvedAbsents)return null;const t=new Date(s).toISOString().split("T")[0];return y.approvedAbsents.find(a=>{const r=new Date(a.date_from).toISOString().split("T")[0],g=new Date(a.date_to).toISOString().split("T")[0];return t>=r&&t<=g})}),q=()=>{he.value=!0,bt.get(route("attendance.index"),T.value,{preserveState:!0,replace:!0,onFinish:()=>{he.value=!1}})},He=()=>{const s=new Date;T.value.bulan=s.getMonth()+1,T.value.tahun=s.getFullYear(),q()},Fe=async s=>{ie.value=s,ne.value=!0,de.value=!0,E.value=[];try{const t=await $.get("/attendance-report/detail",{params:{user_id:y.user.id,tanggal:s}});E.value=t.data}catch(t){console.error("Error fetching attendance detail:",t),E.value=[]}finally{de.value=!1}},we=()=>{ne.value=!1,ie.value="",E.value=[]},ce=u(!1),me=u(""),B=u(!1),c=u({leave_type_id:"",reason:"",approver_id:"",document:null,date_from:"",date_to:""}),j=u(""),P=u([]),K=u(!1),p=u([]),ge=u(!1),D=u(null),V=u(""),L=u(!1),ee=u(!1),G=u(null),W=u(null),xe=u(null),v=u([]),te=u("user"),ae=u([]),C=u(""),d=b(()=>!c.value.leave_type_id||!y.leaveTypes?null:y.leaveTypes.find(s=>s.id==c.value.leave_type_id)),I=b(()=>d.value&&d.value.name&&(d.value.name.toLowerCase().includes("public holiday")||d.value.name.toLowerCase().includes("libur nasional")||d.value.name.toLowerCase().includes("hari libur"))),H=b(()=>d.value&&d.value.name&&(d.value.name.toLowerCase().includes("annual leave")||d.value.name.toLowerCase().includes("cuti tahunan")||d.value.name.toLowerCase().includes("cuti"))),F=b(()=>d.value&&d.value.name&&d.value.name.toLowerCase().includes("extra off")),R=b(()=>!J.value||J.value.length===0?0:J.value.reduce((s,t)=>{const a=t.available_amount!==void 0?t.available_amount:t.compensation_amount;return s+(parseFloat(a)||0)},0)),O=b(()=>{var s;return((s=y.user)==null?void 0:s.cuti)||0}),M=b(()=>_e.value),Re=b(()=>{if(!d.value||!c.value.date_from)return c.value.date_from;const s=new Date(c.value.date_from),t=d.value.max_days;if(t===0)return c.value.date_from;{const a=new Date(s);return a.setDate(a.getDate()+(t-1)),a.toISOString().split("T")[0]}}),se=b(()=>{if(!c.value.date_from||!c.value.date_to)return 0;const s=new Date(c.value.date_from),t=new Date(c.value.date_to);if(t<s)return 0;const a=t.getTime()-s.getTime();return Math.ceil(a/(1e3*3600*24))+1}),re=b(()=>I.value?R.value:H.value?O.value:F.value?M.value:0),Y=b(()=>d.value&&(I.value||H.value||F.value)?se.value>re.value:!1),De=b(()=>{var r;if(!Y.value)return"";const s=((r=d.value)==null?void 0:r.name)||"jenis cuti ini",t=re.value;return`Jumlah hari yang dipilih (${se.value} hari) melebihi saldo yang tersedia (${t} hari) untuk ${s}.`});Ee([()=>c.value.leave_type_id,()=>c.value.date_from],()=>{d.value&&d.value.max_days>0&&(c.value.date_to=Re.value)});const je=s=>!s.schedules||s.schedules.length===0?!1:s.schedules.some(t=>t.has_attendance&&t.first_in),$e=s=>{if(!s)return!1;try{const t=new Date,a=new Date(s);if(isNaN(a.getTime()))return!1;t.setHours(0,0,0,0),a.setHours(0,0,0,0);const r=new Date(t);return r.setDate(r.getDate()-1),a.getTime()===r.getTime()}catch(t){return console.error("Error checking yesterday:",t),!1}},ze=s=>$e(s.date)?!je(s):!0,Je=s=>{if(!s)return!1;try{const t=new Date,a=new Date(s);if(isNaN(a.getTime()))return!1;t.setHours(0,0,0,0),a.setHours(0,0,0,0);const r=new Date(t);return r.setDate(r.getDate()-1),a<r}catch(t){return console.error("Error checking past date:",t),!1}},Ne=s=>{me.value=s,ce.value=!0,c.value={leave_type_id:"",reason:"",approver_id:"",document:null,date_from:s,date_to:s},v.value=[],p.value=[],j.value="",K.value=!1,Ue(),Ve()},Ue=async()=>{N.value=!0;try{const s=await $.get("/api/holiday-attendance/my-extra-off-days");s.data.success&&(J.value=s.data.extra_off_days)}catch(s){console.error("Error loading extra off days:",s)}finally{N.value=!1}},Ve=async()=>{U.value=!0;try{const s=await $.get("/api/extra-off/balance");s.data.success&&(_e.value=s.data.balance)}catch(s){console.error("Error loading extra off balance:",s)}finally{U.value=!1}},fe=()=>{ce.value=!1,me.value="",B.value=!1,ee.value=!1,v.value=[],c.value.document=null,ve(),p.value=[],j.value="",P.value=[],K.value=!1,c.value.approver_id=""},Te=async()=>{ee.value=!0,C.value="",await Ke(),await Ce()},be=()=>{ee.value=!1,ve()},Ce=async()=>{try{const s=await navigator.mediaDevices.enumerateDevices();if(ae.value=s.filter(a=>a.kind==="videoinput"),ae.value.length===0){C.value="Tidak ada kamera yang tersedia";return}const t={video:{facingMode:te.value,width:{ideal:1280},height:{ideal:720}}};G.value=await navigator.mediaDevices.getUserMedia(t),W.value&&(W.value.srcObject=G.value)}catch(s){console.error("Camera error:",s),s.name==="NotAllowedError"?C.value="Akses kamera ditolak. Silakan berikan izin kamera di browser.":s.name==="NotFoundError"?C.value="Tidak ada kamera yang ditemukan di perangkat ini.":s.name==="NotSupportedError"?C.value="Browser tidak mendukung akses kamera.":C.value="Gagal mengakses kamera. Pastikan izin kamera sudah diberikan."}},ve=()=>{G.value&&(G.value.getTracks().forEach(s=>s.stop()),G.value=null)},Ge=async()=>{ae.value.length<=1||(te.value=te.value==="user"?"environment":"user",ve(),await Ke(),await Ce())},We=()=>{if(!W.value||!xe.value)return;const s=W.value,t=xe.value,a=t.getContext("2d");t.width=s.videoWidth,t.height=s.videoHeight,a.drawImage(s,0,0,t.width,t.height),t.toBlob(r=>{if(r){const g=new Date().getTime(),k=new File([r],`camera-capture-${g}.jpg`,{type:"image/jpeg"});v.value.push({id:g,file:k,preview:URL.createObjectURL(r)}),be(),f.fire({icon:"success",title:"Foto Berhasil Diambil",text:"Foto telah berhasil diambil dan ditambahkan ke dokumen pendukung.",confirmButtonText:"OK",confirmButtonColor:"#10B981",timer:2e3,showConfirmButton:!1})}},"image/jpeg",.8)},Ye=s=>{const t=v.value.findIndex(a=>a.id===s);t>-1&&(URL.revokeObjectURL(v.value[t].preview),v.value.splice(t,1))},Xe=()=>{v.value.forEach(s=>{URL.revokeObjectURL(s.preview)}),v.value=[]},Ae=async()=>{if(I.value&&R.value===0){await f.fire({icon:"warning",title:"Saldo Tidak Tersedia",text:"Anda tidak memiliki saldo extra off dari kerja di hari libur nasional yang tersedia untuk mengajukan izin ini.",confirmButtonText:"OK",confirmButtonColor:"#3B82F6"});return}if(H.value&&O.value===0){await f.fire({icon:"warning",title:"Saldo Tidak Tersedia",text:"Anda tidak memiliki saldo cuti tahunan yang tersedia untuk mengajukan izin ini.",confirmButtonText:"OK",confirmButtonColor:"#3B82F6"});return}if(F.value&&M.value===0){await f.fire({icon:"warning",title:"Saldo Tidak Tersedia",text:"Anda tidak memiliki saldo extra off yang tersedia untuk mengajukan izin ini.",confirmButtonText:"OK",confirmButtonColor:"#3B82F6"});return}if(Y.value){await f.fire({icon:"error",title:"Jumlah Hari Melebihi Saldo",text:De.value,confirmButtonText:"OK",confirmButtonColor:"#EF4444"});return}if(B.value=!0,p.value.length===0){await f.fire({icon:"warning",title:"Atasan Diperlukan",text:"Silakan pilih minimal satu atasan sebelum mengirim permohonan",confirmButtonText:"OK",confirmButtonColor:"#3B82F6"}),B.value=!1;return}try{const s=new FormData;s.append("leave_type_id",c.value.leave_type_id),s.append("date_from",c.value.date_from),s.append("date_to",c.value.date_to),s.append("reason",c.value.reason),p.value.length>0&&p.value.forEach(a=>{s.append("approvers[]",a.id)}),p.value.length===1&&s.append("approver_id",p.value[0].id),v.value.length>0&&v.value.forEach((a,r)=>{s.append("documents[]",a.file)});const t=await $.post("/api/attendance/absent-request",s,{headers:{"Content-Type":"multipart/form-data"}});t.data.success?(await f.fire({icon:"success",title:"Berhasil!",text:"Permohonan izin/cuti berhasil dikirim!",confirmButtonText:"OK",confirmButtonColor:"#10B981"}),fe()):await f.fire({icon:"error",title:"Gagal Mengirim",text:"Gagal mengirim permohonan: "+(t.data.message||"Terjadi kesalahan"),confirmButtonText:"OK",confirmButtonColor:"#EF4444"})}catch(s){if(console.error("Error submitting absent request:",s),s.response&&s.response.data){const t=s.response.data,a=s.response.status;if(a===422&&t.errors){const r=t.errors;let g='<div class="text-left">';g+='<p class="font-semibold text-red-600 mb-3">Data tidak valid. Periksa field berikut:</p>',g+='<ul class="list-disc list-inside text-sm space-y-1">',Object.keys(r).forEach(k=>{const A=st(k);Array.isArray(r[k])?r[k].forEach(X=>{g+=`<li class="text-red-600"><strong>${A}:</strong> ${X}</li>`}):g+=`<li class="text-red-600"><strong>${A}:</strong> ${r[k]}</li>`}),g+="</ul>",g+='<p class="text-xs text-gray-500 mt-3">Silakan perbaiki field yang bermasalah dan coba lagi.</p>',g+="</div>",await f.fire({icon:"error",title:"Data Tidak Valid",html:g,confirmButtonText:"OK",confirmButtonColor:"#EF4444",width:"500px"})}else if(t.message){let r='<div class="text-left">';r+='<p class="font-semibold text-red-600 mb-3">Gagal mengirim permohonan izin/cuti:</p>',r+='<div class="bg-red-50 border border-red-200 rounded-md p-3 mb-3">',r+=`<p class="text-red-800">${t.message}</p>`,r+="</div>",t.message.includes("sudah mengajukan izin/cuti")?(r+='<div class="bg-yellow-50 border border-yellow-200 rounded-md p-3 mb-3">',r+='<p class="text-yellow-800 text-sm"><strong>Solusi:</strong></p>',r+='<ul class="list-disc list-inside text-yellow-700 text-sm mt-2">',r+="<li>Periksa apakah Anda sudah mengajukan izin/cuti untuk tanggal yang sama</li>",r+="<li>Pilih rentang tanggal yang berbeda</li>",r+="<li>Hubungi HR jika Anda yakin belum pernah mengajukan izin/cuti</li>",r+="</ul>",r+="</div>"):t.message.includes("data kehadiran")&&(r+='<div class="bg-blue-50 border border-blue-200 rounded-md p-3 mb-3">',r+='<p class="text-blue-800 text-sm"><strong>Informasi:</strong></p>',r+='<p class="text-blue-700 text-sm mt-2">Anda sudah memiliki data kehadiran untuk salah satu tanggal dalam rentang ini. Tidak dapat mengajukan izin/cuti untuk tanggal yang sudah ada kehadiran.</p>',r+="</div>"),r+='<p class="text-xs text-gray-500 mt-3">Jika masalah berlanjut, silakan hubungi administrator.</p>',r+="</div>",await f.fire({icon:"error",title:"Gagal Mengirim Permohonan",html:r,confirmButtonText:"OK",confirmButtonColor:"#EF4444",width:"600px"})}else await f.fire({icon:"error",title:"Terjadi Kesalahan",html:`
            <div class="text-left">
              <p class="font-semibold text-red-600 mb-3">Terjadi kesalahan saat mengirim permohonan:</p>
              <div class="bg-red-50 border border-red-200 rounded-md p-3 mb-3">
                <p class="text-red-800">Status: ${a}</p>
                <p class="text-red-800">Response: ${JSON.stringify(t,null,2)}</p>
              </div>
              <p class="text-xs text-gray-500 mt-3">Silakan coba lagi atau hubungi administrator jika masalah berlanjut.</p>
            </div>
          `,confirmButtonText:"OK",confirmButtonColor:"#EF4444",width:"600px"})}else s.request?await f.fire({icon:"error",title:"Koneksi Bermasalah",html:`
          <div class="text-left">
            <p class="font-semibold text-red-600 mb-3">Tidak dapat terhubung ke server:</p>
            <div class="bg-red-50 border border-red-200 rounded-md p-3 mb-3">
              <p class="text-red-800">Periksa koneksi internet Anda dan coba lagi.</p>
            </div>
            <p class="text-xs text-gray-500 mt-3">Jika masalah berlanjut, silakan hubungi administrator.</p>
          </div>
        `,confirmButtonText:"OK",confirmButtonColor:"#EF4444",width:"500px"}):await f.fire({icon:"error",title:"Terjadi Kesalahan",html:`
          <div class="text-left">
            <p class="font-semibold text-red-600 mb-3">Terjadi kesalahan tidak terduga:</p>
            <div class="bg-red-50 border border-red-200 rounded-md p-3 mb-3">
              <p class="text-red-800">${s.message||"Unknown error"}</p>
            </div>
            <p class="text-xs text-gray-500 mt-3">Silakan coba lagi atau hubungi administrator jika masalah berlanjut.</p>
          </div>
        `,confirmButtonText:"OK",confirmButtonColor:"#EF4444",width:"500px"})}finally{B.value=!1}},Se=async(s="")=>{try{const t=await $.get("/api/attendance/approvers",{params:{search:s},headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});t.data.success&&(P.value=t.data.users,K.value=!0)}catch(t){console.error("Failed to load approvers:",t),P.value=[]}},Qe=s=>{p.value.find(t=>t.id===s.id)||p.value.push(s),j.value="",K.value=!1},Ze=s=>{p.value.splice(s,1)},qe=()=>{j.value.length>=2?Se(j.value):(K.value=!1,P.value=[])},et=s=>{if(!["pending","supervisor_approved","approved"].includes(s.status))return!1;const t=new Date(s.date_from);t.setHours(0,0,0,0);const a=new Date;return a.setHours(0,0,0,0),!(t<a)},tt=s=>{D.value=s,V.value="",ge.value=!0},ye=()=>{ge.value=!1,D.value=null,V.value="",L.value=!1},at=async()=>{if(D.value){L.value=!0;try{const s=await $.post(`/api/attendance/cancel-leave/${D.value.id}`,{reason:V.value||"Dibatalkan oleh user"});if(s.data.success)try{const t=z.value.findIndex(a=>a.id===D.value.id);t>-1&&z.value.splice(t,1),ye(),await f.fire({icon:"success",title:"Berhasil!",text:"Permohonan izin/cuti berhasil dibatalkan",confirmButtonText:"OK",confirmButtonColor:"#10B981"})}catch(t){console.error("Error in success handling:",t),await f.fire({icon:"success",title:"Berhasil!",text:"Permohonan izin/cuti berhasil dibatalkan",confirmButtonText:"OK",confirmButtonColor:"#10B981"})}else await f.fire({icon:"error",title:"Gagal Membatalkan",text:s.data.message||"Terjadi kesalahan saat membatalkan permohonan",confirmButtonText:"OK",confirmButtonColor:"#EF4444"})}catch(s){console.error("Error cancelling leave request:",s);let t="Terjadi kesalahan saat membatalkan permohonan";s.response&&s.response.data&&s.response.data.message&&(t=s.response.data.message),await f.fire({icon:"error",title:"Gagal Membatalkan",text:t,confirmButtonText:"OK",confirmButtonColor:"#EF4444"})}finally{L.value=!1}}},st=s=>({leave_type_id:"Jenis Izin/Cuti",date_from:"Tanggal Mulai",date_to:"Tanggal Selesai",reason:"Alasan",approver_id:"Atasan",document:"Dokumen",documents:"Dokumen"})[s]||s,le=s=>s?new Date(s).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"",Be=(s,t)=>{if(!s||!t)return"";const a=new Date(s),r=new Date(t);return s===t?a.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}):`${a.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})} - ${r.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}`},pe=s=>s?new Date(s).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",Oe=s=>{const t={pending:"Menunggu Persetujuan",supervisor_approved:"Disetujui Atasan",approved:"Disetujui",rejected:"Ditolak",cancelled:"Dibatalkan"},a={present:"Hadir",late:"Terlambat",absent:"Tidak Hadir",half_day:"Setengah Hari"},r={pending:"Menunggu Persetujuan",approved:"Disetujui",rejected:"Ditolak"};return t[s]?t[s]:a[s]?a[s]:r[s]?r[s]:s},rt=s=>s.description?s.description:{unscheduled_work:"Kerja tanpa shift",manual_adjustment:"Penyesuaian manual",holiday_work:"Kerja di hari libur",overtime_work:"Lembur"}[s.source_type]||s.source_type||"Extra Off",lt=(s,t)=>{if(!s||!t)return"-";try{const a=new Date(`2000-01-01 ${s}`),r=new Date(`2000-01-01 ${t}`);r<a&&r.setHours(r.getHours()+24);const g=r-a,k=Math.floor(g/(1e3*60*60)),A=Math.floor(g%(1e3*60*60)/(1e3*60));return`${k}j ${A}m`}catch{return"-"}},ot=s=>{var a;const t=((a=s.shift_name)==null?void 0:a.toLowerCase())||"";return!t||t==="-"||t==="off"?"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400":t.includes("m95")||t.includes("morning")?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200":t.includes("s95")||t.includes("siang")?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":t.includes("malam")||t.includes("night")?"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200":"bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200"};Ee(T,()=>{q()},{deep:!0});const nt=s=>({schedule:"Koreksi Jadwal",attendance:"Koreksi Kehadiran",manual_attendance:"Tambah Kehadiran Manual"})[s]||s,Me=(s,t)=>{if(!s)return"Tidak ada data";try{const a=typeof s=="string"?JSON.parse(s):s;if(t==="schedule"||t==="attendance"){if(t==="schedule")return a==="OFF"?"Libur":`Shift: ${a}`;if(t==="attendance"&&a.scan_date){const r=new Date(a.scan_date),g=r.toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}),k=r.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"});return`${a.inoutmode===1?"Masuk":a.inoutmode===2?"Keluar":`Mode ${a.inoutmode}`} - ${g} ${k}`}}if(t==="manual_attendance"&&a.scan_date){const r=new Date(a.scan_date),g=r.toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}),k=r.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"});return`Tambah ${a.inoutmode===1?"Masuk":a.inoutmode===2?"Keluar":`Mode ${a.inoutmode}`} - ${g} ${k}`}return s}catch{return s}};return(s,t)=>(l(),xt(vt,{title:"Attendance"},{header:Pe(()=>[e("div",pt,[t[10]||(t[10]=e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Jadwal Kerja & Attendance ",-1)),e("div",kt,[e("div",ht,[t[9]||(t[9]=m(" Selamat datang, ")),e("span",_t,n(x.user.nama_lengkap),1)])])])]),default:Pe(()=>[e("div",wt,[e("div",Dt,[e("div",jt,[e("div",Tt,[e("div",Ct,[e("div",At,[t[12]||(t[12]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Periode:",-1)),S(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>T.value.bulan=a),class:"rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onChange:q},t[11]||(t[11]=[e("option",{value:"1"},"Januari",-1),e("option",{value:"2"},"Februari",-1),e("option",{value:"3"},"Maret",-1),e("option",{value:"4"},"April",-1),e("option",{value:"5"},"Mei",-1),e("option",{value:"6"},"Juni",-1),e("option",{value:"7"},"Juli",-1),e("option",{value:"8"},"Agustus",-1),e("option",{value:"9"},"September",-1),e("option",{value:"10"},"Oktober",-1),e("option",{value:"11"},"November",-1),e("option",{value:"12"},"Desember",-1)]),544),[[ke,T.value.bulan]]),S(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>T.value.tahun=a),class:"rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onChange:q},[(l(!0),o(h,null,_(Le.value,a=>(l(),o("option",{key:a,value:a},n(a),9,St))),128))],544),[[ke,T.value.tahun]])]),e("button",{onClick:He,class:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors"}," Reset ")])])]),e("div",Bt,[e("div",Ot,[e("div",Mt,[e("div",Et,[t[14]||(t[14]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center"},[e("i",{class:"fas fa-check text-green-600 dark:text-green-400 text-xs sm:text-sm"})])],-1)),e("div",Pt,[t[13]||(t[13]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400"},"Hadir",-1)),e("p",Kt,n(x.attendanceSummary.present_days||0)+" Hari ",1)])])])]),e("div",Lt,[e("div",It,[e("div",Ht,[t[16]||(t[16]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-yellow-100 dark:bg-yellow-900 rounded-full flex items-center justify-center"},[e("i",{class:"fas fa-clock text-yellow-600 dark:text-yellow-400 text-xs sm:text-sm"})])],-1)),e("div",Ft,[t[15]||(t[15]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400"},"Terlambat",-1)),e("p",Rt,n(x.attendanceSummary.total_late_minutes||0)+" Menit ",1)])])])]),e("div",$t,[e("div",zt,[e("div",Jt,[t[18]||(t[18]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center"},[e("i",{class:"fas fa-times text-red-600 dark:text-red-400 text-xs sm:text-sm"})])],-1)),e("div",Nt,[t[17]||(t[17]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400"},"Tidak Hadir",-1)),e("p",Ut,n(x.attendanceSummary.absent_days||0)+" Hari ",1)])])])]),e("div",Vt,[e("div",Gt,[e("div",Wt,[t[20]||(t[20]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-orange-100 dark:bg-orange-900 rounded-full flex items-center justify-center"},[e("i",{class:"fas fa-hourglass-half text-orange-600 dark:text-orange-400 text-xs sm:text-sm"})])],-1)),e("div",Yt,[t[19]||(t[19]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400"},"Lembur",-1)),e("p",Xt,n(Math.floor(x.attendanceSummary.total_lembur_hours||0))+" Jam ",1)])])])]),e("div",Qt,[e("div",Zt,[e("div",qt,[t[22]||(t[22]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-6 h-6 sm:w-8 sm:h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center"},[e("i",{class:"fas fa-percentage text-blue-600 dark:text-blue-400 text-xs sm:text-sm"})])],-1)),e("div",ea,[t[21]||(t[21]=e("p",{class:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400"},"Persentase",-1)),e("p",ta,n(x.attendanceSummary.percentage||0)+"% ",1)])])])])]),e("div",aa,[e("div",sa,[t[36]||(t[36]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3"}," Kalender Jadwal Kerja ",-1)),e("div",ra,[t[34]||(t[34]=e("div",{class:"hidden sm:grid grid-cols-7 gap-0.5 mb-1"},[e("div",{class:"text-center text-sm font-medium text-gray-500 dark:text-gray-400 py-1"},"Minggu"),e("div",{class:"text-center text-sm font-medium text-gray-500 dark:text-gray-400 py-1"},"Senin"),e("div",{class:"text-center text-sm font-medium text-gray-500 dark:text-gray-400 py-1"},"Selasa"),e("div",{class:"text-center text-sm font-medium text-gray-500 dark:text-gray-400 py-1"},"Rabu"),e("div",{class:"text-center text-sm font-medium text-gray-500 dark:text-gray-400 py-1"},"Kamis"),e("div",{class:"text-center text-sm font-medium text-gray-500 dark:text-gray-400 py-1"},"Jumat"),e("div",{class:"text-center text-sm font-medium text-gray-500 dark:text-gray-400 py-1"},"Sabtu")],-1)),t[35]||(t[35]=e("div",{class:"sm:hidden grid grid-cols-7 gap-0.5 mb-1"},[e("div",{class:"text-center text-xs font-medium text-gray-500 dark:text-gray-400 py-1"},"Min"),e("div",{class:"text-center text-xs font-medium text-gray-500 dark:text-gray-400 py-1"},"Sen"),e("div",{class:"text-center text-xs font-medium text-gray-500 dark:text-gray-400 py-1"},"Sel"),e("div",{class:"text-center text-xs font-medium text-gray-500 dark:text-gray-400 py-1"},"Rab"),e("div",{class:"text-center text-xs font-medium text-gray-500 dark:text-gray-400 py-1"},"Kam"),e("div",{class:"text-center text-xs font-medium text-gray-500 dark:text-gray-400 py-1"},"Jum"),e("div",{class:"text-center text-xs font-medium text-gray-500 dark:text-gray-400 py-1"},"Sab")],-1)),e("div",la,[(l(!0),o(h,null,_(Ie.value,a=>(l(),o("div",{key:a.date,class:w(["min-h-[60px] sm:min-h-[100px] border border-gray-200 dark:border-gray-600 p-0.5 sm:p-1 relative",{"bg-gray-50 dark:bg-gray-700":!a.isInPayrollPeriod,"bg-white dark:bg-gray-800":a.isInPayrollPeriod&&!a.holiday,"bg-blue-50 dark:bg-blue-900":a.isToday,"bg-red-100 dark:bg-red-900":a.holiday}])},[e("div",{class:w(["text-xs sm:text-sm font-medium mb-0.5",{"text-gray-400 dark:text-gray-500":!a.isInPayrollPeriod,"text-gray-900 dark:text-gray-100":a.isInPayrollPeriod&&!a.isToday&&!a.holiday,"text-blue-600 dark:text-blue-400":a.isToday,"text-red-600 dark:text-red-400":a.holiday}])},n(a.day),3),a.holiday?(l(),o("div",oa,n(a.holiday.name),1)):i("",!0),a.schedules&&a.schedules.length>0?(l(),o("div",na,[(l(!0),o(h,null,_(a.schedules,r=>(l(),o("div",{key:r.shift_name,class:w(["text-xs sm:text-xs p-0.5 rounded font-semibold shadow-sm",ot(r)])},[e("div",ia,n(r.shift_name||"OFF"),1),r.time_start&&r.time_end?(l(),o("div",da,n(r.time_start)+" - "+n(r.time_end),1)):i("",!0),r.has_attendance&&r.first_in?(l(),o("div",ua,[e("div",ca,[e("div",ma,[t[23]||(t[23]=e("i",{class:"fa-solid fa-check text-green-400"},null,-1)),e("span",ga,n(r.first_in),1),r.has_no_checkout?(l(),o("span",xa,"⚠️")):i("",!0)]),e("div",fa,[e("div",ba,[t[24]||(t[24]=e("i",{class:"fa-solid fa-sign-in-alt text-green-400"},null,-1)),e("span",va,n(r.first_in),1)]),r.last_out?(l(),o("div",ya,[t[25]||(t[25]=e("i",{class:"fa-solid fa-sign-out-alt text-red-400"},null,-1)),e("span",pa,n(r.last_out),1)])):r.has_no_checkout?(l(),o("div",ka,t[26]||(t[26]=[e("i",{class:"fa-solid fa-exclamation-triangle text-red-500"},null,-1),e("span",{class:"text-red-500 font-bold"},"TIDAK CHECKOUT",-1)]))):i("",!0),r.telat>0||(r.total_lembur||r.lembur)>0?(l(),o("div",ha,[r.telat>0?(l(),o("div",_a,[t[27]||(t[27]=e("i",{class:"fa-solid fa-clock text-yellow-400"},null,-1)),e("span",wa,"Telat "+n(r.telat)+" Menit",1)])):i("",!0),(r.total_lembur||r.lembur)>0?(l(),o("div",Da,[e("div",ja,[t[28]||(t[28]=e("i",{class:"fa-solid fa-hourglass-half text-orange-400"},null,-1)),e("span",Ta,"Lembur "+n(Math.floor(r.total_lembur||r.lembur||0))+" Jam",1)]),r.extra_off_overtime&&r.extra_off_overtime>0?(l(),o("div",Ca,[e("span",Aa,"(+"+n(Math.floor(r.extra_off_overtime))+" EO)",1)])):i("",!0)])):i("",!0)])):i("",!0)]),e("button",{onClick:g=>Fe(a.date),class:"mt-1 text-xs bg-blue-500 hover:bg-blue-600 text-white px-1 py-0.5 rounded transition-colors"},t[29]||(t[29]=[e("i",{class:"fa-solid fa-info-circle sm:mr-1"},null,-1),e("span",{class:"hidden sm:inline"},"Detail",-1)]),8,Sa)])])):i("",!0),(!r.has_attendance||!r.first_in)&&r.extra_off_overtime&&r.extra_off_overtime>0?(l(),o("div",Ba,[e("div",Oa,[e("div",Ma,[e("div",Ea,[t[30]||(t[30]=e("i",{class:"fa-solid fa-hourglass-half text-purple-400"},null,-1)),e("span",Pa,"Lembur "+n(Math.floor(r.extra_off_overtime))+" Jam (EO)",1)])])])])):i("",!0)],2))),128))])):i("",!0),ue.value(a.date)?(l(),o("div",Ka,[e("div",La,[t[31]||(t[31]=e("i",{class:"fa-solid fa-check-circle sm:mr-1"},null,-1)),e("span",Ia,n(ue.value(a.date).leave_type_name),1),t[32]||(t[32]=e("span",{class:"sm:hidden"},"✓",-1))]),e("div",Ha,n(ue.value(a.date).reason),1)])):a.isInPayrollPeriod&&!a.holiday&&!je(a)&&!Je(a.date)&&ze(a)?(l(),o("div",Fa,[e("button",{onClick:r=>Ne(a.date),class:"w-full text-xs bg-red-500 hover:bg-red-600 text-white px-1 py-0.5 rounded transition-colors"},t[33]||(t[33]=[e("i",{class:"fa-solid fa-user-times sm:mr-1"},null,-1),e("span",{class:"hidden sm:inline"},"Absent",-1)]),8,Ra)])):i("",!0)],2))),128))])])])])])]),ne.value?(l(),o("div",$a,[e("div",za,[e("div",Ja,[e("h3",Na," Detail Absensi - "+n(le(ie.value)),1),e("button",{onClick:we,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[37]||(t[37]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),e("div",Ua,[de.value?(l(),o("div",Va,t[38]||(t[38]=[e("i",{class:"fa-solid fa-spinner fa-spin text-2xl text-blue-500"},null,-1),e("p",{class:"mt-2 text-gray-600 dark:text-gray-400"},"Memuat detail absensi...",-1)]))):E.value.length===0?(l(),o("div",Ga,t[39]||(t[39]=[e("i",{class:"fa-solid fa-calendar-times text-4xl text-gray-400 mb-4"},null,-1),e("p",{class:"text-gray-600 dark:text-gray-400"},"Tidak ada data absensi untuk tanggal ini",-1)]))):(l(),o("div",Wa,[(l(!0),o(h,null,_(E.value,(a,r)=>(l(),o("div",{key:r,class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4"},[e("div",Ya,[e("h4",Xa,n(a.nama_outlet),1),e("span",Qa," Total: IN "+n(a.total_in)+", OUT "+n(a.total_out),1)]),e("div",Za,[e("div",qa,[e("div",es,[t[40]||(t[40]=e("i",{class:"fa-solid fa-sign-in-alt text-green-500"},null,-1)),t[41]||(t[41]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Jam Masuk:",-1)),e("span",ts,n(a.jam_in||"-"),1)]),e("div",as,[t[43]||(t[43]=e("i",{class:"fa-solid fa-sign-out-alt text-red-500"},null,-1)),t[44]||(t[44]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Jam Keluar:",-1)),a.has_no_checkout?(l(),o("span",ss,t[42]||(t[42]=[e("i",{class:"fa-solid fa-exclamation-triangle mr-1"},null,-1),m("TIDAK CHECKOUT ")]))):(l(),o("span",rs,n(a.jam_out||"-"),1))])]),e("div",ls,[e("div",os,[t[45]||(t[45]=e("i",{class:"fa-solid fa-clock text-blue-500"},null,-1)),t[46]||(t[46]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Durasi Kerja:",-1)),e("span",ns,n(lt(a.jam_in,a.jam_out)),1)]),e("div",is,[t[47]||(t[47]=e("i",{class:"fa-solid fa-building text-purple-500"},null,-1)),t[48]||(t[48]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Outlet:",-1)),e("span",ds,n(a.nama_outlet),1)])])])]))),128))]))]),e("div",{class:"flex justify-end p-4 border-t border-gray-200 dark:border-gray-700"},[e("button",{onClick:we,class:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-colors"}," Tutup ")])])])):i("",!0),e("div",us,[e("div",cs,[t[55]||(t[55]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"},[e("i",{class:"fa-solid fa-calendar-xmark mr-2 text-blue-500"}),m(" Permohonan Izin/Cuti ")],-1)),!z.value||z.value.length===0?(l(),o("div",ms,t[49]||(t[49]=[e("div",{class:"text-gray-400 dark:text-gray-500 mb-4"},[e("i",{class:"fa-solid fa-calendar-check text-4xl"})],-1),e("p",{class:"text-gray-600 dark:text-gray-400 text-sm"}," Tidak ada permohonan izin/cuti untuk bulan ini ",-1),e("p",{class:"text-gray-500 dark:text-gray-500 text-xs mt-1"}," Semua permohonan (disetujui, ditolak, atau dibatalkan) akan ditampilkan di sini ",-1)]))):(l(),o("div",gs,[(l(!0),o(h,null,_(z.value,a=>(l(),o("div",{key:a.id,class:w(["border border-gray-200 dark:border-gray-600 rounded-lg p-4",{"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700":a.status==="pending","bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700":a.status==="supervisor_approved"||a.status==="approved","bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-700":a.status==="rejected","bg-gray-50 dark:bg-gray-900/20 border-gray-200 dark:border-gray-700":a.status==="cancelled"}])},[e("div",xs,[e("div",fs,[e("div",bs,[e("span",{class:w(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":a.status==="pending","bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":a.status==="supervisor_approved"||a.status==="approved","bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":a.status==="rejected","bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200":a.status==="cancelled"}])},n(Oe(a.status)),3),e("span",vs,n(a.leave_type_name),1)]),e("div",ys,[t[50]||(t[50]=e("strong",null,"Periode:",-1)),m(" "+n(Be(a.date_from,a.date_to)),1)]),e("div",ps,[t[51]||(t[51]=e("strong",null,"Alasan:",-1)),m(" "+n(a.reason),1)]),a.pending_approver&&(a.status==="pending"||a.status==="supervisor_approved")?(l(),o("div",ks,[e("span",{class:w(["inline-flex items-center px-2 py-1 rounded-md font-medium",{"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":a.pending_approver==="HRD","bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":a.pending_approver!=="HRD"}])},[t[52]||(t[52]=e("i",{class:"fa-solid fa-clock mr-1"},null,-1)),a.pending_approver==="HRD"?(l(),o("span",hs,"Menunggu persetujuan HRD")):(l(),o("span",_s,"Menunggu persetujuan: "+n(a.pending_approver),1))],2)])):i("",!0),e("div",ws,[t[53]||(t[53]=e("strong",null,"Diajukan:",-1)),m(" "+n(pe(a.created_at)),1)])]),et(a)?(l(),o("div",Ds,[e("button",{onClick:r=>tt(a),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors"},t[54]||(t[54]=[e("i",{class:"fa-solid fa-times mr-1"},null,-1),m(" Batalkan ")]),8,js)])):i("",!0)])],2))),128))]))])]),e("div",Ts,[e("div",Cs,[e("div",As,[t[60]||(t[60]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"},[e("i",{class:"fa-solid fa-calendar-star mr-2 text-blue-500"}),m(" Public Holiday (PH) ")],-1)),e("div",Ss,[e("div",Bs,[e("div",Os,[e("div",Ms,n(x.phData.total_days),1),t[56]||(t[56]=e("div",{class:"text-sm text-blue-700 dark:text-blue-300"},"Total Hari PH",-1))])]),e("div",Es,[e("div",Ps,[e("div",Ks,n(x.phData.total_bonus.toLocaleString("id-ID")),1),t[57]||(t[57]=e("div",{class:"text-sm text-green-700 dark:text-green-300"},"Total Bonus (Rp)",-1))])])]),x.phData.compensations&&x.phData.compensations.length>0?(l(),o("div",Ls,[t[58]||(t[58]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Detail PH Bulan Ini:",-1)),e("div",Is,[(l(!0),o(h,null,_(x.phData.compensations,a=>(l(),o("div",{key:a.id,class:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded border"},[e("div",Hs,[e("div",Fs,n(a.holiday_name||"Hari Libur"),1),e("div",Rs,n(le(a.holiday_date)),1)]),e("div",$s,[e("span",{class:w(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",{"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":a.compensation_type==="extra_off","bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":a.compensation_type==="bonus"}])},n(a.compensation_type==="extra_off"?"Extra Off":"Bonus"),3),e("div",zs,n(a.compensation_type==="bonus"?"Rp "+a.compensation_amount.toLocaleString("id-ID"):a.compensation_amount+" hari"),1)])]))),128))])])):(l(),o("div",Js,t[59]||(t[59]=[e("div",{class:"text-gray-400 dark:text-gray-500 mb-2"},[e("i",{class:"fa-solid fa-calendar-xmark text-2xl"})],-1),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Tidak ada PH untuk bulan ini ",-1)])))])]),e("div",Ns,[e("div",Us,[t[65]||(t[65]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"},[e("i",{class:"fa-solid fa-calendar-plus mr-2 text-purple-500"}),m(" Extra Off ")],-1)),e("div",Vs,[e("div",Gs,[e("div",Ws,[e("div",Ys,n(x.extraOffData.current_balance),1),t[61]||(t[61]=e("div",{class:"text-sm text-purple-700 dark:text-purple-300"},"Saldo Saat Ini",-1))])]),e("div",Xs,[e("div",Qs,[e("div",Zs,n(x.extraOffData.period_net),1),t[62]||(t[62]=e("div",{class:"text-sm text-orange-700 dark:text-orange-300"},"Net Bulan Ini",-1))])])]),x.extraOffData.transactions&&x.extraOffData.transactions.length>0?(l(),o("div",qs,[t[63]||(t[63]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Transaksi Bulan Ini:",-1)),e("div",er,[(l(!0),o(h,null,_(x.extraOffData.transactions,a=>(l(),o("div",{key:a.id,class:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded border"},[e("div",tr,[e("div",ar,n(rt(a)),1),e("div",sr,n(pe(a.created_at)),1)]),e("div",rr,[e("span",{class:w(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",{"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":a.transaction_type==="earned","bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":a.transaction_type==="used"}])},n(a.transaction_type==="earned"?"+":"-")+n(a.amount),3)])]))),128))])])):(l(),o("div",lr,t[64]||(t[64]=[e("div",{class:"text-gray-400 dark:text-gray-500 mb-2"},[e("i",{class:"fa-solid fa-calendar-plus text-2xl"})],-1),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Tidak ada transaksi extra off untuk bulan ini ",-1)])))])])]),ce.value?(l(),o("div",or,[e("div",nr,[e("div",ir,[e("h3",dr," Ajukan Izin/Cuti - "+n(le(me.value)),1),e("button",{onClick:fe,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[66]||(t[66]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),e("div",ur,[e("form",{onSubmit:ft(Ae,["prevent"])},[e("div",cr,[e("div",null,[t[68]||(t[68]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Jenis Izin/Cuti ",-1)),S(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>c.value.leave_type_id=a),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-100",required:""},[t[67]||(t[67]=e("option",{value:""},"Pilih jenis izin/cuti",-1)),(l(!0),o(h,null,_(x.leaveTypes,a=>(l(),o("option",{key:a.id,value:a.id},[m(n(a.name)+" ",1),a.max_days>0?(l(),o("span",gr,"("+n(a.max_days)+" hari)",1)):i("",!0)],8,mr))),128))],512),[[ke,c.value.leave_type_id]]),d.value&&d.value.description?(l(),o("p",xr,n(d.value.description),1)):i("",!0)]),I.value?(l(),o("div",fr,[e("div",br,[t[71]||(t[71]=e("div",null,[e("h4",{class:"text-sm font-medium text-blue-900 dark:text-blue-100"},"Saldo Extra Off dari Public Holiday"),e("p",{class:"text-xs text-blue-700 dark:text-blue-300 mt-1"}," Total hari extra off dari kerja di hari libur nasional ")],-1)),e("div",vr,[N.value?(l(),o("div",yr,t[69]||(t[69]=[e("i",{class:"fas fa-spinner fa-spin text-blue-600 mr-2"},null,-1),e("span",{class:"text-sm text-blue-600"},"Loading...",-1)]))):(l(),o("div",pr,[e("span",kr,n(R.value),1),t[70]||(t[70]=e("span",{class:"text-sm text-blue-700 dark:text-blue-300 ml-1"},"hari",-1))]))])]),!N.value&&R.value===0?(l(),o("div",hr,t[72]||(t[72]=[e("div",{class:"flex items-center"},[e("i",{class:"fas fa-exclamation-triangle text-yellow-600 mr-2"}),e("span",{class:"text-sm text-yellow-800 dark:text-yellow-200"}," Anda tidak memiliki saldo extra off dari kerja di hari libur nasional. ")],-1)]))):i("",!0),!N.value&&R.value>0?(l(),o("div",_r,[e("details",wr,[t[74]||(t[74]=e("summary",{class:"cursor-pointer text-blue-700 dark:text-blue-300 hover:text-blue-900 dark:hover:text-blue-100"}," Lihat detail extra off days ",-1)),e("div",Dr,[(l(!0),o(h,null,_(J.value,a=>(l(),o("div",{key:a.id,class:"flex justify-between items-center p-2 bg-white dark:bg-gray-800 rounded border"},[e("div",null,[e("span",jr,n(a.holiday_name),1),e("span",Tr,"("+n(a.holiday_date)+")",1)]),t[73]||(t[73]=e("span",{class:"text-green-600 dark:text-green-400 font-medium"},"1 hari",-1))]))),128))])])])):i("",!0)])):i("",!0),H.value?(l(),o("div",Cr,[e("div",Ar,[t[76]||(t[76]=e("div",null,[e("h4",{class:"text-sm font-medium text-green-900 dark:text-green-100"},"Saldo Cuti Tahunan"),e("p",{class:"text-xs text-green-700 dark:text-green-300 mt-1"}," Total hari cuti tahunan yang tersedia ")],-1)),e("div",Sr,[e("span",Br,n(O.value),1),t[75]||(t[75]=e("span",{class:"text-sm text-green-700 dark:text-green-300 ml-1"},"hari",-1))])]),O.value===0?(l(),o("div",Or,t[77]||(t[77]=[e("div",{class:"flex items-center"},[e("i",{class:"fas fa-exclamation-triangle text-yellow-600 mr-2"}),e("span",{class:"text-sm text-yellow-800 dark:text-yellow-200"}," Anda tidak memiliki saldo cuti tahunan yang tersedia. ")],-1)]))):i("",!0),O.value>0?(l(),o("div",Mr,[e("div",Er,[t[78]||(t[78]=e("i",{class:"fas fa-info-circle text-blue-600 mr-2"},null,-1)),e("span",Pr," Anda dapat menggunakan "+n(O.value)+" hari cuti tahunan. ",1)])])):i("",!0)])):i("",!0),F.value?(l(),o("div",Kr,[e("div",Lr,[t[81]||(t[81]=e("div",null,[e("h4",{class:"text-sm font-medium text-purple-900 dark:text-purple-100"},"Saldo Extra Off"),e("p",{class:"text-xs text-purple-700 dark:text-purple-300 mt-1"}," Total hari extra off dari kerja tanpa shift ")],-1)),e("div",Ir,[U.value?(l(),o("div",Hr,t[79]||(t[79]=[e("i",{class:"fas fa-spinner fa-spin text-purple-600 mr-2"},null,-1),e("span",{class:"text-sm text-purple-600"},"Loading...",-1)]))):(l(),o("div",Fr,[e("span",Rr,n(M.value),1),t[80]||(t[80]=e("span",{class:"text-sm text-purple-700 dark:text-purple-300 ml-1"},"hari",-1))]))])]),!U.value&&M.value===0?(l(),o("div",$r,t[82]||(t[82]=[e("div",{class:"flex items-center"},[e("i",{class:"fas fa-exclamation-triangle text-yellow-600 mr-2"}),e("span",{class:"text-sm text-yellow-800 dark:text-yellow-200"}," Anda tidak memiliki saldo extra off yang tersedia. ")],-1)]))):i("",!0),!U.value&&M.value>0?(l(),o("div",zr,[e("div",Jr,[t[83]||(t[83]=e("i",{class:"fas fa-info-circle text-blue-600 mr-2"},null,-1)),e("span",Nr," Anda dapat menggunakan "+n(M.value)+" hari extra off. ",1)])])):i("",!0)])):i("",!0),e("div",null,[t[86]||(t[86]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Tanggal ",-1)),e("div",Ur,[e("div",null,[t[84]||(t[84]=e("label",{class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},"Dari",-1)),S(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=a=>c.value.date_from=a),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-100",required:""},null,512),[[Z,c.value.date_from]])]),e("div",null,[t[85]||(t[85]=e("label",{class:"block text-xs text-gray-500 dark:text-gray-400 mb-1"},"Sampai",-1)),S(e("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=a=>c.value.date_to=a),disabled:d.value&&d.value.max_days>0,class:w(["w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-100",{"bg-gray-100 dark:bg-gray-600 cursor-not-allowed":d.value&&d.value.max_days>0}]),required:""},null,10,Vr),[[Z,c.value.date_to]]),d.value&&d.value.max_days>0?(l(),o("p",Gr," Otomatis berdasarkan durasi maksimal ")):i("",!0)])])]),d.value&&(I.value||H.value||F.value)?(l(),o("div",Wr,[e("div",Yr,[e("div",Xr,[t[87]||(t[87]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Jumlah Hari yang Dipilih:",-1)),e("span",{class:w(["text-lg font-bold",Y.value?"text-red-600":"text-green-600"])},n(se.value)+" hari ",3)]),e("div",Qr,[t[88]||(t[88]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Saldo Tersedia:",-1)),e("span",Zr,n(re.value)+" hari ",1)]),Y.value?(l(),o("div",qr,[e("div",el,[t[89]||(t[89]=e("i",{class:"fas fa-exclamation-triangle text-red-600 mr-2"},null,-1)),e("span",tl,n(De.value),1)])])):se.value>0&&re.value>0?(l(),o("div",al,t[90]||(t[90]=[e("div",{class:"flex items-center"},[e("i",{class:"fas fa-check-circle text-green-600 mr-2"}),e("span",{class:"text-sm text-green-800 dark:text-green-200"}," Jumlah hari yang dipilih masih dalam batas saldo yang tersedia. ")],-1)]))):i("",!0)])])):i("",!0),e("div",null,[t[91]||(t[91]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Alasan ",-1)),S(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=a=>c.value.reason=a),rows:"3",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-100",placeholder:"Masukkan alasan izin/cuti...",required:""},null,512),[[Z,c.value.reason]])]),e("div",null,[t[93]||(t[93]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[m(" Pilih Atasan "),e("span",{class:"text-red-500"},"*")],-1)),e("div",sl,[S(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>j.value=a),type:"text",placeholder:"Cari atasan berdasarkan nama, email, atau jabatan...",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-100",onFocus:t[7]||(t[7]=a=>j.value.length>=2&&Se(j.value)),onInput:qe},null,544),[[Z,j.value]]),K.value&&P.value.length>0?(l(),o("div",rl,[(l(!0),o(h,null,_(P.value,a=>(l(),o("div",{key:a.id,onClick:r=>Qe(a),class:"px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer border-b border-gray-200 dark:border-gray-500 last:border-b-0"},[e("div",ol,n(a.nama_lengkap),1),e("div",nl,n(a.email),1),a.nama_jabatan?(l(),o("div",il,n(a.nama_jabatan),1)):i("",!0),a.nama_divisi?(l(),o("div",dl,n(a.nama_divisi),1)):i("",!0),a.nama_outlet?(l(),o("div",ul,n(a.nama_outlet),1)):i("",!0)],8,ll))),128))])):i("",!0)]),p.value.length>0?(l(),o("div",cl,[(l(!0),o(h,null,_(p.value,(a,r)=>(l(),o("div",{key:a.id||r,class:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-md"},[e("div",ml,[e("div",gl,[e("div",xl,[e("span",fl," Level "+n(r+1),1)]),e("div",bl,n(a.nama_lengkap),1),e("div",vl,n(a.email),1),a.nama_jabatan?(l(),o("div",yl,n(a.nama_jabatan),1)):i("",!0),a.nama_divisi?(l(),o("div",pl,n(a.nama_divisi),1)):i("",!0),a.nama_outlet?(l(),o("div",kl,n(a.nama_outlet),1)):i("",!0)]),e("button",{onClick:g=>Ze(r),class:"ml-2 p-1 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 flex-shrink-0",title:"Hapus Atasan"},t[92]||(t[92]=[e("i",{class:"fa fa-times"},null,-1)]),8,hl)])]))),128))])):i("",!0),t[94]||(t[94]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"}," Ketik minimal 2 karakter untuk mencari atasan. Anda dapat menambahkan multiple approvers berjenjang (Level 1, 2, 3, dst). Setelah semua approver approve, baru akan muncul di approval HRD. ",-1))]),e("div",null,[e("label",_l,[t[95]||(t[95]=m(" Dokumen Pendukung ")),d.value&&d.value.requires_document?(l(),o("span",wl,"*")):(l(),o("span",Dl,"(Opsional)"))]),v.value.length===0?(l(),o("div",jl,[e("button",{type:"button",onClick:Te,class:"w-full px-4 py-3 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-blue-500 dark:hover:border-blue-400 transition-colors flex items-center justify-center space-x-2"},t[96]||(t[96]=[e("i",{class:"fa-solid fa-camera text-2xl text-gray-400"},null,-1),e("span",{class:"text-gray-600 dark:text-gray-300"},"Ambil Foto dengan Kamera",-1)])),e("p",Tl,[t[97]||(t[97]=m(" Klik untuk membuka kamera dan ambil foto dokumen pendukung ")),d.value&&d.value.requires_document?(l(),o("span",Cl," - Dokumen wajib diambil ")):i("",!0)])])):(l(),o("div",Al,[e("div",Sl,[(l(!0),o(h,null,_(v.value,a=>(l(),o("div",{key:a.id,class:"relative group"},[e("img",{src:a.preview,alt:`Captured Document ${a.id}`,class:"w-full h-32 object-cover rounded-lg border border-gray-300 dark:border-gray-600"},null,8,Bl),e("button",{type:"button",onClick:r=>Ye(a.id),class:"absolute -top-2 -right-2 p-1 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors opacity-0 group-hover:opacity-100",title:"Hapus Foto"},t[98]||(t[98]=[e("i",{class:"fa-solid fa-times text-xs"},null,-1)]),8,Ol)]))),128))]),e("button",{type:"button",onClick:Te,class:"w-full px-4 py-2 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-blue-500 dark:hover:border-blue-400 transition-colors flex items-center justify-center space-x-2"},t[99]||(t[99]=[e("i",{class:"fa-solid fa-plus text-gray-400"},null,-1),e("span",{class:"text-gray-600 dark:text-gray-300"},"Tambah Foto Lainnya",-1)])),v.value.length>0?(l(),o("button",{key:0,type:"button",onClick:Xe,class:"w-full px-4 py-2 text-red-600 border border-red-300 dark:border-red-600 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors flex items-center justify-center space-x-2"},t[100]||(t[100]=[e("i",{class:"fa-solid fa-trash text-sm"},null,-1),e("span",null,"Hapus Semua Foto",-1)]))):i("",!0),e("p",Ml,[t[101]||(t[101]=e("i",{class:"fa-solid fa-check-circle mr-1"},null,-1)),m(" "+n(v.value.length)+" foto berhasil diambil dan siap digunakan ",1)])]))])])],32)]),e("div",El,[e("button",{type:"button",onClick:fe,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-md transition-colors"}," Batal "),e("button",{type:"button",onClick:Ae,disabled:B.value||I.value&&R.value===0||H.value&&O.value===0||F.value&&M.value===0||Y.value||p.value.length===0,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 disabled:bg-red-400 rounded-md transition-colors"},[B.value?(l(),o("i",Kl)):(l(),o("i",Ll)),m(" "+n(B.value?"Mengirim...":"Kirim Permohonan"),1)],8,Pl)])])])):i("",!0),ee.value?(l(),o("div",Il,[e("div",Hl,[e("div",{class:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700"},[t[103]||(t[103]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"}," Ambil Foto Dokumen ",-1)),e("button",{onClick:be,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[102]||(t[102]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),e("div",Fl,[C.value?(l(),o("div",Rl,[e("div",$l,[t[104]||(t[104]=e("i",{class:"fas fa-exclamation-triangle text-red-600 mr-2"},null,-1)),e("span",zl,n(C.value),1)])])):(l(),o("div",Jl,[e("div",Nl,[e("video",{ref_key:"videoRef",ref:W,autoplay:"",playsinline:"",muted:"",class:"w-full h-64 object-cover"},null,512),e("div",Ul,[ae.value.length>1?(l(),o("button",{key:0,onClick:Ge,class:"p-3 bg-white bg-opacity-20 backdrop-blur-sm rounded-full hover:bg-opacity-30 transition-all",title:"Ganti Kamera"},t[105]||(t[105]=[e("i",{class:"fa-solid fa-camera-rotate text-white text-xl"},null,-1)]))):i("",!0),e("button",{onClick:We,class:"p-4 bg-white rounded-full hover:bg-gray-100 transition-all shadow-lg",title:"Ambil Foto"},t[106]||(t[106]=[e("i",{class:"fa-solid fa-camera text-gray-800 text-2xl"},null,-1)])),e("button",{onClick:be,class:"p-3 bg-white bg-opacity-20 backdrop-blur-sm rounded-full hover:bg-opacity-30 transition-all",title:"Tutup"},t[107]||(t[107]=[e("i",{class:"fa-solid fa-times text-white text-xl"},null,-1)]))]),e("div",Vl,[t[108]||(t[108]=e("i",{class:"fa-solid fa-camera mr-1"},null,-1)),m(" "+n(te.value==="user"?"Kamera Depan":"Kamera Belakang"),1)])]),t[109]||(t[109]=e("div",{class:"text-center"},[e("p",{class:"text-sm text-gray-600 dark:text-gray-300"}," Posisikan dokumen dalam frame kamera, lalu klik tombol kamera untuk mengambil foto ")],-1))]))])])])):i("",!0),ge.value?(l(),o("div",Gl,[e("div",Wl,[e("div",{class:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700"},[t[111]||(t[111]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"}," Batalkan Permohonan Izin/Cuti ",-1)),e("button",{onClick:ye,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[110]||(t[110]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),e("div",Yl,[e("div",Xl,[t[115]||(t[115]=e("div",{class:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg p-3 mb-4"},[e("div",{class:"flex items-center"},[e("i",{class:"fa-solid fa-exclamation-triangle text-yellow-600 dark:text-yellow-400 mr-2"}),e("span",{class:"text-sm text-yellow-800 dark:text-yellow-200 font-medium"}," Apakah Anda yakin ingin membatalkan permohonan ini? ")])],-1)),D.value?(l(),o("div",Ql,[e("div",Zl,[t[112]||(t[112]=e("strong",null,"Jenis:",-1)),m(" "+n(D.value.leave_type_name),1)]),e("div",ql,[t[113]||(t[113]=e("strong",null,"Periode:",-1)),m(" "+n(Be(D.value.date_from,D.value.date_to)),1)]),e("div",eo,[t[114]||(t[114]=e("strong",null,"Alasan:",-1)),m(" "+n(D.value.reason),1)])])):i("",!0)]),e("div",to,[t[116]||(t[116]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Alasan Pembatalan (Opsional) ",-1)),S(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=a=>V.value=a),rows:"3",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-gray-100",placeholder:"Jelaskan alasan pembatalan (opsional)..."},null,512),[[Z,V.value]])]),e("div",ao,[e("button",{onClick:ye,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-md transition-colors"}," Batal "),e("button",{onClick:at,disabled:L.value,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 disabled:bg-red-400 rounded-md transition-colors"},[L.value?(l(),o("i",ro)):(l(),o("i",lo)),m(" "+n(L.value?"Membatalkan...":"Ya, Batalkan"),1)],8,so)])])])])):i("",!0),e("canvas",{ref_key:"canvasRef",ref:xe,style:{display:"none"}},null,512),x.correctionRequests&&x.correctionRequests.length>0?(l(),o("div",oo,[e("div",no,[t[124]||(t[124]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3"},[e("i",{class:"fas fa-edit text-blue-600 mr-2"}),m(" Status Pengajuan Koreksi ")],-1)),e("div",io,[(l(!0),o(h,null,_(x.correctionRequests,a=>(l(),o("div",{key:a.id,class:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[e("div",uo,[e("div",co,[e("div",mo,[e("span",{class:w(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":a.status==="pending","bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":a.status==="approved","bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":a.status==="rejected"}])},[a.status==="pending"?(l(),o("i",go)):i("",!0),a.status==="approved"?(l(),o("i",xo)):i("",!0),a.status==="rejected"?(l(),o("i",fo)):i("",!0),m(" "+n(Oe(a.status)),1)],2),e("span",bo,n(le(a.tanggal)),1)]),e("div",vo,[e("p",yo,n(nt(a.type))+" - "+n(a.nama_outlet),1),e("p",po,[t[117]||(t[117]=e("i",{class:"fas fa-user mr-1"},null,-1)),t[118]||(t[118]=m(" Diajukan oleh: ")),e("span",ko,n(a.requested_by_name),1)]),e("div",ho,[e("div",_o,[t[119]||(t[119]=e("span",{class:"font-medium text-red-600 dark:text-red-400"},"Sebelum:",-1)),e("div",wo,n(Me(a.old_value,a.type)),1)]),e("div",null,[t[120]||(t[120]=e("span",{class:"font-medium text-green-600 dark:text-green-400"},"Sesudah:",-1)),e("div",Do,n(Me(a.new_value,a.type)),1)])])]),e("p",jo,[t[121]||(t[121]=e("strong",null,"Alasan:",-1)),m(" "+n(a.reason),1)]),a.status==="approved"&&a.approved_by_name?(l(),o("div",To,[t[122]||(t[122]=e("i",{class:"fas fa-user-check mr-1"},null,-1)),m(" Disetujui oleh: "+n(a.approved_by_name)+" ",1),e("span",Co,n(pe(a.approved_at)),1)])):i("",!0),a.status==="rejected"&&a.rejection_reason?(l(),o("div",Ao,[t[123]||(t[123]=e("i",{class:"fas fa-exclamation-triangle mr-1"},null,-1)),m(" Alasan penolakan: "+n(a.rejection_reason),1)])):i("",!0)])])]))),128))])])])):i("",!0)]),_:1}))}},Ro=yt(So,[["__scopeId","data-v-e513f07c"]]);export{Ro as default};
