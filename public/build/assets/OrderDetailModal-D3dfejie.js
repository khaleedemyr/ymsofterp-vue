import{c as y,L as r,B as a,D as t,E as d,N as i,F as c,M as m,O as v}from"./vendor-vue-g7iCcTkf.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";const w={class:"bg-white rounded-2xl shadow-2xl w-full max-w-lg p-8 relative animate-fadeIn overflow-y-auto",style:{"max-height":"90vh"}},N={class:"text-center mb-4"},I={class:"text-xs text-gray-400 mt-1"},k={class:"space-y-2 text-base mb-4"},M={key:0,class:"flex justify-between border-b last:border-b-0 py-1"},S={class:"font-semibold text-gray-600"},j={class:"text-gray-800"},C={key:0,class:"mb-4"},O={class:"bg-purple-50 rounded p-3 text-sm"},P={class:"font-semibold text-gray-600"},A={class:"text-gray-800"},F={key:1,class:"mb-4"},L={class:"flex justify-between py-1"},B={class:"text-gray-800"},T={class:"flex justify-between py-1"},V={class:"text-gray-800"},R={key:2,class:"mb-4"},$={class:"flex justify-between py-1"},q={class:"text-gray-800"},E={key:3,class:"mb-4"},z={class:"overflow-x-auto"},G={class:"min-w-full text-sm rounded shadow"},H={class:"px-3 py-2"},K={class:"px-3 py-2"},Q={class:"px-3 py-2 text-right"},U={class:"px-3 py-2 text-right"},W={class:"px-3 py-2 text-right"},J={key:4,class:"mb-2"},X={class:"bg-blue-50 rounded p-3 text-sm"},Y={class:"font-semibold text-gray-600"},Z={class:"text-gray-800"},tt={__name:"OrderDetailModal",props:{order:{type:Object,required:!0}},setup(l){const b=l;function p(s){return{created_at:"Transaction Time",waiters:"Waiter",mode:"Mode",nomor:"Order Number",table:"Table",pax:"Pax",total:"Total",discount:"Discount",cashback:"Cashback",dpp:"DPP",pb1:"PB1",service:"Service Charge",grand_total:"Grand Total",status:"Status",kode_outlet:"Outlet Code",nama_outlet:"Outlet Name"}[s]||s.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase())}function x(s,e){return s.match(/total|discount|cashback|service|pb1|grand|dpp|rounding|harga|price|subtotal/i)&&typeof e=="number"?e.toLocaleString("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}):s==="created_at"?e?new Date(e).toLocaleString("id-ID"):"-":e??"-"}function u(s){if(typeof s=="number")return s.toLocaleString("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0});if(!s)return"-";const e=Number(s);return isNaN(e)?s:e.toLocaleString("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0})}function g(s){const e=Number(s.amount)||0,o=Number(s.change)||0;return e-o}const _=y(()=>{const s=b.order.manual_discount_amount;return s!=null&&String(s).replace(/\D/g,"")!==""&&Number(s)>0}),f=y(()=>{const s=parseInt(b.order.discount)||0,e=parseFloat(b.order.manual_discount_amount)||0;return s>0&&e>0?Math.max(s,e):s+e}),h=y(()=>f.value>0);return(s,e)=>(a(),r("div",{class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",onClick:e[1]||(e[1]=v(o=>s.$emit("close"),["self"]))},[t("div",w,[t("button",{onClick:e[0]||(e[0]=o=>s.$emit("close")),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-2xl font-bold"},"Ã—"),t("div",N,[e[2]||(e[2]=t("div",{class:"text-xl font-bold text-gray-800"},"Detail Order",-1)),t("div",I,i(l.order.nomor),1)]),e[12]||(e[12]=t("div",{class:"border-b border-gray-200 mb-2"},null,-1)),t("div",k,[(a(!0),r(c,null,m(l.order,(o,n)=>(a(),r(c,{key:n},[n!=="items"&&n!=="promo"&&n!=="manual_discount_amount"&&n!=="manual_discount_reason"&&n!=="id"&&n!=="payments"?(a(),r("div",M,[t("span",S,i(p(n)),1),t("span",j,i(x(n,o)),1)])):d("",!0)],64))),128))]),l.order.payments&&Array.isArray(l.order.payments)&&l.order.payments.length?(a(),r("div",C,[e[3]||(e[3]=t("div",{class:"font-bold text-purple-700 mb-1"},"Payments",-1)),t("div",O,[(a(!0),r(c,null,m(l.order.payments,(o,n)=>(a(),r("div",{key:n,class:"flex justify-between"},[t("span",P,i(o.payment_code),1),t("span",A,i(u(g(o))),1)]))),128))])])):d("",!0),_.value?(a(),r("div",F,[e[6]||(e[6]=t("div",{class:"font-bold text-red-700 mb-1"},"Manual Discount",-1)),t("div",L,[e[4]||(e[4]=t("span",{class:"font-semibold text-gray-600"},"Amount",-1)),t("span",B,i(u(l.order.manual_discount_amount)),1)]),t("div",T,[e[5]||(e[5]=t("span",{class:"font-semibold text-gray-600"},"Reason",-1)),t("span",V,i(l.order.manual_discount_reason||"-"),1)])])):d("",!0),h.value?(a(),r("div",R,[e[8]||(e[8]=t("div",{class:"font-bold text-green-700 mb-1"},"Promo Discount",-1)),t("div",$,[e[7]||(e[7]=t("span",{class:"font-semibold text-gray-600"},"Amount",-1)),t("span",q,i(u(f.value)),1)])])):d("",!0),l.order.items&&l.order.items.length?(a(),r("div",E,[e[10]||(e[10]=t("div",{class:"font-bold text-blue-700 mb-2"},"Items",-1)),t("div",z,[t("table",G,[e[9]||(e[9]=t("thead",null,[t("tr",{class:"bg-blue-100 text-blue-900"},[t("th",{class:"px-3 py-2"},"No"),t("th",{class:"px-3 py-2"},"Nama Item"),t("th",{class:"px-3 py-2"},"Qty"),t("th",{class:"px-3 py-2"},"Harga"),t("th",{class:"px-3 py-2"},"Subtotal")])],-1)),t("tbody",null,[(a(!0),r(c,null,m(l.order.items,(o,n)=>(a(),r("tr",{key:o.id||n,class:"bg-white border-b last:border-b-0"},[t("td",H,i(n+1),1),t("td",K,i(o.item_name||"-"),1),t("td",Q,i(o.qty||0),1),t("td",U,i(u(o.price||0)),1),t("td",W,i(u(o.subtotal||0)),1)]))),128))])])])])):d("",!0),l.order.promo?(a(),r("div",J,[e[11]||(e[11]=t("div",{class:"font-bold text-blue-700 mb-1"},"Promo",-1)),t("div",X,[(a(!0),r(c,null,m(l.order.promo,(o,n)=>(a(),r("div",{key:n,class:"flex justify-between"},[t("span",Y,i(p(n)),1),t("span",Z,i(x(n,o)),1)]))),128))])])):d("",!0)])]))}},nt=D(tt,[["__scopeId","data-v-b85c2dd2"]]);export{nt as default};
