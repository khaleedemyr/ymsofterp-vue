import{r as h,a as mt,L as n,B as r,D as t,E as d,N as i,l as b,G as f,Y as W,F as v,M as p,W as S}from"./vendor-vue-g7iCcTkf.js";import{Q as bt}from"./browser-CCaIc0XY.js";import{S as o}from"./app-CXnLHfhT.js";import"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";const ft={class:"fixed inset-0 z-50 flex items-center justify-center"},ht={class:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},vt={class:"flex items-center justify-between mb-6"},pt={class:"text-2xl font-bold text-white"},wt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},yt={class:"space-y-4"},_t={class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4"},kt={class:"flex items-center justify-between mb-3"},Ct={class:"space-y-3"},Bt={class:"flex items-center space-x-3"},Tt={class:"text-white"},St={class:"flex items-center space-x-3"},jt={class:"text-white"},Dt={class:"flex items-center space-x-3"},Rt={class:"text-white"},At={class:"flex items-center space-x-3"},Et={class:"flex items-center space-x-3"},It={key:0,class:"w-8 h-8 rounded-full overflow-hidden"},Gt=["src","alt"],Lt={key:1,class:"fas fa-user text-purple-400 w-5"},Pt={class:"flex flex-col"},Ot={class:"text-white font-medium"},Kt={class:"text-white/70 text-sm"},Qt={class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4"},$t={class:"flex items-center justify-between mb-3"},Ht={class:"grid grid-cols-3 gap-4 mb-4"},Nt={class:"text-center"},Ft={class:"text-2xl font-bold text-blue-300"},Mt={class:"text-center"},Ut={class:"text-2xl font-bold text-green-300"},qt={class:"text-center"},Yt={class:"text-2xl font-bold text-red-300"},zt={class:"space-y-2"},Jt={class:"flex justify-between text-xs text-white/70"},Vt={class:"w-full bg-white/10 rounded-full h-2"},Wt={class:"space-y-4"},Xt={class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4"},Zt={class:"text-center"},te={class:"w-32 h-32"},ee=["src"],se={key:1,class:"w-full h-full bg-gray-200 rounded flex items-center justify-center"},ie={class:"text-center"},ae={class:"text-gray-400 text-xs"},ne={class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4"},re={class:"grid grid-cols-2 gap-3"},oe={class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4"},le={class:"grid grid-cols-2 gap-3"},de={class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4 mb-6"},ce={class:"overflow-x-auto"},ue={class:"w-full text-white"},xe={class:"py-2 px-2"},ge={class:"flex items-center space-x-2"},me={class:"w-8 h-8 rounded-full overflow-hidden bg-white/10 flex items-center justify-center"},be=["src","alt"],fe={key:1,class:"fas fa-user text-white/50 text-xs"},he={class:"flex flex-col"},ve={class:"flex items-center space-x-2"},pe={key:0,class:"px-2 py-1 bg-yellow-500/20 text-yellow-200 text-xs rounded-full"},we={class:"py-2 px-2"},ye={class:"py-2 px-2"},_e={class:"py-2 px-2"},ke={class:"py-2 px-2"},Ce={class:"py-2 px-2"},Be={class:"flex items-center space-x-2"},Te=["onClick"],Se=["onClick"],je={key:0},De={class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4"},Re={class:"overflow-x-auto"},Ae={class:"w-full text-white"},Ee={class:"py-2 px-2"},Ie={class:"py-2 px-2"},Ge={class:"py-2 px-2"},Le={class:"py-2 px-2"},Pe={class:"py-2 px-2"},Oe={class:"py-2 px-2"},Ke={class:"flex items-center space-x-2"},Qe=["onClick"],$e=["onClick"],He={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center"},Ne={class:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl p-6 max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto relative"},Fe={class:"mb-6"},Me={key:0,class:"text-white/70"},Ue={class:"text-lg font-semibold"},qe={class:"text-sm"},Ye={key:0,class:"grid grid-cols-4 gap-4 mb-6"},ze={class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4 text-center"},Je={class:"text-2xl font-bold text-blue-300"},Ve={class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4 text-center"},We={class:"text-2xl font-bold text-yellow-300"},Xe={class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4 text-center"},Ze={class:"text-2xl font-bold text-orange-300"},ts={class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4 text-center"},es={class:"text-2xl font-bold text-red-300"},ss={key:1,class:"text-center py-8"},is={key:2,class:"text-center py-8"},as={key:3,class:"space-y-4"},ns={class:"flex items-start justify-between mb-3"},rs={class:"flex items-center space-x-3"},os={class:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-semibold"},ls={class:"text-white font-semibold"},ds={class:"text-white/70 text-sm"},cs={class:"text-right"},us={class:"text-white/70 text-sm"},xs={class:"text-white/50 text-xs"},gs={class:"grid grid-cols-3 gap-4 mb-3"},ms={class:"flex items-center space-x-1"},bs={class:"flex space-x-1"},fs={class:"text-white text-sm font-medium ml-2"},hs={class:"flex items-center space-x-1"},vs={class:"flex space-x-1"},ps={class:"text-white text-sm font-medium ml-2"},ws={class:"flex items-center space-x-1"},ys={class:"flex space-x-1"},_s={class:"text-white text-sm font-medium ml-2"},ks={key:0,class:"mt-3"},Cs={class:"text-white bg-white/5 rounded-lg p-3 text-sm"},Bs={key:1,class:"mt-3"},Ts={class:"text-white bg-white/5 rounded-lg p-3 text-sm"},Ss={key:2,class:"mt-3"},js={class:"text-white bg-white/5 rounded-lg p-3 text-sm"},Ds={class:"mt-3 pt-3 border-t border-white/10"},Rs={class:"text-white/50 text-xs"},As={key:1,class:"fixed inset-0 z-[60] flex items-center justify-center"},Es={class:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl p-6 max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto relative"},Is={class:"mb-6"},Gs={key:0,class:"text-white/70"},Ls={class:"text-lg font-semibold"},Ps={class:"text-sm"},Os={key:0,class:"grid grid-cols-2 gap-4 mb-6"},Ks={class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4 text-center"},Qs={class:"text-2xl font-bold text-blue-300"},$s={class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4 text-center"},Hs={class:"text-2xl font-bold text-yellow-300"},Ns={key:1,class:"mb-6"},Fs={class:"space-y-2"},Ms={class:"w-8 text-center text-white/70"},Us={class:"flex-1 bg-white/10 rounded-full h-2"},qs={class:"w-16 text-right text-white/70 text-sm"},Ys={key:2,class:"text-center py-8"},zs={key:3,class:"text-center py-8"},Js={key:4,class:"space-y-4"},Vs={class:"flex items-center justify-between mb-3"},Ws={class:"flex items-center space-x-3"},Xs={class:"text-white font-medium"},Zs={class:"text-white/60 text-sm"},ti={class:"text-white/50 text-xs"},ei={class:"mb-3"},si={class:"flex items-center space-x-1"},ii={class:"flex space-x-1"},ai={class:"text-white text-sm font-medium ml-2"},ni={key:0,class:"mt-3"},ri={class:"text-white bg-white/5 rounded-lg p-3 text-sm"},oi={class:"mt-3 pt-3 border-t border-white/10"},li={class:"text-white/50 text-xs"},di={key:2,class:"fixed inset-0 z-[60] flex items-center justify-center"},ci={class:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl p-8 max-w-md w-full mx-4 relative"},ui={class:"text-center"},xi={class:"bg-white p-6 rounded-lg inline-block"},gi={class:"w-64 h-64"},mi=["src"],bi={key:1,class:"w-full h-full bg-gray-200 rounded flex items-center justify-center"},fi={class:"text-center"},hi={class:"text-gray-400 text-xs"},vi={class:"mt-6 text-white/80 text-center"},pi={class:"font-medium"},wi={class:"text-sm"},yi={class:"text-xs text-white/60"},Si={__name:"TrainingDetailModal",props:{training:Object,canInvite:{type:Boolean,default:!0},canEdit:{type:Boolean,default:!0},availableParticipants:{type:Array,default:()=>[]},divisions:{type:Array,default:()=>[]},jabatans:{type:Array,default:()=>[]},levels:{type:Array,default:()=>[]},certificateTemplates:{type:Array,default:()=>[]}},emits:["close","edit","invite","invite-trainer","qr-code","refresh"],setup(l,{emit:X}){const x=l,G=X,j=h(!1),y=h(""),D=h(!1),K=h(!1),g=h({training:null,reviews:[],statistics:null}),Z=h(!1),L=h(!1),c=h({training:null,trainer_ratings:[],statistics:null}),P=h(!1),Q=a=>{const e={draft:"bg-gray-500/20 text-gray-200 border-gray-500/30",published:"bg-blue-500/20 text-blue-200 border-blue-500/30",ongoing:"bg-orange-500/20 text-orange-200 border-orange-500/30",completed:"bg-green-500/20 text-green-200 border-green-500/30",cancelled:"bg-red-500/20 text-red-200 border-red-500/30"};return e[a]||e.draft},$=a=>{const e={draft:"fas fa-edit",published:"fas fa-bullhorn",ongoing:"fas fa-play-circle",completed:"fas fa-check-circle",cancelled:"fas fa-times-circle"};return e[a]||e.draft},H=a=>{const e={draft:"Draft",published:"Dipublikasi",ongoing:"Sedang Berlangsung",completed:"Selesai",cancelled:"Dibatalkan"};return e[a]||e.draft},tt=a=>{const e={invited:"bg-blue-500/20 text-blue-200 border-blue-500/30",confirmed:"bg-yellow-500/20 text-yellow-200 border-yellow-500/30",attended:"bg-green-500/20 text-green-200 border-green-500/30",absent:"bg-red-500/20 text-red-200 border-red-500/30"};return e[a]||e.invited},et=a=>{const e={invited:"fas fa-envelope",confirmed:"fas fa-check",attended:"fas fa-user-check",absent:"fas fa-user-times"};return e[a]||e.invited},st=a=>{const e={invited:"Diundang",confirmed:"Konfirmasi",attended:"Hadir",absent:"Tidak Hadir"};return e[a]||e.invited},it=a=>{const e={invited:"bg-blue-500/20 text-blue-200 border-blue-500/30",confirmed:"bg-yellow-500/20 text-yellow-200 border-yellow-500/30",attended:"bg-green-500/20 text-green-200 border-green-500/30",absent:"bg-red-500/20 text-red-200 border-red-500/30"};return e[a]||e.invited},at=a=>{const e={invited:"fas fa-envelope",confirmed:"fas fa-check",attended:"fas fa-chalkboard-teacher",absent:"fas fa-user-times"};return e[a]||e.invited},nt=a=>{const e={invited:"Diundang",confirmed:"Konfirmasi",attended:"Hadir",absent:"Tidak Hadir"};return e[a]||e.invited},rt=a=>{const e={internal:"bg-blue-500/20 text-blue-200 border-blue-500/30",external:"bg-purple-500/20 text-purple-200 border-purple-500/30"};return e[a]||e.internal},N=a=>new Date(a).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),ot=async a=>{try{console.log("Mark attended called for participant:",a),console.log("Training ID:",x.training.id),(await o.fire({title:"Konfirmasi Kehadiran",text:"Apakah Anda yakin ingin menandai peserta ini sebagai hadir?",icon:"question",showCancelButton:!0,confirmButtonColor:"#10B981",cancelButtonColor:"#6B7280",confirmButtonText:"Ya, Tandai Hadir",cancelButtonText:"Batal"})).isConfirmed&&(console.log("User confirmed, calling API..."),o.fire({title:"Sabar Bu Ghea....",text:"Antosan sakedap Bu Ghea, Nuju loding",icon:"info",showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,backdrop:!0,didOpen:()=>{o.showLoading()}}),await S.put(route("lms.schedules.mark-attended",{schedule:x.training.id,invitation:a}),{},{onSuccess:()=>{o.close(),o.fire({icon:"success",title:"Berhasil!",text:"Peserta berhasil ditandai sebagai hadir",timer:2e3,showConfirmButton:!1}),window.location.reload()},onError:m=>{console.error("API Error for mark attended:",m),o.close(),o.fire({icon:"error",title:"Gagal!",text:"Gagal menandai peserta sebagai hadir: "+Object.values(m)[0]})}}))}catch(e){console.error("Error marking attended:",e),console.error("Error details:",{message:e.message,stack:e.stack,name:e.name}),o.close(),o.fire({icon:"error",title:"Error!",text:"Terjadi kesalahan saat menandai peserta sebagai hadir"})}},lt=async a=>{try{console.log("Remove participant called for participant:",a),console.log("Training ID:",x.training.id),(await o.fire({title:"Konfirmasi Hapus",text:"Apakah Anda yakin ingin menghapus peserta ini dari training?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280",confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal"})).isConfirmed&&(console.log("User confirmed, calling API..."),o.fire({title:"Sabar Bu Ghea....",text:"Antosan sakedap Bu Ghea, Nuju loding",icon:"info",showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,backdrop:!0,didOpen:()=>{o.showLoading()}}),await S.delete(route("lms.schedules.remove-participant",{schedule:x.training.id,invitation:a}),{onSuccess:()=>{o.close(),o.fire({icon:"success",title:"Berhasil!",text:"Peserta berhasil dihapus dari training",timer:2e3,showConfirmButton:!1}),window.location.reload()},onError:m=>{console.error("API Error for remove participant:",m),o.close(),o.fire({icon:"error",title:"Gagal!",text:"Gagal menghapus peserta: "+Object.values(m)[0]})}}))}catch(e){console.error("Error removing participant:",e),console.error("Error details:",{message:e.message,stack:e.stack,name:e.name}),o.close(),o.fire({icon:"error",title:"Error!",text:"Terjadi kesalahan saat menghapus peserta"})}},dt=async a=>{try{(await o.fire({title:"Set Primary Trainer",text:"Apakah Anda yakin ingin menjadikan trainer ini sebagai primary trainer?",icon:"question",showCancelButton:!0,confirmButtonColor:"#F59E0B",cancelButtonColor:"#6B7280",confirmButtonText:"Ya, Set Primary",cancelButtonText:"Batal"})).isConfirmed&&(o.fire({title:"Sabar Bu Ghea....",text:"Antosan sakedap Bu Ghea, Nuju loding",icon:"info",showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,backdrop:!0,didOpen:()=>{o.showLoading()}}),await S.put(route("lms.schedules.set-primary-trainer",{schedule:x.training.id,trainer:a}),{},{onSuccess:()=>{o.close(),o.fire({icon:"success",title:"Berhasil!",text:"Primary trainer berhasil diupdate",timer:2e3,showConfirmButton:!1}),G("refresh")},onError:m=>{o.close(),o.fire({icon:"error",title:"Gagal!",text:"Gagal mengupdate primary trainer: "+Object.values(m)[0]})}}))}catch{o.close(),o.fire({icon:"error",title:"Error!",text:"Terjadi kesalahan saat mengupdate primary trainer"})}},ct=async a=>{try{(await o.fire({title:"Konfirmasi Hapus",text:"Apakah Anda yakin ingin menghapus trainer ini dari training?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280",confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal"})).isConfirmed&&(o.fire({title:"Sabar Bu Ghea....",text:"Antosan sakedap Bu Ghea, Nuju loding",icon:"info",showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,backdrop:!0,didOpen:()=>{o.showLoading()}}),await S.delete(route("lms.schedules.remove-trainer",{schedule:x.training.id,trainer:a}),{onSuccess:()=>{o.close(),o.fire({icon:"success",title:"Berhasil!",text:"Trainer berhasil dihapus dari training",timer:2e3,showConfirmButton:!1}),G("refresh")},onError:m=>{o.close(),o.fire({icon:"error",title:"Gagal!",text:"Gagal menghapus trainer: "+Object.values(m)[0]})}}))}catch{o.close(),o.fire({icon:"error",title:"Error!",text:"Terjadi kesalahan saat menghapus trainer"})}},F=a=>{console.error("QR Code failed to load:",a.target.src),j.value=!0},M=a=>{console.log("QR Code loaded successfully:",a.target.src)},ut=async()=>{try{if(x.training){const a=new Date(x.training.scheduled_date).toISOString().split("T")[0],e=x.training.id+x.training.course_id+a,m=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(e)),R=Array.from(new Uint8Array(m)).map(E=>E.toString(16).padStart(2,"0")).join(""),_={schedule_id:x.training.id,course_id:x.training.course_id,scheduled_date:a,hash:R},A=JSON.stringify(_);y.value=await bt.toDataURL(A,{width:300,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}),console.log("QR Code generated successfully:",y.value),console.log("QR Code data:",_)}}catch(a){console.error("Error generating QR code:",a),j.value=!0}},O=async a=>{try{const e={scheduled:"Terjadwal",published:"Dipublikasi",ongoing:"Sedang Berlangsung",completed:"Selesai",cancelled:"Dibatalkan"}[a]||"Tidak Diketahui";if((await o.fire({title:"Konfirmasi Perubahan Status",text:`Apakah Anda yakin ingin mengubah status training menjadi "${e}"?`,icon:"question",showCancelButton:!0,confirmButtonColor:a==="cancelled"?"#EF4444":"#3B82F6",cancelButtonColor:"#6B7280",confirmButtonText:"Ya, Ubah Status",cancelButtonText:"Batal"})).isConfirmed){console.log("=== CALLING UPDATE TRAINING STATUS API ===",{training_id:x.training.id,new_status:a,route:route("lms.schedules.update-status",x.training.id)}),console.log("=== SHOWING LOADING MODAL ==="),console.log("Swal object:",o),console.log("Swal.fire method:",typeof o.fire);try{o.fire({title:"Sabar Bu Ghea....",text:"Antosan sakedap Bu Ghea, Nuju loding",icon:"info",showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,backdrop:!0,didOpen:()=>{o.showLoading()}}),console.log("Loading modal should be visible now")}catch(w){console.error("Error showing loading modal:",w)}await S.put(route("lms.schedules.update-status",x.training.id),{status:a},{onSuccess:()=>{o.close(),o.fire({icon:"success",title:"Berhasil!",text:`Status training berhasil diubah menjadi "${e}"`,timer:2e3,showConfirmButton:!1}),G("refresh")},onError:w=>{console.error("API Error for update training status:",w),o.close(),o.fire({icon:"error",title:"Gagal!",text:"Gagal mengubah status training: "+Object.values(w)[0]})}})}}catch(e){console.error("Error updating training status:",e),o.close(),o.fire({icon:"error",title:"Error!",text:"Terjadi kesalahan saat mengubah status training"})}},U=()=>{K.value=!1,g.value={training:null,reviews:[],statistics:null}},xt=async()=>{L.value=!0,P.value=!0;try{const e=await(await fetch(route("lms.schedules.trainer-ratings",x.training.id))).json();e.success?c.value=e:o.fire({icon:"error",title:"Gagal!",text:e.message||"Gagal memuat rating trainer"})}catch(a){console.error("Error fetching trainer ratings:",a),o.fire({icon:"error",title:"Error!",text:"Terjadi kesalahan saat memuat rating trainer"})}finally{P.value=!1}},q=()=>{L.value=!1,c.value={training:null,trainer_ratings:[],statistics:null}};return mt(()=>{ut()}),(a,e)=>{var m,w,R,_,A,E,Y,z,J,V;return r(),n("div",ft,[e[68]||(e[68]=t("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm"},null,-1)),t("div",ht,[t("div",vt,[t("h3",pt,i(((m=l.training.course)==null?void 0:m.title)||"Training Detail"),1),t("button",{onClick:e[0]||(e[0]=s=>a.$emit("close")),class:"text-white/70 hover:text-white"},e[9]||(e[9]=[t("i",{class:"fas fa-times text-xl"},null,-1)]))]),t("div",wt,[t("div",yt,[t("div",_t,[t("div",kt,[e[10]||(e[10]=t("h4",{class:"text-lg font-semibold text-white"},"Informasi Training",-1)),t("span",{class:b([Q(l.training.status),"px-3 py-1 rounded-full text-sm font-medium flex items-center gap-2"])},[t("i",{class:b([$(l.training.status),"text-xs"])},null,2),f(" "+i(H(l.training.status)),1)],2)]),t("div",Ct,[t("div",Bt,[e[11]||(e[11]=t("i",{class:"fas fa-calendar text-blue-400 w-5"},null,-1)),t("span",Tt,i(N(l.training.scheduled_date)),1)]),t("div",St,[e[12]||(e[12]=t("i",{class:"fas fa-clock text-green-400 w-5"},null,-1)),t("span",jt,i(l.training.start_time)+" - "+i(l.training.end_time),1)]),t("div",Dt,[e[13]||(e[13]=t("i",{class:"fas fa-map-marker-alt text-red-400 w-5"},null,-1)),t("span",Rt,i(((w=l.training.outlet)==null?void 0:w.nama_outlet)||"Venue tidak ditentukan"),1)]),t("div",At,[t("div",Et,[!l.training.external_trainer_name&&((_=(R=l.training.course)==null?void 0:R.instructor)!=null&&_.avatar)?(r(),n("div",It,[t("img",{src:"/storage/"+l.training.course.instructor.avatar,alt:l.training.trainer_name,class:"w-full h-full object-cover"},null,8,Gt)])):(r(),n("i",Lt))]),t("div",Pt,[t("span",Ot,i(l.training.trainer_name),1),t("span",Kt,i(l.training.external_trainer_name?"External Trainer":"Internal Trainer"),1)])])])]),t("div",Qt,[t("div",$t,[e[14]||(e[14]=t("h4",{class:"text-lg font-semibold text-white"},"Status Training",-1)),t("span",{class:b([Q(l.training.status),"px-3 py-1 rounded-full text-sm font-medium flex items-center gap-2"])},[t("i",{class:b([$(l.training.status),"text-xs"])},null,2),f(" "+i(H(l.training.status)),1)],2)]),t("div",Ht,[t("div",Nt,[t("div",Ft,i(((A=l.training.invitations)==null?void 0:A.length)||0),1),e[15]||(e[15]=t("div",{class:"text-xs text-white/70"},"Terdaftar",-1))]),t("div",Mt,[t("div",Ut,i(((E=l.training.invitations)==null?void 0:E.filter(s=>s.status==="attended").length)||0),1),e[16]||(e[16]=t("div",{class:"text-xs text-white/70"},"Hadir",-1))]),t("div",qt,[t("div",Yt,i(((Y=l.training.invitations)==null?void 0:Y.filter(s=>s.status==="absent").length)||0),1),e[17]||(e[17]=t("div",{class:"text-xs text-white/70"},"Tidak Hadir",-1))])]),t("div",zt,[t("div",Jt,[e[18]||(e[18]=t("span",null,"Kehadiran",-1)),t("span",null,i(((z=l.training.invitations)==null?void 0:z.length)>0?Math.round(l.training.invitations.filter(s=>s.status==="attended").length/l.training.invitations.length*100):0)+"%",1)]),t("div",Vt,[t("div",{class:"bg-gradient-to-r from-green-400 to-green-500 h-2 rounded-full transition-all duration-300",style:W({width:((J=l.training.invitations)==null?void 0:J.length)>0?l.training.invitations.filter(s=>s.status==="attended").length/l.training.invitations.length*100+"%":"0%"})},null,4)])])])]),t("div",Wt,[t("div",Xt,[e[23]||(e[23]=t("h4",{class:"text-lg font-semibold text-white mb-3"},"QR Code Training",-1)),t("div",Zt,[t("div",{class:"bg-white p-4 rounded-lg inline-block cursor-pointer hover:scale-105 transition-transform duration-200",onClick:e[1]||(e[1]=s=>D.value=!0)},[t("div",te,[y.value&&!j.value?(r(),n("img",{key:0,src:y.value,alt:"QR Code",class:"w-full h-full",onError:F,onLoad:M},null,40,ee)):(r(),n("div",se,[t("div",ie,[e[19]||(e[19]=t("i",{class:"fas fa-qrcode text-gray-400 text-4xl mb-2"},null,-1)),e[20]||(e[20]=t("p",{class:"text-gray-500 text-xs"},"QR Code",-1)),t("p",ae,"Training #"+i(l.training.id),1)])]))])]),e[21]||(e[21]=t("p",{class:"text-white/70 text-sm mt-2"},"QR Code untuk training ini",-1)),e[22]||(e[22]=t("p",{class:"text-white/50 text-xs mt-1"},"Klik untuk memperbesar",-1))])]),t("div",ne,[e[26]||(e[26]=t("h4",{class:"text-lg font-semibold text-white mb-3"},"Aksi Cepat",-1)),t("div",re,[l.canInvite?(r(),n("button",{key:0,onClick:e[2]||(e[2]=s=>a.$emit("invite")),class:"px-4 py-2 bg-blue-500/20 border border-blue-500/30 rounded-lg text-blue-200 hover:bg-blue-500/30 transition-all"},e[24]||(e[24]=[t("i",{class:"fas fa-user-plus mr-2"},null,-1),f(" Undang Peserta ")]))):d("",!0),l.canInvite?(r(),n("button",{key:1,onClick:e[3]||(e[3]=s=>a.$emit("invite-trainer")),class:"px-4 py-2 bg-purple-500/20 border border-purple-500/30 rounded-lg text-purple-200 hover:bg-purple-500/30 transition-all"},e[25]||(e[25]=[t("i",{class:"fas fa-chalkboard-teacher mr-2"},null,-1),f(" Undang Trainer ")]))):d("",!0)])]),t("div",oe,[e[31]||(e[31]=t("h4",{class:"text-lg font-semibold text-white mb-3"},"Kelola Status Training",-1)),t("div",le,[t("button",{onClick:e[4]||(e[4]=s=>O("ongoing")),class:"px-4 py-2 bg-orange-500/20 border border-orange-500/30 rounded-lg text-orange-200 hover:bg-orange-500/30 transition-all"},e[27]||(e[27]=[t("i",{class:"fas fa-play mr-2"},null,-1),f(" Set Ongoing ")])),t("button",{onClick:e[5]||(e[5]=s=>O("completed")),class:"px-4 py-2 bg-green-500/20 border border-green-500/30 rounded-lg text-green-200 hover:bg-green-500/30 transition-all"},e[28]||(e[28]=[t("i",{class:"fas fa-check mr-2"},null,-1),f(" Set Completed ")])),t("button",{onClick:e[6]||(e[6]=s=>O("cancelled")),class:"px-4 py-2 bg-red-500/20 border border-red-500/30 rounded-lg text-red-200 hover:bg-red-500/30 transition-all"},e[29]||(e[29]=[t("i",{class:"fas fa-times mr-2"},null,-1),f(" Set Cancelled ")])),l.training.status==="completed"?(r(),n("button",{key:0,onClick:xt,class:"px-4 py-2 bg-indigo-500/20 border border-indigo-500/30 rounded-lg text-indigo-200 hover:bg-indigo-500/30 transition-all"},e[30]||(e[30]=[t("i",{class:"fas fa-chalkboard-teacher mr-2"},null,-1),f(" List Rating Trainer ")]))):d("",!0)])])])]),t("div",de,[e[34]||(e[34]=t("h4",{class:"text-lg font-semibold text-white mb-3"},"Daftar Trainer",-1)),t("div",ce,[t("table",ue,[e[33]||(e[33]=t("thead",null,[t("tr",{class:"border-b border-white/20"},[t("th",{class:"text-left py-2 px-2 min-w-[120px]"},"Nama"),t("th",{class:"text-left py-2 px-2 min-w-[150px]"},"Jabatan"),t("th",{class:"text-left py-2 px-2 min-w-[180px]"},"Divisi"),t("th",{class:"text-left py-2 px-2 min-w-[100px]"},"Status"),t("th",{class:"text-left py-2 px-2 min-w-[100px]"},"Jam Mengajar"),t("th",{class:"text-left py-2 px-2 min-w-[120px]"},"Aksi")])],-1)),t("tbody",null,[(r(!0),n(v,null,p(l.training.scheduleTrainers,s=>{var u,k,C,B,T,I;return r(),n("tr",{key:s.id,class:"border-b border-white/10"},[t("td",xe,[t("div",ge,[t("div",me,[s.trainer_type==="internal"&&((u=s.trainer)!=null&&u.avatar)?(r(),n("img",{key:0,src:"/storage/"+s.trainer.avatar,alt:s.trainer_name,class:"w-full h-full object-cover"},null,8,be)):(r(),n("i",fe))]),t("div",he,[t("span",null,i(s.trainer_name||((k=s.trainer)==null?void 0:k.nama_lengkap)||"Trainer tidak ditemukan"),1),t("div",ve,[t("span",{class:b([rt(s.trainer_type),"px-2 py-1 text-xs rounded-full"])},i(s.trainer_type==="external"?"External":"Internal"),3),s.is_primary_trainer?(r(),n("span",pe," Primary ")):d("",!0)])])])]),t("td",we,i(((B=(C=s.trainer)==null?void 0:C.jabatan)==null?void 0:B.nama_jabatan)||"-"),1),t("td",ye,i(((I=(T=s.trainer)==null?void 0:T.divisi)==null?void 0:I.nama_divisi)||"-"),1),t("td",_e,[t("span",{class:b([it(s.status),"px-2 py-1 rounded-full text-xs flex items-center gap-1"])},[t("i",{class:b([at(s.status),"text-xs"])},null,2),f(" "+i(nt(s.status)),1)],2)]),t("td",ke,i(s.hours_taught||"0")+" jam",1),t("td",Ce,[t("div",Be,[l.canInvite&&!s.is_primary_trainer?(r(),n("button",{key:0,onClick:gt=>dt(s.id),class:"px-2 py-1 bg-yellow-500/20 border border-yellow-500/30 rounded text-xs text-yellow-200 hover:bg-yellow-500/30 transition-colors"}," Set Primary ",8,Te)):d("",!0),l.canInvite?(r(),n("button",{key:1,onClick:gt=>ct(s.id),class:"px-2 py-1 bg-red-500/20 border border-red-500/30 rounded text-xs text-red-200 hover:bg-red-500/30 transition-colors"}," Hapus ",8,Se)):d("",!0)])])])}),128)),!l.training.scheduleTrainers||l.training.scheduleTrainers.length===0?(r(),n("tr",je,e[32]||(e[32]=[t("td",{colspan:"6",class:"py-8 text-center text-white/50"},[t("i",{class:"fas fa-chalkboard-teacher text-4xl mb-2"}),t("p",null,"Belum ada trainer yang diundang")],-1)]))):d("",!0)])])])]),t("div",De,[e[36]||(e[36]=t("h4",{class:"text-lg font-semibold text-white mb-3"},"Daftar Peserta",-1)),t("div",Re,[t("table",Ae,[e[35]||(e[35]=t("thead",null,[t("tr",{class:"border-b border-white/20"},[t("th",{class:"text-left py-2 px-2 min-w-[120px]"},"Nama"),t("th",{class:"text-left py-2 px-2 min-w-[150px]"},"Jabatan"),t("th",{class:"text-left py-2 px-2 min-w-[180px]"},"Divisi"),t("th",{class:"text-left py-2 px-2 min-w-[80px]"},"Status"),t("th",{class:"text-left py-2 px-2 min-w-[100px]"},"Check-in"),t("th",{class:"text-left py-2 px-2 min-w-[120px]"},"Aksi")])],-1)),t("tbody",null,[(r(!0),n(v,null,p(l.training.invitations,s=>{var u,k,C,B,T;return r(),n("tr",{key:s.id,class:"border-b border-white/10"},[t("td",Ee,i(((u=s.user)==null?void 0:u.nama_lengkap)||"User tidak ditemukan"),1),t("td",Ie,i(((C=(k=s.user)==null?void 0:k.jabatan)==null?void 0:C.nama_jabatan)||"-"),1),t("td",Ge,i(((T=(B=s.user)==null?void 0:B.divisi)==null?void 0:T.nama_divisi)||"-"),1),t("td",Le,[t("span",{class:b([tt(s.status),"px-2 py-1 rounded-full text-xs flex items-center gap-1"])},[t("i",{class:b([et(s.status),"text-xs"])},null,2),f(" "+i(st(s.status)),1)],2)]),t("td",Pe,i(s.check_in_time_formatted||"-"),1),t("td",Oe,[t("div",Ke,[s.status==="invited"&&l.canInvite?(r(),n("button",{key:0,onClick:I=>ot(s.id),class:"px-2 py-1 bg-green-500/20 border border-green-500/30 rounded text-xs text-green-200 hover:bg-green-500/30 transition-colors"}," Hadir ",8,Qe)):d("",!0),l.canInvite?(r(),n("button",{key:1,onClick:I=>lt(s.id),class:"px-2 py-1 bg-red-500/20 border border-red-500/30 rounded text-xs text-red-200 hover:bg-red-500/30 transition-colors"}," Hapus ",8,$e)):d("",!0)])])])}),128))])])])])]),K.value?(r(),n("div",He,[t("div",{class:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:U}),t("div",Ne,[t("button",{onClick:U,class:"absolute top-4 right-4 text-white/70 hover:text-white transition-colors"},e[37]||(e[37]=[t("i",{class:"fas fa-times text-xl"},null,-1)])),t("div",Fe,[e[38]||(e[38]=t("h4",{class:"text-2xl font-bold text-white mb-2"},"Review Training",-1)),g.value.training?(r(),n("div",Me,[t("p",Ue,i(g.value.training.course_title),1),t("p",qe,i(new Date(g.value.training.scheduled_date).toLocaleDateString("id-ID"))+" • "+i(g.value.training.start_time)+" - "+i(g.value.training.end_time)+" • "+i(g.value.training.outlet_name),1)])):d("",!0)]),g.value.statistics?(r(),n("div",Ye,[t("div",ze,[t("div",Je,i(g.value.statistics.total_reviews),1),e[39]||(e[39]=t("div",{class:"text-xs text-white/70"},"Total Review",-1))]),t("div",Ve,[t("div",We,i(g.value.statistics.average_training_rating)+"/5",1),e[40]||(e[40]=t("div",{class:"text-xs text-white/70"},"Rating Training",-1))]),t("div",Xe,[t("div",Ze,i(g.value.statistics.average_trainer_rating)+"/5",1),e[41]||(e[41]=t("div",{class:"text-xs text-white/70"},"Rating Trainer",-1))]),t("div",ts,[t("div",es,i(g.value.statistics.average_satisfaction)+"/5",1),e[42]||(e[42]=t("div",{class:"text-xs text-white/70"},"Kepuasan Rata-rata",-1))])])):d("",!0),Z.value?(r(),n("div",ss,e[43]||(e[43]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-white"},null,-1),t("p",{class:"text-sm mt-2 text-white/70"},"Memuat review...",-1)]))):!g.value.reviews||g.value.reviews.length===0?(r(),n("div",is,e[44]||(e[44]=[t("div",{class:"mb-4 text-white/50"},[t("i",{class:"fas fa-star text-6xl"})],-1),t("h4",{class:"text-lg font-semibold text-white/70 mb-2"},"Belum Ada Review",-1),t("p",{class:"text-white/50"},"Belum ada peserta yang memberikan review untuk training ini.",-1)]))):(r(),n("div",as,[(r(!0),n(v,null,p(g.value.reviews,s=>(r(),n("div",{key:s.review_id,class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4"},[t("div",ns,[t("div",rs,[t("div",os,i(s.user_name.charAt(0).toUpperCase()),1),t("div",null,[t("h5",ls,i(s.user_name),1),t("p",ds,i(s.nama_jabatan)+" • "+i(s.nama_divisi),1)])]),t("div",cs,[t("div",us,i(new Date(s.review_date).toLocaleDateString("id-ID")),1),t("div",xs,i(new Date(s.review_date).toLocaleTimeString("id-ID")),1)])]),t("div",gs,[t("div",null,[e[45]||(e[45]=t("div",{class:"text-white/70 text-sm mb-1"},"Rating Training",-1)),t("div",ms,[t("div",bs,[(r(),n(v,null,p(5,u=>t("i",{key:u,class:b(["fas fa-star text-sm",u<=s.training_rating?"text-yellow-400":"text-gray-300"])},null,2)),64))]),t("span",fs,i(s.training_rating)+"/5",1)])]),t("div",null,[e[46]||(e[46]=t("div",{class:"text-white/70 text-sm mb-1"},"Rating Trainer",-1)),t("div",hs,[t("div",vs,[(r(),n(v,null,p(5,u=>t("i",{key:u,class:b(["fas fa-star text-sm",u<=s.trainer_rating?"text-yellow-400":"text-gray-300"])},null,2)),64))]),t("span",ps,i(s.trainer_rating)+"/5",1)])]),t("div",null,[e[47]||(e[47]=t("div",{class:"text-white/70 text-sm mb-1"},"Kepuasan Keseluruhan",-1)),t("div",ws,[t("div",ys,[(r(),n(v,null,p(5,u=>t("i",{key:u,class:b(["fas fa-heart text-sm",u<=s.overall_satisfaction?"text-red-400":"text-gray-300"])},null,2)),64))]),t("span",_s,i(s.overall_satisfaction)+"/5",1)])])]),s.training_feedback?(r(),n("div",ks,[e[48]||(e[48]=t("div",{class:"text-white/70 text-sm mb-1"},"Feedback Training",-1)),t("div",Cs,i(s.training_feedback),1)])):d("",!0),s.trainer_feedback?(r(),n("div",Bs,[e[49]||(e[49]=t("div",{class:"text-white/70 text-sm mb-1"},"Feedback Trainer",-1)),t("div",Ts,i(s.trainer_feedback),1)])):d("",!0),s.improvement_suggestions?(r(),n("div",Ss,[e[50]||(e[50]=t("div",{class:"text-white/70 text-sm mb-1"},"Saran Perbaikan",-1)),t("div",js,i(s.improvement_suggestions),1)])):d("",!0),t("div",Ds,[t("div",Rs,[e[51]||(e[51]=t("i",{class:"fas fa-chalkboard-teacher mr-1"},null,-1)),f(" Trainer: "+i(s.trainer_name_final),1)])])]))),128))]))])])):d("",!0),L.value?(r(),n("div",As,[t("div",{class:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:q}),t("div",Es,[t("button",{onClick:q,class:"absolute top-4 right-4 text-white/70 hover:text-white transition-colors"},e[52]||(e[52]=[t("i",{class:"fas fa-times text-xl"},null,-1)])),t("div",Is,[e[53]||(e[53]=t("h4",{class:"text-2xl font-bold text-white mb-2"},"Rating Trainer",-1)),c.value.training?(r(),n("div",Gs,[t("p",Ls,i(c.value.training.course_title),1),t("p",Ps,i(new Date(c.value.training.scheduled_date).toLocaleDateString("id-ID"))+" • "+i(c.value.training.start_time)+" - "+i(c.value.training.end_time)+" • "+i(c.value.training.outlet_name),1)])):d("",!0)]),c.value.statistics?(r(),n("div",Os,[t("div",Ks,[t("div",Qs,i(c.value.statistics.total_ratings),1),e[54]||(e[54]=t("div",{class:"text-xs text-white/70"},"Total Rating",-1))]),t("div",$s,[t("div",Hs,i(c.value.statistics.average_trainer_rating)+"/5",1),e[55]||(e[55]=t("div",{class:"text-xs text-white/70"},"Rating Rata-rata",-1))])])):d("",!0),c.value.statistics&&c.value.statistics.rating_distribution?(r(),n("div",Ns,[e[56]||(e[56]=t("h5",{class:"text-lg font-semibold text-white mb-3"},"Distribusi Rating",-1)),t("div",Fs,[(r(!0),n(v,null,p(c.value.statistics.rating_distribution,s=>(r(),n("div",{key:s.rating,class:"flex items-center space-x-3"},[t("div",Ms,i(s.rating),1),t("div",Us,[t("div",{class:"bg-yellow-400 h-2 rounded-full transition-all duration-500",style:W({width:s.percentage+"%"})},null,4)]),t("div",qs,i(s.count)+" ("+i(s.percentage)+"%)",1)]))),128))])])):d("",!0),P.value?(r(),n("div",Ys,e[57]||(e[57]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-white"},null,-1),t("p",{class:"text-sm mt-2 text-white/70"},"Memuat rating trainer...",-1)]))):!c.value.trainer_ratings||c.value.trainer_ratings.length===0?(r(),n("div",zs,e[58]||(e[58]=[t("i",{class:"fas fa-chalkboard-teacher text-6xl text-white/30 mb-4"},null,-1),t("p",{class:"text-white/70"},"Belum ada rating trainer untuk training ini",-1)]))):(r(),n("div",Js,[(r(!0),n(v,null,p(c.value.trainer_ratings,s=>(r(),n("div",{key:s.review_id,class:"backdrop-blur-sm bg-white/5 border border-white/10 rounded-xl p-4"},[t("div",Vs,[t("div",Ws,[e[59]||(e[59]=t("div",{class:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-full flex items-center justify-center"},[t("i",{class:"fas fa-user text-white text-sm"})],-1)),t("div",null,[t("div",Xs,i(s.user_name),1),t("div",Zs,i(s.nama_jabatan)+" • "+i(s.nama_divisi),1)])]),t("div",ti,i(new Date(s.review_date).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),t("div",ei,[e[60]||(e[60]=t("div",{class:"text-white/70 text-sm mb-1"},"Rating Trainer",-1)),t("div",si,[t("div",ii,[(r(),n(v,null,p(5,u=>t("i",{key:u,class:b(["fas fa-star text-sm",u<=s.trainer_rating?"text-yellow-400":"text-gray-300"])},null,2)),64))]),t("span",ai,i(s.trainer_rating)+"/5",1)])]),s.trainer_feedback?(r(),n("div",ni,[e[61]||(e[61]=t("div",{class:"text-white/70 text-sm mb-1"},"Feedback Trainer",-1)),t("div",ri,i(s.trainer_feedback),1)])):d("",!0),t("div",oi,[t("div",li,[e[62]||(e[62]=t("i",{class:"fas fa-chalkboard-teacher mr-1"},null,-1)),f(" Trainer: "+i(s.trainer_name_final),1)])])]))),128))]))])])):d("",!0),D.value?(r(),n("div",di,[t("div",{class:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e[7]||(e[7]=s=>D.value=!1)}),t("div",ci,[t("button",{onClick:e[8]||(e[8]=s=>D.value=!1),class:"absolute top-4 right-4 text-white/70 hover:text-white transition-colors"},e[63]||(e[63]=[t("i",{class:"fas fa-times text-xl"},null,-1)])),e[67]||(e[67]=t("h4",{class:"text-xl font-bold text-white text-center mb-6"},"QR Code Training",-1)),t("div",ui,[t("div",xi,[t("div",gi,[y.value&&!j.value?(r(),n("img",{key:0,src:y.value,alt:"QR Code",class:"w-full h-full",onError:F,onLoad:M},null,40,mi)):(r(),n("div",bi,[t("div",fi,[e[64]||(e[64]=t("i",{class:"fas fa-qrcode text-gray-400 text-6xl mb-4"},null,-1)),e[65]||(e[65]=t("p",{class:"text-gray-500 text-sm"},"QR Code",-1)),t("p",hi,"Training #"+i(l.training.id),1)])]))])]),t("div",vi,[t("p",pi,i(((V=l.training.course)==null?void 0:V.title)||"Training"),1),t("p",wi,i(N(l.training.scheduled_date)),1),t("p",yi,i(l.training.start_time)+" - "+i(l.training.end_time),1),e[66]||(e[66]=t("p",{class:"text-xs text-white/40 mt-2"},"YMSoft ERP",-1))])])])])):d("",!0)])}}};export{Si as default};
