import{r as L,A as m,B as o,C as x,D as t,x as P,Q as p,S as f,G as n,N as l,l as y,H as C,J as B,I as V,L as r,E as u,F,M as O,W as E}from"./vendor-vue-g7iCcTkf.js";import{A as U}from"./AppLayout-DZJ25Yod.js";import"./vendor-utils-CpgP2uT4.js";import"./app-BujIObx9.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DNpNU_ax.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const A={class:"w-full py-8 px-0"},G={class:"flex justify-between items-center mb-6"},J={class:"bg-white rounded-xl shadow-lg p-6 mb-6"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$={class:"text-lg font-semibold text-gray-800"},z={class:"text-sm"},H={class:"md:col-span-2"},K={class:"text-gray-800 whitespace-pre-wrap"},Q={class:"text-gray-800"},R={class:"text-gray-800"},q={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},X={class:"bg-white rounded-xl shadow-lg p-4 border-l-4 border-blue-500"},Y={class:"text-2xl font-bold text-gray-800"},Z={class:"bg-white rounded-xl shadow-lg p-4 border-l-4 border-green-500"},tt={class:"text-2xl font-bold text-green-600"},et={class:"bg-white rounded-xl shadow-lg p-4 border-l-4 border-purple-500"},st={class:"text-2xl font-bold text-purple-600"},at={class:"bg-white rounded-xl shadow-lg p-4 border-l-4 border-yellow-500"},lt={class:"text-2xl font-bold text-yellow-600"},ot={class:"bg-white rounded-xl shadow-lg p-4 mb-6"},it={class:"flex gap-4 items-end"},rt={class:"flex-1"},dt={class:"w-48"},nt={class:"bg-white rounded-xl shadow-lg overflow-hidden"},xt={class:"overflow-x-auto"},ut={class:"min-w-full divide-y divide-gray-200"},ct={class:"bg-white divide-y divide-gray-200"},gt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},bt={class:"px-6 py-4 text-sm font-medium text-gray-900"},mt={class:"px-6 py-4 text-sm text-gray-600"},pt={class:"px-6 py-4 whitespace-nowrap"},ft={class:"px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},yt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},vt={key:1,class:"text-gray-400"},ht={class:"px-6 py-4 whitespace-nowrap"},wt={class:"px-6 py-4 whitespace-nowrap text-sm"},kt={key:0,class:"text-green-600 font-semibold"},_t={key:1,class:"text-gray-400"},Tt=["title"],Dt={key:0,class:"text-center py-12"},St={key:1,class:"px-6 py-4 border-t border-gray-200"},Ct={class:"flex items-center justify-between"},It={class:"text-sm text-gray-700"},Mt={class:"flex gap-2"},At={__name:"Show",props:{notification:Object,recipients:Object,stats:Object,filters:Object},setup(a){var h,w;const c=a,d=L({search:((h=c.filters)==null?void 0:h.search)||"",status:((w=c.filters)==null?void 0:w.status)||""});let g=null;const I=()=>{g&&clearTimeout(g),g=setTimeout(()=>{b()},500)},b=()=>{E.get(`/member-notification/${c.notification.id}`,d.value,{preserveState:!0,preserveScroll:!0})},M=()=>{d.value={search:"",status:""},b()},N=i=>({all:"Semua Member",specific:"Pilih Member",filter:"Filter Member"})[i]||i,j=i=>({pending:"Pending",sent:"Terkirim",delivered:"Terkirim & Terbaca",opened:"Sudah Dibaca",failed:"Gagal"})[i]||i,v=i=>i?new Date(i).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return(i,e)=>(o(),m(U,null,{default:x(()=>[t("div",A,[t("div",G,[t("div",null,[P(p(f),{href:"/member-notification",class:"text-blue-600 hover:text-blue-800 mb-2 inline-flex items-center gap-2"},{default:x(()=>e[2]||(e[2]=[t("i",{class:"fa-solid fa-arrow-left"},null,-1),n(" Kembali ke Daftar ")])),_:1}),e[3]||(e[3]=t("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[t("i",{class:"fa-solid fa-bell"}),n(" Detail Notifikasi ")],-1))])]),t("div",J,[e[9]||(e[9]=t("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Informasi Notifikasi",-1)),t("div",W,[t("div",null,[e[4]||(e[4]=t("label",{class:"text-sm font-medium text-gray-600"},"Judul",-1)),t("p",$,l(a.notification.title),1)]),t("div",null,[e[5]||(e[5]=t("label",{class:"text-sm font-medium text-gray-600"},"Target Type",-1)),t("p",z,[t("span",{class:y(["px-2 py-1 text-xs font-semibold rounded-full",{"bg-blue-100 text-blue-800":a.notification.target_type==="all","bg-green-100 text-green-800":a.notification.target_type==="specific","bg-purple-100 text-purple-800":a.notification.target_type==="filter"}])},l(N(a.notification.target_type)),3)])]),t("div",H,[e[6]||(e[6]=t("label",{class:"text-sm font-medium text-gray-600"},"Pesan",-1)),t("p",K,l(a.notification.message),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"text-sm font-medium text-gray-600"},"Tanggal Dikirim",-1)),t("p",Q,l(v(a.notification.sent_at||a.notification.created_at)),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"text-sm font-medium text-gray-600"},"Dibuat Oleh",-1)),t("p",R,l(a.notification.created_by?`User ID: ${a.notification.created_by}`:"-"),1)])])]),t("div",q,[t("div",X,[e[10]||(e[10]=t("div",{class:"text-sm text-gray-600 mb-1"},"Total Penerima",-1)),t("div",Y,l(a.stats.total_recipients),1)]),t("div",Z,[e[11]||(e[11]=t("div",{class:"text-sm text-gray-600 mb-1"},"Terkirim",-1)),t("div",tt,l(a.stats.sent_count),1)]),t("div",et,[e[12]||(e[12]=t("div",{class:"text-sm text-gray-600 mb-1"},"Terkirim & Terbaca",-1)),t("div",st,l(a.stats.delivered_count),1)]),t("div",at,[e[13]||(e[13]=t("div",{class:"text-sm text-gray-600 mb-1"},"Sudah Dibaca",-1)),t("div",lt,l(a.stats.opened_count),1)])]),t("div",ot,[t("div",it,[t("div",rt,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Cari Penerima",-1)),C(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>d.value.search=s),onInput:I,placeholder:"Cari nama, email, atau ID member...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[B,d.value.search]])]),t("div",dt,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),C(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>d.value.status=s),onChange:b,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[15]||(e[15]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"sent"},"Terkirim",-1),t("option",{value:"delivered"},"Terkirim & Terbaca",-1),t("option",{value:"opened"},"Sudah Dibaca",-1),t("option",{value:"failed"},"Gagal",-1),t("option",{value:"pending"},"Pending",-1)]),544),[[V,d.value.status]])]),t("div",null,[t("button",{onClick:M,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition"}," Reset ")])])]),t("div",nt,[e[22]||(e[22]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h2",{class:"text-xl font-bold text-gray-800"},"Daftar Penerima")],-1)),t("div",xt,[t("table",ut,[e[18]||(e[18]=t("thead",{class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Member ID"),t("th",{class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Nama"),t("th",{class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Email"),t("th",{class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Level"),t("th",{class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Device Type"),t("th",{class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Dibaca"),t("th",{class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Error")])],-1)),t("tbody",ct,[(o(!0),r(F,null,O(a.recipients.data,s=>{var k,_,T,D,S;return o(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",gt,l(((k=s.member)==null?void 0:k.member_id)||"-"),1),t("td",bt,l(((_=s.member)==null?void 0:_.nama_lengkap)||"-"),1),t("td",mt,l(((T=s.member)==null?void 0:T.email)||"-"),1),t("td",pt,[t("span",ft,l(((D=s.member)==null?void 0:D.member_level)||"-"),1)]),t("td",yt,[s.device_token?(o(),r("span",{key:0,class:y(["px-2 py-1 text-xs font-semibold rounded-full",{"bg-green-100 text-green-800":s.device_token.device_type==="android","bg-blue-100 text-blue-800":s.device_token.device_type==="ios","bg-purple-100 text-purple-800":s.device_token.device_type==="web"}])},l(((S=s.device_token.device_type)==null?void 0:S.toUpperCase())||"-"),3)):(o(),r("span",vt,"-"))]),t("td",ht,[t("span",{class:y(["px-2 py-1 text-xs font-semibold rounded-full",{"bg-green-100 text-green-800":s.status==="sent"||s.status==="delivered","bg-blue-100 text-blue-800":s.status==="opened","bg-red-100 text-red-800":s.status==="failed","bg-yellow-100 text-yellow-800":s.status==="pending"}])},l(j(s.status)),3)]),t("td",wt,[s.is_read||s.opened_at?(o(),r("span",kt,[e[17]||(e[17]=t("i",{class:"fa-solid fa-check-circle mr-1"},null,-1)),n(" "+l(v(s.opened_at||s.read_at)),1)])):(o(),r("span",_t,"Belum dibaca"))]),t("td",{class:"px-6 py-4 text-sm text-red-600 max-w-xs truncate",title:s.error_message},l(s.error_message||"-"),9,Tt)])}),128))])])]),a.recipients.data.length===0?(o(),r("div",Dt,e[19]||(e[19]=[t("i",{class:"fa-solid fa-users-slash text-6xl text-gray-300 mb-4"},null,-1),t("p",{class:"text-gray-500 text-lg"},"Tidak ada penerima yang ditemukan",-1)]))):u("",!0),a.recipients.data.length>0?(o(),r("div",St,[t("div",Ct,[t("div",It," Menampilkan "+l(a.recipients.from)+" sampai "+l(a.recipients.to)+" dari "+l(a.recipients.total)+" penerima ",1),t("div",Mt,[a.recipients.prev_page_url?(o(),m(p(f),{key:0,href:a.recipients.prev_page_url,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition"},{default:x(()=>e[20]||(e[20]=[t("i",{class:"fa-solid fa-chevron-left mr-1"},null,-1),n(" Sebelumnya ")])),_:1},8,["href"])):u("",!0),a.recipients.next_page_url?(o(),m(p(f),{key:1,href:a.recipients.next_page_url,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition"},{default:x(()=>e[21]||(e[21]=[n(" Selanjutnya "),t("i",{class:"fa-solid fa-chevron-right ml-1"},null,-1)])),_:1},8,["href"])):u("",!0)])])])):u("",!0)])])]),_:1}))}};export{At as default};
