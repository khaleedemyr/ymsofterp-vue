import{r as b,W as G,w as re,a as le,L as u,B as l,x as h,Q as c,U as oe,C as g,D as e,E as x,G as m,S as v,H as w,J as E,I as R,F as T,M as Y,N as a,l as J,Y as ae,A as _,O as ne}from"./vendor-vue-g7iCcTkf.js";import{A as ie}from"./AppLayout-DP-q1yH_.js";import{l as ue}from"./lodash-DB3HVzpp.js";import{S as k}from"./app-BoyRvw0M.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-Cs9EnNrk.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const de={class:"max-w-7xl w-full mx-auto py-8 px-2"},fe={class:"flex justify-between items-center mb-6"},me={class:"mb-6 bg-white rounded-xl shadow-lg p-6 border border-gray-100"},ce={class:"flex flex-wrap gap-4 items-center"},ge={class:"flex-1 min-w-64"},xe={class:"relative"},pe={class:"min-w-48"},ve={class:"min-w-32"},be={class:"mt-4 flex flex-wrap gap-4 items-center"},ye={class:"flex items-center gap-2"},he={class:"relative"},we={class:"flex items-center gap-2"},_e={class:"relative"},ke={class:"flex gap-2"},Se={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ce={class:"p-6 pb-4"},Be={class:"flex items-start justify-between mb-4"},De={class:"flex-1"},Ie={class:"text-lg font-bold text-gray-800 mb-1"},je={class:"text-sm text-gray-600"},Ue={class:"flex items-center gap-4 mb-4"},Me=["onClick"],Ee=["src","alt"],Te={key:1,class:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-lg font-bold border-3 border-white shadow-xl"},Ve={class:"font-medium text-gray-800 text-lg"},Ae={class:"text-sm text-gray-500"},Oe={class:"text-xs text-gray-400"},Ne={class:"text-xs text-gray-400"},$e={key:0,class:"mb-4"},ze={class:"flex items-center justify-between mb-2"},He={class:"text-2xl font-bold text-blue-600"},Le={class:"flex items-center gap-2 mb-2"},Pe={class:"flex space-x-1"},Fe={class:"text-xs text-gray-500"},We={class:"w-full bg-gray-200 rounded-full h-2"},Ge={class:"flex items-center gap-2 text-sm text-gray-500 mb-4"},Re={class:"flex items-center justify-between"},Ye={class:"flex space-x-2"},Je=["onClick"],Ke={key:1,class:"text-center py-12"},Qe={key:2,class:"mt-8"},qe={class:"flex items-center justify-between"},Xe={class:"flex-1 flex justify-between sm:hidden"},Ze={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},et={class:"text-sm text-gray-700"},tt={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},st=["src"],gt={__name:"Index",props:{surveys:Object,user:Object,filters:Object},setup(o){var z,H,L,P,F;const d=o,S=b(((z=d.filters)==null?void 0:z.search)||""),C=b(((H=d.filters)==null?void 0:H.status)||"all"),B=b(((L=d.filters)==null?void 0:L.per_page)||10),n=b(((P=d.filters)==null?void 0:P.date_from)||""),i=b(((F=d.filters)==null?void 0:F.date_to)||""),I=b(!1),j=b(""),y=ue.debounce(()=>{G.get("/employee-survey",{search:S.value,status:C.value,per_page:B.value,date_from:n.value,date_to:i.value},{preserveState:!0,replace:!0})},400);re([S,C,B,n,i],()=>{y()}),le(()=>{var r,t,s,f;(t=(r=d.surveys)==null?void 0:r.flash)!=null&&t.success&&k.fire({title:"Berhasil!",text:d.surveys.flash.success,icon:"success",timer:3e3,showConfirmButton:!1}),(f=(s=d.surveys)==null?void 0:s.flash)!=null&&f.error&&k.fire({title:"Error!",text:d.surveys.flash.error,icon:"error"})});function K(){y()}function V(){if(n.value&&i.value&&n.value>i.value){const r=n.value;n.value=i.value,i.value=r}y()}function Q(){n.value="",i.value="",y()}function U(r){const s=new Date().toISOString().split("T")[0];switch(r){case"today":n.value=s,i.value=s;break;case"week":const f=new Date;f.setDate(f.getDate()-7),n.value=f.toISOString().split("T")[0],i.value=s;break;case"month":const p=new Date;p.setDate(p.getDate()-30),n.value=p.toISOString().split("T")[0],i.value=s;break}y()}function A(r){return r?r.startsWith("http")?r:`/storage/${r}`:""}function q(r){j.value=r,I.value=!0}function O(){I.value=!1,j.value=""}function X(r){return new Date(r).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})}function Z(r){switch(r){case"draft":return"bg-yellow-100 text-yellow-800";case"submitted":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}function ee(r){switch(r){case"draft":return"Draft";case"submitted":return"Submitted";default:return"Unknown"}}function N(r){return r.surveyor_id===d.user.id||d.user.id_role==="5af56935b011a"}function te(r){if(!r)return"U";const t=r.split(" ");return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():t[0][0].toUpperCase()}function M(r){if(!r.responses||r.responses.length===0)return 0;const t=r.responses.reduce((f,p)=>f+p.score,0),s=r.responses.length*5;return Math.round(t/s*100)}function $(r){const t=M(r);return t>=80?5:t>=60?4:t>=40?3:t>=20?2:t>=1?1:0}function se(r){k.fire({title:"Konfirmasi Hapus",text:"Apakah Anda yakin ingin menghapus survey ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal",reverseButtons:!0}).then(t=>{t.isConfirmed&&G.delete(route("employee-survey.destroy",r),{onSuccess:()=>{k.fire({title:"Berhasil!",text:"Survey berhasil dihapus.",icon:"success",timer:2e3,showConfirmButton:!1})},onError:()=>{k.fire({title:"Error!",text:"Gagal menghapus survey.",icon:"error"})}})})}return(r,t)=>(l(),u(T,null,[h(c(oe),{title:"Employee Survey"}),h(ie,null,{default:g(()=>[e("div",de,[e("div",fe,[t[10]||(t[10]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-clipboard-list text-blue-500"}),m(" Employee Survey ")],-1)),h(c(v),{href:r.route("employee-survey.create"),class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"},{default:g(()=>t[9]||(t[9]=[e("i",{class:"fas fa-plus mr-2"},null,-1),m(" Buat Survey Baru ")])),_:1},8,["href"])]),e("div",me,[e("div",ce,[e("div",ge,[e("div",xe,[t[11]||(t[11]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"fa-solid fa-search text-gray-400"})],-1)),w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>S.value=s),onInput:K,type:"text",placeholder:"Cari surveyor, jabatan, divisi, outlet...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"},null,544),[[E,S.value]])])]),e("div",pe,[w(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>C.value=s),class:"form-input rounded-lg border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},t[12]||(t[12]=[e("option",{value:"all"},"Semua Status",-1),e("option",{value:"draft"},"Draft",-1),e("option",{value:"submitted"},"Submitted",-1)]),512),[[R,C.value]])]),e("div",ve,[w(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>B.value=s),class:"form-input rounded-lg border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},t[13]||(t[13]=[e("option",{value:"5"},"5 per halaman",-1),e("option",{value:"10"},"10 per halaman",-1),e("option",{value:"15"},"15 per halaman",-1),e("option",{value:"25"},"25 per halaman",-1),e("option",{value:"50"},"50 per halaman",-1)]),512),[[R,B.value]])])]),e("div",be,[e("div",ye,[t[15]||(t[15]=e("label",{class:"text-sm font-medium text-gray-700"},"Dari:",-1)),e("div",he,[t[14]||(t[14]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"fa-solid fa-calendar text-gray-400"})],-1)),w(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>n.value=s),onInput:V,type:"date",class:"pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"},null,544),[[E,n.value]])])]),e("div",we,[t[17]||(t[17]=e("label",{class:"text-sm font-medium text-gray-700"},"Sampai:",-1)),e("div",_e,[t[16]||(t[16]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"fa-solid fa-calendar text-gray-400"})],-1)),w(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>i.value=s),onInput:V,type:"date",class:"pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"},null,544),[[E,i.value]])])]),e("div",ke,[e("button",{onClick:t[5]||(t[5]=s=>U("today")),class:"px-3 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600 transition-all duration-300 text-sm"}," Hari Ini "),e("button",{onClick:t[6]||(t[6]=s=>U("week")),class:"px-3 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600 transition-all duration-300 text-sm"}," Minggu Ini "),e("button",{onClick:t[7]||(t[7]=s=>U("month")),class:"px-3 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600 transition-all duration-300 text-sm"}," Bulan Ini "),e("button",{onClick:Q,class:"px-3 py-2 bg-gray-500 text-white rounded-lg shadow hover:bg-gray-600 transition-all duration-300 text-sm flex items-center gap-1"},t[18]||(t[18]=[e("i",{class:"fas fa-times"},null,-1),m(" Clear ")]))])])]),o.surveys.data.length>0?(l(),u("div",Se,[(l(!0),u(T,null,Y(o.surveys.data,s=>{var f,p,W;return l(),u("div",{key:s.id,class:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100"},[e("div",Ce,[e("div",Be,[e("div",De,[e("h3",Ie,a(s.surveyor_name),1),e("p",je,a(s.surveyor_position),1)]),e("span",{class:J(["px-3 py-1 rounded-full text-xs font-semibold",Z(s.status)])},a(ee(s.status)),3)]),e("div",Ue,[(f=s.surveyor)!=null&&f.avatar?(l(),u("div",{key:0,class:"w-16 h-16 rounded-full overflow-hidden border-3 border-white shadow-xl cursor-pointer hover:shadow-2xl transition-all",onClick:D=>q(A(s.surveyor.avatar))},[e("img",{src:A(s.surveyor.avatar),alt:s.surveyor.nama_lengkap,class:"w-full h-full object-cover hover:scale-105 transition-transform"},null,8,Ee)],8,Me)):(l(),u("div",Te,a(te(((p=s.surveyor)==null?void 0:p.nama_lengkap)||s.surveyor_name)),1)),e("div",null,[e("p",Ve,a(((W=s.surveyor)==null?void 0:W.nama_lengkap)||s.surveyor_name),1),e("p",Ae,a(s.surveyor_position),1),e("p",Oe,a(s.surveyor_division),1),e("p",Ne,a(s.surveyor_outlet),1)])]),s.status==="submitted"?(l(),u("div",$e,[e("div",ze,[t[19]||(t[19]=e("span",{class:"text-sm font-medium text-gray-600"},"Survey Score",-1)),e("span",He,a(M(s))+"%",1)]),e("div",Le,[e("div",Pe,[(l(),u(T,null,Y(5,D=>e("i",{key:D,class:J(["fa-star text-sm",D<=$(s)?"fa-solid text-yellow-400":"fa-regular text-gray-300"])},null,2)),64))]),e("span",Fe,a($(s))+"/5",1)]),e("div",We,[e("div",{class:"bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full transition-all duration-500",style:ae({width:M(s)+"%"})},null,4)])])):x("",!0),e("div",Ge,[t[20]||(t[20]=e("i",{class:"fa-solid fa-calendar"},null,-1)),e("span",null,a(X(s.survey_date)),1)]),e("div",Re,[e("div",Ye,[h(c(v),{href:r.route("employee-survey.show",s.id),class:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-lg text-xs font-medium transition-colors"},{default:g(()=>t[21]||(t[21]=[e("i",{class:"fas fa-eye mr-1"},null,-1),m(" Lihat ")])),_:2},1032,["href"]),N(s)?(l(),_(c(v),{key:0,href:r.route("employee-survey.edit",s.id),class:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-lg text-xs font-medium transition-colors"},{default:g(()=>t[22]||(t[22]=[e("i",{class:"fas fa-edit mr-1"},null,-1),m(" Edit ")])),_:2},1032,["href"])):x("",!0),N(s)?(l(),u("button",{key:1,onClick:D=>se(s.id),class:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-lg text-xs font-medium transition-colors"},t[23]||(t[23]=[e("i",{class:"fas fa-trash mr-1"},null,-1),m(" Hapus ")]),8,Je)):x("",!0)])])])])}),128))])):(l(),u("div",Ke,[t[25]||(t[25]=e("div",{class:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4"},[e("i",{class:"fa-solid fa-clipboard-list text-gray-400 text-3xl"})],-1)),t[26]||(t[26]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Belum ada survey",-1)),t[27]||(t[27]=e("p",{class:"text-gray-500 mb-6"},"Mulai buat survey karyawan pertama Anda",-1)),h(c(v),{href:r.route("employee-survey.create"),class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors"},{default:g(()=>t[24]||(t[24]=[e("i",{class:"fas fa-plus mr-2"},null,-1),m(" Buat Survey Baru ")])),_:1},8,["href"])])),o.surveys.data.length>0?(l(),u("div",Qe,[e("nav",qe,[e("div",Xe,[o.surveys.prev_page_url?(l(),_(c(v),{key:0,href:o.surveys.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:g(()=>t[28]||(t[28]=[m(" Previous ")])),_:1},8,["href"])):x("",!0),o.surveys.next_page_url?(l(),_(c(v),{key:1,href:o.surveys.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:g(()=>t[29]||(t[29]=[m(" Next ")])),_:1},8,["href"])):x("",!0)]),e("div",Ze,[e("div",null,[e("p",et," Showing "+a(o.surveys.from)+" to "+a(o.surveys.to)+" of "+a(o.surveys.total)+" results ",1)]),e("div",null,[e("nav",tt,[o.surveys.prev_page_url?(l(),_(c(v),{key:0,href:o.surveys.prev_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},{default:g(()=>t[30]||(t[30]=[m(" Previous ")])),_:1},8,["href"])):x("",!0),o.surveys.next_page_url?(l(),_(c(v),{key:1,href:o.surveys.next_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},{default:g(()=>t[31]||(t[31]=[m(" Next ")])),_:1},8,["href"])):x("",!0)])])])])])):x("",!0)]),I.value?(l(),u("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",onClick:O},[e("div",{class:"relative max-w-4xl max-h-4xl p-4",onClick:t[8]||(t[8]=ne(()=>{},["stop"]))},[e("button",{onClick:O,class:"absolute top-2 right-2 text-white text-2xl hover:text-gray-300 transition-colors z-10"},t[32]||(t[32]=[e("i",{class:"fa-solid fa-times"},null,-1)])),e("img",{src:j.value,alt:"Profile Photo",class:"max-w-full max-h-full object-contain rounded-lg shadow-2xl"},null,8,st)])])):x("",!0)]),_:1})],64))}};export{gt as default};
