const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/app-BFfP2QJl.js","assets/vendor-utils-CpgP2uT4.js","assets/vendor-vue-g7iCcTkf.js","assets/vendor-charts-CuqD4wLC.js","assets/app-wB9rqhlj.css"])))=>i.map(i=>d[i]);
import{_ as V}from"./app-BFfP2QJl.js";import{$ as Y,c as m,r as R,w as W,a as q,A as X,B as r,C as E,D as t,L as l,E as I,x as Z,G as x,Q as ee,S as te,H as _,J as S,I as j,N as d,F as y,M as h,l as v,W as w}from"./vendor-vue-g7iCcTkf.js";import{u as ae,A as oe}from"./AppLayout-DwCHohmp.js";import"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-BgI6B89c.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const se={class:"w-full py-8 px-0"},re={class:"flex justify-between items-center mb-6"},le={class:"flex flex-wrap gap-3 mb-4 items-center"},ne={class:"flex-1 min-w-64"},ue=["disabled"],de={key:0,class:"fa fa-download"},ie={key:1,src:"/images/logo-icon.png",alt:"Loading",class:"w-4 h-4 animate-spin-fast"},pe={key:0,class:"bg-blue-50 border border-blue-200 rounded-2xl p-8 text-center"},ce={key:1,class:"bg-blue-50 border border-blue-200 rounded-2xl p-8 text-center"},ge={key:2,class:"bg-white rounded-2xl shadow-2xl overflow-x-auto transition-all"},xe={class:"w-full min-w-full divide-y divide-gray-200"},fe={key:0},be={class:"px-6 py-3 font-mono font-semibold text-blue-700"},me={class:"px-6 py-3"},_e={class:"px-6 py-3"},ye={class:"px-6 py-3"},he={key:0,class:"flex flex-wrap gap-1"},ve={class:"px-6 py-3"},we={class:"px-6 py-3"},ke={key:0,class:"flex flex-wrap gap-1"},Be={key:1,class:"text-gray-400 text-sm"},Ce={class:"px-6 py-3"},De={key:0,class:"flex flex-wrap gap-1"},Re={key:1,class:"text-gray-400 text-sm"},Se={class:"px-6 py-3"},Fe={class:"px-6 py-3"},Le={class:"px-6 py-3"},Ae={class:"px-6 py-3"},Me={class:"px-6 py-3"},Oe={class:"flex gap-2"},Pe=["onClick"],Ne=["onClick"],Ve=["onClick"],We={key:3,class:"flex justify-end mt-4 gap-2"},Ee=["disabled","onClick","innerHTML"],Qe={__name:"Index",props:{contraBons:Object,filters:Object,dataLoaded:{type:Boolean,default:!1}},setup(U){var L,A,M,O,P;const u=U,f=Y(),{showLoading:C,hideLoading:D}=ae(),$=m(()=>{var i;const o=(i=f.props.auth)==null?void 0:i.user;if(!o)return!1;const a=o.id_jabatan==160&&o.status=="A",e=o.id_role==="5af56935b011a"&&o.status==="A";return a||e}),k=()=>new Date().toISOString().split("T")[0],s=R({search:((L=u.filters)==null?void 0:L.search)||"",status:((A=u.filters)==null?void 0:A.status)||"",date_from:((M=u.filters)==null?void 0:M.date_from)||k(),date_to:((O=u.filters)==null?void 0:O.date_to)||k(),per_page:((P=u.filters)==null?void 0:P.per_page)||10}),B=R(u.dataLoaded||!1),p=R(!1),g=m(()=>!u.contraBons||typeof u.contraBons!="object"?{data:[],links:[],current_page:1,last_page:1,total:0,per_page:10}:{...u.contraBons,data:Array.isArray(u.contraBons.data)?u.contraBons.data:[],links:Array.isArray(u.contraBons.links)?u.contraBons.links:[],current_page:u.contraBons.current_page||1,last_page:u.contraBons.last_page||1,total:u.contraBons.total||0,per_page:u.contraBons.per_page||10});m({get:()=>s.value.search,set:o=>{s.value.search=o}}),m({get:()=>s.value.status,set:o=>{s.value.status=o}}),m({get:()=>s.value.date_from,set:o=>{s.value.date_from=o}}),m({get:()=>s.value.date_to,set:o=>{s.value.date_to=o}}),W(()=>u.filters,o=>{o&&(s.value.search=o.search||"",s.value.status=o.status||"",s.value.date_from=o.date_from||k(),s.value.date_to=o.date_to||k(),s.value.per_page=o.per_page||10)},{immediate:!0}),W(()=>u.dataLoaded,o=>{B.value=o||!1},{immediate:!0});function H(o){return o?new Date(o).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}function G(o){return o==null?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(o)}function T(o,a){if(!o)return"bg-gray-100 text-gray-800 border-gray-300";const e=String(o).toUpperCase();if(e.startsWith("PRF-"))return"bg-blue-100 text-blue-800 border-blue-300";if(e.startsWith("RWF"))return"bg-orange-100 text-orange-800 border-orange-300";if(e.startsWith("RF"))return"bg-purple-100 text-purple-800 border-purple-300";if(a&&a.length>0){if(a.includes("PR Foods"))return"bg-blue-100 text-blue-800 border-blue-300";if(a.includes("Warehouse Retail Food"))return"bg-orange-100 text-orange-800 border-orange-300";if(a.includes("Retail Food"))return"bg-purple-100 text-purple-800 border-purple-300";if(a.includes("RO Supplier"))return"bg-green-100 text-green-800 border-green-300"}return"bg-gray-100 text-gray-800 border-gray-300"}function F(){p.value=!0,C("Memuat data Contra Bon...");const o={load_data:!0,search:s.value.search,status:s.value.status,date_from:s.value.date_from,date_to:s.value.date_to,per_page:s.value.per_page};w.get("/contra-bons",o,{preserveState:!0,replace:!0,onFinish:()=>{p.value=!1,D()}})}function z(o){o&&(p.value=!0,C("Memuat data Contra Bon..."),w.visit(o,{preserveState:!0,replace:!0,onFinish:()=>{p.value=!1,D()}}))}function J(o){w.visit(`/contra-bons/${o}/edit`)}function K(o){w.visit(`/contra-bons/${o}`)}function Q(o){o&&V(async()=>{const{default:a}=await import("./app-BFfP2QJl.js").then(e=>e.s);return{default:a}},__vite__mapDeps([0,1,2,3,4])).then(({default:a})=>{a.fire({title:"Hapus Contra Bon?",text:"Data yang dihapus tidak dapat dikembalikan.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"}).then(e=>{e.isConfirmed&&(C("Menghapus Contra Bon..."),w.delete(`/contra-bons/${o}`,{onSuccess:i=>{var c;const b=((c=i.props.flash)==null?void 0:c.success)||"Contra Bon berhasil dihapus!";a.fire("Berhasil",b,"success")},onError:i=>{var c;const b=((c=f.props.flash)==null?void 0:c.error)||(i==null?void 0:i.message)||"Gagal menghapus Contra Bon";a.fire("Gagal",b,"error")},onFinish:()=>{D()}}))})})}return q(()=>{V(async()=>{const{default:o}=await import("./app-BFfP2QJl.js").then(a=>a.s);return{default:o}},__vite__mapDeps([0,1,2,3,4])).then(({default:o})=>{var a,e;(a=f.props.flash)!=null&&a.success&&o.fire("Berhasil",f.props.flash.success,"success"),(e=f.props.flash)!=null&&e.error&&o.fire("Gagal",f.props.flash.error,"error")})}),(o,a)=>(r(),X(oe,null,{default:E(()=>[t("div",se,[t("div",re,[a[6]||(a[6]=t("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[t("i",{class:"fa-solid fa-file-invoice"}),x(" Contra Bon ")],-1)),Z(ee(te),{href:o.route("contra-bons.create"),class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"},{default:E(()=>a[5]||(a[5]=[x(" + Buat Contra Bon ")])),_:1},8,["href"])]),t("div",le,[t("div",ne,[_(t("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>s.value.search=e),type:"text",placeholder:"Cari nomor/PO/Supplier...",class:"w-full px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},null,512),[[S,s.value.search]])]),_(t("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>s.value.status=e),class:"px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},a[7]||(a[7]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"draft"},"Draft",-1),t("option",{value:"approved"},"Approved",-1),t("option",{value:"rejected"},"Rejected",-1)]),512),[[j,s.value.status]]),_(t("input",{type:"date","onUpdate:modelValue":a[2]||(a[2]=e=>s.value.date_from=e),class:"px-2 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",placeholder:"Dari Tanggal",title:"Dari Tanggal"},null,512),[[S,s.value.date_from]]),_(t("input",{type:"date","onUpdate:modelValue":a[3]||(a[3]=e=>s.value.date_to=e),class:"px-2 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",placeholder:"Sampai Tanggal",title:"Sampai Tanggal"},null,512),[[S,s.value.date_to]]),t("button",{onClick:F,disabled:p.value,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-6 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[p.value?(r(),l("img",ie)):(r(),l("i",de)),x(" "+d(p.value?"Memuat...":"Load Data"),1)],8,ue),_(t("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>s.value.per_page=e),class:"px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},a[8]||(a[8]=[t("option",{value:"10"},"10 per halaman",-1),t("option",{value:"25"},"25 per halaman",-1),t("option",{value:"50"},"50 per halaman",-1),t("option",{value:"100"},"100 per halaman",-1)]),512),[[j,s.value.per_page]])]),p.value&&!B.value?(r(),l("div",pe,a[9]||(a[9]=[t("img",{src:"/images/logo-icon.png",alt:"Loading",class:"w-16 h-16 mx-auto mb-4 animate-spin"},null,-1),t("p",{class:"text-gray-700 text-lg font-semibold mb-2"},"Memuat Data...",-1),t("p",{class:"text-gray-600"},"Mohon tunggu sebentar.",-1)]))):!B.value&&!p.value?(r(),l("div",ce,[a[11]||(a[11]=t("i",{class:"fa fa-info-circle text-blue-500 text-4xl mb-4"},null,-1)),a[12]||(a[12]=t("p",{class:"text-gray-700 text-lg font-semibold mb-2"},"Data Belum Dimuat",-1)),a[13]||(a[13]=t("p",{class:"text-gray-600 mb-4"},'Klik tombol "Load Data" untuk memuat data Contra Bon',-1)),t("button",{onClick:F,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-6 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"},a[10]||(a[10]=[t("i",{class:"fa fa-download mr-2"},null,-1),x(" Load Data ")]))])):(r(),l("div",ge,[t("table",xe,[a[18]||(a[18]=t("thead",{class:"bg-gradient-to-r from-blue-50 to-blue-100"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider rounded-tl-2xl"},"Nomor"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Tanggal"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Supplier"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Sumber"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"No. PO/Retail"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Source Numbers"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Outlet"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"No Invoice Supplier"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Total"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Dibuat Oleh"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider rounded-tr-2xl"},"Aksi")])],-1)),t("tbody",null,[!g.value.data||!g.value.data.length?(r(),l("tr",fe,a[14]||(a[14]=[t("td",{colspan:"12",class:"text-center py-10 text-gray-400"},"Belum ada data Contra Bon.",-1)]))):(r(!0),l(y,{key:1},h(g.value.data,e=>{var i,b,c,N;return r(),l("tr",{key:e.id,class:"hover:bg-blue-50 transition shadow-sm"},[t("td",be,d(e.number),1),t("td",me,d(H(e.date)),1),t("td",_e,d((i=e.supplier)==null?void 0:i.name),1),t("td",ye,[e.source_types&&e.source_types.length>0?(r(),l("div",he,[(r(!0),l(y,null,h(e.source_types,n=>(r(),l("span",{key:n,class:v([{"bg-blue-100 text-blue-700 border border-blue-300":n==="PR Foods","bg-green-100 text-green-700 border border-green-300":n==="RO Supplier","bg-purple-100 text-purple-700 border border-purple-300":n==="Retail Food","bg-orange-100 text-orange-700 border border-orange-300":n==="Warehouse Retail Food","bg-gray-100 text-gray-700 border border-gray-300":n==="Unknown"},"px-2 py-1 rounded-full text-xs font-semibold"])},d(n==="PR Foods"?"PRF":n==="Retail Food"?"RF":n==="Warehouse Retail Food"?"RWF":n),3))),128))])):(r(),l("span",{key:1,class:v([{"bg-blue-100 text-blue-700":e.source_type_display==="PR Foods","bg-green-100 text-green-700":e.source_type_display==="RO Supplier","bg-purple-100 text-purple-700":e.source_type_display==="Retail Food","bg-orange-100 text-orange-700":e.source_type_display==="Warehouse Retail Food","bg-gray-100 text-gray-700":e.source_type_display==="Unknown"},"px-2 py-1 rounded-full text-xs font-semibold"])},d(e.source_type_display||(e.source_type==="purchase_order"?"PO/GR":"Retail Food")),3))]),t("td",ve,d(e.source_type==="purchase_order"?(b=e.purchase_order)==null?void 0:b.number:((c=e.retail_food)==null?void 0:c.retail_number)||"-"),1),t("td",we,[e.source_numbers&&e.source_numbers.length>0?(r(),l("div",ke,[(r(!0),l(y,null,h(e.source_numbers,n=>(r(),l("span",{key:n,class:v([T(n,e.source_types),"text-xs px-2 py-1 rounded-full font-semibold border"])},d(n),3))),128))])):(r(),l("span",Be,"-"))]),t("td",Ce,[e.source_outlets&&e.source_outlets.length>0?(r(),l("div",De,[(r(!0),l(y,null,h(e.source_outlets,n=>(r(),l("span",{key:n,class:"bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full"},d(n),1))),128))])):(r(),l("span",Re,"-"))]),t("td",Se,d(e.supplier_invoice_number||"-"),1),t("td",Fe,d(G(e.total_amount)),1),t("td",Le,[t("span",{class:v([{"bg-gray-100 text-gray-700":e.status==="draft","bg-green-100 text-green-700":e.status==="approved","bg-red-100 text-red-700":e.status==="rejected"},"px-2 py-1 rounded-full text-xs font-semibold shadow"])},d(e.status),3)]),t("td",Ae,d((N=e.creator)==null?void 0:N.nama_lengkap),1),t("td",Me,[t("div",Oe,[t("button",{onClick:n=>K(e.id),class:"inline-flex items-center btn btn-xs bg-blue-100 text-blue-800 hover:bg-blue-200 rounded px-2 py-1 font-semibold transition"},a[15]||(a[15]=[t("i",{class:"fa fa-eye mr-1"},null,-1),x(" Detail ")]),8,Pe),$.value?(r(),l("button",{key:0,onClick:n=>J(e.id),class:"inline-flex items-center btn btn-xs bg-yellow-100 text-yellow-800 hover:bg-yellow-200 rounded px-2 py-1 font-semibold transition"},a[16]||(a[16]=[t("i",{class:"fa fa-pencil-alt mr-1"},null,-1),x(" Edit ")]),8,Ne)):I("",!0),t("button",{onClick:n=>Q(e.id),class:"inline-flex items-center btn btn-xs bg-red-100 text-red-700 hover:bg-red-200 rounded px-2 py-1 font-semibold transition"},a[17]||(a[17]=[t("i",{class:"fa fa-trash mr-1"},null,-1),x(" Hapus ")]),8,Ve)])])])}),128))])])])),B.value&&g.value&&g.value.links&&g.value.links.length>3?(r(),l("div",We,[(r(!0),l(y,null,h(g.value.links,e=>(r(),l("button",{key:e.label,disabled:!e.url,onClick:i=>z(e.url),innerHTML:e.label,class:v(["px-3 py-1 rounded-lg border text-sm font-semibold",[e.active?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-700 hover:bg-blue-50",e.url?"cursor-pointer":"opacity-50 cursor-not-allowed"]])},null,10,Ee))),128))])):I("",!0)])]),_:1}))}};export{Qe as default};
