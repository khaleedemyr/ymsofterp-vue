import{$ as E,r as I,c as P,a as U,A as F,B as o,C as r,D as e,L as n,E as J,x as u,Q as p,S as f,G as x,H as m,I as K,J as y,F as S,M as B,N as i,l as W,W as $}from"./vendor-vue-g7iCcTkf.js";import{A as z}from"./AppLayout-BqaX40sL.js";import{S as b}from"./app-BoSIlzLW.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CY3nv2ep.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const G={class:"flex items-center justify-between"},H={class:"py-12"},O={class:"w-full mx-auto sm:px-6 lg:px-8"},Q={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Y={class:"p-6"},q={class:"mb-6 flex justify-between items-center"},R={class:"mb-6"},X={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Z={class:"overflow-x-auto"},ee={class:"w-full divide-y divide-gray-200"},te={class:"bg-white divide-y divide-gray-200"},se={class:"px-6 py-4 whitespace-nowrap"},ae={class:"flex items-center"},le={class:"flex-shrink-0 h-10 w-10"},oe={class:"h-10 w-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold"},re={class:"ml-4"},ne={class:"text-sm font-medium text-gray-900"},ie={class:"text-sm text-gray-500"},de={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ue={class:"px-6 py-4"},pe={class:"text-sm text-gray-900 max-w-xs truncate"},fe={class:"px-6 py-4 whitespace-nowrap"},ce={class:"px-6 py-4 text-sm text-gray-900"},ge={key:0},me={key:1,class:"text-gray-400"},xe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ye={class:"flex space-x-2"},be=["onClick"],ve={key:0,class:"text-center py-12"},Ae={__name:"Index",props:{coachings:{type:Array,default:()=>[]}},setup(T){const c=E(),j=T,l=I({status:"",employee:"",start_date:"",end_date:""});function v(s){if(!s)return[];if(Array.isArray(s))return s;if(typeof s=="string")try{return JSON.parse(s)}catch(t){return console.error("Error parsing disciplinary actions:",t),[]}return[]}const h=P(()=>{let s=j.coachings;return l.value.status&&(s=s.filter(t=>t.status===l.value.status)),l.value.employee&&(s=s.filter(t=>{var a,d;return(d=(a=t.employee)==null?void 0:a.nama_lengkap)==null?void 0:d.toLowerCase().includes(l.value.employee.toLowerCase())})),l.value.start_date&&(s=s.filter(t=>new Date(t.violation_date)>=new Date(l.value.start_date))),l.value.end_date&&(s=s.filter(t=>new Date(t.violation_date)<=new Date(l.value.end_date))),s});function A(s){return s?new Date(s).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A"}function N(s){return{draft:"bg-gray-100 text-gray-800",pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800"}[s]||"bg-gray-100 text-gray-800"}function V(s){return{draft:"Draft",pending:"Menunggu Persetujuan",approved:"Disetujui",rejected:"Ditolak",completed:"Selesai"}[s]||s}function g(){}async function M(s){(await b.fire({title:"Apakah Anda yakin?",text:"Data coaching akan dihapus secara permanen!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"})).isConfirmed&&$.delete(route("coaching.destroy",s))}return U(()=>{var s,t;(s=c.props.flash)!=null&&s.success&&b.fire({title:"Berhasil!",text:c.props.flash.success,icon:"success",timer:2e3,showConfirmButton:!1}),(t=c.props.flash)!=null&&t.error&&b.fire({title:"Error!",text:c.props.flash.error,icon:"error"})}),(s,t)=>(o(),F(z,{title:"Coaching"},{header:r(()=>[e("div",G,[t[5]||(t[5]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Coaching ",-1)),u(p(f),{href:s.route("coaching.create"),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded inline-flex items-center"},{default:r(()=>t[4]||(t[4]=[e("i",{class:"fa-solid fa-plus mr-2"},null,-1),x("Tambah Coaching ")])),_:1},8,["href"])])]),default:r(()=>[e("div",H,[e("div",O,[e("div",Q,[e("div",Y,[e("div",q,[t[7]||(t[7]=e("h3",{class:"text-lg font-semibold text-gray-800"},"Data Coaching",-1)),u(p(f),{href:s.route("coaching.create"),class:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded inline-flex items-center"},{default:r(()=>t[6]||(t[6]=[e("i",{class:"fa-solid fa-plus mr-2"},null,-1),x("Tambah Coaching ")])),_:1},8,["href"])]),e("div",R,[e("div",X,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),m(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>l.value.status=a),onChange:g,class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},t[8]||(t[8]=[e("option",{value:""},"Semua Status",-1),e("option",{value:"draft"},"Draft",-1),e("option",{value:"pending"},"Menunggu Persetujuan",-1),e("option",{value:"approved"},"Disetujui",-1),e("option",{value:"rejected"},"Ditolak",-1),e("option",{value:"completed"},"Selesai",-1)]),544),[[K,l.value.status]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Karyawan",-1)),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>l.value.employee=a),onInput:g,type:"text",placeholder:"Cari karyawan...",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[y,l.value.employee]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Mulai",-1)),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>l.value.start_date=a),onChange:g,type:"date",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[y,l.value.start_date]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Akhir",-1)),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>l.value.end_date=a),onChange:g,type:"date",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[y,l.value.end_date]])])])]),e("div",Z,[e("table",ee,[t[16]||(t[16]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Karyawan "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tanggal Pelanggaran "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Detail "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tindakan Disipliner "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Aksi ")])],-1)),e("tbody",te,[(o(!0),n(S,null,B(h.value,a=>{var d,w,_,k,C;return o(),n("tr",{key:a.id,class:"hover:bg-gray-50"},[e("td",se,[e("div",ae,[e("div",le,[e("div",oe,i(((w=(d=a.employee)==null?void 0:d.nama_lengkap)==null?void 0:w.charAt(0))||"?"),1)]),e("div",re,[e("div",ne,i((_=a.employee)==null?void 0:_.nama_lengkap),1),e("div",ie,i(((C=(k=a.employee)==null?void 0:k.jabatan)==null?void 0:C.nama_jabatan)||"N/A"),1)])])]),e("td",de,i(A(a.violation_date)),1),e("td",ue,[e("div",pe,i(a.violation_details),1)]),e("td",fe,[e("span",{class:W(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",N(a.status)])},i(V(a.status)),3)]),e("td",ce,[v(a.disciplinary_actions).length>0?(o(),n("div",ge,[(o(!0),n(S,null,B(v(a.disciplinary_actions),(D,L)=>(o(),n("div",{key:L,class:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full inline-block mr-1 mb-1"},i(D.name),1))),128))])):(o(),n("span",me,"Tidak ada"))]),e("td",xe,[e("div",ye,[u(p(f),{href:s.route("coaching.show",a.id),class:"text-blue-600 hover:text-blue-900"},{default:r(()=>t[13]||(t[13]=[e("i",{class:"fa-solid fa-eye"},null,-1)])),_:2},1032,["href"]),u(p(f),{href:s.route("coaching.edit",a.id),class:"text-green-600 hover:text-green-900"},{default:r(()=>t[14]||(t[14]=[e("i",{class:"fa-solid fa-edit"},null,-1)])),_:2},1032,["href"]),e("button",{onClick:D=>M(a.id),class:"text-red-600 hover:text-red-900"},t[15]||(t[15]=[e("i",{class:"fa-solid fa-trash"},null,-1)]),8,be)])])])}),128))])])]),h.value.length===0?(o(),n("div",ve,[t[18]||(t[18]=e("i",{class:"fa-solid fa-clipboard-list text-4xl text-gray-400 mb-4"},null,-1)),t[19]||(t[19]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Tidak ada data coaching",-1)),t[20]||(t[20]=e("p",{class:"text-gray-500 mb-4"},"Belum ada data coaching yang sesuai dengan filter yang dipilih.",-1)),u(p(f),{href:s.route("coaching.create"),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded inline-flex items-center"},{default:r(()=>t[17]||(t[17]=[e("i",{class:"fa-solid fa-plus mr-2"},null,-1),x("Tambah Coaching Pertama ")])),_:1},8,["href"])])):J("",!0)])])])])]),_:1}))}};export{Ae as default};
