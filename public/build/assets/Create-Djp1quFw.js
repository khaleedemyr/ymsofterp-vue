import{r as h,k as B,A as F,B as i,C as b,D as e,x as C,Q as O,S,G as a,O as M,L as m,E as U,H as d,F as I,M as T,N as l,I as D,J as p,W as E}from"./vendor-vue-g7iCcTkf.js";import{A as R}from"./AppLayout-DUleG9B8.js";import"./vendor-utils-CpgP2uT4.js";import"./app-P14ApjUf.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-BD6EyRcy.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const L={class:"p-6"},j={class:"flex justify-between items-center mb-6"},W={class:"bg-white rounded-lg shadow-sm border p-6"},G={class:"mb-6"},H=["value"],J={key:0,class:"mb-6 p-4 bg-blue-50 rounded-lg"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},z={class:"font-medium"},K={class:"font-medium"},X={class:"font-medium"},Y={class:"font-medium"},Z={class:"font-medium"},$={class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},te=["value"],se={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},re={class:"mb-6"},oe={class:"mb-6"},le={class:"flex justify-end space-x-4"},ne=["disabled"],ae={key:0,class:"fas fa-spinner fa-spin"},ie={key:1,class:"fas fa-save"},ve={__name:"Create",props:{availablePOs:Array},setup(f){const V=f,u=h(!1),o=h(null),s=B({purchase_requisition_id:"",purchase_order_id:"",supplier_id:"",amount:"",payment_method:"",payment_date:new Date().toISOString().split("T")[0],description:"",reference_number:""}),N=()=>{var n;s.purchase_order_id?(o.value=V.availablePOs.find(t=>t.id==s.purchase_order_id),o.value&&(s.purchase_requisition_id=(n=o.value.source_pr)==null?void 0:n.id,s.supplier_id=o.value.supplier_id,s.amount=o.value.grand_total)):(o.value=null,s.purchase_requisition_id="",s.supplier_id="",s.amount="")},q=()=>{u.value=!0,E.post(route("payments.store"),s,{onFinish:()=>{u.value=!1}})},A=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n);return(n,t)=>(i(),F(R,null,{default:b(()=>{var g,c,y,x,v,_;return[e("div",L,[e("div",j,[t[7]||(t[7]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Create Payment"),e("p",{class:"text-gray-600"},"Create a new payment for approved Purchase Requisition")],-1)),C(O(S),{href:n.route("payments.index"),class:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg flex items-center gap-2"},{default:b(()=>t[6]||(t[6]=[e("i",{class:"fas fa-arrow-left"},null,-1),a(" Back to Payments ")])),_:1},8,["href"])]),e("form",{onSubmit:M(q,["prevent"]),class:"max-w-4xl"},[e("div",W,[e("div",G,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[a(" Purchase Order "),e("span",{class:"text-red-500"},"*")],-1)),d(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.purchase_order_id=r),onChange:N,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},[t[8]||(t[8]=e("option",{value:""},"Select Purchase Order",-1)),(i(!0),m(I,null,T(f.availablePOs,r=>{var w,P,k;return i(),m("option",{key:r.id,value:r.id},l(r.number)+" - "+l((w=r.supplier)==null?void 0:w.name)+" ("+l((k=(P=r.source_pr)==null?void 0:P.division)==null?void 0:k.nama_divisi)+") ",9,H)}),128))],544),[[D,s.purchase_order_id]])]),o.value?(i(),m("div",J,[t[16]||(t[16]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Selected Purchase Order",-1)),e("div",Q,[e("div",null,[t[10]||(t[10]=e("p",{class:"text-sm text-gray-600"},"PO Number:",-1)),e("p",z,l(o.value.number),1)]),e("div",null,[t[11]||(t[11]=e("p",{class:"text-sm text-gray-600"},"PR Number:",-1)),e("p",K,l((g=o.value.source_pr)==null?void 0:g.pr_number),1)]),e("div",null,[t[12]||(t[12]=e("p",{class:"text-sm text-gray-600"},"Division:",-1)),e("p",X,l((y=(c=o.value.source_pr)==null?void 0:c.division)==null?void 0:y.nama_divisi),1)]),e("div",null,[t[13]||(t[13]=e("p",{class:"text-sm text-gray-600"},"Supplier:",-1)),e("p",Y,l((x=o.value.supplier)==null?void 0:x.name),1)]),e("div",null,[t[14]||(t[14]=e("p",{class:"text-sm text-gray-600"},"PO Total Amount:",-1)),e("p",Z,l(A(o.value.grand_total)),1)]),e("div",null,[t[15]||(t[15]=e("p",{class:"text-sm text-gray-600"},"PO Status:",-1)),e("span",$,l(o.value.status),1)])])])):U("",!0),e("div",ee,[e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Supplier ",-1)),e("input",{value:((_=(v=o.value)==null?void 0:v.supplier)==null?void 0:_.name)||"",type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-100",readonly:""},null,8,te)]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[a(" Amount "),e("span",{class:"text-red-500"},"*")],-1)),d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>s.amount=r),type:"number",step:"0.01",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[p,s.amount]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[a(" Payment Method "),e("span",{class:"text-red-500"},"*")],-1)),d(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>s.payment_method=r),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},t[19]||(t[19]=[e("option",{value:""},"Select Payment Method",-1),e("option",{value:"cash"},"Cash",-1),e("option",{value:"transfer"},"Transfer",-1),e("option",{value:"check"},"Check",-1)]),512),[[D,s.payment_method]])])]),e("div",se,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[a(" Payment Date "),e("span",{class:"text-red-500"},"*")],-1)),d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>s.payment_date=r),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[p,s.payment_date]])])]),e("div",re,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Reference Number ",-1)),d(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>s.reference_number=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter reference number (optional)"},null,512),[[p,s.reference_number]])]),e("div",oe,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Description ",-1)),d(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=r=>s.description=r),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter payment description (optional)"},null,512),[[p,s.description]])]),e("div",le,[C(O(S),{href:n.route("payments.index"),class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"},{default:b(()=>t[24]||(t[24]=[a(" Cancel ")])),_:1},8,["href"]),e("button",{type:"submit",disabled:u.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2"},[u.value?(i(),m("i",ae)):(i(),m("i",ie)),a(" "+l(u.value?"Creating...":"Create Payment"),1)],8,ne)])])],32)])]}),_:1}))}};export{ve as default};
