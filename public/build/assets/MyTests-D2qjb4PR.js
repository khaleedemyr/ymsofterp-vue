import{r as U,A as $,B as r,C as M,D as t,H as y,J as I,L as o,F as f,M as b,N as l,I as A,G as c,E as T,l as h,W as g}from"./vendor-vue-g7iCcTkf.js";import{A as W}from"./AppLayout-CLYhXf-W.js";import"./vendor-utils-CpgP2uT4.js";import"./app-DdwtQE43.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CauiUg4O.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const z={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},G={class:"p-4"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},J=["value"],K={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},R={class:"p-6"},q={class:"overflow-x-auto"},Q={class:"min-w-full divide-y divide-gray-200"},X={class:"bg-white divide-y divide-gray-200"},Y={key:0},Z={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},tt={class:"px-6 py-4"},et={class:"text-sm font-medium text-gray-900"},st={class:"text-sm text-gray-500"},at={class:"text-xs text-gray-400 mt-1"},rt={class:"px-6 py-4 whitespace-nowrap"},lt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ot={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},it={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},nt={key:1,class:"text-gray-400"},dt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ut={class:"flex items-center gap-2"},ct=["onClick"],pt=["onClick"],xt={key:2,class:"text-gray-400 text-sm"},gt={key:3,class:"text-gray-400 text-sm"},mt={key:0,class:"px-4 py-3 border-t border-gray-200 bg-white"},yt={class:"flex items-center justify-between"},ft={class:"flex items-center gap-4"},bt={class:"text-sm text-gray-700"},ht={class:"flex items-center gap-2"},vt={class:"flex items-center gap-2"},wt=["onClick"],Bt={__name:"MyTests",props:{enrollTests:Object,statusOptions:Array,filters:Object},setup(i){var _,k,C;const d=i,n=U({search:((_=d.filters)==null?void 0:_.search)||"",status:((k=d.filters)==null?void 0:k.status)||"all",per_page:((C=d.filters)==null?void 0:C.per_page)||10});function m(){g.get(route("enroll-test.my-tests"),n.value,{preserveState:!0,replace:!0})}function j(){n.value={search:"",status:"all",per_page:10},m()}function V(a){a>=1&&a<=d.enrollTests.last_page&&g.get(route("enroll-test.my-tests"),{...n.value,page:a},{preserveState:!0,replace:!0})}function B(){const a=d.enrollTests.current_page,s=d.enrollTests.last_page,e=[],p=Math.max(1,a-2),x=Math.min(s,a+2);for(let u=p;u<=x;u++)e.push(u);return e}function E(a){return a.status==="enrolled"&&a.current_attempt<a.max_attempts&&(!a.expired_at||new Date(a.expired_at)>new Date)}function F(a){g.post(route("enroll-test.start",a.id))}function L(a){g.visit(route("enroll-test.take",a.id))}function v(a){return{enrolled:"Terdaftar",in_progress:"Sedang Test",completed:"Selesai",expired:"Kedaluwarsa",cancelled:"Dibatalkan"}[a]||a}function N(a){return{enrolled:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",expired:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"}[a]||"bg-gray-100 text-gray-800"}function w(a){return a?new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function O(a){return new Date(a)<new Date}return(a,s)=>(r(),$(W,{title:"My Tests"},{header:M(()=>s[3]||(s[3]=[t("div",{class:"flex justify-between items-center"},[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," My Tests ")],-1)])),default:M(()=>[t("div",null,[t("div",z,[t("div",G,[s[8]||(s[8]=t("h3",{class:"text-lg font-semibold mb-4"},"Filter Test",-1)),t("div",H,[t("div",null,[s[4]||(s[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Cari",-1)),y(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>n.value.search=e),placeholder:"Cari judul soal...",class:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[I,n.value.search]])]),t("div",null,[s[5]||(s[5]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),y(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>n.value.status=e),class:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[(r(!0),o(f,null,b(i.statusOptions,e=>(r(),o("option",{key:e.value,value:e.value},l(e.label),9,J))),128))],512),[[A,n.value.status]])])]),t("div",{class:"flex gap-2 mt-4"},[t("button",{onClick:m,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2"},s[6]||(s[6]=[t("i",{class:"fa-solid fa-search"},null,-1),c(" Cari ")])),t("button",{onClick:j,class:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg flex items-center gap-2"},s[7]||(s[7]=[t("i",{class:"fa-solid fa-refresh"},null,-1),c(" Reset ")]))])])]),t("div",K,[t("div",R,[t("div",q,[t("table",Q,[s[12]||(s[12]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Master Soal"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Attempt"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Enrolled At"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Expired At"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),t("tbody",X,[i.enrollTests.data.length===0?(r(),o("tr",Y,s[9]||(s[9]=[t("td",{colspan:"7",class:"px-6 py-12 text-center text-gray-500"},[t("i",{class:"fa-solid fa-inbox text-4xl mb-4 block"}),c(" Tidak ada test yang tersedia ")],-1)]))):T("",!0),(r(!0),o(f,null,b(i.enrollTests.data,(e,p)=>{var x,u,S,D;return r(),o("tr",{key:e.id,class:"hover:bg-gray-50"},[t("td",Z,l((i.enrollTests.current_page-1)*i.enrollTests.per_page+p+1),1),t("td",tt,[t("div",et,l((x=e.master_soal)==null?void 0:x.judul),1),t("div",st,l((u=e.master_soal)==null?void 0:u.deskripsi),1),t("div",at,l(((D=(S=e.master_soal)==null?void 0:S.pertanyaans)==null?void 0:D.length)||0)+" pertanyaan ",1)]),t("td",rt,[t("span",{class:h(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",N(e.status)])},l(v(e.status)),3)]),t("td",lt,l(e.current_attempt)+" / "+l(e.max_attempts),1),t("td",ot,l(w(e.enrolled_at)),1),t("td",it,[e.expired_at?(r(),o("span",{key:0,class:h(O(e.expired_at)?"text-red-600":"text-gray-900")},l(w(e.expired_at)),3)):(r(),o("span",nt,"Tidak ada"))]),t("td",dt,[t("div",ut,[e.status==="enrolled"&&E(e)?(r(),o("button",{key:0,onClick:P=>F(e),class:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm"},s[10]||(s[10]=[t("i",{class:"fa-solid fa-play mr-1"},null,-1),c(" Mulai Test ")]),8,ct)):e.status==="in_progress"?(r(),o("button",{key:1,onClick:P=>L(e),class:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm"},s[11]||(s[11]=[t("i",{class:"fa-solid fa-play mr-1"},null,-1),c(" Lanjut Test ")]),8,pt)):e.status==="completed"?(r(),o("span",xt," Test Selesai ")):(r(),o("span",gt,l(v(e.status)),1))])])])}),128))])])]),i.enrollTests.total>0?(r(),o("div",mt,[t("div",yt,[t("div",ft,[t("div",bt," Menampilkan "+l(i.enrollTests.from)+" sampai "+l(i.enrollTests.to)+" dari "+l(i.enrollTests.total)+" data ",1),t("div",ht,[s[14]||(s[14]=t("label",{class:"text-sm text-gray-700"},"Per halaman:",-1)),y(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>n.value.per_page=e),onChange:m,class:"px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},s[13]||(s[13]=[t("option",{value:"5"},"5",-1),t("option",{value:"10"},"10",-1),t("option",{value:"15"},"15",-1),t("option",{value:"25"},"25",-1),t("option",{value:"50"},"50",-1)]),544),[[A,n.value.per_page]])])]),t("div",vt,[(r(!0),o(f,null,b(B(),e=>(r(),o("button",{key:e,onClick:p=>V(e),class:h(["px-3 py-1 text-sm border rounded",e===i.enrollTests.current_page?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"])},l(e),11,wt))),128))])])])):T("",!0)])])])]),_:1}))}};export{Bt as default};
