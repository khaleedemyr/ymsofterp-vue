import{r as d,c as m,w as N,A as I,B as l,C as F,D as e,L as r,E as M,H as v,J as P,F as b,M as y,N as a,I as k,G as T,l as w}from"./vendor-vue-g7iCcTkf.js";import{A as U}from"./AppLayout-BqaX40sL.js";import"./vendor-utils-CpgP2uT4.js";import"./app-BoSIlzLW.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CY3nv2ep.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const W={class:"max-w-7xl mx-auto py-8 px-4"},q={class:"flex flex-col md:flex-row md:items-center gap-4 mb-4"},E={class:"flex items-center gap-2"},H=["value"],Q={class:"flex items-center gap-2"},R=["value"],j={class:"flex items-center gap-2"},z=["value"],G=["disabled"],J={key:0,class:"animate-spin mr-2"},K={key:1,class:"mr-2"},O={class:"bg-white rounded-xl shadow-lg overflow-x-auto"},X={class:"min-w-full divide-y divide-gray-200"},Y={class:"bg-white divide-y divide-gray-200"},Z={key:0},$={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},ee={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-700"},te={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},se={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},ae={class:"px-6 py-4 whitespace-nowrap text-sm text-center"},le={key:0,class:"flex justify-between items-center mt-4"},oe={class:"text-sm text-gray-600"},ne={class:"flex gap-1"},re=["disabled"],ie={class:"px-2"},ue=["disabled"],he={__name:"MinimumStockReport",props:{stocks:Array,warehouses:Array,items:Array},setup(f){const B=f,p=d(""),i=d(25),o=d(1),c=d(""),x=d(""),h=d(!1),u=m(()=>{let n=B.stocks;if(c.value&&(n=n.filter(t=>String(t.warehouse_name)===String(c.value))),x.value&&(n=n.filter(t=>t.item_name===x.value)),!p.value)return n;const s=p.value.toLowerCase();return n.filter(t=>t.item_name&&t.item_name.toLowerCase().includes(s)||t.warehouse_name&&t.warehouse_name.toLowerCase().includes(s))}),g=m(()=>Math.ceil(u.value.length/i.value)||1),_=m(()=>(o.value-1)*i.value),S=m(()=>Math.min(_.value+i.value,u.value.length)),D=m(()=>u.value.slice(_.value,S.value));function L(){o.value>1&&o.value--}function A(){o.value<g.value&&o.value++}N([i,p],()=>{o.value=1});function C(n){return!n||Number(n)===0?"-":Number(n).toLocaleString("id-ID",{minimumFractionDigits:0,maximumFractionDigits:0})}function V(){h.value=!0,window.location.reload()}return(n,s)=>(l(),I(U,null,{default:F(()=>[e("div",W,[s[15]||(s[15]=e("h1",{class:"text-2xl font-bold mb-6"},"Laporan Stok Minimum / Safety Stock",-1)),e("div",q,[v(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>p.value=t),type:"text",placeholder:"Cari barang, warehouse...",class:"px-4 py-2 border border-gray-300 rounded-lg w-full md:w-64 focus:ring-blue-500 focus:border-blue-500"},null,512),[[P,p.value]]),e("div",E,[s[5]||(s[5]=e("label",{class:"text-sm"},"Warehouse",-1)),v(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>c.value=t),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[s[4]||(s[4]=e("option",{value:""},"Semua Warehouse",-1)),(l(!0),r(b,null,y(f.warehouses,t=>(l(),r("option",{key:t.id,value:t.name},a(t.name),9,H))),128))],512),[[k,c.value]])]),e("div",Q,[s[7]||(s[7]=e("label",{class:"text-sm"},"Barang",-1)),v(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>x.value=t),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[s[6]||(s[6]=e("option",{value:""},"Semua Barang",-1)),(l(!0),r(b,null,y(f.items,t=>(l(),r("option",{key:t.id,value:t.name},a(t.name),9,R))),128))],512),[[k,x.value]])]),e("div",j,[s[8]||(s[8]=e("label",{class:"text-sm"},"Tampilkan",-1)),v(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>i.value=t),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[(l(),r(b,null,y([10,25,50,100],t=>e("option",{key:t,value:t},a(t),9,z)),64))],512),[[k,i.value]]),s[9]||(s[9]=e("span",{class:"text-sm"},"data",-1))]),e("button",{onClick:V,disabled:h.value,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-700"},[h.value?(l(),r("span",J,s[10]||(s[10]=[e("i",{class:"fas fa-spinner"},null,-1)]))):(l(),r("span",K,s[11]||(s[11]=[e("i",{class:"fas fa-sync-alt"},null,-1)]))),s[12]||(s[12]=T(" Load Data "))],8,G)]),e("div",O,[e("table",X,[s[14]||(s[14]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Barang"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Warehouse"),e("th",{class:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Qty"),e("th",{class:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Min Stock"),e("th",{class:"px-6 py-3 text-center text-xs font-bold text-gray-700 uppercase tracking-wider"},"Status")])],-1)),e("tbody",Y,[u.value.length?M("",!0):(l(),r("tr",Z,s[13]||(s[13]=[e("td",{colspan:"5",class:"text-center py-10 text-gray-400"},"Tidak ada item di bawah stok minimum.",-1)]))),(l(!0),r(b,null,y(D.value,t=>(l(),r("tr",{key:t.item_name+t.warehouse_name,class:"hover:bg-gray-50 transition"},[e("td",$,a(t.item_name),1),e("td",ee,a(t.warehouse_name),1),e("td",te,a(C(t.qty)),1),e("td",se,a(C(t.min_stock)),1),e("td",ae,[e("span",{class:w(["inline-block px-3 py-1 rounded-full text-xs font-bold",t.qty<t.min_stock?"bg-red-100 text-red-700":"bg-green-100 text-green-700"])},a(t.qty<t.min_stock?"Di Bawah Minimum":"Aman"),3)])]))),128))])])]),u.value.length?(l(),r("div",le,[e("div",oe," Menampilkan "+a(_.value+1)+" - "+a(S.value)+" dari "+a(u.value.length)+" data ",1),e("div",ne,[e("button",{onClick:L,disabled:o.value===1,class:w(["px-3 py-1 rounded border text-sm",o.value===1?"bg-gray-200 text-gray-400":"bg-white text-blue-700 hover:bg-blue-50"])},"<",10,re),e("span",ie,"Halaman "+a(o.value)+" / "+a(g.value),1),e("button",{onClick:A,disabled:o.value===g.value,class:w(["px-3 py-1 rounded border text-sm",o.value===g.value?"bg-gray-200 text-gray-400":"bg-white text-blue-700 hover:bg-blue-50"])},">",10,ue)])])):M("",!0)])]),_:1}))}};export{he as default};
