import{r as y,w as B,A as f,B as d,C as E,D as l,N as U,O as D,L as A,E as p,H as n,J as b,V as M,a6 as P,Q as v,I as O,x as q,S as G,G as N,W as C}from"./vendor-vue-g7iCcTkf.js";import{A as R}from"./AppLayout-BdiuRSin.js";import{s as J}from"./vue-multiselect.esm-V-bx43V9.js";/* empty css                            */import{S as m}from"./app-xIQ7JztA.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-LiNpoaCg.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const h={class:"max-w-2xl mx-auto py-8 px-2"},L={class:"text-2xl font-bold text-blue-700 mb-6"},W={class:"inline-flex items-center cursor-pointer"},F={key:0,class:"space-y-4"},H={class:"flex gap-6 items-center mb-2"},I={class:"inline-flex items-center"},K={class:"inline-flex items-center"},Q={class:"flex justify-end gap-4"},Y=["disabled"],Z={key:0,class:"fa fa-spinner fa-spin mr-1"},ie={__name:"Form",props:{paymentType:Object,outlets:Array,regions:Array,isEdit:Boolean},setup(u){var g,x,c,k,w,T,V,S;const s=u,r=y(!1),o=y("outlet"),t=y({name:((g=s.paymentType)==null?void 0:g.name)||"",code:((x=s.paymentType)==null?void 0:x.code)||"",is_bank:((c=s.paymentType)==null?void 0:c.is_bank)||!1,bank_name:((k=s.paymentType)==null?void 0:k.bank_name)||"",description:((w=s.paymentType)==null?void 0:w.description)||"",status:((T=s.paymentType)==null?void 0:T.status)||"active",outlets:((V=s.paymentType)==null?void 0:V.outlets)||[],regions:((S=s.paymentType)==null?void 0:S.regions)||[]});B(()=>s.paymentType,i=>{var e;i&&(o.value=(e=i.regions)!=null&&e.length?"region":"outlet")},{immediate:!0}),B(()=>t.value.name,i=>{s.isEdit||(t.value.code=i.toString().toUpperCase().replace(/\s+/g,"_").replace(/[^A-Z0-9_]/g,"").substring(0,50))});async function j(){if(!(await m.fire({title:"Simpan Jenis Pembayaran?",text:"Apakah Anda yakin ingin menyimpan data jenis pembayaran ini?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Simpan",cancelButtonText:"Batal"})).isConfirmed)return;r.value=!0;const e={...t.value,outlet_type:o.value,outlets:(t.value.outlets||[]).map(a=>(a==null?void 0:a.id)??a).filter(a=>a!=null&&a!==""),regions:(t.value.regions||[]).map(a=>(a==null?void 0:a.id)??a).filter(a=>a!=null&&a!=="")};o.value==="region"?e.outlets=[]:e.regions=[],s.isEdit?C.put(route("payment-types.update",s.paymentType.id),e,{onSuccess:()=>{r.value=!1,m.fire("Sukses","Jenis pembayaran berhasil diperbarui!","success")},onError:()=>{r.value=!1,m.fire("Error","Gagal memperbarui jenis pembayaran","error")}}):C.post(route("payment-types.store"),e,{onSuccess:()=>{r.value=!1,m.fire("Sukses","Jenis pembayaran berhasil ditambahkan!","success")},onError:()=>{r.value=!1,m.fire("Error","Gagal menambahkan jenis pembayaran","error")}})}return(i,e)=>(d(),f(R,null,{default:E(()=>[l("div",h,[l("h1",L,U(u.isEdit?"Edit Jenis Pembayaran":"Tambah Jenis Pembayaran"),1),l("form",{onSubmit:D(j,["prevent"]),class:"space-y-5 bg-white rounded-2xl shadow-xl p-8"},[l("div",null,[e[10]||(e[10]=l("label",{class:"block text-sm font-medium text-gray-700"},"Nama Jenis Pembayaran",-1)),n(l("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.name=a),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500",required:"",maxlength:"100"},null,512),[[b,t.value.name]])]),l("div",null,[e[11]||(e[11]=l("label",{class:"block text-sm font-medium text-gray-700"},"Kode",-1)),n(l("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.code=a),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-gray-100",readonly:""},null,512),[[b,t.value.code]])]),l("div",null,[e[13]||(e[13]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tipe Pembayaran",-1)),l("label",W,[n(l("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=a=>t.value.is_bank=a),class:"form-checkbox h-5 w-5 text-blue-600"},null,512),[[M,t.value.is_bank]]),e[12]||(e[12]=l("span",{class:"ml-2"},"Pembayaran Bank",-1))])]),t.value.is_bank?(d(),A("div",F,[l("div",null,[e[14]||(e[14]=l("label",{class:"block text-sm font-medium text-gray-700"},"Nama Bank",-1)),n(l("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.bank_name=a),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500",required:"",maxlength:"100"},null,512),[[b,t.value.bank_name]])])])):p("",!0),l("div",null,[e[17]||(e[17]=l("label",{class:"block text-sm font-medium text-gray-700"},"Outlet Pembayaran",-1)),l("div",H,[l("label",I,[n(l("input",{type:"radio",value:"region","onUpdate:modelValue":e[4]||(e[4]=a=>o.value=a),class:"form-radio text-blue-600"},null,512),[[P,o.value]]),e[15]||(e[15]=l("span",{class:"ml-2"},"By Region",-1))]),l("label",K,[n(l("input",{type:"radio",value:"outlet","onUpdate:modelValue":e[5]||(e[5]=a=>o.value=a),class:"form-radio text-blue-600"},null,512),[[P,o.value]]),e[16]||(e[16]=l("span",{class:"ml-2"},"By Outlet",-1))])]),o.value==="region"?(d(),f(v(J),{key:0,modelValue:t.value.regions,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.regions=a),options:u.regions,multiple:!0,label:"name","track-by":"id",placeholder:"Pilih Region"},null,8,["modelValue","options"])):p("",!0),o.value==="outlet"?(d(),f(v(J),{key:1,modelValue:t.value.outlets,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.outlets=a),options:u.outlets,multiple:!0,label:"name","track-by":"id",placeholder:"Pilih Outlet"},null,8,["modelValue","options"])):p("",!0)]),l("div",null,[e[18]||(e[18]=l("label",{class:"block text-sm font-medium text-gray-700"},"Deskripsi",-1)),n(l("textarea",{"onUpdate:modelValue":e[8]||(e[8]=a=>t.value.description=a),rows:"2",class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,t.value.description]])]),l("div",null,[e[20]||(e[20]=l("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),n(l("select",{"onUpdate:modelValue":e[9]||(e[9]=a=>t.value.status=a),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"},e[19]||(e[19]=[l("option",{value:"active"},"Aktif",-1),l("option",{value:"inactive"},"Nonaktif",-1)]),512),[[O,t.value.status]])]),l("div",Q,[q(v(G),{href:i.route("payment-types.index"),class:"px-4 py-2 rounded bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200"},{default:E(()=>e[21]||(e[21]=[N("Batal")])),_:1},8,["href"]),l("button",{type:"submit",disabled:r.value,class:"px-4 py-2 rounded bg-blue-500 text-white font-semibold hover:bg-blue-600 disabled:opacity-50"},[r.value?(d(),A("i",Z)):p("",!0),N(" "+U(u.isEdit?"Update":"Simpan"),1)],8,Y)])],32)])]),_:1}))}};export{ie as default};
