import{r as w,w as q,L as a,E as v,B as u,D as s,O as z,N as b,H as l,J as m,I as h,F as g,M as _,V as S,G as V}from"./vendor-vue-g7iCcTkf.js";import{u as U}from"./useToast-D6Z3J7rW.js";import"./vendor-utils-CpgP2uT4.js";const j={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},B={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},T={class:"inline-block align-bottom bg-slate-800 rounded-2xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full border border-white/20"},E={class:"bg-gradient-to-r from-blue-600/20 via-purple-600/20 to-pink-600/20 px-6 pt-6 pb-4 border-b border-white/20"},N={class:"sm:flex sm:items-start"},C={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},M={class:"text-xl leading-6 font-bold text-white"},O={class:"bg-slate-800 px-6 pt-6 pb-6"},D={class:"space-y-4"},Q=["value"],P=["value"],I={class:"flex items-center"},J={class:"bg-slate-700 px-6 py-4 sm:flex sm:flex-row-reverse border-t border-white/20"},A=["disabled"],F={key:0,class:"fas fa-spinner fa-spin mr-2"},G={__name:"SessionModal",props:{show:{type:Boolean,default:!1},session:{type:Object,default:null},availableQuizzes:{type:Array,default:()=>[]},availableQuestionnaires:{type:Array,default:()=>[]},courseId:{type:[String,Number],required:!0}},emits:["close","saved"],setup(n,{emit:y}){const r=n,p=y,{showToast:f}=U(),d=w(!1),i=w({session_number:1,session_title:"",session_description:"",order_number:1,estimated_duration_minutes:60,quiz_id:"",questionnaire_id:"",is_required:!0});q(()=>r.session,o=>{o?i.value={session_number:o.session_number||1,session_title:o.session_title||"",session_description:o.session_description||"",order_number:o.order_number||1,estimated_duration_minutes:o.estimated_duration_minutes||60,quiz_id:o.quiz_id||"",questionnaire_id:o.questionnaire_id||"",is_required:o.is_required!==!1}:i.value={session_number:1,session_title:"",session_description:"",order_number:1,estimated_duration_minutes:60,quiz_id:"",questionnaire_id:"",is_required:!0}},{immediate:!0});const k=async()=>{try{d.value=!0;const o=r.session?`/lms/courses/${r.courseId}/curriculum/sessions/${r.session.id}`:`/lms/courses/${r.courseId}/curriculum/sessions`,e=r.session?"PUT":"POST",c=await(await fetch(o,{method:e,headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(i.value)})).json();c.success?(f(r.session?"Sesi berhasil diperbarui":"Sesi berhasil dibuat","success"),p("saved",c.curriculum_item)):f(c.message||"Error saving session","error")}catch(o){console.error("Error saving session:",o),f("Error saving session","error")}finally{d.value=!1}},x=()=>{p("close")};return(o,e)=>n.show?(u(),a("div",j,[s("div",B,[s("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:x}),s("div",T,[s("form",{onSubmit:z(k,["prevent"])},[s("div",E,[s("div",N,[e[9]||(e[9]=s("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 sm:mx-0 sm:h-10 sm:w-10"},[s("i",{class:"fas fa-book-open text-white text-lg"})],-1)),s("div",C,[s("h3",M,b(n.session?"Edit Sesi":"Tambah Sesi Baru"),1),e[8]||(e[8]=s("p",{class:"mt-2 text-sm text-white/80"}," Buat sesi training dengan quiz, materi, dan kuesioner. ",-1))])])]),s("div",O,[s("div",D,[s("div",null,[e[10]||(e[10]=s("label",{for:"session_number",class:"block text-sm font-medium text-white mb-2"}," Nomor Sesi * ",-1)),l(s("input",{id:"session_number","onUpdate:modelValue":e[0]||(e[0]=t=>i.value.session_number=t),type:"number",min:"1",required:"",class:"mt-1 block w-full bg-slate-700 border border-white/20 rounded-xl shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-white placeholder-white/50",placeholder:"1"},null,512),[[m,i.value.session_number]])]),s("div",null,[e[11]||(e[11]=s("label",{for:"session_title",class:"block text-sm font-medium text-white mb-2"}," Judul Sesi * ",-1)),l(s("input",{id:"session_title","onUpdate:modelValue":e[1]||(e[1]=t=>i.value.session_title=t),type:"text",required:"",class:"mt-1 block w-full bg-slate-700 border border-white/20 rounded-xl shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-white placeholder-white/50",placeholder:"Contoh: Pengenalan Dasar"},null,512),[[m,i.value.session_title]])]),s("div",null,[e[12]||(e[12]=s("label",{for:"session_description",class:"block text-sm font-medium text-white mb-2"}," Deskripsi Sesi ",-1)),l(s("textarea",{id:"session_description","onUpdate:modelValue":e[2]||(e[2]=t=>i.value.session_description=t),rows:"3",class:"mt-1 block w-full bg-slate-700 border border-white/20 rounded-xl shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-white placeholder-white/50",placeholder:"Jelaskan apa yang akan dipelajari dalam sesi ini..."},null,512),[[m,i.value.session_description]])]),s("div",null,[e[13]||(e[13]=s("label",{for:"order_number",class:"block text-sm font-medium text-white mb-2"}," Urutan * ",-1)),l(s("input",{id:"order_number","onUpdate:modelValue":e[3]||(e[3]=t=>i.value.order_number=t),type:"number",min:"1",required:"",class:"mt-1 block w-full bg-slate-700 border border-white/20 rounded-xl shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-white placeholder-white/50",placeholder:"1"},null,512),[[m,i.value.order_number]])]),s("div",null,[e[14]||(e[14]=s("label",{for:"estimated_duration_minutes",class:"block text-sm font-medium text-white mb-2"}," Durasi Estimasi (menit) ",-1)),l(s("input",{id:"estimated_duration_minutes","onUpdate:modelValue":e[4]||(e[4]=t=>i.value.estimated_duration_minutes=t),type:"number",min:"1",class:"mt-1 block w-full bg-slate-700 border border-white/20 rounded-xl shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-white placeholder-white/50",placeholder:"60"},null,512),[[m,i.value.estimated_duration_minutes]])]),s("div",null,[e[16]||(e[16]=s("label",{for:"quiz_id",class:"block text-sm font-medium text-white mb-2"}," Quiz (Opsional) ",-1)),l(s("select",{id:"quiz_id","onUpdate:modelValue":e[5]||(e[5]=t=>i.value.quiz_id=t),class:"mt-1 block w-full bg-slate-700 border border-white/20 rounded-xl shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-white"},[e[15]||(e[15]=s("option",{value:"",class:"bg-slate-700 text-white"},"Pilih Quiz",-1)),(u(!0),a(g,null,_(n.availableQuizzes,t=>(u(),a("option",{key:t.id,value:t.id,class:"bg-slate-700 text-white"},b(t.title),9,Q))),128))],512),[[h,i.value.quiz_id]])]),s("div",null,[e[18]||(e[18]=s("label",{for:"questionnaire_id",class:"block text-sm font-medium text-white mb-2"}," Kuesioner (Opsional) ",-1)),l(s("select",{id:"questionnaire_id","onUpdate:modelValue":e[6]||(e[6]=t=>i.value.questionnaire_id=t),class:"mt-1 block w-full bg-slate-700 border border-white/20 rounded-xl shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-white"},[e[17]||(e[17]=s("option",{value:"",class:"bg-slate-700 text-white"},"Pilih Kuesioner",-1)),(u(!0),a(g,null,_(n.availableQuestionnaires,t=>(u(),a("option",{key:t.id,value:t.id,class:"bg-slate-700 text-white"},b(t.title),9,P))),128))],512),[[h,i.value.questionnaire_id]])]),s("div",I,[l(s("input",{id:"is_required","onUpdate:modelValue":e[7]||(e[7]=t=>i.value.is_required=t),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-white/20 rounded bg-slate-700"},null,512),[[S,i.value.is_required]]),e[19]||(e[19]=s("label",{for:"is_required",class:"ml-2 block text-sm text-white"}," Sesi wajib diselesaikan ",-1))])])]),s("div",J,[s("button",{type:"submit",disabled:d.value,class:"w-full inline-flex justify-center rounded-xl border border-transparent shadow-lg px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-base font-medium text-white hover:from-blue-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105"},[d.value?(u(),a("i",F)):v("",!0),V(" "+b(d.value?"Menyimpan...":n.session?"Update Sesi":"Buat Sesi"),1)],8,A),s("button",{type:"button",onClick:x,class:"mt-3 w-full inline-flex justify-center rounded-xl border border-white/20 shadow-lg px-6 py-3 bg-slate-600 text-base font-medium text-white hover:bg-slate-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm transition-all duration-300"}," Batal ")])],32)])])])):v("",!0)}};export{G as default};
