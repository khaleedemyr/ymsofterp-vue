import{r as v,c as O,A,B as i,C,D as e,L as l,E as x,N as r,x as K,G as d,Q as U,S as $,l as j,F as y,M as g,O as F,H as w,I as N,J as B,V as z,W as k}from"./vendor-vue-g7iCcTkf.js";import{A as D}from"./AppLayout-BPJiQqtf.js";import{S as p}from"./app-l4d6TH2E.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./ProfileUpdateModal-DspUIAzb.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const H={class:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 relative overflow-hidden"},R={class:"relative z-10 py-8 px-6"},W={class:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-3xl shadow-2xl mb-8"},J={class:"p-8 bg-gradient-to-r from-blue-600/80 via-purple-600/80 to-pink-600/80 rounded-3xl"},L={class:"flex items-center justify-between"},I={class:"space-y-4"},Y={class:"text-xl text-white/90 drop-shadow-md"},X={class:"flex items-center space-x-4"},Z=["disabled"],ee={class:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl shadow-2xl p-6 mb-6"},te={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},se={class:"text-center"},oe={class:"text-3xl font-bold text-white"},ie={class:"text-center"},ae={class:"text-3xl font-bold text-white"},le={class:"text-center"},ne={class:"text-3xl font-bold text-white"},re={class:"text-center"},de={class:"text-3xl font-bold text-white"},ue={class:"space-y-6"},ce={class:"flex items-start justify-between mb-4"},pe={class:"flex-1"},be={class:"flex items-center space-x-3 mb-2"},xe={class:"bg-blue-500/20 text-blue-300 px-3 py-1 rounded-full text-sm font-semibold"},fe={key:0,class:"bg-red-500/20 text-red-300 px-2 py-1 rounded-full text-xs font-semibold"},me={key:1,class:"bg-gray-500/20 text-gray-300 px-2 py-1 rounded-full text-xs font-semibold"},he={class:"text-lg font-semibold text-white mb-2"},ve={class:"flex items-center space-x-2"},ye=["onClick","disabled"],ge=["onClick","disabled"],we={key:0,class:"space-y-2"},_e={class:"text-white/80 flex-1"},ke={key:1,class:"space-y-2"},qe={class:"text-white/80 flex-1"},Ce={key:2,class:"bg-white/5 p-3 rounded-lg"},je={key:3,class:"space-y-2"},Be={key:4,class:"bg-white/5 p-3 rounded-lg"},Pe={key:0,class:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl shadow-2xl p-12 text-center"},Me=["disabled"],Te={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4"},Ee={class:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl shadow-2xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative"},Se={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm rounded-2xl flex items-center justify-center z-10"},Qe={class:"flex items-center justify-between mb-6"},Ve={class:"text-2xl font-bold text-white"},Oe=["disabled"],Ae=["disabled"],Ke=["disabled"],Ue={class:"flex items-center space-x-3"},$e=["disabled"],Fe={key:0},Ne={class:"space-y-3"},ze=["onUpdate:modelValue","placeholder","disabled"],De=["onClick","disabled"],Ge=["disabled"],He={class:"flex space-x-3 pt-6"},Re=["disabled"],We=["disabled"],Je={key:0,class:"flex items-center justify-center"},Le={key:1,class:"flex items-center justify-center"},Ie={__name:"ManageQuestions",props:{questionnaire:Object,questions:Array},setup(c){const _=c,n=v(!1),m=v(!1),b=v(!1),o=v({id:null,question_text:"",question_type:"multiple_choice",is_required:!0,options:[{option_text:""},{option_text:""}]}),q=O(()=>o.value.question_text.trim()?["multiple_choice","checkbox"].includes(o.value.question_type)?o.value.options.length>=2&&o.value.options.every(a=>a.option_text.trim()):!0:!1),P=a=>({multiple_choice:"Pilihan Ganda",essay:"Essay",true_false:"Benar/Salah",rating:"Rating",checkbox:"Checkbox"})[a]||a,M=()=>{o.value.options.push({option_text:""})},T=a=>{o.value.options.splice(a,1)},E=a=>{o.value={id:a.id,question_text:a.question_text,question_type:a.question_type,is_required:a.is_required,options:a.options?[...a.options]:[{option_text:""},{option_text:""}]},b.value=!0},h=()=>{m.value=!1,b.value=!1,S()},S=()=>{o.value={id:null,question_text:"",question_type:"multiple_choice",is_required:!0,options:[{option_text:""},{option_text:""}]}},Q=async()=>{if(!q.value){p.fire({icon:"error",title:"Validasi Error",text:"Mohon lengkapi semua field yang wajib diisi!"});return}n.value=!0;try{const a={question_text:o.value.question_text,question_type:o.value.question_type,is_required:o.value.is_required,options:["multiple_choice","checkbox"].includes(o.value.question_type)?o.value.options:null};b.value?await k.put(route("lms.questionnaires.questions.update",[_.questionnaire.id,o.value.id]),a,{onSuccess:()=>{p.fire({icon:"success",title:"Berhasil!",text:"Pertanyaan berhasil diperbarui!"}),h()},onError:t=>{p.fire({icon:"error",title:"Error!",text:Object.values(t)[0]||"Terjadi kesalahan saat memperbarui pertanyaan"})}}):await k.post(route("lms.questionnaires.questions.store",_.questionnaire.id),a,{onSuccess:()=>{p.fire({icon:"success",title:"Berhasil!",text:"Pertanyaan berhasil ditambahkan!"}),h()},onError:t=>{p.fire({icon:"error",title:"Error!",text:Object.values(t)[0]||"Terjadi kesalahan saat menambahkan pertanyaan"})}})}catch(a){console.error("Error saving question:",a),p.fire({icon:"error",title:"Error!",text:"Terjadi kesalahan saat menyimpan pertanyaan"})}finally{n.value=!1}},V=a=>{p.fire({title:"Konfirmasi Hapus",text:"Apakah Anda yakin ingin menghapus pertanyaan ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"}).then(t=>{t.isConfirmed&&(n.value=!0,k.delete(route("lms.questionnaires.questions.destroy",[_.questionnaire.id,a]),{onSuccess:()=>{n.value=!1,p.fire("Terhapus!","Pertanyaan berhasil dihapus.","success")},onError:()=>{n.value=!1,p.fire("Error!","Gagal menghapus pertanyaan.","error")}}))})};return(a,t)=>(i(),A(D,null,{default:C(()=>[e("div",H,[t[35]||(t[35]=e("div",{class:"absolute inset-0 overflow-hidden"},[e("div",{class:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"}),e("div",{class:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),e("div",{class:"absolute top-40 left-40 w-80 h-80 bg-pink-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"})],-1)),e("div",R,[e("div",W,[e("div",J,[e("div",L,[e("div",I,[t[5]||(t[5]=e("h1",{class:"text-4xl font-bold text-white drop-shadow-lg"}," Kelola Pertanyaan Kuesioner ",-1)),e("p",Y,r(c.questionnaire.title),1)]),e("div",X,[e("button",{onClick:t[0]||(t[0]=s=>m.value=!0),class:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",disabled:n.value},t[6]||(t[6]=[e("i",{class:"fas fa-plus mr-2"},null,-1),d(" Tambah Pertanyaan ")]),8,Z),K(U($),{href:a.route("lms.questionnaires.show",c.questionnaire.id),class:j(["bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg",{"opacity-50":n.value}])},{default:C(()=>t[7]||(t[7]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),d(" Kembali ke Kuesioner ")])),_:1},8,["href","class"])])])])]),e("div",ee,[t[12]||(t[12]=e("h3",{class:"text-xl font-bold text-white mb-4 flex items-center"},[e("i",{class:"fas fa-chart-bar mr-2 text-green-400"}),d(" Statistik Kuesioner ")],-1)),e("div",te,[e("div",se,[e("div",oe,r(c.questionnaire.questions_count||0),1),t[8]||(t[8]=e("div",{class:"text-sm text-white/60"},"Pertanyaan",-1))]),e("div",ie,[e("div",ae,r(c.questionnaire.responses_count||0),1),t[9]||(t[9]=e("div",{class:"text-sm text-white/60"},"Respons",-1))]),e("div",le,[e("div",ne,r(c.questionnaire.completion_rate||0)+"%",1),t[10]||(t[10]=e("div",{class:"text-sm text-white/60"},"Tingkat Penyelesaian",-1))]),e("div",re,[e("div",de,r(c.questionnaire.is_active?"Aktif":"Tidak Aktif"),1),t[11]||(t[11]=e("div",{class:"text-sm text-white/60"},"Status",-1))])])]),e("div",ue,[(i(!0),l(y,null,g(c.questions,(s,f)=>(i(),l("div",{key:s.id,class:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl shadow-2xl p-6"},[e("div",ce,[e("div",pe,[e("div",be,[e("span",xe," Pertanyaan "+r(f+1),1),e("span",{class:j([{"bg-green-500/20 text-green-300":s.question_type==="multiple_choice","bg-purple-500/20 text-purple-300":s.question_type==="essay","bg-orange-500/20 text-orange-300":s.question_type==="true_false","bg-pink-500/20 text-pink-300":s.question_type==="rating","bg-indigo-500/20 text-indigo-300":s.question_type==="checkbox"},"px-2 py-1 rounded-full text-xs font-semibold"])},r(P(s.question_type)),3),s.is_required?(i(),l("span",fe," Wajib ")):(i(),l("span",me," Opsional "))]),e("h3",he,r(s.question_text),1)]),e("div",ve,[e("button",{onClick:u=>E(s),class:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-3 py-2 rounded-lg text-sm font-semibold transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:n.value},t[13]||(t[13]=[e("i",{class:"fas fa-edit mr-1"},null,-1),d(" Edit ")]),8,ye),e("button",{onClick:u=>V(s.id),class:"bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 text-white px-3 py-2 rounded-lg text-sm font-semibold transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:n.value},t[14]||(t[14]=[e("i",{class:"fas fa-trash mr-1"},null,-1),d(" Hapus ")]),8,ge)])]),s.question_type==="multiple_choice"&&s.options&&s.options.length>0?(i(),l("div",we,[(i(!0),l(y,null,g(s.options,u=>(i(),l("div",{key:u.id,class:"flex items-center space-x-3 p-3 rounded-lg bg-white/5"},[t[15]||(t[15]=e("div",{class:"w-4 h-4 rounded-full border-2 border-white/30 flex items-center justify-center"},[e("div",{class:"w-2 h-2 bg-blue-400 rounded-full"})],-1)),e("span",_e,r(u.option_text),1)]))),128))])):s.question_type==="checkbox"&&s.options&&s.options.length>0?(i(),l("div",ke,[(i(!0),l(y,null,g(s.options,u=>(i(),l("div",{key:u.id,class:"flex items-center space-x-3 p-3 rounded-lg bg-white/5"},[t[16]||(t[16]=e("div",{class:"w-4 h-4 rounded border-2 border-white/30 flex items-center justify-center"},[e("div",{class:"w-2 h-2 bg-indigo-400 rounded"})],-1)),e("span",qe,r(u.option_text),1)]))),128))])):s.question_type==="essay"?(i(),l("div",Ce,t[17]||(t[17]=[e("p",{class:"text-white/60 text-sm"},"Jawaban essay akan ditampilkan sebagai teks",-1)]))):s.question_type==="true_false"?(i(),l("div",je,t[18]||(t[18]=[e("div",{class:"flex items-center space-x-3 p-3 rounded-lg bg-white/5"},[e("div",{class:"w-4 h-4 rounded-full border-2 border-white/30 flex items-center justify-center"},[e("div",{class:"w-2 h-2 bg-orange-400 rounded-full"})]),e("span",{class:"text-white/80"},"Benar")],-1),e("div",{class:"flex items-center space-x-3 p-3 rounded-lg bg-white/5"},[e("div",{class:"w-4 h-4 rounded-full border-2 border-white/30 flex items-center justify-center"},[e("div",{class:"w-2 h-2 bg-orange-400 rounded-full"})]),e("span",{class:"text-white/80"},"Salah")],-1)]))):s.question_type==="rating"?(i(),l("div",Be,t[19]||(t[19]=[e("div",{class:"flex items-center space-x-2"},[e("span",{class:"text-white/60 text-sm"},"Rating 1-5:"),e("div",{class:"flex space-x-1"},[e("i",{class:"fas fa-star text-yellow-400"}),e("i",{class:"fas fa-star text-yellow-400"}),e("i",{class:"fas fa-star text-yellow-400"}),e("i",{class:"fas fa-star text-yellow-400"}),e("i",{class:"fas fa-star text-yellow-400"})])],-1)]))):x("",!0)]))),128)),c.questions.length===0?(i(),l("div",Pe,[t[21]||(t[21]=e("div",{class:"text-6xl text-white/30 mb-4"},[e("i",{class:"fas fa-question-circle"})],-1)),t[22]||(t[22]=e("h3",{class:"text-2xl font-bold text-white mb-2"},"Belum ada pertanyaan",-1)),t[23]||(t[23]=e("p",{class:"text-white/70 mb-6"}," Mulai menambahkan pertanyaan untuk kuesioner ini ",-1)),e("button",{onClick:t[1]||(t[1]=s=>m.value=!0),class:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",disabled:n.value},t[20]||(t[20]=[e("i",{class:"fas fa-plus mr-2"},null,-1),d(" Tambah Pertanyaan Pertama ")]),8,Me)])):x("",!0)])]),m.value||b.value?(i(),l("div",Te,[e("div",Ee,[n.value?(i(),l("div",Se,t[24]||(t[24]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e("p",{class:"text-white font-semibold"},"Menyimpan pertanyaan...")],-1)]))):x("",!0),e("div",Qe,[e("h3",Ve,r(b.value?"Edit Pertanyaan":"Tambah Pertanyaan Baru"),1),e("button",{onClick:h,class:"text-white/60 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:n.value},t[25]||(t[25]=[e("i",{class:"fas fa-times text-xl"},null,-1)]),8,Oe)]),e("form",{onSubmit:F(Q,["prevent"]),class:"space-y-6"},[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[d("Tipe Pertanyaan "),e("span",{class:"text-red-400"},"*")],-1)),w(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.value.question_type=s),required:"",class:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent [&>option]:bg-slate-800 [&>option]:text-white disabled:opacity-50 disabled:cursor-not-allowed",disabled:n.value},t[26]||(t[26]=[e("option",{value:"multiple_choice"},"Pilihan Ganda",-1),e("option",{value:"essay"},"Essay",-1),e("option",{value:"true_false"},"Benar/Salah",-1),e("option",{value:"rating"},"Rating",-1),e("option",{value:"checkbox"},"Checkbox",-1)]),8,Ae),[[N,o.value.question_type]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[d("Pertanyaan "),e("span",{class:"text-red-400"},"*")],-1)),w(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.value.question_text=s),rows:"3",required:"",class:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"Masukkan pertanyaan...",disabled:n.value},null,8,Ke),[[B,o.value.question_text]])]),e("div",null,[e("label",Ue,[w(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.value.is_required=s),type:"checkbox",class:"w-4 h-4 text-blue-600 bg-white/10 border-white/20 rounded focus:ring-blue-500 focus:ring-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:n.value},null,8,$e),[[z,o.value.is_required]]),t[29]||(t[29]=e("span",{class:"text-sm font-medium text-gray-300"},"Pertanyaan Wajib",-1))])]),["multiple_choice","checkbox"].includes(o.value.question_type)?(i(),l("div",Fe,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[d("Opsi Jawaban "),e("span",{class:"text-red-400"},"*")],-1)),e("div",Ne,[(i(!0),l(y,null,g(o.value.options,(s,f)=>(i(),l("div",{key:f,class:"flex items-center space-x-3"},[w(e("input",{"onUpdate:modelValue":u=>s.option_text=u,type:"text",required:"",class:"flex-1 px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed",placeholder:`Opsi ${f+1}`,disabled:n.value},null,8,ze),[[B,s.option_text]]),o.value.options.length>2?(i(),l("button",{key:0,onClick:u=>T(f),type:"button",class:"text-red-400 hover:text-red-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:n.value},t[30]||(t[30]=[e("i",{class:"fas fa-trash"},null,-1)]),8,De)):x("",!0)]))),128)),e("button",{onClick:M,type:"button",class:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:n.value},t[31]||(t[31]=[e("i",{class:"fas fa-plus mr-1"},null,-1),d(" Tambah Opsi ")]),8,Ge)])])):x("",!0),e("div",He,[e("button",{type:"button",onClick:h,class:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-3 rounded-lg transition-colors duration-200 text-center disabled:opacity-50 disabled:cursor-not-allowed",disabled:n.value}," Batal ",8,Re),e("button",{type:"submit",disabled:n.value||!q.value,class:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-4 py-3 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden"},[n.value?(i(),l("span",Je,t[33]||(t[33]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"},null,-1),d(" Menyimpan... ")]))):(i(),l("span",Le,[t[34]||(t[34]=e("i",{class:"fas fa-save mr-2"},null,-1)),d(" "+r(b.value?"Update Pertanyaan":"Simpan Pertanyaan"),1)]))],8,We)])],32)])])):x("",!0)])]),_:1}))}},nt=G(Ie,[["__scopeId","data-v-c34005fc"]]);export{nt as default};
