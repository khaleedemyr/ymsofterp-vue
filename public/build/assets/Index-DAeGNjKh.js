import{r as p,w as c,a as Q,A as E,B as n,C as Y,D as t,L as u,G as d,H as g,F as S,M as C,N as l,I as O,J as F,Q as M,l as v,E as L,W as H}from"./vendor-vue-g7iCcTkf.js";import{A as $}from"./AppLayout-lnDyFfsm.js";import{l as z}from"./lodash-DB3HVzpp.js";import"./vendor-utils-CpgP2uT4.js";import"./app-CUjRlmlQ.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CXOsavaw.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const G={class:"w-full py-8 px-2"},J={class:"bg-white rounded-xl shadow-xl p-6 mb-6"},K={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4"},X=["value"],Z=["disabled"],j=["value"],tt={class:"flex items-end"},et=["disabled"],st={key:0,class:"fa-solid fa-spinner fa-spin mr-1"},at={key:1,class:"fa-solid fa-search mr-1"},lt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ot={key:0,class:"bg-white rounded-xl shadow-xl p-12 text-center"},it={key:1,class:"bg-white rounded-xl shadow-xl overflow-x-auto"},rt={class:"grid grid-cols-1 md:grid-cols-4 gap-4 p-6 border-b"},nt={class:"bg-blue-50 p-4 rounded-lg"},ut={class:"text-2xl font-bold text-blue-600"},dt={class:"bg-green-50 p-4 rounded-lg"},pt={class:"text-2xl font-bold text-green-600"},mt={class:"bg-purple-50 p-4 rounded-lg"},xt={class:"text-2xl font-bold text-purple-600"},gt={class:"bg-orange-50 p-4 rounded-lg"},ft={class:"text-2xl font-bold text-orange-600"},ct={class:"min-w-full divide-y divide-gray-200"},yt={class:"bg-white divide-y divide-gray-200"},_t={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},bt={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},vt={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},wt={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},ht={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},kt={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},Dt={class:"px-4 py-4 text-sm text-gray-900"},St={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},Ct={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},Ot={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},Ft=["title"],Tt={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900"},It={class:"mt-6 flex flex-col sm:flex-row justify-between items-center gap-4 p-6 border-t"},Mt={class:"text-sm text-gray-700"},Lt={class:"font-semibold text-gray-900"},qt={class:"font-semibold text-gray-900"},At={class:"font-semibold text-gray-900"},Vt={class:"flex gap-2"},Nt={key:2,class:"bg-white rounded-xl shadow-xl p-12 text-center"},Gt={__name:"Index",props:{adjustments:{type:Array,default:()=>[]},outlets:{type:Array,default:()=>[]},warehouseOutlets:{type:Array,default:()=>[]},totals:{type:Object,default:()=>({total_qty_diff_small:0,total_qty_diff_medium:0,total_qty_diff_large:0,total_value_adjustment:0})},pagination:{type:Object,default:()=>({current_page:1,per_page:50,total_items:0,total_pages:0})},filters:{type:Object,default:()=>({outlet_id:"",warehouse_outlet_id:"",date_from:new Date().toISOString().split("T")[0].substring(0,7)+"-01",date_to:new Date().toISOString().split("T")[0].substring(0,7)+"-"+new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate(),search:"",per_page:50,page:1})},user_outlet_id:{type:Number,default:null}},setup(q){const i=q,m=p(!1),A=p(i.outlets||[]),y=p(i.warehouseOutlets||[]),_=p(i.adjustments||[]),x=p(i.totals||{}),r=p(i.pagination||{}),o=p({...i.filters}),b=new Date,V=new Date(b.getFullYear(),b.getMonth(),1).toISOString().split("T")[0],N=new Date(b.getFullYear(),b.getMonth()+1,0).toISOString().split("T")[0];o.value.date_from||(o.value.date_from=V),o.value.date_to||(o.value.date_to=N);function W(){if(!o.value.outlet_id){y.value=[],o.value.warehouse_outlet_id="";return}f()}function f(){m.value=!0,o.value.page=1,H.get(route("stock-opname-adjustment-report.index"),o.value,{preserveState:!0,preserveScroll:!0,onFinish:()=>{m.value=!1}})}function T(a){o.value.page=a,f()}function w(a){return a==null?"0":parseFloat(a).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2})}function h(a){return a==null?"Rp 0":"Rp "+parseFloat(a).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2})}function B(a){return a?new Date(a).toLocaleString("id-ID",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}function k(a){if(a==null)return"0";const e=parseFloat(a),s=e.toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2});return e>0?"+"+s:s}function P(a){if(a==null)return"Rp 0";const e=parseFloat(a),s="Rp "+e.toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2});return e>0?"+"+s:s}function D(a){return a>0?"text-green-600 bg-green-50":a<0?"text-red-600 bg-red-50":"text-gray-900"}function R(a){return a>0?"text-green-600 bg-green-50":a<0?"text-red-600 bg-red-50":"text-gray-900"}const I=z.debounce(()=>{f()},500);return c(()=>i.adjustments,a=>{_.value=a||[]},{immediate:!0}),c(()=>i.totals,a=>{x.value=a||{}},{immediate:!0}),c(()=>i.pagination,a=>{r.value=a||{}},{immediate:!0}),c(()=>i.warehouseOutlets,a=>{y.value=a||[]},{immediate:!0}),c(()=>i.filters,a=>{o.value={...a}},{immediate:!0}),Q(()=>{_.value=i.adjustments||[],x.value=i.totals||{},r.value=i.pagination||{},y.value=i.warehouseOutlets||[],o.value={...i.filters}}),(a,e)=>(n(),E($,null,{default:Y(()=>[t("div",G,[e[31]||(e[31]=t("div",{class:"flex items-center justify-between mb-6"},[t("h1",{class:"text-2xl font-bold flex items-center gap-2"},[t("i",{class:"fa-solid fa-chart-bar text-blue-500"}),d(" Stock Opname Adjustment Report ")])],-1)),t("div",J,[t("div",K,[t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Outlet",-1)),g(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.outlet_id=s),onChange:W,class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[9]||(e[9]=t("option",{value:""},"Pilih Outlet",-1)),(n(!0),u(S,null,C(A.value,s=>(n(),u("option",{key:s.id,value:s.id},l(s.name),9,X))),128))],544),[[O,o.value.outlet_id]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Warehouse Outlet",-1)),g(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.warehouse_outlet_id=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!o.value.outlet_id},[e[11]||(e[11]=t("option",{value:""},"Pilih Warehouse",-1)),(n(!0),u(S,null,C(y.value,s=>(n(),u("option",{key:s.id,value:s.id},l(s.name),9,j))),128))],8,Z),[[O,o.value.warehouse_outlet_id]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Dari",-1)),g(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>o.value.date_from=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[F,o.value.date_from]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Sampai",-1)),g(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=s=>o.value.date_to=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[F,o.value.date_to]])]),t("div",tt,[t("button",{onClick:f,disabled:m.value,class:"w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed"},[m.value?(n(),u("i",st)):(n(),u("i",at)),d(" "+l(m.value?"Loading...":"Load Data"),1)],8,et)])]),t("div",lt,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Cari",-1)),g(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=s=>o.value.search=s),onInput:e[5]||(e[5]=(...s)=>M(I)&&M(I)(...s)),placeholder:"Cari berdasarkan nomor opname, nama item, atau reason...",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[F,o.value.search]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Per Halaman",-1)),g(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.value.per_page=s),onChange:f,class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},e[16]||(e[16]=[t("option",{value:25},"25",-1),t("option",{value:50},"50",-1),t("option",{value:100},"100",-1),t("option",{value:200},"200",-1)]),544),[[O,o.value.per_page]])])])]),m.value?(n(),u("div",ot,e[18]||(e[18]=[t("div",{class:"text-blue-500"},[t("i",{class:"fa-solid fa-spinner fa-spin text-4xl mb-4"}),t("p",{class:"text-lg font-medium"},"Memuat data...")],-1)]))):_.value.length>0?(n(),u("div",it,[t("div",rt,[t("div",nt,[e[19]||(e[19]=t("div",{class:"text-sm text-gray-600 mb-1"},"Total Selisih Qty Small",-1)),t("div",ut,l(w(x.value.total_qty_diff_small)),1)]),t("div",dt,[e[20]||(e[20]=t("div",{class:"text-sm text-gray-600 mb-1"},"Total Selisih Qty Medium",-1)),t("div",pt,l(w(x.value.total_qty_diff_medium)),1)]),t("div",mt,[e[21]||(e[21]=t("div",{class:"text-sm text-gray-600 mb-1"},"Total Selisih Qty Large",-1)),t("div",xt,l(w(x.value.total_qty_diff_large)),1)]),t("div",gt,[e[22]||(e[22]=t("div",{class:"text-sm text-gray-600 mb-1"},"Total Value Adjustment",-1)),t("div",ft,l(h(x.value.total_value_adjustment)),1)])]),t("table",ct,[e[23]||(e[23]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tanggal Process"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No. Opname"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Outlet"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Warehouse"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Item Code"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Item Name"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Category"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Selisih Small"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Selisih Medium"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Selisih Large"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"MAC Before"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"MAC After"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Value Adjustment"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Reason"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Processed By")])],-1)),t("tbody",yt,[(n(!0),u(S,null,C(_.value,(s,U)=>(n(),u("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",_t,l((r.value.current_page-1)*r.value.per_page+U+1),1),t("td",bt,l(B(s.processed_at)),1),t("td",vt,l(s.opname_number),1),t("td",wt,l(s.outlet),1),t("td",ht,l(s.warehouse_outlet),1),t("td",kt,l(s.item_code),1),t("td",Dt,l(s.item_name),1),t("td",St,l(s.category_name),1),t("td",{class:v(["px-4 py-4 whitespace-nowrap text-sm font-semibold",D(s.qty_diff_small)])},l(k(s.qty_diff_small))+" "+l(s.small_unit_name),3),t("td",{class:v(["px-4 py-4 whitespace-nowrap text-sm font-semibold",D(s.qty_diff_medium)])},l(k(s.qty_diff_medium))+" "+l(s.medium_unit_name),3),t("td",{class:v(["px-4 py-4 whitespace-nowrap text-sm font-semibold",D(s.qty_diff_large)])},l(k(s.qty_diff_large))+" "+l(s.large_unit_name),3),t("td",Ct,l(h(s.mac_before)),1),t("td",Ot,l(h(s.mac_after)),1),t("td",{class:v(["px-4 py-4 whitespace-nowrap text-sm font-semibold",R(s.value_adjustment)])},l(P(s.value_adjustment)),3),t("td",{class:"px-4 py-4 text-sm text-gray-900 max-w-xs truncate",title:s.reason},l(s.reason||"-"),9,Ft),t("td",Tt,l(s.processed_by),1)]))),128))])]),t("div",It,[t("div",Mt,[e[24]||(e[24]=d(" Menampilkan ")),t("span",Lt,l((r.value.current_page-1)*r.value.per_page+1),1),e[25]||(e[25]=d(" - ")),t("span",qt,l(Math.min(r.value.current_page*r.value.per_page,r.value.total_items)),1),e[26]||(e[26]=d(" dari ")),t("span",At,l(r.value.total_items),1),e[27]||(e[27]=d(" data "))]),t("div",Vt,[r.value.current_page>1?(n(),u("button",{key:0,onClick:e[7]||(e[7]=s=>T(r.value.current_page-1)),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition"},e[28]||(e[28]=[t("i",{class:"fa-solid fa-chevron-left mr-1"},null,-1),d(" Sebelumnya ")]))):L("",!0),r.value.current_page<r.value.total_pages?(n(),u("button",{key:1,onClick:e[8]||(e[8]=s=>T(r.value.current_page+1)),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition"},e[29]||(e[29]=[d(" Selanjutnya "),t("i",{class:"fa-solid fa-chevron-right ml-1"},null,-1)]))):L("",!0)])])])):(n(),u("div",Nt,e[30]||(e[30]=[t("i",{class:"fa-solid fa-inbox text-gray-400 text-6xl mb-4"},null,-1),t("p",{class:"text-gray-500 text-lg font-medium"},"Tidak ada data adjustment",-1),t("p",{class:"text-gray-400 text-sm mt-2"},'Pilih filter dan klik "Load Data" untuk melihat data',-1)])))])]),_:1}))}};export{Gt as default};
