import{r as D,k as V,a as j,L as f,B as m,D as o,O as C,x as h,Q as g,H as u,N as w,J as c,G as B,W as P}from"./vendor-vue-g7iCcTkf.js";import{S as i}from"./app-B-3LCfNP.js";import{s as x}from"./vue-multiselect.esm-V-bx43V9.js";/* empty css                            */import"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";const T={class:"fixed inset-0 z-50 flex items-center justify-center"},$={class:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},O={class:"flex items-center justify-between mb-6"},M={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},A={class:"w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white flex items-center justify-between"},L={class:"text-white"},N={class:"grid grid-cols-2 gap-2"},U={class:"flex items-center justify-end space-x-4 pt-4"},G=["disabled"],W={key:0,class:"fas fa-spinner fa-spin mr-2"},J={key:1,class:"fas fa-calendar-plus mr-2"},Y={__name:"QuickScheduleModal",props:{courses:{type:Array,default:()=>[]},outlets:{type:Array,default:()=>[]},selectedDate:{type:String,default:""}},emits:["close","created"],setup(y,{emit:v}){const a=y;console.log("Courses props:",a.courses),console.log("Outlets props:",a.outlets);const b=v,n=D(!1),t=V({course_id:null,scheduled_date:"",start_time:"",end_time:"",outlet_id:null,notes:""}),k=()=>{const l=new Date,e=l.getFullYear(),s=String(l.getMonth()+1).padStart(2,"0"),r=String(l.getDate()).padStart(2,"0");return`${e}-${s}-${r}`},_=l=>{if(!l)return"Pilih tanggal...";const[e,s,r]=l.split("-");return`${r}/${s}/${e}`},S=()=>{var e;const l=document.createElement("input");l.type="date",l.style.position="absolute",l.style.left="-9999px",l.style.opacity="0",l.addEventListener("change",s=>{t.scheduled_date=s.target.value,document.body.removeChild(l)}),l.addEventListener("blur",()=>{document.body.removeChild(l)}),document.body.appendChild(l),l.focus(),(e=l.showPicker)!=null&&e.call(l)||l.click()};j(()=>{a.selectedDate?t.scheduled_date=a.selectedDate:t.scheduled_date=k(),t.start_time="",t.end_time=""});const E=async()=>{var e,s;if(!t.course_id){i.fire({icon:"error",title:"Error",text:"Pilih course terlebih dahulu"});return}if(!t.scheduled_date){i.fire({icon:"error",title:"Error",text:"Pilih tanggal training"});return}if(!t.start_time||!t.end_time){i.fire({icon:"error",title:"Error",text:"Pilih waktu mulai dan selesai"});return}if(!t.outlet_id){i.fire({icon:"error",title:"Error",text:"Pilih venue training"});return}const l={course_id:((e=t.course_id)==null?void 0:e.id)||t.course_id,outlet_id:((s=t.outlet_id)==null?void 0:s.id_outlet)||t.outlet_id,scheduled_date:t.scheduled_date,start_time:t.start_time,end_time:t.end_time,notes:t.notes};n.value=!0,console.log("=== SHOWING LOADING MODAL ==="),console.log("Swal object:",i),console.log("Swal.fire method:",typeof i.fire);try{i.fire({title:"Sabar Bu Ghea....",text:"Antosan sakedap Bu Ghea, Nuju loding",icon:"info",showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,backdrop:!0,didOpen:()=>{i.showLoading()}}),console.log("Loading modal should be visible now")}catch(r){console.error("Error showing loading modal:",r)}try{console.log("Submitting data:",l),await P.post(route("lms.schedules.store"),l,{onSuccess:r=>{console.log("Success response:",r),i.close(),i.fire({icon:"success",title:"Berhasil",text:"Training berhasil dijadwalkan"}),b("created"),b("close")},onError:r=>{console.error("Error response:",r),i.close();let p="Terjadi kesalahan";if(r&&typeof r=="object"){const d=Object.values(r)[0];Array.isArray(d)?p=d[0]:typeof d=="string"&&(p=d)}i.fire({icon:"error",title:"Error",text:p})}})}catch(r){console.error("Exception caught:",r),i.close(),i.fire({icon:"error",title:"Error",text:"Terjadi kesalahan saat menyimpan: "+(r.message||"Unknown error")})}finally{n.value=!1}};return(l,e)=>(m(),f("div",T,[e[16]||(e[16]=o("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm"},null,-1)),o("div",$,[o("div",O,[e[9]||(e[9]=o("h3",{class:"text-2xl font-bold text-white"},"Jadwalkan Training Baru",-1)),o("button",{onClick:e[0]||(e[0]=s=>l.$emit("close")),class:"text-white/70 hover:text-white"},e[8]||(e[8]=[o("i",{class:"fas fa-times text-xl"},null,-1)]))]),o("form",{onSubmit:C(E,["prevent"]),class:"space-y-6"},[o("div",null,[e[10]||(e[10]=o("label",{class:"block text-white font-semibold mb-2"},"Pilih Course",-1)),h(g(x),{modelValue:t.course_id,"onUpdate:modelValue":e[1]||(e[1]=s=>t.course_id=s),options:a.courses,searchable:!0,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pilih atau cari course...","track-by":"id",label:"title","preselect-first":!1,class:"w-full"},null,8,["modelValue","options"])]),o("div",M,[o("div",null,[e[12]||(e[12]=o("label",{class:"block text-white font-semibold mb-2"},"Tanggal",-1)),o("div",A,[o("span",L,w(_(t.scheduled_date)),1),o("button",{type:"button",onClick:S,class:"text-blue-400 hover:text-blue-300 transition-colors"},e[11]||(e[11]=[o("i",{class:"fas fa-calendar-alt"},null,-1)]))]),u(o("input",{type:"hidden","onUpdate:modelValue":e[2]||(e[2]=s=>t.scheduled_date=s)},null,512),[[c,t.scheduled_date]])]),o("div",null,[e[13]||(e[13]=o("label",{class:"block text-white font-semibold mb-2"},"Waktu",-1)),o("div",N,[u(o("input",{type:"time","onUpdate:modelValue":e[3]||(e[3]=s=>t.start_time=s),class:"w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[c,t.start_time]]),u(o("input",{type:"time","onUpdate:modelValue":e[4]||(e[4]=s=>t.end_time=s),class:"w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[c,t.end_time]])])])]),o("div",null,[e[14]||(e[14]=o("label",{class:"block text-white font-semibold mb-2"},"Venue",-1)),h(g(x),{modelValue:t.outlet_id,"onUpdate:modelValue":e[5]||(e[5]=s=>t.outlet_id=s),options:a.outlets,searchable:!0,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pilih atau cari venue...","track-by":"id_outlet",label:"nama_outlet","preselect-first":!1,class:"w-full"},null,8,["modelValue","options"])]),o("div",null,[e[15]||(e[15]=o("label",{class:"block text-white font-semibold mb-2"},"Catatan (Opsional)",-1)),u(o("textarea",{"onUpdate:modelValue":e[6]||(e[6]=s=>t.notes=s),rows:"3",class:"w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tambahkan catatan untuk training ini..."},null,512),[[c,t.notes]])]),o("div",U,[o("button",{type:"button",onClick:e[7]||(e[7]=s=>l.$emit("close")),class:"px-6 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-xl text-white font-semibold hover:bg-white/30 transition-all"}," Batal "),o("button",{type:"submit",disabled:n.value,class:"px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl font-semibold hover:from-green-600 hover:to-green-700 transition-all disabled:opacity-50"},[n.value?(m(),f("i",W)):(m(),f("i",J)),B(" "+w(n.value?"Menyimpan...":"Jadwalkan Training"),1)],8,G)])],32)])]))}};export{Y as default};
