import{r as p,W as A,w as W,A as O,B as c,C as G,D as e,L as g,E as j,G as x,H as f,J as B,I as N,F as z,M as F,N as n,l as K,O as J,V as Y}from"./vendor-vue-g7iCcTkf.js";import{l as Q}from"./lodash-DB3HVzpp.js";import{S as b}from"./app-B-3LCfNP.js";import{A as Z}from"./AppLayout-CytV2Jsj.js";import{a as T}from"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-BWyEbEQC.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const ee={class:"max-w-7xl w-full mx-auto py-8 px-2"},te={class:"bg-white rounded-xl shadow-lg p-4 mb-6"},se={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ae={class:"bg-white rounded-xl shadow-lg overflow-hidden"},oe={class:"overflow-x-auto"},le={class:"min-w-full divide-y divide-gray-200"},re={class:"bg-white divide-y divide-gray-200"},ie={key:0},ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},de={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ce={class:"px-6 py-4 text-sm text-gray-500"},pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ge={class:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold"},xe={class:"px-6 py-4 whitespace-nowrap"},me={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},fe={class:"flex items-center gap-2"},be=["onClick"],ve=["onClick","title"],ye=["onClick"],he={key:0,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},we={class:"flex items-center justify-between"},ke={class:"flex-1 flex justify-between sm:hidden"},_e=["disabled"],Ce=["disabled"],Me={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Se={class:"text-sm text-gray-700"},Ae={class:"font-medium"},je={class:"font-medium"},Be={class:"font-medium"},Te={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Ve=["disabled"],$e={class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},Ke=["disabled"],Pe={class:"bg-white rounded-xl shadow-xl w-full max-w-md"},Ee={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},Le={class:"text-lg font-bold text-gray-900"},Ne={class:"p-6"},Re={class:"space-y-4"},qe={class:"block text-sm font-medium text-gray-700 mb-1"},Ue={key:0,class:"text-red-500"},Xe={key:1,class:"text-gray-500 text-xs"},Ie=["placeholder","disabled"],De={class:"flex items-center gap-2"},He={class:"px-6 py-4 border-t border-gray-200 flex justify-end gap-3"},We=["disabled"],Oe={key:0,class:"fa-solid fa-spinner fa-spin"},lt={__name:"Index",props:{categories:Object,filters:Object},setup(a){var P,E,L;const V=a,h=p(((P=V.filters)==null?void 0:P.search)||""),v=p(((E=V.filters)==null?void 0:E.status)||"all"),y=p(((L=V.filters)==null?void 0:L.per_page)||15),k=p(!1),m=p("create"),_=p(null),w=p(!1),i=p({code:"",name:"",description:"",is_active:!0}),R=Q.debounce(()=>{A.get("/asset-management/categories",{search:h.value,status:v.value,per_page:y.value},{preserveState:!0,replace:!0})},400);function q(){R()}function C(o){if(o){const t=new URL(o);t.searchParams.set("search",h.value),t.searchParams.set("status",v.value),t.searchParams.set("per_page",y.value),A.visit(t.toString(),{preserveState:!0,replace:!0})}}function U(){m.value="create",_.value=null,i.value={code:"",name:"",description:"",is_active:!0},k.value=!0}function X(o){m.value="edit",_.value=o,i.value={code:o.code,name:o.name,description:o.description||"",is_active:o.is_active},k.value=!0}function M(){k.value=!1,_.value=null,i.value={code:"",name:"",description:"",is_active:!0}}async function I(){var o,t,s,u,r,d;w.value=!0;try{let l;m.value==="create"?l=await T.post("/asset-management/categories",i.value,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}):l=await T.put(`/asset-management/categories/${_.value.id}`,i.value,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}),((o=l.data)!=null&&o.success||l.status===200||l.status===201)&&(b.fire("Berhasil",((t=l.data)==null?void 0:t.message)||"Kategori berhasil disimpan","success"),M(),$())}catch(l){let S="Gagal menyimpan data";(u=(s=l.response)==null?void 0:s.data)!=null&&u.message?S=l.response.data.message:(d=(r=l.response)==null?void 0:r.data)!=null&&d.errors?S=Object.values(l.response.data.errors).flat().join(", "):l.message&&(S=l.message),b.fire("Error",S,"error")}finally{w.value=!1}}async function D(o){var s,u,r;if((await b.fire({title:"Apakah Anda yakin?",text:`Kategori "${o.name}" akan dihapus`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"})).isConfirmed)try{const d=await T.delete(`/asset-management/categories/${o.id}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});((s=d.data)!=null&&s.success||d.status===200)&&(b.fire("Berhasil","Kategori berhasil dihapus","success"),$())}catch(d){let l="Gagal menghapus data";(r=(u=d.response)==null?void 0:u.data)!=null&&r.message&&(l=d.response.data.message),b.fire("Error",l,"error")}}async function H(o){var t,s,u;try{const r=await T.patch(`/asset-management/categories/${o.id}/toggle-status`,{},{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json"}});((t=r.data)!=null&&t.success||r.status===200)&&(b.fire("Berhasil","Status kategori berhasil diubah","success"),$())}catch(r){let d="Gagal mengubah status data";(u=(s=r.response)==null?void 0:s.data)!=null&&u.message&&(d=r.response.data.message),b.fire("Error",d,"error")}}function $(){A.reload({preserveState:!0,replace:!0})}return W([v,y],()=>{A.get("/asset-management/categories",{search:h.value,status:v.value,per_page:y.value},{preserveState:!0,replace:!0})}),(o,t)=>(c(),O(Z,null,{default:G(()=>[e("div",ee,[e("div",{class:"flex justify-between items-center mb-6"},[t[12]||(t[12]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-tags text-blue-500"}),x(" Asset Categories ")],-1)),e("button",{onClick:U,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2"},t[11]||(t[11]=[e("i",{class:"fa-solid fa-plus"},null,-1),x(" Tambah Kategori ")]))]),e("div",te,[e("div",se,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),f(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>h.value=s),onInput:q,placeholder:"Cari kode atau nama kategori...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,544),[[B,h.value]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),f(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[14]||(t[14]=[e("option",{value:"all"},"Semua Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[N,v.value]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Per Page",-1)),f(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>y.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[16]||(t[16]=[e("option",{value:"10"},"10",-1),e("option",{value:"15"},"15",-1),e("option",{value:"25"},"25",-1),e("option",{value:"50"},"50",-1)]),512),[[N,y.value]])])])]),e("div",ae,[e("div",oe,[e("table",le,[t[21]||(t[21]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Kode"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nama"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Deskripsi"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Jumlah Asset"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",re,[a.categories.data&&a.categories.data.length===0?(c(),g("tr",ie,t[18]||(t[18]=[e("td",{colspan:"7",class:"px-6 py-4 text-center text-gray-500"}," Tidak ada data ",-1)]))):j("",!0),(c(!0),g(z,null,F(a.categories.data,(s,u)=>(c(),g("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",ne,n((a.categories.current_page-1)*a.categories.per_page+u+1),1),e("td",de,n(s.code),1),e("td",ue,n(s.name),1),e("td",ce,n(s.description||"-"),1),e("td",pe,[e("span",ge,n(s.assets_count||0),1)]),e("td",xe,[e("span",{class:K([s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 py-1 rounded-full text-xs font-medium"])},n(s.is_active?"Active":"Inactive"),3)]),e("td",me,[e("div",fe,[e("button",{onClick:r=>X(s),class:"text-blue-600 hover:text-blue-900",title:"Edit"},t[19]||(t[19]=[e("i",{class:"fa-solid fa-edit"},null,-1)]),8,be),e("button",{onClick:r=>H(s),class:K(s.is_active?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900"),title:s.is_active?"Nonaktifkan":"Aktifkan"},[e("i",{class:K(s.is_active?"fa-solid fa-toggle-on":"fa-solid fa-toggle-off")},null,2)],10,ve),e("button",{onClick:r=>D(s),class:"text-red-600 hover:text-red-900",title:"Hapus"},t[20]||(t[20]=[e("i",{class:"fa-solid fa-trash"},null,-1)]),8,ye)])])]))),128))])])]),a.categories.last_page>1?(c(),g("div",he,[e("div",we,[e("div",ke,[e("button",{onClick:t[3]||(t[3]=s=>C(a.categories.prev_page_url)),disabled:!a.categories.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,_e),e("button",{onClick:t[4]||(t[4]=s=>C(a.categories.next_page_url)),disabled:!a.categories.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,Ce)]),e("div",Me,[e("div",null,[e("p",Se,[t[22]||(t[22]=x(" Menampilkan ")),e("span",Ae,n(a.categories.from),1),t[23]||(t[23]=x(" sampai ")),e("span",je,n(a.categories.to),1),t[24]||(t[24]=x(" dari ")),e("span",Be,n(a.categories.total),1),t[25]||(t[25]=x(" hasil "))])]),e("div",null,[e("nav",Te,[e("button",{onClick:t[5]||(t[5]=s=>C(a.categories.prev_page_url)),disabled:!a.categories.prev_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[26]||(t[26]=[e("i",{class:"fa-solid fa-chevron-left"},null,-1)]),8,Ve),e("span",$e," Page "+n(a.categories.current_page)+" of "+n(a.categories.last_page),1),e("button",{onClick:t[6]||(t[6]=s=>C(a.categories.next_page_url)),disabled:!a.categories.next_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[27]||(t[27]=[e("i",{class:"fa-solid fa-chevron-right"},null,-1)]),8,Ke)])])])])])):j("",!0)]),k.value?(c(),g("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:J(M,["self"])},[e("div",Pe,[e("div",Ee,[e("h3",Le,n(m.value==="create"?"Tambah Kategori":"Edit Kategori"),1),e("button",{onClick:M,class:"text-gray-400 hover:text-gray-600"},t[28]||(t[28]=[e("i",{class:"fa-solid fa-times"},null,-1)]))]),e("div",Ne,[e("div",Re,[e("div",null,[e("label",qe,[t[29]||(t[29]=x(" Kode ")),m.value==="edit"?(c(),g("span",Ue,"*")):(c(),g("span",Xe,"(Kosongkan untuk auto-generate)"))]),f(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=s=>i.value.code=s),placeholder:m.value==="create"?"Kosongkan untuk auto-generate (CAT001, CAT002, ...)":"Masukkan kode kategori",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",disabled:m.value==="edit"},null,8,Ie),[[B,i.value.code]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[x(" Nama "),e("span",{class:"text-red-500"},"*")],-1)),f(e("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=s=>i.value.name=s),placeholder:"Masukkan nama kategori",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[B,i.value.name]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Deskripsi ",-1)),f(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=s=>i.value.description=s),placeholder:"Masukkan deskripsi kategori",rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[B,i.value.description]])]),e("div",null,[e("label",De,[f(e("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=s=>i.value.is_active=s),class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[Y,i.value.is_active]]),t[32]||(t[32]=e("span",{class:"text-sm font-medium text-gray-700"},"Active",-1))])])])]),e("div",He,[e("button",{onClick:M,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"}," Batal "),e("button",{onClick:I,disabled:w.value,class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center gap-2 disabled:opacity-50"},[w.value?(c(),g("i",Oe)):j("",!0),e("span",null,n(w.value?"Menyimpan...":"Simpan"),1)],8,We)])])])):j("",!0)])]),_:1}))}};export{lt as default};
