import{r as d,P as I,A as j,B as i,C as w,D as e,x as L,L as n,E as b,G as f,O as M,N as a,F as P,M as V,l as T,W as z}from"./vendor-vue-g7iCcTkf.js";import{_}from"./Modal-BBL5yay4.js";import{S as E}from"./app-CUjRlmlQ.js";import"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";const A={class:"p-6"},$={class:"mt-6"},F={class:"flex items-center justify-between mb-4"},G={class:"flex items-center space-x-4"},K=["disabled"],U={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},W={key:1,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},X={key:0,class:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg"},H={class:"flex"},O={class:"ml-3"},J={class:"text-sm text-red-700"},R={key:1,class:"mt-4"},q={class:"flex items-center justify-center w-full"},Q={class:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100"},Y=["disabled"],Z={key:2,class:"mt-4"},ee={class:"bg-white rounded-lg shadow overflow-hidden"},te={class:"p-4 bg-gray-50 border-b"},se={class:"flex justify-between items-center"},ae={class:"text-sm text-gray-500"},le={class:"overflow-x-auto"},oe={class:"min-w-full divide-y divide-gray-200"},ie={class:"bg-white divide-y divide-gray-200"},ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},de={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},pe={class:"px-6 py-4 whitespace-nowrap"},ue={class:"px-6 py-4 text-sm text-red-600"},me={class:"p-4 bg-gray-50 border-t"},xe={class:"flex justify-end space-x-3"},ge=["disabled"],fe=["disabled"],ve={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ke={__name:"ImportModal",props:{show:Boolean},emits:["close"],setup(k,{emit:C}){const N=C,l=d(null),o=d(null),u=d(!1),m=d(!1),c=d(!1),x=d(!1),p=I({file:null}),v=()=>{N("close"),y()},y=()=>{l.value=null,o.value=null,p.reset()},S=async()=>{u.value=!0,o.value=null;try{window.location.href=route("suppliers.import.template")}catch{o.value="Gagal mengunduh template. Silakan coba lagi."}finally{u.value=!1}},B=async r=>{var s,h;const t=r.target.files[0];if(t){o.value=null,m.value=!0,p.file=t;try{const g=await axios.post(route("suppliers.import.preview"),p,{headers:{"Content-Type":"multipart/form-data"}});l.value=g.data}catch(g){o.value=((h=(s=g.response)==null?void 0:s.data)==null?void 0:h.message)||"Gagal memproses file. Silakan coba lagi.",l.value=null}finally{m.value=!1}}},D=async()=>{var r,t;if(p.file){o.value=null,c.value=!0;try{const s=await axios.post(route("suppliers.import.excel"),p,{headers:{"Content-Type":"multipart/form-data"}});await E.fire({title:"Import Completed!",html:`<b>Success:</b> ${s.data.success_count}<br><b>Failed:</b> ${s.data.error_count}`,icon:s.data.error_count>0?"warning":"success",confirmButtonText:"OK"}),v(),z.reload()}catch(s){o.value=((t=(r=s.response)==null?void 0:r.data)==null?void 0:t.message)||"Gagal mengimport data. Silakan coba lagi."}finally{c.value=!1}}};return(r,t)=>(i(),j(_,{show:k.show,onClose:v},{default:w(()=>[e("div",A,[t[11]||(t[11]=e("h2",{class:"text-lg font-medium text-gray-900"}," Import Supplier ",-1)),e("div",$,[e("div",F,[e("div",G,[e("button",{onClick:S,disabled:u.value,class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"},[u.value?(i(),n("svg",U,t[2]||(t[2]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(i(),n("svg",W,t[3]||(t[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)]))),t[4]||(t[4]=f(" Download Template "))],8,K),e("a",{href:"#",onClick:t[0]||(t[0]=M(s=>x.value=!0,["prevent"])),class:"text-sm text-blue-600 hover:text-blue-800"}," Lihat Panduan Import ")])]),o.value?(i(),n("div",X,[e("div",H,[t[5]||(t[5]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",O,[e("p",J,a(o.value),1)])])])):b("",!0),l.value?(i(),n("div",Z,[e("div",ee,[e("div",te,[e("div",se,[t[7]||(t[7]=e("h3",{class:"text-lg font-medium text-gray-900"},"Preview Data",-1)),e("div",ae," Total: "+a(l.value.total_rows)+" | Valid: "+a(l.value.valid_rows)+" | Invalid: "+a(l.value.invalid_rows),1)])]),e("div",le,[e("table",oe,[t[8]||(t[8]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Row"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Name"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Phone"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Error")])],-1)),e("tbody",ie,[(i(!0),n(P,null,V(l.value.preview,s=>(i(),n("tr",{key:s.row_number},[e("td",ne,a(s.row_number),1),e("td",re,a(s.data.name),1),e("td",de,a(s.data.email),1),e("td",ce,a(s.data.phone),1),e("td",pe,[e("span",{class:T([s.is_valid?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},a(s.is_valid?"Valid":"Invalid"),3)]),e("td",ue,a(s.errors.join(", ")),1)]))),128))])])]),e("div",me,[e("div",xe,[e("button",{onClick:y,disabled:c.value,class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25"}," Cancel ",8,ge),e("button",{onClick:D,disabled:l.value.invalid_rows>0||c.value,class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150 disabled:opacity-50"},[c.value?(i(),n("svg",ve,t[9]||(t[9]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):b("",!0),t[10]||(t[10]=f(" Import Data "))],8,fe)])])])])):(i(),n("div",R,[e("div",q,[e("label",Q,[t[6]||(t[6]=e("div",{class:"flex flex-col items-center justify-center pt-5 pb-6"},[e("svg",{class:"w-8 h-8 mb-4 text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"})]),e("p",{class:"mb-2 text-sm text-gray-500"},[e("span",{class:"font-semibold"},"Click to upload"),f(" or drag and drop ")]),e("p",{class:"text-xs text-gray-500"},"XLSX or XLS")],-1)),e("input",{type:"file",class:"hidden",accept:".xlsx,.xls",onChange:B,disabled:m.value},null,40,Y)])])]))])]),L(_,{show:x.value,onClose:t[1]||(t[1]=s=>x.value=!1)},{default:w(()=>t[12]||(t[12]=[e("div",{class:"p-6"},[e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Panduan Import Supplier"),e("div",{class:"space-y-4 text-sm text-gray-600"},[e("p",null,'1. Download template Excel dengan mengklik tombol "Download Template"'),e("p",null,'2. Isi data supplier pada sheet "Data" sesuai dengan kolom yang tersedia:'),e("ul",{class:"list-disc pl-5 space-y-2"},[e("li",null,"name: Nama supplier (wajib)"),e("li",null,"contact_person: Nama kontak (opsional)"),e("li",null,"phone: Nomor telepon (opsional)"),e("li",null,"email: Email (opsional, harus unik)"),e("li",null,"address: Alamat (opsional)"),e("li",null,"city: Kota (opsional)"),e("li",null,"province: Provinsi (opsional)"),e("li",null,"postal_code: Kode pos (opsional)"),e("li",null,"npwp: Nomor NPWP (opsional)"),e("li",null,"bank_name: Nama bank (opsional)"),e("li",null,"bank_account_number: Nomor rekening (opsional)"),e("li",null,"bank_account_name: Nama pemilik rekening (opsional)"),e("li",null,"payment_term: Syarat pembayaran (opsional)"),e("li",null,"payment_days: Jumlah hari pembayaran (opsional, harus angka)")]),e("p",null,"3. Upload file Excel yang sudah diisi"),e("p",null,"4. Periksa preview data untuk memastikan semua data valid"),e("p",null,'5. Klik "Import Data" untuk menyimpan data')])],-1)])),_:1},8,["show"])]),_:1},8,["show"]))}};export{ke as default};
