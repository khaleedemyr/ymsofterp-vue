import{d as b,a8 as r,A as w,B as n,C as d,D as t,N as o,L as g,F as k,M as B,H as C,J as $,x,G as y}from"./vendor-vue-g7iCcTkf.js";import{_ as N}from"./Modal-BBL5yay4.js";import{P as R}from"./PrimaryButton-BbBAD9SX.js";import{_ as D}from"./SecondaryButton-DMNVinm_.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";const F=b({components:{Modal:N,PrimaryButton:R,SecondaryButton:D},props:{show:{type:Boolean,default:!1},gr:{type:Object,default:null}},data(){return{saving:!1}},methods:{close(){this.$emit("close")},formatNumber(s){return new Intl.NumberFormat("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2}).format(s)},save(){if(!this.gr)return;this.saving=!0;const s=this.gr.items.map(e=>({id:e.id,qty_received:parseFloat(e.qty_received)}));axios.put(`/food-good-receive/${this.gr.id}`,{items:s}).then(e=>{this.$emit("success"),this.$toast.success("Good Receive berhasil diupdate")}).catch(e=>{console.error("Error updating GR:",e);let i="Terjadi kesalahan saat mengupdate Good Receive";e.response&&e.response.data&&(i=e.response.data.message||i),this.$toast.error(i)}).finally(()=>{this.saving=!1})}}}),G={class:"p-6"},M={class:"mt-6"},P={class:"grid grid-cols-2 gap-4"},V={class:"mt-1 text-sm text-gray-900"},q={class:"mt-1 text-sm text-gray-900"},E={class:"mt-1 text-sm text-gray-900"},I={class:"mt-1 text-sm text-gray-900"},j={class:"mt-6"},T={class:"overflow-x-auto"},U={class:"min-w-full divide-y divide-gray-200"},L={class:"bg-white divide-y divide-gray-200"},O={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},A={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},H={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},J={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Q=["onUpdate:modelValue"],z={class:"mt-6 flex justify-end space-x-3"};function K(s,e,i,W,X,Y){const f=r("SecondaryButton"),v=r("PrimaryButton"),_=r("Modal");return n(),w(_,{show:s.show,onClose:s.close},{default:d(()=>{var l,m,c,p,u;return[t("div",G,[e[7]||(e[7]=t("h2",{class:"text-lg font-medium text-gray-900"}," Edit Good Receive ",-1)),t("div",M,[t("div",P,[t("div",null,[e[0]||(e[0]=t("label",{class:"block text-sm font-medium text-gray-700"},"PO Number",-1)),t("div",V,o((l=s.gr)==null?void 0:l.po_number),1)]),t("div",null,[e[1]||(e[1]=t("label",{class:"block text-sm font-medium text-gray-700"},"Supplier",-1)),t("div",q,o((m=s.gr)==null?void 0:m.supplier_name),1)]),t("div",null,[e[2]||(e[2]=t("label",{class:"block text-sm font-medium text-gray-700"},"Receive Date",-1)),t("div",E,o((c=s.gr)==null?void 0:c.receive_date),1)]),t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700"},"Received By",-1)),t("div",I,o((p=s.gr)==null?void 0:p.received_by_name),1)])]),t("div",j,[e[5]||(e[5]=t("h3",{class:"text-md font-medium text-gray-900 mb-4"},"Items",-1)),t("div",T,[t("table",U,[e[4]||(e[4]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Item"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Unit"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Price"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Qty Received")])],-1)),t("tbody",L,[(n(!0),g(k,null,B((u=s.gr)==null?void 0:u.items,a=>(n(),g("tr",{key:a.id},[t("td",O,o(a.item_name),1),t("td",A,o(a.unit_name),1),t("td",H,o(s.formatNumber(a.price)),1),t("td",J,[C(t("input",{type:"number","onUpdate:modelValue":h=>a.qty_received=h,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",min:0,step:"0.01"},null,8,Q),[[$,a.qty_received]])])]))),128))])])])]),t("div",z,[x(f,{onClick:s.close},{default:d(()=>e[6]||(e[6]=[y(" Cancel ")])),_:1},8,["onClick"]),x(v,{onClick:s.save,disabled:s.saving},{default:d(()=>[y(o(s.saving?"Saving...":"Save Changes"),1)]),_:1},8,["onClick","disabled"])])])])]}),_:1},8,["show","onClose"])}const it=S(F,[["render",K]]);export{it as default};
