import{r as J,c,w as $,A as ee,B as n,C as w,D as e,x as _,Q as S,S as H,N as m,O as te,H as o,G as d,J as p,L as r,F as V,M as P,I as x,E as b,W as L}from"./vendor-vue-g7iCcTkf.js";import{A as se}from"./AppLayout-D8A3r8FT.js";import{s as le}from"./VueTimepicker-BGHuji_y.js";import{S as y}from"./app-3SxMownK.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./ProfileUpdateModal-BaUvls0f.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const ie={class:"min-h-screen bg-gradient-to-br from-slate-50 via-pink-50/30 to-slate-50 py-8 px-4 sm:px-6"},ne={class:"max-w-3xl mx-auto"},oe={class:"flex items-center gap-3 mb-8"},re={class:"text-2xl font-bold text-slate-800"},de={class:"text-sm text-slate-500 mt-0.5"},ue={class:"bg-white rounded-2xl border border-slate-200/60 shadow-sm overflow-hidden"},me={class:"p-6 grid grid-cols-1 md:grid-cols-3 gap-5"},pe={class:"md:col-span-3"},fe={class:"md:col-span-2"},ve={class:"bg-white rounded-2xl border border-slate-200/60 shadow-sm overflow-hidden"},xe={class:"p-6 space-y-5"},be=["value"],ge={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},ce={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},ye={class:"bg-white rounded-2xl border border-slate-200/60 shadow-sm overflow-hidden"},ke={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-5"},we={key:0,class:"md:col-span-2"},_e=["value"],Se={key:1,class:"md:col-span-2"},Ve={class:"font-mono text-lg font-bold text-emerald-700 bg-emerald-50 px-3 py-2 rounded-xl border border-emerald-200"},Pe={key:2,class:"md:col-span-2"},Ue=["value"],he={class:"bg-white rounded-2xl border border-slate-200/60 shadow-sm overflow-hidden"},De={class:"p-6 space-y-5"},je={class:"flex flex-wrap items-center gap-3"},Te={class:"inline-flex items-center gap-2 px-4 py-2.5 rounded-xl border border-slate-200 bg-white text-slate-700 hover:bg-slate-50 cursor-pointer transition text-sm font-medium"},qe=["title"],Fe={class:"flex flex-col-reverse sm:flex-row items-stretch sm:items-center justify-end gap-3 pt-2"},Be=["disabled"],Ce={key:0,class:"fa-solid fa-spinner fa-spin"},Ee={key:1,class:"fa-solid fa-check"},Me={__name:"Form",props:{reservation:Object,outlets:Array,salesUsers:{type:Array,default:()=>[]},paymentTypes:{type:Array,default:()=>[]},isEdit:Boolean},setup(f){var U,h,D,j,T,q,F,B,C,E,M,N,A,R,I;const a=f,u=J(!1),l=J({name:((U=a.reservation)==null?void 0:U.name)||"",phone:((h=a.reservation)==null?void 0:h.phone)||"",email:((D=a.reservation)==null?void 0:D.email)||"",outlet_id:((j=a.reservation)==null?void 0:j.outlet_id)||"",reservation_date:((T=a.reservation)==null?void 0:T.reservation_date)||"",reservation_time:((q=a.reservation)==null?void 0:q.reservation_time)||"",number_of_guests:((F=a.reservation)==null?void 0:F.number_of_guests)||1,smoking_preference:((B=a.reservation)==null?void 0:B.smoking_preference)||"",special_requests:((C=a.reservation)==null?void 0:C.special_requests)||"",dp:((E=a.reservation)==null?void 0:E.dp)??null,payment_type_id:((M=a.reservation)==null?void 0:M.payment_type_id)??null,from_sales:!!((N=a.reservation)!=null&&N.from_sales),sales_user_id:((A=a.reservation)==null?void 0:A.sales_user_id)??null,menu:((R=a.reservation)==null?void 0:R.menu)||"",menu_file:null,status:((I=a.reservation)==null?void 0:I.status)||"pending"}),g=c(()=>{var t;if(l.value.menu_file&&l.value.menu_file.name)return l.value.menu_file.name;const i=(t=a.reservation)==null?void 0:t.menu_file;return i&&typeof i=="string"&&i.split(/[/\\]/).pop()||""}),k=c(()=>l.value.dp!=null&&l.value.dp!==""&&Number(l.value.dp)>0),G=c(()=>{const i=l.value.outlet_id;return i&&(a.outlets||[]).find(t=>t.id==i)||null}),W=c(()=>{const i=a.paymentTypes||[],t=G.value;if(!t)return i;const v=t.id,s=t.region_id;return i.filter(O=>{const Y=O.outlet_ids||[],Z=O.region_ids||[];return!!(Y.includes(v)||s!=null&&Z.includes(s))})});function z(i){var v,s;const t=(s=(v=i.target)==null?void 0:v.files)==null?void 0:s[0];t&&(l.value.menu_file=t),i.target.value=""}function K(){l.value.menu_file=null}function Q(){l.value.from_sales||(l.value.sales_user_id=null)}$(k,i=>{i||(l.value.payment_type_id=null)});function X(){u.value=!0,a.isEdit?L.put(route("reservations.update",a.reservation.id),l.value,{onSuccess:()=>{u.value=!1,y.fire({title:"Sukses",text:"Reservasi berhasil diupdate!",icon:"success"})},onError:()=>{u.value=!1,y.fire({title:"Gagal",text:"Terjadi kesalahan saat menyimpan.",icon:"error"})}}):L.post(route("reservations.store"),l.value,{onSuccess:()=>{u.value=!1,y.fire({title:"Sukses",text:"Reservasi berhasil disimpan!",icon:"success"})},onError:()=>{u.value=!1,y.fire({title:"Gagal",text:"Terjadi kesalahan saat menyimpan.",icon:"error"})}})}return(i,t)=>(n(),ee(se,null,{default:w(()=>{var v;return[e("div",ie,[e("div",ne,[e("div",oe,[_(S(H),{href:i.route("reservations.index"),class:"flex items-center justify-center w-10 h-10 rounded-xl border border-slate-200 bg-white text-slate-600 hover:bg-slate-50 transition"},{default:w(()=>t[15]||(t[15]=[e("i",{class:"fa-solid fa-arrow-left"},null,-1)])),_:1},8,["href"]),e("div",null,[e("h1",re,m(f.isEdit?"Edit Reservasi":"Tambah Reservasi"),1),e("p",de,m(f.isEdit?"Ubah data reservasi":"Isi form untuk membuat reservasi baru"),1)])]),e("form",{onSubmit:te(X,["prevent"]),class:"space-y-6"},[e("section",ue,[t[19]||(t[19]=e("div",{class:"px-6 py-4 bg-slate-50 border-b border-slate-100 flex items-center gap-3"},[e("span",{class:"flex items-center justify-center w-10 h-10 rounded-xl bg-rose-100 text-rose-600"},[e("i",{class:"fa-solid fa-user text-lg"})]),e("div",null,[e("h2",{class:"font-semibold text-slate-800"},"Data Pemesan"),e("p",{class:"text-xs text-slate-500"},"Informasi kontak pemesan")])],-1)),e("div",me,[e("div",pe,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},[d("Nama Lengkap "),e("span",{class:"text-rose-500"},"*")],-1)),o(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.value.name=s),type:"text",required:"",maxlength:"100",placeholder:"Nama lengkap pemesan",class:"input-field"},null,512),[[p,l.value.name]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},[d("Nomor Telepon "),e("span",{class:"text-rose-500"},"*")],-1)),o(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.value.phone=s),type:"tel",required:"",maxlength:"20",placeholder:"08xxxxxxxxxx",class:"input-field"},null,512),[[p,l.value.phone]])]),e("div",fe,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"Email",-1)),o(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.email=s),type:"email",maxlength:"100",placeholder:"email@contoh.com (opsional)",class:"input-field"},null,512),[[p,l.value.email]])])])]),e("section",ve,[t[28]||(t[28]=e("div",{class:"px-6 py-4 bg-slate-50 border-b border-slate-100 flex items-center gap-3"},[e("span",{class:"flex items-center justify-center w-10 h-10 rounded-xl bg-pink-100 text-pink-600"},[e("i",{class:"fa-solid fa-calendar-days text-lg"})]),e("div",null,[e("h2",{class:"font-semibold text-slate-800"},"Detail Reservasi"),e("p",{class:"text-xs text-slate-500"},"Tanggal, waktu, outlet & preferensi")])],-1)),e("div",xe,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},[d("Outlet "),e("span",{class:"text-rose-500"},"*")],-1)),o(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.outlet_id=s),required:"",class:"input-field"},[t[20]||(t[20]=e("option",{value:""},"Pilih Outlet",-1)),(n(!0),r(V,null,P(f.outlets,s=>(n(),r("option",{key:s.id,value:s.id},m(s.name),9,be))),128))],512),[[x,l.value.outlet_id]])]),e("div",ge,[e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},[d("Tanggal Reservasi "),e("span",{class:"text-rose-500"},"*")],-1)),o(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.value.reservation_date=s),type:"date",required:"",class:"input-field"},null,512),[[p,l.value.reservation_date]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},[d("Waktu Reservasi "),e("span",{class:"text-rose-500"},"*")],-1)),_(S(le),{modelValue:l.value.reservation_time,"onUpdate:modelValue":t[5]||(t[5]=s=>l.value.reservation_time=s),format:"HH:mm",is24:!0,"minute-interval":"15",class:"input-field"},null,8,["modelValue"])])]),e("div",ce,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},[d("Jumlah Tamu "),e("span",{class:"text-rose-500"},"*")],-1)),o(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.value.number_of_guests=s),type:"number",min:"1",required:"",class:"input-field",placeholder:"1"},null,512),[[p,l.value.number_of_guests,void 0,{number:!0}]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},[d("Preferensi Area "),e("span",{class:"text-rose-500"},"*")],-1)),o(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.value.smoking_preference=s),required:"",class:"input-field"},t[25]||(t[25]=[e("option",{value:""},"Pilih Area",-1),e("option",{value:"smoking"},"Smoking Area",-1),e("option",{value:"non_smoking"},"Non-Smoking Area",-1)]),512),[[x,l.value.smoking_preference]])])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"Catatan Khusus",-1)),o(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=s=>l.value.special_requests=s),rows:"3",placeholder:"Request khusus (kue ulang tahun, kursi bayi, dll)",class:"input-field resize-none"},null,512),[[p,l.value.special_requests]])])])]),e("section",ye,[t[39]||(t[39]=e("div",{class:"px-6 py-4 bg-slate-50 border-b border-slate-100 flex items-center gap-3"},[e("span",{class:"flex items-center justify-center w-10 h-10 rounded-xl bg-emerald-100 text-emerald-600"},[e("i",{class:"fa-solid fa-money-bill-wave text-lg"})]),e("div",null,[e("h2",{class:"font-semibold text-slate-800"},"DP & Sales"),e("p",{class:"text-xs text-slate-500"},"Down payment dan sumber reservasi")])],-1)),e("div",ke,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"DP (Down Payment)",-1)),o(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>l.value.dp=s),type:"number",step:"0.01",min:"0",placeholder:"0",class:"input-field"},null,512),[[p,l.value.dp,void 0,{number:!0}]])]),k.value?(n(),r("div",we,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"Jenis Pembayaran (DP)",-1)),o(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>l.value.payment_type_id=s),class:"input-field"},[t[30]||(t[30]=e("option",{value:null},"-- Pilih Jenis Pembayaran --",-1)),(n(!0),r(V,null,P(W.value,s=>(n(),r("option",{key:s.id,value:s.id},m(s.name),9,_e))),128))],512),[[x,l.value.payment_type_id]]),t[32]||(t[32]=e("p",{class:"text-xs text-slate-500 mt-1"},"Jenis pembayaran mengikuti outlet/region yang dipilih",-1))])):b("",!0),k.value&&((v=f.reservation)!=null&&v.dp_code)?(n(),r("div",Se,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"Kode DP (untuk transaksi POS)",-1)),e("p",Ve,m(f.reservation.dp_code),1),t[34]||(t[34]=e("p",{class:"text-xs text-slate-500 mt-1"},"Berikan kode ini ke kasir untuk mengurangi pembayaran di POS",-1))])):b("",!0),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"Dari Sales?",-1)),o(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>l.value.from_sales=s),class:"input-field",onChange:Q},t[35]||(t[35]=[e("option",{value:!1},"Bukan",-1),e("option",{value:!0},"Dari Sales",-1)]),544),[[x,l.value.from_sales]])]),l.value.from_sales?(n(),r("div",Pe,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"Pilih Sales",-1)),o(e("select",{"onUpdate:modelValue":t[12]||(t[12]=s=>l.value.sales_user_id=s),class:"input-field"},[t[37]||(t[37]=e("option",{value:null},"-- Pilih Sales --",-1)),(n(!0),r(V,null,P(f.salesUsers||[],s=>(n(),r("option",{key:s.id,value:s.id},m(s.name),9,Ue))),128))],512),[[x,l.value.sales_user_id]])])):b("",!0)])]),e("section",he,[t[48]||(t[48]=e("div",{class:"px-6 py-4 bg-slate-50 border-b border-slate-100 flex items-center gap-3"},[e("span",{class:"flex items-center justify-center w-10 h-10 rounded-xl bg-amber-100 text-amber-600"},[e("i",{class:"fa-solid fa-utensils text-lg"})]),e("div",null,[e("h2",{class:"font-semibold text-slate-800"},"Menu & Status"),e("p",{class:"text-xs text-slate-500"},"Daftar menu dan status reservasi")])],-1)),e("div",De,[e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"Menu",-1)),o(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=s=>l.value.menu=s),rows:"5",placeholder:"Tulis menu yang dipesan (tanpa batas karakter)",class:"input-field resize-none"},null,512),[[p,l.value.menu]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"File menu (opsional)",-1)),t[45]||(t[45]=e("p",{class:"text-xs text-slate-500 mb-2"},"Foto, PDF, atau Excel. Maks. 10 MB.",-1)),e("div",je,[e("label",Te,[t[41]||(t[41]=e("i",{class:"fa-solid fa-paperclip text-slate-500"},null,-1)),t[42]||(t[42]=d(" Pilih file ")),e("input",{type:"file",accept:".jpg,.jpeg,.png,.gif,.webp,.pdf,.xls,.xlsx",class:"hidden",onChange:z},null,32)]),g.value?(n(),r("span",{key:0,class:"text-sm text-slate-700 truncate max-w-[200px]",title:g.value},m(g.value),9,qe)):b("",!0),g.value?(n(),r("button",{key:1,type:"button",onClick:K,class:"p-2 rounded-lg text-slate-400 hover:text-rose-500 hover:bg-rose-50 transition",title:"Hapus file"},t[43]||(t[43]=[e("i",{class:"fa-solid fa-times"},null,-1)]))):b("",!0)])]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},[d("Status "),e("span",{class:"text-rose-500"},"*")],-1)),o(e("select",{"onUpdate:modelValue":t[14]||(t[14]=s=>l.value.status=s),required:"",class:"input-field"},t[46]||(t[46]=[e("option",{value:"pending"},"Pending",-1),e("option",{value:"confirmed"},"Confirmed",-1),e("option",{value:"cancelled"},"Cancelled",-1)]),512),[[x,l.value.status]])])])]),e("div",Fe,[_(S(H),{href:i.route("reservations.index"),class:"inline-flex items-center justify-center gap-2 px-5 py-3 rounded-xl border border-slate-200 text-slate-700 font-medium hover:bg-slate-50 transition"},{default:w(()=>t[49]||(t[49]=[d(" Batal ")])),_:1},8,["href"]),e("button",{type:"submit",disabled:u.value,class:"inline-flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-semibold text-white bg-gradient-to-r from-rose-500 to-pink-600 hover:from-rose-600 hover:to-pink-700 shadow-lg shadow-pink-500/25 disabled:opacity-70 disabled:cursor-not-allowed transition"},[u.value?(n(),r("i",Ce)):(n(),r("i",Ee)),d(" "+m(u.value?"Menyimpan...":"Simpan Reservasi"),1)],8,Be)])],32)])])]}),_:1}))}},Ke=ae(Me,[["__scopeId","data-v-61f65e5d"]]);export{Ke as default};
