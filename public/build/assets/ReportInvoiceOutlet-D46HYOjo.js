import{$ as ot,c as u,r as g,A as lt,B as l,C as $,D as t,L as n,E as d,G as R,N as r,O as nt,H as c,F as x,M as T,I as S,J as D,x as rt,l as O,_ as it,W as dt}from"./vendor-vue-g7iCcTkf.js";import{A as ut}from"./AppLayout-C6QNM8cp.js";import{_ as pt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./app-D-uxhaxN.js";import"./vendor-charts-CuqD4wLC.js";import"./ProfileUpdateModal-cFrDwyHJ.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const gt={class:"w-full min-h-screen py-8 px-2 md:px-6"},ct={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"},bt={class:"flex items-start"},xt={class:"text-blue-700 text-sm"},ft={key:0},mt={key:1},yt={key:1,class:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6"},vt={class:"flex items-start"},_t={class:"text-green-700 text-sm"},ht={key:0,class:"flex items-center gap-2"},kt=["value"],wt={key:1,class:"flex items-center gap-2"},Rt={class:"px-3 py-2 bg-blue-100 text-blue-800 rounded-lg font-medium"},Tt=["value"],St={class:"overflow-x-auto bg-white rounded-xl shadow-lg"},Ot={class:"min-w-full divide-y divide-gray-200"},Ct={class:"bg-white divide-y divide-gray-200"},Ft={class:"hover:bg-blue-50 transition-colors duration-200 group"},Mt={class:"px-2 py-2 align-top"},Pt=["onClick"],Dt={key:0},Gt={key:1},Nt={class:"px-6 py-4 whitespace-nowrap text-sm"},Wt={class:"px-6 py-4 whitespace-nowrap text-sm"},Vt={class:"px-6 py-4 whitespace-nowrap text-sm"},At={class:"px-6 py-4 whitespace-nowrap text-sm"},It={class:"px-6 py-4 whitespace-nowrap text-sm"},Lt={key:0},Ut={key:1,class:"text-xs text-gray-600 mt-1"},jt={key:2,class:"text-gray-400"},Bt={key:1,class:"text-gray-400"},Et={class:"px-6 py-4 whitespace-nowrap text-sm"},$t={class:"px-6 py-4 whitespace-nowrap text-sm"},zt={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},Ht={colspan:"7",class:"bg-gray-50 px-0 py-0"},qt={class:"rounded-lg border border-blue-100 bg-blue-50/60 shadow-inner mx-4 my-2 overflow-x-auto"},Jt={key:0,class:"text-gray-400 py-6 text-center"},Qt={key:1},Kt={class:"w-full text-xs"},Xt={class:"px-4 py-2 border-b"},Yt={class:"px-4 py-2 border-b text-right"},Zt={class:"px-4 py-2 border-b"},te={class:"px-4 py-2 border-b text-right"},ee={class:"px-4 py-2 border-b text-right"},se={class:"px-4 py-2 border-b font-bold text-right bg-blue-50"},ae={key:0},oe={key:1},le={key:2,class:"mt-6 bg-gray-50 rounded-lg p-6"},ne={class:"flex justify-between items-center mb-4"},re={class:"text-right"},ie={class:"text-3xl font-bold text-gray-900"},de={class:"text-sm text-gray-500"},ue={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},pe={class:"bg-white rounded-lg p-4 border-l-4 border-green-500"},ge={class:"flex items-center justify-between mb-2"},ce={class:"flex items-center gap-2"},be={class:"text-sm text-gray-600"},xe={class:"text-2xl font-bold text-green-700"},fe={class:"bg-white rounded-lg p-4 border-l-4 border-blue-500"},me={class:"flex items-center justify-between mb-2"},ye={class:"flex items-center gap-2"},ve={class:"text-sm text-gray-600"},_e={class:"text-2xl font-bold text-blue-700"},he={class:"mt-4 pt-4 border-t border-gray-200"},ke={class:"flex items-center justify-between text-sm"},we={class:"flex items-center gap-4"},Re={class:"text-green-700 font-semibold"},Te={class:"text-blue-700 font-semibold"},Se={key:3,class:"mt-6 flex flex-col sm:flex-row justify-between items-center gap-4 bg-white rounded-xl shadow-lg p-4"},Oe={class:"flex items-center gap-2"},Ce={class:"text-sm text-gray-600"},Fe={key:0},Me={key:1},Pe={key:0,class:"flex items-center gap-2"},De=["disabled"],Ge={class:"flex items-center gap-1"},Ne=["onClick"],We={key:1,class:"px-2 text-gray-400"},Ve=["disabled"],Ae={__name:"ReportInvoiceOutlet",props:{data:Array,pagination:Object,details:Object,outlets:Array,roModes:Array,filters:Object,user_id_outlet:Number,hasFilters:Boolean},setup(z){var A,I,L,U,j,B,E;const o=z,H=ot();u(()=>{var a;return((a=H.props.auth)==null?void 0:a.user)||{}});const p=u(()=>o.user_id_outlet==1),G=u(()=>{if(p.value)return"";const a=o.outlets.find(e=>e.id==o.user_id_outlet);return a?a.name:"Outlet Tidak Ditemukan"}),k=u(()=>o.data.reduce((a,e)=>a+(parseFloat(e.payment_total)||0),0)),q=u(()=>o.data.filter(a=>a.transaction_type==="GR").length),J=u(()=>o.data.filter(a=>a.transaction_type==="RWS").length),N=u(()=>o.data.filter(a=>a.transaction_type==="GR").reduce((a,e)=>a+(parseFloat(e.payment_total)||0),0)),W=u(()=>o.data.filter(a=>a.transaction_type==="RWS").reduce((a,e)=>a+(parseFloat(e.payment_total)||0),0)),Q=u(()=>k.value>0?Math.round(N.value/k.value*100):0),K=u(()=>k.value>0?Math.round(W.value/k.value*100):0),f=g(((A=o.filters)==null?void 0:A.outlet_id)||""),m=g(((I=o.filters)==null?void 0:I.search)||""),y=g(((L=o.filters)==null?void 0:L.from)||""),v=g(((U=o.filters)==null?void 0:U.to)||""),_=g(((j=o.filters)==null?void 0:j.fo_mode)||""),h=g(((B=o.filters)==null?void 0:B.transaction_type)||""),w=g(((E=o.filters)==null?void 0:E.per_page)||15),C=g({});function X(a){C.value[a]=!C.value[a]}function F(a=1){if(!(m.value||y.value||v.value||p.value&&f.value||_.value||h.value)){alert("Silakan isi minimal satu filter (pencarian, tanggal, outlet, RO Mode, atau Tipe) untuk melihat data.");return}dt.get(route("report-invoice-outlet"),{outlet_id:p.value?f.value:o.user_id_outlet,search:m.value||void 0,from:y.value||void 0,to:v.value||void 0,fo_mode:_.value||void 0,transaction_type:h.value||void 0,per_page:w.value||15,page:a},{preserveState:!0,replace:!0})}function M(a){F(a)}function Y(){F(1)}function Z(){const a=new URLSearchParams;p.value&&f.value?a.append("outlet_id",f.value):p.value||a.append("outlet_id",o.user_id_outlet),m.value&&a.append("search",m.value),y.value&&a.append("from",y.value),v.value&&a.append("to",v.value),_.value&&a.append("fo_mode",_.value),h.value&&a.append("transaction_type",h.value);const e=route("report-invoice-outlet.export")+"?"+a.toString();window.open(e,"_blank")}function V(a){return a?new Date(a).toLocaleDateString("id-ID"):"-"}function b(a){return a==null||isNaN(a)?"-":"Rp "+Number(a).toLocaleString("id-ID",{minimumFractionDigits:0})}function tt(a){return a.warehouse_name&&a.warehouse_division_name?a.warehouse_name+" - "+a.warehouse_division_name:a.warehouse_name?a.warehouse_name:a.warehouse_division_name?a.warehouse_division_name:"-"}function et(a){if(!a)return"bg-gray-100 text-gray-800";const e=a.toLowerCase();return e.includes("utama")?"bg-blue-100 text-blue-800":e.includes("tambahan")?"bg-purple-100 text-purple-800":e.includes("pengambilan")?"bg-yellow-100 text-yellow-800":e.includes("khusus")?"bg-orange-100 text-orange-800":e.includes("supplier")?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}function st(){if(!o.pagination)return[];const a=o.pagination.current_page,e=o.pagination.last_page,s=[];if(e<=7)for(let i=1;i<=e;i++)s.push(i);else{s.push(1),a>3&&s.push("...");const i=Math.max(2,a-1),at=Math.min(e-1,a+1);for(let P=i;P<=at;P++)s.push(P);a<e-2&&s.push("..."),s.push(e)}return s}return(a,e)=>(l(),lt(ut,null,{default:$(()=>[t("div",gt,[e[43]||(e[43]=t("h1",{class:"text-2xl font-bold mb-6"},"Laporan Invoice Outlet",-1)),o.hasFilters?d("",!0):(l(),n("div",ct,[t("div",bt,[e[11]||(e[11]=t("i",{class:"fas fa-info-circle text-blue-500 mt-1 mr-3"},null,-1)),t("div",null,[e[10]||(e[10]=t("h3",{class:"text-blue-800 font-semibold mb-1"},"Cara menggunakan laporan ini:",-1)),t("p",xt,[p.value?(l(),n("span",ft,' Isi minimal satu filter di bawah ini (pencarian, tanggal, outlet, RO Mode, atau Tipe) kemudian klik tombol "Load Data" untuk melihat data laporan invoice outlet. ')):(l(),n("span",mt,' Isi minimal satu filter di bawah ini (pencarian, tanggal, RO Mode, atau Tipe) kemudian klik tombol "Load Data" untuk melihat data laporan invoice outlet. Data akan otomatis difilter berdasarkan outlet Anda. '))])])])])),!p.value&&!o.hasFilters?(l(),n("div",yt,[t("div",vt,[e[14]||(e[14]=t("i",{class:"fas fa-building text-green-500 mt-1 mr-3"},null,-1)),t("div",null,[e[13]||(e[13]=t("h3",{class:"text-green-800 font-semibold mb-1"},"Outlet Aktif:",-1)),t("p",_t,[e[12]||(e[12]=R(" Anda sedang melihat data untuk outlet: ")),t("strong",null,r(G.value),1)])])])])):d("",!0),t("form",{onSubmit:nt(F,["prevent"]),class:"flex flex-wrap gap-2 mb-4 items-end"},[p.value?(l(),n("div",ht,[e[16]||(e[16]=t("label",{class:"text-sm"},"Outlet",-1)),c(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>f.value=s),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[e[15]||(e[15]=t("option",{value:""},"Semua",-1)),(l(!0),n(x,null,T(o.outlets,s=>(l(),n("option",{key:s.id,value:s.id},r(s.name),9,kt))),128))],512),[[S,f.value]])])):(l(),n("div",wt,[e[17]||(e[17]=t("label",{class:"text-sm font-semibold text-gray-700"},"Outlet:",-1)),t("span",Rt,r(G.value),1)])),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-xs font-bold mb-1"},"Cari",-1)),c(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>m.value=s),type:"text",class:"form-input rounded border px-2 py-1",placeholder:"Cari nomor invoice, GR, outlet..."},null,512),[[D,m.value]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-xs font-bold mb-1"},"Tanggal Dari",-1)),c(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>y.value=s),type:"date",class:"form-input rounded border px-2 py-1"},null,512),[[D,y.value]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-xs font-bold mb-1"},"Tanggal Sampai",-1)),c(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>v.value=s),type:"date",class:"form-input rounded border px-2 py-1"},null,512),[[D,v.value]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-xs font-bold mb-1"},"RO Mode",-1)),c(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>_.value=s),class:"border border-gray-300 rounded-lg px-2 py-1 focus:ring-blue-500 focus:border-blue-500"},[e[21]||(e[21]=t("option",{value:""},"Semua",-1)),(l(!0),n(x,null,T(o.roModes,s=>(l(),n("option",{key:s.id,value:s.id},r(s.name),9,Tt))),128))],512),[[S,_.value]])]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-xs font-bold mb-1"},"Tipe",-1)),c(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>h.value=s),class:"border border-gray-300 rounded-lg px-2 py-1 focus:ring-blue-500 focus:border-blue-500"},e[23]||(e[23]=[t("option",{value:""},"Semua",-1),t("option",{value:"GR"},"GR",-1),t("option",{value:"RWS"},"RWS",-1)]),512),[[S,h.value]])]),t("div",null,[e[26]||(e[26]=t("label",{class:"block text-xs font-bold mb-1"},"Per Page",-1)),c(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>w.value=s),class:"border border-gray-300 rounded-lg px-2 py-1 focus:ring-blue-500 focus:border-blue-500"},e[25]||(e[25]=[t("option",{value:"10"},"10",-1),t("option",{value:"15"},"15",-1),t("option",{value:"25"},"25",-1),t("option",{value:"50"},"50",-1),t("option",{value:"100"},"100",-1)]),512),[[S,w.value]])]),e[28]||(e[28]=t("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded font-bold flex items-center gap-2"},[t("i",{class:"fas fa-search"}),R(" Load Data ")],-1)),o.hasFilters&&o.data&&o.data.length>0?(l(),n("button",{key:2,type:"button",onClick:Z,class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded font-bold flex items-center gap-2"},e[27]||(e[27]=[t("i",{class:"fas fa-file-excel"},null,-1),R(" Export Excel ")]))):d("",!0)],32),t("div",St,[t("table",Ot,[e[34]||(e[34]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Tgl Invoice"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Outlet"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Warehouse"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Tipe"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},[t("div",null,"RO Mode"),t("div",{class:"text-xs font-normal mt-1"},"No RO")]),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"No GR/RWS"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Tgl GR/RWS"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Total")])],-1)),t("tbody",Ct,[(l(!0),n(x,null,T(o.data,s=>(l(),n(x,{key:s.gr_id},[t("tr",Ft,[t("td",Mt,[t("button",{onClick:i=>X(s.gr_id),class:"focus:outline-none transition-transform duration-200 group-hover:scale-110"},[C.value[s.gr_id]?(l(),n("span",Dt,"▼")):(l(),n("span",Gt,"▶"))],8,Pt)]),t("td",Nt,r(V(s.invoice_date)),1),t("td",Wt,r(s.outlet_name),1),t("td",Vt,r(tt(s)),1),t("td",At,[t("span",{class:O([s.transaction_type==="GR"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800","px-2 py-1 rounded-full text-xs font-semibold"])},r(s.transaction_type),3)]),t("td",It,[s.transaction_type==="GR"?(l(),n("div",Lt,[s.fo_mode?(l(),n("div",{key:0,class:O([et(s.fo_mode),"px-2 py-1 rounded-full text-xs font-semibold mb-1 inline-block"])},r(s.fo_mode),3)):d("",!0),s.ro_number?(l(),n("div",Ut,r(s.ro_number),1)):d("",!0),!s.fo_mode&&!s.ro_number?(l(),n("div",jt,"-")):d("",!0)])):(l(),n("span",Bt,"-"))]),t("td",Et,r(s.gr_number),1),t("td",$t,r(V(s.gr_receive_date)),1),t("td",zt,r(b(s.payment_total)),1)]),rt(it,{name:"fade-expand"},{default:$(()=>[C.value[s.gr_id]?(l(),n("tr",{key:"detail-"+s.gr_id},[e[31]||(e[31]=t("td",null,null,-1)),t("td",Ht,[t("div",qt,[!o.details[s.gr_id]||!o.details[s.gr_id].length?(l(),n("div",Jt,"Tidak ada detail.")):(l(),n("div",Qt,[t("table",Kt,[e[30]||(e[30]=t("thead",{class:"sticky top-0 z-10 bg-blue-100/80"},[t("tr",null,[t("th",{class:"px-4 py-2 border-b font-semibold text-gray-700"},"Item"),t("th",{class:"px-4 py-2 border-b font-semibold text-gray-700"},"Qty"),t("th",{class:"px-4 py-2 border-b font-semibold text-gray-700"},"Unit"),t("th",{class:"px-4 py-2 border-b font-semibold text-gray-700"},"Harga"),t("th",{class:"px-4 py-2 border-b font-semibold text-gray-700"},"Subtotal")])],-1)),t("tbody",null,[(l(!0),n(x,null,T(o.details[s.gr_id],i=>(l(),n("tr",{key:i.item_name},[t("td",Xt,r(i.item_name),1),t("td",Yt,r(i.qty),1),t("td",Zt,r(i.unit_name),1),t("td",te,r(b(i.price)),1),t("td",ee,r(b(i.subtotal)),1)]))),128)),t("tr",null,[e[29]||(e[29]=t("td",{colspan:"4",class:"px-4 py-2 border-b font-bold text-right bg-blue-50"},"Grand Total",-1)),t("td",se,r(b(s.payment_total)),1)])])])]))])])])):d("",!0)]),_:2},1024)],64))),128)),o.hasFilters?o.data.length?d("",!0):(l(),n("tr",oe,e[33]||(e[33]=[t("td",{colspan:"9",class:"text-center py-8 text-gray-400"},"Tidak ada data yang sesuai dengan filter yang dipilih.",-1)]))):(l(),n("tr",ae,e[32]||(e[32]=[t("td",{colspan:"9",class:"text-center py-12"},[t("div",{class:"flex flex-col items-center space-y-4"},[t("div",{class:"text-gray-500 text-lg"},[t("i",{class:"fas fa-filter text-4xl mb-4"}),t("p",{class:"font-semibold"},"Silakan isi filter terlebih dahulu"),t("p",{class:"text-sm"},"Pilih outlet, tanggal, RO Mode, Tipe, atau masukkan kata kunci pencarian untuk melihat data laporan invoice outlet.")])])],-1)])))])])]),o.hasFilters&&o.data.length>0?(l(),n("div",le,[t("div",ne,[e[35]||(e[35]=t("h3",{class:"text-xl font-bold text-gray-800"},"Grand Total Summary",-1)),t("div",re,[t("div",ie,r(b(k.value)),1),t("div",de,"Total "+r(o.data.length)+" transaksi",1)])]),t("div",ue,[t("div",pe,[t("div",ge,[t("div",ce,[e[36]||(e[36]=t("span",{class:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-semibold"}," GR (Good Receive) ",-1)),t("span",be,r(q.value)+" transaksi",1)])]),t("div",xe,r(b(N.value)),1)]),t("div",fe,[t("div",me,[t("div",ye,[e[37]||(e[37]=t("span",{class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-semibold"}," RWS (Retail Warehouse Sales) ",-1)),t("span",ve,r(J.value)+" transaksi",1)])]),t("div",_e,r(b(W.value)),1)])]),t("div",he,[t("div",ke,[e[38]||(e[38]=t("span",{class:"text-gray-600"},"Persentase:",-1)),t("div",we,[t("span",Re," GR: "+r(Q.value)+"% ",1),t("span",Te," RWS: "+r(K.value)+"% ",1)])])])])):d("",!0),o.hasFilters&&o.pagination?(l(),n("div",Se,[t("div",Oe,[e[40]||(e[40]=t("label",{class:"text-sm text-gray-700"},"Per Page:",-1)),c(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>w.value=s),onChange:Y,class:"border border-gray-300 rounded-lg px-3 py-1 focus:ring-blue-500 focus:border-blue-500"},e[39]||(e[39]=[t("option",{value:"10"},"10",-1),t("option",{value:"15"},"15",-1),t("option",{value:"25"},"25",-1),t("option",{value:"50"},"50",-1),t("option",{value:"100"},"100",-1)]),544),[[S,w.value]]),t("span",Ce,[o.pagination.total>0?(l(),n("span",Fe," Menampilkan "+r(o.pagination.from)+" - "+r(o.pagination.to)+" dari "+r(o.pagination.total)+" data ",1)):(l(),n("span",Me," Tidak ada data "))])]),o.pagination.total>0?(l(),n("div",Pe,[t("button",{onClick:e[8]||(e[8]=s=>M(o.pagination.current_page-1)),disabled:o.pagination.current_page===1,class:O(["px-4 py-2 rounded-lg font-medium transition",o.pagination.current_page===1?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"])},e[41]||(e[41]=[t("i",{class:"fas fa-chevron-left"},null,-1),R(" Previous ")]),10,De),t("div",Ge,[(l(!0),n(x,null,T(st(),s=>(l(),n(x,{key:s},[s!=="..."?(l(),n("button",{key:0,onClick:i=>M(s),class:O(["px-3 py-2 rounded-lg font-medium transition",s===o.pagination.current_page?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"])},r(s),11,Ne)):(l(),n("span",We,"..."))],64))),128))]),t("button",{onClick:e[9]||(e[9]=s=>M(o.pagination.current_page+1)),disabled:o.pagination.current_page===o.pagination.last_page,class:O(["px-4 py-2 rounded-lg font-medium transition",o.pagination.current_page===o.pagination.last_page?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"])},e[42]||(e[42]=[R(" Next "),t("i",{class:"fas fa-chevron-right"},null,-1)]),10,Ve)])):d("",!0)])):d("",!0)])]),_:1}))}},Je=pt(Ae,[["__scopeId","data-v-bb3aacc4"]]);export{Je as default};
