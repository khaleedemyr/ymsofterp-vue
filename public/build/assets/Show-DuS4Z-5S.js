import{r as m,c as _,a as ve,j as me,A as I,B as s,C as fe,D as t,L as r,E as f,G as S,N as w,H as q,J as be,F as ee,M as te,I as ge,Y as he,l as M,O as D,T as pe,W as C}from"./vendor-vue-g7iCcTkf.js";import{A as xe}from"./AppLayout-Dr73aeKz.js";import we from"./Form-B_B5AWFk.js";import{S as F}from"./app-CZyV0iGJ.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./ProfileUpdateModal-DbuU0LgT.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const ke={class:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-red-50"},_e={class:"bg-gradient-to-r from-amber-900 via-amber-800 to-amber-900 text-white shadow-2xl"},Ce={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Pe={class:"flex flex-col md:flex-row justify-between items-center gap-4"},Be={class:"flex-1"},je={class:"text-4xl md:text-5xl font-serif font-bold mb-2 tracking-wide"},Ee={key:0,class:"text-amber-100 text-lg font-light"},Se={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Me={class:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl p-6 mb-6 border border-amber-100"},Le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Te={class:"relative"},$e={class:"relative"},Ae=["value"],ze={class:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50 mb-6"},Ie={class:"bg-white/90 backdrop-blur-sm rounded-full shadow-2xl p-3 flex items-center gap-4 border-2 border-amber-200"},De=["disabled"],Fe={class:"text-amber-700 font-semibold min-w-[60px] text-center"},Ue=["disabled"],Ne={key:0,class:"flex justify-center items-center min-h-[600px] mt-20"},We={key:0,class:"book-container relative",style:{perspective:"2500px"}},Oe={class:"flex gap-4 items-center relative"},Ve={class:"page-content"},Xe=["src","alt"],Re={key:1,class:"w-[500px] h-[700px] bg-gradient-to-br from-amber-50 to-amber-100 flex items-center justify-center"},Ye={class:"page-content"},Ge=["src","alt"],He={key:1,class:"w-[500px] h-[700px] bg-gradient-to-br from-amber-50 to-amber-100 flex items-center justify-center"},Je={key:1,class:"book-container-mobile",style:{perspective:"1500px"}},Ke={class:"page-content"},Qe=["src","alt"],Ze={key:1,class:"text-center py-20"},qe={key:2,class:"flex justify-center items-center gap-4 mt-8"},et=["disabled"],tt={class:"bg-white/80 backdrop-blur-sm rounded-full shadow-xl px-6 py-3 border border-amber-100 flex items-center gap-4"},ot={class:"text-amber-700 font-semibold"},lt={class:"flex gap-2 ml-4 pl-4 border-l border-amber-200"},st=["disabled"],rt={key:3,class:"mt-8 bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl p-6 border border-amber-100"},at={class:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4"},nt=["onClick"],it=["src","alt"],dt={class:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs text-center py-1 rounded-b-lg"},ut={class:"absolute top-2 right-2 flex gap-1 z-10"},ct=["onClick"],vt=["onClick"],mt={class:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},ft={__name:"Show",props:{menuBook:Object,pages:Array,categories:Array,subCategories:Array,items:Array,filters:Object},setup(P){var K,Q;const n=P,y=m(((K=n.filters)==null?void 0:K.search)||""),k=m(((Q=n.filters)==null?void 0:Q.category)||""),i=m(1),a=m(0),d=m(!1),u=m(""),B=m(!1),j=m(null),oe=_(()=>B.value&&n.menuBook&&n.menuBook.id),U=m(!1),c=_(()=>{let o=[...n.pages];if(y.value){const e=y.value.toLowerCase();o=o.filter(v=>{var l;return(l=v.items)==null?void 0:l.some(E=>{var x,Z;return((x=E.name)==null?void 0:x.toLowerCase().includes(e))||((Z=E.sku)==null?void 0:Z.toLowerCase().includes(e))})})}return k.value&&(o=o.filter(e=>{var v;return(v=e.categories)==null?void 0:v.some(l=>l.id===parseInt(k.value))})),o.sort((e,v)=>e.page_order-v.page_order)}),L=_(()=>Math.ceil(c.value.length/2)),b=_(()=>{const o=a.value*2;return c.value[o]||null}),g=_(()=>{const o=a.value*2+1;return c.value[o]||null}),h=_(()=>c.value[a.value]||null),T=()=>{U.value=window.innerWidth<768},le=()=>{a.value=0,C.get(`/menu-book/${n.menuBook.id}`,{search:y.value,category:k.value},{preserveState:!0,preserveScroll:!0})},se=()=>{a.value=0,C.get(`/menu-book/${n.menuBook.id}`,{search:y.value,category:k.value},{preserveState:!0,preserveScroll:!0})},N=()=>{i.value<2&&(i.value=Math.min(i.value+.1,2))},W=()=>{i.value>.5&&(i.value=Math.max(i.value-.1,.5))},re=()=>{i.value=1},$=()=>{a.value<L.value-1&&(u.value="right",d.value=!0,setTimeout(()=>{a.value++,d.value=!1,u.value=""},800))},A=()=>{a.value>0&&(u.value="left",d.value=!0,setTimeout(()=>{a.value--,d.value=!1,u.value=""},800))},ae=o=>{const e=Math.floor(o/2);e!==a.value&&(u.value=e>a.value?"right":"left",d.value=!0,setTimeout(()=>{a.value=e,d.value=!1,u.value=""},800))},p=o=>{if(!o)return null;try{return o.startsWith("http://")||o.startsWith("https://")||o.startsWith("/storage/")?o:`/storage/${o}`}catch(e){return console.error("Error processing image:",e),null}},O=()=>{j.value=null,B.value=!0},z=()=>{B.value=!1,j.value=null},V=o=>{j.value=o,B.value=!0},ne=()=>{const o=b.value||g.value||h.value;o&&V(o)},X=o=>{F.fire({title:"Delete Page?",text:`Are you sure you want to delete page ${o.page_order}? This action cannot be undone.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(e=>{e.isConfirmed&&C.delete(`/menu-book/page/${o.id}`,{onSuccess:()=>{F.fire("Deleted!","Page has been deleted.","success"),a.value>=c.value.length-1&&(a.value=Math.max(0,c.value.length-2)),C.reload({only:["pages"]})},onError:()=>{F.fire("Error!","Failed to delete page.","error")}})})},ie=()=>{const o=b.value||g.value||h.value;o&&X(o)},de=()=>{z(),C.reload({only:["pages"]})},ue=()=>{C.visit("/menu-book")},R=o=>{o.key==="ArrowLeft"&&A(),o.key==="ArrowRight"&&$(),(o.key==="+"||o.key==="=")&&N(),o.key==="-"&&W()};let Y=0,G=0;const H=o=>{Y=o.changedTouches[0].screenX},J=o=>{G=o.changedTouches[0].screenX,ce()},ce=()=>{const e=Y-G;Math.abs(e)>50&&(e>0?$():A())};return ve(()=>{T(),window.addEventListener("resize",T),window.addEventListener("keydown",R),window.addEventListener("touchstart",H),window.addEventListener("touchend",J)}),me(()=>{window.removeEventListener("resize",T),window.removeEventListener("keydown",R),window.removeEventListener("touchstart",H),window.removeEventListener("touchend",J)}),(o,e)=>(s(),I(xe,null,{default:fe(()=>{var v;return[t("div",ke,[t("div",_e,[t("div",Ce,[t("div",Pe,[t("div",Be,[t("button",{onClick:ue,class:"mb-4 text-amber-200 hover:text-white transition-colors flex items-center gap-2"},e[6]||(e[6]=[t("i",{class:"fa-solid fa-arrow-left"},null,-1),S(" Back to Menu Books ")])),t("h1",je,[e[7]||(e[7]=t("i",{class:"fa-solid fa-book-open mr-3 text-amber-200"},null,-1)),S(" "+w(P.menuBook.name),1)]),P.menuBook.description?(s(),r("p",Ee,w(P.menuBook.description),1)):f("",!0)]),t("button",{onClick:O,class:"bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-700 hover:to-amber-800 text-white px-6 py-3 rounded-lg shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center gap-2 font-semibold"},e[8]||(e[8]=[t("i",{class:"fa-solid fa-plus"},null,-1),S(" Add Page ")]))])])]),t("div",Se,[t("div",Me,[t("div",Le,[t("div",Te,[e[9]||(e[9]=t("i",{class:"fa-solid fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-amber-600"},null,-1)),q(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>y.value=l),type:"text",placeholder:"Search menu items...",class:"w-full pl-12 pr-4 py-3 rounded-xl border-2 border-amber-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-300 transition-all duration-300 bg-white/90",onInput:le},null,544),[[be,y.value]])]),t("div",$e,[e[11]||(e[11]=t("i",{class:"fa-solid fa-filter absolute left-4 top-1/2 transform -translate-y-1/2 text-amber-600"},null,-1)),q(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>k.value=l),onChange:se,class:"w-full pl-12 pr-4 py-3 rounded-xl border-2 border-amber-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-300 transition-all duration-300 bg-white/90 appearance-none cursor-pointer"},[e[10]||(e[10]=t("option",{value:""},"All Categories",-1)),(s(!0),r(ee,null,te(P.categories,l=>(s(),r("option",{key:l.id,value:l.id},w(l.name),9,Ae))),128))],544),[[ge,k.value]])])])]),t("div",ze,[t("div",Ie,[t("button",{onClick:W,class:"w-10 h-10 rounded-full bg-amber-100 hover:bg-amber-200 text-amber-700 flex items-center justify-center transition-all duration-300 hover:scale-110 disabled:opacity-50 disabled:cursor-not-allowed",disabled:i.value<=.5},e[12]||(e[12]=[t("i",{class:"fa-solid fa-minus"},null,-1)]),8,De),t("span",Fe,w(Math.round(i.value*100))+"%",1),t("button",{onClick:N,class:"w-10 h-10 rounded-full bg-amber-100 hover:bg-amber-200 text-amber-700 flex items-center justify-center transition-all duration-300 hover:scale-110 disabled:opacity-50 disabled:cursor-not-allowed",disabled:i.value>=2},e[13]||(e[13]=[t("i",{class:"fa-solid fa-plus"},null,-1)]),8,Ue),t("button",{onClick:re,class:"w-10 h-10 rounded-full bg-amber-600 hover:bg-amber-700 text-white flex items-center justify-center transition-all duration-300 hover:scale-110 ml-2"},e[14]||(e[14]=[t("i",{class:"fa-solid fa-arrows-rotate"},null,-1)]))])]),c.value.length>0?(s(),r("div",Ne,[t("div",{class:"relative",style:he({transform:`scale(${i.value})`,transformOrigin:"center",transition:"transform 0.3s ease"})},[U.value?(s(),r("div",Je,[t("div",{class:M(["book-page-mobile shadow-2xl rounded-lg overflow-hidden bg-white relative",{flip:d.value}])},[t("div",Ke,[h.value&&p(h.value.image)?(s(),r("img",{key:0,src:p(h.value.image),alt:`Page ${h.value.page_order}`,class:"w-full h-full object-contain",draggable:"false",onError:e[4]||(e[4]=l=>{l.target.style.display="none"})},null,40,Qe)):f("",!0)])],2)])):(s(),r("div",We,[t("div",Oe,[t("div",{class:M(["book-page shadow-2xl rounded-l-lg overflow-hidden bg-white relative",{"flip-left":d.value&&u.value==="left","flip-right-active":d.value&&u.value==="right"}]),style:{"transform-origin":"right center"}},[t("div",Ve,[b.value&&p(b.value.image)?(s(),r("img",{key:0,src:p(b.value.image),alt:`Page ${b.value.page_order}`,class:"w-full h-full object-contain",draggable:"false",onError:e[2]||(e[2]=l=>{l.target.style.display="none"})},null,40,Xe)):(s(),r("div",Re,e[15]||(e[15]=[t("div",{class:"text-center text-amber-400"},[t("i",{class:"fa-solid fa-book-open text-6xl mb-4"}),t("p",{class:"text-xl font-serif"},"Cover")],-1)])))])],2),t("div",{class:M(["book-page shadow-2xl rounded-r-lg overflow-hidden bg-white relative",{"flip-right":d.value&&u.value==="right","flip-left-active":d.value&&u.value==="left"}]),style:{"transform-origin":"left center"}},[t("div",Ye,[g.value&&p(g.value.image)?(s(),r("img",{key:0,src:p(g.value.image),alt:`Page ${g.value.page_order}`,class:"w-full h-full object-contain",draggable:"false",onError:e[3]||(e[3]=l=>{l.target.style.display="none"})},null,40,Ge)):(s(),r("div",He,e[16]||(e[16]=[t("div",{class:"text-center text-amber-400"},[t("i",{class:"fa-solid fa-book-open text-6xl mb-4"}),t("p",{class:"text-xl font-serif"},"End")],-1)])))])],2)])]))],4)])):(s(),r("div",Ze,[t("div",{class:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl p-12 border border-amber-100"},[e[18]||(e[18]=t("i",{class:"fa-solid fa-book-open text-6xl text-amber-300 mb-4"},null,-1)),e[19]||(e[19]=t("h3",{class:"text-2xl font-serif text-amber-800 mb-2"},"No Pages Found",-1)),e[20]||(e[20]=t("p",{class:"text-amber-600 mb-6"},"Start by adding your first menu page",-1)),t("button",{onClick:O,class:"bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-700 hover:to-amber-800 text-white px-6 py-3 rounded-lg shadow-lg transform hover:scale-105 transition-all duration-300"},e[17]||(e[17]=[t("i",{class:"fa-solid fa-plus mr-2"},null,-1),S(" Add First Page ")]))])])),c.value.length>0?(s(),r("div",qe,[t("button",{onClick:A,disabled:a.value===0,class:"w-14 h-14 rounded-full bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-700 hover:to-amber-800 text-white shadow-lg transform hover:scale-110 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 flex items-center justify-center"},e[21]||(e[21]=[t("i",{class:"fa-solid fa-chevron-left text-xl"},null,-1)]),8,et),t("div",tt,[t("span",ot," Page "+w(a.value+1)+" of "+w(L.value),1),t("div",lt,[b.value||g.value||h.value?(s(),r("button",{key:0,onClick:ne,class:"w-10 h-10 rounded-full bg-blue-500 hover:bg-blue-600 text-white shadow-lg transform hover:scale-110 transition-all duration-300 flex items-center justify-center",title:"Edit Current Page"},e[22]||(e[22]=[t("i",{class:"fa-solid fa-edit"},null,-1)]))):f("",!0),b.value||g.value||h.value?(s(),r("button",{key:1,onClick:ie,class:"w-10 h-10 rounded-full bg-red-500 hover:bg-red-600 text-white shadow-lg transform hover:scale-110 transition-all duration-300 flex items-center justify-center",title:"Delete Current Page"},e[23]||(e[23]=[t("i",{class:"fa-solid fa-trash"},null,-1)]))):f("",!0)])]),t("button",{onClick:$,disabled:a.value>=L.value-1,class:"w-14 h-14 rounded-full bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-700 hover:to-amber-800 text-white shadow-lg transform hover:scale-110 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 flex items-center justify-center"},e[24]||(e[24]=[t("i",{class:"fa-solid fa-chevron-right text-xl"},null,-1)]),8,st)])):f("",!0),c.value.length>0?(s(),r("div",rt,[e[27]||(e[27]=t("h3",{class:"text-xl font-serif text-amber-800 mb-4 text-center"},"Page Navigation",-1)),t("div",at,[(s(!0),r(ee,null,te(c.value,(l,E)=>(s(),r("div",{key:l.id,class:M(["relative group",{"ring-4 ring-amber-500 rounded-lg":E===a.value}])},[t("div",{onClick:x=>ae(E),class:"aspect-[3/4] rounded-lg overflow-hidden shadow-md group-hover:shadow-xl transition-all duration-300 transform group-hover:scale-105 bg-white cursor-pointer"},[p(l.image)?(s(),r("img",{key:0,src:p(l.image),alt:`Page ${l.page_order}`,class:"w-full h-full object-cover",onError:e[5]||(e[5]=x=>{x.target.style.display="none"})},null,40,it)):f("",!0)],8,nt),t("div",dt,w(l.page_order),1),t("div",ut,[t("button",{onClick:D(x=>V(l),["stop"]),class:"w-8 h-8 rounded-full bg-blue-500 hover:bg-blue-600 text-white flex items-center justify-center shadow-lg transition-all duration-300 hover:scale-110 opacity-90 hover:opacity-100",title:"Edit Page"},e[25]||(e[25]=[t("i",{class:"fa-solid fa-edit text-xs"},null,-1)]),8,ct),t("button",{onClick:D(x=>X(l),["stop"]),class:"w-8 h-8 rounded-full bg-red-500 hover:bg-red-600 text-white flex items-center justify-center shadow-lg transition-all duration-300 hover:scale-110 opacity-90 hover:opacity-100",title:"Delete Page"},e[26]||(e[26]=[t("i",{class:"fa-solid fa-trash text-xs"},null,-1)]),8,vt)])],2))),128))])])):f("",!0)]),(s(),I(pe,{to:"body"},[oe.value?(s(),r("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:D(z,["self"])},[t("div",mt,[n.menuBook&&n.menuBook.id?(s(),I(we,{key:`form-${n.menuBook.id}-${B.value}-${((v=j.value)==null?void 0:v.id)||"new"}`,menuBookId:n.menuBook.id,items:n.items||[],categories:n.categories||[],subCategories:n.subCategories||[],editingPage:j.value,onClose:z,onSuccess:de},null,8,["menuBookId","items","categories","subCategories","editingPage"])):f("",!0)])])):f("",!0)]))])]}),_:1}))}},Bt=ye(ft,[["__scopeId","data-v-a0e32b4c"]]);export{Bt as default};
