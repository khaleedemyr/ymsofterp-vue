import{r as _,L as l,B as n,D as t,E as w,G as a,N as r,F as f,M as D}from"./vendor-vue-g7iCcTkf.js";import"./vendor-utils-CpgP2uT4.js";const C={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},P={class:"bg-white rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl border border-blue-100 relative"},j={class:"flex justify-between items-center mb-4"},L={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80"},$=["src"],B={class:"mb-4"},F={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},V={class:"mb-4"},E={class:"min-w-full text-sm mb-2"},M={class:"px-2 py-1"},O={class:"px-2 py-1"},S={class:"px-2 py-1"},z={class:"px-2 py-1"},A=["src","onClick"],T=["href"],U={key:1,class:"text-gray-400"},G={key:0},R={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-3"},q=["src","onClick"],H=["href"],J={class:"text-xs text-blue-900 font-semibold mt-1"},K={class:"text-xs text-gray-500"},Q={key:1,class:"text-gray-400 text-sm"},Y={__name:"PaymentDetailModal",props:{po:Object},setup(i){const d=_(!1),u=_("");function b(o){u.value=o,d.value=!0}function I(){d.value=!1,u.value=""}function c(o){if(!o)return"-";const e=new Date(o);return isNaN(e)?"-":e.toLocaleDateString("id-ID")}function x(o){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(o)}function g(o){return/\.(jpg|jpeg|png|gif|webp)$/i.test(o||"")}function m(o){return o?"/storage/"+o.replace(/^\/?/,""):""}function p(o){return o?"/storage/"+o.replace(/^\/?/,""):""}return(o,e)=>{var y,v,h,k;return n(),l("div",C,[t("div",P,[t("div",j,[e[1]||(e[1]=t("h2",{class:"text-xl font-bold text-blue-800"},"Payment & Invoice Details",-1)),t("button",{onClick:e[0]||(e[0]=s=>o.$emit("close")),class:"text-gray-400 hover:text-blue-600 text-2xl"},"×")]),d.value?(n(),l("div",L,[t("div",{class:"absolute top-4 right-8"},[t("button",{onClick:I,class:"text-white text-3xl font-bold"},"×")]),t("img",{src:u.value,class:"max-h-[80vh] max-w-[90vw] rounded shadow-lg border-4 border-white"},null,8,$)])):w("",!0),t("div",B,[t("div",F,[t("div",null,[e[5]||(e[5]=t("h3",{class:"font-semibold text-blue-700 mb-1"},"PO Information",-1)),t("p",null,[e[2]||(e[2]=t("span",{class:"font-bold"},"PO Number:",-1)),a(" "+r(i.po.po_number),1)]),t("p",null,[e[3]||(e[3]=t("span",{class:"font-bold"},"Date:",-1)),a(" "+r(c(i.po.created_at)),1)]),t("p",null,[e[4]||(e[4]=t("span",{class:"font-bold"},"Total Amount:",-1)),a(" "+r(x(i.po.total_amount)),1)])]),t("div",null,[e[10]||(e[10]=t("h3",{class:"font-semibold text-blue-700 mb-1"},"Supplier",-1)),t("p",null,[e[6]||(e[6]=t("span",{class:"font-bold"},"Name:",-1)),a(" "+r((y=i.po.supplier)==null?void 0:y.name),1)]),t("p",null,[e[7]||(e[7]=t("span",{class:"font-bold"},"Contact:",-1)),a(" "+r((v=i.po.supplier)==null?void 0:v.contact_person),1)]),t("p",null,[e[8]||(e[8]=t("span",{class:"font-bold"},"Phone:",-1)),a(" "+r((h=i.po.supplier)==null?void 0:h.phone),1)]),t("p",null,[e[9]||(e[9]=t("span",{class:"font-bold"},"Email:",-1)),a(" "+r((k=i.po.supplier)==null?void 0:k.email),1)])])])]),t("div",V,[e[13]||(e[13]=t("h3",{class:"font-semibold text-blue-700 mb-2"},"Payments",-1)),t("table",E,[e[12]||(e[12]=t("thead",null,[t("tr",{class:"bg-blue-50"},[t("th",{class:"px-2 py-1 text-left"},"Amount"),t("th",{class:"px-2 py-1 text-left"},"Date"),t("th",{class:"px-2 py-1 text-left"},"Method"),t("th",{class:"px-2 py-1 text-left"},"Proof")])],-1)),t("tbody",null,[(n(!0),l(f,null,D(i.po.payments,s=>(n(),l("tr",{key:s.id},[t("td",M,r(x(s.payment_amount)),1),t("td",O,r(c(s.payment_date)),1),t("td",S,r(s.payment_method),1),t("td",z,[g(s.payment_proof_path)?(n(),l("img",{key:0,src:p(s.payment_proof_path),class:"w-14 h-14 object-cover rounded cursor-pointer border hover:scale-105 transition",onClick:N=>b(p(s.payment_proof_path)),alt:"Proof"},null,8,A)):(n(),l(f,{key:1},[s.payment_proof_path?(n(),l("a",{key:0,href:p(s.payment_proof_path),target:"_blank",class:"text-blue-600 underline"},"View",8,T)):(n(),l("span",U,"-"))],64))])]))),128)),!i.po.payments||!i.po.payments.length?(n(),l("tr",G,e[11]||(e[11]=[t("td",{colspan:"4",class:"text-center text-gray-400 py-2"},"No payments",-1)]))):w("",!0)])])]),t("div",null,[e[15]||(e[15]=t("h3",{class:"font-semibold text-blue-700 mb-2"},"Invoices",-1)),i.po.invoices&&i.po.invoices.length?(n(),l("div",R,[(n(!0),l(f,null,D(i.po.invoices,s=>(n(),l("div",{key:s.id,class:"border rounded-lg p-2 flex flex-col items-center bg-blue-50"},[g(s.invoice_file_path)?(n(),l("img",{key:0,src:m(s.invoice_file_path),class:"w-32 h-24 object-cover rounded mb-1 cursor-pointer hover:scale-105 transition",onClick:N=>b(m(s.invoice_file_path)),alt:"Invoice"},null,8,q)):(n(),l("a",{key:1,href:m(s.invoice_file_path),target:"_blank",class:"text-blue-600 underline flex flex-col items-center"},e[14]||(e[14]=[t("i",{class:"fas fa-file-alt text-2xl mb-1"},null,-1),t("span",null,"File",-1)]),8,H)),t("div",J,r(s.invoice_number),1),t("div",K,r(c(s.invoice_date)),1)]))),128))])):(n(),l("div",Q,"No invoices"))])])])}}};export{Y as default};
