const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EodModal-_gQS0K-D.js","assets/vendor-vue-g7iCcTkf.js","assets/vendor-utils-CpgP2uT4.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/EodModal-Bh1UfGYi.css","assets/OrderDetailModal-D3dfejie.js","assets/OrderDetailModal-0qWGXGDC.css","assets/PerModeModal-BPEXVi83.js","assets/PerModeModal-VW-mqZy6.css","assets/RevenueReportModal-B0FuBXBB.js","assets/vue-easy-lightbox.esm.min-H9agbAmC.js","assets/RevenueReportModal-DcoRZWI0.css"])))=>i.map(i=>d[i]);
import{_ as g}from"./app-a4QKyjuP.js";import{k as E,r as m,$ as at,c as dt,a as nt,L as r,B as d,D as t,E as c,G as U,N as l,Q as y,H as P,I as it,F as f,M as S,J as j,A as h,ab as k,l as rt}from"./vendor-vue-g7iCcTkf.js";import{A as ut}from"./AppLayout-C3aoO-bU.js";import{a as $}from"./vendor-utils-CpgP2uT4.js";import{_ as mt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-charts-CuqD4wLC.js";import"./ProfileUpdateModal-CoSAPJ9h.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const ct={class:"min-h-screen w-full bg-gray-50 p-0"},pt={class:"w-full bg-white shadow-2xl rounded-2xl p-8"},yt={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-6 mb-8"},_t={class:"summary-card gradient-blue"},xt={class:"summary-value"},vt={class:"summary-card gradient-darkblue"},bt={class:"summary-value"},gt={class:"summary-card gradient-green"},ft={class:"summary-value"},ht={class:"summary-card gradient-yellow"},kt={class:"summary-value"},wt={class:"summary-card gradient-pink"},Ct={class:"summary-value"},Dt={class:"summary-card gradient-purple"},Tt={class:"summary-value"},Rt={key:0,class:"summary-card gradient-orange"},Ot={class:"summary-value"},Mt={key:1,class:"summary-card gradient-indigo"},Et={class:"summary-value"},Pt={class:"summary-card gradient-gray"},St={class:"summary-value"},$t={class:"summary-card gradient-lightgray"},At={class:"summary-value"},Bt={class:"summary-card gradient-white border-t-4 border-blue-600"},It={class:"summary-value text-lg"},Nt={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8 items-end"},Vt=["disabled"],Lt=["value"],qt={key:0,class:"text-center py-10"},Ut={key:1},jt={class:"overflow-x-auto mb-8"},Gt={class:"min-w-full rounded-2xl overflow-hidden shadow-lg"},Ft={class:"bg-[#2563eb] text-white font-bold text-base"},Ht={key:0,class:"px-6 py-3 text-right"},Qt={key:1,class:"px-6 py-3 text-right"},zt={class:"bg-white border-b last:border-b-0 hover:bg-blue-50 transition"},Jt={class:"px-2 py-3 text-center"},Wt=["onClick"],Kt={class:"px-6 py-3 font-semibold text-gray-800"},Xt={class:"px-6 py-3 text-right font-semibold"},Yt={class:"px-6 py-3 text-right font-semibold"},Zt={class:"px-6 py-3 text-right font-semibold"},ts={class:"px-6 py-3 text-right font-semibold"},ss={class:"px-6 py-3 text-right font-semibold"},es={key:0,class:"px-6 py-3 text-right font-semibold"},os={key:1,class:"px-6 py-3 text-right font-semibold"},ls={class:"px-6 py-3 text-right font-semibold"},as={class:"px-6 py-3 text-right font-semibold"},ds={class:"px-6 py-3 text-right font-semibold"},ns={class:"px-6 py-3 text-right font-semibold"},is={class:"px-6 py-3 text-center"},rs={class:"flex flex-row justify-end items-center gap-2"},us=["onClick"],ms=["onClick"],cs=["onClick"],ps=["onClick"],ys={key:0},_s=["colspan"],xs={key:0},vs={class:"font-bold mb-2 text-gray-700"},bs={class:"overflow-x-auto"},gs={class:"min-w-full text-sm rounded shadow"},fs={class:"px-3 py-2"},hs={class:"px-3 py-2"},ks={class:"px-3 py-2"},ws={class:"px-3 py-2"},Cs={class:"px-3 py-2 text-right"},Ds={class:"px-3 py-2 text-right"},Ts={class:"px-3 py-2 text-right"},Rs={class:"px-3 py-2 text-right"},Os={class:"px-3 py-2 text-right"},Ms={class:"px-3 py-2 text-right"},Es={class:"px-3 py-2"},Ps={class:"px-3 py-2 text-center"},Ss=["onClick"],$s={key:1,class:"text-gray-400 italic"},As=Object.assign({layout:ut},{__name:"ReportSalesSimple",setup(Bs){var q;const p=E({outlet:"",date_from:"",date_to:""}),w=m([]),i=E({summary:{total_sales:0,total_order:0,total_pax:0},per_day:{},orders:[]}),C=m(!1),A=m(!1),x=m(!1),B=m({}),v=E({}),D=m(!1),I=m({}),_=((q=at().props.auth)==null?void 0:q.user)||{},T=m(!1),R=m(!1),O=m(null),M=m(!1),N=m([]),V=m(""),G=dt(()=>{const e=i.summary.grand_total||0,s=i.summary.total_pax||0;return s>0?Math.round(e/s):0});function F(e,s){return s>0?Math.round(e/s):0}function H(e){v[e]=!v[e]}function b(e){return(i.orders||[]).filter(s=>s.created_at&&s.created_at.startsWith(e))}const L=async()=>{const e=await $.get("/api/outlets/report");w.value=e.data.outlets||[]},Q=async()=>{const e=await $.get("/api/my-outlet-qr");e.data.qr_code&&(p.outlet=e.data.qr_code)},z=async()=>{C.value=!0;try{const e=await $.get("/api/report/sales-simple",{params:p});Object.assign(i.summary,e.data.summary||{}),i.per_day=e.data.per_day||{},i.orders=e.data.orders||[],A.value=!0}finally{C.value=!1}};nt(async()=>{_.id_outlet==1?(T.value=!0,await L()):(T.value=!1,await Q(),await L())});const a=e=>(typeof e!="number"&&(e=Number(e)||0),e.toLocaleString("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}));function J(e){const s=Number(e.discount)||0,o=Number(e.manual_discount_amount)||0;return console.log("DEBUG DISCOUNT:",{orderId:e.id,nomor:e.nomor,discount:e.discount,manualDiscount:e.manual_discount_amount,discountParsed:s,manualDiscountParsed:o}),s>0&&o>0?Math.max(s,o):s+o}function W(e,s){var o;B.value={...e,tanggal:s,nama_outlet:((o=i.orders[0])==null?void 0:o.nama_outlet)||""},x.value=!0}function K(e){I.value=e,D.value=!0}function X(e){O.value=e,R.value=!0}function Y(e){V.value=e,N.value=b(e),M.value=!0}function Z(e){const s={outlet:p.outlet,date:e,date_from:p.date_from,date_to:p.date_to},o=Object.entries(s).map(([u,n])=>`${u}=${encodeURIComponent(n||"")}`).join("&");window.open(`/report/sales-simple/export-order-detail?${o}`,"_blank")}const tt=k(()=>g(()=>import("./EodModal-_gQS0K-D.js"),__vite__mapDeps([0,1,2,3,4]))),st=k(()=>g(()=>import("./OrderDetailModal-D3dfejie.js"),__vite__mapDeps([5,1,2,3,6]))),et=k(()=>g(()=>import("./PerModeModal-BPEXVi83.js"),__vite__mapDeps([7,1,2,3,8]))),ot=k(()=>g(()=>import("./RevenueReportModal-B0FuBXBB.js"),__vite__mapDeps([9,1,2,10,3,11])));return(e,s)=>(d(),r("div",ct,[t("div",pt,[s[42]||(s[42]=t("h1",{class:"text-2xl font-bold mb-6 text-blue-800 flex items-center gap-2"},[t("i",{class:"fa-solid fa-chart-line"}),U(" Sales Report ")],-1)),t("div",yt,[t("div",_t,[s[7]||(s[7]=t("div",{class:"summary-label"},"Total Sales",-1)),t("div",xt,l(a(i.summary.total_sales)),1)]),t("div",vt,[s[8]||(s[8]=t("div",{class:"summary-label"},"Grand Total",-1)),t("div",bt,l(a(i.summary.grand_total)),1)]),t("div",gt,[s[9]||(s[9]=t("div",{class:"summary-label"},"Total Order",-1)),t("div",ft,l(i.summary.total_order),1)]),t("div",ht,[s[10]||(s[10]=t("div",{class:"summary-label"},"Total Pax",-1)),t("div",kt,l(i.summary.total_pax),1)]),t("div",wt,[s[11]||(s[11]=t("div",{class:"summary-label"},"Discount",-1)),t("div",Ct,l(a(i.summary.total_discount)),1)]),t("div",Dt,[s[12]||(s[12]=t("div",{class:"summary-label"},"Cashback/Redeem",-1)),t("div",Tt,l(a(i.summary.total_cashback)),1)]),y(_).id_outlet==1?(d(),r("div",Rt,[s[13]||(s[13]=t("div",{class:"summary-label"},"Service Charge",-1)),t("div",Ot,l(a(i.summary.total_service)),1)])):c("",!0),y(_).id_outlet==1?(d(),r("div",Mt,[s[14]||(s[14]=t("div",{class:"summary-label"},"PB1",-1)),t("div",Et,l(a(i.summary.total_pb1)),1)])):c("",!0),t("div",Pt,[s[15]||(s[15]=t("div",{class:"summary-label"},"Commfee",-1)),t("div",St,l(a(i.summary.total_commfee)),1)]),t("div",$t,[s[16]||(s[16]=t("div",{class:"summary-label"},"Rounding",-1)),t("div",At,l(a(i.summary.total_rounding)),1)]),t("div",Bt,[s[17]||(s[17]=t("div",{class:"summary-label text-xs font-semibold mb-1"},"Avg Check",-1)),t("div",It,l(a(G.value)),1)])]),t("div",Nt,[t("div",null,[s[19]||(s[19]=t("label",{class:"block text-sm font-medium mb-1"},"Outlet",-1)),P(t("select",{"onUpdate:modelValue":s[0]||(s[0]=o=>p.outlet=o),disabled:!T.value,class:"block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 px-3 py-2",required:""},[s[18]||(s[18]=t("option",{value:""},"Pilih Outlet",-1)),(d(!0),r(f,null,S(w.value,o=>(d(),r("option",{key:o.id,value:o.qr_code},l(o.name),9,Lt))),128))],8,Vt),[[it,p.outlet]])]),t("div",null,[s[20]||(s[20]=t("label",{class:"block text-sm font-medium mb-1"},"Tanggal From",-1)),P(t("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=o=>p.date_from=o),class:"block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 px-3 py-2"},null,512),[[j,p.date_from]])]),t("div",null,[s[21]||(s[21]=t("label",{class:"block text-sm font-medium mb-1"},"Tanggal To",-1)),P(t("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=o=>p.date_to=o),class:"block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 px-3 py-2"},null,512),[[j,p.date_to]])]),t("div",{class:"flex items-end h-full"},[t("button",{onClick:z,class:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700 transition"},"Tampilkan")])]),C.value?(d(),r("div",qt,s[22]||(s[22]=[t("span",{class:"text-gray-500"},"Loading...",-1)]))):A.value?(d(),r("div",Ut,[s[41]||(s[41]=t("h2",{class:"font-semibold mb-2 text-lg text-gray-700"},"Breakdown per Hari",-1)),t("div",jt,[t("table",Gt,[t("thead",null,[t("tr",Ft,[s[23]||(s[23]=t("th",{class:"px-6 py-3 text-left"},null,-1)),s[24]||(s[24]=t("th",{class:"px-6 py-3 text-left"},"Tanggal",-1)),s[25]||(s[25]=t("th",{class:"px-6 py-3 text-right"},"Total Order",-1)),s[26]||(s[26]=t("th",{class:"px-6 py-3 text-right"},"Total Pax",-1)),s[27]||(s[27]=t("th",{class:"px-6 py-3 text-right"},"Avg Check",-1)),s[28]||(s[28]=t("th",{class:"px-6 py-3 text-right"},"Discount",-1)),s[29]||(s[29]=t("th",{class:"px-6 py-3 text-right"},"Cashback/Redeem",-1)),y(_).id_outlet==1?(d(),r("th",Ht,"Service")):c("",!0),y(_).id_outlet==1?(d(),r("th",Qt,"PB1")):c("",!0),s[30]||(s[30]=t("th",{class:"px-6 py-3 text-right"},"Commfee",-1)),s[31]||(s[31]=t("th",{class:"px-6 py-3 text-right"},"Rounding",-1)),s[32]||(s[32]=t("th",{class:"px-6 py-3 text-right"},"Total Sales",-1)),s[33]||(s[33]=t("th",{class:"px-6 py-3 text-right"},"Grand Total",-1)),s[34]||(s[34]=t("th",{class:"px-6 py-3 text-center"},"EOD",-1))])]),t("tbody",null,[(d(!0),r(f,null,S(i.per_day,(o,u)=>(d(),r(f,{key:u},[t("tr",zt,[t("td",Jt,[t("button",{onClick:n=>H(u),class:"focus:outline-none"},[t("i",{class:rt(v[u]?"fa-solid fa-chevron-down":"fa-solid fa-chevron-right")},null,2)],8,Wt)]),t("td",Kt,l(u),1),t("td",Xt,l(o.total_order),1),t("td",Yt,l(o.total_pax),1),t("td",Zt,l(a(o.avg_check??F(o.grand_total,o.total_pax))),1),t("td",ts,l(a(o.total_discount)),1),t("td",ss,l(a(o.total_cashback)),1),y(_).id_outlet==1?(d(),r("td",es,l(a(o.total_service)),1)):c("",!0),y(_).id_outlet==1?(d(),r("td",os,l(a(o.total_pb1)),1)):c("",!0),t("td",ls,l(a(o.total_commfee)),1),t("td",as,l(a(o.total_rounding)),1),t("td",ds,l(a(o.total_sales)),1),t("td",ns,l(a(o.grand_total)),1),t("td",is,[t("div",rs,[t("button",{onClick:n=>W(o,u),title:"EOD",class:"bg-blue-600 text-white p-2 rounded-lg shadow hover:bg-blue-700 transition font-bold text-sm"},s[35]||(s[35]=[t("i",{class:"fa-solid fa-file-invoice"},null,-1)]),8,us),t("button",{onClick:n=>Y(u),title:"Revenue Report",class:"bg-orange-500 text-white p-2 rounded-lg shadow hover:bg-orange-600 transition font-bold text-sm"},s[36]||(s[36]=[t("i",{class:"fa-solid fa-coins"},null,-1)]),8,ms),t("button",{onClick:n=>X(u),title:"Mode",class:"bg-green-600 text-white p-2 rounded-lg shadow hover:bg-green-700 transition font-bold text-sm"},s[37]||(s[37]=[t("i",{class:"fa-solid fa-layer-group"},null,-1)]),8,cs),t("button",{onClick:n=>Z(u),title:"Export",class:"bg-yellow-500 text-white p-2 rounded-lg shadow hover:bg-yellow-600 transition font-bold text-sm"},s[38]||(s[38]=[t("i",{class:"fa-solid fa-file-excel"},null,-1)]),8,ps)])])]),v[u]?(d(),r("tr",ys,[t("td",{colspan:y(_).id_outlet==1?14:12,class:"bg-blue-50 px-8 py-4"},[b(u).length?(d(),r("div",xs,[t("div",vs,"Detail Order ("+l(u)+")",1),t("div",bs,[t("table",gs,[s[40]||(s[40]=t("thead",null,[t("tr",{class:"bg-blue-200 text-blue-900"},[t("th",{class:"px-3 py-2"},"No"),t("th",{class:"px-3 py-2"},"Nomor Order"),t("th",{class:"px-3 py-2"},"Table"),t("th",{class:"px-3 py-2"},"Pax"),t("th",{class:"px-3 py-2"},"Total"),t("th",{class:"px-3 py-2"},"Discount"),t("th",{class:"px-3 py-2"},"Cashback"),t("th",{class:"px-3 py-2"},"Service"),t("th",{class:"px-3 py-2"},"PB1"),t("th",{class:"px-3 py-2"},"Grand Total"),t("th",{class:"px-3 py-2"},"Status"),t("th",{class:"px-3 py-2"},"Detail")])],-1)),t("tbody",null,[(d(!0),r(f,null,S(b(u),(n,lt)=>(d(),r("tr",{key:n.id,class:"bg-white border-b last:border-b-0 hover:bg-blue-100"},[t("td",fs,l(lt+1),1),t("td",hs,l(n.nomor),1),t("td",ks,l(n.table),1),t("td",ws,l(n.pax),1),t("td",Cs,l(a(n.total)),1),t("td",Ds,l(a(J(n))),1),t("td",Ts,l(a(n.cashback)),1),t("td",Rs,l(a(n.service)),1),t("td",Os,l(a(n.pb1)),1),t("td",Ms,l(a(n.grand_total)),1),t("td",Es,l(n.status),1),t("td",Ps,[t("button",{onClick:Is=>K(n),class:"bg-blue-500 text-white px-3 py-1 rounded shadow hover:bg-blue-700 transition text-xs font-bold"},s[39]||(s[39]=[t("i",{class:"fa-solid fa-eye"},null,-1),U(" Detail ")]),8,Ss)])]))),128))])])])])):(d(),r("div",$s,"Tidak ada order pada hari ini."))],8,_s)])):c("",!0)],64))),128))])])]),x.value?(d(),h(y(tt),{key:0,summary:B.value,show:x.value,onClose:s[3]||(s[3]=o=>x.value=!1)},null,8,["summary","show"])):c("",!0),D.value?(d(),h(y(st),{key:1,order:I.value,onClose:s[4]||(s[4]=o=>D.value=!1)},null,8,["order"])):c("",!0),R.value?(d(),h(y(et),{key:2,tanggal:O.value,orders:b(O.value),onClose:s[5]||(s[5]=o=>R.value=!1)},null,8,["tanggal","orders"])):c("",!0),M.value?(d(),h(y(ot),{key:3,tanggal:V.value,orders:N.value,outlets:w.value,onClose:s[6]||(s[6]=o=>M.value=!1)},null,8,["tanggal","orders","outlets"])):c("",!0)])):c("",!0)])]))}}),zs=mt(As,[["__scopeId","data-v-9e9c041e"]]);export{zs as default};
