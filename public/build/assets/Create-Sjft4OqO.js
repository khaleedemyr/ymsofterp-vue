import{r as f,w as g,A as S,B as a,C as q,D as t,G as k,O as V,L as o,E as B,H as i,I as r,J as x,F as d,M as p,N as m,W as w}from"./vendor-vue-g7iCcTkf.js";import{A as C}from"./AppLayout-DUleG9B8.js";import{a as I}from"./vendor-utils-CpgP2uT4.js";import{S as y}from"./app-P14ApjUf.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-BD6EyRcy.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const T={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 md:px-8"},W={class:"w-full max-w-lg bg-white rounded-2xl shadow-2xl p-8"},D=["value"],M={key:0},P=["value"],G=["value"],N={class:"flex gap-2"},h={class:"flex-1"},j={style:{"min-width":"120px"}},E=["value"],F={class:"flex justify-end gap-2 mt-8"},L=["disabled"],O={key:0},R={key:1},H={__name:"Create",props:{warehouses:Array,items:Array,rukos:Array},setup(_){const v=_,s=f({type:"",date:new Date().toISOString().slice(0,10),warehouse_id:"",ruko_id:"",item_id:"",qty:"",unit_id:"",notes:""}),b=f([]),n=f(!1);g(()=>s.value.item_id,async u=>{if(u){const e=await I.get(`/internal-use-waste/item/${u}/units`);b.value=e.data.units,s.value.unit_id=""}else b.value=[],s.value.unit_id=""}),g(()=>s.value.type,u=>{u!=="internal_use"&&(s.value.ruko_id="")});async function c(){n.value=!0;try{await w.post(route("internal-use-waste.store"),s.value,{onSuccess:()=>{y.fire({icon:"success",title:"Berhasil",text:"Data berhasil disimpan!",timer:1500,showConfirmButton:!1}),n.value=!1},onError:u=>{y.fire({icon:"error",title:"Gagal",text:"Gagal menyimpan data. Silakan cek input Anda."}),n.value=!1},onFinish:()=>{n.value=!1}})}catch{n.value=!1,y.fire({icon:"error",title:"Gagal",text:"Terjadi kesalahan sistem."})}}function U(){w.visit(route("internal-use-waste.index"))}return(u,e)=>(a(),S(C,null,{default:q(()=>[t("div",T,[t("div",W,[e[22]||(e[22]=t("h1",{class:"text-2xl font-bold mb-8 flex items-center gap-2 text-green-700"},[t("i",{class:"fa-solid fa-recycle text-green-500"}),k(" Input Internal Use & Waste ")],-1)),t("form",{onSubmit:V(c,["prevent"]),class:"space-y-5"},[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-xs font-bold text-gray-600 mb-1"},"Tipe",-1)),i(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.type=l),class:"input input-bordered w-full",required:""},e[8]||(e[8]=[t("option",{value:""},"Pilih Tipe",-1),t("option",{value:"internal_use"},"Internal Use",-1),t("option",{value:"spoil"},"Spoil",-1),t("option",{value:"waste"},"Waste",-1)]),512),[[r,s.value.type]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-xs font-bold text-gray-600 mb-1"},"Tanggal",-1)),i(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=l=>s.value.date=l),class:"input input-bordered w-full",required:""},null,512),[[x,s.value.date]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-xs font-bold text-gray-600 mb-1"},"Warehouse",-1)),i(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.warehouse_id=l),class:"input input-bordered w-full",required:""},[e[11]||(e[11]=t("option",{value:""},"Pilih Warehouse",-1)),(a(!0),o(d,null,p(v.warehouses,l=>(a(),o("option",{key:l.id,value:l.id},m(l.name),9,D))),128))],512),[[r,s.value.warehouse_id]])]),s.value.type==="internal_use"?(a(),o("div",M,[e[14]||(e[14]=t("label",{class:"block text-xs font-bold text-gray-600 mb-1"},"Ruko",-1)),i(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.ruko_id=l),class:"input input-bordered w-full",required:""},[e[13]||(e[13]=t("option",{value:""},"Pilih Ruko",-1)),(a(!0),o(d,null,p(v.rukos,l=>(a(),o("option",{key:l.id_ruko,value:l.id_ruko},m(l.nama_ruko),9,P))),128))],512),[[r,s.value.ruko_id]])])):B("",!0),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-xs font-bold text-gray-600 mb-1"},"Item",-1)),i(t("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.item_id=l),class:"input input-bordered w-full",required:""},[e[15]||(e[15]=t("option",{value:""},"Pilih Item",-1)),(a(!0),o(d,null,p(v.items,l=>(a(),o("option",{key:l.id,value:l.id},m(l.name),9,G))),128))],512),[[r,s.value.item_id]])]),t("div",N,[t("div",h,[e[17]||(e[17]=t("label",{class:"block text-xs font-bold text-gray-600 mb-1"},"Qty",-1)),i(t("input",{type:"number",min:"0","onUpdate:modelValue":e[5]||(e[5]=l=>s.value.qty=l),class:"input input-bordered w-full",required:""},null,512),[[x,s.value.qty,void 0,{number:!0}]])]),t("div",j,[e[19]||(e[19]=t("label",{class:"block text-xs font-bold text-gray-600 mb-1"},"Unit",-1)),i(t("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>s.value.unit_id=l),class:"input input-bordered w-full",required:""},[e[18]||(e[18]=t("option",{value:""},"Pilih Unit",-1)),(a(!0),o(d,null,p(b.value,l=>(a(),o("option",{key:l.id,value:l.id},m(l.name),9,E))),128))],512),[[r,s.value.unit_id]])])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-xs font-bold text-gray-600 mb-1"},"Catatan",-1)),i(t("textarea",{"onUpdate:modelValue":e[7]||(e[7]=l=>s.value.notes=l),class:"input input-bordered w-full",rows:"2",placeholder:"Catatan tambahan"},null,512),[[x,s.value.notes]])]),t("div",F,[t("button",{type:"button",class:"btn btn-ghost px-6 py-2 rounded-lg",onClick:U},"Batal"),t("button",{type:"submit",class:"btn bg-gradient-to-r from-green-500 to-green-700 text-white px-8 py-2 rounded-lg font-bold shadow hover:shadow-xl transition-all",disabled:n.value},[n.value?(a(),o("span",O,e[21]||(e[21]=[t("i",{class:"fa fa-spinner fa-spin"},null,-1),k(" Menyimpan... ")]))):(a(),o("span",R," Simpan "))],8,L)])],32)])])]),_:1}))}},le=A(H,[["__scopeId","data-v-3594ac1b"]]);export{le as default};
