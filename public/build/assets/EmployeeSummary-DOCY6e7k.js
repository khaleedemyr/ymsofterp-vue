import{r as b,c as M,A as U,B as n,C as P,D as t,L as r,E as c,N as l,H as O,F as p,M as m,I as D,Q as W,G as f,l as y,W as Y}from"./vendor-vue-g7iCcTkf.js";import{A as $}from"./AppLayout-CCl6N_RX.js";import{S as g}from"./app-DvUgkxHf.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./ProfileUpdateModal-oDgFzWKX.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const G={class:"w-full px-2 md:px-4 py-8"},Q={key:0,class:"text-sm text-gray-500 mb-6"},q={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},X={class:"bg-blue-50 p-4 rounded-lg border"},Z={class:"text-2xl font-bold text-blue-800"},tt={class:"bg-green-50 p-4 rounded-lg border"},et={class:"text-2xl font-bold text-green-800"},st={class:"bg-orange-50 p-4 rounded-lg border"},ot={class:"text-2xl font-bold text-orange-800"},lt={class:"bg-purple-50 p-4 rounded-lg border"},at={class:"text-2xl font-bold text-purple-800"},nt={class:"bg-white rounded-2xl shadow-lg p-6 mb-6"},rt={class:"flex flex-col md:flex-row md:items-end gap-4"},dt={class:"flex-1 min-w-[180px]"},it=["disabled"],ut=["value"],xt={class:"flex-1 min-w-[180px]"},pt=["value"],mt={class:"flex-1 min-w-[120px]"},ft=["value"],yt={class:"flex-1 min-w-[100px]"},ct=["value"],gt={class:"bg-white rounded-2xl shadow-lg overflow-hidden"},_t={class:"px-6 py-4 border-b border-gray-200"},bt={class:"flex justify-between items-center"},vt={class:"text-sm text-gray-500"},ht={class:"overflow-x-auto"},kt={class:"w-full"},wt={class:"bg-blue-600 text-white"},Tt={class:"px-4 py-3 text-sm text-gray-900 font-medium"},Ot={class:"px-4 py-3 text-sm text-gray-600 font-mono"},Dt={class:"px-4 py-3 text-sm"},St={class:"text-gray-900 font-semibold"},jt={class:"text-gray-500 text-xs mt-1"},Ct={class:"px-4 py-3 text-sm text-center font-mono text-blue-600 font-semibold"},Et={class:"px-4 py-3 text-sm text-center font-mono text-gray-600"},Lt={class:"px-4 py-3 text-sm text-center"},At={class:"font-mono text-gray-400"},Bt={class:"font-mono text-green-600 font-semibold text-xs"},Kt={class:"px-4 py-3 text-sm text-center font-mono text-orange-600"},Mt={class:"px-4 py-3 text-sm text-center font-mono text-red-700"},Nt={class:"px-4 py-3 text-sm text-center font-mono text-green-600"},Rt={class:"px-4 py-3 text-sm text-center font-mono"},Ft={class:"px-4 py-3 text-sm text-center font-mono text-blue-600 font-semibold"},Ht={class:"px-4 py-3 text-center"},It=["onClick"],Vt={key:0,class:"bg-gray-50"},Jt=["colspan"],Ut={class:"bg-white rounded-lg shadow-sm border"},Pt={class:"px-4 py-3 border-b border-gray-200"},Wt={class:"text-lg font-semibold text-gray-800"},Yt={class:"text-sm text-gray-600"},$t={class:"font-bold text-green-600"},zt={class:"overflow-x-auto"},Gt={class:"w-full"},Qt={class:"px-3 py-2 text-sm text-gray-900"},qt={class:"px-3 py-2 text-sm text-gray-600 font-mono"},Xt={class:"px-3 py-2 text-sm text-gray-600 font-mono"},Zt={class:"px-3 py-2 text-sm text-center font-mono"},te={class:"px-3 py-2 text-sm text-center font-mono"},ee={key:0,class:"flex flex-col"},se={class:"text-xs text-purple-600",title:"Extra Off Overtime: {{ attendance.extra_off_overtime }} jam"},oe={class:"px-3 py-2 text-center"},le={key:0,class:"bg-orange-100 text-orange-800 px-2 py-1 rounded text-xs font-medium"},ae={key:1,class:"text-gray-400 text-xs"},ne={class:"px-3 py-2 text-center"},re={key:0,class:"bg-gray-100 text-gray-600 px-2 py-1 rounded text-xs"},de={key:1,class:"bg-purple-100 text-purple-600 px-2 py-1 rounded text-xs"},ie={key:2,class:"bg-green-100 text-green-600 px-2 py-1 rounded text-xs"},ue={class:"px-3 py-2 text-sm text-gray-600"},xe={key:0,class:"text-xs"},pe={key:1,class:"text-gray-400 text-xs"},me={key:0},fe={key:0},ye=["colspan"],ce={key:2,class:"mt-6"},ge={class:"bg-gray-100 rounded-xl p-4"},_e={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},be={class:"font-bold text-blue-600"},ve={class:"font-bold text-blue-600"},he={class:"font-bold text-gray-600"},ke={class:"font-bold text-gray-400"},we={class:"font-bold text-green-600 ml-2"},Te={class:"font-bold text-purple-600"},Oe={class:"font-bold text-red-600"},De={class:"font-bold text-red-700"},Se={class:"font-bold text-red-600"},je={class:"font-bold text-blue-600"},Ce={__name:"EmployeeSummary",props:{rows:Array,outlets:Array,divisions:Array,leaveTypes:Array,filter:Object,period:Object,summary:Object,user:Object},setup(u){var L,A,B;const v=b(new Set),a=u,h=b((()=>{var o,e;return(o=a.user)!=null&&o.id_outlet&&a.user.id_outlet!==1?a.user.id_outlet.toString():((e=a.filter)==null?void 0:e.outlet_id)||""})()),k=b(((L=a.filter)==null?void 0:L.division_id)||""),w=b(((A=a.filter)==null?void 0:A.bulan)||new Date().getMonth()+1),T=b(((B=a.filter)==null?void 0:B.tahun)||new Date().getFullYear()),N=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],R=Array.from({length:5},(o,e)=>new Date().getFullYear()-e),j=M(()=>{var o,e;return(o=a.user)!=null&&o.id_outlet&&a.user.id_outlet!==1?((e=a.outlets)==null?void 0:e.filter(s=>s.id==a.user.id_outlet))||[]:a.outlets||[]});function F(){g.fire({title:"Loading...",text:"Memproses data absensi karyawan",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{g.showLoading()}}),Y.get("/attendance-report/employee-summary",{outlet_id:h.value||"",division_id:k.value||"",bulan:w.value,tahun:T.value},{preserveState:!0,replace:!0,onFinish:()=>{g.close()}})}function H(){g.fire({title:"Exporting...",text:"Menyiapkan file Excel",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{g.showLoading()}});const o=new URLSearchParams({outlet_id:h.value||"",division_id:k.value||"",bulan:w.value,tahun:T.value}),e=document.createElement("a");e.href=`/attendance-report/employee-summary/export?${o.toString()}`,e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),setTimeout(()=>{g.close()},2e3)}const x=M(()=>!a.rows||a.rows.length===0?null:{total_hari_kerja:a.rows.reduce((o,e)=>o+(e.hari_kerja||0),0),total_off_days:a.rows.reduce((o,e)=>o+(e.off_days||0),0),total_ph_days:a.rows.reduce((o,e)=>o+(e.ph_days||0),0),total_ph_bonus:a.rows.reduce((o,e)=>o+(e.ph_bonus||0),0),total_cuti_days:a.rows.reduce((o,e)=>o+(e.cuti_days||0),0),total_extra_off_days:a.rows.reduce((o,e)=>o+(e.extra_off_days||0),0),total_sakit_days:a.rows.reduce((o,e)=>o+(e.sakit_days||0),0),total_alpa_days:a.rows.reduce((o,e)=>o+(e.alpa_days||0),0),total_ot_full_days:a.rows.reduce((o,e)=>o+(e.ot_full_days||0),0),total_telat:a.rows.reduce((o,e)=>o+(e.total_telat||0),0),total_days:a.rows.reduce((o,e)=>o+(e.total_days||0),0)});function i(o){return o?o.toLocaleString("id-ID"):"0"}function C(o){return o?"Rp "+o.toLocaleString("id-ID"):"Rp 0"}function I(o){v.value.has(o)?v.value.delete(o):v.value.add(o)}function S(o){return v.value.has(o)}function V(o){return o?new Date(o).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"}function E(o){return o?o.substring(11,19):"-"}function J(o,e){const s=e.toLowerCase().replace(/\s+/g,"_")+"_days";return o[s]||0}return(o,e)=>(n(),U($,{title:"Employee Attendance Summary"},{default:P(()=>[t("div",G,[e[47]||(e[47]=t("div",{class:"text-2xl font-bold text-gray-800 mb-2"},"Employee Attendance Summary",-1)),u.period?(n(),r("div",Q,"Periode: "+l(u.period.start)+" s.d. "+l(u.period.end),1)):c("",!0),u.summary?(n(),r("div",q,[t("div",X,[e[4]||(e[4]=t("div",{class:"text-sm font-medium text-blue-600"},"Total Lembur",-1)),t("div",Z,l(Math.floor(u.summary.total_lembur||0))+" jam",1)]),t("div",tt,[e[5]||(e[5]=t("div",{class:"text-sm font-medium text-green-600"},"Rata-rata Lembur/Orang",-1)),t("div",et,l(Math.floor(u.summary.avg_lembur_per_employee||0))+" jam",1)]),t("div",st,[e[6]||(e[6]=t("div",{class:"text-sm font-medium text-orange-600"},"Total Telat",-1)),t("div",ot,l(u.summary.total_telat||0)+" menit",1)]),t("div",lt,[e[7]||(e[7]=t("div",{class:"text-sm font-medium text-purple-600"},"Rata-rata Telat/Orang",-1)),t("div",at,l(u.summary.avg_telat_per_employee||0)+" menit",1)])])):c("",!0),t("div",nt,[e[16]||(e[16]=t("div",{class:"text-lg font-semibold text-gray-700 mb-4"},"Filter Report",-1)),t("div",rt,[t("div",dt,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Outlet",-1)),O(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>h.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:j.value.length===1},[e[8]||(e[8]=t("option",{value:""},"Semua Outlet",-1)),(n(!0),r(p,null,m(j.value,s=>(n(),r("option",{key:s.id,value:s.id},l(s.name),9,ut))),128))],8,it),[[D,h.value]])]),t("div",xt,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Divisi",-1)),O(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>k.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[e[10]||(e[10]=t("option",{value:""},"Semua Divisi",-1)),(n(!0),r(p,null,m(u.divisions,s=>(n(),r("option",{key:s.id,value:s.id},l(s.name),9,pt))),128))],512),[[D,k.value]])]),t("div",mt,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Bulan",-1)),O(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>w.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(n(),r(p,null,m(N,(s,_)=>t("option",{key:_+1,value:_+1},l(s),9,ft)),64))],512),[[D,w.value]])]),t("div",yt,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tahun",-1)),O(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>T.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(n(!0),r(p,null,m(W(R),s=>(n(),r("option",{key:s,value:s},l(s),9,ct))),128))],512),[[D,T.value]])]),t("div",{class:"flex gap-2"},[t("button",{onClick:F,class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg"},e[14]||(e[14]=[t("i",{class:"fa fa-search mr-2"},null,-1),f(" Tampilkan ")])),t("button",{onClick:H,class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg"},e[15]||(e[15]=[t("i",{class:"fa fa-file-excel mr-2"},null,-1),f(" Export Excel ")]))])])]),t("div",gt,[t("div",_t,[t("div",bt,[e[17]||(e[17]=t("h3",{class:"text-lg font-semibold text-gray-700"},"Data Karyawan",-1)),t("div",vt," Total: "+l(a.rows?a.rows.length:0)+" karyawan ",1)])]),t("div",ht,[t("table",kt,[t("thead",wt,[t("tr",null,[e[18]||(e[18]=t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"No",-1)),e[19]||(e[19]=t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"NIK",-1)),e[20]||(e[20]=t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Nama Karyawan",-1)),e[21]||(e[21]=t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Hari Kerja",-1)),e[22]||(e[22]=t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Off",-1)),e[23]||(e[23]=t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"PH (Bonus)",-1)),e[24]||(e[24]=t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Extra Off",-1)),(n(!0),r(p,null,m(a.leaveTypes,s=>(n(),r("th",{key:s.id,class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},l(s.name),1))),128)),e[25]||(e[25]=t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Alpa",-1)),e[26]||(e[26]=t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"OT Full",-1)),e[27]||(e[27]=t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Telat",-1)),e[28]||(e[28]=t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Total Days",-1)),e[29]||(e[29]=t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Detail",-1))])]),t("tbody",null,[(n(!0),r(p,null,m(a.rows,(s,_)=>(n(),r(p,{key:s.user_id},[t("tr",{class:y(_%2===0?"bg-white":"bg-blue-50")},[t("td",Tt,l(_+1),1),t("td",Ot,l(s.nik||"-"),1),t("td",Dt,[t("div",St,l(s.nama_lengkap),1),t("div",jt,l(s.jabatan||"-"),1)]),t("td",Ct,l(i(s.hari_kerja||0)),1),t("td",Et,l(i(s.off_days||0)),1),t("td",Lt,[t("div",At,l(i(s.ph_days||0))+" hari",1),t("div",Bt,l(C(s.ph_bonus||0)),1)]),t("td",Kt,l(i(s.extra_off_days||0)),1),(n(!0),r(p,null,m(a.leaveTypes,d=>(n(),r("td",{key:d.id,class:"px-4 py-3 text-sm text-center font-mono text-purple-600"},l(i(J(s,d.name)||0)),1))),128)),t("td",Mt,l(i(s.alpa_days||0)),1),t("td",Nt,l(i(s.ot_full_days||0)),1),t("td",Rt,[t("span",{class:y(s.total_telat>0?"text-red-600 font-bold":"text-gray-500")},l(i(s.total_telat||0)),3)]),t("td",Ft,l(i(s.total_days||0)),1),t("td",Ht,[t("button",{onClick:d=>I(s.user_id),class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-xs font-medium transition-colors"},[t("i",{class:y(S(s.user_id)?"fa fa-chevron-up":"fa fa-chevron-down")},null,2),f(" "+l(S(s.user_id)?"Tutup":"Buka"),1)],8,It)])],2),S(s.user_id)?(n(),r("tr",Vt,[t("td",{colspan:12+(a.leaveTypes?a.leaveTypes.length:0),class:"px-4 py-4"},[t("div",Ut,[t("div",Pt,[t("h4",Wt,"Detail Absensi Harian - "+l(s.nama_lengkap),1),t("p",Yt,[e[30]||(e[30]=f("Total Lembur: ")),t("span",$t,l(s.total_lembur||0)+" jam",1)])]),t("div",zt,[t("table",Gt,[e[35]||(e[35]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-3 py-2 text-left text-xs font-bold text-gray-700"},"Tanggal"),t("th",{class:"px-3 py-2 text-left text-xs font-bold text-gray-700"},"Jam Masuk"),t("th",{class:"px-3 py-2 text-left text-xs font-bold text-gray-700"},"Jam Keluar"),t("th",{class:"px-3 py-2 text-center text-xs font-bold text-gray-700"},"Telat (menit)"),t("th",{class:"px-3 py-2 text-center text-xs font-bold text-gray-700"},"Lembur (jam)"),t("th",{class:"px-3 py-2 text-center text-xs font-bold text-gray-700"},"Cross Day"),t("th",{class:"px-3 py-2 text-center text-xs font-bold text-gray-700"},"Status"),t("th",{class:"px-3 py-2 text-left text-xs font-bold text-gray-700"},"Shift")])],-1)),t("tbody",null,[(n(!0),r(p,null,m(s.daily_attendance,(d,K)=>(n(),r("tr",{key:K,class:y(K%2===0?"bg-white":"bg-gray-50")},[t("td",Qt,l(V(d.tanggal)),1),t("td",qt,l(E(d.jam_masuk)),1),t("td",Xt,l(E(d.jam_keluar)),1),t("td",Zt,[t("span",{class:y(d.telat>0?"text-red-600 font-bold":"text-gray-500")},l(d.telat||0),3)]),t("td",te,[d.extra_off_overtime&&d.extra_off_overtime>0?(n(),r("div",ee,[t("span",{class:y(d.total_lembur>0?"text-green-600 font-bold":"text-gray-500")},l(d.total_lembur||d.lembur||0),3),t("span",se," (+"+l(d.extra_off_overtime)+" EO) ",1)])):(n(),r("span",{key:1,class:y(d.lembur>0?"text-green-600 font-bold":"text-gray-500")},l(d.lembur||0),3))]),t("td",oe,[d.is_cross_day?(n(),r("span",le,e[31]||(e[31]=[t("i",{class:"fa fa-clock mr-1"},null,-1),f("Cross Day ")]))):(n(),r("span",ae,"-"))]),t("td",ne,[d.is_off?(n(),r("span",re,"Off")):d.is_holiday?(n(),r("span",de,[e[32]||(e[32]=t("i",{class:"fa fa-calendar mr-1"},null,-1)),f(l(d.holiday_name||"Holiday"),1)])):(n(),r("span",ie,e[33]||(e[33]=[t("i",{class:"fa fa-check mr-1"},null,-1),f("Hadir ")])))]),t("td",ue,[d.shift_start&&d.shift_end?(n(),r("div",xe,l(d.shift_start)+" - "+l(d.shift_end),1)):(n(),r("div",pe,"-"))])],2))),128)),!s.daily_attendance||s.daily_attendance.length===0?(n(),r("tr",me,e[34]||(e[34]=[t("td",{colspan:"8",class:"text-center py-4 text-gray-400"},[t("i",{class:"fa fa-info-circle mr-2"}),f("Tidak ada data absensi ")],-1)]))):c("",!0)])])])])],8,Jt)])):c("",!0)],64))),128)),!a.rows||a.rows.length===0?(n(),r("tr",fe,[t("td",{colspan:14+(a.leaveTypes?a.leaveTypes.length:0),class:"text-center py-8 text-gray-400"},e[36]||(e[36]=[t("div",{class:"flex flex-col items-center gap-2"},[t("i",{class:"fa fa-search text-4xl text-gray-300"}),t("div",{class:"text-lg font-medium"},"Tidak ada data karyawan"),t("div",{class:"text-sm text-gray-500"},'Silakan pilih filter dan klik tombol "Tampilkan" untuk melihat data')],-1)]),8,ye)])):c("",!0)])])])]),x.value&&a.rows&&a.rows.length>0?(n(),r("div",ce,[t("div",ge,[e[46]||(e[46]=t("div",{class:"text-sm font-semibold text-gray-700 mb-2"},"Ringkasan Keseluruhan:",-1)),t("div",_e,[t("div",null,[e[37]||(e[37]=t("span",{class:"font-medium"},"Total Karyawan:",-1)),t("span",be,l(a.rows.length),1)]),t("div",null,[e[38]||(e[38]=t("span",{class:"font-medium"},"Total Hari Kerja:",-1)),t("span",ve,l(i(x.value.total_hari_kerja||0))+" hari",1)]),t("div",null,[e[39]||(e[39]=t("span",{class:"font-medium"},"Total Off:",-1)),t("span",he,l(i(x.value.total_off_days||0))+" hari",1)]),t("div",null,[e[40]||(e[40]=t("span",{class:"font-medium"},"Total PH:",-1)),t("span",ke,l(i(x.value.total_ph_days||0))+" hari",1),t("span",we,l(C(x.value.total_ph_bonus||0)),1)]),t("div",null,[e[41]||(e[41]=t("span",{class:"font-medium"},"Total Cuti:",-1)),t("span",Te,l(i(x.value.total_cuti_days||0))+" hari",1)]),t("div",null,[e[42]||(e[42]=t("span",{class:"font-medium"},"Total Sakit:",-1)),t("span",Oe,l(i(x.value.total_sakit_days||0))+" hari",1)]),t("div",null,[e[43]||(e[43]=t("span",{class:"font-medium"},"Total Alpa:",-1)),t("span",De,l(i(x.value.total_alpa_days||0))+" hari",1)]),t("div",null,[e[44]||(e[44]=t("span",{class:"font-medium"},"Total Telat:",-1)),t("span",Se,l(i(x.value.total_telat||0))+" menit",1)]),t("div",null,[e[45]||(e[45]=t("span",{class:"font-medium"},"Total Days:",-1)),t("span",je,l(i(x.value.total_days||0))+" hari",1)])])])])):c("",!0)])]),_:1}))}},Ve=z(Ce,[["__scopeId","data-v-3d8f96d1"]]);export{Ve as default};
