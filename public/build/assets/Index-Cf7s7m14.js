const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/app-BPKNzj_F.js","assets/vendor-utils-CpgP2uT4.js","assets/vendor-vue-g7iCcTkf.js","assets/vendor-charts-CuqD4wLC.js","assets/app-DyCrqql8.css"])))=>i.map(i=>d[i]);
import{_ as I}from"./app-BPKNzj_F.js";import{r as _,c as J,w as O,A as Q,B as o,C as X,D as e,L as a,E as y,G as d,N as n,H as f,J as P,F as D,M as B,I as T,V as E,l as U,W as x}from"./vendor-vue-g7iCcTkf.js";import{u as Z,A as tt}from"./AppLayout-1Wm1ZPw9.js";import"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CVHTvH7j.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const et={class:"w-full py-8 px-0"},st={class:"flex justify-between items-center mb-6"},lt={class:"flex gap-2 items-center"},ot={class:"flex flex-wrap gap-3 mb-4 items-center"},at={class:"flex-1 min-w-64"},nt=["value"],rt={key:0,class:"bg-white rounded-2xl shadow-2xl p-12 text-center"},it={key:1,class:"bg-white rounded-2xl shadow-2xl overflow-x-auto transition-all"},dt={class:"w-full min-w-full divide-y divide-gray-200"},ut={class:"bg-gradient-to-r from-yellow-100 to-yellow-200"},pt={class:"px-6 py-3 text-left text-xs font-bold text-yellow-700 uppercase tracking-wider rounded-tl-2xl"},ft={key:0},xt={class:"px-6 py-3"},mt=["value","disabled"],ct={class:"px-6 py-3 font-mono font-semibold text-yellow-700"},gt={class:"px-6 py-3"},bt={key:0},yt={class:"text-blue-600 font-medium"},vt={key:1},wt={class:"text-green-600 font-medium"},ht={key:2},kt={class:"text-gray-400"},_t={class:"px-6 py-3"},Ct={class:"text-purple-600 font-medium"},Pt={class:"px-6 py-3"},Dt={class:"px-6 py-3"},Bt={key:0},Tt={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Lt={key:1},St={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},Rt={key:2},Vt={class:"px-6 py-3"},At={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},Gt={class:"px-6 py-3 text-right"},Mt={class:"px-6 py-3"},It={class:"px-6 py-3"},Ot={class:"flex gap-2"},Et=["onClick"],Ut=["onClick"],$t=["onClick"],Nt={key:2,class:"flex justify-between items-center mt-4"},jt={class:"text-sm text-gray-600"},Ft={class:"flex gap-2"},Ht=["disabled","onClick","innerHTML"],ee={__name:"Index",props:{payments:Object,outlets:Array,filters:Object,grGroups:Object,dataLoaded:{type:Boolean,default:!1}},setup(u){var S,R,V,A,G,M;const p=u,{showLoading:v,hideLoading:m}=Z(),L=new Date().toISOString().split("T")[0],r=_({outlet:((S=p.filters)==null?void 0:S.outlet)||"",status:((R=p.filters)==null?void 0:R.status)||"",date_from:((V=p.filters)==null?void 0:V.date_from)||L,date_to:((A=p.filters)==null?void 0:A.date_to)||L,search:((G=p.filters)==null?void 0:G.search)||"",per_page:((M=p.filters)==null?void 0:M.per_page)||"10"}),w=_(p.dataLoaded||!1),i=_([]),c=_(!1),C=J(()=>{var l,t;return((t=(l=p.payments)==null?void 0:l.data)==null?void 0:t.filter(s=>s.status==="pending"))||[]});O(i,l=>{c.value=l.length>0&&l.length===C.value.length},{deep:!0}),O(c,l=>{l?i.value=C.value.map(t=>t.id):i.value=[]});function h(l){return l?new Date(l).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}function $(l){return l==null?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(l)}function N(l){return{pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"}[l]||"bg-gray-100 text-gray-800"}function j(l){if(l){v("Memuat Data...");const t=new URL(l,window.location.origin);t.searchParams.set("load_data","true"),x.visit(t.pathname+t.search,{preserveState:!0,replace:!0,onFinish:()=>{m(),w.value=!0}})}}function k(){v("Memuat Data Payment..."),x.get("/outlet-payments",{...r.value,load_data:!0},{preserveState:!0,replace:!0,onFinish:()=>{m(),w.value=!0}})}function g(){}function F(){}function H(){x.get("/outlet-payments/create")}function K(l){l&&l.id&&x.get(`/outlet-payments/${l.id}`)}function W(l){l&&l.id&&x.get(`/outlet-payments/${l.id}/edit`)}function Y(l){l&&l.id&&I(async()=>{const{default:t}=await import("./app-BPKNzj_F.js").then(s=>s.s);return{default:t}},__vite__mapDeps([0,1,2,3,4])).then(({default:t})=>{t.fire({title:"Hapus Payment?",text:"Data yang dihapus tidak dapat dikembalikan.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"}).then(s=>{s.isConfirmed&&(v("Menghapus Payment..."),x.delete(`/outlet-payments/${l.id}`,{onSuccess:()=>{m(),t.fire("Berhasil","Payment berhasil dihapus!","success"),k()},onError:()=>{m(),t.fire("Gagal","Gagal menghapus Payment","error")}}))})})}function q(){c.value?i.value=C.value.map(l=>l.id):i.value=[]}function z(){i.value.length!==0&&I(async()=>{const{default:l}=await import("./app-BPKNzj_F.js").then(t=>t.s);return{default:l}},__vite__mapDeps([0,1,2,3,4])).then(({default:l})=>{l.fire({title:"Konfirmasi Pembayaran?",text:`Apakah Anda yakin ingin mengkonfirmasi ${i.value.length} payment?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Konfirmasi!",cancelButtonText:"Batal"}).then(t=>{t.isConfirmed&&(v("Mengkonfirmasi Payments..."),x.post("/outlet-payments/bulk-confirm",{payment_ids:i.value},{onSuccess:()=>{m(),i.value=[],c.value=!1,l.fire("Berhasil","Payments berhasil dikonfirmasi!","success"),k()},onError:()=>{m(),l.fire("Gagal","Gagal mengkonfirmasi payments","error")}}))})})}return(l,t)=>(o(),Q(tt,null,{default:X(()=>[e("div",et,[e("div",st,[t[9]||(t[9]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-money-bill-wave"}),d(" Outlet Payments ")],-1)),e("div",lt,[i.value.length>0?(o(),a("button",{key:0,onClick:z,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"},[t[8]||(t[8]=e("i",{class:"fa fa-check mr-1"},null,-1)),d(" Konfirmasi ("+n(i.value.length)+") ",1)])):y("",!0),e("button",{onClick:H,class:"bg-gradient-to-r from-green-500 to-green-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"}," + Buat Payment ")])]),e("div",ot,[e("div",at,[f(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>r.value.search=s),onInput:F,placeholder:"Cari payment number, outlet, creator, GR/Retail number...",class:"w-full px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},null,544),[[P,r.value.search]])]),f(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.value.outlet=s),onChange:g,class:"px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},[t[10]||(t[10]=e("option",{value:""},"Semua Outlet",-1)),(o(!0),a(D,null,B(u.outlets,s=>(o(),a("option",{key:s.id,value:s.id},n(s.name),9,nt))),128))],544),[[T,r.value.outlet]]),f(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>r.value.status=s),onChange:g,class:"px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},t[11]||(t[11]=[e("option",{value:""},"Semua Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"paid"},"Paid",-1),e("option",{value:"cancelled"},"Cancelled",-1)]),544),[[T,r.value.status]]),f(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=s=>r.value.date_from=s),onChange:g,class:"px-2 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",placeholder:"Dari Tanggal"},null,544),[[P,r.value.date_from]]),f(e("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=s=>r.value.date_to=s),onChange:g,class:"px-2 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",placeholder:"Sampai Tanggal"},null,544),[[P,r.value.date_to]]),e("button",{onClick:k,class:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-700 text-white rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"},t[12]||(t[12]=[e("i",{class:"fa fa-sync-alt mr-1"},null,-1),d(" Load Data ")])),f(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>r.value.per_page=s),onChange:g,class:"px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},t[13]||(t[13]=[e("option",{value:"10"},"10 per halaman",-1),e("option",{value:"25"},"25 per halaman",-1),e("option",{value:"50"},"50 per halaman",-1),e("option",{value:"100"},"100 per halaman",-1)]),544),[[T,r.value.per_page]])]),w.value?(o(),a("div",it,[e("table",dt,[e("thead",ut,[e("tr",null,[e("th",pt,[f(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=s=>c.value=s),onChange:q,class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,544),[[E,c.value]])]),t[18]||(t[18]=e("th",{class:"px-6 py-3 text-left text-xs font-bold text-yellow-700 uppercase tracking-wider"},"No. Payment",-1)),t[19]||(t[19]=e("th",{class:"px-6 py-3 text-left text-xs font-bold text-yellow-700 uppercase tracking-wider"},"Tanggal Transaksi",-1)),t[20]||(t[20]=e("th",{class:"px-6 py-3 text-left text-xs font-bold text-yellow-700 uppercase tracking-wider"},"Tanggal Payment",-1)),t[21]||(t[21]=e("th",{class:"px-6 py-3 text-left text-xs font-bold text-yellow-700 uppercase tracking-wider"},"Outlet",-1)),t[22]||(t[22]=e("th",{class:"px-6 py-3 text-left text-xs font-bold text-yellow-700 uppercase tracking-wider"},"No. GR/Retail",-1)),t[23]||(t[23]=e("th",{class:"px-6 py-3 text-left text-xs font-bold text-yellow-700 uppercase tracking-wider"},"Creator",-1)),t[24]||(t[24]=e("th",{class:"px-6 py-3 text-left text-xs font-bold text-yellow-700 uppercase tracking-wider"},"Total Amount",-1)),t[25]||(t[25]=e("th",{class:"px-6 py-3 text-left text-xs font-bold text-yellow-700 uppercase tracking-wider"},"Status",-1)),t[26]||(t[26]=e("th",{class:"px-6 py-3 text-left text-xs font-bold text-yellow-700 uppercase tracking-wider rounded-tr-2xl"},"Aksi",-1))])]),e("tbody",null,[!u.payments.data||!u.payments.data.length?(o(),a("tr",ft,t[27]||(t[27]=[e("td",{colspan:"10",class:"text-center py-10 text-gray-400"},"Belum ada data Payment.",-1)]))):y("",!0),(o(!0),a(D,null,B(u.payments.data,s=>(o(),a("tr",{key:s.id,class:"hover:bg-yellow-50 transition shadow-sm"},[e("td",xt,[f(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[7]||(t[7]=b=>i.value=b),disabled:s.status!=="pending",class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,8,mt),[[E,i.value]])]),e("td",ct,n(s.payment_number),1),e("td",gt,[s.payment_type==="GR"?(o(),a("div",bt,[e("span",yt,n(h(s.gr_date)),1),t[28]||(t[28]=e("div",{class:"text-xs text-gray-500"},"GR Date",-1))])):s.payment_type==="Retail"?(o(),a("div",vt,[e("span",wt,n(h(s.rws_date)),1),t[29]||(t[29]=e("div",{class:"text-xs text-gray-500"},"RWS Date",-1))])):(o(),a("div",ht,[e("span",kt,n(h(s.date)),1)]))]),e("td",_t,[e("span",Ct,n(h(s.payment_created_at)),1),t[30]||(t[30]=e("div",{class:"text-xs text-gray-500"},"Created",-1))]),e("td",Pt,n(s.outlet_name||"-"),1),e("td",Dt,[s.payment_type==="GR"?(o(),a("div",Bt,[e("span",Tt,[t[31]||(t[31]=e("i",{class:"fa fa-box mr-1"},null,-1)),d(" "+n(s.gr_number||"-"),1)])])):s.payment_type==="Retail"?(o(),a("div",Lt,[e("span",St,[t[32]||(t[32]=e("i",{class:"fa fa-shopping-cart mr-1"},null,-1)),d(" "+n(s.retail_number||"-"),1)])])):(o(),a("div",Rt,t[33]||(t[33]=[e("span",{class:"text-gray-400"},"-",-1)])))]),e("td",Vt,[e("span",At,[t[34]||(t[34]=e("i",{class:"fa fa-user mr-1"},null,-1)),d(" "+n(s.creator_name||"-"),1)])]),e("td",Gt,n($(s.total_amount)),1),e("td",Mt,[e("span",{class:U([N(s.status),"px-2 py-1 rounded-full text-xs font-semibold shadow"])},n(s.status),3)]),e("td",It,[e("div",Ot,[e("button",{onClick:b=>K(s),class:"inline-flex items-center btn btn-xs bg-blue-100 text-blue-800 hover:bg-blue-200 rounded px-2 py-1 font-semibold transition"},t[35]||(t[35]=[e("i",{class:"fa fa-eye mr-1"},null,-1),d(" Detail ")]),8,Et),s.status==="pending"?(o(),a("button",{key:0,onClick:b=>W(s),class:"inline-flex items-center btn btn-xs bg-yellow-100 text-yellow-800 hover:bg-yellow-200 rounded px-2 py-1 font-semibold transition"},t[36]||(t[36]=[e("i",{class:"fa fa-pencil-alt mr-1"},null,-1),d(" Edit ")]),8,Ut)):y("",!0),s.status==="pending"?(o(),a("button",{key:1,onClick:b=>Y(s),class:"inline-flex items-center btn btn-xs bg-red-100 text-red-700 hover:bg-red-200 rounded px-2 py-1 font-semibold transition"},t[37]||(t[37]=[e("i",{class:"fa fa-trash mr-1"},null,-1),d(" Hapus ")]),8,$t)):y("",!0)])])]))),128))])])])):(o(),a("div",rt,[e("div",{class:"text-gray-400 mb-4"},[t[15]||(t[15]=e("i",{class:"fa fa-database text-6xl mb-4"},null,-1)),t[16]||(t[16]=e("p",{class:"text-xl font-semibold mb-2"},"Data Belum Dimuat",-1)),t[17]||(t[17]=e("p",{class:"text-sm mb-6"},'Pilih filter dan klik "Load Data" untuk memuat data payment.',-1)),e("button",{onClick:k,class:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-700 text-white rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"},t[14]||(t[14]=[e("i",{class:"fa fa-sync-alt mr-2"},null,-1),d(" Load Data ")]))])])),w.value?(o(),a("div",Nt,[e("div",jt," Menampilkan "+n(u.payments.from||0)+" - "+n(u.payments.to||0)+" dari "+n(u.payments.total||0)+" data ",1),e("div",Ft,[(o(!0),a(D,null,B(u.payments.links,s=>(o(),a("button",{key:s.label,disabled:!s.url,onClick:b=>j(s.url),innerHTML:s.label,class:U(["px-3 py-1 rounded-lg border text-sm font-semibold",[s.active?"bg-yellow-600 text-white shadow-lg":"bg-white text-yellow-700 hover:bg-yellow-50",s.url?"cursor-pointer":"opacity-50 cursor-not-allowed"]])},null,10,Ht))),128))])])):y("",!0)])]),_:1}))}};export{ee as default};
