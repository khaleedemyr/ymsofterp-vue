import{r as N,c as W,A as z,B as n,C as g,D as e,x as c,Q as k,S as T,N as p,O as J,H as i,G as o,J as m,L as d,F as A,M as R,I as v,E as y,W as H}from"./vendor-vue-g7iCcTkf.js";import{A as K}from"./AppLayout-DP-q1yH_.js";import{s as Q}from"./VueTimepicker-BGHuji_y.js";import{S as b}from"./app-BoyRvw0M.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./ProfileUpdateModal-Cs9EnNrk.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const Y={class:"min-h-screen bg-gradient-to-br from-slate-50 via-pink-50/30 to-slate-50 py-8 px-4 sm:px-6"},Z={class:"max-w-3xl mx-auto"},$={class:"flex items-center gap-3 mb-8"},ee={class:"text-2xl font-bold text-slate-800"},se={class:"text-sm text-slate-500 mt-0.5"},te={class:"bg-white rounded-2xl border border-slate-200/60 shadow-sm overflow-hidden"},le={class:"p-6 grid grid-cols-1 md:grid-cols-3 gap-5"},ae={class:"md:col-span-3"},ie={class:"md:col-span-2"},oe={class:"bg-white rounded-2xl border border-slate-200/60 shadow-sm overflow-hidden"},ne={class:"p-6 space-y-5"},re=["value"],de={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},ue={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},me={class:"bg-white rounded-2xl border border-slate-200/60 shadow-sm overflow-hidden"},pe={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-5"},fe={key:0,class:"md:col-span-2"},ve=["value"],xe={class:"bg-white rounded-2xl border border-slate-200/60 shadow-sm overflow-hidden"},be={class:"p-6 space-y-5"},ge={class:"flex flex-wrap items-center gap-3"},ce={class:"inline-flex items-center gap-2 px-4 py-2.5 rounded-xl border border-slate-200 bg-white text-slate-700 hover:bg-slate-50 cursor-pointer transition text-sm font-medium"},ke=["title"],ye={class:"flex flex-col-reverse sm:flex-row items-stretch sm:items-center justify-end gap-3 pt-2"},we=["disabled"],Se={key:0,class:"fa-solid fa-spinner fa-spin"},_e={key:1,class:"fa-solid fa-check"},he={__name:"Form",props:{reservation:Object,outlets:Array,salesUsers:{type:Array,default:()=>[]},isEdit:Boolean},setup(f){var w,S,_,h,V,U,j,D,q,P,C,E,F,M;const a=f,u=N(!1),t=N({name:((w=a.reservation)==null?void 0:w.name)||"",phone:((S=a.reservation)==null?void 0:S.phone)||"",email:((_=a.reservation)==null?void 0:_.email)||"",outlet_id:((h=a.reservation)==null?void 0:h.outlet_id)||"",reservation_date:((V=a.reservation)==null?void 0:V.reservation_date)||"",reservation_time:((U=a.reservation)==null?void 0:U.reservation_time)||"",number_of_guests:((j=a.reservation)==null?void 0:j.number_of_guests)||1,smoking_preference:((D=a.reservation)==null?void 0:D.smoking_preference)||"",special_requests:((q=a.reservation)==null?void 0:q.special_requests)||"",dp:((P=a.reservation)==null?void 0:P.dp)??null,from_sales:!!((C=a.reservation)!=null&&C.from_sales),sales_user_id:((E=a.reservation)==null?void 0:E.sales_user_id)??null,menu:((F=a.reservation)==null?void 0:F.menu)||"",menu_file:null,status:((M=a.reservation)==null?void 0:M.status)||"pending"}),x=W(()=>{var s;if(t.value.menu_file&&t.value.menu_file.name)return t.value.menu_file.name;const r=(s=a.reservation)==null?void 0:s.menu_file;return r&&typeof r=="string"&&r.split(/[/\\]/).pop()||""});function I(r){var l,B;const s=(B=(l=r.target)==null?void 0:l.files)==null?void 0:B[0];s&&(t.value.menu_file=s),r.target.value=""}function L(){t.value.menu_file=null}function O(){t.value.from_sales||(t.value.sales_user_id=null)}function G(){u.value=!0,a.isEdit?H.put(route("reservations.update",a.reservation.id),t.value,{onSuccess:()=>{u.value=!1,b.fire({title:"Sukses",text:"Reservasi berhasil diupdate!",icon:"success"})},onError:()=>{u.value=!1,b.fire({title:"Gagal",text:"Terjadi kesalahan saat menyimpan.",icon:"error"})}}):H.post(route("reservations.store"),t.value,{onSuccess:()=>{u.value=!1,b.fire({title:"Sukses",text:"Reservasi berhasil disimpan!",icon:"success"})},onError:()=>{u.value=!1,b.fire({title:"Gagal",text:"Terjadi kesalahan saat menyimpan.",icon:"error"})}})}return(r,s)=>(n(),z(K,null,{default:g(()=>[e("div",Y,[e("div",Z,[e("div",$,[c(k(T),{href:r.route("reservations.index"),class:"flex items-center justify-center w-10 h-10 rounded-xl border border-slate-200 bg-white text-slate-600 hover:bg-slate-50 transition"},{default:g(()=>s[14]||(s[14]=[e("i",{class:"fa-solid fa-arrow-left"},null,-1)])),_:1},8,["href"]),e("div",null,[e("h1",ee,p(f.isEdit?"Edit Reservasi":"Tambah Reservasi"),1),e("p",se,p(f.isEdit?"Ubah data reservasi":"Isi form untuk membuat reservasi baru"),1)])]),e("form",{onSubmit:J(G,["prevent"]),class:"space-y-6"},[e("section",te,[s[18]||(s[18]=e("div",{class:"px-6 py-4 bg-slate-50 border-b border-slate-100 flex items-center gap-3"},[e("span",{class:"flex items-center justify-center w-10 h-10 rounded-xl bg-rose-100 text-rose-600"},[e("i",{class:"fa-solid fa-user text-lg"})]),e("div",null,[e("h2",{class:"font-semibold text-slate-800"},"Data Pemesan"),e("p",{class:"text-xs text-slate-500"},"Informasi kontak pemesan")])],-1)),e("div",le,[e("div",ae,[s[15]||(s[15]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},[o("Nama Lengkap "),e("span",{class:"text-rose-500"},"*")],-1)),i(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>t.value.name=l),type:"text",required:"",maxlength:"100",placeholder:"Nama lengkap pemesan",class:"input-field"},null,512),[[m,t.value.name]])]),e("div",null,[s[16]||(s[16]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},[o("Nomor Telepon "),e("span",{class:"text-rose-500"},"*")],-1)),i(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>t.value.phone=l),type:"tel",required:"",maxlength:"20",placeholder:"08xxxxxxxxxx",class:"input-field"},null,512),[[m,t.value.phone]])]),e("div",ie,[s[17]||(s[17]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"Email",-1)),i(e("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>t.value.email=l),type:"email",maxlength:"100",placeholder:"email@contoh.com (opsional)",class:"input-field"},null,512),[[m,t.value.email]])])])]),e("section",oe,[s[27]||(s[27]=e("div",{class:"px-6 py-4 bg-slate-50 border-b border-slate-100 flex items-center gap-3"},[e("span",{class:"flex items-center justify-center w-10 h-10 rounded-xl bg-pink-100 text-pink-600"},[e("i",{class:"fa-solid fa-calendar-days text-lg"})]),e("div",null,[e("h2",{class:"font-semibold text-slate-800"},"Detail Reservasi"),e("p",{class:"text-xs text-slate-500"},"Tanggal, waktu, outlet & preferensi")])],-1)),e("div",ne,[e("div",null,[s[20]||(s[20]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},[o("Outlet "),e("span",{class:"text-rose-500"},"*")],-1)),i(e("select",{"onUpdate:modelValue":s[3]||(s[3]=l=>t.value.outlet_id=l),required:"",class:"input-field"},[s[19]||(s[19]=e("option",{value:""},"Pilih Outlet",-1)),(n(!0),d(A,null,R(f.outlets,l=>(n(),d("option",{key:l.id,value:l.id},p(l.name),9,re))),128))],512),[[v,t.value.outlet_id]])]),e("div",de,[e("div",null,[s[21]||(s[21]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},[o("Tanggal Reservasi "),e("span",{class:"text-rose-500"},"*")],-1)),i(e("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>t.value.reservation_date=l),type:"date",required:"",class:"input-field"},null,512),[[m,t.value.reservation_date]])]),e("div",null,[s[22]||(s[22]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},[o("Waktu Reservasi "),e("span",{class:"text-rose-500"},"*")],-1)),c(k(Q),{modelValue:t.value.reservation_time,"onUpdate:modelValue":s[5]||(s[5]=l=>t.value.reservation_time=l),format:"HH:mm",is24:!0,"minute-interval":"15",class:"input-field"},null,8,["modelValue"])])]),e("div",ue,[e("div",null,[s[23]||(s[23]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},[o("Jumlah Tamu "),e("span",{class:"text-rose-500"},"*")],-1)),i(e("input",{"onUpdate:modelValue":s[6]||(s[6]=l=>t.value.number_of_guests=l),type:"number",min:"1",required:"",class:"input-field",placeholder:"1"},null,512),[[m,t.value.number_of_guests,void 0,{number:!0}]])]),e("div",null,[s[25]||(s[25]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},[o("Preferensi Area "),e("span",{class:"text-rose-500"},"*")],-1)),i(e("select",{"onUpdate:modelValue":s[7]||(s[7]=l=>t.value.smoking_preference=l),required:"",class:"input-field"},s[24]||(s[24]=[e("option",{value:""},"Pilih Area",-1),e("option",{value:"smoking"},"Smoking Area",-1),e("option",{value:"non_smoking"},"Non-Smoking Area",-1)]),512),[[v,t.value.smoking_preference]])])]),e("div",null,[s[26]||(s[26]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"Catatan Khusus",-1)),i(e("textarea",{"onUpdate:modelValue":s[8]||(s[8]=l=>t.value.special_requests=l),rows:"3",placeholder:"Request khusus (kue ulang tahun, kursi bayi, dll)",class:"input-field resize-none"},null,512),[[m,t.value.special_requests]])])])]),e("section",me,[s[33]||(s[33]=e("div",{class:"px-6 py-4 bg-slate-50 border-b border-slate-100 flex items-center gap-3"},[e("span",{class:"flex items-center justify-center w-10 h-10 rounded-xl bg-emerald-100 text-emerald-600"},[e("i",{class:"fa-solid fa-money-bill-wave text-lg"})]),e("div",null,[e("h2",{class:"font-semibold text-slate-800"},"DP & Sales"),e("p",{class:"text-xs text-slate-500"},"Down payment dan sumber reservasi")])],-1)),e("div",pe,[e("div",null,[s[28]||(s[28]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"DP (Down Payment)",-1)),i(e("input",{"onUpdate:modelValue":s[9]||(s[9]=l=>t.value.dp=l),type:"number",step:"0.01",min:"0",placeholder:"0",class:"input-field"},null,512),[[m,t.value.dp,void 0,{number:!0}]])]),e("div",null,[s[30]||(s[30]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"Dari Sales?",-1)),i(e("select",{"onUpdate:modelValue":s[10]||(s[10]=l=>t.value.from_sales=l),class:"input-field",onChange:O},s[29]||(s[29]=[e("option",{value:!1},"Bukan",-1),e("option",{value:!0},"Dari Sales",-1)]),544),[[v,t.value.from_sales]])]),t.value.from_sales?(n(),d("div",fe,[s[32]||(s[32]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"Pilih Sales",-1)),i(e("select",{"onUpdate:modelValue":s[11]||(s[11]=l=>t.value.sales_user_id=l),class:"input-field"},[s[31]||(s[31]=e("option",{value:null},"-- Pilih Sales --",-1)),(n(!0),d(A,null,R(f.salesUsers||[],l=>(n(),d("option",{key:l.id,value:l.id},p(l.name),9,ve))),128))],512),[[v,t.value.sales_user_id]])])):y("",!0)])]),e("section",xe,[s[42]||(s[42]=e("div",{class:"px-6 py-4 bg-slate-50 border-b border-slate-100 flex items-center gap-3"},[e("span",{class:"flex items-center justify-center w-10 h-10 rounded-xl bg-amber-100 text-amber-600"},[e("i",{class:"fa-solid fa-utensils text-lg"})]),e("div",null,[e("h2",{class:"font-semibold text-slate-800"},"Menu & Status"),e("p",{class:"text-xs text-slate-500"},"Daftar menu dan status reservasi")])],-1)),e("div",be,[e("div",null,[s[34]||(s[34]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"Menu",-1)),i(e("textarea",{"onUpdate:modelValue":s[12]||(s[12]=l=>t.value.menu=l),rows:"5",placeholder:"Tulis menu yang dipesan (tanpa batas karakter)",class:"input-field resize-none"},null,512),[[m,t.value.menu]])]),e("div",null,[s[38]||(s[38]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},"File menu (opsional)",-1)),s[39]||(s[39]=e("p",{class:"text-xs text-slate-500 mb-2"},"Foto, PDF, atau Excel. Maks. 10 MB.",-1)),e("div",ge,[e("label",ce,[s[35]||(s[35]=e("i",{class:"fa-solid fa-paperclip text-slate-500"},null,-1)),s[36]||(s[36]=o(" Pilih file ")),e("input",{type:"file",accept:".jpg,.jpeg,.png,.gif,.webp,.pdf,.xls,.xlsx",class:"hidden",onChange:I},null,32)]),x.value?(n(),d("span",{key:0,class:"text-sm text-slate-700 truncate max-w-[200px]",title:x.value},p(x.value),9,ke)):y("",!0),x.value?(n(),d("button",{key:1,type:"button",onClick:L,class:"p-2 rounded-lg text-slate-400 hover:text-rose-500 hover:bg-rose-50 transition",title:"Hapus file"},s[37]||(s[37]=[e("i",{class:"fa-solid fa-times"},null,-1)]))):y("",!0)])]),e("div",null,[s[41]||(s[41]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1.5"},[o("Status "),e("span",{class:"text-rose-500"},"*")],-1)),i(e("select",{"onUpdate:modelValue":s[13]||(s[13]=l=>t.value.status=l),required:"",class:"input-field"},s[40]||(s[40]=[e("option",{value:"pending"},"Pending",-1),e("option",{value:"confirmed"},"Confirmed",-1),e("option",{value:"cancelled"},"Cancelled",-1)]),512),[[v,t.value.status]])])])]),e("div",ye,[c(k(T),{href:r.route("reservations.index"),class:"inline-flex items-center justify-center gap-2 px-5 py-3 rounded-xl border border-slate-200 text-slate-700 font-medium hover:bg-slate-50 transition"},{default:g(()=>s[43]||(s[43]=[o(" Batal ")])),_:1},8,["href"]),e("button",{type:"submit",disabled:u.value,class:"inline-flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-semibold text-white bg-gradient-to-r from-rose-500 to-pink-600 hover:from-rose-600 hover:to-pink-700 shadow-lg shadow-pink-500/25 disabled:opacity-70 disabled:cursor-not-allowed transition"},[u.value?(n(),d("i",Se)):(n(),d("i",_e)),o(" "+p(u.value?"Menyimpan...":"Simpan Reservasi"),1)],8,we)])],32)])])]),_:1}))}},Ne=X(he,[["__scopeId","data-v-6151d324"]]);export{Ne as default};
