import{a as O,f as U}from"./vendor-utils-CpgP2uT4.js";import{Y as j,h as y,_ as M,G as z,S as V}from"./vendor-ui-CrPgGUUb.js";import{i as W}from"./id-C4ThNj35.js";import{r as d,c as L,a as X,L as t,B as a,x as o,D as e,F as x,M as g,C as n,Q as i,E as f,l as Z,N as m}from"./vendor-vue-g7iCcTkf.js";const ee={key:0,class:"flex justify-center py-4"},te={key:1,class:"text-center py-4 text-gray-500"},ae={key:2,class:"space-y-4"},se={class:"text-xs text-gray-500 mb-2"},le={class:"text-sm text-gray-700 whitespace-pre-line mb-3"},oe={key:0},ie={key:0,class:"mb-3"},re={class:"text-xs text-gray-500 mb-1"},ne={class:"flex flex-wrap gap-2"},ce=["onClick"],ue=["src"],de=["onClick"],ve={key:1,class:"mb-3"},fe={class:"text-xs text-gray-500 mb-1"},ye={class:"flex flex-wrap gap-2"},me=["onClick"],he={class:"fixed inset-0 overflow-y-auto"},pe={class:"flex min-h-full items-center justify-center p-4"},_e=["src"],xe={class:"fixed inset-0 overflow-y-auto"},ge={class:"flex min-h-full items-center justify-center"},be={class:"relative aspect-video bg-black rounded-lg overflow-hidden"},we=["src"],ke={class:"flex justify-center gap-2 mt-4"},Ce=["onClick"],Se=["src"],Pe={class:"fixed inset-0 overflow-y-auto"},je={class:"flex min-h-full items-center justify-center p-4"},Me=["src"],Ne={__name:"ActionPlanList",props:{taskId:{type:[Number,String],required:!0}},setup(A,{expose:G}){const H=A,b=d([]),w=d(!0),k=d(!1),C=d(!1),S=d(!1),p=d(null),_=d(null),P=d(null),c=d(0),h=d([]),I=L(()=>h.value[c.value]),B=L(()=>h.value.length);async function D(){w.value=!0;try{const r=await O.get(`/api/action-plans/task/${H.taskId}`);r.data.success&&(b.value=r.data.data)}catch(r){console.error("Error loading action plans:",r)}finally{w.value=!1}}function R(r){return U(new Date(r),"dd MMMM yyyy HH:mm",{locale:W})}function v(r,l){return r.filter(s=>s.media_type===l)}function T(r){p.value=r,k.value=!0}function N(){k.value=!1,p.value=null}function Y(r,l=0){h.value=r,c.value=l,C.value=!0}function $(){C.value=!1,c.value=0,h.value=[]}function q(r){_.value=r,S.value=!0}function E(){P.value&&P.value.pause(),S.value=!1,_.value=null}function Q(){c.value>0&&c.value--}function J(){c.value<B.value-1&&c.value++}function K(r){c.value=r}return X(()=>{D()}),G({loadActionPlans:D}),(r,l)=>(a(),t("div",null,[w.value?(a(),t("div",ee,l[0]||(l[0]=[e("i",{class:"fas fa-spinner fa-spin text-2xl text-blue-500"},null,-1)]))):b.value.length===0?(a(),t("div",te," Belum ada FRR ")):(a(),t("div",ae,[(a(!0),t(x,null,g(b.value,s=>(a(),t("div",{key:s.id},[e("div",se,[e("div",null,"Dibuat oleh: "+m(s.created_by_name),1),e("div",null,m(R(s.created_at)),1)]),e("p",le,m(s.description),1),s.media&&s.media.length>0?(a(),t("div",oe,[v(s.media,"image").length>0?(a(),t("div",ie,[e("div",re,"Photos ("+m(v(s.media,"image").length)+")",1),e("div",ne,[(a(!0),t(x,null,g(v(s.media,"image").slice(0,3),(u,F)=>(a(),t("div",{key:u.id,class:"w-12 h-12 rounded border cursor-pointer overflow-hidden",onClick:ze=>T(u)},[e("img",{src:"/storage/"+u.file_path,class:"w-full h-full object-cover"},null,8,ue)],8,ce))),128)),v(s.media,"image").length>3?(a(),t("div",{key:0,class:"w-12 h-12 rounded border bg-gray-100 flex items-center justify-center text-xs text-gray-600 cursor-pointer",onClick:u=>Y(v(s.media,"image"),3)}," +"+m(v(s.media,"image").length-3),9,de)):f("",!0)])])):f("",!0),v(s.media,"video").length>0?(a(),t("div",ve,[e("div",fe,"Videos ("+m(v(s.media,"video").length)+")",1),e("div",ye,[(a(!0),t(x,null,g(v(s.media,"video"),u=>(a(),t("div",{key:u.id,class:"w-16 h-12 rounded bg-gray-100 flex items-center justify-center cursor-pointer relative group",onClick:F=>q(u)},l[1]||(l[1]=[e("div",{class:"absolute inset-0 bg-black/40 group-hover:bg-black/60 flex items-center justify-center transition-all"},[e("i",{class:"fas fa-play text-white"})],-1)]),8,me))),128))])])):f("",!0)])):f("",!0)]))),128))])),o(i(V),{appear:"",show:k.value,as:"template"},{default:n(()=>[o(i(j),{as:"div",onClose:N,class:"relative z-50"},{default:n(()=>[o(i(y),{enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:n(()=>[o(i(M),{class:"fixed inset-0 bg-black/75"})]),_:1}),e("div",he,[e("div",pe,[o(i(y),{enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:n(()=>[o(i(z),{class:"relative bg-white rounded-lg max-w-3xl"},{default:n(()=>[e("button",{onClick:N,class:"absolute -top-10 right-0 text-white hover:text-gray-300"},l[2]||(l[2]=[e("i",{class:"fas fa-times text-xl"},null,-1)])),p.value?(a(),t("img",{key:0,src:"/storage/"+p.value.file_path,class:"rounded-lg"},null,8,_e)):f("",!0)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),o(i(V),{appear:"",show:C.value,as:"template"},{default:n(()=>[o(i(j),{as:"div",onClose:$,class:"relative z-50"},{default:n(()=>[o(i(y),{enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:n(()=>[o(i(M),{class:"fixed inset-0 bg-black/90"})]),_:1}),e("div",xe,[e("div",ge,[o(i(y),{enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:n(()=>[o(i(z),{class:"relative w-full max-w-4xl p-4"},{default:n(()=>[c.value>0?(a(),t("button",{key:0,onClick:Q,class:"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 z-10"},l[3]||(l[3]=[e("i",{class:"fas fa-chevron-left text-3xl"},null,-1)]))):f("",!0),c.value<B.value-1?(a(),t("button",{key:1,onClick:J,class:"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 z-10"},l[4]||(l[4]=[e("i",{class:"fas fa-chevron-right text-3xl"},null,-1)]))):f("",!0),e("button",{onClick:$,class:"absolute top-4 right-4 text-white hover:text-gray-300 z-10"},l[5]||(l[5]=[e("i",{class:"fas fa-times text-xl"},null,-1)])),e("div",be,[I.value?(a(),t("img",{key:0,src:"/storage/"+I.value.file_path,class:"w-full h-full object-contain"},null,8,we)):f("",!0)]),e("div",ke,[(a(!0),t(x,null,g(h.value,(s,u)=>(a(),t("button",{key:s.id,onClick:F=>K(u),class:Z(["w-16 h-12 rounded overflow-hidden border-2",c.value===u?"border-white":"border-transparent"])},[e("img",{src:"/storage/"+s.file_path,class:"w-full h-full object-cover"},null,8,Se)],10,Ce))),128))])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),o(i(V),{appear:"",show:S.value,as:"template"},{default:n(()=>[o(i(j),{as:"div",onClose:E,class:"relative z-50"},{default:n(()=>[o(i(y),{enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:n(()=>[o(i(M),{class:"fixed inset-0 bg-black/75"})]),_:1}),e("div",Pe,[e("div",je,[o(i(y),{enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:n(()=>[o(i(z),{class:"relative bg-black rounded-lg overflow-hidden max-w-3xl"},{default:n(()=>[e("button",{onClick:E,class:"absolute top-4 right-4 text-white hover:text-gray-300 z-10"},l[6]||(l[6]=[e("i",{class:"fas fa-times text-xl"},null,-1)])),_.value?(a(),t("video",{key:0,src:"/storage/"+_.value.file_path,ref_key:"videoPlayer",ref:P,controls:"",class:"w-full"},null,8,Me)):f("",!0)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]))}};export{Ne as default};
