import{r as O,P as M,L as n,B as i,x as c,Q as o,U as N,C as g,D as e,S as k,G as x,O as T,H as h,J as S,F as y,M as _,N as f,a6 as U,E as C}from"./vendor-vue-g7iCcTkf.js";import{A as D}from"./AppLayout-BDukGJW2.js";import{S as j}from"./app-DGqVli5-.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CnwZ944E.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const Q={class:"py-12"},q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},F={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},$={class:"p-6 text-gray-900"},A={class:"flex justify-between items-center mb-6"},I={class:"bg-gray-50 p-4 rounded-lg mb-6"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},L=["value"],R=["value"],J=["value"],P=["value"],z={class:"mb-6"},G={class:"space-y-8"},H={class:"text-lg font-semibold mb-4 text-blue-600"},W={class:"space-y-4"},X={class:"mb-2"},Y={class:"text-sm font-medium text-gray-900"},Z={class:"mb-3"},ee={class:"flex space-x-4"},se=["name","value","onUpdate:modelValue"],te={class:"text-sm"},le=["onUpdate:modelValue"],oe={class:"mt-8 flex justify-end space-x-4"},ae=["disabled"],re={key:0,class:"fas fa-spinner fa-spin mr-2"},ve={__name:"Create",props:{user:Object,surveyQuestions:Object},setup(u){const w=u,m=O(!1),B=()=>{const t={};return Object.keys(w.surveyQuestions).forEach(s=>{w.surveyQuestions[s].forEach((r,l)=>{const v=b(s,l);t[v]={question_category:s,question_text:r,score:null,comment:""}})}),t},a=M({survey_date:new Date().toISOString().split("T")[0],responses:B()});function b(t,s){return`${t}_${s}`}function V(){m.value=!0;const t=Object.values(a.responses).filter(s=>s.score!==null);a.transform(s=>({...s,responses:t})).post(route("employee-survey.store"),{onSuccess:()=>{j.fire({title:"Berhasil!",text:"Survey berhasil dibuat.",icon:"success",timer:2e3,showConfirmButton:!1}).then(()=>{})},onError:s=>{let r="Terjadi kesalahan saat menyimpan survey.";s.responses&&(r="Pastikan semua pertanyaan telah dijawab."),j.fire({title:"Error!",text:r,icon:"error"})},onFinish:()=>{m.value=!1}})}return(t,s)=>(i(),n(y,null,[c(o(N),{title:"Buat Employee Survey"}),c(D,null,{default:g(()=>[e("div",Q,[e("div",q,[e("div",F,[e("div",$,[e("div",A,[s[2]||(s[2]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Buat Employee Survey"),e("p",{class:"text-gray-600"},"Isi survey karyawan")],-1)),c(o(k),{href:t.route("employee-survey.index"),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"},{default:g(()=>s[1]||(s[1]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),x(" Kembali ")])),_:1},8,["href"])]),e("form",{onSubmit:T(V,["prevent"])},[e("div",I,[s[7]||(s[7]=e("h3",{class:"text-lg font-semibold mb-4"},"Informasi Surveyor",-1)),e("div",K,[e("div",null,[s[3]||(s[3]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nama",-1)),e("input",{type:"text",value:u.user.nama_lengkap,disabled:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm bg-gray-100"},null,8,L)]),e("div",null,[s[4]||(s[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"Jabatan",-1)),e("input",{type:"text",value:u.user.nama_jabatan,disabled:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm bg-gray-100"},null,8,R)]),e("div",null,[s[5]||(s[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Divisi",-1)),e("input",{type:"text",value:u.user.nama_divisi,disabled:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm bg-gray-100"},null,8,J)]),e("div",null,[s[6]||(s[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Outlet",-1)),e("input",{type:"text",value:u.user.nama_outlet,disabled:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm bg-gray-100"},null,8,P)])])]),e("div",z,[s[8]||(s[8]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tanggal Survey",-1)),h(e("input",{type:"date","onUpdate:modelValue":s[0]||(s[0]=r=>o(a).survey_date=r),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[S,o(a).survey_date]])]),e("div",G,[(i(!0),n(y,null,_(u.surveyQuestions,(r,l)=>(i(),n("div",{key:l,class:"border rounded-lg p-6"},[e("h3",H,f(l),1),e("div",W,[(i(!0),n(y,null,_(r,(v,d)=>(i(),n("div",{key:d,class:"border-l-4 border-blue-200 pl-4"},[e("div",X,[e("p",Y,f(v),1)]),e("div",Z,[s[9]||(s[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Score",-1)),e("div",ee,[(i(),n(y,null,_([1,2,3,4,5],p=>e("label",{key:p,class:"flex items-center"},[h(e("input",{type:"radio",name:`score_${l}_${d}`,value:p,"onUpdate:modelValue":E=>o(a).responses[b(l,d)].score=E,class:"mr-2",required:""},null,8,se),[[U,o(a).responses[b(l,d)].score]]),e("span",te,f(p),1)])),64))]),s[10]||(s[10]=e("div",{class:"text-xs text-gray-500 mt-1"}," 1 = Sangat Tidak Setuju, 2 = Tidak Setuju, 3 = Netral, 4 = Setuju, 5 = Sangat Setuju ",-1))]),e("div",null,[s[11]||(s[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Komentar (Opsional)",-1)),h(e("textarea",{"onUpdate:modelValue":p=>o(a).responses[b(l,d)].comment=p,rows:"2",class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Masukkan komentar..."},null,8,le),[[S,o(a).responses[b(l,d)].comment]])])]))),128))])]))),128))]),e("div",oe,[c(o(k),{href:t.route("employee-survey.index"),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"},{default:g(()=>s[12]||(s[12]=[x(" Batal ")])),_:1},8,["href"]),e("button",{type:"submit",disabled:m.value,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50"},[m.value?(i(),n("i",re)):C("",!0),x(" "+f(m.value?"Menyimpan...":"Simpan Survey"),1)],8,ae)])],32)])])])])]),_:1})],64))}};export{ve as default};
