import{P as M,w as D,r as k,c as S,L as r,B as n,E as d,x as U,D as o,N as i,O as C,G as v,l as q,H as u,J as m,Q as l,I as B,F as w,M as P}from"./vendor-vue-g7iCcTkf.js";import{S as y}from"./app-CZyV0iGJ.js";import N from"./PickLocationMapModal-Bsonypp7.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";const A={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 transition-all"},F={class:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl mx-auto p-0 animate-fade-in"},j={class:"px-8 pt-8 pb-2"},E={class:"flex items-center gap-2 mb-6"},R={class:"text-2xl font-bold text-gray-900"},z={key:0,class:"text-center py-4"},H={key:0,class:"text-xs text-red-500 mt-1"},T={key:0,class:"text-xs text-red-500 mt-1"},I=["value"],K={key:0,class:"text-xs text-red-500 mt-1"},G={key:0,class:"text-xs text-red-500 mt-1"},Q={class:"mb-4 grid grid-cols-1 md:grid-cols-2 gap-4"},$={class:"col-span-2 flex items-center gap-2 mt-1"},J={key:0,class:"text-xs text-red-500 mt-1"},W={key:0,class:"text-xs text-red-500 mt-1"},X={key:0,class:"text-xs text-red-500 mt-1"},Y={key:0,class:"text-xs text-red-500 mt-1"},Z={class:"flex justify-end gap-2 pt-4"},ee=["disabled"],te={__name:"OutletFormModal",props:{show:Boolean,mode:String,outlet:Object,dropdownData:Object,isLoadingDropdown:Boolean},emits:["close","success"],setup(c,{emit:h}){const a=c,b=h,e=M({nama_outlet:"",lokasi:"",qr_code:"",lat:"",long:"",keterangan:"",region_id:"",status:"A",url_places:"",sn:"",activation_code:""});D(()=>a.show,p=>{p&&a.mode==="edit"&&a.outlet?(e.nama_outlet=a.outlet.nama_outlet,e.lokasi=a.outlet.lokasi,e.qr_code=a.outlet.qr_code||"",e.lat=a.outlet.lat||"",e.long=a.outlet.long||"",e.keterangan=a.outlet.keterangan||"",e.region_id=a.outlet.region_id,e.status=a.outlet.status,e.url_places=a.outlet.url_places||"",e.sn=a.outlet.sn||"",e.activation_code=a.outlet.activation_code||""):p&&a.mode==="create"&&(e.nama_outlet="",e.lokasi="",e.qr_code="",e.lat="",e.long="",e.keterangan="",e.region_id="",e.status="A",e.url_places="",e.sn="",e.activation_code="")});const g=k(!1),f=S(()=>!a.isLoadingDropdown&&a.dropdownData&&a.dropdownData.regions),x=k(!1);function _({lat:p,long:t,alamat:s}){e.lat=p,e.long=t,s&&(e.lokasi=s)}async function V(){g.value=!0,a.mode==="create"?e.post(route("outlets.store"),{onSuccess:()=>{y.fire("Berhasil","Outlet berhasil ditambahkan!","success"),b("success"),b("close")},onError:()=>g.value=!1,onFinish:()=>g.value=!1}):a.mode==="edit"&&a.outlet&&(e._method="PUT",e.post(route("outlets.update",a.outlet.id_outlet),{onSuccess:()=>{y.fire("Berhasil","Outlet berhasil diupdate!","success"),b("success"),b("close")},onError:()=>g.value=!1,onFinish:()=>g.value=!1}))}function L(){b("close")}return(p,t)=>(n(),r(w,null,[c.show?(n(),r("div",A,[o("div",F,[o("div",j,[o("div",E,[t[12]||(t[12]=o("svg",{class:"w-7 h-7 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),o("h3",R,i(c.mode==="edit"?"Edit":"Tambah")+" Outlet",1)]),o("form",{onSubmit:C(V,["prevent"]),class:"space-y-5"},[c.isLoadingDropdown?(n(),r("div",z,t[13]||(t[13]=[o("div",{class:"inline-flex items-center px-4 py-2 font-semibold leading-6 text-blue-600 transition ease-in-out duration-150"},[o("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),v(" Memuat data dropdown... ")],-1)]))):d("",!0),o("div",{class:q({"opacity-50 pointer-events-none":c.isLoadingDropdown||!f.value})},[o("div",null,[t[14]||(t[14]=o("label",{class:"block text-sm font-medium text-gray-700"},"Nama Outlet",-1)),u(o("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l(e).nama_outlet=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500",required:"",maxlength:"100"},null,512),[[m,l(e).nama_outlet]]),l(e).errors.nama_outlet?(n(),r("div",H,i(l(e).errors.nama_outlet),1)):d("",!0)]),o("div",null,[t[15]||(t[15]=o("label",{class:"block text-sm font-medium text-gray-700"},"Lokasi",-1)),u(o("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>l(e).lokasi=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500",rows:"3",required:"",placeholder:"Alamat lengkap outlet"},null,512),[[m,l(e).lokasi]]),l(e).errors.lokasi?(n(),r("div",T,i(l(e).errors.lokasi),1)):d("",!0)]),o("div",null,[t[17]||(t[17]=o("label",{class:"block text-sm font-medium text-gray-700"},"Region",-1)),u(o("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>l(e).region_id=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500",required:""},[t[16]||(t[16]=o("option",{value:""},"Pilih Region",-1)),(n(!0),r(w,null,P(c.dropdownData.regions,s=>(n(),r("option",{key:s.id,value:s.id},i(s.name),9,I))),128))],512),[[B,l(e).region_id]]),l(e).errors.region_id?(n(),r("div",K,i(l(e).errors.region_id),1)):d("",!0)]),o("div",null,[t[18]||(t[18]=o("label",{class:"block text-sm font-medium text-gray-700"},"QR Code (opsional)",-1)),u(o("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l(e).qr_code=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500",maxlength:"255",placeholder:"Isi manual atau kosongkan untuk auto-generate"},null,512),[[m,l(e).qr_code]]),l(e).errors.qr_code?(n(),r("div",G,i(l(e).errors.qr_code),1)):d("",!0)]),o("div",Q,[o("div",null,[t[19]||(t[19]=o("label",{class:"block text-sm font-medium mb-1"},"Latitude",-1)),u(o("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l(e).lat=s),type:"text",class:"form-input w-full",placeholder:"Latitude"},null,512),[[m,l(e).lat]])]),o("div",null,[t[20]||(t[20]=o("label",{class:"block text-sm font-medium mb-1"},"Longitude",-1)),u(o("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l(e).long=s),type:"text",class:"form-input w-full",placeholder:"Longitude"},null,512),[[m,l(e).long]])]),o("div",$,[o("button",{type:"button",class:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",onClick:t[6]||(t[6]=s=>x.value=!0)},t[21]||(t[21]=[o("i",{class:"fas fa-map-marked-alt"},null,-1),v(" Pilih dari Peta ")])),t[22]||(t[22]=o("span",{class:"text-xs text-gray-400"},"(Klik peta untuk mengisi lat/long)",-1))])]),o("div",null,[t[23]||(t[23]=o("label",{class:"block text-sm font-medium text-gray-700"},"URL Google Places (opsional)",-1)),u(o("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>l(e).url_places=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500",type:"url",placeholder:"https://maps.google.com/..."},null,512),[[m,l(e).url_places]]),l(e).errors.url_places?(n(),r("div",J,i(l(e).errors.url_places),1)):d("",!0)]),o("div",null,[t[24]||(t[24]=o("label",{class:"block text-sm font-medium text-gray-700"},"Keterangan",-1)),u(o("textarea",{"onUpdate:modelValue":t[8]||(t[8]=s=>l(e).keterangan=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Keterangan tambahan (opsional)"},null,512),[[m,l(e).keterangan]]),l(e).errors.keterangan?(n(),r("div",W,i(l(e).errors.keterangan),1)):d("",!0)]),o("div",null,[t[25]||(t[25]=o("label",{class:"block text-sm font-medium text-gray-700"},"Serial Number (SN)",-1)),u(o("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>l(e).sn=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500",maxlength:"100",placeholder:"Serial Number"},null,512),[[m,l(e).sn]]),l(e).errors.sn?(n(),r("div",X,i(l(e).errors.sn),1)):d("",!0)]),o("div",null,[t[26]||(t[26]=o("label",{class:"block text-sm font-medium text-gray-700"},"Activation Code",-1)),u(o("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>l(e).activation_code=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500",maxlength:"100",placeholder:"Activation Code"},null,512),[[m,l(e).activation_code]]),l(e).errors.activation_code?(n(),r("div",Y,i(l(e).errors.activation_code),1)):d("",!0)])],2),o("div",Z,[o("button",{type:"button",onClick:L,class:"px-4 py-2 rounded-lg bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200"},"Batal"),o("button",{type:"submit",disabled:g.value||c.isLoadingDropdown||!f.value,class:"px-4 py-2 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 disabled:opacity-60"},i(c.mode==="edit"?"Update":"Simpan"),9,ee)])],32)])])])):d("",!0),U(N,{show:x.value,lat:l(e).lat,long:l(e).long,onClose:t[11]||(t[11]=s=>x.value=!1),onPicked:_},null,8,["show","lat","long"])],64))}},ie=O(te,[["__scopeId","data-v-d27603f8"]]);export{ie as default};
