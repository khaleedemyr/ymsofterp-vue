import{A as k,B as i,C as h,D as t,x as A,G as g,N as r,Q as j,S as R,L as f,E as u,l as q,W as y}from"./vendor-vue-g7iCcTkf.js";import{S as d}from"./app-DIuSMidk.js";import{A as S}from"./AppLayout-BfEUsI4L.js";import{a as b}from"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CG_QM0dl.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const D={class:"max-w-4xl w-full mx-auto py-8 px-2"},L={class:"mb-6 flex justify-between items-center"},N={class:"text-gray-600 mt-1"},$={class:"bg-white rounded-xl shadow-lg p-6 space-y-6"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},E={class:"text-sm font-semibold text-gray-900 mt-1"},V={class:"text-sm font-semibold text-gray-900 mt-1"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},G={class:"text-sm text-gray-900 mt-1"},I={class:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs"},M={class:"text-sm text-gray-900 mt-1"},H={class:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs"},O={class:"text-sm text-gray-900 mt-1"},P={class:"mt-1"},Y={key:0},K={class:"text-sm text-gray-700 whitespace-pre-line"},z={key:1},F={class:"text-sm text-gray-700 whitespace-pre-line"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},J={class:"text-sm text-gray-900 mt-1"},U={class:"text-sm text-gray-900 mt-1"},Z={key:0},_={class:"text-sm text-gray-900 mt-1"},tt={key:1},et={class:"text-sm text-gray-900 mt-1"},st={key:2},rt={class:"text-sm text-red-600 mt-1"},at={key:3},nt={class:"text-sm text-gray-900 mt-1"},ot={key:2,class:"flex gap-3 pt-4 border-t border-gray-200"},lt={key:3,class:"flex gap-3 pt-4 border-t border-gray-200"},bt={__name:"Show",props:{transfer:Object},setup(s){const c=s;function p(l){return l?new Date(l).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function B(l){return{Pending:"bg-yellow-100 text-yellow-800",Approved:"bg-green-100 text-green-800",Completed:"bg-blue-100 text-blue-800",Rejected:"bg-red-100 text-red-800"}[l]||"bg-gray-100 text-gray-800"}async function w(){var e,n,o,a,m,x;if((await d.fire({title:"Approve Transfer?",text:`Transfer asset "${(e=c.transfer.asset)==null?void 0:e.name}" dari ${(n=c.transfer.from_outlet)==null?void 0:n.name} ke ${(o=c.transfer.to_outlet)==null?void 0:o.name}?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Approve",cancelButtonText:"Batal"})).isConfirmed)try{(a=(await b.post(`/asset-management/transfers/${c.transfer.id}/approve`,{},{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).data)!=null&&a.success&&(d.fire("Berhasil","Transfer berhasil di-approve","success"),y.reload())}catch(v){d.fire("Error",((x=(m=v.response)==null?void 0:m.data)==null?void 0:x.message)||"Gagal approve transfer","error")}}async function C(){var e,n,o;const{value:l}=await d.fire({title:"Reject Transfer?",input:"textarea",inputLabel:"Alasan Rejection",inputPlaceholder:"Masukkan alasan rejection...",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Reject",cancelButtonText:"Batal",inputValidator:a=>{if(!a)return"Alasan rejection harus diisi!"}});if(l)try{(e=(await b.post(`/asset-management/transfers/${c.transfer.id}/reject`,{rejection_reason:l},{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).data)!=null&&e.success&&(d.fire("Berhasil","Transfer berhasil di-reject","success"),y.reload())}catch(a){d.fire("Error",((o=(n=a.response)==null?void 0:n.data)==null?void 0:o.message)||"Gagal reject transfer","error")}}async function T(){var e,n,o,a;if((await d.fire({title:"Complete Transfer?",text:`Konfirmasi bahwa asset sudah dipindahkan ke ${(e=c.transfer.to_outlet)==null?void 0:e.name}?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Complete",cancelButtonText:"Batal"})).isConfirmed)try{(n=(await b.post(`/asset-management/transfers/${c.transfer.id}/complete`,{},{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).data)!=null&&n.success&&(d.fire("Berhasil","Transfer berhasil di-complete","success"),y.reload())}catch(m){d.fire("Error",((a=(o=m.response)==null?void 0:o.data)==null?void 0:a.message)||"Gagal complete transfer","error")}}return(l,e)=>(i(),k(S,null,{default:h(()=>{var n,o,a,m,x;return[t("div",D,[t("div",L,[t("div",null,[e[0]||(e[0]=t("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[t("i",{class:"fa-solid fa-exchange-alt text-blue-500"}),g(" Transfer Detail ")],-1)),t("p",N,"Transfer #"+r(s.transfer.id),1)]),A(j(R),{href:"/asset-management/transfers",class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"},{default:h(()=>e[1]||(e[1]=[t("i",{class:"fa-solid fa-arrow-left"},null,-1),g(" Kembali ")])),_:1})]),t("div",$,[t("div",null,[e[4]||(e[4]=t("h2",{class:"text-lg font-bold text-gray-900 mb-4"},"Asset Information",-1)),t("div",X,[t("div",null,[e[2]||(e[2]=t("label",{class:"text-sm font-medium text-gray-500"},"Asset Code",-1)),t("p",E,r((n=s.transfer.asset)==null?void 0:n.asset_code),1)]),t("div",null,[e[3]||(e[3]=t("label",{class:"text-sm font-medium text-gray-500"},"Asset Name",-1)),t("p",V,r((o=s.transfer.asset)==null?void 0:o.name),1)])])]),t("div",null,[e[9]||(e[9]=t("h2",{class:"text-lg font-bold text-gray-900 mb-4"},"Transfer Information",-1)),t("div",W,[t("div",null,[e[5]||(e[5]=t("label",{class:"text-sm font-medium text-gray-500"},"From Outlet",-1)),t("p",G,[t("span",I,r(((a=s.transfer.from_outlet)==null?void 0:a.name)||"Tidak Terikat"),1)])]),t("div",null,[e[6]||(e[6]=t("label",{class:"text-sm font-medium text-gray-500"},"To Outlet",-1)),t("p",M,[t("span",H,r(((m=s.transfer.to_outlet)==null?void 0:m.name)||"-"),1)])]),t("div",null,[e[7]||(e[7]=t("label",{class:"text-sm font-medium text-gray-500"},"Transfer Date",-1)),t("p",O,r(p(s.transfer.transfer_date)),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"text-sm font-medium text-gray-500"},"Status",-1)),t("p",P,[t("span",{class:q([B(s.transfer.status),"px-2 py-1 rounded-full text-xs font-medium"])},r(s.transfer.status),3)])])])]),s.transfer.reason?(i(),f("div",Y,[e[10]||(e[10]=t("h2",{class:"text-lg font-bold text-gray-900 mb-4"},"Reason",-1)),t("p",K,r(s.transfer.reason),1)])):u("",!0),s.transfer.notes?(i(),f("div",z,[e[11]||(e[11]=t("h2",{class:"text-lg font-bold text-gray-900 mb-4"},"Notes",-1)),t("p",F,r(s.transfer.notes),1)])):u("",!0),t("div",null,[e[18]||(e[18]=t("h2",{class:"text-lg font-bold text-gray-900 mb-4"},"Request Information",-1)),t("div",Q,[t("div",null,[e[12]||(e[12]=t("label",{class:"text-sm font-medium text-gray-500"},"Requested By",-1)),t("p",J,r(((x=s.transfer.requester)==null?void 0:x.name)||"-"),1)]),t("div",null,[e[13]||(e[13]=t("label",{class:"text-sm font-medium text-gray-500"},"Requested At",-1)),t("p",U,r(p(s.transfer.created_at)),1)]),s.transfer.approver?(i(),f("div",Z,[e[14]||(e[14]=t("label",{class:"text-sm font-medium text-gray-500"},"Approved By",-1)),t("p",_,r(s.transfer.approver.name),1)])):u("",!0),s.transfer.approved_at?(i(),f("div",tt,[e[15]||(e[15]=t("label",{class:"text-sm font-medium text-gray-500"},"Approved At",-1)),t("p",et,r(p(s.transfer.approved_at)),1)])):u("",!0),s.transfer.rejection_reason?(i(),f("div",st,[e[16]||(e[16]=t("label",{class:"text-sm font-medium text-gray-500"},"Rejection Reason",-1)),t("p",rt,r(s.transfer.rejection_reason),1)])):u("",!0),s.transfer.completed_at?(i(),f("div",at,[e[17]||(e[17]=t("label",{class:"text-sm font-medium text-gray-500"},"Completed At",-1)),t("p",nt,r(p(s.transfer.completed_at)),1)])):u("",!0)])]),s.transfer.status==="Pending"?(i(),f("div",ot,[t("button",{onClick:w,class:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg flex items-center gap-2"},e[19]||(e[19]=[t("i",{class:"fa-solid fa-check"},null,-1),g(" Approve ")])),t("button",{onClick:C,class:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg flex items-center gap-2"},e[20]||(e[20]=[t("i",{class:"fa-solid fa-times"},null,-1),g(" Reject ")]))])):u("",!0),s.transfer.status==="Approved"?(i(),f("div",lt,[t("button",{onClick:T,class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center gap-2"},e[21]||(e[21]=[t("i",{class:"fa-solid fa-check-circle"},null,-1),g(" Complete Transfer ")]))])):u("",!0)])])]}),_:1}))}};export{bt as default};
