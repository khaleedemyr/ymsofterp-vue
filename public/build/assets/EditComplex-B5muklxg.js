import{r as w,A as B,B as s,C as E,D as e,G as p,O as S,H as _,L as a,E as b,J as P,N as d,F as y,M as x,I as $,W as V}from"./vendor-vue-g7iCcTkf.js";import{A as T}from"./AppLayout-DZJ25Yod.js";import"./vendor-utils-CpgP2uT4.js";import"./app-BujIObx9.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DNpNU_ax.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const G={class:"w-full py-8 px-4"},O={class:"max-w-7xl mx-auto"},F={class:"bg-white rounded-2xl shadow-lg p-8"},L={class:"space-y-6"},Q={key:0,class:"mt-1 text-sm text-red-600"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},z=["value"],H={key:0,class:"mt-1 text-sm text-red-600"},J={key:0,class:"mt-1 text-sm text-red-600"},K={class:"space-y-8"},R={class:"flex items-center justify-between mb-6"},X={class:"text-lg font-semibold text-gray-800"},Y=["onClick"],Z={class:"mb-6"},I=["for"],ee=["id","onUpdate:modelValue"],te=["value"],se={key:0,class:"mt-1 text-sm text-red-600"},ae={class:"space-y-4"},ie={class:"flex items-center justify-between"},re=["onClick"],oe={class:"flex items-center justify-between mb-4"},le={class:"text-sm font-semibold text-gray-700"},ne=["onClick"],ue={class:"mb-4"},de=["for"],me=["id","onUpdate:modelValue"],pe={key:0,class:"mt-1 text-sm text-red-600"},ce={class:"space-y-3"},be={class:"flex items-center justify-between"},fe=["onClick"],ge=["for"],ve=["id","onUpdate:modelValue"],_e=["value"],ye={key:0,class:"mt-1 text-sm text-red-600"},xe=["for"],ke={class:"flex gap-2"},he=["id","onUpdate:modelValue"],$e=["onClick"],we={key:0,class:"mt-1 text-sm text-red-600"},Pe={class:"flex gap-4 pt-6"},Ce=["disabled"],Ve={key:0,class:"fa-solid fa-spinner fa-spin mr-2"},Ae={key:1,class:"fa-solid fa-save mr-2"},Ge={__name:"EditComplex",props:{guidance:Object,categories:Array,parameters:Array,departemenOptions:Array},setup(h){const f=h,r=w({title:f.guidance.title||"",departemen:f.guidance.departemen||"",status:f.guidance.status||"A",categories:f.guidance.categories&&f.guidance.categories.length>0?f.guidance.categories:[{category_id:"",parameters:[{parameter_pemeriksaan:"",details:[{parameter_id:"",point:0}]}]}]}),l=w({}),k=w(!1);function A(){r.value.categories.push({category_id:"",parameters:[{parameter_pemeriksaan:"",details:[{parameter_id:"",point:0}]}]})}function U(u){r.value.categories.length>1&&r.value.categories.splice(u,1)}function q(u){r.value.categories[u].parameters.push({parameter_pemeriksaan:"",details:[{parameter_id:"",point:0}]})}function M(u,t){r.value.categories[u].parameters.length>1&&r.value.categories[u].parameters.splice(t,1)}function j(u,t){r.value.categories[u].parameters[t].details.push({parameter_id:"",point:0})}function D(u,t,n){r.value.categories[u].parameters[t].details.length>1&&r.value.categories[u].parameters[t].details.splice(n,1)}function N(){k.value=!0,l.value={},V.put(`/qa-guidances/${f.guidance.id}`,r.value,{onSuccess:()=>{},onError:u=>{l.value=u},onFinish:()=>{k.value=!1}})}function C(){V.visit(`/qa-guidances/${f.guidance.id}`)}return(u,t)=>(s(),B(T,{title:"Edit QA Guidance"},{default:E(()=>[e("div",G,[e("div",O,[e("div",{class:"flex items-center gap-4 mb-6"},[e("button",{onClick:C,class:"text-gray-500 hover:text-gray-700 transition"},t[3]||(t[3]=[e("i",{class:"fa-solid fa-arrow-left text-xl"},null,-1)])),t[4]||(t[4]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-edit text-blue-500"}),p(" Edit QA Guidance ")],-1))]),e("div",F,[e("form",{onSubmit:S(N,["prevent"]),class:"space-y-8"},[e("div",L,[e("div",null,[t[5]||(t[5]=e("label",{for:"title",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Title "),e("span",{class:"text-red-500"},"*")],-1)),_(e("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=n=>r.value.title=n),type:"text",class:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",placeholder:"Masukkan title QA Guidance",required:""},null,512),[[P,r.value.title]]),l.value.title?(s(),a("div",Q,d(l.value.title),1)):b("",!0)]),e("div",W,[e("div",null,[t[7]||(t[7]=e("label",{for:"departemen",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Departemen "),e("span",{class:"text-red-500"},"*")],-1)),_(e("select",{id:"departemen","onUpdate:modelValue":t[1]||(t[1]=n=>r.value.departemen=n),class:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},[t[6]||(t[6]=e("option",{value:""},"Pilih Departemen",-1)),(s(!0),a(y,null,x(h.departemenOptions,n=>(s(),a("option",{key:n,value:n},d(n),9,z))),128))],512),[[$,r.value.departemen]]),l.value.departemen?(s(),a("div",H,d(l.value.departemen),1)):b("",!0)]),e("div",null,[t[9]||(t[9]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Status "),e("span",{class:"text-red-500"},"*")],-1)),_(e("select",{id:"status","onUpdate:modelValue":t[2]||(t[2]=n=>r.value.status=n),class:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},t[8]||(t[8]=[e("option",{value:"A"},"Aktif",-1),e("option",{value:"N"},"Non-Aktif",-1)]),512),[[$,r.value.status]]),l.value.status?(s(),a("div",J,d(l.value.status),1)):b("",!0)])])]),e("div",K,[e("div",{class:"flex items-center justify-between"},[t[11]||(t[11]=e("h3",{class:"text-xl font-semibold text-gray-800"},"Categories & Parameters",-1)),e("button",{type:"button",onClick:A,class:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-xl font-medium transition flex items-center"},t[10]||(t[10]=[e("i",{class:"fa-solid fa-plus mr-2"},null,-1),p("Tambah Category ")]))]),(s(!0),a(y,null,x(r.value.categories,(n,i)=>(s(),a("div",{key:i,class:"border border-gray-200 rounded-xl p-6 bg-gray-50"},[e("div",R,[e("h4",X,"Category "+d(i+1),1),r.value.categories.length>1?(s(),a("button",{key:0,type:"button",onClick:m=>U(i),class:"px-3 py-1 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm transition"},t[12]||(t[12]=[e("i",{class:"fa-solid fa-trash"},null,-1)]),8,Y)):b("",!0)]),e("div",Z,[e("label",{for:`category_${i}`,class:"block text-sm font-medium text-gray-700 mb-2"},t[13]||(t[13]=[p(" Pilih Category "),e("span",{class:"text-red-500"},"*",-1)]),8,I),_(e("select",{id:`category_${i}`,"onUpdate:modelValue":m=>n.category_id=m,class:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},[t[14]||(t[14]=e("option",{value:""},"Pilih Category",-1)),(s(!0),a(y,null,x(h.categories,m=>(s(),a("option",{key:m.id,value:m.id},d(m.categories),9,te))),128))],8,ee),[[$,n.category_id]]),l.value[`categories.${i}.category_id`]?(s(),a("div",se,d(l.value[`categories.${i}.category_id`]),1)):b("",!0)]),e("div",ae,[e("div",ie,[t[16]||(t[16]=e("h5",{class:"text-md font-semibold text-gray-700"},"Parameter Pemeriksaan",-1)),e("button",{type:"button",onClick:m=>q(i),class:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm transition flex items-center"},t[15]||(t[15]=[e("i",{class:"fa-solid fa-plus mr-1"},null,-1),p("Tambah Parameter Pemeriksaan ")]),8,re)]),(s(!0),a(y,null,x(n.parameters,(m,o)=>(s(),a("div",{key:o,class:"border border-gray-300 rounded-lg p-4 bg-white"},[e("div",oe,[e("h6",le,"Parameter Pemeriksaan "+d(o+1),1),n.parameters.length>1?(s(),a("button",{key:0,type:"button",onClick:g=>M(i,o),class:"px-2 py-1 bg-red-500 hover:bg-red-600 text-white rounded-lg text-xs transition"},t[17]||(t[17]=[e("i",{class:"fa-solid fa-trash"},null,-1)]),8,ne)):b("",!0)]),e("div",ue,[e("label",{for:`parameter_pemeriksaan_${i}_${o}`,class:"block text-sm font-medium text-gray-700 mb-2"},t[18]||(t[18]=[p(" Nama Parameter Pemeriksaan "),e("span",{class:"text-red-500"},"*",-1)]),8,de),_(e("textarea",{id:`parameter_pemeriksaan_${i}_${o}`,"onUpdate:modelValue":g=>m.parameter_pemeriksaan=g,rows:"3",class:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition resize-y",placeholder:"Masukkan nama parameter pemeriksaan",required:""},null,8,me),[[P,m.parameter_pemeriksaan]]),l.value[`categories.${i}.parameters.${o}.parameter_pemeriksaan`]?(s(),a("div",pe,d(l.value[`categories.${i}.parameters.${o}.parameter_pemeriksaan`]),1)):b("",!0)]),e("div",ce,[e("div",be,[t[20]||(t[20]=e("h6",{class:"text-sm font-medium text-gray-600"},"Parameter & Point",-1)),e("button",{type:"button",onClick:g=>j(i,o),class:"px-2 py-1 bg-green-500 hover:bg-green-600 text-white rounded-lg text-xs transition flex items-center"},t[19]||(t[19]=[e("i",{class:"fa-solid fa-plus mr-1"},null,-1),p("Tambah Parameter ")]),8,fe)]),(s(!0),a(y,null,x(m.details,(g,c)=>(s(),a("div",{key:c,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},[e("div",null,[e("label",{for:`parameter_${i}_${o}_${c}`,class:"block text-sm font-medium text-gray-700 mb-2"},t[21]||(t[21]=[p(" Parameter "),e("span",{class:"text-red-500"},"*",-1)]),8,ge),_(e("select",{id:`parameter_${i}_${o}_${c}`,"onUpdate:modelValue":v=>g.parameter_id=v,class:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},[t[22]||(t[22]=e("option",{value:""},"Pilih Parameter",-1)),(s(!0),a(y,null,x(h.parameters,v=>(s(),a("option",{key:v.id,value:v.id},d(v.parameter),9,_e))),128))],8,ve),[[$,g.parameter_id]]),l.value[`categories.${i}.parameters.${o}.details.${c}.parameter_id`]?(s(),a("div",ye,d(l.value[`categories.${i}.parameters.${o}.details.${c}.parameter_id`]),1)):b("",!0)]),e("div",null,[e("label",{for:`point_${i}_${o}_${c}`,class:"block text-sm font-medium text-gray-700 mb-2"},t[23]||(t[23]=[p(" Point "),e("span",{class:"text-red-500"},"*",-1)]),8,xe),e("div",ke,[_(e("input",{id:`point_${i}_${o}_${c}`,"onUpdate:modelValue":v=>g.point=v,type:"number",min:"0",class:"flex-1 px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",placeholder:"Masukkan point",required:""},null,8,he),[[P,g.point,void 0,{number:!0}]]),m.details.length>1?(s(),a("button",{key:0,type:"button",onClick:v=>D(i,o,c),class:"px-3 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl transition"},t[24]||(t[24]=[e("i",{class:"fa-solid fa-trash"},null,-1)]),8,$e)):b("",!0)]),l.value[`categories.${i}.parameters.${o}.details.${c}.point`]?(s(),a("div",we,d(l.value[`categories.${i}.parameters.${o}.details.${c}.point`]),1)):b("",!0)])]))),128))])]))),128))])]))),128))]),e("div",Pe,[e("button",{type:"button",onClick:C,class:"flex-1 px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-xl font-medium transition"}," Batal "),e("button",{type:"submit",disabled:k.value,class:"flex-1 px-6 py-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-xl font-medium transition flex items-center justify-center"},[k.value?(s(),a("i",Ve)):(s(),a("i",Ae)),p(" "+d(k.value?"Menyimpan...":"Update"),1)],8,Ce)])],32)])])])]),_:1}))}};export{Ge as default};
