import{r as k,W as c,w as K,A as X,B as n,C as Z,D as t,G as D,N as o,H as C,J as tt,Q as g,I as S,L as d,F as _,M as P,E as et,l as x,O as T}from"./vendor-vue-g7iCcTkf.js";import{l as st}from"./lodash-DB3HVzpp.js";import{S as B}from"./app-DdwtQE43.js";import{A as rt}from"./AppLayout-CLYhXf-W.js";import{a as at}from"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CauiUg4O.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const ot={class:"w-full py-8 px-4"},lt={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},it={class:"rounded-xl shadow-lg p-6 border-l-4 border-blue-500 bg-white hover:shadow-xl transition-all"},nt={class:"flex items-center justify-between"},dt={class:"text-2xl font-bold text-gray-900"},ut={class:"rounded-xl shadow-lg p-6 border-l-4 border-yellow-500 bg-white hover:shadow-xl transition-all"},xt={class:"flex items-center justify-between"},gt={class:"text-2xl font-bold text-gray-900"},pt={class:"rounded-xl shadow-lg p-6 border-l-4 border-orange-500 bg-white hover:shadow-xl transition-all"},ct={class:"flex items-center justify-between"},ft={class:"text-2xl font-bold text-gray-900"},bt={class:"rounded-xl shadow-lg p-6 border-l-4 border-green-500 bg-white hover:shadow-xl transition-all"},yt={class:"flex items-center justify-between"},mt={class:"text-2xl font-bold text-gray-900"},vt={class:"flex flex-col md:flex-row gap-4 mb-6"},wt=["value"],ht=["value"],kt={class:"bg-white rounded-2xl shadow-lg overflow-hidden"},Ct={class:"overflow-x-auto"},_t={class:"min-w-full divide-y divide-gray-200"},Tt={class:"bg-white divide-y divide-gray-200"},Dt={class:"px-6 py-4 whitespace-nowrap"},St={class:"text-sm font-medium text-gray-900"},Pt={class:"px-6 py-4"},Bt={class:"text-sm text-gray-900 max-w-xs truncate"},$t={class:"px-6 py-4 whitespace-nowrap"},jt={class:x(["inline-flex px-2 py-1 text-xs font-semibold rounded-full","bg-blue-100 text-blue-800"])},Ot={class:"px-6 py-4 whitespace-nowrap"},Lt={class:"px-6 py-4 whitespace-nowrap"},Mt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ht={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Vt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},It={class:"px-6 py-4 whitespace-nowrap text-sm"},Nt={key:0,class:"flex items-center gap-2"},Ut={class:"text-gray-900"},Et={key:1,class:"text-gray-400"},At={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ft={class:"flex items-center gap-2"},Wt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Gt={class:"flex gap-2"},Rt=["onClick"],Yt=["onClick"],zt=["onClick"],Jt={key:0,class:"text-center py-12"},Qt={class:"mt-4 flex flex-col sm:flex-row justify-between items-center gap-4"},qt={class:"text-sm text-gray-600"},Kt={class:"flex rounded-lg shadow-sm -space-x-px","aria-label":"Pagination"},Xt=["disabled"],Zt=["disabled"],te=["onClick","disabled","innerHTML"],ee=["innerHTML"],se=["disabled"],re=["disabled"],fe={__name:"Index",props:{data:Object,filters:Object,filterOptions:Object,statistics:{type:Object,default:()=>({total:0,open:0,in_progress:0,closed:0})}},setup(a){var j,O,L,M,H;const w=a,f=k(((j=w.filters)==null?void 0:j.search)||""),b=k(((O=w.filters)==null?void 0:O.status)||"all"),y=k(((L=w.filters)==null?void 0:L.priority)||"all"),m=k(((M=w.filters)==null?void 0:M.division)||"all"),v=k(((H=w.filters)==null?void 0:H.per_page)||15),u=st.debounce(()=>{c.get("/tickets",{search:f.value,status:b.value,priority:y.value,division:m.value,per_page:v.value},{preserveState:!0,replace:!0})},400);function F(){u()}function h(r){var e;if(r)try{const s=r.startsWith("http")?r:window.location.origin+r,i=new URL(s);i.searchParams.set("search",f.value),i.searchParams.set("status",b.value),i.searchParams.set("priority",y.value),i.searchParams.set("division",m.value),i.searchParams.set("per_page",v.value);const l=i.pathname+"?"+i.searchParams.toString();c.visit(l,{preserveState:!0,replace:!0})}catch(s){console.error("Error in goToPage:",s),c.get("/tickets",{page:((e=r.match(/page=(\d+)/))==null?void 0:e[1])||1,search:f.value,status:b.value,priority:y.value,division:m.value,per_page:v.value},{preserveState:!0,replace:!0})}}function $(){c.visit("/tickets/create")}function W(r){c.visit(`/tickets/${r.id}`)}function G(r){c.visit(`/tickets/${r.id}/edit`)}async function R(r){var s,i;if((await B.fire({title:"Hapus Ticket?",text:`Yakin ingin menghapus ticket ${r.ticket_number}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed)try{const l=await at.delete(`/tickets/${r.id}`);l.data.success&&(B.fire("Berhasil",l.data.message,"success"),c.reload())}catch(l){B.fire("Error",((i=(s=l.response)==null?void 0:s.data)==null?void 0:i.message)||"Gagal menghapus ticket","error")}}function Y(r){return{open:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",pending:"bg-purple-100 text-purple-800",resolved:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"}[r]||"bg-gray-100 text-gray-800"}function z(r){return!r||r===0?"bg-gray-100 text-gray-500":r<=2?"bg-blue-100 text-blue-600":r<=5?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-600"}function J(r){if(!r)return"No Due Date";const e=new Date,i=new Date(r)-e,l=Math.ceil(i/(1e3*60*60*24));return l<0?"Overdue":l===0?"Due Today":l===1?"Due Tomorrow":l<=3?`${l} days left`:`${l} days left`}function Q(r,e){if(!r)return"bg-gray-100 text-gray-500";if(e==="closed"||e==="resolved")return"bg-green-100 text-green-600";const s=new Date,l=new Date(r)-s,p=Math.ceil(l/(1e3*60*60*24));return p<0?"bg-red-100 text-red-600":p===0?"bg-orange-100 text-orange-600":p===1?"bg-yellow-100 text-yellow-600":p<=3?"bg-yellow-50 text-yellow-700":"bg-green-100 text-green-600"}function q(r){return{1:"bg-green-100 text-green-800",2:"bg-yellow-100 text-yellow-800",3:"bg-orange-100 text-orange-800",4:"bg-red-100 text-red-800"}[r]||"bg-gray-100 text-gray-800"}return K([f,b,y,m,v],()=>{u()}),(r,e)=>(n(),X(rt,{title:"Ticketing System"},{default:Z(()=>[t("div",ot,[t("div",{class:"flex justify-between items-center mb-6"},[e[13]||(e[13]=t("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[t("i",{class:"fa-solid fa-ticket-alt text-blue-500"}),D(" Ticketing System ")],-1)),t("button",{onClick:$,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"}," + Buat Ticket Baru ")]),t("div",lt,[t("div",it,[t("div",nt,[t("div",null,[e[14]||(e[14]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Tickets",-1)),t("p",dt,o(a.statistics.total),1)]),e[15]||(e[15]=t("i",{class:"fa-solid fa-ticket-alt text-4xl text-blue-300"},null,-1))])]),t("div",ut,[t("div",xt,[t("div",null,[e[16]||(e[16]=t("p",{class:"text-sm font-medium text-gray-600"},"Open",-1)),t("p",gt,o(a.statistics.open),1)]),e[17]||(e[17]=t("i",{class:"fa-solid fa-clock text-4xl text-yellow-300"},null,-1))])]),t("div",pt,[t("div",ct,[t("div",null,[e[18]||(e[18]=t("p",{class:"text-sm font-medium text-gray-600"},"In Progress",-1)),t("p",ft,o(a.statistics.in_progress),1)]),e[19]||(e[19]=t("i",{class:"fa-solid fa-spinner text-4xl text-orange-300"},null,-1))])]),t("div",bt,[t("div",yt,[t("div",null,[e[20]||(e[20]=t("p",{class:"text-sm font-medium text-gray-600"},"Closed",-1)),t("p",mt,o(a.statistics.closed),1)]),e[21]||(e[21]=t("i",{class:"fa-solid fa-check-circle text-4xl text-green-300"},null,-1))])])]),t("div",vt,[C(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>f.value=s),onInput:F,placeholder:"Cari ticket number, title...",class:"flex-1 px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},null,544),[[tt,f.value]]),C(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>b.value=s),onChange:e[2]||(e[2]=(...s)=>g(u)&&g(u)(...s)),class:"w-full md:w-auto px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},e[22]||(e[22]=[t("option",{value:"all"},"Semua Status",-1),t("option",{value:"open"},"Open",-1),t("option",{value:"in_progress"},"In Progress",-1),t("option",{value:"resolved"},"Resolved",-1),t("option",{value:"closed"},"Closed",-1)]),544),[[S,b.value]]),C(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>y.value=s),onChange:e[4]||(e[4]=(...s)=>g(u)&&g(u)(...s)),class:"w-full md:w-auto px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},[e[23]||(e[23]=t("option",{value:"all"},"Semua Prioritas",-1)),(n(!0),d(_,null,P(a.filterOptions.priorities,s=>(n(),d("option",{key:s.id,value:s.id},o(s.name),9,wt))),128))],544),[[S,y.value]]),C(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>m.value=s),onChange:e[6]||(e[6]=(...s)=>g(u)&&g(u)(...s)),class:"w-full md:w-auto px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},[e[24]||(e[24]=t("option",{value:"all"},"Semua Divisi",-1)),(n(!0),d(_,null,P(a.filterOptions.divisions,s=>(n(),d("option",{key:s.id,value:s.id},o(s.nama_divisi),9,ht))),128))],544),[[S,m.value]]),C(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>v.value=s),onChange:e[8]||(e[8]=(...s)=>g(u)&&g(u)(...s)),class:"w-full md:w-auto px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},e[25]||(e[25]=[t("option",{value:"15"},"15 Per Halaman",-1),t("option",{value:"30"},"30 Per Halaman",-1),t("option",{value:"50"},"50 Per Halaman",-1)]),544),[[S,v.value]])]),t("div",kt,[t("div",Ct,[t("table",_t,[e[31]||(e[31]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ticket"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Title"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Category"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Priority"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Divisi"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Created By"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Created At"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Due Date"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Comments"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),t("tbody",Tt,[(n(!0),d(_,null,P(a.data.data,s=>{var i,l,p,V,I,N,U,E;return n(),d("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",Dt,[t("div",St,o(s.ticket_number),1)]),t("td",Pt,[t("div",Bt,o(s.title),1)]),t("td",$t,[t("span",jt,o(((i=s.category)==null?void 0:i.name)||"-"),1)]),t("td",Ot,[t("span",{class:x(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",q((l=s.priority)==null?void 0:l.level)])},o(((p=s.priority)==null?void 0:p.name)||"-"),3)]),t("td",Lt,[t("span",{class:x(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",Y((V=s.status)==null?void 0:V.slug)])},o(((I=s.status)==null?void 0:I.name)||"-"),3)]),t("td",Mt,o(((N=s.divisi)==null?void 0:N.nama_divisi)||"-"),1),t("td",Ht,o(((U=s.creator)==null?void 0:U.nama_lengkap)||"-"),1),t("td",Vt,o(new Date(s.created_at).toLocaleDateString("id-ID")),1),t("td",It,[s.due_date?(n(),d("div",Nt,[t("span",Ut,o(new Date(s.due_date).toLocaleDateString("id-ID")),1),t("span",{class:x(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",Q(s.due_date,(E=s.status)==null?void 0:E.slug)])},[e[26]||(e[26]=t("i",{class:"fas fa-clock mr-1"},null,-1)),D(" "+o(J(s.due_date)),1)],2)])):(n(),d("span",Et,"-"))]),t("td",At,[t("div",Ft,[t("span",{class:x(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",z(s.comments_count)])},[e[27]||(e[27]=t("i",{class:"fa-solid fa-comment mr-1"},null,-1)),D(" "+o(s.comments_count||0),1)],2)])]),t("td",Wt,[t("div",Gt,[t("button",{onClick:A=>W(s),class:"text-blue-600 hover:text-blue-900",title:"View"},e[28]||(e[28]=[t("i",{class:"fa-solid fa-eye"},null,-1)]),8,Rt),t("button",{onClick:A=>G(s),class:"text-green-600 hover:text-green-900",title:"Edit"},e[29]||(e[29]=[t("i",{class:"fa-solid fa-edit"},null,-1)]),8,Yt),t("button",{onClick:A=>R(s),class:"text-red-600 hover:text-red-900",title:"Delete"},e[30]||(e[30]=[t("i",{class:"fa-solid fa-trash"},null,-1)]),8,zt)])])])}),128))])])]),a.data.data.length===0?(n(),d("div",Jt,[e[33]||(e[33]=t("div",{class:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},[t("i",{class:"fa-solid fa-ticket-alt text-3xl text-gray-400"})],-1)),e[34]||(e[34]=t("h3",{class:"text-lg font-medium text-gray-600 mb-2"},"No Tickets Found",-1)),e[35]||(e[35]=t("p",{class:"text-gray-500 mb-6"},"Start by creating your first ticket",-1)),t("button",{onClick:$,class:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors"},e[32]||(e[32]=[t("i",{class:"fa-solid fa-plus mr-2"},null,-1),D(" Create New Ticket ")]))])):et("",!0)]),t("div",Qt,[t("div",qt," Menampilkan "+o(a.data.from||0)+" sampai "+o(a.data.to||0)+" dari "+o(a.data.total||0)+" tickets ",1),t("nav",Kt,[t("button",{onClick:e[9]||(e[9]=T(s=>h(a.data.first_page_url),["stop","prevent"])),disabled:!a.data.first_page_url,class:x(["px-3 py-2 text-sm border border-gray-300 rounded-l-lg transition-colors",a.data.first_page_url?"bg-white text-gray-700 hover:bg-gray-50 cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"])}," First ",10,Xt),t("button",{onClick:e[10]||(e[10]=T(s=>h(a.data.prev_page_url),["stop","prevent"])),disabled:!a.data.prev_page_url,class:x(["px-3 py-2 text-sm border border-gray-300 transition-colors",a.data.prev_page_url?"bg-white text-gray-700 hover:bg-gray-50 cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"])}," Previous ",10,Zt),(n(!0),d(_,null,P(a.data.links,(s,i)=>(n(),d(_,{key:i},[s.url?(n(),d("button",{key:0,onClick:T(l=>h(s.url),["stop","prevent"]),disabled:s.active,class:x(["px-3 py-2 text-sm border border-gray-300 transition-colors",s.active?"bg-blue-600 text-white border-blue-600 cursor-default":"bg-white text-gray-700 hover:bg-gray-50 border-gray-300 cursor-pointer"]),innerHTML:s.label},null,10,te)):(n(),d("span",{key:1,class:"px-3 py-2 text-sm border border-gray-200 text-gray-400 bg-gray-50 cursor-not-allowed",innerHTML:s.label},null,8,ee))],64))),128)),t("button",{onClick:e[11]||(e[11]=T(s=>h(a.data.next_page_url),["stop","prevent"])),disabled:!a.data.next_page_url,class:x(["px-3 py-2 text-sm border border-gray-300 transition-colors",a.data.next_page_url?"bg-white text-gray-700 hover:bg-gray-50 cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"])}," Next ",10,se),t("button",{onClick:e[12]||(e[12]=T(s=>h(a.data.last_page_url),["stop","prevent"])),disabled:!a.data.last_page_url,class:x(["px-3 py-2 text-sm border border-gray-300 rounded-r-lg transition-colors",a.data.last_page_url?"bg-white text-gray-700 hover:bg-gray-50 cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"])}," Last ",10,re)])])])]),_:1}))}};export{fe as default};
