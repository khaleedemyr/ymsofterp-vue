import{r as u,w as j,L as b,B as p,D as t,G as v,N as f,O as g,H as n,J as d,I as B,E as w}from"./vendor-vue-g7iCcTkf.js";import{a as V}from"./vendor-utils-CpgP2uT4.js";import{S as x}from"./app-dzBjFUgD.js";import"./vendor-charts-CuqD4wLC.js";const C={class:"bg-white rounded-2xl shadow-2xl w-full max-w-lg p-8 relative animate-fadeIn"},L={class:"text-xl font-bold mb-4 text-blue-800 flex items-center gap-2"},S={class:"mb-3"},T=["disabled"],U={class:"mb-3"},$=["disabled"],D={class:"mb-3"},F=["disabled"],N={class:"mb-3"},P=["disabled"],E={class:"mb-3"},M=["disabled"],O={class:"mb-3"},A=["disabled"],G={class:"mb-3"},I=["disabled"],J={key:0,class:"mt-2"},K=["src"],R={class:"flex justify-end gap-2 mt-6"},z=["disabled"],H=["disabled"],Q={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},ee={__name:"Form",props:{job:Object},emits:["close","saved"],setup(y,{emit:_}){const k=y,m=_,a=u({id:null,position:"",description:"",requirements:"",location:"",closing_date:"",is_active:1,banner:null}),i=u(""),l=u(!1);j(()=>k.job,o=>{o?(a.value={id:o.id,position:o.position,description:o.description,requirements:o.requirements,location:o.location,closing_date:o.closing_date,is_active:o.is_active,banner:null},i.value=o.banner?`/storage/${o.banner}`:""):(a.value={id:null,position:"",description:"",requirements:"",location:"",closing_date:"",is_active:1,banner:null},i.value="")},{immediate:!0});function h(o){const e=o.target.files[0];if(a.value.banner=e,e){const s=new FileReader;s.onload=r=>i.value=r.target.result,s.readAsDataURL(e)}else i.value=""}async function q(){var o,e;try{l.value=!0;const s=new FormData;s.append("position",a.value.position),s.append("description",a.value.description),s.append("requirements",a.value.requirements),s.append("location",a.value.location),s.append("closing_date",a.value.closing_date),s.append("is_active",a.value.is_active),a.value.banner&&s.append("banner",a.value.banner);let r="/admin/job-vacancy",c="post";a.value.id&&(r+="/"+a.value.id,c="put"),await V({method:c,url:r,data:s,headers:{"Content-Type":"multipart/form-data"}}),await x.fire({icon:"success",title:"Berhasil!",text:a.value.id?"Lowongan berhasil diperbarui!":"Lowongan berhasil ditambahkan!",timer:2e3,showConfirmButton:!1}),m("saved"),m("close")}catch(s){console.error("Error saving job vacancy:",s),await x.fire({icon:"error",title:"Gagal!",text:((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.message)||"Terjadi kesalahan saat menyimpan lowongan.",confirmButtonText:"OK"})}finally{l.value=!1}}return(o,e)=>(p(),b("div",{class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",onClick:e[8]||(e[8]=g(s=>o.$emit("close"),["self"]))},[t("div",C,[t("button",{onClick:e[0]||(e[0]=s=>o.$emit("close")),class:"absolute top-4 right-4 text-gray-400 hover:text-red-500 text-2xl font-bold"},"Ã—"),t("h2",L,[e[9]||(e[9]=t("i",{class:"fa-solid fa-briefcase"},null,-1)),v(" "+f(a.value.id?"Edit":"Tambah")+" Lowongan ",1)]),t("form",{onSubmit:g(q,["prevent"]),enctype:"multipart/form-data"},[t("div",S,[e[10]||(e[10]=t("label",{class:"block font-semibold mb-1"},"Posisi/Jabatan",-1)),n(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.position=s),required:"",class:"w-full border rounded px-3 py-2",disabled:l.value},null,8,T),[[d,a.value.position]])]),t("div",U,[e[11]||(e[11]=t("label",{class:"block font-semibold mb-1"},"Deskripsi Pekerjaan",-1)),n(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.description=s),required:"",class:"w-full border rounded px-3 py-2",rows:"3",disabled:l.value},null,8,$),[[d,a.value.description]])]),t("div",D,[e[12]||(e[12]=t("label",{class:"block font-semibold mb-1"},"Kualifikasi/Persyaratan",-1)),n(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.requirements=s),class:"w-full border rounded px-3 py-2",rows:"2",disabled:l.value},null,8,F),[[d,a.value.requirements]])]),t("div",N,[e[13]||(e[13]=t("label",{class:"block font-semibold mb-1"},"Lokasi Penempatan",-1)),n(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>a.value.location=s),required:"",class:"w-full border rounded px-3 py-2",disabled:l.value},null,8,P),[[d,a.value.location]])]),t("div",E,[e[14]||(e[14]=t("label",{class:"block font-semibold mb-1"},"Tanggal Penutupan",-1)),n(t("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=s=>a.value.closing_date=s),required:"",class:"w-full border rounded px-3 py-2",disabled:l.value},null,8,M),[[d,a.value.closing_date]])]),t("div",O,[e[16]||(e[16]=t("label",{class:"block font-semibold mb-1"},"Status",-1)),n(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>a.value.is_active=s),class:"w-full border rounded px-3 py-2",disabled:l.value},e[15]||(e[15]=[t("option",{value:1},"Aktif",-1),t("option",{value:0},"Nonaktif",-1)]),8,A),[[B,a.value.is_active]])]),t("div",G,[e[17]||(e[17]=t("label",{class:"block font-semibold mb-1"},"Banner/Logo",-1)),t("input",{type:"file",onChange:h,accept:"image/*",class:"w-full",disabled:l.value},null,40,I),i.value?(p(),b("div",J,[t("img",{src:i.value,class:"w-40 h-24 object-cover rounded shadow"},null,8,K)])):w("",!0)]),t("div",R,[t("button",{type:"button",onClick:e[7]||(e[7]=s=>o.$emit("close")),class:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",disabled:l.value},"Batal",8,z),t("button",{type:"submit",class:"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 flex items-center gap-2",disabled:l.value},[l.value?(p(),b("span",Q)):w("",!0),v(" "+f(l.value?"Menyimpan...":"Simpan"),1)],8,H)])],32)])]))}};export{ee as default};
