import{r as F,w as le,a as ie,A as ne,B as o,C as oe,D as e,L as d,E as x,G as f,H as m,J as k,I as de,l as y,x as W,Q as J,V as w,N as n,F as D,M as Y,W as K}from"./vendor-vue-g7iCcTkf.js";import{A as ue}from"./AppLayout-lnDyFfsm.js";import{s as X}from"./vue-multiselect.esm-V-bx43V9.js";/* empty css                            */import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./app-CUjRlmlQ.js";import"./vendor-charts-CuqD4wLC.js";import"./ProfileUpdateModal-CXOsavaw.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const pe={class:"py-12"},me={class:"w-full mx-auto px-4 sm:px-6 lg:px-8"},ge={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},xe={class:"p-6 bg-white border-b border-gray-200"},fe={class:"flex justify-between items-center mb-6"},ye={class:"flex items-center gap-2"},be={key:0,class:"flex items-center text-blue-600"},he=["disabled"],ve={key:0,class:"fas fa-spinner fa-spin mr-2"},_e={key:1,class:"fas fa-search mr-2"},ke=["disabled"],we={class:"mb-6 bg-gray-50 p-4 rounded-lg"},De={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Pe=["disabled"],Ce=["disabled"],Ie=["disabled"],Se=["disabled"],Ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},Ne={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4"},Re={class:"space-y-2"},He={class:"flex items-center"},Le=["disabled"],Oe={class:"flex items-center"},Te=["disabled"],Me={class:"flex items-center"},Ue=["disabled"],je={class:"mt-4 flex justify-end gap-2"},Be=["disabled"],Ae={key:0,class:"fas fa-spinner fa-spin mr-2"},Ee={key:1,class:"fas fa-search mr-2"},Ge=["disabled"],Qe={key:0,class:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4"},$e={class:"bg-blue-50 p-4 rounded-lg border border-blue-200"},qe={class:"flex items-center"},ze={class:"text-lg font-bold text-blue-800"},Fe={class:"bg-red-50 p-4 rounded-lg border border-red-200"},We={class:"flex items-center"},Je={class:"text-lg font-bold text-red-800"},Ye={class:"bg-green-50 p-4 rounded-lg border border-green-200"},Ke={class:"flex items-center"},Xe={class:"text-lg font-bold text-green-800"},Ze={class:"bg-gray-50 p-4 rounded-lg border border-gray-200"},et={class:"flex items-center"},tt={class:"text-lg font-bold text-gray-800"},st={class:"overflow-x-auto relative"},at={key:0,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10"},rt={class:"min-w-full divide-y divide-gray-200"},lt={class:"bg-white divide-y divide-gray-200"},it={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},nt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ot={class:"px-6 py-4 whitespace-nowrap text-sm text-blue-600 hover:text-blue-800"},dt=["href"],ut={key:1,class:"text-gray-500"},ct={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},pt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},mt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},gt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},xt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ft={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},yt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},bt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ht={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},vt={class:"px-6 py-4 whitespace-nowrap text-sm"},_t={class:"text-xs"},kt={key:1,class:"text-gray-500"},wt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Dt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Pt={key:1,class:"mt-6 flex items-center justify-between"},Ct={class:"text-sm text-gray-700"},It={class:"flex space-x-2"},St=["onClick","innerHTML"],Vt=["innerHTML"],Nt={key:2,class:"text-center py-8"},Rt={__name:"Report",props:{reports:{type:Object,default:()=>({data:[],links:[]})},suppliers:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})}},setup(c){var I,S,V,N,R,H,L,O,T,M,U,j,B,A;const l=c,b=(()=>{const s=new Date;return{from:new Date(s.getFullYear(),s.getMonth(),1).toISOString().split("T")[0],to:s.toISOString().split("T")[0]}})(),r=F({search:((I=l.filters)==null?void 0:I.search)||"",from:((S=l.filters)==null?void 0:S.from)||b.from,to:((V=l.filters)==null?void 0:V.to)||b.to,supplier_id:(N=l.filters)!=null&&N.supplier_id&&((R=l.suppliers)==null?void 0:R.find(s=>s.id==l.filters.supplier_id))||null,item_id:(H=l.filters)!=null&&H.item_id&&((L=l.items)==null?void 0:L.find(s=>s.id==l.filters.item_id))||null,perPage:((O=l.filters)==null?void 0:O.perPage)||15,hasPriceChange:((T=l.filters)==null?void 0:T.hasPriceChange)==="true"||((M=l.filters)==null?void 0:M.hasPriceChange)===!0||!1,priceIncrease:((U=l.filters)==null?void 0:U.priceIncrease)==="true"||((j=l.filters)==null?void 0:j.priceIncrease)===!0||!1,priceDecrease:((B=l.filters)==null?void 0:B.priceDecrease)==="true"||((A=l.filters)==null?void 0:A.priceDecrease)===!0||!1}),i=F(!1);le(()=>l.filters,s=>{var t,u;s&&!i.value&&(r.value={search:s.search||"",from:s.from||b.from,to:s.to||b.to,supplier_id:s.supplier_id&&((t=l.suppliers)==null?void 0:t.find(p=>p.id==s.supplier_id))||null,item_id:s.item_id&&((u=l.items)==null?void 0:u.find(p=>p.id==s.item_id))||null,perPage:s.perPage||15,hasPriceChange:s.hasPriceChange==="true"||s.hasPriceChange===!0,priceIncrease:s.priceIncrease==="true"||s.priceIncrease===!0,priceDecrease:s.priceDecrease==="true"||s.priceDecrease===!0})},{deep:!0,immediate:!0});const h=()=>{var t,u;i.value=!0;const s={search:r.value.search||"",from:r.value.from||"",to:r.value.to||"",supplier_id:((t=r.value.supplier_id)==null?void 0:t.id)||"",item_id:((u=r.value.item_id)==null?void 0:u.id)||"",perPage:r.value.perPage||15,hasPriceChange:r.value.hasPriceChange?"true":"false",priceIncrease:r.value.priceIncrease?"true":"false",priceDecrease:r.value.priceDecrease?"true":"false"};K.visit("/po-report",{data:s,preserveState:!0,preserveScroll:!0,replace:!0,onFinish:()=>{i.value=!1}})},Z=()=>{r.value={search:"",from:"",to:"",supplier_id:null,item_id:null,perPage:15,hasPriceChange:!1,priceIncrease:!1,priceDecrease:!1}},ee=()=>{var t,u;if(i.value)return;const s=new URLSearchParams({search:r.value.search||"",from:r.value.from||"",to:r.value.to||"",supplier_id:((t=r.value.supplier_id)==null?void 0:t.id)||"",item_id:((u=r.value.item_id)==null?void 0:u.id)||"",hasPriceChange:r.value.hasPriceChange?"true":"false",priceIncrease:r.value.priceIncrease?"true":"false",priceDecrease:r.value.priceDecrease?"true":"false"});window.open(`/po-report/export?${s.toString()}`,"_blank")},te=s=>{i.value||!s||(i.value=!0,K.visit(s,{preserveState:!0,preserveScroll:!0,onFinish:()=>{i.value=!1}}))},P=s=>{if(!s)return"-";try{return new Date(s).toLocaleDateString("id-ID")}catch{return"-"}},C=s=>!s&&s!==0?"0":new Intl.NumberFormat("id-ID").format(Number(s)||0),v=s=>!s&&s!==0?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(Number(s)||0),se=()=>{var s;return(s=l.reports)!=null&&s.data?l.reports.data.filter(t=>t.price_change>0).length:0},ae=()=>{var s;return(s=l.reports)!=null&&s.data?l.reports.data.filter(t=>t.price_change<0).length:0},re=()=>{var s;return(s=l.reports)!=null&&s.data?l.reports.data.filter(t=>t.price_change===0||t.price_change===null).length:0};return ie(()=>{var u,p,g;const s=!((u=l.reports)!=null&&u.data)||l.reports.data.length===0,t=!((p=l.filters)!=null&&p.from)&&!((g=l.filters)!=null&&g.to);s&&t&&h()}),(s,t)=>(o(),ne(ue,null,{default:oe(()=>{var u,p,g,E,G,Q,$,q,z;return[e("div",pe,[e("div",me,[e("div",ge,[e("div",xe,[e("div",fe,[t[12]||(t[12]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Report Item PO yang Sudah di-GR ",-1)),e("div",ye,[i.value?(o(),d("div",be,t[9]||(t[9]=[e("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),e("span",{class:"text-sm"},"Loading...",-1)]))):x("",!0),e("button",{onClick:h,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:i.value},[i.value?(o(),d("i",ve)):(o(),d("i",_e)),t[10]||(t[10]=f(" Load Data "))],8,he),e("button",{onClick:ee,class:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",disabled:i.value},t[11]||(t[11]=[e("i",{class:"fas fa-download mr-2"},null,-1),f(" Export Excel ")]),8,ke)])]),e("div",we,[t[26]||(t[26]=e("div",{class:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md"},[e("div",{class:"flex items-center"},[e("i",{class:"fas fa-info-circle text-blue-600 mr-2"}),e("div",{class:"text-sm text-blue-800"},[e("p",{class:"font-medium mb-1"},"Petunjuk:"),e("ul",{class:"list-disc list-inside space-y-1"},[e("li",null,'Isi filter yang diinginkan, kemudian klik tombol "Load Data" untuk menampilkan hasil.'),e("li",null,'Filter "Hanya item yang berubah harga" akan menampilkan item yang memiliki perubahan harga dari PO sebelumnya.'),e("li",null,'Filter "Hanya kenaikan harga" akan menampilkan item yang harganya naik dari PO sebelumnya.'),e("li",null,'Filter "Hanya penurunan harga" akan menampilkan item yang harganya turun dari PO sebelumnya.')])])])],-1)),e("div",De,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>r.value.search=a),type:"text",placeholder:"Cari PO Number, GR Number, Supplier, Item...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:i.value},null,8,Pe),[[k,r.value.search]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Dari Tanggal",-1)),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>r.value.from=a),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:i.value},null,8,Ce),[[k,r.value.from]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Sampai Tanggal",-1)),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>r.value.to=a),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:i.value},null,8,Ie),[[k,r.value.to]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tampilkan",-1)),m(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>r.value.perPage=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:i.value},t[16]||(t[16]=[e("option",{value:"15"},"15 data",-1),e("option",{value:"25"},"25 data",-1),e("option",{value:"50"},"50 data",-1),e("option",{value:"100"},"100 data",-1)]),8,Se),[[de,r.value.perPage]])])]),e("div",Ve,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Supplier",-1)),e("div",{class:y({"opacity-50 pointer-events-none":i.value})},[W(J(X),{modelValue:r.value.supplier_id,"onUpdate:modelValue":t[4]||(t[4]=a=>r.value.supplier_id=a),options:c.suppliers,searchable:!0,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pilih atau cari supplier...","track-by":"id",label:"name","preselect-first":!1,class:"w-full"},null,8,["modelValue","options"])],2)]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Item",-1)),e("div",{class:y({"opacity-50 pointer-events-none":i.value})},[W(J(X),{modelValue:r.value.item_id,"onUpdate:modelValue":t[5]||(t[5]=a=>r.value.item_id=a),options:c.items,searchable:!0,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pilih atau cari item...","track-by":"id",label:"name","preselect-first":!1,class:"w-full"},null,8,["modelValue","options"])],2)])]),e("div",Ne,[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Filter Harga",-1)),e("div",Re,[e("label",He,[m(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=a=>r.value.hasPriceChange=a),class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",disabled:i.value},null,8,Le),[[w,r.value.hasPriceChange]]),t[20]||(t[20]=e("span",{class:"ml-2 text-sm text-gray-700"},"Hanya item yang berubah harga",-1))]),e("label",Oe,[m(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=a=>r.value.priceIncrease=a),class:"rounded border-gray-300 text-red-600 shadow-sm focus:border-red-300 focus:ring focus:ring-red-200 focus:ring-opacity-50",disabled:i.value},null,8,Te),[[w,r.value.priceIncrease]]),t[21]||(t[21]=e("span",{class:"ml-2 text-sm text-gray-700"},"Hanya kenaikan harga",-1))]),e("label",Me,[m(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=a=>r.value.priceDecrease=a),class:"rounded border-gray-300 text-green-600 shadow-sm focus:border-green-300 focus:ring focus:ring-green-200 focus:ring-opacity-50",disabled:i.value},null,8,Ue),[[w,r.value.priceDecrease]]),t[22]||(t[22]=e("span",{class:"ml-2 text-sm text-gray-700"},"Hanya penurunan harga",-1))])])])]),e("div",je,[e("button",{onClick:h,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:i.value},[i.value?(o(),d("i",Ae)):(o(),d("i",Ee)),t[24]||(t[24]=f(" Load Data "))],8,Be),e("button",{onClick:Z,class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",disabled:i.value},t[25]||(t[25]=[e("i",{class:"fas fa-times mr-2"},null,-1),f(" Clear Filters ")]),8,Ge)])]),(((u=c.reports)==null?void 0:u.data)||[]).length>0?(o(),d("div",Qe,[e("div",$e,[e("div",qe,[t[28]||(t[28]=e("i",{class:"fas fa-chart-line text-blue-600 text-xl mr-3"},null,-1)),e("div",null,[t[27]||(t[27]=e("p",{class:"text-sm text-blue-600 font-medium"},"Total Items",-1)),e("p",ze,n(((p=l.reports)==null?void 0:p.total)||0),1)])])]),e("div",Fe,[e("div",We,[t[30]||(t[30]=e("i",{class:"fas fa-arrow-up text-red-600 text-xl mr-3"},null,-1)),e("div",null,[t[29]||(t[29]=e("p",{class:"text-sm text-red-600 font-medium"},"Naik Harga",-1)),e("p",Je,n(se()),1)])])]),e("div",Ye,[e("div",Ke,[t[32]||(t[32]=e("i",{class:"fas fa-arrow-down text-green-600 text-xl mr-3"},null,-1)),e("div",null,[t[31]||(t[31]=e("p",{class:"text-sm text-green-600 font-medium"},"Turun Harga",-1)),e("p",Xe,n(ae()),1)])])]),e("div",Ze,[e("div",et,[t[34]||(t[34]=e("i",{class:"fas fa-minus text-gray-600 text-xl mr-3"},null,-1)),e("div",null,[t[33]||(t[33]=e("p",{class:"text-sm text-gray-600 font-medium"},"Harga Stabil",-1)),e("p",tt,n(re()),1)])])])])):x("",!0),e("div",st,[i.value?(o(),d("div",at,t[35]||(t[35]=[e("div",{class:"flex items-center text-blue-600"},[e("i",{class:"fas fa-spinner fa-spin mr-2"}),e("span",null,"Loading data...")],-1)]))):x("",!0),e("table",rt,[t[36]||(t[36]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"GR Number"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Receive Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"PO Number"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"PO Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Supplier"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Item"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Category"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Qty PO"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Qty Received"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Unit"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"PO Price"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Previous Price"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Price Change"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"PO Creator"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Received By")])],-1)),e("tbody",lt,[(o(!0),d(D,null,Y(((g=c.reports)==null?void 0:g.data)||[],(a,_)=>(o(),d("tr",{key:a.gr_id||_,class:"hover:bg-gray-50"},[e("td",it,n(a.gr_number||"-"),1),e("td",nt,n(P(a.receive_date)),1),e("td",ot,[a.po_id?(o(),d("a",{key:0,href:`/po-foods/${a.po_id}`,class:"underline"},n(a.po_number||"-"),9,dt)):(o(),d("span",ut,n(a.po_number||"-"),1))]),e("td",ct,n(P(a.po_date)),1),e("td",pt,n(a.supplier_name||"-"),1),e("td",mt,n(a.item_name||"-"),1),e("td",gt,n(a.category_name||"-"),1),e("td",xt,n(C(a.po_qty)),1),e("td",ft,n(C(a.qty_received)),1),e("td",yt,n(a.unit_name||"-"),1),e("td",bt,n(v(a.po_price)),1),e("td",ht,n(a.previous_price&&a.previous_price!==null?v(a.previous_price):"-"),1),e("td",vt,[a.price_change!==0&&a.price_change!==null?(o(),d("span",{key:0,class:y(a.price_change>0?"text-red-600":"text-green-600")},[f(n(v(a.price_change))+" ",1),e("span",_t,"("+n(a.price_change_percentage||0)+"%)",1)],2)):(o(),d("span",kt,"-"))]),e("td",wt,n(a.po_creator_name||"-"),1),e("td",Dt,n(a.received_by_name||"-"),1)]))),128))])])]),(((E=c.reports)==null?void 0:E.data)||[]).length>0?(o(),d("div",Pt,[e("div",Ct," Menampilkan "+n(((G=c.reports)==null?void 0:G.from)||0)+" - "+n(((Q=c.reports)==null?void 0:Q.to)||0)+" dari "+n((($=c.reports)==null?void 0:$.total)||0)+" data ",1),e("div",It,[(o(!0),d(D,null,Y(((q=c.reports)==null?void 0:q.links)||[],(a,_)=>(o(),d(D,{key:a.label||_},[a.url&&!i.value?(o(),d("button",{key:0,onClick:Lt=>te(a.url),class:y(["px-3 py-2 text-sm rounded-md",a.active?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"]),innerHTML:a.label||""},null,10,St)):(o(),d("span",{key:1,class:y(["px-3 py-2 text-sm rounded-md",a.active?"bg-blue-600 text-white":"bg-gray-100 text-gray-400 cursor-not-allowed"]),innerHTML:a.label||""},null,10,Vt))],64))),128))])])):x("",!0),(((z=c.reports)==null?void 0:z.data)||[]).length===0?(o(),d("div",Nt,t[37]||(t[37]=[e("div",{class:"text-gray-500"},[e("i",{class:"fas fa-search text-4xl mb-4 text-gray-300"}),e("p",{class:"text-lg font-medium mb-2"},"Belum ada data yang dimuat"),e("p",{class:"text-sm"},'Isi filter yang diinginkan dan klik tombol "Load Data" untuk menampilkan hasil.')],-1)]))):x("",!0)])])])])]}),_:1}))}},zt=ce(Rt,[["__scopeId","data-v-9c137dc1"]]);export{zt as default};
