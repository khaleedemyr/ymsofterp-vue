import{r as m,c as g,w as A,A as B,B as a,C as F,D as e,L as s,E as w,H as C,J as L,F as y,M as f,N as r,I as P,G as E,l as I,W as R}from"./vendor-vue-g7iCcTkf.js";import{A as U}from"./AppLayout-zB0hvXOw.js";import"./vendor-utils-CpgP2uT4.js";import"./app-BgZdqVzD.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-C4ea0y0B.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const j={class:"w-full py-8 px-2"},G={class:"flex flex-col md:flex-row md:items-center gap-4 mb-4"},O={class:"flex items-center gap-2"},H=["value"],W=["disabled"],J={key:0,class:"mr-2"},Q={key:1,class:"mr-2"},$={key:0,class:"bg-white rounded-xl shadow-lg p-8 text-center text-gray-500 font-bold"},q={key:1,class:"bg-white rounded-xl shadow-lg w-full"},K={class:"overflow-x-auto"},X={class:"w-full border border-gray-300",style:{"min-width":"max-content"}},Y={class:"bg-yellow-300 text-gray-900"},Z={key:0},ee=["colspan"],te={class:"px-4 py-2 border border-gray-200 sticky left-0 z-10 bg-white",style:{"min-width":"200px",position:"sticky",left:"0"}},le={class:"px-4 py-2 border border-gray-200 sticky left-[200px] z-10 bg-white",style:{"min-width":"100px",position:"sticky",left:"200px"}},ae={key:2,class:"flex justify-between items-center mt-4"},se={class:"text-sm text-gray-600"},oe={class:"flex gap-1"},re=["disabled"],ne={class:"px-2"},ie=["disabled"],fe={__name:"ReportGoodReceiveOutlet",props:{outlets:Array,items:Array,filters:Object},setup(b){var D;const h=b,i=m(((D=h.filters)==null?void 0:D.tanggal)||""),c=m(""),u=m(25),o=m(1),p=m(!1),d=g(()=>{if(!c.value)return h.items;const n=c.value.toLowerCase();return h.items.filter(t=>t.item_name&&t.item_name.toLowerCase().includes(n)||t.unit_name&&t.unit_name.toLowerCase().includes(n))}),x=g(()=>Math.ceil(d.value.length/u.value)||1),v=g(()=>(o.value-1)*u.value),S=g(()=>Math.min(v.value+_.value.length,d.value.length)),_=g(()=>d.value.slice(v.value,v.value+u.value));function M(){o.value>1&&o.value--}function N(){o.value<x.value&&o.value++}A([u,c],()=>{o.value=1});function T(){R.get("/report-good-receive-outlet",{tanggal:i.value},{preserveState:!0,preserveScroll:!0})}function V(n){return n==null?"":Number(n).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2})}async function z(){if(!i.value){alert("Silakan pilih tanggal terlebih dahulu");return}p.value=!0;try{const n=`/report-good-receive-outlet/export?tanggal=${i.value}`;window.open(n,"_blank")}catch(n){console.error("Export error:",n),alert("Terjadi kesalahan saat export data")}finally{p.value=!1}}return(n,t)=>(a(),B(U,null,{default:F(()=>[e("div",j,[t[10]||(t[10]=e("h1",{class:"text-2xl font-bold mb-6"},"Report Good Receive Outlet",-1)),e("div",G,[C(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>i.value=l),type:"date",class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,i.value]]),C(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>c.value=l),type:"text",placeholder:"Cari item/unit...",class:"px-4 py-2 border border-gray-300 rounded-lg w-full md:w-64 focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,c.value]]),e("div",O,[t[3]||(t[3]=e("label",{class:"text-sm"},"Tampilkan",-1)),C(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>u.value=l),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[(a(),s(y,null,f([10,25,50,100],l=>e("option",{key:l,value:l},r(l),9,H)),64))],512),[[P,u.value]]),t[4]||(t[4]=e("span",{class:"text-sm"},"data",-1))]),e("button",{onClick:T,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-700"},t[5]||(t[5]=[e("span",{class:"mr-2"},[e("i",{class:"fas fa-sync-alt"})],-1),E(" Load Data ")])),i.value&&d.value.length?(a(),s("button",{key:0,onClick:z,disabled:p.value,class:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-md font-semibold hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"},[p.value?(a(),s("span",Q,t[7]||(t[7]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1)]))):(a(),s("span",J,t[6]||(t[6]=[e("i",{class:"fas fa-file-excel"},null,-1)]))),E(" "+r(p.value?"Exporting...":"Export Excel"),1)],8,W)):w("",!0)]),i.value?(a(),s("div",q,[e("div",K,[e("table",X,[e("thead",null,[e("tr",Y,[t[8]||(t[8]=e("th",{class:"px-4 py-2 border border-gray-300 sticky left-0 z-20 bg-yellow-300",style:{"min-width":"200px",position:"sticky",left:"0"}},"Nama Items",-1)),t[9]||(t[9]=e("th",{class:"px-4 py-2 border border-gray-300 sticky left-[200px] z-20 bg-yellow-300",style:{"min-width":"100px",position:"sticky",left:"200px"}},"Unit",-1)),(a(!0),s(y,null,f(b.outlets,l=>(a(),s("th",{key:l.id_outlet,class:"px-4 py-2 border border-gray-300 text-right",style:{"min-width":"150px"}},r(l.nama_outlet),1))),128))])]),e("tbody",null,[_.value.length?w("",!0):(a(),s("tr",Z,[e("td",{colspan:2+b.outlets.length,class:"text-center py-10 text-gray-400"},"Tidak ada data.",8,ee)])),(a(!0),s(y,null,f(_.value,l=>(a(),s("tr",{key:l.item_name+"-"+l.unit_name},[e("td",te,r(l.item_name),1),e("td",le,r(l.unit_name),1),(a(!0),s(y,null,f(b.outlets,k=>(a(),s("td",{key:k.id_outlet,class:"px-4 py-2 border border-gray-200 text-right",style:{"min-width":"150px"}},r(l[k.nama_outlet]?V(l[k.nama_outlet]):""),1))),128))]))),128))])])])])):(a(),s("div",$," Silakan pilih tanggal terlebih dahulu ")),i.value&&d.value.length?(a(),s("div",ae,[e("div",se," Menampilkan "+r(v.value+1)+" - "+r(S.value)+" dari "+r(d.value.length)+" data ",1),e("div",oe,[e("button",{onClick:M,disabled:o.value===1,class:I(["px-3 py-1 rounded border text-sm",o.value===1?"bg-gray-200 text-gray-400":"bg-white text-blue-700 hover:bg-blue-50"])},"<",10,re),e("span",ne,"Halaman "+r(o.value)+" / "+r(x.value),1),e("button",{onClick:N,disabled:o.value===x.value,class:I(["px-3 py-1 rounded border text-sm",o.value===x.value?"bg-gray-200 text-gray-400":"bg-white text-blue-700 hover:bg-blue-50"])},">",10,ie)])])):w("",!0)])]),_:1}))}};export{fe as default};
