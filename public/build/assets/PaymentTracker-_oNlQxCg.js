import{$ as yt,c as bt,r as y,a as vt,A as kt,B as a,C as ft,D as t,x as ht,L as o,E as v,G as j,H as O,J as V,I as mt,N as l,F as p,M as k,O as C,l as f,Q as _t,W as wt}from"./vendor-vue-g7iCcTkf.js";import{A as Ct}from"./AppLayout-C22rYVZx.js";import{N as Dt}from"./vue-easy-lightbox.esm.min-H9agbAmC.js";import{a as at}from"./vendor-utils-CpgP2uT4.js";import"./app-CQcWanFv.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DO0UW4jb.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const Pt={class:"w-full py-8 px-4"},At={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 mb-6"},$t={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},jt={class:"mt-4 flex items-center gap-2"},Mt={key:0,class:"text-center py-8"},Tt={key:1,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden"},Et={class:"p-4 border-b border-gray-200 dark:border-gray-700"},Lt={class:"flex justify-between items-center"},St={class:"text-sm text-gray-600 dark:text-gray-400"},Ot={key:0},Rt={key:1},Ut={key:0,class:"text-center py-8 text-gray-500 dark:text-gray-400"},It={key:1,class:"overflow-x-auto"},Ft={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Nt={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Vt=["onClick"],qt=["onClick"],Bt={class:"px-4 py-3 whitespace-nowrap"},zt={class:"text-sm font-medium text-gray-900 dark:text-white"},Wt={class:"px-4 py-3 whitespace-nowrap"},Ht={key:1,class:"text-xs text-gray-500 dark:text-gray-400"},Jt={class:"px-4 py-3 whitespace-nowrap"},Qt={class:"px-4 py-3"},Yt=["title"],Gt=["title"],Kt={class:"px-4 py-3 whitespace-nowrap"},Xt={class:"text-sm font-semibold text-gray-900 dark:text-white"},Zt={class:"px-4 py-3 whitespace-nowrap"},te={class:"text-sm text-gray-900 dark:text-white"},ee={class:"px-4 py-3"},re={class:"flex flex-col gap-1 max-w-xs"},se=["onClick"],ae={key:1,class:"text-sm text-gray-400"},oe={key:1,class:"text-sm text-gray-400"},le={class:"px-4 py-3"},de={class:"flex flex-col gap-1 max-w-xs"},ie=["onClick"],ne={key:1,class:"text-sm text-gray-400"},ge={key:1,class:"text-sm text-gray-400"},ue={class:"px-4 py-3 whitespace-nowrap"},ce={class:"flex items-center"},xe={class:"flex-shrink-0 h-8 w-8"},pe=["onClick"],ye=["src","alt"],be={key:1,class:"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-xs font-bold border-2 border-gray-200 dark:border-gray-600"},ve={class:"ml-3"},ke={class:"text-sm font-medium text-gray-900 dark:text-white"},fe={class:"text-xs text-gray-500 dark:text-gray-400"},he={class:"px-4 py-3 whitespace-nowrap"},me={class:"flex items-center"},_e={class:"flex-shrink-0 h-8 w-8"},we=["onClick"],Ce=["src","alt"],De={key:1,class:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center text-white text-xs font-bold border-2 border-gray-200 dark:border-gray-600"},Pe={class:"ml-3"},Ae={class:"text-sm font-medium text-gray-900 dark:text-white"},$e={class:"text-xs text-gray-500 dark:text-gray-400"},je={class:"px-4 py-3 whitespace-nowrap"},Me={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},Te={class:"px-4 py-3 whitespace-nowrap"},Ee={class:"text-sm text-gray-900 dark:text-white"},Le={class:"text-xs text-gray-500 dark:text-gray-400"},Se=["onClick"],Oe={key:0,class:"bg-gray-50 dark:bg-gray-900"},Re={colspan:"13",class:"px-4 py-4"},Ue={key:0,class:"text-center py-4"},Ie={key:1,class:"space-y-4"},Fe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ne={class:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700"},Ve={class:"space-y-2 text-sm"},qe={class:"flex justify-between"},Be={class:"font-medium text-gray-900 dark:text-white"},ze={class:"flex justify-between"},We={class:"font-medium text-gray-900 dark:text-white"},He={class:"flex justify-between"},Je={class:"font-medium text-gray-900 dark:text-white"},Qe={class:"flex justify-between"},Ye={class:"font-medium text-gray-900 dark:text-white"},Ge={class:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700"},Ke={class:"space-y-2 text-sm"},Xe={class:"flex justify-between"},Ze={class:"font-medium text-gray-900 dark:text-white"},tr={class:"flex justify-between"},er={class:"font-medium text-gray-900 dark:text-white"},rr={key:0,class:"mt-2"},sr={class:"text-gray-900 dark:text-white"},ar={key:0,class:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700"},or={class:"text-sm font-semibold text-gray-900 dark:text-white mb-3"},lr={class:"overflow-x-auto"},dr={class:"min-w-full text-sm"},ir={class:"divide-y divide-gray-200 dark:divide-gray-700"},nr={class:"px-3 py-2 text-gray-900 dark:text-white"},gr={class:"px-3 py-2 text-gray-900 dark:text-white"},ur={class:"px-3 py-2 text-gray-900 dark:text-white"},cr={class:"px-3 py-2 text-gray-900 dark:text-white"},xr={class:"px-3 py-2 text-gray-900 dark:text-white"},pr={key:1,class:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700"},yr={class:"text-sm font-semibold text-gray-900 dark:text-white mb-3"},br={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},vr=["onClick"],kr=["src","alt"],fr=["title"],hr={key:1},mr=["href"],_r=["title"],wr={key:2,class:"mt-4 flex flex-col sm:flex-row justify-between items-center gap-4 bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md"},Cr={class:"text-sm text-gray-600 dark:text-gray-400"},Dr={class:"flex rounded-lg shadow-sm -space-x-px","aria-label":"Pagination"},Pr=["disabled"],Ar=["disabled"],$r=["onClick"],jr={key:1,class:"px-3 py-2 text-sm border border-gray-200 dark:border-gray-600 text-gray-400 dark:text-gray-500 bg-gray-50 dark:bg-gray-700"},Mr=["disabled"],Tr=["disabled"],Er={class:"flex items-center justify-between mb-4"},Lr={class:"text-lg font-semibold text-gray-900 dark:text-white"},Sr={class:"max-h-96 overflow-y-auto"},Or={class:"space-y-2"},Rr={class:"flex items-center"},Ur={class:"text-sm font-medium text-gray-900 dark:text-white"},Ir={class:"flex items-center justify-between mb-4"},Fr={class:"text-lg font-semibold text-gray-900 dark:text-white"},Nr={class:"max-h-96 overflow-y-auto"},Vr={class:"space-y-2"},qr={class:"flex items-center"},Br={class:"text-sm font-medium text-gray-900 dark:text-white"},as={__name:"PaymentTracker",setup(zr){var G;const q=((G=yt().props.auth)==null?void 0:G.user)||{};bt(()=>q.id_role==="5af56935b011a"&&q.status==="A");const R=y(!1),h=y([]),_=y(new Set),u=y({}),U=y({}),M=y(!1),I=y([]),F=y(0),T=y(!1),E=y(!1),w=y(null),c=y({fromDate:"",toDate:"",search:"",perPage:15,page:1}),n=y(null),B=()=>{const s=new Date,e=new Date(s.getFullYear(),s.getMonth(),1),d=new Date(s.getFullYear(),s.getMonth()+1,0);c.value.fromDate=e.toISOString().split("T")[0],c.value.toDate=d.toISOString().split("T")[0]},D=async()=>{R.value=!0;try{const s={from_date:c.value.fromDate||null,to_date:c.value.toDate||null,search:c.value.search||null,page:c.value.page||1,per_page:c.value.perPage||15};Object.keys(s).forEach(d=>{(s[d]===null||s[d]==="")&&delete s[d]});const e=await at.get("/api/purchase-requisitions/payment-tracker",{params:s});e.data.success?(h.value=e.data.data||[],n.value=e.data.pagination||null,_.value.clear(),u.value={},ot()):(console.error("Error loading payment tracker:",e.data.error),h.value=[],n.value=null)}catch(s){console.error("Error loading payment tracker:",s),h.value=[],n.value=null}finally{R.value=!1}},z=async s=>{_.value.has(s)?_.value.delete(s):(_.value.add(s),u.value[s]||await W(s))},ot=async()=>{const s=h.value.map(d=>d.id),e=5;for(let d=0;d<s.length;d+=e){const i=s.slice(d,d+e);await Promise.all(i.map(r=>{if(!u.value[r])return W(r)}))}},W=async s=>{U.value[s]=!0;try{const e=await at.get(`/api/purchase-requisitions/${s}/approval-details`);e.data.success&&(u.value[s]=e.data.purchase_requisition)}catch(e){console.error("Error loading payment details:",e)}finally{U.value[s]=!1}},lt=()=>{c.value={fromDate:"",toDate:"",search:"",perPage:15,page:1},B(),D()},P=s=>{s>=1&&s<=n.value.last_page&&(c.value.page=s,D())},dt=()=>{if(!n.value)return[];const s=n.value.current_page,e=n.value.last_page,d=[];if(e<=7)for(let i=1;i<=e;i++)d.push(i);else if(s<=3){for(let i=1;i<=4;i++)d.push(i);d.push("..."),d.push(e)}else if(s>=e-2){d.push(1),d.push("...");for(let i=e-3;i<=e;i++)d.push(i)}else{d.push(1),d.push("...");for(let i=s-1;i<=s+1;i++)d.push(i);d.push("..."),d.push(e)}return d},H=s=>{if(!s)return"U";const e=s.trim().split(" ");return e.length>=2?(e[0][0]+e[e.length-1][0]).toUpperCase():s.substring(0,2).toUpperCase()},J=s=>{I.value=[s],F.value=0,M.value=!0},it=s=>{w.value=s,T.value=!0},nt=s=>{w.value=s,E.value=!0},gt=s=>{wt.visit(`/purchase-requisitions/${s}`)},N=s=>new Intl.NumberFormat("id-ID").format(s||0),L=s=>s?new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-",Q=s=>s?new Date(s).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):"",ut=s=>({pr_ops:"PR Ops",purchase_payment:"Purchase Payment",travel_application:"Travel Application",kasbon:"Kasbon"})[s]||s,ct=s=>({pr_ops:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",purchase_payment:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",travel_application:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",kasbon:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"})[s]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",xt=s=>({DRAFT:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",SUBMITTED:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",APPROVED:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",REJECTED:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",PROCESSED:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",COMPLETED:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200",PAID:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"})[s]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",Y=s=>{if(!s.file_name)return!1;const e=[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg"],d=s.file_name.toLowerCase();return e.some(i=>d.endsWith(i))},pt=s=>{const e=Object.keys(u.value).find(d=>{var i;return(i=u.value[d].attachments)==null?void 0:i.some(r=>r.id===s.id)});if(e){const d=u.value[e].attachments.filter(r=>Y(r)).map(r=>`/purchase-requisitions/attachments/${r.id}/download`),i=u.value[e].attachments.findIndex(r=>r.id===s.id);I.value=d,F.value=i,M.value=!0}},A=s=>{var d,i;if(!s)return[];const e=u.value[s.id];if(!e||!e.items||e.items.length===0)return(d=e==null?void 0:e.outlet)!=null&&d.nama_outlet?[e.outlet.nama_outlet]:[];if(s.mode==="pr_ops"||s.mode==="purchase_payment"){const r=new Set;if(e.items.forEach(x=>{x.outlet&&x.outlet.nama_outlet&&r.add(x.outlet.nama_outlet)}),r.size>0)return Array.from(r).sort()}return(i=e==null?void 0:e.outlet)!=null&&i.nama_outlet?[e.outlet.nama_outlet]:[]},$=s=>{var r,x;if(!s)return[];const e=u.value[s.id];if(!e||!e.items||e.items.length===0)return(r=e==null?void 0:e.category)!=null&&r.name?[e.category.name]:[];const d=[],i=new Map;return(s.mode==="pr_ops"||s.mode==="purchase_payment")&&e.items&&e.items.forEach(b=>{if(b.category&&b.category.id&&!i.has(b.category.id)){i.set(b.category.id,b.category);const S=b.category.name||(typeof b.category=="string"?b.category:"-");d.push(S)}}),d.length===0&&((x=e==null?void 0:e.category)!=null&&x.name)&&d.push(e.category.name),d};return vt(()=>{B(),D()}),(s,e)=>(a(),kt(Ct,{title:"Payment Tracker"},{default:ft(()=>{var d,i;return[t("div",Pt,[e[40]||(e[40]=t("div",{class:"flex justify-between items-center mb-6"},[t("h1",{class:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2"},[t("i",{class:"fa-solid fa-chart-line text-blue-500"}),j(" Payment Tracker ")])],-1)),t("div",At,[t("div",$t,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," From Date ",-1)),O(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>c.value.fromDate=r),type:"date",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"},null,512),[[V,c.value.fromDate]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," To Date ",-1)),O(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>c.value.toDate=r),type:"date",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"},null,512),[[V,c.value.toDate]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Search (All Columns) ",-1)),O(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>c.value.search=r),type:"text",placeholder:"Search PR Number, Title, Amount, Division, Outlet, Category, Creator, Approver...",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"},null,512),[[V,c.value.search]])])]),t("div",jt,[e[21]||(e[21]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Per Page:",-1)),O(t("select",{"onUpdate:modelValue":e[3]||(e[3]=r=>c.value.perPage=r),onChange:D,class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"},e[20]||(e[20]=[t("option",{value:"15"},"15",-1),t("option",{value:"30"},"30",-1),t("option",{value:"50"},"50",-1),t("option",{value:"100"},"100",-1)]),544),[[mt,c.value.perPage]])]),t("div",{class:"flex justify-end gap-2 mt-4"},[t("button",{onClick:lt,class:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors"}," Reset "),t("button",{onClick:D,class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors"},e[22]||(e[22]=[t("i",{class:"fa fa-search mr-2"},null,-1),j("Search ")]))])]),R.value?(a(),o("div",Mt,e[23]||(e[23]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"},null,-1),t("p",{class:"mt-2 text-gray-600 dark:text-gray-400"},"Loading data...",-1)]))):(a(),o("div",Tt,[t("div",Et,[t("div",Lt,[e[24]||(e[24]=t("h2",{class:"text-lg font-semibold text-gray-800 dark:text-white"}," Approved Payments ",-1)),t("span",St,[n.value?(a(),o("span",Ot,"Menampilkan "+l(n.value.from)+" sampai "+l(n.value.to)+" dari "+l(n.value.total)+" records",1)):(a(),o("span",Rt,"Total: "+l(h.value.length)+" records",1))])])]),h.value.length===0?(a(),o("div",Ut,e[25]||(e[25]=[t("i",{class:"fa fa-inbox text-4xl mb-2"},null,-1),t("p",null,"No approved payments found",-1)]))):(a(),o("div",It,[t("table",Ft,[e[39]||(e[39]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-12"}),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," PR Number "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Mode "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Status "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Title "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Amount "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Division "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Outlet "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Category "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Creator "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Approver "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Approval Level "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Approved At "),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",Nt,[(a(!0),o(p,null,k(h.value,r=>{var x,b,S,K,X,Z,tt,et,rt,st;return a(),o(p,{key:r.id},[t("tr",{class:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:g=>z(r.id)},[t("td",{class:"px-4 py-3 whitespace-nowrap",onClick:e[4]||(e[4]=C(()=>{},["stop"]))},[t("button",{onClick:g=>z(r.id),class:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},[t("i",{class:f(_.value.has(r.id)?"fa fa-chevron-down":"fa fa-chevron-right")},null,2)],8,qt)]),t("td",Bt,[t("span",zt,l(r.pr_number),1)]),t("td",Wt,[r.mode?(a(),o("span",{key:0,class:f(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",ct(r.mode)])},l(ut(r.mode)),3)):(a(),o("span",Ht,"-"))]),t("td",Jt,[t("span",{class:f(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",xt(r.status)])},l(r.status||"-"),3)]),t("td",Qt,[t("div",{class:"text-sm text-gray-900 dark:text-white max-w-xs truncate",title:r.title},l(r.title),9,Yt),r.description?(a(),o("div",{key:0,class:"text-xs text-gray-500 dark:text-gray-400 max-w-xs truncate",title:r.description},l(r.description),9,Gt)):v("",!0)]),t("td",Kt,[t("span",Xt," Rp "+l(N(r.amount)),1)]),t("td",Zt,[t("span",te,l(r.division||"-"),1)]),t("td",ee,[t("div",re,[u.value[r.id]?(a(),o(p,{key:0},[A(r).length>0?(a(),o(p,{key:0},[(a(!0),o(p,null,k(A(r).slice(0,2),(g,m)=>(a(),o("div",{key:m,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-50 text-blue-800 dark:bg-blue-900 dark:text-blue-200 border border-blue-200 dark:border-blue-700"},l(g),1))),128)),A(r).length>2?(a(),o("button",{key:0,onClick:C(g=>it(r),["stop"]),class:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 italic underline cursor-pointer"}," +"+l(A(r).length-2)+" outlet lainnya ",9,se)):v("",!0)],64)):(a(),o("span",ae,"-"))],64)):(a(),o("span",oe,"-"))])]),t("td",le,[t("div",de,[u.value[r.id]?(a(),o(p,{key:0},[$(r).length>0?(a(),o(p,{key:0},[(a(!0),o(p,null,k($(r).slice(0,2),(g,m)=>(a(),o("div",{key:m,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-50 text-green-800 dark:bg-green-900 dark:text-green-200 border border-green-200 dark:border-green-700"},l(g),1))),128)),$(r).length>2?(a(),o("button",{key:0,onClick:C(g=>nt(r),["stop"]),class:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 italic underline cursor-pointer"}," +"+l($(r).length-2)+" category lainnya ",9,ie)):v("",!0)],64)):(a(),o("span",ne,"-"))],64)):(a(),o("span",ge,"-"))])]),t("td",ue,[t("div",ce,[t("div",xe,[(x=r.creator)!=null&&x.avatar?(a(),o("div",{key:0,class:"w-8 h-8 rounded-full overflow-hidden cursor-pointer hover:scale-110 transition-transform border-2 border-gray-200 dark:border-gray-600",onClick:g=>J(`/storage/${r.creator.avatar}`)},[t("img",{src:`/storage/${r.creator.avatar}`,alt:((b=r.creator)==null?void 0:b.name)||"User",class:"w-full h-full object-cover"},null,8,ye)],8,pe)):(a(),o("div",be,l(H(((S=r.creator)==null?void 0:S.name)||"U")),1))]),t("div",ve,[t("div",ke,l(((K=r.creator)==null?void 0:K.name)||"-"),1),t("div",fe,l(((X=r.creator)==null?void 0:X.email)||""),1)])])]),t("td",he,[t("div",me,[t("div",_e,[(Z=r.approver)!=null&&Z.avatar?(a(),o("div",{key:0,class:"w-8 h-8 rounded-full overflow-hidden cursor-pointer hover:scale-110 transition-transform border-2 border-gray-200 dark:border-gray-600",onClick:g=>J(`/storage/${r.approver.avatar}`)},[t("img",{src:`/storage/${r.approver.avatar}`,alt:((tt=r.approver)==null?void 0:tt.name)||"User",class:"w-full h-full object-cover"},null,8,Ce)],8,we)):(a(),o("div",De,l(H(((et=r.approver)==null?void 0:et.name)||"U")),1))]),t("div",Pe,[t("div",Ae,l(((rt=r.approver)==null?void 0:rt.name)||"-"),1),t("div",$e,l(((st=r.approver)==null?void 0:st.email)||""),1)])])]),t("td",je,[t("span",Me," Level "+l(r.approval_level),1)]),t("td",Te,[t("div",Ee,l(L(r.approved_at)),1),t("div",Le,l(Q(r.approved_at)),1)]),t("td",{class:"px-4 py-3 whitespace-nowrap text-sm font-medium",onClick:e[5]||(e[5]=C(()=>{},["stop"]))},[t("button",{onClick:g=>gt(r.id),class:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300"},e[26]||(e[26]=[t("i",{class:"fa fa-eye mr-1"},null,-1),j("View ")]),8,Se)])],8,Vt),_.value.has(r.id)?(a(),o("tr",Oe,[t("td",Re,[U.value[r.id]?(a(),o("div",Ue,e[27]||(e[27]=[t("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"},null,-1),t("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},"Loading details...",-1)]))):u.value[r.id]?(a(),o("div",Ie,[t("div",Fe,[t("div",Ne,[e[32]||(e[32]=t("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-3"},"Basic Information",-1)),t("div",Ve,[t("div",qe,[e[28]||(e[28]=t("span",{class:"text-gray-600 dark:text-gray-400"},"PR Number:",-1)),t("span",Be,l(u.value[r.id].pr_number),1)]),t("div",ze,[e[29]||(e[29]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Status:",-1)),t("span",We,l(u.value[r.id].status),1)]),t("div",He,[e[30]||(e[30]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Date:",-1)),t("span",Je,l(L(u.value[r.id].date)),1)]),t("div",Qe,[e[31]||(e[31]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Created At:",-1)),t("span",Ye,l(L(u.value[r.id].created_at)),1)])])]),t("div",Ge,[e[36]||(e[36]=t("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-3"},"Approval Information",-1)),t("div",Ke,[t("div",Xe,[e[33]||(e[33]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Approval Level:",-1)),t("span",Ze,"Level "+l(r.approval_level),1)]),t("div",tr,[e[34]||(e[34]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Approved At:",-1)),t("span",er,l(L(r.approved_at))+" "+l(Q(r.approved_at)),1)]),r.approval_comments?(a(),o("div",rr,[e[35]||(e[35]=t("span",{class:"text-gray-600 dark:text-gray-400 block mb-1"},"Comments:",-1)),t("span",sr,l(r.approval_comments),1)])):v("",!0)])])]),u.value[r.id].items&&u.value[r.id].items.length>0?(a(),o("div",ar,[t("h4",or,"Items ("+l(u.value[r.id].items.length)+")",1),t("div",lr,[t("table",dr,[e[37]||(e[37]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300"},"Item"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300"},"Quantity"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300"},"Unit"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300"},"Unit Price"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300"},"Total")])],-1)),t("tbody",ir,[(a(!0),o(p,null,k(u.value[r.id].items,(g,m)=>(a(),o("tr",{key:m},[t("td",nr,l(g.description||g.item_name||"-"),1),t("td",gr,l(g.qty||g.quantity||"-"),1),t("td",ur,l(g.unit||"-"),1),t("td",cr,l(g.unit_price?"Rp "+N(g.unit_price):"-"),1),t("td",xr,l(g.subtotal||g.total?"Rp "+N(g.subtotal||g.total):"-"),1)]))),128))])])])])):v("",!0),u.value[r.id].attachments&&u.value[r.id].attachments.length>0?(a(),o("div",pr,[t("h4",yr,"Attachments ("+l(u.value[r.id].attachments.length)+")",1),t("div",br,[(a(!0),o(p,null,k(u.value[r.id].attachments,(g,m)=>(a(),o("div",{key:m,class:"border border-gray-200 dark:border-gray-700 rounded p-2"},[Y(g)?(a(),o("div",{key:0,class:"cursor-pointer",onClick:Hr=>pt(g)},[t("img",{src:`/purchase-requisitions/attachments/${g.id}/download`,alt:g.file_name,class:"w-full h-32 object-cover rounded mb-2 hover:opacity-80 transition-opacity"},null,8,kr),t("p",{class:"text-xs text-gray-600 dark:text-gray-400 truncate",title:g.file_name},l(g.file_name),9,fr)],8,vr)):(a(),o("div",hr,[t("a",{href:`/purchase-requisitions/attachments/${g.id}/download`,target:"_blank",class:"flex flex-col items-center text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"},[e[38]||(e[38]=t("i",{class:"fa fa-file text-4xl mb-2"},null,-1)),t("p",{class:"text-xs text-center truncate w-full",title:g.file_name},l(g.file_name),9,_r)],8,mr)]))]))),128))])])):v("",!0)])):v("",!0)])])):v("",!0)],64)}),128))])])]))])),n.value&&n.value.last_page>1?(a(),o("div",wr,[t("div",Cr," Menampilkan "+l(n.value.from)+" sampai "+l(n.value.to)+" dari "+l(n.value.total)+" records ",1),t("nav",Dr,[t("button",{onClick:e[6]||(e[6]=r=>P(1)),disabled:n.value.current_page===1,class:f(["px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-l-lg transition-colors",n.value.current_page===1?"bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"])}," First ",10,Pr),t("button",{onClick:e[7]||(e[7]=r=>P(n.value.current_page-1)),disabled:n.value.current_page===1,class:f(["px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 transition-colors",n.value.current_page===1?"bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"])}," Previous ",10,Ar),(a(!0),o(p,null,k(dt(),r=>(a(),o(p,{key:r},[r!=="..."?(a(),o("button",{key:0,onClick:x=>P(r),class:f(["px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 transition-colors",r===n.value.current_page?"bg-blue-600 text-white border-blue-600":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"])},l(r),11,$r)):(a(),o("span",jr," ... "))],64))),128)),t("button",{onClick:e[8]||(e[8]=r=>P(n.value.current_page+1)),disabled:n.value.current_page===n.value.last_page,class:f(["px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 transition-colors",n.value.current_page===n.value.last_page?"bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"])}," Next ",10,Mr),t("button",{onClick:e[9]||(e[9]=r=>P(n.value.last_page)),disabled:n.value.current_page===n.value.last_page,class:f(["px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-r-lg transition-colors",n.value.current_page===n.value.last_page?"bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"])}," Last ",10,Tr)])])):v("",!0)]),ht(_t(Dt),{visible:M.value,imgs:I.value,index:F.value,onHide:e[10]||(e[10]=r=>M.value=!1)},null,8,["visible","imgs","index"]),T.value?(a(),o("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e[13]||(e[13]=r=>T.value=!1)},[t("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",onClick:e[12]||(e[12]=C(()=>{},["stop"]))},[t("div",Er,[t("h3",Lr,[e[41]||(e[41]=t("i",{class:"fa fa-store mr-2 text-blue-500"},null,-1)),j(" All Outlets - "+l((d=w.value)==null?void 0:d.pr_number),1)]),t("button",{onClick:e[11]||(e[11]=r=>T.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},e[42]||(e[42]=[t("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),t("div",Sr,[t("div",Or,[(a(!0),o(p,null,k(A(w.value),(r,x)=>(a(),o("div",{key:x,class:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg"},[t("div",Rr,[e[43]||(e[43]=t("i",{class:"fa fa-store mr-2 text-blue-500"},null,-1)),t("span",Ur,l(r),1)])]))),128))])])])])):v("",!0),E.value?(a(),o("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e[16]||(e[16]=r=>E.value=!1)},[t("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",onClick:e[15]||(e[15]=C(()=>{},["stop"]))},[t("div",Ir,[t("h3",Fr,[e[44]||(e[44]=t("i",{class:"fa fa-tags mr-2 text-green-500"},null,-1)),j(" All Categories - "+l((i=w.value)==null?void 0:i.pr_number),1)]),t("button",{onClick:e[14]||(e[14]=r=>E.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},e[45]||(e[45]=[t("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),t("div",Nr,[t("div",Vr,[(a(!0),o(p,null,k($(w.value),(r,x)=>(a(),o("div",{key:x,class:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg"},[t("div",qr,[e[46]||(e[46]=t("i",{class:"fa fa-tag mr-2 text-green-500"},null,-1)),t("span",Br,l(r),1)])]))),128))])])])])):v("",!0)]}),_:1}))}};export{as as default};
