import{r as p,c as y,A as D,B as r,C as T,D as t,L as o,E as S,G as c,N as u,H as b,J as v,F as C,M as B,W as E}from"./vendor-vue-g7iCcTkf.js";import{A as M}from"./AppLayout-U5X72hCR.js";import"./vendor-utils-CpgP2uT4.js";import"./app-CMkuePvF.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DCdSPjRr.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const N={class:"p-6 space-y-6"},A={class:"flex items-center justify-between"},F={class:"flex gap-2"},V=["disabled"],L={key:0,class:"fa-solid fa-spinner fa-spin mr-1"},R={key:1,class:"fa-solid fa-file-excel mr-1"},U={class:"bg-white rounded-xl shadow-xl p-6"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},j={key:0,class:"bg-white rounded-xl shadow-xl p-12 text-center"},G={key:1,class:"bg-white rounded-xl shadow-xl overflow-x-auto"},I={class:"min-w-full divide-y divide-gray-200"},O={class:"bg-white divide-y divide-gray-200"},H={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},J={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},K={class:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-blue-600"},P={class:"bg-gray-50"},q={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-right text-blue-600"},z={key:2,class:"bg-white rounded-xl shadow-xl p-12 text-center"},lt={__name:"Summary",props:{summaryData:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({start_date:"",end_date:""})}},setup(m){const d=m,i=p(!1),n=p(!1),a=p({start_date:d.filters.start_date||"",end_date:d.filters.end_date||""}),_=y(()=>d.summaryData.reduce((s,e)=>s+(e.total_mac||0),0)),x=y(()=>a.value.start_date&&a.value.end_date||d.filters.start_date&&d.filters.end_date),g=s=>!s&&s!==0?"0,00":new Intl.NumberFormat("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2}).format(s),f=()=>{!a.value.start_date||!a.value.end_date||(i.value=!0,E.get("/internal-use-waste-report/summary",{start_date:a.value.start_date,end_date:a.value.end_date},{preserveState:!0,preserveScroll:!0,onFinish:()=>{i.value=!1}}))},w=()=>{if(!x.value)return;n.value=!0;const s=new URLSearchParams({start_date:a.value.start_date,end_date:a.value.end_date});window.location.href="/internal-use-waste-report/summary/export?"+s.toString(),setTimeout(()=>{n.value=!1},2e3)},h=()=>{window.close()};return(s,e)=>(r(),D(M,null,{default:T(()=>[t("div",N,[t("div",A,[e[3]||(e[3]=t("h1",{class:"text-2xl font-bold text-gray-800"},[t("i",{class:"fa-solid fa-chart-pie mr-2"}),c(" Summary Report RnD, BM, WM ")],-1)),t("div",F,[t("button",{onClick:w,disabled:i.value||n.value||!x.value,class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition disabled:opacity-50 disabled:cursor-not-allowed"},[n.value?(r(),o("i",L)):(r(),o("i",R)),c(" "+u(n.value?"Exporting...":"Export Excel"),1)],8,V),t("button",{onClick:h,class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition"},e[2]||(e[2]=[t("i",{class:"fa-solid fa-arrow-left mr-1"},null,-1),c(" Kembali ")]))])]),t("div",U,[t("div",W,[t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Mulai",-1)),b(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=l=>a.value.start_date=l),onChange:f,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,544),[[v,a.value.start_date]])]),t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Akhir",-1)),b(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=l=>a.value.end_date=l),onChange:f,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,544),[[v,a.value.end_date]])])])]),i.value?(r(),o("div",j,e[6]||(e[6]=[t("div",{class:"text-blue-500"},[t("i",{class:"fa-solid fa-spinner fa-spin text-4xl mb-4"}),t("p",{class:"text-lg font-medium"},"Memuat data...")],-1)]))):m.summaryData&&m.summaryData.length>0?(r(),o("div",G,[t("table",I,[e[8]||(e[8]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Outlet"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total MAC")])],-1)),t("tbody",O,[(r(!0),o(C,null,B(m.summaryData,(l,k)=>(r(),o("tr",{key:l.outlet_id,class:"hover:bg-gray-50"},[t("td",H,u(k+1),1),t("td",J,u(l.outlet_name),1),t("td",K,u(g(l.total_mac)),1)]))),128))]),t("tfoot",P,[t("tr",null,[e[7]||(e[7]=t("td",{colspan:"2",class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right"},"Grand Total:",-1)),t("td",q,u(g(_.value)),1)])])])])):i.value?S("",!0):(r(),o("div",z,e[9]||(e[9]=[t("div",{class:"text-gray-500"},[t("i",{class:"fa-solid fa-inbox text-4xl mb-4"}),t("p",{class:"text-lg font-medium"},"Tidak ada data"),t("p",{class:"text-sm"},"Silakan pilih periode tanggal untuk melihat summary")],-1)])))])]),_:1}))}};export{lt as default};
