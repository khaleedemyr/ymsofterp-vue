import{a as T}from"./vendor-utils-CpgP2uT4.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as f,w,c as k,a8 as C,L as n,E as x,B as i,D as t,N as o,A as S,F,M as L}from"./vendor-vue-g7iCcTkf.js";const H={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},I={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},M={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-6xl sm:w-full"},j={class:"bg-white px-6 py-4 border-b border-gray-200"},N={class:"flex items-center justify-between"},z={key:0,class:"text-sm text-gray-600 mt-1"},A={class:"bg-white px-6 py-4"},E={key:0,class:"text-center py-8"},V={key:1,class:"text-center py-8"},W={class:"text-red-600"},G={key:2},P={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},q={class:"bg-blue-50 rounded-lg p-4"},J={class:"flex items-center"},K={class:"ml-3"},Q={class:"text-2xl font-bold text-blue-800"},U={class:"bg-green-50 rounded-lg p-4"},X={class:"flex items-center"},Y={class:"ml-3"},Z={class:"text-lg font-bold text-green-800"},$={class:"bg-orange-50 rounded-lg p-4"},tt={class:"flex items-center"},et={class:"ml-3"},st={class:"text-2xl font-bold text-orange-800"},at={class:"bg-purple-50 rounded-lg p-4"},ot={class:"flex items-center"},rt={class:"ml-3"},lt={class:"text-lg font-bold text-purple-800"},it={class:"bg-gray-50 rounded-lg p-4 mb-6"},nt={class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},dt={class:"overflow-x-auto"},ut={class:"min-w-full divide-y divide-gray-200"},ct={class:"bg-white divide-y divide-gray-200"},gt={class:"px-6 py-4 whitespace-nowrap"},pt={class:"text-sm font-medium text-gray-900"},xt={class:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900"},mt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900"},vt={class:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900"},yt={class:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900"},ft={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900"},_t={key:0,class:"text-center py-8"},ht={key:3,class:"text-center py-8"},bt={__name:"OutletDailyRevenueModal",props:{isOpen:Boolean,selectedOutlet:Object,dateFrom:String,dateTo:String},emits:["close"],setup(_,{emit:D}){const l=_,O=D,m=f(!1),a=f(null),c=f(null);w(()=>[l.selectedOutlet,l.dateFrom,l.dateTo],([s,e,r])=>{s&&e&&r&&l.isOpen&&h(s.outlet_code,e,r)},{immediate:!0}),w(()=>l.isOpen,s=>{s&&l.selectedOutlet&&l.dateFrom&&l.dateTo?h(l.selectedOutlet.outlet_code,l.dateFrom,l.dateTo):s||(a.value=null,c.value=null)});async function h(s,e,r){var g,p;if(!(!s||!e||!r)){m.value=!0,c.value=null;try{const d=await T.get("/sales-outlet-dashboard/outlet-daily-revenue",{params:{outlet_code:s,date_from:e,date_to:r}});a.value=d.data}catch(d){c.value=((p=(g=d.response)==null?void 0:g.data)==null?void 0:p.error)||"Gagal mengambil data revenue harian",console.error("Error fetching daily revenue data:",d)}finally{m.value=!1}}}function v(s){return s.toLocaleString("id-ID")}function y(){O("close")}const b=k(()=>{var s;return(s=a.value)!=null&&s.daily_data?[{name:"Revenue",data:a.value.daily_data.map(e=>e.revenue)}]:[]}),R=k(()=>{var s,e;return{chart:{type:"line",height:300,toolbar:{show:!0},animations:{enabled:!0,easing:"easeinout",speed:800}},stroke:{width:3,curve:"smooth"},markers:{size:5,colors:["#fff"],strokeColors:["#3B82F6"],strokeWidth:3,hover:{size:8}},xaxis:{categories:((e=(s=a.value)==null?void 0:s.daily_data)==null?void 0:e.map(r=>new Date(r.date).toLocaleDateString("id-ID",{day:"2-digit",month:"short"})))||[],title:{text:"Tanggal"},labels:{style:{fontWeight:600},rotate:-45}},yaxis:{title:{text:"Revenue (Rp)"},labels:{style:{fontWeight:600},formatter:function(r){return"Rp "+r.toLocaleString("id-ID")}}},colors:["#3B82F6"],grid:{borderColor:"#e5e7eb",strokeDashArray:4},tooltip:{y:{formatter:function(r){return"Rp "+r.toLocaleString("id-ID")}}},dataLabels:{enabled:!1}}});return(s,e)=>{var g,p,d;const r=C("apexchart");return _.isOpen?(i(),n("div",H,[t("div",I,[t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:y}),t("div",M,[t("div",j,[t("div",N,[t("div",null,[e[0]||(e[0]=t("h3",{class:"text-lg font-semibold text-gray-900"}," Revenue Harian Outlet ",-1)),a.value?(i(),n("p",z,o((g=a.value.outlet)==null?void 0:g.outlet_name)+" - "+o((p=a.value.date_range)==null?void 0:p.from_formatted)+" s/d "+o((d=a.value.date_range)==null?void 0:d.to_formatted),1)):x("",!0)]),t("button",{onClick:y,class:"text-gray-400 hover:text-gray-600 transition-colors"},e[1]||(e[1]=[t("i",{class:"fa-solid fa-times text-xl"},null,-1)]))])]),t("div",A,[m.value?(i(),n("div",E,e[2]||(e[2]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),t("p",{class:"mt-2 text-gray-600"},"Memuat data revenue harian...",-1)]))):c.value?(i(),n("div",V,[e[3]||(e[3]=t("div",{class:"text-red-500 mb-4"},[t("i",{class:"fa-solid fa-exclamation-triangle text-4xl"})],-1)),t("p",W,o(c.value),1)])):a.value?(i(),n("div",G,[t("div",P,[t("div",q,[t("div",J,[e[5]||(e[5]=t("div",{class:"bg-blue-100 p-2 rounded-lg"},[t("i",{class:"fa-solid fa-calendar-days text-blue-600"})],-1)),t("div",K,[e[4]||(e[4]=t("p",{class:"text-sm text-blue-600 font-medium"},"Total Hari",-1)),t("p",Q,o(a.value.summary.total_days),1)])])]),t("div",U,[t("div",X,[e[7]||(e[7]=t("div",{class:"bg-green-100 p-2 rounded-lg"},[t("i",{class:"fa-solid fa-money-bill-wave text-green-600"})],-1)),t("div",Y,[e[6]||(e[6]=t("p",{class:"text-sm text-green-600 font-medium"},"Total Revenue",-1)),t("p",Z,o(a.value.summary.total_revenue_formatted),1)])])]),t("div",$,[t("div",tt,[e[9]||(e[9]=t("div",{class:"bg-orange-100 p-2 rounded-lg"},[t("i",{class:"fa-solid fa-receipt text-orange-600"})],-1)),t("div",et,[e[8]||(e[8]=t("p",{class:"text-sm text-orange-600 font-medium"},"Total Orders",-1)),t("p",st,o(v(a.value.summary.total_orders)),1)])])]),t("div",at,[t("div",ot,[e[11]||(e[11]=t("div",{class:"bg-purple-100 p-2 rounded-lg"},[t("i",{class:"fa-solid fa-chart-line text-purple-600"})],-1)),t("div",rt,[e[10]||(e[10]=t("p",{class:"text-sm text-purple-600 font-medium"},"Rata-rata Harian",-1)),t("p",lt,o(a.value.summary.avg_daily_revenue_formatted),1)])])])]),t("div",it,[e[12]||(e[12]=t("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Trend Revenue Harian",-1)),b.value.length>0?(i(),S(r,{key:0,type:"line",height:"300",options:R.value,series:b.value},null,8,["options","series"])):x("",!0)]),t("div",nt,[e[15]||(e[15]=t("div",{class:"px-6 py-4 bg-gray-50 border-b border-gray-200"},[t("h4",{class:"text-lg font-semibold text-gray-900"},"Detail per Hari")],-1)),t("div",dt,[t("table",ut,[e[13]||(e[13]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tanggal "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Orders "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Revenue "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Customers "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Avg Order Value "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Cover ")])],-1)),t("tbody",ct,[(i(!0),n(F,null,L(a.value.daily_data,u=>(i(),n("tr",{key:u.date,class:"hover:bg-gray-50"},[t("td",gt,[t("div",pt,o(u.date_formatted),1)]),t("td",xt,o(v(u.orders)),1),t("td",mt,o(u.revenue_formatted),1),t("td",vt,o(v(u.customers)),1),t("td",yt,o(u.avg_order_value_formatted),1),t("td",ft,o(u.cover_formatted),1)]))),128))])])]),a.value.daily_data.length===0?(i(),n("div",_t,e[14]||(e[14]=[t("i",{class:"fa-solid fa-calendar text-4xl text-gray-400 mb-4"},null,-1),t("p",{class:"text-gray-500"},"Tidak ada data revenue untuk periode ini",-1)]))):x("",!0)])])):(i(),n("div",ht,e[16]||(e[16]=[t("i",{class:"fa-solid fa-building text-4xl text-gray-400 mb-4"},null,-1),t("p",{class:"text-gray-500"},"Pilih outlet untuk melihat revenue harian",-1)])))]),t("div",{class:"bg-gray-50 px-6 py-3 border-t border-gray-200"},[t("div",{class:"flex justify-end"},[t("button",{onClick:y,class:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors"}," Tutup ")])])])])])):x("",!0)}}},Ot=B(bt,[["__scopeId","data-v-51bc04eb"]]);export{Ot as default};
