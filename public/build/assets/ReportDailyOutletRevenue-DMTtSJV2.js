import{k,r as p,$ as M,c as T,a as L,L as d,B as i,D as e,E,G as U,Q as F,H as h,I as x,F as m,M as y,R as I,N as o,l as q}from"./vendor-vue-g7iCcTkf.js";import{A as B}from"./AppLayout-cuNKSDqJ.js";import{a as g}from"./vendor-utils-CpgP2uT4.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-Bb65-N1P.js";import"./vendor-charts-CuqD4wLC.js";import"./ProfileUpdateModal-aFVowX1N.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const Y={class:"min-h-screen w-full bg-gray-50 p-0"},P={class:"w-full bg-white shadow-2xl rounded-2xl p-8"},$={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8 items-end"},H={key:0},j=["value"],Q=["value"],z={key:0,class:"text-center py-10"},G={key:1},K={class:"font-semibold mb-2 text-lg text-gray-700"},W={class:"overflow-x-auto mb-8"},X={class:"min-w-full rounded-2xl overflow-hidden shadow-lg"},Z={class:"px-3 py-3 text-center font-semibold text-gray-800 border-r border-gray-200"},ee={class:"px-3 py-3 text-center font-semibold text-gray-800 border-r border-gray-200"},te={class:"px-3 py-3 text-center border-r border-gray-200"},re={class:"px-3 py-3 text-right border-r border-gray-200"},oe={class:"px-3 py-3 text-right border-r border-gray-200"},se={class:"px-3 py-3 text-right border-r border-gray-200"},le={class:"px-3 py-3 text-center border-r border-gray-200"},ae={class:"px-3 py-3 text-right border-r border-gray-200"},ne={class:"px-3 py-3 text-right border-r border-gray-200"},de={class:"px-3 py-3 text-right border-r border-gray-200"},ie={class:"px-3 py-3 text-center border-r border-gray-200 font-semibold"},ce={class:"px-3 py-3 text-right border-r border-gray-200 font-semibold"},ue={class:"px-3 py-3 text-right border-r border-gray-200 font-semibold"},be={class:"px-3 py-3 text-right font-semibold"},pe={class:"bg-[#1e3a8a] text-white font-bold"},he={class:"px-3 py-3 text-center border-r border-blue-400"},xe={class:"px-3 py-3 text-right border-r border-blue-400"},me={class:"px-3 py-3 text-right border-r border-blue-400"},ye={class:"px-3 py-3 text-right border-r border-blue-400"},ge={class:"px-3 py-3 text-center border-r border-blue-400"},ve={class:"px-3 py-3 text-right border-r border-blue-400"},_e={class:"px-3 py-3 text-right border-r border-blue-400"},fe={class:"px-3 py-3 text-right border-r border-blue-400"},we={class:"px-3 py-3 text-center border-r border-blue-400"},ke={class:"px-3 py-3 text-right border-r border-blue-400"},Ee={class:"px-3 py-3 text-right border-r border-blue-400"},Re={class:"px-3 py-3 text-right"},Ne=Object.assign({layout:B},{__name:"ReportDailyOutletRevenue",setup(Oe){var w;const a=k({outlet:"",month:"",year:""}),v=p([]),n=k({summary:{lunch:{cover:0,revenue:0,avg_check:0,disc:0},dinner:{cover:0,revenue:0,avg_check:0,disc:0},total:{cover:0,revenue:0,avg_check:0,disc:0}},daily_data:{}}),b=p(!1),_=p(!1),c=((w=M().props.auth)==null?void 0:w.user)||{},f=new Date().getFullYear(),R=T(()=>{const s=[];for(let t=f;t>=f-5;t--)s.push(t);return s}),N=async()=>{const s=await g.get("/api/outlets/report");v.value=s.data.outlets||[]},O=async()=>{const s=await g.get("/api/my-outlet-qr");s.data.qr_code&&(a.outlet=s.data.qr_code)},C=async()=>{if(!a.month||!a.year){alert("Pilih bulan dan tahun terlebih dahulu");return}if(c.id_outlet==1&&!a.outlet){alert("Pilih outlet terlebih dahulu");return}b.value=!0;try{const s={month:a.month,year:a.year,...c.id_outlet==1&&{outlet:a.outlet}},t=await g.get("/api/report/daily-outlet-revenue",{params:s});n.daily_data=t.data.daily_data||{},n.summary=t.data.summary||{lunch:{cover:0,revenue:0,avg_check:0,disc:0},dinner:{cover:0,revenue:0,avg_check:0,disc:0},total:{cover:0,revenue:0,avg_check:0,disc:0}},_.value=!0}catch(s){console.error("Error fetching report:",s),alert("Terjadi kesalahan saat mengambil data report")}finally{b.value=!1}},S=s=>{const t=new Date(s),r=t.getDate(),u=t.toLocaleDateString("en-US",{month:"short"}),D=t.getFullYear().toString().slice(-2);return`${r}-${u}-${D}`},l=s=>typeof s!="number"?"0":s.toLocaleString("id-ID"),V=s=>["","Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][parseInt(s)]||"",A=s=>{const t=s.toLowerCase();return t==="sabtu"||t==="minggu"?"bg-orange-100 hover:bg-orange-200":"bg-white hover:bg-blue-50"};return L(async()=>{const s=new Date;a.month=(s.getMonth()+1).toString(),a.year=s.getFullYear().toString(),c.id_outlet==1?await N():await O()}),(s,t)=>(i(),d("div",Y,[e("div",P,[t[12]||(t[12]=e("h1",{class:"text-2xl font-bold mb-6 text-blue-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-chart-line"}),U(" Daily Outlet Revenue Report ")],-1)),e("div",$,[F(c).id_outlet==1?(i(),d("div",H,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium mb-1"},"Outlet",-1)),h(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>a.outlet=r),class:"block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 px-3 py-2",required:""},[t[3]||(t[3]=e("option",{value:""},"Pilih Outlet",-1)),(i(!0),d(m,null,y(v.value,r=>(i(),d("option",{key:r.id,value:r.qr_code},o(r.name),9,j))),128))],512),[[x,a.outlet]])])):E("",!0),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium mb-1"},"Bulan",-1)),h(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>a.month=r),class:"block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 px-3 py-2",required:""},t[5]||(t[5]=[I('<option value="" data-v-4890e8be>Pilih Bulan</option><option value="1" data-v-4890e8be>Januari</option><option value="2" data-v-4890e8be>Februari</option><option value="3" data-v-4890e8be>Maret</option><option value="4" data-v-4890e8be>April</option><option value="5" data-v-4890e8be>Mei</option><option value="6" data-v-4890e8be>Juni</option><option value="7" data-v-4890e8be>Juli</option><option value="8" data-v-4890e8be>Agustus</option><option value="9" data-v-4890e8be>September</option><option value="10" data-v-4890e8be>Oktober</option><option value="11" data-v-4890e8be>November</option><option value="12" data-v-4890e8be>Desember</option>',13)]),512),[[x,a.month]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium mb-1"},"Tahun",-1)),h(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>a.year=r),class:"block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 px-3 py-2",required:""},[t[7]||(t[7]=e("option",{value:""},"Pilih Tahun",-1)),(i(!0),d(m,null,y(R.value,r=>(i(),d("option",{key:r,value:r},o(r),9,Q))),128))],512),[[x,a.year]])]),e("div",{class:"flex items-end h-full"},[e("button",{onClick:C,class:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700 transition"},"Tampilkan")])]),b.value?(i(),d("div",z,t[9]||(t[9]=[e("span",{class:"text-gray-500"},"Loading...",-1)]))):_.value?(i(),d("div",G,[e("h2",K,"Daily Outlet Revenue Report - "+o(V(a.month))+" "+o(a.year),1),e("div",W,[e("table",X,[t[11]||(t[11]=e("thead",null,[e("tr",{class:"bg-[#2563eb] text-white font-bold text-sm"},[e("th",{class:"px-3 py-3 text-center border-r border-blue-400"},"DATE"),e("th",{class:"px-3 py-3 text-center border-r border-blue-400"},"DAY"),e("th",{class:"px-3 py-3 text-center border-r border-blue-400",colspan:"4"},"LUNCH"),e("th",{class:"px-3 py-3 text-center border-r border-blue-400",colspan:"4"},"DINNER"),e("th",{class:"px-3 py-3 text-center",colspan:"4"},"TOTAL FB REVENUE")]),e("tr",{class:"bg-[#1e40af] text-white font-bold text-xs"},[e("th",{class:"px-3 py-2 text-center border-r border-blue-400"}),e("th",{class:"px-3 py-2 text-center border-r border-blue-400"}),e("th",{class:"px-3 py-2 text-center border-r border-blue-400"},"COVER"),e("th",{class:"px-3 py-2 text-center border-r border-blue-400"},"REVENUE"),e("th",{class:"px-3 py-2 text-center border-r border-blue-400"},"A/C"),e("th",{class:"px-3 py-2 text-center border-r border-blue-400"},"DISC"),e("th",{class:"px-3 py-2 text-center border-r border-blue-400"},"COVER"),e("th",{class:"px-3 py-2 text-center border-r border-blue-400"},"REVENUE"),e("th",{class:"px-3 py-2 text-center border-r border-blue-400"},"A/C"),e("th",{class:"px-3 py-2 text-center border-r border-blue-400"},"DISC"),e("th",{class:"px-3 py-2 text-center border-r border-blue-400"},"COVER"),e("th",{class:"px-3 py-2 text-center border-r border-blue-400"},"REVENUE"),e("th",{class:"px-3 py-2 text-center border-r border-blue-400"},"A/C"),e("th",{class:"px-3 py-2 text-center"},"DISC")])],-1)),e("tbody",null,[(i(!0),d(m,null,y(n.daily_data,(r,u)=>(i(),d("tr",{key:u,class:q([A(r.day_name),"border-b last:border-b-0"])},[e("td",Z,o(S(u)),1),e("td",ee,o(r.day_name),1),e("td",te,o(r.lunch.cover||0),1),e("td",re,o(l(r.lunch.revenue||0)),1),e("td",oe,o(l(r.lunch.avg_check||0)),1),e("td",se,o(l(r.lunch.disc||0)),1),e("td",le,o(r.dinner.cover||0),1),e("td",ae,o(l(r.dinner.revenue||0)),1),e("td",ne,o(l(r.dinner.avg_check||0)),1),e("td",de,o(l(r.dinner.disc||0)),1),e("td",ie,o(r.total.cover||0),1),e("td",ce,o(l(r.total.revenue||0)),1),e("td",ue,o(l(r.total.avg_check||0)),1),e("td",be,o(l(r.total.disc||0)),1)],2))),128)),e("tr",pe,[t[10]||(t[10]=e("td",{class:"px-3 py-3 text-center border-r border-blue-400",colspan:"2"},"MONTH TO DATE",-1)),e("td",he,o(n.summary.lunch.cover||0),1),e("td",xe,o(l(n.summary.lunch.revenue||0)),1),e("td",me,o(l(n.summary.lunch.avg_check||0)),1),e("td",ye,o(l(n.summary.lunch.disc||0)),1),e("td",ge,o(n.summary.dinner.cover||0),1),e("td",ve,o(l(n.summary.dinner.revenue||0)),1),e("td",_e,o(l(n.summary.dinner.avg_check||0)),1),e("td",fe,o(l(n.summary.dinner.disc||0)),1),e("td",we,o(n.summary.total.cover||0),1),e("td",ke,o(l(n.summary.total.revenue||0)),1),e("td",Ee,o(l(n.summary.total.avg_check||0)),1),e("td",Re,o(l(n.summary.total.disc||0)),1)])])])])])):E("",!0)])]))}}),Ie=J(Ne,[["__scopeId","data-v-4890e8be"]]);export{Ie as default};
