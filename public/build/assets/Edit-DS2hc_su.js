import{A as w}from"./AppLayout-C3aoO-bU.js";import{S as r}from"./app-a4QKyjuP.js";import{a as R}from"./vendor-utils-CpgP2uT4.js";import{a8 as h,A as k,B as d,C as b,D as t,G as u,N as i,O as B,L as m,E as G,F as L,M as D,H as C,J as O,x as S}from"./vendor-vue-g7iCcTkf.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CoSAPJ9h.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const N={props:{goodReceive:Object,items:Array},components:{AppLayout:w},data(){return{error:null}},methods:{formatDate(l){return l?new Date(l).toLocaleDateString("id-ID"):"-"},async submit(){var e,o;if(this.error=null,!!(await r.fire({title:"Update Qty GR?",text:"Qty dan inventory akan diupdate. Lanjutkan?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, update",cancelButtonText:"Batal"})).isConfirmed){r.fire({title:"Menyimpan...",allowOutsideClick:!1,didOpen:()=>r.showLoading()});try{const s=await R.put(`/outlet-food-good-receives/${this.goodReceive.id}`,{items:this.items.map(n=>({id:n.id,qty:n.qty}))});if(r.close(),s.data&&s.data.success)await r.fire("Berhasil",s.data.message||"Qty GR berhasil diupdate","success"),this.$inertia.visit(this.route("outlet-food-good-receives.index"));else throw new Error(s.data.message||"Gagal update GR")}catch(s){r.close(),this.error=((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||s.message||"Gagal update GR",r.fire("Gagal",this.error,"error")}}}}},V={class:"max-w-4xl mx-auto py-8 px-2"},E={class:"mb-4 bg-white rounded-xl shadow p-6 flex flex-col gap-2 border border-blue-100"},T={class:"font-bold text-lg"},q={class:"text-sm text-gray-500"},M={class:"text-sm text-gray-500"},Q={class:"text-sm text-gray-500"},I={class:"bg-white rounded-xl shadow p-6 mb-4 border border-blue-100 transition-all hover:shadow-lg"},U={class:"min-w-full text-sm"},j={class:"text-right"},F=["onUpdate:modelValue"],H={class:"mt-6 flex gap-2"},J={key:0,class:"mt-4 text-red-600 font-semibold"};function W(l,e,o,s,n,c){const y=h("inertia-link"),_=h("AppLayout");return d(),k(_,null,{default:b(()=>{var p,f,x,g;return[t("div",V,[e[5]||(e[5]=t("h1",{class:"text-3xl font-extrabold mb-6 flex items-center gap-2 text-blue-700 drop-shadow-sm"},[t("i",{class:"fa-solid fa-truck text-blue-500"}),u(" Edit Good Receive Outlet ")],-1)),t("div",E,[t("div",T,"Nomor GR: "+i(((p=o.goodReceive)==null?void 0:p.number)||"-"),1),t("div",q,"Tanggal: "+i(this.formatDate((f=o.goodReceive)==null?void 0:f.receive_date)),1),t("div",M,"Outlet: "+i(((x=o.goodReceive)==null?void 0:x.outlet_name)||"-"),1),t("div",Q,"Warehouse Outlet: "+i(((g=o.goodReceive)==null?void 0:g.warehouse_outlet_name)||"-"),1)]),t("div",I,[e[4]||(e[4]=t("div",{class:"font-bold mb-2 text-blue-700 flex items-center gap-2"},[t("i",{class:"fa-solid fa-list-check"}),u(" List Item GR")],-1)),t("form",{onSubmit:e[0]||(e[0]=B((...a)=>c.submit&&c.submit(...a),["prevent"]))},[t("table",U,[e[1]||(e[1]=t("thead",null,[t("tr",null,[t("th",{class:"text-left"},"Item"),t("th",{class:"text-left"},"Satuan"),t("th",{class:"text-right"},"Qty")])],-1)),t("tbody",null,[(d(!0),m(L,null,D(o.items,a=>(d(),m("tr",{key:a.id},[t("td",null,i(a.item_name),1),t("td",null,i(a.unit_name),1),t("td",j,[C(t("input",{type:"number","onUpdate:modelValue":v=>a.qty=v,min:"0",step:"any",class:"form-input border rounded px-2 py-1 w-24 text-right"},null,8,F),[[O,a.qty,void 0,{number:!0}]])])]))),128))])]),t("div",H,[e[3]||(e[3]=t("button",{type:"submit",class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-bold shadow"},"Simpan",-1)),S(y,{href:l.route("outlet-food-good-receives.index"),class:"bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-2 rounded-lg font-bold"},{default:b(()=>e[2]||(e[2]=[u("Batal")])),_:1},8,["href"])]),n.error?(d(),m("div",J,i(n.error),1)):G("",!0)],32)])])]}),_:1})}const st=A(N,[["render",W]]);export{st as default};
