import{r as f,k as U,w as $,A as D,B as a,C as V,D as e,x as P,Q as T,S as F,G as B,O as L,L as n,E as u,H as c,J as w,N as d,I,Y as _,F as j,M as E,W as R}from"./vendor-vue-g7iCcTkf.js";import{A as J}from"./AppLayout-CCl6N_RX.js";import{S as y}from"./app-DvUgkxHf.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./ProfileUpdateModal-oDgFzWKX.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const O={class:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6"},Y={class:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl p-6 max-w-4xl mx-auto"},K={class:"flex items-center justify-between mb-6"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},X={key:0,class:"text-red-400 text-sm mt-1"},q={class:"border-2 border-dashed border-white/30 rounded-xl p-8 text-center hover:border-white/50 transition-all"},Z={key:1,class:"relative"},ee=["src"],te={key:0,class:"text-red-400 text-sm mt-1"},oe={key:0,class:"mb-6"},le={class:"bg-white/5 border border-white/10 rounded-xl p-4"},ie={class:"bg-white rounded-lg p-4 max-w-3xl mx-auto relative overflow-hidden"},re={class:"relative inline-block"},ae=["src"],ne={key:0,class:"absolute inset-0"},se={key:1},ue={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},de={class:"text-white font-medium mb-3"},ce={class:"grid grid-cols-2 gap-3"},be=["onUpdate:modelValue"],me=["onUpdate:modelValue"],pe=["onUpdate:modelValue"],fe=["onUpdate:modelValue"],ge={class:"col-span-2"},xe=["onUpdate:modelValue"],he={class:"mt-3 flex flex-wrap gap-2"},ve=["onClick"],we=["onClick"],_e=["onClick"],ye=["onClick"],ke={class:"flex items-center justify-end space-x-4 pt-6 border-t border-white/10"},Se=["disabled"],Ce={key:0,class:"fas fa-spinner fa-spin mr-2"},Ne={key:1,class:"fas fa-save mr-2"},Ve={__name:"Create",props:{errors:{type:Object,default:()=>({})}},setup(k){const g=f(!1),b=f(""),N=f(null),m=f(null),M=f(!1),S=f(1),x=U({participant_name:"Budi Santoso",course_title:"Advanced JavaScript Programming",completion_date:"15 Januari 2025",certificate_number:"CERT-2025-001",instructor_name:"Ahmad Wijaya, M.Kom"}),l=U({name:"",description:"",background_image:null,status:"active",text_positions:{participant_name:{x:400,y:300,font_size:32,font_weight:"bold",font_family:"Georgia"},course_title:{x:400,y:350,font_size:24,font_weight:"normal",font_family:"Arial"},completion_date:{x:400,y:400,font_size:18,font_weight:"normal",font_family:"Arial"},certificate_number:{x:100,y:500,font_size:12,font_weight:"normal",font_family:"Courier New"},instructor_name:{x:600,y:500,font_size:16,font_weight:"normal",font_family:"Times New Roman"}},style_settings:{font_family:"Arial",text_color:"#000000",text_align:"center"}}),G=r=>({participant_name:"Nama Peserta",course_title:"Judul Course",completion_date:"Tanggal Selesai",certificate_number:"Nomor Sertifikat",instructor_name:"Nama Instruktur"})[r]||r,z=r=>{const t=r.target.files[0];if(t){if(!["image/jpeg","image/jpg","image/png"].includes(t.type)){y.fire({icon:"error",title:"Error",text:"Format file harus JPG atau PNG."});return}if(t.size>5*1024*1024){y.fire({icon:"error",title:"Error",text:"Ukuran file maksimal 5MB."});return}l.background_image=t;const o=new FileReader;o.onload=s=>{b.value=s.target.result},o.readAsDataURL(t)}},A=()=>{l.background_image=null,b.value="",N.value&&(N.value.value="")},p=()=>{if(M.value=!0,m.value){const r=m.value.naturalWidth,t=m.value.clientWidth;S.value=t/r}},h=r=>{const t=l.text_positions[r];if(!t)return{};const o=t.x*S.value,s=t.y*S.value,i=Math.max(8,t.font_size*S.value);return{left:`${o}px`,top:`${s}px`,fontSize:`${i}px`,fontWeight:t.font_weight,fontFamily:t.font_family||"Arial",transform:"translate(-50%, -50%)",whiteSpace:"nowrap"}},C=(r,t)=>{if(!m.value)return;const o=m.value.naturalWidth,s=m.value.naturalHeight;let i,v;switch(t){case"center":i=o/2,v=s/2;break;case"top-center":i=o/2,v=s*.2;break;case"bottom-left":i=o*.1,v=s*.9;break;case"bottom-right":i=o*.9,v=s*.9;break;default:return}l.text_positions[r].x=Math.round(i),l.text_positions[r].y=Math.round(v),p()};$(()=>l.text_positions,()=>{},{deep:!0});const W=()=>{if(!l.background_image){y.fire({icon:"error",title:"Error",text:"Background sertifikat harus diupload."});return}g.value=!0,R.post(route("lms.certificate-templates.store"),l,{onSuccess:()=>{y.fire({icon:"success",title:"Berhasil",text:"Template sertifikat berhasil dibuat."})},onError:r=>{y.fire({icon:"error",title:"Gagal",text:Object.values(r)[0]||"Gagal membuat template."})},onFinish:()=>{g.value=!1}})};return(r,t)=>(a(),D(J,null,{default:V(()=>[e("div",O,[e("div",Y,[e("div",K,[t[6]||(t[6]=e("div",null,[e("h1",{class:"text-2xl font-bold text-white"},"Buat Template Sertifikat"),e("p",{class:"text-white/70"},"Upload layout dan atur posisi text untuk sertifikat")],-1)),P(T(F),{href:r.route("lms.certificate-templates.index"),class:"px-4 py-2 bg-white/20 border border-white/30 rounded-xl text-white hover:bg-white/30 transition-all"},{default:V(()=>t[5]||(t[5]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),B(" Kembali ")])),_:1},8,["href"])]),e("form",{onSubmit:L(W,["prevent"]),class:"space-y-6"},[e("div",Q,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-white font-semibold mb-2"},"Nama Template",-1)),c(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>l.name=o),type:"text",class:"w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Masukkan nama template"},null,512),[[w,l.name]]),k.errors.name?(a(),n("div",X,d(k.errors.name),1)):u("",!0)]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-white font-semibold mb-2"},"Status",-1)),c(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>l.status=o),class:"w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none"},t[8]||(t[8]=[e("option",{value:"active",style:{"background-color":"#1f2937",color:"white"}},"Aktif",-1),e("option",{value:"inactive",style:{"background-color":"#1f2937",color:"white"}},"Nonaktif",-1)]),512),[[I,l.status]])])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-white font-semibold mb-2"},"Deskripsi",-1)),c(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=o=>l.description=o),rows:"3",class:"w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Deskripsi template (opsional)"},null,512),[[w,l.description]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-white font-semibold mb-2"},"Background Sertifikat",-1)),e("div",q,[e("input",{ref_key:"fileInput",ref:N,type:"file",onChange:z,accept:"image/*",class:"hidden"},null,544),b.value?(a(),n("div",Z,[e("img",{src:b.value,alt:"Preview",class:"max-h-64 mx-auto rounded-lg"},null,8,ee),e("button",{type:"button",onClick:A,class:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all"},t[12]||(t[12]=[e("i",{class:"fas fa-times"},null,-1)])),e("button",{type:"button",onClick:t[4]||(t[4]=o=>r.$refs.fileInput.click()),class:"mt-4 px-4 py-2 bg-blue-500/20 border border-blue-500/30 rounded-lg text-blue-200 hover:bg-blue-500/30 transition-all"}," Ganti Gambar ")])):(a(),n("div",{key:0,onClick:t[3]||(t[3]=o=>r.$refs.fileInput.click()),class:"cursor-pointer"},t[11]||(t[11]=[e("i",{class:"fas fa-cloud-upload-alt text-4xl text-white/50 mb-4"},null,-1),e("p",{class:"text-white/70 mb-2"},"Klik untuk upload background sertifikat",-1),e("p",{class:"text-white/50 text-sm"},"Format: JPG, PNG (Max: 5MB)",-1)])))]),k.errors.background_image?(a(),n("div",te,d(k.errors.background_image),1)):u("",!0)]),b.value?(a(),n("div",oe,[t[14]||(t[14]=e("h3",{class:"text-lg font-semibold text-white mb-4"},"Preview dengan Dummy Data",-1)),e("div",le,[e("div",ie,[e("div",re,[e("img",{ref_key:"backgroundImg",ref:m,src:b.value,alt:"Preview",class:"w-full max-w-full h-auto",onLoad:p},null,40,ae),M.value?(a(),n("div",ne,[l.text_positions.participant_name?(a(),n("div",{key:0,style:_(h("participant_name")),class:"absolute pointer-events-none text-black font-bold"},d(x.participant_name),5)):u("",!0),l.text_positions.course_title?(a(),n("div",{key:1,style:_(h("course_title")),class:"absolute pointer-events-none text-black"},d(x.course_title),5)):u("",!0),l.text_positions.completion_date?(a(),n("div",{key:2,style:_(h("completion_date")),class:"absolute pointer-events-none text-black"},d(x.completion_date),5)):u("",!0),l.text_positions.certificate_number?(a(),n("div",{key:3,style:_(h("certificate_number")),class:"absolute pointer-events-none text-black"},d(x.certificate_number),5)):u("",!0),l.text_positions.instructor_name?(a(),n("div",{key:4,style:_(h("instructor_name")),class:"absolute pointer-events-none text-black"},d(x.instructor_name),5)):u("",!0)])):u("",!0)])])])])):u("",!0),b.value?(a(),n("div",se,[t[22]||(t[22]=e("h3",{class:"text-lg font-semibold text-white mb-4"},"Pengaturan Posisi Text",-1)),e("div",ue,[(a(!0),n(j,null,E(l.text_positions,(o,s)=>(a(),n("div",{key:s,class:"backdrop-blur-xl bg-white/5 border border-white/10 rounded-xl p-4"},[e("h4",de,d(G(s)),1),e("div",ce,[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-white/70 text-sm mb-1"},"X Position",-1)),c(e("input",{"onUpdate:modelValue":i=>o.x=i,type:"number",class:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white text-sm",onInput:p},null,40,be),[[w,o.x,void 0,{number:!0}]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-white/70 text-sm mb-1"},"Y Position",-1)),c(e("input",{"onUpdate:modelValue":i=>o.y=i,type:"number",class:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white text-sm",onInput:p},null,40,me),[[w,o.y,void 0,{number:!0}]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-white/70 text-sm mb-1"},"Font Size",-1)),c(e("input",{"onUpdate:modelValue":i=>o.font_size=i,type:"number",class:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white text-sm",onInput:p},null,40,pe),[[w,o.font_size,void 0,{number:!0}]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-white/70 text-sm mb-1"},"Font Weight",-1)),c(e("select",{"onUpdate:modelValue":i=>o.font_weight=i,class:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white text-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500"},t[18]||(t[18]=[e("option",{value:"normal",style:{"background-color":"#1f2937",color:"white"}},"Normal",-1),e("option",{value:"bold",style:{"background-color":"#1f2937",color:"white"}},"Bold",-1)]),8,fe),[[I,o.font_weight]])]),e("div",ge,[t[21]||(t[21]=e("label",{class:"block text-white/70 text-sm mb-1"},"Font Family",-1)),c(e("select",{"onUpdate:modelValue":i=>o.font_family=i,class:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white text-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:p},t[20]||(t[20]=[e("option",{value:"Arial",style:{"background-color":"#1f2937",color:"white"}},"Arial",-1),e("option",{value:"Times New Roman",style:{"background-color":"#1f2937",color:"white"}},"Times New Roman",-1),e("option",{value:"Helvetica",style:{"background-color":"#1f2937",color:"white"}},"Helvetica",-1),e("option",{value:"Georgia",style:{"background-color":"#1f2937",color:"white"}},"Georgia",-1),e("option",{value:"Verdana",style:{"background-color":"#1f2937",color:"white"}},"Verdana",-1),e("option",{value:"Trebuchet MS",style:{"background-color":"#1f2937",color:"white"}},"Trebuchet MS",-1),e("option",{value:"Impact",style:{"background-color":"#1f2937",color:"white"}},"Impact",-1),e("option",{value:"Comic Sans MS",style:{"background-color":"#1f2937",color:"white"}},"Comic Sans MS",-1),e("option",{value:"Courier New",style:{"background-color":"#1f2937",color:"white"}},"Courier New",-1),e("option",{value:"Palatino",style:{"background-color":"#1f2937",color:"white"}},"Palatino",-1),e("option",{value:"Garamond",style:{"background-color":"#1f2937",color:"white"}},"Garamond",-1),e("option",{value:"Bookman",style:{"background-color":"#1f2937",color:"white"}},"Bookman",-1)]),40,xe),[[I,o.font_family]])])]),e("div",he,[e("button",{type:"button",onClick:i=>C(s,"center"),class:"px-2 py-1 bg-blue-500/20 border border-blue-500/30 rounded text-blue-200 text-xs hover:bg-blue-500/30 transition-all"}," Center ",8,ve),e("button",{type:"button",onClick:i=>C(s,"top-center"),class:"px-2 py-1 bg-blue-500/20 border border-blue-500/30 rounded text-blue-200 text-xs hover:bg-blue-500/30 transition-all"}," Top Center ",8,we),e("button",{type:"button",onClick:i=>C(s,"bottom-left"),class:"px-2 py-1 bg-blue-500/20 border border-blue-500/30 rounded text-blue-200 text-xs hover:bg-blue-500/30 transition-all"}," Bottom Left ",8,_e),e("button",{type:"button",onClick:i=>C(s,"bottom-right"),class:"px-2 py-1 bg-blue-500/20 border border-blue-500/30 rounded text-blue-200 text-xs hover:bg-blue-500/30 transition-all"}," Bottom Right ",8,ye)])]))),128))])])):u("",!0),e("div",ke,[P(T(F),{href:r.route("lms.certificate-templates.index"),class:"px-6 py-3 bg-white/20 border border-white/30 rounded-xl text-white hover:bg-white/30 transition-all"},{default:V(()=>t[23]||(t[23]=[B(" Batal ")])),_:1},8,["href"]),e("button",{type:"submit",disabled:g.value||!l.background_image,class:"px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl font-semibold hover:from-green-600 hover:to-green-700 transition-all disabled:opacity-50"},[g.value?(a(),n("i",Ce)):(a(),n("i",Ne)),B(" "+d(g.value?"Menyimpan...":"Simpan Template"),1)],8,Se)])],32)])])]),_:1}))}},We=H(Ve,[["__scopeId","data-v-07b5482a"]]);export{We as default};
