import{$ as Qt,c as w,r as b,a as Wt,w as Gt,a8 as Kt,A as Jt,B as a,C as Xt,x as U,D as t,Q as Yt,U as Zt,L as l,E as n,G as st,H as A,J as E,F as k,M as P,N as r,I as wt,O as at,l as I,Z as te,W as ee}from"./vendor-vue-g7iCcTkf.js";import{A as oe}from"./AppLayout-DkG6xw-a.js";import"./vendor-charts-CuqD4wLC.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./app-5ZP5W-3z.js";import"./ProfileUpdateModal-COEZdPkp.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const ae={class:"max-w-7xl mx-auto py-8 px-4"},le={class:"bg-white rounded-xl shadow-lg p-6 mb-6"},re={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ne={key:0},de=["value"],ie={key:1},ue=["value"],pe={key:0,class:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 rounded-lg"},xe={key:1,class:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-6"},ce={class:"flex items-center justify-between"},ye={class:"text-2xl font-bold text-gray-900"},ge={class:"text-xs text-gray-500 mt-1"},_e={class:"flex items-center justify-between"},fe={class:"text-2xl font-bold text-gray-900"},me={class:"text-xs text-gray-500 mt-1"},be={class:"flex items-center justify-between"},ve={class:"text-2xl font-bold text-gray-900"},he={class:"text-xs text-gray-500 mt-1"},we={class:"flex items-center justify-between"},ke={class:"text-2xl font-bold text-gray-900"},Ce={class:"text-xs text-gray-500 mt-1"},Fe={class:"flex items-center justify-between"},Te={class:"text-2xl font-bold text-gray-900"},De={key:2,class:"bg-white rounded-xl shadow-lg p-6 mb-6"},Ie={key:3,class:"bg-white rounded-xl shadow-lg p-6 mb-6"},Oe={key:4,class:"bg-white rounded-xl shadow-lg p-6 mb-6"},Se={class:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col"},Pe={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},Be={class:"text-lg font-bold text-gray-800"},Re={class:"flex-1 overflow-y-auto p-6"},Ae={key:0,class:"text-center py-8"},Me={key:1,class:"text-center py-8 text-gray-500"},$e={key:2,class:"overflow-x-auto"},Ne={class:"min-w-full divide-y divide-gray-200"},Ue={class:"bg-white divide-y divide-gray-200"},je=["onClick"],Le={class:"px-4 py-3 text-sm"},ze={class:"px-4 py-3 text-sm font-medium text-gray-900"},Ee={class:"px-4 py-3 text-sm text-right text-gray-900"},qe={class:"px-4 py-3 text-sm text-right text-gray-600"},Ve={class:"px-4 py-3 text-sm text-right font-semibold text-gray-900"},He={class:"px-4 py-3 text-sm text-center"},Qe={key:0,class:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-semibold"},We={key:1,class:"px-2 py-1 bg-green-100 text-green-800 rounded text-xs font-semibold"},Ge={key:2,class:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-xs font-semibold"},Ke={key:1,class:"hover:bg-gray-50"},Je={class:"px-4 py-3 text-sm font-medium text-gray-900"},Xe={class:"px-4 py-3 text-sm text-right text-gray-900"},Ye={class:"px-4 py-3 text-sm text-right text-gray-600"},Ze={class:"px-4 py-3 text-sm text-right font-semibold text-gray-900"},to={class:"px-4 py-3 text-sm text-center"},eo={key:0,class:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-semibold"},oo={key:1,class:"px-2 py-1 bg-green-100 text-green-800 rounded text-xs font-semibold"},so={key:2,class:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-xs font-semibold"},ao={key:2},lo={colspan:"6",class:"px-4 py-3 bg-gray-50"},ro={class:"overflow-x-auto"},no={class:"min-w-full text-xs"},io={class:"bg-gray-100"},uo={key:0,class:"px-2 py-1 text-left"},po={key:1,class:"px-2 py-1 text-left"},xo={key:2,class:"px-2 py-1 text-left"},co={key:3,class:"px-2 py-1 text-left"},yo={key:4,class:"px-2 py-1 text-left"},go={key:5,class:"px-2 py-1 text-left"},_o={key:6,class:"px-2 py-1 text-right"},fo={key:7,class:"px-2 py-1 text-right"},mo={key:8,class:"px-2 py-1 text-right"},bo={key:9,class:"px-2 py-1 text-right"},vo={key:10,class:"px-2 py-1 text-left"},ho={key:11,class:"px-2 py-1 text-left"},wo={key:12,class:"px-2 py-1 text-right"},ko={key:13,class:"px-2 py-1 text-right"},Co={key:14,class:"px-2 py-1 text-right"},Fo={class:"px-2 py-1"},To={class:"px-2 py-1"},Do={class:"px-2 py-1"},Io={class:"px-2 py-1"},Oo={key:0,class:"text-xs text-gray-500 mt-1"},So={class:"px-2 py-1"},Po={key:0,class:"text-xs text-gray-500 mt-1"},Bo={class:"px-2 py-1"},Ro={key:0,class:"text-xs text-gray-500 mt-1"},Ao={class:"px-2 py-1 text-right"},Mo={class:"px-2 py-1 text-right"},$o={class:"px-2 py-1 text-right"},No={class:"px-2 py-1 text-right font-semibold"},Uo={key:0,colspan:"5",class:"px-2 py-1"},jo={key:0,colspan:"10",class:"px-2 py-1"},Lo={class:"px-2 py-1"},zo={class:"px-2 py-1"},Eo={key:0,class:"text-xs text-gray-500 mt-1"},qo={class:"px-2 py-1 text-right"},Vo={class:"px-2 py-1 text-right"},Ho={class:"px-2 py-1 text-right font-semibold"},Qo={class:"bg-gray-50"},Wo={class:"px-4 py-3 text-sm text-right font-bold text-gray-900"},Go={class:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto"},Ko={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10"},Jo={class:"text-2xl font-bold text-gray-800"},Xo={key:0},Yo={class:"p-6"},Zo={key:0,class:"text-center py-12"},ts={key:1},es={class:"mb-6"},os={class:"overflow-x-auto"},ss={class:"min-w-full divide-y divide-gray-200"},as={class:"bg-white divide-y divide-gray-200"},ls=["onClick"],rs={class:"px-4 py-3 text-sm"},ns={class:"px-4 py-3 text-sm text-gray-600"},ds={class:"px-4 py-3 text-sm"},is={class:"flex flex-col gap-1"},us={class:"px-4 py-3 text-sm font-medium text-gray-900"},ps={class:"whitespace-normal break-words max-w-xs"},xs={class:"px-4 py-3 text-sm text-gray-600"},cs={class:"px-4 py-3 text-sm text-right font-semibold text-green-600"},ys={key:0},gs={colspan:"6",class:"px-4 py-3 bg-gray-50"},_s={class:"overflow-x-auto"},fs={class:"min-w-full text-xs"},ms={class:"px-2 py-1"},bs={class:"px-2 py-1 text-right"},vs={class:"px-2 py-1 text-right"},hs={class:"px-2 py-1 text-right font-semibold"},ws={key:0},ks={class:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto"},Cs={class:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10"},Fs={class:"text-2xl font-bold text-gray-800"},Ts={class:"p-6"},Ds={key:0,class:"text-center py-12"},Is={key:1},Os={class:"mb-6"},Ss={class:"mb-6 bg-gray-50 rounded-lg p-4"},Ps={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4"},Bs={class:"overflow-x-auto"},Rs={class:"min-w-full divide-y divide-gray-200"},As={class:"bg-white divide-y divide-gray-200"},Ms=["onClick"],$s={class:"px-4 py-3 text-sm"},Ns={class:"px-4 py-3 text-sm text-gray-600"},Us={class:"px-4 py-3 text-sm"},js={class:"flex flex-col gap-1"},Ls={class:"px-4 py-3 text-sm font-medium text-gray-900"},zs={class:"whitespace-normal break-words max-w-xs"},Es={class:"px-4 py-3 text-sm text-gray-600"},qs={key:0,class:"px-4 py-3 text-sm text-gray-600"},Vs={key:0},Hs={key:1},Qs={key:1,class:"px-4 py-3 text-sm text-gray-600"},Ws={class:"px-4 py-3 text-sm text-gray-600"},Gs={key:0},Ks={colspan:"8",class:"px-4 py-3 bg-gray-50"},Js={class:"overflow-x-auto"},Xs={class:"min-w-full text-xs"},Ys={class:"px-2 py-1"},Zs={class:"px-2 py-1 text-right"},ta={class:"px-2 py-1 text-right"},ea={class:"px-2 py-1 text-right font-semibold"},oa={key:0},sa={key:0,class:"mt-4 flex items-center justify-between"},aa={class:"text-sm text-gray-700"},la={class:"flex gap-2"},ra=["disabled"],na=["onClick"],da={key:1,class:"px-2 py-1.5 text-sm text-gray-500"},ia=["disabled"],ua={__name:"Index",props:{dashboardData:Object,outlets:Array,filters:Object,userOutletId:Number,selectedOutletId:Number},setup(kt){var xt,ct,yt;const T=kt,Ct=Qt(),Ft=w(()=>{var s;return((s=Ct.props.auth)==null?void 0:s.user)||{}}),O=w(()=>T.userOutletId===1),Tt=w(()=>{var s,e;if(T.selectedOutletId&&T.outlets&&T.outlets.length>0){const d=T.outlets.find(c=>c.id_outlet===T.selectedOutletId);if(d)return d.nama_outlet}return((e=(s=Ft.value)==null?void 0:s.outlet)==null?void 0:e.nama_outlet)||"Outlet User"}),f=w(()=>T.dashboardData||{}),p=b({date_from:((xt=T.filters)==null?void 0:xt.date_from)||new Date().toISOString().split("T")[0],date_to:((ct=T.filters)==null?void 0:ct.date_to)||new Date().toISOString().split("T")[0],outlet_id:((yt=T.filters)==null?void 0:yt.outlet_id)||null}),M=b([]),B=b([]),K=b(!1),C=b(null),J=b(!1),X=b(!1),y=b(null),q=b(!1),F=b(null),h=b({date_from:"",date_to:"",search:"",page:1,per_page:20}),R=b([]),lt=b(!1),Y=b(!1),$=b([]),Z=b(!1),j=b(null),N=b([]);let L=null;function Dt(s){const e=M.value.indexOf(s);e>-1?M.value.splice(e,1):M.value.push(s)}function It(s){const e=B.value.indexOf(s);e>-1?B.value.splice(e,1):B.value.push(s)}function Ot(s){return s==="payment"?"bg-blue-100 text-blue-800":s==="retail_non_food"?"bg-green-100 text-green-800":s==="floor_order_gr"||s==="retail_food"?"bg-yellow-100 text-yellow-800":s==="unpaid_pr"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}function St(s){return s==="payment"?"Payment":s==="retail_non_food"?"Retail Non Food":s==="floor_order_gr"?"Floor Order GR":s==="retail_food"?"Retail Food":s==="unpaid_pr"?"Unpaid PR":s}function Pt(s){return s==="unpaid_pr"?"text-orange-600":"text-green-600"}const Bt=w(()=>F.value==="total_paid"?"Total Paid":F.value==="retail_non_food"?"Retail Non Food":F.value==="food"?"Food Expenses":F.value==="unpaid_pr"?"Unpaid PR":F.value==="total_opex"?"Total Opex":"");async function z(s){X.value=!0,q.value=!0,F.value=s,y.value=null,B.value=[],h.value={date_from:p.value.date_from,date_to:p.value.date_to,search:"",page:1,per_page:20},await tt()}async function tt(){if(F.value){q.value=!0;try{const s=new URLSearchParams({type:F.value,date_from:p.value.date_from,date_to:p.value.date_to,outlet_id:p.value.outlet_id||"",modal_date_from:h.value.date_from,modal_date_to:h.value.date_to,search:h.value.search,page:h.value.page,per_page:h.value.per_page}),d=await(await fetch(`/opex-outlet-dashboard/card-detail?${s.toString()}`)).json();y.value=d}catch(s){console.error("Error fetching card detail:",s),alert("Terjadi kesalahan saat memuat data")}finally{q.value=!1}}}function rt(){h.value.page=1,tt()}function et(s){h.value.page=s,tt()}function nt(){X.value=!1,y.value=null,F.value=null,B.value=[]}async function dt(s){K.value=!0,J.value=!0,C.value=null;try{const d=await(await fetch(`/opex-outlet-dashboard/category-detail?category_id=${s}&date_from=${p.value.date_from}&date_to=${p.value.date_to}&outlet_id=${p.value.outlet_id||""}`)).json();C.value=d}catch(e){console.error("Error fetching category detail:",e),alert("Terjadi kesalahan saat memuat data kategori")}finally{J.value=!1}}function it(){K.value=!1,C.value=null,M.value=[]}async function Rt(s){Y.value=!0,Z.value=!0,$.value=[],j.value=s;try{const e=new URLSearchParams({category_name:s.category_name,date_from:p.value.date_from,date_to:p.value.date_to,outlet_id:p.value.outlet_id||""});s.sub_category_name&&e.append("sub_category_name",s.sub_category_name);const c=await(await fetch(`/opex-outlet-dashboard/food-category-items?${e.toString()}`)).json();$.value=c}catch(e){console.error("Error fetching food category items:",e),alert("Terjadi kesalahan saat memuat data items")}finally{Z.value=!1}}function ut(){Y.value=!1,$.value=[],j.value=null,N.value=[]}function At(s){const e=N.value.indexOf(s);e>-1?N.value.splice(e,1):N.value.push(s)}L=Rt;function V(){ee.get("/opex-outlet-dashboard",p.value,{preserveState:!0,replace:!0}),(!O.value||p.value.outlet_id)&&ot()}async function ot(){lt.value=!0;try{const s=new URLSearchParams({date_from:p.value.date_from,date_to:p.value.date_to,outlet_id:p.value.outlet_id||""}),d=await(await fetch(`/opex-outlet-dashboard/food-by-category?${s.toString()}`)).json();R.value=d}catch(s){console.error("Error fetching food by category:",s)}finally{lt.value=!1}}function x(s){return s?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(s):"Rp 0"}function pt(s){return s?new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}function H(s){return s?new Date(s).toLocaleString("id-ID",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}):"-"}const Mt=w(()=>{var s;return(s=f.value)!=null&&s.opexTrend?[{name:"Paid Amount",type:"line",data:f.value.opexTrend.map(e=>parseFloat(e.paid_amount||0))},{name:"Retail Non Food",type:"line",data:f.value.opexTrend.map(e=>parseFloat(e.retail_non_food_amount||0))},{name:"Food Expenses",type:"line",data:f.value.opexTrend.map(e=>parseFloat(e.food_amount||0))}]:[]}),$t=w(()=>{var s,e;return{chart:{type:"line",height:350,toolbar:{show:!0},animations:{enabled:!0,easing:"easeinout",speed:800}},xaxis:{categories:((e=(s=f.value)==null?void 0:s.opexTrend)==null?void 0:e.map(d=>new Date(d.date).toLocaleDateString("id-ID",{day:"2-digit",month:"short"})))||[],labels:{rotate:-45,style:{fontSize:"12px"}}},yaxis:{title:{text:"Amount (Rp)"},labels:{formatter:d=>x(d)}},colors:["#3B82F6","#10B981","#EAB308"],stroke:{width:3,curve:"smooth"},legend:{position:"top"},grid:{borderColor:"#e5e7eb"},tooltip:{shared:!0,intersect:!1,y:{formatter:d=>x(d)}}}}),Nt=w(()=>{var e;return!((e=f.value)!=null&&e.opexByCategory)||!Array.isArray(f.value.opexByCategory)?[]:[{name:"Opex Amount",data:f.value.opexByCategory.map(d=>{const c=parseFloat(d.paid_amount||0),S=parseFloat(d.retail_non_food_amount||0);return c+S})}]}),Ut=w(()=>{var d;const s=((d=f.value)==null?void 0:d.opexByCategory)||[],e=s.map(c=>{const S=c.division?`[${c.division}] `:"",i=c.category_name||"Unknown",_=i.length>20?i.substring(0,17)+"...":i;return`${S}${_}`});return{chart:{type:"bar",height:400,toolbar:{show:!0},events:{dataPointSelection:function(c,S,i){if(i.dataPointIndex!==void 0&&s.length>i.dataPointIndex){const _=s[i.dataPointIndex];_&&_.category_id&&_.category_id!=="uncategorized"&&dt(_.category_id)}},click:function(c,S,i){if(i.dataPointIndex!==void 0&&s.length>i.dataPointIndex){const _=s[i.dataPointIndex];_&&_.category_id&&_.category_id!=="uncategorized"&&dt(_.category_id)}}}},plotOptions:{bar:{horizontal:!1,columnWidth:"60%",borderRadius:8,borderRadiusApplication:"end",dataLabels:{position:"top"}}},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"12px",colors:["#304758"],fontWeight:600},formatter:function(c){return x(c)}},xaxis:{categories:e.length>0?e:[],labels:{rotate:-45,rotateAlways:!0,style:{fontSize:"11px"}}},yaxis:{title:{text:"Amount (Rp)"},labels:{formatter:c=>x(c)}},colors:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#EC4899","#14B8A6"],tooltip:{y:{formatter:c=>x(c)}},grid:{borderColor:"#e5e7eb",strokeDashArray:4},fill:{type:"solid",opacity:1},noData:{text:"Tidak ada data",align:"center",verticalAlign:"middle"}}}),jt=w(()=>{var s;return(s=C.value)!=null&&s.trend?[{name:"Paid Amount",type:"line",data:C.value.trend.map(e=>parseFloat(e.paid_amount||0))},{name:"Retail Non Food",type:"line",data:C.value.trend.map(e=>parseFloat(e.retail_non_food_amount||0))}]:[]}),Lt=w(()=>{var s,e;return{chart:{type:"line",height:300,toolbar:{show:!0},animations:{enabled:!0,easing:"easeinout",speed:800}},xaxis:{categories:((e=(s=C.value)==null?void 0:s.trend)==null?void 0:e.map(d=>new Date(d.date).toLocaleDateString("id-ID",{day:"2-digit",month:"short"})))||[],labels:{rotate:-45,style:{fontSize:"12px"}}},yaxis:{title:{text:"Amount (Rp)"},labels:{formatter:d=>x(d)}},colors:["#3B82F6","#10B981"],stroke:{width:3,curve:"smooth"},legend:{position:"top"},grid:{borderColor:"#e5e7eb"},tooltip:{shared:!0,intersect:!1,y:{formatter:d=>x(d)}}}}),zt=w(()=>{var s;return(s=y.value)!=null&&s.trend?[{name:F.value==="unpaid_pr"?"Unpaid Amount":"Amount",type:"line",data:y.value.trend.map(e=>parseFloat(e.amount||e.paid_amount||e.retail_non_food_amount||e.unpaid_amount||0))}]:[]}),Et=w(()=>{var s,e;return{chart:{type:"line",height:300,toolbar:{show:!0},animations:{enabled:!0,easing:"easeinout",speed:800}},xaxis:{categories:((e=(s=y.value)==null?void 0:s.trend)==null?void 0:e.map(d=>new Date(d.date).toLocaleDateString("id-ID",{day:"2-digit",month:"short"})))||[],labels:{rotate:-45,style:{fontSize:"12px"}}},yaxis:{title:{text:"Amount (Rp)"},labels:{formatter:d=>x(d)}},colors:F.value==="unpaid_pr"?["#F59E0B"]:F.value==="retail_non_food"?["#10B981"]:["#3B82F6"],stroke:{width:3,curve:"smooth"},legend:{position:"top"},grid:{borderColor:"#e5e7eb"},tooltip:{shared:!0,intersect:!1,y:{formatter:d=>x(d)}}}}),qt=w(()=>{if(!R.value||R.value.length===0)return[{name:"Amount",data:[]}];const s=R.value||[],e=[{name:"Food Amount",data:s.map(c=>parseFloat(c.total_amount||0))}];return s.some(c=>c.locked_budget!==null&&c.locked_budget>0)&&e.push({name:"Budget",data:s.map(c=>c.locked_budget!==null&&c.locked_budget>0?parseFloat(c.locked_budget):null)}),e}),Vt=w(()=>{const s=R.value||[],e=s.map(i=>i.is_sub_category&&i.sub_category_name?`${i.category_name} - ${i.sub_category_name}`:i.category_name||"Uncategorized");return{chart:{type:"bar",height:Math.max(400,s.length*40),toolbar:{show:!0},animations:{enabled:!0,easing:"easeinout",speed:800},events:{dataPointSelection:(i,_,m)=>{const v=R.value||[];if(m.seriesIndex===0&&m.dataPointIndex!==void 0&&v.length>m.dataPointIndex){const D=v[m.dataPointIndex];L&&L(D)}},click:(i,_,m)=>{const v=R.value||[];if(m.seriesIndex===0&&m.dataPointIndex!==void 0&&v.length>m.dataPointIndex){const D=v[m.dataPointIndex];L&&L(D)}}},stacked:!1},dataLabels:{enabled:!0,formatter:(i,_)=>{if(_.seriesIndex!==0)return"";const m=s[_.dataPointIndex];if(!m)return"";let v=x(i);return m.locked_budget!==null&&m.is_over_budget&&(v+=" ⚠️"),v},offsetX:10,style:{fontSize:"11px",colors:[...s.map(i=>i.locked_budget!==null&&i.is_over_budget?"#EF4444":"#304758"),...s.map(()=>"transparent")],fontWeight:600}},xaxis:{categories:e.length>0?e:[],labels:{show:!0,style:{fontSize:"11px"},maxWidth:300}},yaxis:{title:{text:"Amount (Rp)"},labels:{formatter:i=>typeof i=="number"&&!isNaN(i)?x(i):i,style:{fontSize:"11px"}}},colors:[...s.flatMap(i=>[i.locked_budget!==null&&i.is_over_budget?"#EF4444":"#10B981","#3B82F6"])],fill:{type:"solid",opacity:[1,.6]},plotOptions:{bar:{horizontal:!0,barHeight:["70%","8%"],borderRadius:4,dataLabels:{position:"right"}}},tooltip:{y:{formatter:(i,{seriesIndex:_,dataPointIndex:m})=>{const v=s[m];let D=x(i);if(v&&v.locked_budget!==null){const Q=x(v.locked_budget),W=(i/v.locked_budget*100).toFixed(1),G=v.is_over_budget?"⚠️ OVER BUDGET":"✓ OK";D+=`<br/><br/><strong>Budget:</strong> ${Q}`,D+=`<br/><strong>Usage:</strong> ${W}%`,D+=`<br/><strong>Status:</strong> ${G}`}return D}}},grid:{borderColor:"#e5e7eb",strokeDashArray:4,xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},legend:{show:!0,position:"top",markers:{width:12,height:12,radius:2}},noData:{text:"Tidak ada data",align:"center",verticalAlign:"middle"}}});return Wt(()=>{(!O.value||p.value.outlet_id)&&ot()}),Gt([()=>p.value.date_from,()=>p.value.date_to,()=>p.value.outlet_id],()=>{(!O.value||p.value.outlet_id)&&ot()}),(s,e)=>{const d=Kt("apexchart");return a(),Jt(oe,null,{default:Xt(()=>{var c,S,i,_,m,v,D,Q,W,G,gt,_t,ft,mt,bt,vt,ht;return[U(Yt(Zt),{title:"Opex Outlet Dashboard"}),t("div",ae,[e[63]||(e[63]=t("div",{class:"flex justify-between items-center mb-6"},[t("h1",{class:"text-3xl font-bold text-gray-800 flex items-center gap-3"},[t("i",{class:"fa-solid fa-chart-line text-blue-500"}),st(" Opex Outlet Dashboard ")])],-1)),t("div",le,[t("div",re,[t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Dari",-1)),A(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=o=>p.value.date_from=o),onChange:V,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[E,p.value.date_from]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Sampai",-1)),A(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=o=>p.value.date_to=o),onChange:V,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[E,p.value.date_to]])]),O.value?(a(),l("div",ne,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Outlet",-1)),A(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>p.value.outlet_id=o),onChange:V,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[e[16]||(e[16]=t("option",{value:null},"Semua Outlet",-1)),(a(!0),l(k,null,P(T.outlets,o=>(a(),l("option",{key:o.id_outlet,value:o.id_outlet},r(o.nama_outlet),9,de))),128))],544),[[wt,p.value.outlet_id]])])):(a(),l("div",ie,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Outlet",-1)),t("input",{type:"text",value:Tt.value,disabled:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-600 cursor-not-allowed"},null,8,ue)])),t("div",{class:"flex items-end"},[t("button",{onClick:V,class:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"},e[19]||(e[19]=[t("i",{class:"fa-solid fa-filter mr-2"},null,-1),st(" Terapkan Filter ")]))])])]),O.value&&!p.value.outlet_id?(a(),l("div",pe,e[20]||(e[20]=[t("div",{class:"flex items-center"},[t("i",{class:"fa-solid fa-exclamation-triangle text-yellow-600 text-xl mr-3"}),t("div",null,[t("p",{class:"text-yellow-800 font-semibold"},"Pilih Outlet Terlebih Dahulu"),t("p",{class:"text-yellow-700 text-sm mt-1"},"Silakan pilih outlet dari filter di atas untuk menampilkan data dashboard.")])],-1)]))):n("",!0),!O.value||p.value.outlet_id?(a(),l("div",xe,[t("div",{onClick:e[3]||(e[3]=o=>z("total_paid")),class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500 cursor-pointer hover:shadow-xl transition-shadow"},[t("div",ce,[t("div",null,[e[21]||(e[21]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Paid PR",-1)),t("p",ye,r(x(((c=f.value.overview)==null?void 0:c.total_paid)||0)),1),t("p",ge,r(((S=f.value.overview)==null?void 0:S.payment_count)||0)+" payments",1)]),e[22]||(e[22]=t("i",{class:"fa-solid fa-money-bill-wave text-4xl text-blue-300"},null,-1))])]),t("div",{onClick:e[4]||(e[4]=o=>z("retail_non_food")),class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500 cursor-pointer hover:shadow-xl transition-shadow"},[t("div",_e,[t("div",null,[e[23]||(e[23]=t("p",{class:"text-sm font-medium text-gray-600"},"Retail Non Food",-1)),t("p",fe,r(x(((i=f.value.overview)==null?void 0:i.total_retail_non_food)||0)),1),t("p",me,r(((_=f.value.overview)==null?void 0:_.retail_non_food_count)||0)+" transactions",1)]),e[24]||(e[24]=t("i",{class:"fa-solid fa-shopping-bag text-4xl text-green-300"},null,-1))])]),t("div",{onClick:e[5]||(e[5]=o=>z("food")),class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-yellow-500 cursor-pointer hover:shadow-xl transition-shadow"},[t("div",be,[t("div",null,[e[25]||(e[25]=t("p",{class:"text-sm font-medium text-gray-600"},"Food Expenses",-1)),t("p",ve,r(x(((m=f.value.overview)==null?void 0:m.total_food)||0)),1),t("p",he,r(((v=f.value.overview)==null?void 0:v.food_count)||0)+" transactions",1)]),e[26]||(e[26]=t("i",{class:"fa-solid fa-utensils text-4xl text-yellow-300"},null,-1))])]),t("div",{onClick:e[6]||(e[6]=o=>z("unpaid_pr")),class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-orange-500 cursor-pointer hover:shadow-xl transition-shadow"},[t("div",we,[t("div",null,[e[27]||(e[27]=t("p",{class:"text-sm font-medium text-gray-600"},"Unpaid PR",-1)),t("p",ke,r(x(((D=f.value.overview)==null?void 0:D.total_unpaid)||0)),1),t("p",Ce,r(((Q=f.value.overview)==null?void 0:Q.unpaid_pr_count)||0)+" PRs",1)]),e[28]||(e[28]=t("i",{class:"fa-solid fa-exclamation-triangle text-4xl text-orange-300"},null,-1))])]),t("div",{onClick:e[7]||(e[7]=o=>z("total_opex")),class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500 cursor-pointer hover:shadow-xl transition-shadow"},[t("div",Fe,[t("div",null,[e[29]||(e[29]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Opex",-1)),t("p",Te,r(x(((W=f.value.overview)==null?void 0:W.total_opex)||0)),1),e[30]||(e[30]=t("p",{class:"text-xs text-gray-500 mt-1"},"Paid + RNF + Food",-1))]),e[31]||(e[31]=t("i",{class:"fa-solid fa-chart-pie text-4xl text-purple-300"},null,-1))])])])):n("",!0),!O.value||p.value.outlet_id?(a(),l("div",De,[e[32]||(e[32]=t("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Opex Trend",-1)),U(d,{type:"line",height:"350",options:$t.value,series:Mt.value},null,8,["options","series"])])):n("",!0),!O.value||p.value.outlet_id?(a(),l("div",Ie,[e[33]||(e[33]=t("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Opex by Category",-1)),U(d,{type:"bar",height:"400",options:Ut.value,series:Nt.value},null,8,["options","series"])])):n("",!0),!O.value||p.value.outlet_id?(a(),l("div",Oe,[e[34]||(e[34]=t("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Food Expenses by Category Item",-1)),U(d,{type:"bar",height:"400",options:Vt.value,series:qt.value},null,8,["options","series"])])):n("",!0),Y.value?(a(),l("div",{key:5,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:at(ut,["self"])},[t("div",Se,[t("div",Pe,[t("h3",Be," Detail Items - "+r((G=j.value)==null?void 0:G.category_name)+r((gt=j.value)!=null&&gt.sub_category_name?" - "+j.value.sub_category_name:""),1),t("button",{onClick:ut,class:"text-gray-400 hover:text-gray-600"},e[35]||(e[35]=[t("i",{class:"fas fa-times text-xl"},null,-1)]))]),t("div",Re,[Z.value?(a(),l("div",Ae,e[36]||(e[36]=[t("i",{class:"fas fa-spinner fa-spin text-3xl text-gray-400"},null,-1),t("p",{class:"mt-2 text-gray-500"},"Memuat data...",-1)]))):$.value.length===0?(a(),l("div",Me," Tidak ada data ")):(a(),l("div",$e,[t("table",Ne,[e[40]||(e[40]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider w-10"}),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider"},"Item Name"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider"},"Qty"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider"},"Unit"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider"},"Total"),t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider"},"Source")])],-1)),t("tbody",Ue,[(a(!0),l(k,null,P($.value,(o,g)=>(a(),l(k,{key:g},[o.transactions&&o.transactions.length>0?(a(),l("tr",{key:0,onClick:u=>At(g),class:"hover:bg-gray-50 cursor-pointer"},[t("td",Le,[t("i",{class:I(N.value.includes(g)?"fas fa-chevron-down":"fas fa-chevron-right")},null,2)]),t("td",ze,r(o.item_name),1),t("td",Ee,r(o.total_qty.toLocaleString("id-ID")),1),t("td",qe,r(o.unit||"-"),1),t("td",Ve,r(x(o.price*o.total_qty)),1),t("td",He,[o.source_type==="floor_order"?(a(),l("span",Qe,"Floor Order")):o.source_type==="retail_food"?(a(),l("span",We,"Retail Food")):o.source_type==="mixed"?(a(),l("span",Ge,"Mixed")):n("",!0)])],8,je)):(a(),l("tr",Ke,[e[37]||(e[37]=t("td",{class:"px-4 py-3 text-sm"},null,-1)),t("td",Je,r(o.item_name),1),t("td",Xe,r(o.total_qty.toLocaleString("id-ID")),1),t("td",Ye,r(o.unit||"-"),1),t("td",Ze,r(x(o.price*o.total_qty)),1),t("td",to,[o.source_type==="floor_order"?(a(),l("span",eo,"Floor Order")):o.source_type==="retail_food"?(a(),l("span",oo,"Retail Food")):o.source_type==="mixed"?(a(),l("span",so,"Mixed")):n("",!0)])])),N.value.includes(g)&&o.transactions&&o.transactions.length>0?(a(),l("tr",ao,[t("td",lo,[t("div",ro,[t("table",no,[t("thead",io,[t("tr",null,[o.source_type==="floor_order"||o.source_type==="mixed"?(a(),l("th",uo,"Floor Order")):n("",!0),o.source_type==="floor_order"||o.source_type==="mixed"?(a(),l("th",po,"DO")):n("",!0),o.source_type==="floor_order"||o.source_type==="mixed"?(a(),l("th",xo,"GR")):n("",!0),o.source_type==="floor_order"||o.source_type==="mixed"?(a(),l("th",co,"Creator FO")):n("",!0),o.source_type==="floor_order"||o.source_type==="mixed"?(a(),l("th",yo,"Creator DO")):n("",!0),o.source_type==="floor_order"||o.source_type==="mixed"?(a(),l("th",go,"Creator GR")):n("",!0),o.source_type==="floor_order"||o.source_type==="mixed"?(a(),l("th",_o,"Qty (Order)")):n("",!0),o.source_type==="floor_order"||o.source_type==="mixed"?(a(),l("th",fo,"Price (Order)")):n("",!0),o.source_type==="floor_order"||o.source_type==="mixed"?(a(),l("th",mo,"Qty (Received)")):n("",!0),o.source_type==="floor_order"||o.source_type==="mixed"?(a(),l("th",bo,"Subtotal")):n("",!0),o.source_type==="retail_food"||o.source_type==="mixed"?(a(),l("th",vo,"Retail Number")):n("",!0),o.source_type==="retail_food"||o.source_type==="mixed"?(a(),l("th",ho,"Creator")):n("",!0),o.source_type==="retail_food"||o.source_type==="mixed"?(a(),l("th",wo,"Qty")):n("",!0),o.source_type==="retail_food"||o.source_type==="mixed"?(a(),l("th",ko,"Price")):n("",!0),o.source_type==="retail_food"||o.source_type==="mixed"?(a(),l("th",Co,"Subtotal")):n("",!0)])]),t("tbody",null,[(a(!0),l(k,null,P(o.transactions,(u,Ht)=>(a(),l("tr",{key:Ht,class:"border-b border-gray-200"},[u.floor_order_number||u.gr_number?(a(),l(k,{key:0},[t("td",Fo,r(u.floor_order_number||"-"),1),t("td",To,r(u.do_number||"-"),1),t("td",Do,r(u.gr_number||"-"),1),t("td",Io,[t("div",null,r(u.fo_creator_name||"-"),1),u.fo_created_at?(a(),l("div",Oo,r(H(u.fo_created_at)),1)):n("",!0)]),t("td",So,[t("div",null,r(u.do_creator_name||"-"),1),u.do_created_at?(a(),l("div",Po,r(H(u.do_created_at)),1)):n("",!0)]),t("td",Bo,[t("div",null,r(u.gr_creator_name||"-"),1),u.gr_created_at?(a(),l("div",Ro,r(H(u.gr_created_at)),1)):n("",!0)]),t("td",Ao,r(u.fo_qty?u.fo_qty.toLocaleString("id-ID"):"-"),1),t("td",Mo,r(u.fo_price?x(u.fo_price):"-"),1),t("td",$o,r(u.received_qty?u.received_qty.toLocaleString("id-ID"):"-"),1),t("td",No,r(u.fo_price&&u.fo_qty?x(u.fo_price*u.fo_qty):"-"),1),o.source_type==="mixed"?(a(),l("td",Uo,"-")):n("",!0)],64)):u.retail_number?(a(),l(k,{key:1},[o.source_type==="mixed"?(a(),l("td",jo,"-")):n("",!0),t("td",Lo,r(u.retail_number||"-"),1),t("td",zo,[t("div",null,r(u.rf_creator_name||"-"),1),u.rf_created_at?(a(),l("div",Eo,r(H(u.rf_created_at)),1)):n("",!0)]),t("td",qo,r(u.qty?u.qty.toLocaleString("id-ID"):"-"),1),t("td",Vo,r(u.price?x(u.price):"-"),1),t("td",Ho,r(u.price&&u.qty?x(u.price*u.qty):"-"),1)],64)):n("",!0)]))),128))])])])])])):n("",!0)],64))),128))]),t("tfoot",Qo,[t("tr",null,[e[38]||(e[38]=t("td",{class:"px-4 py-3 text-sm font-bold text-gray-900",colspan:"5"},"Total",-1)),t("td",Wo,r(x($.value.reduce((o,g)=>o+g.price*g.total_qty,0))),1),e[39]||(e[39]=t("td",null,null,-1))])])])]))])])])):n("",!0),K.value?(a(),l("div",{key:6,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:at(it,["self"])},[t("div",Go,[t("div",Ko,[t("h2",Jo,[(_t=C.value)!=null&&_t.category?(a(),l("span",Xo," ["+r(C.value.category.division)+"] "+r(C.value.category.name),1)):n("",!0)]),t("button",{onClick:it,class:"text-gray-400 hover:text-gray-600"},e[41]||(e[41]=[t("i",{class:"fas fa-times text-2xl"},null,-1)]))]),t("div",Yo,[J.value?(a(),l("div",Zo,e[42]||(e[42]=[t("i",{class:"fas fa-spinner fa-spin text-4xl text-blue-500"},null,-1),t("p",{class:"mt-4 text-gray-600"},"Memuat data...",-1)]))):(a(),l("div",ts,[t("div",es,[e[43]||(e[43]=t("h3",{class:"text-lg font-bold text-gray-800 mb-4"},"Trend",-1)),U(d,{type:"line",height:"300",options:Lt.value,series:jt.value},null,8,["options","series"])]),t("div",null,[e[47]||(e[47]=t("h3",{class:"text-lg font-bold text-gray-800 mb-4"},"Transaksi",-1)),t("div",os,[t("table",ss,[e[46]||(e[46]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase w-12"}),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tanggal"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tipe"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Number"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Outlet"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Amount")])],-1)),t("tbody",as,[(a(!0),l(k,null,P((ft=C.value)==null?void 0:ft.transactions,o=>(a(),l(k,{key:o.id},[t("tr",{class:"hover:bg-gray-50 cursor-pointer",onClick:g=>Dt(o.id)},[t("td",rs,[t("i",{class:I(M.value.includes(o.id)?"fas fa-chevron-down":"fas fa-chevron-right")},null,2)]),t("td",ns,r(pt(o.payment_date)),1),t("td",ds,[t("div",is,[t("span",{class:I([o.type==="payment"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800","px-2 py-1 rounded text-xs font-semibold"])},r(o.type==="payment"?"Payment":"Retail Non Food"),3),o.type==="floor_order_gr"?(a(),l("span",{key:0,class:I([o.has_payment?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800","px-2 py-1 rounded text-xs font-semibold"])},r(o.has_payment?"Paid":"Unpaid"),3)):n("",!0)])]),t("td",us,[t("div",ps,r(o.payment_number||o.retail_number||o.number||"-"),1)]),t("td",xs,r(o.outlet_name||"-"),1),t("td",cs,r(x(o.amount)),1)],8,ls),M.value.includes(o.id)&&o.items&&o.items.length>0?(a(),l("tr",ys,[t("td",gs,[t("div",_s,[t("table",fs,[e[44]||(e[44]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-2 py-1 text-left"},"Item"),t("th",{class:"px-2 py-1 text-right"},"Qty"),t("th",{class:"px-2 py-1 text-right"},"Price"),t("th",{class:"px-2 py-1 text-right"},"Total")])],-1)),t("tbody",null,[(a(!0),l(k,null,P(o.items,g=>(a(),l("tr",{key:g.id,class:"border-b border-gray-200"},[t("td",ms,r(g.item_name),1),t("td",bs,r(g.qty)+" "+r(g.unit),1),t("td",vs,r(x(g.price)),1),t("td",hs,r(x(g.total||g.subtotal)),1)]))),128))])])])])])):n("",!0)],64))),128)),!((mt=C.value)!=null&&mt.transactions)||C.value.transactions.length===0?(a(),l("tr",ws,e[45]||(e[45]=[t("td",{colspan:"6",class:"px-4 py-8 text-center text-gray-500"},"Tidak ada data",-1)]))):n("",!0)])])])])]))])])])):n("",!0),X.value?(a(),l("div",{key:7,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:at(nt,["self"])},[t("div",ks,[t("div",Cs,[t("h2",Fs,r(Bt.value),1),t("button",{onClick:nt,class:"text-gray-400 hover:text-gray-600"},e[48]||(e[48]=[t("i",{class:"fas fa-times text-2xl"},null,-1)]))]),t("div",Ts,[q.value?(a(),l("div",Ds,e[49]||(e[49]=[t("i",{class:"fas fa-spinner fa-spin text-4xl text-blue-500"},null,-1),t("p",{class:"mt-4 text-gray-600"},"Memuat data...",-1)]))):(a(),l("div",Is,[t("div",Os,[e[50]||(e[50]=t("h3",{class:"text-lg font-bold text-gray-800 mb-4"},"Trend",-1)),U(d,{type:"line",height:"300",options:Et.value,series:zt.value},null,8,["options","series"])]),t("div",Ss,[t("div",Ps,[t("div",null,[e[51]||(e[51]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Tanggal Dari",-1)),A(t("input",{type:"date","onUpdate:modelValue":e[8]||(e[8]=o=>h.value.date_from=o),class:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[E,h.value.date_from]])]),t("div",null,[e[52]||(e[52]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Tanggal Sampai",-1)),A(t("input",{type:"date","onUpdate:modelValue":e[9]||(e[9]=o=>h.value.date_to=o),class:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[E,h.value.date_to]])]),t("div",null,[e[53]||(e[53]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Search",-1)),A(t("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=o=>h.value.search=o),onKeyup:te(rt,["enter"]),placeholder:"Cari nomor, outlet, creator...",class:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[E,h.value.search]])]),t("div",null,[e[55]||(e[55]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Per Page",-1)),A(t("select",{"onUpdate:modelValue":e[11]||(e[11]=o=>h.value.per_page=o),class:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[54]||(e[54]=[t("option",{value:10},"10",-1),t("option",{value:20},"20",-1),t("option",{value:50},"50",-1),t("option",{value:100},"100",-1)]),512),[[wt,h.value.per_page]])]),t("div",{class:"flex items-end"},[t("button",{onClick:rt,class:"w-full bg-blue-600 text-white px-3 py-1.5 text-sm rounded hover:bg-blue-700 transition-colors"},e[56]||(e[56]=[t("i",{class:"fa-solid fa-filter mr-1"},null,-1),st(" Filter ")]))])])]),t("div",null,[e[62]||(e[62]=t("h3",{class:"text-lg font-bold text-gray-800 mb-4"},"Transaksi",-1)),t("div",Bs,[t("table",Rs,[e[59]||(e[59]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase w-12"}),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tanggal"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tipe"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Number"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Outlet"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Category"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Creator"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Amount")])],-1)),t("tbody",As,[(a(!0),l(k,null,P((bt=y.value)==null?void 0:bt.transactions,o=>(a(),l(k,{key:o.id},[t("tr",{class:"hover:bg-gray-50 cursor-pointer",onClick:g=>It(o.id)},[t("td",$s,[t("i",{class:I(B.value.includes(o.id)?"fas fa-chevron-down":"fas fa-chevron-right")},null,2)]),t("td",Ns,r(pt(o.payment_date||o.transaction_date||o.created_at)),1),t("td",Us,[t("div",js,[t("span",{class:I([Ot(o.type),"px-2 py-1 rounded text-xs font-semibold"])},r(St(o.type)),3),o.type==="floor_order_gr"?(a(),l("span",{key:0,class:I([o.has_payment?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800","px-2 py-1 rounded text-xs font-semibold"])},r(o.has_payment?"Paid":"Unpaid"),3)):n("",!0)])]),t("td",Ls,[t("div",zs,r(o.payment_number||o.retail_number||o.pr_number||o.number||"-"),1)]),t("td",Es,r(o.outlet_name||"-"),1),o.type!=="floor_order_gr"&&o.type!=="retail_food"?(a(),l("td",qs,[o.category_division&&o.category_name?(a(),l("span",Vs," ["+r(o.category_division)+"] "+r(o.category_name),1)):(a(),l("span",Hs,"-"))])):(a(),l("td",Qs,"-")),t("td",Ws,r(o.creator_name||"-"),1),t("td",{class:I(["px-4 py-3 text-sm text-right font-semibold",Pt(o.type)])},r(x(o.amount||o.unpaid_amount||o.total_amount)),3)],8,Ms),B.value.includes(o.id)&&o.items&&o.items.length>0?(a(),l("tr",Gs,[t("td",Ks,[t("div",Js,[t("table",Xs,[e[57]||(e[57]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-2 py-1 text-left"},"Item"),t("th",{class:"px-2 py-1 text-right"},"Qty"),t("th",{class:"px-2 py-1 text-right"},"Price"),t("th",{class:"px-2 py-1 text-right"},"Total")])],-1)),t("tbody",null,[(a(!0),l(k,null,P(o.items,g=>(a(),l("tr",{key:g.id,class:"border-b border-gray-200"},[t("td",Ys,r(g.item_name),1),t("td",Zs,r(g.qty)+" "+r(g.unit),1),t("td",ta,r(x(g.price)),1),t("td",ea,r(x(g.total||g.subtotal)),1)]))),128))])])])])])):n("",!0)],64))),128)),!((vt=y.value)!=null&&vt.transactions)||y.value.transactions.length===0?(a(),l("tr",oa,e[58]||(e[58]=[t("td",{colspan:"8",class:"px-4 py-8 text-center text-gray-500"},"Tidak ada data",-1)]))):n("",!0)])])]),(ht=y.value)!=null&&ht.pagination&&y.value.pagination.total_pages>1?(a(),l("div",sa,[t("div",aa," Menampilkan "+r(y.value.pagination.from)+" - "+r(y.value.pagination.to)+" dari "+r(y.value.pagination.total)+" transaksi ",1),t("div",la,[t("button",{onClick:e[12]||(e[12]=o=>et(y.value.pagination.current_page-1)),disabled:y.value.pagination.current_page===1,class:I([y.value.pagination.current_page===1?"opacity-50 cursor-not-allowed":"hover:bg-gray-100","px-3 py-1.5 text-sm border border-gray-300 rounded bg-white"])},e[60]||(e[60]=[t("i",{class:"fas fa-chevron-left"},null,-1)]),10,ra),(a(!0),l(k,null,P(Math.min(5,y.value.pagination.total_pages),o=>(a(),l(k,{key:o},[o===1||o===y.value.pagination.total_pages||o>=y.value.pagination.current_page-1&&o<=y.value.pagination.current_page+1?(a(),l("button",{key:0,onClick:g=>et(o),class:I([o===y.value.pagination.current_page?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100","px-3 py-1.5 text-sm border border-gray-300 rounded"])},r(o),11,na)):o===y.value.pagination.current_page-2||o===y.value.pagination.current_page+2?(a(),l("span",da," ... ")):n("",!0)],64))),128)),t("button",{onClick:e[13]||(e[13]=o=>et(y.value.pagination.current_page+1)),disabled:y.value.pagination.current_page===y.value.pagination.total_pages,class:I([y.value.pagination.current_page===y.value.pagination.total_pages?"opacity-50 cursor-not-allowed":"hover:bg-gray-100","px-3 py-1.5 text-sm border border-gray-300 rounded bg-white"])},e[61]||(e[61]=[t("i",{class:"fas fa-chevron-right"},null,-1)]),10,ia)])])):n("",!0)])]))])])])):n("",!0)])]}),_:1})}}},ha=se(ua,[["__scopeId","data-v-b522ddaf"]]);export{ha as default};
