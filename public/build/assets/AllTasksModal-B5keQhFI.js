import{r as n,w as D,L as i,E as h,B as d,D as t,x as P,H as $,J as N,F as _,M as w,N as a,l as B}from"./vendor-vue-g7iCcTkf.js";import{a as M}from"./vendor-utils-CpgP2uT4.js";import z from"./TaskDetailModal-CVuZALLV.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LightboxModal-C05wjdKL.js";const S={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40"},V={class:"bg-white rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-y-auto relative animate-fadeIn"},j={class:"p-6"},I={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-4 gap-2"},O={class:"overflow-x-auto"},E={class:"min-w-full text-sm rounded-xl overflow-hidden"},F=["onClick"],L={class:"py-2 px-3"},H={class:"py-2 px-3"},J={class:"py-2 px-3"},R={class:"py-2 px-3"},U={class:"py-2 px-3"},q={class:"py-2 px-3 text-center"},G=["onClick"],K={key:0,class:"flex justify-between items-center mt-2"},Q=["disabled"],W={class:"text-xs"},X=["disabled"],Y=10,Z={__name:"AllTasksModal",props:{show:Boolean},emits:["close"],setup(f,{emit:tt}){const k=f,b=n([]),o=n(1),r=n(1),c=n(""),v=n(null),p=n(!1),m=n({});async function x(){const l=await M.get("/api/maintenance-tasks/all",{params:{page:o.value,perPage:Y,search:c.value}});b.value=l.data.data,r.value=l.data.lastPage}function y(l){l>=1&&l<=r.value&&(o.value=l,x())}function g(l){m.value=l,p.value=!0}function T(l){switch(l){case"Done":return"bg-green-100 text-green-700";case"Overdue":return"bg-red-100 text-red-700";case"PO":return"bg-blue-100 text-blue-700";case"PR":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}}function C(){clearTimeout(v.value),v.value=setTimeout(()=>{o.value=1,x()},400)}return D(()=>k.show,l=>{l&&x()}),(l,e)=>f.show?(d(),i("div",S,[t("div",V,[t("button",{onClick:e[0]||(e[0]=s=>l.$emit("close")),class:"absolute top-3 right-3 text-gray-400 hover:text-red-500 text-xl z-10"},e[5]||(e[5]=[t("i",{class:"fas fa-times"},null,-1)])),t("div",j,[t("div",I,[e[6]||(e[6]=t("h2",{class:"text-xl font-bold"},"Semua Tasks",-1)),$(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>c.value=s),onInput:C,type:"text",placeholder:"Cari task...",class:"border rounded px-3 py-1 text-sm w-full md:w-64"},null,544),[[N,c.value]])]),t("div",O,[t("table",E,[e[8]||(e[8]=t("thead",{class:"bg-gray-100 sticky top-0 z-10"},[t("tr",null,[t("th",{class:"py-2 px-3 text-left font-bold"},"Task Number"),t("th",{class:"py-2 px-3 text-left font-bold"},"Title"),t("th",{class:"py-2 px-3 text-left font-bold"},"Outlet"),t("th",{class:"py-2 px-3 text-left font-bold"},"Assigned To"),t("th",{class:"py-2 px-3 text-left font-bold"},"Due Date"),t("th",{class:"py-2 px-3 text-left font-bold"},"Status"),t("th",{class:"py-2 px-3 text-center font-bold"},"Action")])],-1)),t("tbody",null,[(d(!0),i(_,null,w(b.value,s=>(d(),i("tr",{key:s.id,class:"hover:bg-blue-50 transition"},[t("td",{class:"py-2 px-3 font-semibold text-blue-700 cursor-pointer underline",onClick:u=>g(s)},a(s.task_number),9,F),t("td",L,a(s.title),1),t("td",H,a(s.outlet),1),t("td",J,[(d(!0),i(_,null,w(s.assigned_to,u=>(d(),i("span",{key:u,class:"inline-block bg-indigo-100 text-indigo-700 rounded px-2 py-0.5 mr-1 text-xs font-semibold"},a(u),1))),128))]),t("td",R,a(s.due_date),1),t("td",U,[t("span",{class:B(["badge",T(s.status)])},a(s.status),3)]),t("td",q,[t("button",{class:"p-2 rounded hover:bg-blue-100 transition",onClick:u=>g(s)},e[7]||(e[7]=[t("i",{class:"fas fa-eye text-blue-600"},null,-1)]),8,G)])]))),128))])])]),r.value>1?(d(),i("div",K,[t("button",{disabled:o.value===1,onClick:e[2]||(e[2]=s=>y(o.value-1)),class:"px-2 py-1 rounded bg-gray-100 text-gray-600 disabled:opacity-50"},"Prev",8,Q),t("span",W,"Page "+a(o.value)+" of "+a(r.value),1),t("button",{disabled:o.value===r.value,onClick:e[3]||(e[3]=s=>y(o.value+1)),class:"px-2 py-1 rounded bg-gray-100 text-gray-600 disabled:opacity-50"},"Next",8,X)])):h("",!0),P(z,{task:m.value,show:p.value,onClose:e[4]||(e[4]=s=>p.value=!1)},null,8,["task","show"])])])])):h("",!0)}},nt=A(Z,[["__scopeId","data-v-6cde297b"]]);export{nt as default};
