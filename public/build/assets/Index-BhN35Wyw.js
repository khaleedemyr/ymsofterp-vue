import{r as d,w as Y,a as $,A as P,B as a,C as W,D as e,L as l,E as u,N as o,H as T,F as _,M as g,I as O,x as G,Q as U,G as r,l as Q,W as q}from"./vendor-vue-g7iCcTkf.js";import{A as X}from"./AppLayout-CytV2Jsj.js";import{a as M}from"./vendor-utils-CpgP2uT4.js";import{s as Z}from"./vue-multiselect.esm-V-bx43V9.js";/* empty css                            */import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-B-3LCfNP.js";import"./vendor-charts-CuqD4wLC.js";import"./ProfileUpdateModal-BWyEbEQC.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const te={class:"w-full px-2 md:px-4 py-8"},se={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30"},ae={class:"flex flex-col items-center gap-4"},le={class:"text-lg font-bold text-blue-700"},oe={class:"bg-white rounded-2xl shadow-lg p-6 mb-6"},ne={class:"flex flex-col md:flex-row md:items-end gap-4"},ie={class:"flex-1 min-w-[180px]"},de=["value"],re={class:"flex-1 min-w-[180px]"},ue=["value"],ce={class:"flex-1 min-w-[180px]"},pe={class:"flex-1 min-w-[120px]"},fe=["value"],xe={class:"flex-1 min-w-[100px]"},me=["value"],_e=["disabled"],ve={class:"flex justify-end items-center mt-4"},be=["disabled"],ye={class:"bg-white rounded-2xl shadow-lg overflow-hidden"},ge={class:"px-6 py-4 border-b border-gray-200"},he={class:"flex justify-between items-center"},ke={class:"text-sm text-gray-500"},we={class:"overflow-x-auto"},Te={class:"w-full divide-y divide-blue-200"},Oe=["title"],Ce={key:0,class:"ml-1 text-xs font-semibold"},Fe={key:1,class:"ml-1 text-xs font-semibold"},De={key:2,class:"ml-1 text-xs font-semibold text-red-600"},Ee={class:"px-4 py-2 whitespace-nowrap"},Me={class:"text-gray-900 font-semibold"},je={class:"text-gray-500 text-xs mt-1"},Se={class:"px-4 py-2 whitespace-nowrap text-center font-mono"},Ae={key:0},Ie={key:1,class:"text-green-600 font-semibold"},Ne={key:2},Ue={class:"px-4 py-2 whitespace-nowrap text-center font-mono"},Ke={key:0},Je={key:1,class:"text-green-600 font-semibold"},Ve={key:2,class:"text-red-600 font-bold"},Be={key:3},Le={class:"px-4 py-2 whitespace-nowrap text-center font-mono text-xs"},ze={key:0},Re={key:1,class:"flex flex-col"},He={class:"text-green-600 font-semibold"},Ye={class:"text-red-600 font-semibold"},$e={class:"px-4 py-2 whitespace-nowrap text-center font-mono"},Pe={key:0},We={key:1},Ge={class:"px-4 py-2 whitespace-nowrap text-center font-mono"},Qe={key:0,class:"flex flex-col"},qe={class:"text-xs text-purple-600 font-semibold",title:"Extra Off Overtime: {{ row.extra_off_overtime }} jam"},Xe={key:1,class:"text-gray-500"},Ze={key:0,class:"flex flex-col"},et={class:"text-xs text-purple-600",title:"Extra Off Overtime: {{ row.extra_off_overtime }} jam"},tt={key:1},st={key:2,class:"text-xs text-orange-600 font-semibold ml-1",title:"Cross-day overtime"},at={class:"px-4 py-2 whitespace-nowrap text-center"},lt=["onClick"],ot={class:"px-4 py-2 whitespace-nowrap text-center"},nt=["onClick"],it={key:1},dt={key:0},rt={key:1,class:"flex gap-6 mt-6 mb-10"},ut={class:"bg-blue-100 text-blue-800 rounded-xl px-6 py-4 font-bold text-lg shadow flex items-center gap-2"},ct={class:"ml-2"},pt={class:"bg-green-100 text-green-800 rounded-xl px-6 py-4 font-bold text-lg shadow flex items-center gap-2"},ft={class:"ml-2"},xt={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30"},mt={class:"bg-white rounded-2xl shadow-2xl p-10 w-full max-w-4xl min-w-[800px] relative animate-fade-in"},_t={class:"modal-detail-user"},vt={class:"w-full divide-y divide-blue-200 mb-4 modal-detail-table"},bt={class:"px-4 py-2 whitespace-nowrap text-center font-medium text-blue-600"},yt={class:"px-4 py-2 whitespace-nowrap text-center font-mono"},gt={class:"px-4 py-2 whitespace-nowrap text-center font-mono"},ht={class:"px-4 py-2 whitespace-nowrap text-center font-mono text-green-600 font-semibold"},kt={class:"px-4 py-2 whitespace-nowrap text-center font-mono text-red-600 font-semibold"},wt={key:0},Tt={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30"},Ot={class:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md relative animate-fade-in"},Ct={key:0},Ft={class:"mb-2"},Dt={class:"mb-2"},Et={class:"mb-2"},Mt={key:1,class:"text-gray-500"},jt={__name:"Index",props:{data:Array,outlets:Array,divisions:Array,filter:Object,summary:Object},setup(C){const i=C,c=d(""),p=d(""),f=d(null),h=d([]),F=d(!1),v=d(new Date().getMonth()+1),b=d(new Date().getFullYear()),K=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],J=Array.from({length:5},(n,s)=>new Date().getFullYear()-s),D=d(!1),k=d([]),j=d(""),S=d(""),E=d(!1),x=d({}),w=d(!1),y=d(!1);i.filter&&(c.value=i.filter.outlet_id||"",p.value=i.filter.division_id||"",v.value=i.filter.bulan||new Date().getMonth()+1,b.value=i.filter.tahun||new Date().getFullYear(),i.filter.search),Y([c,p],async(n,s)=>{s&&(s[0]!==n[0]||s[1]!==n[1])&&(await A(),f.value=null)});async function A(){F.value=!0;try{const n={};c.value&&(n.outlet_id=c.value),p.value&&(n.division_id=p.value);const s=await M.get("/api/attendance-report/employees",{params:n});if(h.value=s.data,i.filter&&i.filter.search&&h.value.length>0){const t=h.value.find(m=>m.name===i.filter.search);t&&(f.value=t)}}catch(n){console.error("Error fetching employees:",n),h.value=[]}finally{F.value=!1}}$(async()=>{await A()});function V(){w.value=!0,q.get("/attendance-report",{outlet_id:c.value,division_id:p.value,search:f.value?f.value.name:"",bulan:v.value,tahun:b.value},{preserveState:!0,replace:!0,onFinish:()=>{w.value=!1}})}async function B(n){D.value=!0,j.value=n.nama_lengkap,S.value=n.tanggal,k.value=[];const s=await M.get("/attendance-report/detail",{params:{user_id:n.user_id,tanggal:n.tanggal}});k.value=s.data}function I(){D.value=!1,k.value=[]}async function L(n){E.value=!0,x.value={};const s=await M.get("/attendance-report/shift-info",{params:{user_id:n.user_id,tanggal:n.tanggal}});x.value=s.data}function N(){E.value=!1,x.value={}}const z=()=>{y.value=!0;const n=new URLSearchParams;c.value&&n.append("outlet_id",c.value),p.value&&n.append("division_id",p.value),f.value&&n.append("search",f.value.name),v.value&&n.append("bulan",v.value),b.value&&n.append("tahun",b.value),setTimeout(()=>{y.value=!1},2e3),window.location.href=`/attendance-report/export?${n.toString()}`},R=n=>n.is_holiday?n.holiday_name:n.is_approved_absent?n.approved_absent_name:n.has_no_checkout?"Karyawan tidak melakukan checkout pada hari ini":"";return(n,s)=>(a(),P(X,{title:"Report Attendance"},{default:W(()=>[e("div",te,[w.value||y.value?(a(),l("div",se,[e("div",ae,[s[5]||(s[5]=e("svg",{class:"animate-spin h-12 w-12 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})],-1)),e("div",le,o(y.value?"Mengekspor ke Excel...":"Memuat data..."),1)])])):u("",!0),e("div",oe,[s[15]||(s[15]=e("div",{class:"text-lg font-semibold text-gray-700 mb-4"},"Filter Report",-1)),e("div",ne,[e("div",ie,[s[7]||(s[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Outlet",-1)),T(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>c.value=t),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[s[6]||(s[6]=e("option",{value:""},"Semua Outlet",-1)),(a(!0),l(_,null,g(C.outlets,t=>(a(),l("option",{key:t.id,value:t.id},o(t.name),9,de))),128))],512),[[O,c.value]])]),e("div",re,[s[9]||(s[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Divisi",-1)),T(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>p.value=t),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[s[8]||(s[8]=e("option",{value:""},"Semua Divisi",-1)),(a(!0),l(_,null,g(C.divisions,t=>(a(),l("option",{key:t.id,value:t.id},o(t.name),9,ue))),128))],512),[[O,p.value]])]),e("div",ce,[s[10]||(s[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nama Karyawan",-1)),G(U(Z),{modelValue:f.value,"onUpdate:modelValue":s[2]||(s[2]=t=>f.value=t),options:h.value,loading:F.value,searchable:!0,"clear-on-select":!1,"close-on-select":!0,"show-labels":!1,"track-by":"id",label:"name",placeholder:"Pilih atau cari karyawan...",class:"w-full"},null,8,["modelValue","options","loading"])]),e("div",pe,[s[11]||(s[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Bulan",-1)),T(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>v.value=t),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(a(),l(_,null,g(K,(t,m)=>e("option",{key:m+1,value:m+1},o(t),9,fe)),64))],512),[[O,v.value]])]),e("div",xe,[s[12]||(s[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tahun",-1)),T(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>b.value=t),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(a(!0),l(_,null,g(U(J),t=>(a(),l("option",{key:t,value:t},o(t),9,me))),128))],512),[[O,b.value]])]),e("div",null,[e("button",{onClick:V,disabled:w.value||y.value,class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg"},s[13]||(s[13]=[e("i",{class:"fa fa-search mr-2"},null,-1),r(" Tampilkan ")]),8,_e)])]),e("div",ve,[e("button",{onClick:z,disabled:w.value||y.value,class:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-xl shadow flex items-center gap-2"},s[14]||(s[14]=[e("i",{class:"fa fa-file-excel-o"},null,-1),r(" Export to Excel ")]),8,be)])]),e("div",ye,[e("div",ge,[e("div",he,[s[16]||(s[16]=e("h3",{class:"text-lg font-semibold text-gray-700"},"Data Absensi",-1)),e("div",ke," Total: "+o(i.data?i.data.length:0)+" record ",1)])]),e("div",we,[e("table",Te,[s[24]||(s[24]=e("thead",{class:"bg-blue-600 text-white"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Tanggal"),e("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Nama Karyawan"),e("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Jam Masuk"),e("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Jam Keluar"),e("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"IN/OUT"),e("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Telat (menit)"),e("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Lembur (jam)"),e("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Aksi"),e("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Shift")])],-1)),e("tbody",null,[(a(!0),l(_,null,g(i.data,(t,m)=>(a(),l("tr",{key:t.tanggal+"-"+t.nama_lengkap+"-"+(t.outlet_id||"no-outlet"),class:Q([t.is_holiday?"bg-red-100 text-red-700 font-bold":"",!t.is_holiday&&t.is_approved_absent?"bg-green-100 text-green-700 font-bold":"",!t.is_holiday&&!t.is_approved_absent&&t.is_off?"bg-gray-200 text-gray-500 font-bold italic":"",!t.is_holiday&&!t.is_approved_absent&&!t.is_off&&t.has_no_checkout?"bg-red-200 text-red-800 font-semibold":"",!t.is_holiday&&!t.is_approved_absent&&!t.is_off&&!t.has_no_checkout&&m%2===1?"bg-blue-50":""])},[e("td",{class:"px-4 py-2 whitespace-nowrap font-mono",title:R(t)},[r(o(t.tanggal)+" ",1),t.is_holiday&&t.holiday_name?(a(),l("span",Ce,"("+o(t.holiday_name)+")",1)):u("",!0),!t.is_holiday&&t.is_approved_absent&&t.approved_absent_name?(a(),l("span",Fe,"("+o(t.approved_absent_name)+")",1)):u("",!0),t.has_no_checkout?(a(),l("span",De,"(TIDAK CHECKOUT)")):u("",!0)],8,Oe),e("td",Ee,[e("div",Me,o(t.nama_lengkap),1),e("div",je,o(t.jabatan||"-"),1)]),e("td",Se,[t.is_off?(a(),l("span",Ae,"OFF")):t.approved_absent?(a(),l("span",Ie,[s[17]||(s[17]=e("i",{class:"fa-solid fa-check-circle mr-1"},null,-1)),r(o(t.approved_absent.leave_type_name),1)])):(a(),l("span",Ne,o(t.jam_masuk||"-"),1))]),e("td",Ue,[t.is_off?(a(),l("span",Ke,"OFF")):t.approved_absent?(a(),l("span",Je,[s[18]||(s[18]=e("i",{class:"fa-solid fa-check-circle mr-1"},null,-1)),r(o(t.approved_absent.leave_type_name),1)])):t.has_no_checkout?(a(),l("span",Ve,s[19]||(s[19]=[e("i",{class:"fa-solid fa-exclamation-triangle mr-1"},null,-1),r("TIDAK CHECKOUT ")]))):(a(),l("span",Be,o(t.jam_keluar||"-"),1))]),e("td",Le,[t.is_off?(a(),l("span",ze,"OFF")):(a(),l("span",Re,[e("span",He,o(t.total_masuk||0)+" IN",1),e("span",Ye,o(t.total_keluar||0)+" OUT",1)]))]),e("td",$e,[t.is_off?(a(),l("span",Pe,"OFF")):(a(),l("span",We,o(t.telat),1))]),e("td",Ge,[t.is_off?(a(),l(_,{key:0},[t.extra_off_overtime&&t.extra_off_overtime>0?(a(),l("div",Qe,[s[20]||(s[20]=e("span",{class:"text-gray-500"},"OFF",-1)),e("span",qe,o(t.extra_off_overtime)+" EO ",1)])):(a(),l("span",Xe,"OFF"))],64)):(a(),l(_,{key:1},[t.extra_off_overtime&&t.extra_off_overtime>0?(a(),l("div",Ze,[e("span",null,o(Math.floor(t.total_lembur||t.lembur||0)),1),e("span",et," (+"+o(t.extra_off_overtime)+" EO) ",1)])):(a(),l("span",tt,o(Math.floor(t.total_lembur||t.lembur||0)),1)),t.is_cross_day?(a(),l("span",st," ðŸŒ™ ")):u("",!0)],64))]),e("td",at,[t.is_off?u("",!0):(a(),l("button",{key:0,onClick:H=>B(t),class:"px-3 py-1 rounded bg-blue-100 text-blue-700 hover:bg-blue-200 transition text-xs font-semibold"},s[21]||(s[21]=[e("i",{class:"fa fa-list mr-1"},null,-1),r(" Detail ")]),8,lt))]),e("td",ot,[t.is_off?(a(),l("span",it,"-")):(a(),l("button",{key:0,onClick:H=>L(t),class:"px-3 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200 transition text-xs font-semibold"},s[22]||(s[22]=[e("i",{class:"fa fa-clock mr-1"},null,-1),r(" Shift ")]),8,nt))])],2))),128)),!i.data||i.data.length===0?(a(),l("tr",dt,s[23]||(s[23]=[e("td",{colspan:"10",class:"text-center py-8 text-gray-400"},[e("div",{class:"flex flex-col items-center gap-2"},[e("i",{class:"fa fa-search text-4xl text-gray-300"}),e("div",{class:"text-lg font-medium"},"Tidak ada data absensi"),e("div",{class:"text-sm text-gray-500"},'Silakan pilih filter dan klik tombol "Tampilkan" untuk melihat data')])],-1)]))):u("",!0)])])])]),i.summary?(a(),l("div",rt,[e("div",ut,[s[25]||(s[25]=e("i",{class:"fa fa-clock"},null,-1)),s[26]||(s[26]=r(" Total Telat: ")),e("span",ct,o(i.summary.total_telat)+" menit",1)]),e("div",pt,[s[27]||(s[27]=e("i",{class:"fa fa-business-time"},null,-1)),s[28]||(s[28]=r(" Total Lembur: ")),e("span",ft,o(Math.floor(i.summary.total_lembur||0))+" jam",1)])])):u("",!0),D.value?(a(),l("div",xt,[e("div",mt,[s[32]||(s[32]=e("div",{class:"modal-detail-header"},[e("i",{class:"fa fa-list text-blue-500"}),r(" Detail Absensi ")],-1)),e("div",_t,o(j.value)+" | "+o(S.value),1),e("table",vt,[s[30]||(s[30]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-center"},"Outlet"),e("th",{class:"px-4 py-2 text-center"},"Jam In"),e("th",{class:"px-4 py-2 text-center"},"Jam Out"),e("th",{class:"px-4 py-2 text-center"},"Total IN"),e("th",{class:"px-4 py-2 text-center"},"Total OUT")])],-1)),e("tbody",null,[(a(!0),l(_,null,g(k.value,(t,m)=>(a(),l("tr",{key:m},[e("td",bt,o(t.nama_outlet),1),e("td",yt,o(t.jam_in),1),e("td",gt,o(t.jam_out),1),e("td",ht,o(t.total_in),1),e("td",kt,o(t.total_out),1)]))),128)),k.value.length?u("",!0):(a(),l("tr",wt,s[29]||(s[29]=[e("td",{colspan:"5",class:"text-center py-6 text-gray-400"},"Tidak ada data",-1)])))])]),e("div",{class:"modal-detail-footer"},[e("button",{onClick:I,class:"modal-detail-btn"},"Tutup")]),e("button",{onClick:I,class:"modal-detail-close"},s[31]||(s[31]=[e("i",{class:"fa fa-times"},null,-1)]))])])):u("",!0),E.value?(a(),l("div",Tt,[e("div",Ot,[s[37]||(s[37]=e("div",{class:"flex items-center gap-2 mb-4"},[e("i",{class:"fa fa-clock text-green-500"}),e("span",{class:"font-bold text-lg"},"Info Shift Karyawan")],-1)),x.value&&x.value.shift_name?(a(),l("div",Ct,[e("div",Ft,[s[33]||(s[33]=e("b",null,"Shift:",-1)),r(" "+o(x.value.shift_name),1)]),e("div",Dt,[s[34]||(s[34]=e("b",null,"Jam Masuk:",-1)),r(" "+o(x.value.time_start),1)]),e("div",Et,[s[35]||(s[35]=e("b",null,"Jam Keluar:",-1)),r(" "+o(x.value.time_end),1)])])):(a(),l("div",Mt,"Tidak ada data shift untuk hari ini.")),e("div",{class:"flex justify-end mt-6"},[e("button",{onClick:N,class:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300"},"Tutup")]),e("button",{onClick:N,class:"absolute top-3 right-3 text-gray-400 hover:text-red-500"},s[36]||(s[36]=[e("i",{class:"fa fa-times"},null,-1)]))])])):u("",!0)])]),_:1}))}},Ht=ee(jt,[["__scopeId","data-v-864cc9a5"]]);export{Ht as default};
