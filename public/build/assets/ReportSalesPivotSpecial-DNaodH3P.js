import{r as k,c as W,w as tt,a as et,j as st,A as rt,B as a,C as lt,D as t,L as n,E as u,N as s,H as I,J as A,G as h,F as f,M as v,l as F,W as ot}from"./vendor-vue-g7iCcTkf.js";import{A as at}from"./AppLayout-BXpmQkyt.js";import{a as E}from"./vendor-utils-CpgP2uT4.js";import{_ as nt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-ErXbte2J.js";import"./vendor-charts-CuqD4wLC.js";import"./ProfileUpdateModal-C0i_S3gs.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const it={class:"w-full min-h-screen bg-gray-50 py-4 px-0"},dt={key:0,class:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg"},ut={class:"flex items-center gap-2 text-blue-800"},ct={class:"flex flex-col md:flex-row md:items-center gap-4 mb-4"},pt={class:"flex items-center gap-2"},gt={class:"flex items-center gap-2"},bt=["disabled"],yt={key:1,class:"bg-white rounded-xl shadow-lg p-8 text-center text-gray-500 font-bold"},ht={key:2,class:"bg-white rounded-xl shadow-lg p-8 text-center text-gray-500 font-bold"},xt={key:3,class:"bg-white rounded-xl shadow-lg overflow-x-auto relative"},_t={key:0,class:"absolute inset-0 bg-white/70 z-20 flex items-center justify-center"},ft={class:"min-w-full border border-gray-300"},vt={key:0,class:"bg-blue-100 font-bold"},mt={class:"px-4 py-2 border border-gray-200 flex items-center gap-2"},kt=["onClick"],wt={class:"px-4 py-2 border border-gray-200 text-right"},Rt={class:"px-4 py-2 border border-gray-200 text-right"},Tt={class:"px-4 py-2 border border-gray-200 text-right"},Ct={class:"px-4 py-2 border border-gray-200 text-right"},Lt={class:"px-4 py-2 border border-gray-200 text-right"},St={class:"px-4 py-2 border border-gray-200 text-right font-bold"},Ot={key:1,class:"bg-blue-50 font-semibold"},Dt={class:"px-4 py-2 border border-gray-300 text-right"},Et={class:"px-4 py-2 border border-gray-300 text-right"},Ut={class:"px-4 py-2 border border-gray-300 text-right"},jt={class:"px-4 py-2 border border-gray-300 text-right"},Wt={class:"px-4 py-2 border border-gray-300 text-right"},Mt={class:"px-4 py-2 border border-gray-300 text-right"},Nt={key:2,class:"bg-green-100 font-bold"},It={class:"px-4 py-2 border border-gray-200 flex items-center gap-2"},At=["onClick"],Ft={class:"px-4 py-2 border border-gray-200 text-right"},$t={class:"px-4 py-2 border border-gray-200 text-right"},Bt={class:"px-4 py-2 border border-gray-200 text-right"},Pt={class:"px-4 py-2 border border-gray-200 text-right"},qt={class:"px-4 py-2 border border-gray-200 text-right"},zt={class:"px-4 py-2 border border-gray-200 text-right font-bold"},Gt={key:3,class:"bg-green-50 font-semibold"},Ht={class:"px-4 py-2 border border-gray-300 text-right"},Vt={class:"px-4 py-2 border border-gray-300 text-right"},Kt={class:"px-4 py-2 border border-gray-300 text-right"},Qt={class:"px-4 py-2 border border-gray-300 text-right"},Jt={class:"px-4 py-2 border border-gray-300 text-right"},Yt={class:"px-4 py-2 border border-gray-300 text-right"},Zt={key:4},Xt={key:0},te={class:"bg-gray-100 font-bold"},ee={class:"px-4 py-2 border border-gray-300 text-right"},se={class:"px-4 py-2 border border-gray-300 text-right"},re={class:"px-4 py-2 border border-gray-300 text-right"},le={class:"px-4 py-2 border border-gray-300 text-right"},oe={class:"px-4 py-2 border border-gray-300 text-right"},ae={class:"px-4 py-2 border border-gray-300 text-right"},ne={key:4,class:"flex justify-between items-center mt-4"},ie={class:"text-sm text-gray-600"},de={key:0},ue={key:1},ce={key:2},pe={key:3},ge={key:4},be={key:5,class:"mt-8"},ye={class:"bg-white rounded-xl shadow-lg overflow-x-auto relative"},he={key:0,class:"absolute inset-0 bg-white/70 z-20 flex items-center justify-center"},xe={class:"min-w-full border border-gray-300"},_e={key:0},fe={class:"px-4 py-2 border border-gray-200 flex items-center gap-2"},ve=["onClick"],me={class:"px-4 py-2 border border-gray-200 text-right"},ke={class:"px-4 py-2 border border-gray-200 text-right"},we={class:"px-4 py-2 border border-gray-200 text-right"},Re={class:"px-4 py-2 border border-gray-200 text-right"},Te={class:"px-4 py-2 border border-gray-200 text-right"},Ce={class:"px-4 py-2 border border-gray-200 text-right font-bold"},Le={key:0},Se={class:"bg-purple-100 font-bold"},Oe={class:"px-4 py-2 border border-gray-300 text-right"},De={class:"px-4 py-2 border border-gray-300 text-right"},Ee={class:"px-4 py-2 border border-gray-300 text-right"},Ue={class:"px-4 py-2 border border-gray-300 text-right"},je={class:"px-4 py-2 border border-gray-300 text-right"},We={class:"px-4 py-2 border border-gray-300 text-right"},Me={key:6,class:"mt-8"},Ne={class:"bg-white rounded-xl shadow-lg overflow-x-auto relative"},Ie={key:0,class:"absolute inset-0 bg-white/70 z-20 flex items-center justify-center"},Ae={class:"min-w-full border border-gray-300"},Fe={key:0},$e={class:"px-4 py-2 border border-gray-200 flex items-center gap-2"},Be=["onClick"],Pe={class:"px-4 py-2 border border-gray-200 text-right"},qe={class:"px-4 py-2 border border-gray-200 text-right"},ze={class:"px-4 py-2 border border-gray-200 text-right"},Ge={class:"px-4 py-2 border border-gray-200 text-right"},He={class:"px-4 py-2 border border-gray-200 text-right"},Ve={class:"px-4 py-2 border border-gray-200 text-right font-bold"},Ke={key:0},Qe={class:"bg-orange-100 font-bold"},Je={class:"px-4 py-2 border border-gray-300 text-right"},Ye={class:"px-4 py-2 border border-gray-300 text-right"},Ze={class:"px-4 py-2 border border-gray-300 text-right"},Xe={class:"px-4 py-2 border border-gray-300 text-right"},ts={class:"px-4 py-2 border border-gray-300 text-right"},es={class:"px-4 py-2 border border-gray-300 text-right"},ss={key:7,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60"},rs={class:"bg-gradient-to-br from-yellow-200 via-white to-yellow-100 rounded-3xl shadow-2xl p-8 min-w-[350px] max-w-2xl w-full relative animate-fade-in-3d"},ls={class:"text-xl font-bold mb-4 text-yellow-800 flex items-center gap-2"},os={class:"mb-4 flex justify-end gap-2"},as=["disabled"],ns=["disabled"],is={key:0,class:"text-center py-8 text-yellow-600"},ds={key:1,class:"text-center py-8 text-gray-400"},us={key:2,class:"space-y-6 max-h-[60vh] overflow-y-auto"},cs={key:0},ps={class:"font-bold text-lg mb-2 flex items-center gap-2 text-yellow-700"},gs={key:0,class:"mb-4"},bs={class:"w-full text-sm"},ys={class:"py-1"},hs={class:"py-1"},xs={class:"py-1 text-right"},_s={class:"py-1 text-right"},fs={class:"py-1 text-right"},vs={class:"py-1 text-right font-bold"},ms={class:"font-bold bg-blue-50"},ks={class:"py-1 text-right"},ws={key:1,class:"mb-4"},Rs={class:"w-full text-sm"},Ts={class:"py-1"},Cs={class:"py-1"},Ls={class:"py-1 text-right"},Ss={class:"py-1 text-right"},Os={class:"py-1 text-right"},Ds={class:"py-1 text-right font-bold"},Es={class:"font-bold bg-green-50"},Us={class:"py-1 text-right"},js={key:2,class:"mb-4"},Ws={class:"w-full text-sm"},Ms={class:"py-1"},Ns={class:"py-1"},Is={class:"py-1 text-right"},As={class:"py-1 text-right"},Fs={class:"py-1 text-right"},$s={class:"py-1 text-right font-bold"},Bs={class:"font-bold bg-purple-50"},Ps={class:"py-1 text-right"},qs={class:"border-t-2 border-yellow-500 pt-2 mt-4"},zs={class:"w-full text-sm"},Gs={class:"font-bold bg-yellow-50"},Hs={colspan:"5",class:"text-right py-1"},Vs={class:"py-1 text-right"},Ks={key:1},Qs={class:"w-full text-sm"},Js={key:0,class:"text-right py-1"},Ys={key:1,class:"text-right py-1"},Zs={class:"py-1"},Xs={class:"py-1 text-right"},tr={key:0},er={key:0},sr={key:1},rr={key:2},lr={key:1},or={class:"py-1 text-right"},ar={class:"py-1 text-right"},nr={class:"py-1 text-right font-bold"},ir={key:0,class:"py-1 text-right text-xs"},dr={key:1,class:"py-1 text-right text-xs"},ur={class:"font-bold bg-gray-100"},cr={colspan:"4",class:"text-right py-1"},pr={class:"py-1 text-right"},gr={key:0,colspan:"2"},br={__name:"ReportSalesPivotSpecial",props:{report:Array,retailReport:Array,warehouseReport:Array,filters:Object},setup($){var q,z;const U=$,p=k(((q=U.filters)==null?void 0:q.from)||""),g=k(((z=U.filters)==null?void 0:z.to)||""),w=k(""),R=k(!1),B=W(()=>{if(!p.value||!g.value)return"";const l=e=>new Date(e).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"});return`${l(p.value)} - ${l(g.value)}`}),C=W(()=>{let l=U.report;if(w.value){const e=w.value.toLowerCase();l=l.filter(r=>r.customer&&r.customer.toLowerCase().includes(e))}return l}),y=W(()=>{const l={outlets:[],nonOutlets:[]};return C.value.forEach(e=>{e.is_outlet==1?l.outlets.push(e):l.nonOutlets.push(e)}),l}),T=W(()=>{let l=U.retailReport||[];if(w.value){const e=w.value.toLowerCase();l=l.filter(r=>r.customer&&r.customer.toLowerCase().includes(e))}return l}),L=W(()=>{let l=U.warehouseReport||[];if(w.value){const e=w.value.toLowerCase();l=l.filter(r=>r.customer&&r.customer.toLowerCase().includes(e))}return l});tt([p,g],([l,e],[r,b])=>{(r!==void 0||b!==void 0)&&(R.value=!1)});function G(){const e=new Date().toISOString().split("T")[0];p.value=e,g.value=e}function H(){const l=new Date,e=l.getDay(),r=new Date(l);r.setDate(l.getDate()-e+(e===0?-6:1));const b=new Date(r);b.setDate(r.getDate()+6),p.value=r.toISOString().split("T")[0],g.value=b.toISOString().split("T")[0]}function V(){const l=new Date,e=new Date(l.getFullYear(),l.getMonth(),1),r=new Date(l.getFullYear(),l.getMonth()+1,0);p.value=e.toISOString().split("T")[0],g.value=r.toISOString().split("T")[0]}const M=k(!1);et(()=>{}),st(()=>{});function K(){if(!p.value||!g.value){alert("Silakan pilih rentang tanggal terlebih dahulu");return}if(new Date(p.value)>new Date(g.value)){alert('Tanggal "Sampai" tidak boleh lebih kecil dari tanggal "Dari"');return}R.value=!0,ot.get("/report-rekap-fj",{from:p.value,to:g.value},{preserveState:!0,preserveScroll:!0})}function S(l){return C.value.reduce((e,r)=>e+(Number(r[l])||0),0)}function _(l,e){return e.reduce((r,b)=>r+(Number(b[l])||0),0)}function O(l){return T.value.reduce((e,r)=>e+(Number(r[l])||0),0)}function D(l){return L.value.reduce((e,r)=>e+(Number(r[l])||0),0)}function o(l){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(l||0)}const j=k(!1),d=k(""),x=k({}),m=k(!1);async function P(l){j.value=!0,d.value=l,x.value={},m.value=!0;try{const{data:e}=await E.post("/api/report/fj-detail",{customer:l,from:p.value,to:g.value});x.value=e}catch{x.value={}}finally{m.value=!1}}async function Q(){try{let l="/api/report/fj-detail-pdf",e=d.value;d.value.includes("(Retail)")?(l="/api/report/retail-detail-pdf",e=d.value.replace(" (Retail)","")):d.value.includes("(Warehouse)")&&(l="/api/report/warehouse-detail-pdf",e=d.value.replace(" (Warehouse)",""));const r=await E.post(l,{customer:e,from:p.value,to:g.value},{responseType:"blob"}),b=new Blob([r.data],{type:"application/pdf"}),i=window.URL.createObjectURL(b),c=document.createElement("a");c.href=i;const N=d.value.replace(/[^a-zA-Z0-9\s\-_]/g,"_").trim().replace(/\s+/g,"_");c.download=`Detail_${N}_${p.value}_${g.value}.pdf`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(i)}catch(l){console.error("Error downloading PDF:",l),l.response&&l.response.data&&l.response.data.error?alert("Error: "+l.response.data.error):l.response&&l.response.status===500?alert("Terjadi kesalahan server saat generate PDF. Silakan coba lagi."):alert("Terjadi kesalahan saat download PDF. Silakan coba lagi.")}}async function J(){try{let l="/api/report/fj-detail-excel",e=d.value;d.value.includes("(Retail)")?(l="/api/report/retail-detail-excel",e=d.value.replace(" (Retail)","")):d.value.includes("(Warehouse)")&&(l="/api/report/warehouse-detail-excel",e=d.value.replace(" (Warehouse)",""));const r=await E.post(l,{customer:e,from:p.value,to:g.value},{responseType:"blob"}),b=new Blob([r.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i=window.URL.createObjectURL(b),c=document.createElement("a");c.href=i;const N=d.value.replace(/[^a-zA-Z0-9\s\-_]/g,"_").trim().replace(/\s+/g,"_");c.download=`Detail_${N}_${p.value}_${g.value}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(i)}catch(l){console.error("Error downloading Excel:",l),l.response&&l.response.data&&l.response.data.error?alert("Error: "+l.response.data.error):l.response&&l.response.status===500?alert("Terjadi kesalahan server saat generate Excel. Silakan coba lagi."):alert("Terjadi kesalahan saat download Excel. Silakan coba lagi.")}}async function Y(l){j.value=!0,d.value=l+" (Retail)",x.value={},m.value=!0;try{const{data:e}=await E.post(route("report.retail-sales-detail"),{customer:l,from:p.value,to:g.value});x.value=e}catch{x.value={}}finally{m.value=!1}}async function Z(l){j.value=!0,d.value=l+" (Warehouse)",x.value={},m.value=!0;try{const{data:e}=await E.post(route("report.warehouse-sales-detail"),{customer:l,from:p.value,to:g.value});x.value=e}catch{x.value={}}finally{m.value=!1}}async function X(){if(!p.value||!g.value){alert("Silakan pilih rentang tanggal terlebih dahulu");return}if(!R.value){alert("Silakan load data terlebih dahulu");return}try{const l=event.target,e=l.innerHTML;l.innerHTML='<span class="mr-2"><i class="fas fa-spinner fa-spin"></i></span>Exporting...',l.disabled=!0;const r=await E.get(route("report.rekap-fj.export"),{params:{from:p.value,to:g.value},responseType:"blob"}),b=new Blob([r.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i=window.URL.createObjectURL(b),c=document.createElement("a");c.href=i,c.download=`sales_pivot_special_${p.value}_to_${g.value}.xlsx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(i),l.innerHTML=e,l.disabled=!1}catch(l){console.error("Export error:",l),alert("Terjadi kesalahan saat export. Silakan coba lagi.");const e=event.target;e.innerHTML='<span class="mr-2"><i class="fas fa-file-excel"></i></span>Export Excel',e.disabled=!1}}return(l,e)=>(a(),rt(at,null,{default:lt(()=>[t("div",it,[e[55]||(e[55]=t("h1",{class:"text-2xl font-bold mb-6"},"Report Rekap FJ",-1)),B.value?(a(),n("div",dt,[t("div",ut,[e[4]||(e[4]=t("i",{class:"fa fa-calendar text-blue-600"},null,-1)),e[5]||(e[5]=t("span",{class:"font-medium"},"Rentang Tanggal:",-1)),t("span",null,s(B.value),1)])])):u("",!0),t("div",ct,[t("div",pt,[e[6]||(e[6]=t("label",{class:"text-sm font-medium text-gray-700"},"Dari:",-1)),I(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>p.value=r),type:"date",class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[A,p.value]])]),t("div",gt,[e[7]||(e[7]=t("label",{class:"text-sm font-medium text-gray-700"},"Sampai:",-1)),I(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>g.value=r),type:"date",class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[A,g.value]])]),I(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>w.value=r),type:"text",placeholder:"Cari outlet...",class:"px-4 py-2 border border-gray-300 rounded-lg w-full md:w-64 focus:ring-blue-500 focus:border-blue-500"},null,512),[[A,w.value]]),t("button",{onClick:G,class:"inline-flex items-center px-3 py-2 bg-green-600 text-white rounded-md font-semibold hover:bg-green-700 mr-2"},e[8]||(e[8]=[t("span",{class:"mr-2"},[t("i",{class:"fas fa-calendar-day"})],-1),h(" Hari Ini ")])),t("button",{onClick:H,class:"inline-flex items-center px-3 py-2 bg-purple-600 text-white rounded-md font-semibold hover:bg-purple-700 mr-2"},e[9]||(e[9]=[t("span",{class:"mr-2"},[t("i",{class:"fas fa-calendar-week"})],-1),h(" Minggu Ini ")])),t("button",{onClick:V,class:"inline-flex items-center px-3 py-2 bg-orange-600 text-white rounded-md font-semibold hover:bg-orange-700 mr-2"},e[10]||(e[10]=[t("span",{class:"mr-2"},[t("i",{class:"fas fa-calendar-alt"})],-1),h(" Bulan Ini ")])),t("button",{onClick:K,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-700"},e[11]||(e[11]=[t("span",{class:"mr-2"},[t("i",{class:"fas fa-sync-alt"})],-1),h(" Load Data ")])),t("button",{onClick:X,disabled:!p.value||!g.value||!R.value||!$.report.length,class:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-md font-semibold hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed"},e[12]||(e[12]=[t("span",{class:"mr-2"},[t("i",{class:"fas fa-file-excel"})],-1),h(" Export Excel ")]),8,bt)]),!p.value||!g.value?(a(),n("div",yt," Silakan pilih rentang tanggal terlebih dahulu ")):R.value?(a(),n("div",xt,[M.value?(a(),n("div",_t,e[13]||(e[13]=[t("svg",{class:"animate-spin h-12 w-12 text-yellow-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})],-1)]))):u("",!0),t("table",ft,[e[22]||(e[22]=t("thead",null,[t("tr",{class:"bg-yellow-300 text-gray-900"},[t("th",{class:"px-4 py-2 border border-gray-300"},"Customer"),t("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Main Store"),t("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Chemical"),t("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Stationary"),t("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Marketing"),t("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Main Kitchen"),t("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Line Total")])],-1)),t("tbody",null,[y.value.outlets.length>0?(a(),n("tr",vt,e[14]||(e[14]=[t("td",{colspan:"7",class:"px-4 py-2 border border-gray-300 text-center text-blue-800"},[t("i",{class:"fas fa-store mr-2"}),h("OUTLET (is_outlet = 1) ")],-1)]))):u("",!0),(a(!0),n(f,null,v(y.value.outlets,r=>(a(),n("tr",{key:"outlet-"+r.customer},[t("td",mt,[h(s(r.customer)+" ",1),t("button",{onClick:b=>P(r.customer),class:"ml-2 bg-gradient-to-br from-yellow-400 to-yellow-600 text-white rounded-full shadow-lg px-2 py-1 hover:scale-110 transition-all font-bold",title:"Lihat Detail"},e[15]||(e[15]=[t("i",{class:"fas fa-search-plus"},null,-1)]),8,kt)]),t("td",wt,s(o(r.main_store)),1),t("td",Rt,s(o(r.chemical)),1),t("td",Tt,s(o(r.stationary)),1),t("td",Ct,s(o(r.marketing)),1),t("td",Lt,s(o(r.main_kitchen)),1),t("td",St,s(o(r.line_total)),1)]))),128)),y.value.outlets.length>0?(a(),n("tr",Ot,[e[16]||(e[16]=t("td",{class:"px-4 py-2 border border-gray-300 text-right"},"SUBTOTAL OUTLET",-1)),t("td",Dt,s(o(_("main_store",y.value.outlets))),1),t("td",Et,s(o(_("chemical",y.value.outlets))),1),t("td",Ut,s(o(_("stationary",y.value.outlets))),1),t("td",jt,s(o(_("marketing",y.value.outlets))),1),t("td",Wt,s(o(_("main_kitchen",y.value.outlets))),1),t("td",Mt,s(o(_("line_total",y.value.outlets))),1)])):u("",!0),y.value.nonOutlets.length>0?(a(),n("tr",Nt,e[17]||(e[17]=[t("td",{colspan:"7",class:"px-4 py-2 border border-gray-300 text-center text-green-800"},[t("i",{class:"fas fa-building mr-2"}),h("NON-OUTLET (is_outlet = 0) ")],-1)]))):u("",!0),(a(!0),n(f,null,v(y.value.nonOutlets,r=>(a(),n("tr",{key:"nonoutlet-"+r.customer},[t("td",It,[h(s(r.customer)+" ",1),t("button",{onClick:b=>P(r.customer),class:"ml-2 bg-gradient-to-br from-yellow-400 to-yellow-600 text-white rounded-full shadow-lg px-2 py-1 hover:scale-110 transition-all font-bold",title:"Lihat Detail"},e[18]||(e[18]=[t("i",{class:"fas fa-search-plus"},null,-1)]),8,At)]),t("td",Ft,s(o(r.main_store)),1),t("td",$t,s(o(r.chemical)),1),t("td",Bt,s(o(r.stationary)),1),t("td",Pt,s(o(r.marketing)),1),t("td",qt,s(o(r.main_kitchen)),1),t("td",zt,s(o(r.line_total)),1)]))),128)),y.value.nonOutlets.length>0?(a(),n("tr",Gt,[e[19]||(e[19]=t("td",{class:"px-4 py-2 border border-gray-300 text-right"},"SUBTOTAL NON-OUTLET",-1)),t("td",Ht,s(o(_("main_store",y.value.nonOutlets))),1),t("td",Vt,s(o(_("chemical",y.value.nonOutlets))),1),t("td",Kt,s(o(_("stationary",y.value.nonOutlets))),1),t("td",Qt,s(o(_("marketing",y.value.nonOutlets))),1),t("td",Jt,s(o(_("main_kitchen",y.value.nonOutlets))),1),t("td",Yt,s(o(_("line_total",y.value.nonOutlets))),1)])):u("",!0),!y.value.outlets.length&&!y.value.nonOutlets.length?(a(),n("tr",Zt,e[20]||(e[20]=[t("td",{colspan:"7",class:"text-center py-10 text-gray-400"},"Tidak ada data.",-1)]))):u("",!0)]),C.value.length?(a(),n("tfoot",Xt,[t("tr",te,[e[21]||(e[21]=t("td",{class:"px-4 py-2 border border-gray-300 text-right"},"TOTAL KESELURUHAN",-1)),t("td",ee,s(o(S("main_store"))),1),t("td",se,s(o(S("chemical"))),1),t("td",re,s(o(S("stationary"))),1),t("td",le,s(o(S("marketing"))),1),t("td",oe,s(o(S("main_kitchen"))),1),t("td",ae,s(o(S("line_total"))),1)])])):u("",!0)])])):(a(),n("div",ht,' Silakan klik "Load Data" untuk menampilkan laporan ')),p.value&&g.value&&R.value?(a(),n("div",ne,[t("div",ie,[C.value.length?(a(),n("span",de,"FJ: "+s(C.value.length)+" data ("+s(y.value.outlets.length)+" Outlet, "+s(y.value.nonOutlets.length)+" Non-Outlet)",1)):u("",!0),C.value.length&&T.value.length?(a(),n("span",ue," | ")):u("",!0),T.value.length?(a(),n("span",ce,"Retail: "+s(T.value.length)+" data",1)):u("",!0),(C.value.length||T.value.length)&&L.value.length?(a(),n("span",pe," | ")):u("",!0),L.value.length?(a(),n("span",ge,"Warehouse: "+s(L.value.length)+" data",1)):u("",!0)])])):u("",!0),p.value&&g.value&&R.value?(a(),n("div",be,[e[28]||(e[28]=t("h2",{class:"text-xl font-bold mb-4 text-purple-800 flex items-center gap-2"},[t("i",{class:"fas fa-shopping-cart"}),h(" Retail Warehouse Sales ")],-1)),t("div",ye,[M.value?(a(),n("div",he,e[23]||(e[23]=[t("svg",{class:"animate-spin h-12 w-12 text-purple-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})],-1)]))):u("",!0),t("table",xe,[e[27]||(e[27]=t("thead",null,[t("tr",{class:"bg-purple-300 text-gray-900"},[t("th",{class:"px-4 py-2 border border-gray-300"},"Customer"),t("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Main Store"),t("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Chemical"),t("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Stationary"),t("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Marketing"),t("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Main Kitchen"),t("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Line Total")])],-1)),t("tbody",null,[T.value.length?u("",!0):(a(),n("tr",_e,e[24]||(e[24]=[t("td",{colspan:"7",class:"text-center py-10 text-gray-400"},"Tidak ada data retail warehouse sales.",-1)]))),(a(!0),n(f,null,v(T.value,r=>(a(),n("tr",{key:"retail-"+r.customer},[t("td",fe,[h(s(r.customer)+" ",1),t("button",{onClick:b=>Y(r.customer),class:"ml-2 bg-gradient-to-br from-purple-400 to-purple-600 text-white rounded-full shadow-lg px-2 py-1 hover:scale-110 transition-all font-bold",title:"Lihat Detail"},e[25]||(e[25]=[t("i",{class:"fas fa-search-plus"},null,-1)]),8,ve)]),t("td",me,s(o(r.main_store)),1),t("td",ke,s(o(r.chemical)),1),t("td",we,s(o(r.stationary)),1),t("td",Re,s(o(r.marketing)),1),t("td",Te,s(o(r.main_kitchen)),1),t("td",Ce,s(o(r.line_total)),1)]))),128))]),T.value.length?(a(),n("tfoot",Le,[t("tr",Se,[e[26]||(e[26]=t("td",{class:"px-4 py-2 border border-gray-300 text-right"},"TOTAL RETAIL",-1)),t("td",Oe,s(o(O("main_store"))),1),t("td",De,s(o(O("chemical"))),1),t("td",Ee,s(o(O("stationary"))),1),t("td",Ue,s(o(O("marketing"))),1),t("td",je,s(o(O("main_kitchen"))),1),t("td",We,s(o(O("line_total"))),1)])])):u("",!0)])])])):u("",!0),p.value&&g.value&&R.value?(a(),n("div",Me,[e[34]||(e[34]=t("h2",{class:"text-xl font-bold mb-4 text-orange-800 flex items-center gap-2"},[t("i",{class:"fas fa-warehouse"}),h(" Warehouse Sales (Penjualan Antar Gudang) ")],-1)),t("div",Ne,[M.value?(a(),n("div",Ie,e[29]||(e[29]=[t("svg",{class:"animate-spin h-12 w-12 text-orange-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})],-1)]))):u("",!0),t("table",Ae,[e[33]||(e[33]=t("thead",null,[t("tr",{class:"bg-orange-300 text-gray-900"},[t("th",{class:"px-4 py-2 border border-gray-300"},"Customer"),t("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Main Store"),t("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Chemical"),t("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Stationary"),t("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Marketing"),t("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Main Kitchen"),t("th",{class:"px-4 py-2 border border-gray-300 text-right"},"Line Total")])],-1)),t("tbody",null,[L.value.length?u("",!0):(a(),n("tr",Fe,e[30]||(e[30]=[t("td",{colspan:"7",class:"text-center py-10 text-gray-400"},"Tidak ada data warehouse sales.",-1)]))),(a(!0),n(f,null,v(L.value,r=>(a(),n("tr",{key:"warehouse-"+r.customer},[t("td",$e,[h(s(r.customer)+" ",1),t("button",{onClick:b=>Z(r.customer),class:"ml-2 bg-gradient-to-br from-orange-400 to-orange-600 text-white rounded-full shadow-lg px-2 py-1 hover:scale-110 transition-all font-bold",title:"Lihat Detail"},e[31]||(e[31]=[t("i",{class:"fas fa-search-plus"},null,-1)]),8,Be)]),t("td",Pe,s(o(r.main_store)),1),t("td",qe,s(o(r.chemical)),1),t("td",ze,s(o(r.stationary)),1),t("td",Ge,s(o(r.marketing)),1),t("td",He,s(o(r.main_kitchen)),1),t("td",Ve,s(o(r.line_total)),1)]))),128))]),L.value.length?(a(),n("tfoot",Ke,[t("tr",Qe,[e[32]||(e[32]=t("td",{class:"px-4 py-2 border border-gray-300 text-right"},"TOTAL WAREHOUSE",-1)),t("td",Je,s(o(D("main_store"))),1),t("td",Ye,s(o(D("chemical"))),1),t("td",Ze,s(o(D("stationary"))),1),t("td",Xe,s(o(D("marketing"))),1),t("td",ts,s(o(D("main_kitchen"))),1),t("td",es,s(o(D("line_total"))),1)])])):u("",!0)])])])):u("",!0),j.value?(a(),n("div",ss,[t("div",rs,[t("button",{onClick:e[3]||(e[3]=r=>j.value=!1),class:"absolute top-3 right-4 text-2xl text-yellow-700 hover:text-red-500 font-bold"},"Ã—"),t("h2",ls,[e[35]||(e[35]=t("i",{class:"fas fa-list-alt"},null,-1)),h(" Detail Penjualan: "+s(d.value),1)]),t("div",os,[t("button",{onClick:J,disabled:m.value||Object.keys(x.value).length===0,class:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-md font-semibold hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},e[36]||(e[36]=[t("i",{class:"fas fa-file-excel mr-2"},null,-1),h(" Download Excel ")]),8,as),t("button",{onClick:Q,disabled:m.value||Object.keys(x.value).length===0,class:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-md font-semibold hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},e[37]||(e[37]=[t("i",{class:"fas fa-file-pdf mr-2"},null,-1),h(" Download PDF ")]),8,ns)]),m.value?(a(),n("div",is,e[38]||(e[38]=[t("i",{class:"fa fa-spinner fa-spin mr-2"},null,-1),h("Loading...")]))):Object.keys(x.value).length===0?(a(),n("div",ds,"Tidak ada data detail.")):(a(),n("div",us,[!d.value.includes("(Retail)")&&!d.value.includes("(Warehouse)")?(a(),n("div",cs,[(a(!0),n(f,null,v(x.value,(r,b)=>(a(),n("div",{key:b,class:"rounded-xl shadow bg-white/80 p-4 border-l-8 border-yellow-400 mb-4"},[t("div",ps,[e[39]||(e[39]=t("i",{class:"fa fa-folder-open"},null,-1)),h(" "+s(b.charAt(0).toUpperCase()+b.slice(1).replace("_"," ")),1)]),r.gr&&r.gr.length>0?(a(),n("div",gs,[e[42]||(e[42]=t("div",{class:"bg-blue-100 p-2 rounded-lg mb-2 border-l-4 border-blue-500"},[t("div",{class:"font-semibold text-blue-800 text-sm"},"GR (Good Receipt)")],-1)),t("table",bs,[e[41]||(e[41]=t("thead",null,[t("tr",{class:"text-blue-700"},[t("th",{class:"text-left py-1"},"Item"),t("th",{class:"text-left py-1"},"Category"),t("th",{class:"text-right py-1"},"Unit"),t("th",{class:"text-right py-1"},"Qty"),t("th",{class:"text-right py-1"},"Price"),t("th",{class:"text-right py-1"},"Total")])],-1)),t("tbody",null,[(a(!0),n(f,null,v(r.gr,i=>(a(),n("tr",{key:"gr-"+i.item_name,class:"border-b border-gray-200 hover:bg-gray-50"},[t("td",ys,s(i.item_name),1),t("td",hs,s(i.category),1),t("td",xs,s(i.unit),1),t("td",_s,s(i.received_qty),1),t("td",fs,s(o(i.price)),1),t("td",vs,s(o(i.subtotal)),1)]))),128))]),t("tfoot",null,[t("tr",ms,[e[40]||(e[40]=t("td",{colspan:"5",class:"text-right py-1"},"Total GR:",-1)),t("td",ks,s(o(r.gr.reduce((i,c)=>i+(Number(c.subtotal)||0),0))),1)])])])])):u("",!0),r.gr_supplier&&r.gr_supplier.length>0?(a(),n("div",ws,[e[45]||(e[45]=t("div",{class:"bg-green-100 p-2 rounded-lg mb-2 border-l-4 border-green-500"},[t("div",{class:"font-semibold text-green-800 text-sm"},"GR Supplier (Good Receive Outlet Supplier)")],-1)),t("table",Rs,[e[44]||(e[44]=t("thead",null,[t("tr",{class:"text-green-700"},[t("th",{class:"text-left py-1"},"Item"),t("th",{class:"text-left py-1"},"Category"),t("th",{class:"text-right py-1"},"Unit"),t("th",{class:"text-right py-1"},"Qty"),t("th",{class:"text-right py-1"},"Price"),t("th",{class:"text-right py-1"},"Total")])],-1)),t("tbody",null,[(a(!0),n(f,null,v(r.gr_supplier,i=>(a(),n("tr",{key:"gr-supplier-"+i.item_name,class:"border-b border-gray-200 hover:bg-gray-50"},[t("td",Ts,s(i.item_name),1),t("td",Cs,s(i.category),1),t("td",Ls,s(i.unit),1),t("td",Ss,s(i.received_qty),1),t("td",Os,s(o(i.price)),1),t("td",Ds,s(o(i.subtotal)),1)]))),128))]),t("tfoot",null,[t("tr",Es,[e[43]||(e[43]=t("td",{colspan:"5",class:"text-right py-1"},"Total GR Supplier:",-1)),t("td",Us,s(o(r.gr_supplier.reduce((i,c)=>i+(Number(c.subtotal)||0),0))),1)])])])])):u("",!0),r.retail_food&&r.retail_food.length>0?(a(),n("div",js,[e[48]||(e[48]=t("div",{class:"bg-purple-100 p-2 rounded-lg mb-2 border-l-4 border-purple-500"},[t("div",{class:"font-semibold text-purple-800 text-sm"},"Retail Food")],-1)),t("table",Ws,[e[47]||(e[47]=t("thead",null,[t("tr",{class:"text-purple-700"},[t("th",{class:"text-left py-1"},"Item"),t("th",{class:"text-left py-1"},"Category"),t("th",{class:"text-right py-1"},"Unit"),t("th",{class:"text-right py-1"},"Qty"),t("th",{class:"text-right py-1"},"Price"),t("th",{class:"text-right py-1"},"Total")])],-1)),t("tbody",null,[(a(!0),n(f,null,v(r.retail_food,i=>(a(),n("tr",{key:"rf-"+i.item_name,class:"border-b border-gray-200 hover:bg-gray-50"},[t("td",Ms,s(i.item_name),1),t("td",Ns,s(i.category),1),t("td",Is,s(i.unit),1),t("td",As,s(i.received_qty),1),t("td",Fs,s(o(i.price)),1),t("td",$s,s(o(i.subtotal)),1)]))),128))]),t("tfoot",null,[t("tr",Bs,[e[46]||(e[46]=t("td",{colspan:"5",class:"text-right py-1"},"Total Retail Food:",-1)),t("td",Ps,s(o(r.retail_food.reduce((i,c)=>i+(Number(c.subtotal)||0),0))),1)])])])])):u("",!0),t("div",qs,[t("table",zs,[t("tfoot",null,[t("tr",Gs,[t("td",Hs,"Total "+s(b.charAt(0).toUpperCase()+b.slice(1).replace("_"," "))+":",1),t("td",Vs,s(o(r.all.reduce((i,c)=>i+(Number(c.subtotal)||0),0))),1)])])])])]))),128))])):(a(),n("div",Ks,[(a(!0),n(f,null,v(x.value,(r,b)=>(a(),n("div",{key:b,class:F(["rounded-xl shadow bg-white/80 p-4 border-l-8",d.value.includes("(Retail)")?"border-purple-400":d.value.includes("(Warehouse)")?"border-orange-400":"border-yellow-400"])},[t("div",{class:F(["font-bold text-lg mb-2 flex items-center gap-2",d.value.includes("(Retail)")?"text-purple-700":d.value.includes("(Warehouse)")?"text-orange-700":"text-yellow-700"])},[e[49]||(e[49]=t("i",{class:"fa fa-folder-open"},null,-1)),h(" "+s(b),1)],2),t("table",Qs,[t("thead",null,[t("tr",{class:F(d.value.includes("(Retail)")?"text-purple-700":d.value.includes("(Warehouse)")?"text-orange-700":"text-yellow-700")},[e[50]||(e[50]=t("th",{class:"text-left py-1"},"Item",-1)),e[51]||(e[51]=t("th",{class:"text-right py-1"},"Qty",-1)),e[52]||(e[52]=t("th",{class:"text-right py-1"},"Unit",-1)),e[53]||(e[53]=t("th",{class:"text-right py-1"},"Harga",-1)),e[54]||(e[54]=t("th",{class:"text-right py-1"},"Subtotal",-1)),d.value.includes("(Retail)")||d.value.includes("(Warehouse)")?(a(),n("th",Js,"No. Sale")):u("",!0),d.value.includes("(Retail)")||d.value.includes("(Warehouse)")?(a(),n("th",Ys,"Tanggal")):u("",!0)],2)]),t("tbody",null,[(a(!0),n(f,null,v(r,i=>(a(),n("tr",{key:i.item_name},[t("td",Zs,s(i.item_name),1),t("td",Xs,[d.value.includes("(Warehouse)")?(a(),n("span",tr,[i.qty_small>0?(a(),n("div",er,"S: "+s(i.qty_small),1)):u("",!0),i.qty_medium>0?(a(),n("div",sr,"M: "+s(i.qty_medium),1)):u("",!0),i.qty_large>0?(a(),n("div",rr,"L: "+s(i.qty_large),1)):u("",!0)])):(a(),n("span",lr,s(d.value.includes("(Retail)")?i.qty:i.received_qty),1))]),t("td",or,s(i.unit),1),t("td",ar,s(o(i.price)),1),t("td",nr,s(o(d.value.includes("(Warehouse)")?i.total:i.subtotal)),1),d.value.includes("(Retail)")||d.value.includes("(Warehouse)")?(a(),n("td",ir,s(i.sale_number),1)):u("",!0),d.value.includes("(Retail)")||d.value.includes("(Warehouse)")?(a(),n("td",dr,s(new Date(i.sale_date).toLocaleDateString("id-ID")),1)):u("",!0)]))),128))]),t("tfoot",null,[t("tr",ur,[t("td",cr,"Total "+s(b)+":",1),t("td",pr,s(o(r.reduce((i,c)=>i+(Number(d.value.includes("(Warehouse)")?c.total:c.subtotal)||0),0))),1),d.value.includes("(Retail)")||d.value.includes("(Warehouse)")?(a(),n("td",gr)):u("",!0)])])])],2))),128))]))]))])])):u("",!0)])]),_:1}))}},Tr=nt(br,[["__scopeId","data-v-e89ffe50"]]);export{Tr as default};
