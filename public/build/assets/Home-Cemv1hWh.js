import{L as r,B as s,D as e,F as I,M as K,Y as ht,N as a,r as p,c as ve,w as it,a as st,j as Qo,E as i,l as u,G as c,O as Q,H as de,J as Ge,I as Te,Z as Zo,R as ks,x as Qe,Q as Le,W as qt,A as He,T as Ze,n as ol,V as rl,$ as Xo,b as en,C as tn,U as an,X as sn}from"./vendor-vue-g7iCcTkf.js";import{_ as $t}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as M}from"./vendor-utils-CpgP2uT4.js";import{S as v,u as rn}from"./app-DIuSMidk.js";import{N as _s}from"./vue-easy-lightbox.esm.min-H9agbAmC.js";import{A as ln}from"./AppLayout-BfEUsI4L.js";import"./vendor-charts-CuqD4wLC.js";import"./ProfileUpdateModal-CG_QM0dl.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const on={class:"relative w-40 h-40 rounded-full bg-gradient-to-br from-slate-50 to-slate-100 border-4 border-slate-200 shadow-2xl flex items-center justify-center backdrop-blur-sm"},nn={__name:"AnalogClock",props:{date:{type:Date,required:!0}},setup(C){const Ve=(te,le)=>te/le*360;return(te,le)=>(s(),r("div",on,[(s(),r(I,null,K(12,z=>e("div",{key:z,style:ht({position:"absolute",width:z%3===0?"2px":"1px",height:z%3===0?"14px":"6px",background:z%3===0?"#3b82f6":"#94a3b8",top:z%3===0?"10px":"14px",left:"50%",transform:`translateX(-50%) rotate(${z*30}deg)`,transformOrigin:"bottom center",borderRadius:"1px",zIndex:1})},null,4)),64)),(s(),r(I,null,K(12,z=>e("div",{key:`num-${z}`,style:ht({position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) rotate(${z*30}deg) translateY(-50px) rotate(${-z*30}deg)`,fontSize:"9px",fontWeight:"600",color:"#374151",textShadow:"0 1px 2px rgba(255, 255, 255, 0.8)",zIndex:2,pointerEvents:"none"})},a(z),5)),64)),e("div",{style:ht({position:"absolute",width:"4px",height:"35px",background:"linear-gradient(to bottom, #1e40af, #3b82f6)",top:"50%",left:"50%",transform:`translate(-50%, -100%) rotate(${Ve(C.date.getHours()%12,12)+C.date.getMinutes()/2}deg)`,transformOrigin:"bottom center",borderRadius:"2px",boxShadow:"0 2px 6px rgba(30, 64, 175, 0.4)",zIndex:5})},null,4),e("div",{style:ht({position:"absolute",width:"3px",height:"45px",background:"linear-gradient(to bottom, #059669, #10b981)",top:"50%",left:"50%",transform:`translate(-50%, -100%) rotate(${Ve(C.date.getMinutes(),60)}deg)`,transformOrigin:"bottom center",borderRadius:"2px",boxShadow:"0 2px 6px rgba(5, 150, 105, 0.4)",zIndex:6})},null,4),e("div",{style:ht({position:"absolute",width:"1px",height:"50px",background:"linear-gradient(to bottom, #dc2626, #ef4444)",top:"50%",left:"50%",transform:`translate(-50%, -100%) rotate(${Ve(C.date.getSeconds(),60)}deg)`,transformOrigin:"bottom center",borderRadius:"1px",boxShadow:"0 1px 3px rgba(220, 38, 38, 0.5)",zIndex:7})},null,4),le[0]||(le[0]=e("div",{class:"absolute w-4 h-4 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full shadow-lg border-2 border-white z-10 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},null,-1)),le[1]||(le[1]=e("div",{class:"absolute w-32 h-32 rounded-full border border-slate-200/30 z-0"},null,-1))]))}},dn=$t(nn,[["__scopeId","data-v-aca4dd86"]]),un={class:"flex items-center justify-between mb-4"},cn={class:"flex items-center gap-2"},gn={class:"grid grid-cols-7 gap-1 mb-2"},xn={class:"grid grid-cols-7 gap-1"},pn=["onClick"],mn={key:0,class:"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"},vn={key:1,class:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white shadow-sm"},fn={class:"flex items-center justify-between mb-2"},yn={key:1,class:"space-y-1"},bn=["onClick"],hn={class:"flex flex-col"},kn=["onClick"],_n={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},wn={class:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-visible relative",style:{"z-index":"100"}},Cn={class:"space-y-4"},Bn={class:"flex gap-2"},$n=["value"],Nn=["value"],Dn={class:"mb-3"},An={key:0,class:"mb-3"},Sn={class:"block text-xs font-medium text-slate-600 mb-1"},jn={value:""},Tn=["value"],Pn={class:"mb-2 text-xs text-gray-500"},Vn={key:0,class:"absolute top-full left-0 right-0 bg-white border border-slate-300 rounded-md shadow-lg z-50 max-h-60 overflow-y-auto"},En={key:0,class:"px-3 py-2 text-sm text-slate-500"},Rn={key:1},Mn=["onMousedown"],In={class:"flex items-center justify-between"},On={class:"flex-1"},Fn={class:"font-medium text-sm"},Ln={class:"text-xs text-slate-500"},qn={class:"text-xs text-slate-400"},Un={key:0,class:"text-blue-500 text-sm"},zn={key:1,class:"mt-2 flex flex-wrap gap-1"},Gn=["onClick"],Wn={key:1,class:"mt-2 text-xs text-slate-600"},Kn={class:"flex justify-end gap-2 mt-6"},Hn={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Jn={class:"bg-white rounded-lg p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto relative",style:{"z-index":"100"}},Yn={key:0,class:"space-y-4"},Qn={class:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-md text-slate-900"},Zn={class:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-md text-slate-900"},Xn={key:0},ei={class:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-md text-slate-900"},ti={key:1},ai={class:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-md text-slate-900 min-h-[60px]"},si={class:"pt-4 border-t border-slate-200"},ri={class:"text-sm text-slate-600 space-y-2"},li={class:"flex items-center gap-2"},oi={class:"text-slate-900 font-semibold"},ni={class:"flex items-center gap-2"},ii={class:"text-slate-900"},di={key:0,class:"flex items-center gap-2"},ui={class:"text-slate-900"},ci={class:"flex justify-end gap-2 mt-6"},gi={__name:"CalendarWidget",props:{isNight:{type:Boolean,default:!1}},setup(C){const Ve=p(new Date),te=p(null),le=p([]),z=p([]),ue=p(!1),J=p(!1),T=p(null),b=p({date:"",hour:"",minute:"",title:"",description:"",target_users:[]}),fe=p([]),we=p([]),ne=p([]),be=p([]);p("");const P=p("all"),D=p(null),N=p([]),j=p(!1),ee=p(""),O=p(!1),H=p(null),xe=["Min","Sen","Sel","Rab","Kam","Jum","Sab"],V=ve(()=>Ve.value.getFullYear()),Ce=ve(()=>Ve.value.getMonth()),De=ve(()=>{let k=fe.value;if(P.value!=="all"&&D.value)switch(P.value){case"divisi":k=fe.value.filter(m=>m.division_id==D.value);break;case"jabatan":k=fe.value.filter(m=>m.id_jabatan==D.value);break;case"outlet":k=fe.value.filter(m=>m.id_outlet==D.value);break}if(ee.value.trim()){const m=ee.value.toLowerCase();k=k.filter(d=>d.nama_lengkap.toLowerCase().includes(m)||d.divisi.toLowerCase().includes(m)||d.jabatan.toLowerCase().includes(m)||d.outlet.toLowerCase().includes(m))}return console.log("Filtered users:",{searchType:P.value,selectedFilter:D.value,userSearchQuery:ee.value,totalUsers:fe.value.length,filteredCount:k.length,sampleFiltered:k[0],allFilteredUsers:k}),k}),Ne=ve(()=>{switch(P.value){case"divisi":return ne.value;case"jabatan":return we.value;case"outlet":return be.value;default:return[]}}),Be=ve(()=>["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][Ce.value]),ie=ve(()=>{const k=V.value,m=Ce.value,d=new Date(k,m,1),ae=new Date(d);ae.setDate(ae.getDate()-d.getDay());const ye=[],Ae=new Date;for(let Ee=0;Ee<42;Ee++){const Oe=new Date(ae);Oe.setDate(ae.getDate()+Ee);const A=R(Oe),Me=Oe.getMonth()===m,Pe=Oe.toDateString()===Ae.toDateString(),ze=le.value.some(ot=>ot.tgl_libur===A),pt=z.value.some(ot=>ot.date===A);ye.push({key:`${k}-${m}-${Ee}`,date:Oe.getDate(),fullDate:Oe,isCurrentMonth:Me,isToday:Pe,isHoliday:ze,hasReminder:pt,isSelected:te.value&&Oe.toDateString()===te.value.toDateString()})}return ye}),Se=ve(()=>{if(!te.value)return null;const k=R(te.value);return le.value.find(m=>m.tgl_libur===k)}),ke=ve(()=>{if(!te.value)return[];const k=R(te.value);return z.value.filter(m=>m.date===k)}),R=k=>{const m=k.getFullYear(),d=String(k.getMonth()+1).padStart(2,"0"),ae=String(k.getDate()).padStart(2,"0");return`${m}-${d}-${ae}`},ge=k=>{const m=k.getHours(),d=k.getMinutes();return{hour:m,minute:d}},he=k=>{if(!k)return"";const[m,d]=k.split(":");return`${m}:${d}`},se=k=>{const m=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],d=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],ae=m[k.getDay()],ye=k.getDate(),Ae=d[k.getMonth()],Ee=k.getFullYear();return`${ae}, ${ye} ${Ae} ${Ee}`},W=k=>{te.value=k.fullDate},re=()=>{Ve.value=new Date(V.value,Ce.value-1,1)},L=()=>{Ve.value=new Date(V.value,Ce.value+1,1)},q=async()=>{try{const k=await M.get("/api/holidays");le.value=k.data}catch(k){console.error("Error fetching holidays:",k)}},_e=async()=>{try{const k=await M.get("/api/reminders");z.value=k.data}catch(k){console.error("Error fetching reminders:",k)}},Z=async()=>{var k,m;if(!b.value.title.trim()){alert("Judul reminder harus diisi");return}if(N.value.length===0){alert("Pilih minimal satu user untuk reminder");return}try{const d=b.value.hour!==""&&b.value.minute!==""?`${b.value.hour.toString().padStart(2,"0")}:${b.value.minute.toString().padStart(2,"0")}`:null,ae={date:b.value.date,time:d,title:b.value.title,description:b.value.description,target_users:N.value.map(Oe=>Oe.id)},ye=await M.post("/api/reminders",ae),Ae=(m=(k=window.Laravel)==null?void 0:k.user)==null?void 0:m.id;N.value.some(Oe=>Oe.id===Ae)&&z.value.push(ye.data);const Ee=ge(new Date);b.value={date:R(te.value),hour:Ee.hour,minute:Ee.minute,title:"",description:"",target_users:[]},N.value=[],ue.value=!1}catch(d){console.error("Error saving reminder:",d),alert("Gagal menyimpan reminder")}},F=k=>{const m=N.value.findIndex(d=>d.id===k.id);m>-1?N.value.splice(m,1):N.value.push(k)},w=k=>N.value.some(m=>m.id===k.id),ce=k=>{const m=N.value.findIndex(d=>d.id===k.id);m>-1&&N.value.splice(m,1)},E=()=>{setTimeout(()=>{O.value=!1},150)},g=k=>{H.value&&!H.value.contains(k.target)&&(O.value=!1)},h=k=>{T.value=k,J.value=!0},y=()=>{J.value=!1,T.value=null},n=k=>{if(!k)return"";const[m,d,ae]=k.split("-").map(Number);return new Date(m,d-1,ae).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},$=k=>k?new Date(k).toLocaleString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",f=async k=>{if(confirm("Yakin ingin menghapus reminder ini?"))try{await M.delete(`/api/reminders/${k}`),z.value=z.value.filter(m=>m.id!==k)}catch(m){console.error("Error deleting reminder:",m),alert("Gagal menghapus reminder")}},_=async()=>{j.value=!0;try{const k=await M.get("/api/users/data");fe.value=k.data.users,we.value=k.data.jabatans,ne.value=k.data.divisis,be.value=k.data.outlets,console.log("Users data loaded:",{users:fe.value.length,jabatans:we.value.length,divisis:ne.value.length,outlets:be.value.length,sampleUser:fe.value[0]})}catch(k){console.error("Error fetching users data:",k),fe.value=[],we.value=[],ne.value=[],be.value=[]}finally{j.value=!1}},Y=()=>{D.value=null};return it(N,k=>{console.log("Selected users changed:",k)},{deep:!0}),st(()=>{q(),_e(),_(),te.value=new Date,b.value.date=R(new Date);const k=ge(new Date);b.value.hour=k.hour,b.value.minute=k.minute,document.addEventListener("click",g)}),Qo(()=>{document.removeEventListener("click",g)}),it(te,k=>{k&&(b.value.date=R(k))}),(k,m)=>(s(),r(I,null,[e("div",{class:u(["backdrop-blur-sm rounded-lg shadow-lg border p-4",C.isNight?"bg-slate-800/95 border-slate-600/50":"bg-white/95 border-slate-200"])},[e("div",un,[e("h3",{class:u(["text-lg font-semibold",C.isNight?"text-white":"text-slate-700"])},"Kalender",2),e("div",cn,[e("button",{onClick:re,class:u(["p-1 rounded",C.isNight?"hover:bg-slate-700":"hover:bg-slate-100"])},[(s(),r("svg",{class:u(["w-4 h-4",C.isNight?"text-slate-300":"text-slate-600"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},m[13]||(m[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"},null,-1)]),2))],2),e("span",{class:u(["text-sm font-medium min-w-[120px] text-center",C.isNight?"text-slate-200":"text-slate-700"])},a(Be.value)+" "+a(V.value),3),e("button",{onClick:L,class:u(["p-1 rounded",C.isNight?"hover:bg-slate-700":"hover:bg-slate-100"])},[(s(),r("svg",{class:u(["w-4 h-4",C.isNight?"text-slate-300":"text-slate-600"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},m[14]||(m[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]),2))],2)])]),e("div",gn,[(s(),r(I,null,K(xe,d=>e("div",{key:d,class:u(["text-center text-xs font-medium py-1",C.isNight?"text-slate-400":"text-slate-500"])},a(d),3)),64))]),e("div",xn,[(s(!0),r(I,null,K(ie.value,d=>(s(),r("div",{key:d.key,onClick:ae=>W(d),class:u(["relative p-2 text-center text-sm cursor-pointer rounded transition-colors",d.isCurrentMonth?C.isNight?"text-slate-200":"text-slate-700":C.isNight?"text-slate-500":"text-slate-400",d.isToday?C.isNight?"bg-blue-600 text-white font-semibold":"bg-blue-100 text-blue-700 font-semibold":"",d.isSelected?"bg-blue-500 text-white":"",d.isHoliday?C.isNight?"bg-red-600 text-white":"bg-red-100 text-red-700":"",d.hasReminder&&!d.isToday&&!d.isSelected&&!d.isHoliday?C.isNight?"bg-green-600 border-2 border-green-400 text-white font-medium":"bg-green-50 border-2 border-green-300 text-green-700 font-medium":"",d.isCurrentMonth&&!d.isToday&&!d.isSelected&&!d.isHoliday&&!d.hasReminder?C.isNight?"hover:bg-slate-700":"hover:bg-slate-100":""])},[c(a(d.date)+" ",1),d.isHoliday?(s(),r("div",mn)):i("",!0),d.hasReminder?(s(),r("div",vn)):i("",!0)],10,pn))),128))]),te.value?(s(),r("div",{key:0,class:u(["mt-4 p-3 rounded-lg",C.isNight?"bg-slate-700/50":"bg-slate-50"])},[e("div",fn,[e("h4",{class:u(["font-medium",C.isNight?"text-slate-200":"text-slate-700"])},a(se(te.value)),3),e("button",{onClick:m[0]||(m[0]=d=>ue.value=!0),class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600"}," + Reminder ")]),Se.value?(s(),r("div",{key:0,class:u(["mb-2 p-2 rounded text-sm",C.isNight?"bg-red-600/20 text-red-300":"bg-red-100 text-red-700"])},[m[15]||(m[15]=e("strong",null,"Hari Libur:",-1)),c(" "+a(Se.value.keterangan),1)],2)):i("",!0),ke.value.length>0?(s(),r("div",yn,[(s(!0),r(I,null,K(ke.value,d=>(s(),r("div",{key:d.id,onClick:ae=>h(d),class:u(["flex items-center justify-between p-2 rounded text-sm cursor-pointer transition-colors",C.isNight?"bg-blue-600/20 hover:bg-blue-600/30":"bg-blue-50 hover:bg-blue-100"])},[e("div",hn,[e("span",{class:u(["font-medium",C.isNight?"text-blue-300":"text-blue-700"])},a(d.title),3),d.time?(s(),r("span",{key:0,class:u(["text-xs",C.isNight?"text-blue-400":"text-blue-600"])},a(he(d.time)),3)):i("",!0),d.created_by_name?(s(),r("span",{key:1,class:u(["text-xs",(C.isNight,"text-blue-500")])}," Oleh: "+a(d.created_by_name),3)):i("",!0)]),e("button",{onClick:Q(ae=>f(d.id),["stop"]),class:"text-red-500 hover:text-red-700"},m[16]||(m[16]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,kn)],10,bn))),128))])):i("",!0)],2)):i("",!0)],2),ue.value?(s(),r("div",_n,[e("div",wn,[m[27]||(m[27]=e("h3",{class:"text-lg font-semibold mb-4"},"Tambah Reminder",-1)),e("div",Cn,[e("div",null,[m[17]||(m[17]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"Tanggal",-1)),de(e("input",{"onUpdate:modelValue":m[1]||(m[1]=d=>b.value.date=d),type:"date",class:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Ge,b.value.date]])]),e("div",null,[m[21]||(m[21]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"Waktu (24 Jam)",-1)),e("div",Bn,[de(e("select",{"onUpdate:modelValue":m[2]||(m[2]=d=>b.value.hour=d),class:"flex-1 px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[m[18]||(m[18]=e("option",{value:""},"--",-1)),(s(),r(I,null,K(24,d=>e("option",{key:d,value:d-1},a(String(d-1).padStart(2,"0")),9,$n)),64))],512),[[Te,b.value.hour]]),m[20]||(m[20]=e("span",{class:"flex items-center text-slate-500"},":",-1)),de(e("select",{"onUpdate:modelValue":m[3]||(m[3]=d=>b.value.minute=d),class:"flex-1 px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[m[19]||(m[19]=e("option",{value:""},"--",-1)),(s(),r(I,null,K(60,d=>e("option",{key:d,value:d-1},a(String(d-1).padStart(2,"0")),9,Nn)),64))],512),[[Te,b.value.minute]])])]),e("div",null,[m[22]||(m[22]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"Judul",-1)),de(e("input",{"onUpdate:modelValue":m[4]||(m[4]=d=>b.value.title=d),type:"text",placeholder:"Masukkan judul reminder",class:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Ge,b.value.title]])]),e("div",null,[m[23]||(m[23]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"Deskripsi",-1)),de(e("textarea",{"onUpdate:modelValue":m[5]||(m[5]=d=>b.value.description=d),rows:"3",placeholder:"Masukkan deskripsi (opsional)",class:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Ge,b.value.description]])]),e("div",null,[m[26]||(m[26]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Untuk Siapa?",-1)),e("div",Dn,[m[25]||(m[25]=e("label",{class:"block text-xs font-medium text-slate-600 mb-1"},"Cari berdasarkan:",-1)),de(e("select",{"onUpdate:modelValue":m[6]||(m[6]=d=>P.value=d),onChange:Y,class:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},m[24]||(m[24]=[e("option",{value:"all"},"Semua User",-1),e("option",{value:"divisi"},"Divisi",-1),e("option",{value:"jabatan"},"Jabatan",-1),e("option",{value:"outlet"},"Outlet",-1)]),544),[[Te,P.value]])]),P.value!=="all"?(s(),r("div",An,[e("label",Sn," Pilih "+a(P.value.charAt(0).toUpperCase()+P.value.slice(1))+": ",1),de(e("select",{"onUpdate:modelValue":m[7]||(m[7]=d=>D.value=d),class:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},[e("option",jn,"-- Pilih "+a(P.value.charAt(0).toUpperCase()+P.value.slice(1))+" --",1),(s(!0),r(I,null,K(Ne.value,d=>(s(),r("option",{key:d.id,value:d.id},a(d.name),9,Tn))),128))],512),[[Te,D.value]])])):i("",!0),e("div",Pn," Debug: "+a(De.value.length)+" users available ",1),e("div",{class:"relative",ref_key:"userSelectorRef",ref:H},[de(e("input",{"onUpdate:modelValue":m[8]||(m[8]=d=>ee.value=d),type:"text",placeholder:"Cari user...",class:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",onFocus:m[9]||(m[9]=d=>O.value=!0),onBlur:E,onKeydown:m[10]||(m[10]=Zo(d=>O.value=!1,["escape"]))},null,544),[[Ge,ee.value]]),O.value?(s(),r("div",Vn,[De.value.length===0?(s(),r("div",En," Tidak ada user ditemukan ")):(s(),r("div",Rn,[(s(!0),r(I,null,K(De.value,d=>(s(),r("div",{key:d.id,onMousedown:Q(ae=>F(d),["prevent"]),class:u(["px-3 py-2 hover:bg-slate-50 cursor-pointer border-b border-slate-100 last:border-b-0",{"bg-blue-50":w(d)}])},[e("div",In,[e("div",On,[e("div",Fn,a(d.nama_lengkap),1),e("div",Ln,a(d.divisi)+" - "+a(d.jabatan),1),e("div",qn,a(d.outlet),1)]),w(d)?(s(),r("div",Un," ✓ ")):i("",!0)])],42,Mn))),128))]))])):i("",!0),N.value.length>0?(s(),r("div",zn,[(s(!0),r(I,null,K(N.value,d=>(s(),r("div",{key:d.id,class:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs flex items-center gap-1"},[e("span",null,a(d.nama_lengkap),1),e("button",{onClick:ae=>ce(d),class:"text-blue-600 hover:text-blue-800 font-bold"}," × ",8,Gn)]))),128))])):i("",!0)],512),N.value.length>0?(s(),r("div",Wn,a(N.value.length)+" user dipilih ",1)):i("",!0)])]),e("div",Kn,[e("button",{onClick:m[11]||(m[11]=d=>ue.value=!1),class:"px-4 py-2 text-slate-600 border border-slate-300 rounded-md hover:bg-slate-50"}," Batal "),e("button",{onClick:Z,class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600"}," Simpan ")])])])):i("",!0),J.value?(s(),r("div",Hn,[e("div",Jn,[e("div",{class:"flex items-center justify-between mb-4"},[m[29]||(m[29]=e("h3",{class:"text-lg font-semibold"},"Detail Reminder",-1)),e("button",{onClick:y,class:"text-gray-500 hover:text-gray-700"},m[28]||(m[28]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),T.value?(s(),r("div",Yn,[e("div",null,[m[30]||(m[30]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"Judul",-1)),e("div",Qn,a(T.value.title),1)]),e("div",null,[m[31]||(m[31]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"Tanggal",-1)),e("div",Zn,a(n(T.value.date)),1)]),T.value.time?(s(),r("div",Xn,[m[32]||(m[32]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"Waktu",-1)),e("div",ei,a(he(T.value.time)),1)])):i("",!0),T.value.description?(s(),r("div",ti,[m[33]||(m[33]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"Deskripsi",-1)),e("div",ai,a(T.value.description),1)])):i("",!0),e("div",si,[e("div",ri,[e("div",li,[m[34]||(m[34]=e("svg",{class:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),m[35]||(m[35]=e("span",{class:"font-medium"},"Dibuat oleh:",-1)),e("span",oi,a(T.value.created_by_name||"Unknown"),1)]),e("div",ni,[m[36]||(m[36]=e("svg",{class:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),m[37]||(m[37]=e("span",{class:"font-medium"},"Tanggal dibuat:",-1)),e("span",ii,a($(T.value.created_at)),1)]),T.value.created_by_email?(s(),r("div",di,[m[38]||(m[38]=e("svg",{class:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),m[39]||(m[39]=e("span",{class:"font-medium"},"Email:",-1)),e("span",ui,a(T.value.created_by_email),1)])):i("",!0)])])])):i("",!0),e("div",ci,[e("button",{onClick:y,class:"px-4 py-2 text-slate-600 border border-slate-300 rounded-md hover:bg-slate-50 transition-colors"}," Tutup "),T.value?(s(),r("button",{key:0,onClick:m[12]||(m[12]=d=>{f(T.value.id),y()}),class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors"}," Hapus ")):i("",!0)])])])):i("",!0)],64))}},xi={class:"flex items-center justify-between mb-4"},pi={class:"flex-1 overflow-y-auto space-y-3 max-h-80"},mi=["onClick"],vi={class:"flex items-start justify-between mb-2"},fi=["onClick"],yi={key:0,class:"flex flex-wrap gap-1 mb-2"},bi={key:0,class:"flex items-center gap-1"},hi=["src","onClick"],ki={key:1,class:"flex items-center gap-1"},_i={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},wi={key:0,class:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10 rounded-lg"},Ci={class:"space-y-4"},Bi={class:"flex gap-2 mb-3"},$i={class:"flex items-center gap-2 bg-blue-50 text-blue-700 px-3 py-2 rounded-md cursor-pointer hover:bg-blue-100 transition-colors"},Ni={key:0,class:"space-y-2"},Di={class:"flex items-center gap-2"},Ai={key:0,class:"relative"},Si=["src","onClick"],ji={key:1,class:"w-4 h-4 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ti={class:"text-sm text-slate-700"},Pi={class:"text-xs text-slate-500"},Vi=["onClick"],Ei={class:"flex justify-end gap-2 mt-6"},Ri=["disabled"],Mi=["disabled"],Ii={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},Oi={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Fi={class:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4"},Li={class:"space-y-4"},qi={class:"relative"},Ui={class:"relative max-w-4xl max-h-full p-4"},zi=["src"],Gi={class:"flex items-center justify-between mb-4"},Wi={class:"text-lg font-semibold text-slate-800"},Ki={class:"space-y-4"},Hi={class:"bg-slate-50 rounded-lg p-4 text-sm text-slate-800 whitespace-pre-wrap"},Ji={key:0},Yi={class:"grid grid-cols-2 md:grid-cols-3 gap-3"},Qi={key:0,class:"text-center"},Zi=["src","onClick"],Xi={class:"text-xs text-slate-600 truncate"},ed={key:1,class:"text-center"},td={class:"text-xs text-slate-600 truncate"},ad={class:"text-xs text-slate-500"},sd={class:"text-xs text-slate-500 pt-2 border-t border-slate-200"},rd={__name:"NotesWidget",props:{isNight:{type:Boolean,default:!1}},setup(C){const Ve=p([]),te=p(!1),le=p(!1),z=p([]),ue=p(null),J=p(null),T=p(null),b=p("back");p([]);const fe=p(!1),we=p(null),ne=p(!1),be=p(!1),P=p(null),D=p({title:"",content:"",attachments:[]}),N=async()=>{try{const se=await M.get("/api/notes");Ve.value=se.data}catch(se){console.error("Error fetching notes:",se)}},j=async()=>{if(!D.value.title.trim()){alert("Title is required");return}ne.value=!0;try{const se=new FormData;se.append("title",D.value.title),se.append("content",D.value.content),z.value.forEach((re,L)=>{se.append(`attachments[${L}]`,re)});const W=await M.post("/api/notes",se,{headers:{"Content-Type":"multipart/form-data"}});Ve.value.unshift(W.data),D.value={title:"",content:"",attachments:[]},z.value=[],te.value=!1}catch(se){console.error("Error saving note:",se),alert("Failed to save note")}finally{ne.value=!1}},ee=async se=>{if((await v.fire({title:"Hapus Notes?",text:"Apakah Anda yakin ingin menghapus notes ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal",reverseButtons:!0})).isConfirmed)try{await M.delete(`/api/notes/${se}`),Ve.value=Ve.value.filter(re=>re.id!==se),v.fire({title:"Berhasil!",text:"Notes berhasil dihapus.",icon:"success",timer:2e3,showConfirmButton:!1})}catch(re){console.error("Error deleting note:",re),v.fire({title:"Error!",text:"Gagal menghapus notes.",icon:"error",confirmButtonText:"OK"})}},O=se=>{const W=Array.from(se.target.files),re=[];W.forEach(L=>{if(L.type.startsWith("image/")){const q=new FileReader;q.onload=_e=>{if(L.thumbnail=_e.target.result,re.push(L),re.length===W.filter(Z=>Z.type.startsWith("image/")).length){const Z=W.map(F=>F.type.startsWith("image/")&&!F.thumbnail&&re.find(w=>w.name===F.name)||F);z.value.push(...Z)}},q.onerror=_e=>{if(console.error("Error creating thumbnail:",_e),re.push(L),re.length===W.filter(Z=>Z.type.startsWith("image/")).length){const Z=W.map(F=>F.type.startsWith("image/")&&!F.thumbnail&&re.find(w=>w.name===F.name)||F);z.value.push(...Z)}},q.readAsDataURL(L)}else re.push(L)}),W.filter(L=>L.type.startsWith("image/")).length===0&&z.value.push(...W)},H=se=>{z.value.splice(se,1)},xe=se=>{if(se===0)return"0 Bytes";const W=1024,re=["Bytes","KB","MB","GB"],L=Math.floor(Math.log(se)/Math.log(W));return parseFloat((se/Math.pow(W,L)).toFixed(2))+" "+re[L]},V=se=>new Date(se).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),Ce=()=>{le.value=!0},De=async()=>{try{T.value&&T.value.getTracks().forEach(W=>W.stop());const se={video:{width:{ideal:1280},height:{ideal:720},facingMode:b.value==="front"?"user":"environment"}};T.value=await navigator.mediaDevices.getUserMedia(se),ue.value.srcObject=T.value}catch(se){console.error("Error accessing camera:",se),alert("Unable to access camera")}},Ne=async()=>{b.value=b.value==="front"?"back":"front",await De()},Be=()=>{const se=ue.value,W=J.value,re=W.getContext("2d");W.width=se.videoWidth,W.height=se.videoHeight,re.drawImage(se,0,0),W.toBlob(L=>{const q=new File([L],`camera-capture-${Date.now()}.jpg`,{type:"image/jpeg"}),_e=new FileReader;_e.onload=Z=>{q.thumbnail=Z.target.result,z.value.push(q)},_e.onerror=Z=>{console.error("Error creating thumbnail:",Z),z.value.push(q)},_e.readAsDataURL(L),ie()},"image/jpeg",.8)},ie=()=>{T.value&&(T.value.getTracks().forEach(se=>se.stop()),T.value=null),le.value=!1},Se=se=>{we.value=se,fe.value=!0},ke=()=>{fe.value=!1,we.value=null},R=se=>{P.value=se,be.value=!0},ge=()=>{be.value=!1,P.value=null},he=se=>{if(se.thumbnail)return se.thumbnail;try{if(window.URL&&window.URL.createObjectURL)return window.URL.createObjectURL(se)}catch(W){console.error("Error creating object URL:",W)}return""};return st(()=>{N();const se=W=>{fe.value&&W.key==="Escape"&&ke()};return document.addEventListener("keydown",se),()=>{document.removeEventListener("keydown",se)}}),(se,W)=>(s(),r(I,null,[e("div",{class:u(["backdrop-blur-sm rounded-lg shadow-lg border p-4 h-full flex flex-col",C.isNight?"bg-slate-800/95 border-slate-600/50":"bg-white/95 border-slate-200"])},[e("div",xi,[e("h3",{class:u(["text-lg font-semibold",C.isNight?"text-white":"text-slate-700"])},"Notes",2),e("button",{onClick:W[0]||(W[0]=re=>te.value=!0),class:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm hover:bg-blue-600 transition-colors"}," + Add Note ")]),e("div",pi,[(s(!0),r(I,null,K(Ve.value,re=>(s(),r("div",{key:re.id,onClick:L=>R(re),class:u(["rounded-lg p-3 border transition-colors cursor-pointer",C.isNight?"bg-slate-700/50 border-slate-600/50 hover:bg-slate-600/50":"bg-slate-50 border-slate-200 hover:bg-slate-100"])},[e("div",vi,[e("h4",{class:u(["font-medium text-sm",C.isNight?"text-slate-200":"text-slate-800"])},a(re.title),3),e("button",{onClick:Q(L=>ee(re.id),["stop"]),class:"text-red-500 hover:text-red-700 text-xs"},W[6]||(W[6]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,fi)]),e("p",{class:u(["text-xs mb-2 line-clamp-1",C.isNight?"text-slate-300":"text-slate-600"])},a(re.content),3),re.attachments&&re.attachments.length>0?(s(),r("div",yi,[(s(!0),r(I,null,K(re.attachments,L=>(s(),r("div",{key:L.id,class:u(["flex items-center gap-1 px-2 py-1 rounded text-xs",C.isNight?"bg-blue-600/20 text-blue-300":"bg-blue-100 text-blue-700"])},[L.mime_type&&L.mime_type.startsWith("image/")?(s(),r("div",bi,[e("img",{src:`/storage/${L.file_path}`,onClick:q=>Se(`/storage/${L.file_path}`),class:"w-6 h-6 object-cover rounded cursor-pointer hover:opacity-80 transition-opacity",alt:"Attachment thumbnail"},null,8,hi)])):(s(),r("div",ki,W[7]||(W[7]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)])))],2))),128))])):i("",!0),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},a(V(re.created_at)),3)],10,mi))),128)),Ve.value.length===0?(s(),r("div",{key:0,class:u(["text-center text-sm py-8",C.isNight?"text-slate-400":"text-slate-500"])},' No notes yet. Click "Add Note" to create your first note. ',2)):i("",!0)])],2),te.value?(s(),r("div",_i,[e("div",{class:u(["bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto relative",{"pointer-events-none":ne.value}])},[ne.value?(s(),r("div",wi,W[8]||(W[8]=[ks('<div class="flex flex-col items-center gap-2" data-v-1603c564><svg class="animate-spin h-8 w-8 text-blue-500" fill="none" viewBox="0 0 24 24" data-v-1603c564><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-1603c564></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-1603c564></path></svg><span class="text-sm text-slate-600" data-v-1603c564>Saving note...</span></div>',1)]))):i("",!0),W[18]||(W[18]=e("h3",{class:"text-lg font-semibold mb-4"},"Add New Note",-1)),e("div",Ci,[e("div",null,[W[9]||(W[9]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"Title",-1)),de(e("input",{"onUpdate:modelValue":W[1]||(W[1]=re=>D.value.title=re),type:"text",placeholder:"Enter note title",class:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Ge,D.value.title]])]),e("div",null,[W[10]||(W[10]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"Content",-1)),de(e("textarea",{"onUpdate:modelValue":W[2]||(W[2]=re=>D.value.content=re),rows:"4",placeholder:"Enter note content",class:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Ge,D.value.content]])]),e("div",null,[W[16]||(W[16]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Attachments",-1)),e("div",Bi,[e("label",$i,[W[11]||(W[11]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),W[12]||(W[12]=c(" Upload File ")),e("input",{type:"file",onChange:O,multiple:"",accept:"image/*,.pdf,.doc,.docx,.txt",class:"hidden"},null,32)]),e("button",{onClick:Ce,class:"flex items-center gap-2 bg-green-50 text-green-700 px-3 py-2 rounded-md hover:bg-green-100 transition-colors"},W[13]||(W[13]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),c(" Camera ")]))]),z.value.length>0?(s(),r("div",Ni,[(s(!0),r(I,null,K(z.value,(re,L)=>(s(),r("div",{key:L,class:"flex items-center justify-between bg-slate-50 p-2 rounded"},[e("div",Di,[re.type.startsWith("image/")?(s(),r("div",Ai,[e("img",{src:he(re),onClick:q=>Se(he(re)),class:"w-8 h-8 object-cover rounded cursor-pointer hover:opacity-80 transition-opacity",alt:"Thumbnail"},null,8,Si)])):(s(),r("svg",ji,W[14]||(W[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)]))),e("span",Ti,a(re.name),1),e("span",Pi,"("+a(xe(re.size))+")",1)]),e("button",{onClick:q=>H(L),class:"text-red-500 hover:text-red-700"},W[15]||(W[15]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Vi)]))),128))])):i("",!0)])]),e("div",Ei,[e("button",{onClick:W[3]||(W[3]=re=>te.value=!1),disabled:ne.value,class:"px-4 py-2 text-slate-600 border border-slate-300 rounded-md hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,Ri),e("button",{onClick:j,disabled:ne.value,class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[ne.value?(s(),r("svg",Ii,W[17]||(W[17]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):i("",!0),c(" "+a(ne.value?"Saving...":"Save Note"),1)],8,Mi)])],2)])):i("",!0),le.value?(s(),r("div",Oi,[e("div",Fi,[W[19]||(W[19]=e("h3",{class:"text-lg font-semibold mb-4"},"Capture from Camera",-1)),e("div",Li,[e("div",qi,[e("video",{ref_key:"videoRef",ref:ue,autoplay:"",class:"w-full h-64 bg-slate-100 rounded-md"},null,512),e("canvas",{ref_key:"canvasRef",ref:J,class:"hidden"},null,512)]),e("div",{class:"flex justify-center gap-2"},[e("button",{onClick:De,class:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600"}," Start Camera "),e("button",{onClick:Ne,class:"px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600"}," Switch Camera "),e("button",{onClick:Be,class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600"}," Capture "),e("button",{onClick:ie,class:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600"}," Close ")])])])])):i("",!0),fe.value?(s(),r("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",onClick:ke},[e("div",Ui,[e("button",{onClick:ke,class:"absolute top-2 right-2 text-white text-2xl hover:text-gray-300 z-10"},W[20]||(W[20]=[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),e("img",{src:we.value,class:"max-w-full max-h-full object-contain rounded-lg",onClick:W[4]||(W[4]=Q(()=>{},["stop"])),alt:"Full size image"},null,8,zi)])])):i("",!0),be.value&&P.value?(s(),r("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:ge},[e("div",{class:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",onClick:W[5]||(W[5]=Q(()=>{},["stop"]))},[e("div",Gi,[e("h3",Wi,a(P.value.title),1),e("button",{onClick:ge,class:"text-slate-500 hover:text-slate-700"},W[21]||(W[21]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Ki,[e("div",null,[W[22]||(W[22]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Content",-1)),e("div",Hi,a(P.value.content||"No content"),1)]),P.value.attachments&&P.value.attachments.length>0?(s(),r("div",Ji,[W[24]||(W[24]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Attachments",-1)),e("div",Yi,[(s(!0),r(I,null,K(P.value.attachments,re=>(s(),r("div",{key:re.id,class:"bg-slate-50 rounded-lg p-3 border border-slate-200"},[re.mime_type&&re.mime_type.startsWith("image/")?(s(),r("div",Qi,[e("img",{src:`/storage/${re.file_path}`,onClick:L=>Se(`/storage/${re.file_path}`),class:"w-full h-24 object-cover rounded cursor-pointer hover:opacity-80 transition-opacity mb-2",alt:"Attachment"},null,8,Zi),e("p",Xi,a(re.original_name),1)])):(s(),r("div",ed,[W[23]||(W[23]=e("div",{class:"w-full h-24 bg-slate-200 rounded flex items-center justify-center mb-2"},[e("svg",{class:"w-8 h-8 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("p",td,a(re.original_name),1),e("p",ad,a(xe(re.file_size)),1)]))]))),128))])])):i("",!0),e("div",sd," Created: "+a(V(P.value.created_at)),1)])])])):i("",!0)],64))}},ld=$t(rd,[["__scopeId","data-v-1603c564"]]),od={class:"flex items-center justify-between mb-4"},nd={class:"flex items-center gap-2"},id={key:0,class:"relative"},dd={key:0,class:"flex items-center justify-center py-8"},ud={key:1,class:"space-y-3"},cd={class:"relative"},gd=["onClick"],xd=["src","alt"],pd=["onClick"],md={key:2,class:"absolute -top-1 -right-1 w-6 h-6 bg-pink-500 rounded-full flex items-center justify-center border-2 border-white"},vd={class:"flex-1 min-w-0"},fd={key:0,class:"flex items-center gap-1"},yd={key:1},bd={key:0,class:"text-right"},hd={class:"text-lg font-bold text-pink-600"},kd={key:2,class:"text-center py-8"},_d={key:3,class:"absolute inset-0 pointer-events-none overflow-hidden rounded-2xl"},wd={__name:"BirthdayWidget",props:{isNight:{type:Boolean,default:!1}},setup(C){const Ve=p([]),te=p(!0),le=p(!1),z=p(0),ue=p([]),J=ve(()=>Ve.value.some(P=>b(P.birthday))),T=P=>P.split(" ").map(D=>D.charAt(0)).join("").toUpperCase().slice(0,2),b=P=>{const D=new Date,N=new Date(P);return N.getMonth()===D.getMonth()&&N.getDate()===D.getDate()},fe=P=>{const D=new Date(P),N=new Date,j=N.getFullYear(),ee=new Date(j,D.getMonth(),D.getDate());ee<N&&ee.setFullYear(j+1);const O=ee-N,H=Math.ceil(O/(1e3*60*60*24));return H===1?"Besok":H<=7?`${H} hari lagi`:D.toLocaleDateString("id-ID",{day:"numeric",month:"long"})},we=P=>{const D=new Date,N=new Date(P);let j=D.getFullYear()-N.getFullYear();const ee=D.getMonth()-N.getMonth();return(ee<0||ee===0&&D.getDate()<N.getDate())&&j--,j},ne=(P,D="")=>{P?(ue.value=[P],z.value=0,le.value=!0):console.log(`No avatar for ${D}`)},be=async()=>{try{te.value=!0;const P=await M.get("/api/birthdays");Ve.value=P.data}catch(P){console.error("Error fetching birthdays:",P),Ve.value=[]}finally{te.value=!1}};return st(()=>{be()}),(P,D)=>(s(),r(I,null,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 hover:shadow-3xl w-full",C.isNight?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",od,[e("div",nd,[e("div",{class:u(["w-8 h-8 rounded-full flex items-center justify-center",C.isNight?"bg-pink-500/20":"bg-pink-100"])},D[1]||(D[1]=[e("i",{class:"fas fa-birthday-cake text-pink-500 text-sm"},null,-1)]),2),e("h3",{class:u(["text-lg font-bold",C.isNight?"text-white":"text-slate-800"])}," Ulang Tahun ",2)]),J.value?(s(),r("div",id,D[2]||(D[2]=[e("div",{class:"w-3 h-3 bg-pink-500 rounded-full animate-pulse"},null,-1),e("div",{class:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full animate-ping opacity-75"},null,-1)]))):i("",!0)]),te.value?(s(),r("div",dd,D[3]||(D[3]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-500"},null,-1)]))):Ve.value.length>0?(s(),r("div",ud,[(s(!0),r(I,null,K(Ve.value,(N,j)=>{var ee,O;return s(),r("div",{key:N.id,class:u(["flex items-center gap-3 p-3 rounded-xl transition-all duration-300 hover:scale-105",[b(N.birthday)?"bg-gradient-to-r from-pink-500/20 to-purple-500/20 border border-pink-300/50 shadow-lg":C.isNight?"bg-slate-700/50 hover:bg-slate-600/50":"bg-slate-50 hover:bg-slate-100"]])},[e("div",cd,[N.avatar?(s(),r("div",{key:0,class:u(["w-12 h-12 rounded-full overflow-hidden border-2 cursor-pointer hover:scale-105 transition-transform duration-200",b(N.birthday)?"border-pink-400":"border-slate-300"]),onClick:H=>ne(`/storage/${N.avatar}`)},[e("img",{src:`/storage/${N.avatar}`,alt:N.nama_lengkap,class:"w-full h-full object-cover hover:opacity-90 transition-opacity"},null,8,xd)],10,gd)):(s(),r("div",{key:1,class:u(["w-12 h-12 rounded-full flex items-center justify-center text-white text-lg font-bold border-2 cursor-pointer hover:scale-105 transition-transform duration-200",[b(N.birthday)?"bg-gradient-to-br from-pink-500 to-purple-600 border-pink-400":"bg-gradient-to-br from-indigo-500 to-purple-600 border-slate-300"]]),onClick:H=>ne(null,N.nama_lengkap)},a(T(N.nama_lengkap)),11,pd)),b(N.birthday)?(s(),r("div",md,D[4]||(D[4]=[e("i",{class:"fas fa-birthday-cake text-white text-xs"},null,-1)]))):i("",!0)]),e("div",vd,[e("div",{class:u(["font-semibold text-sm truncate",b(N.birthday)?"text-pink-800":C.isNight?"text-white":"text-slate-800"])},a(N.nama_lengkap),3),e("div",{class:u(["text-xs",b(N.birthday)?"text-pink-600":C.isNight?"text-slate-300":"text-slate-600"])},a(((ee=N.jabatan)==null?void 0:ee.nama_jabatan)||"N/A"),3),e("div",{class:u(["text-xs mt-1",b(N.birthday)?"text-pink-500":C.isNight?"text-slate-400":"text-slate-500"])},[D[5]||(D[5]=e("i",{class:"fas fa-building mr-1"},null,-1)),c(" "+a(((O=N.outlet)==null?void 0:O.nama_outlet)||"N/A"),1)],2),e("div",{class:u(["text-xs font-medium mt-1",b(N.birthday)?"text-pink-700":C.isNight?"text-slate-400":"text-slate-500"])},[b(N.birthday)?(s(),r("span",fd,D[6]||(D[6]=[e("i",{class:"fas fa-birthday-cake text-pink-500"},null,-1),e("span",{class:"text-pink-600 font-bold"},"Hari ini!",-1)]))):(s(),r("span",yd,a(fe(N.birthday)),1))],2)]),b(N.birthday)?(s(),r("div",bd,[e("div",hd,a(we(N.birthday)),1),D[7]||(D[7]=e("div",{class:"text-xs text-pink-500"},"tahun",-1))])):i("",!0)],2)}),128))])):(s(),r("div",kd,[e("div",{class:u(["w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",C.isNight?"bg-slate-700/50":"bg-slate-100"])},[e("i",{class:u(["fas fa-birthday-cake text-2xl",C.isNight?"text-slate-400":"text-slate-500"])},null,2)],2),e("div",{class:u(["text-sm",C.isNight?"text-slate-400":"text-slate-500"])}," Tidak ada ulang tahun dalam 30 hari ke depan ",2)])),J.value?(s(),r("div",_d,[(s(),r(I,null,K(20,N=>e("div",{key:N,class:"absolute animate-bounce",style:ht({left:Math.random()*100+"%",top:Math.random()*100+"%",animationDelay:Math.random()*2+"s",animationDuration:Math.random()*2+1+"s"})},D[8]||(D[8]=[e("i",{class:"fas fa-birthday-cake text-pink-400 text-lg opacity-70"},null,-1)]),4)),64))])):i("",!0)],2),Qe(Le(_s),{visible:le.value,imgs:ue.value,index:z.value,onHide:D[0]||(D[0]=N=>le.value=!1)},null,8,["visible","imgs","index"])],64))}},Cd=$t(wd,[["__scopeId","data-v-9b2fbb07"]]),Bd={class:"w-20 h-20 flex items-center justify-center"},$d={key:0,viewBox:"0 0 64 64",class:"w-full h-full animate-spin-slow"},Nd={key:1,viewBox:"0 0 64 64",class:"w-full h-full"},Dd={key:2,viewBox:"0 0 64 64",class:"w-full h-full"},Ad=["x1","x2"],Sd=["begin"],jd=["begin"],Td={key:3,viewBox:"0 0 64 64",class:"w-full h-full"},Pd={key:4,viewBox:"0 0 64 64",class:"w-full h-full"},Vd=["cx"],Ed=["begin"],Rd={key:5,viewBox:"0 0 64 64",class:"w-full h-full"},Md={key:6,viewBox:"0 0 64 64",class:"w-full h-full"},Id={__name:"WeatherIcon",props:{code:{type:Number,required:!0}},setup(C){const le=(z=>z===800?"clear":z>=801&&z<=804?"clouds":z>=200&&z<300?"thunder":z>=300&&z<400?"drizzle":z>=500&&z<600?"rain":z>=600&&z<700?"snow":z>=700&&z<800?"mist":"clouds")(C.code);return(z,ue)=>(s(),r("div",Bd,[Le(le)==="clear"?(s(),r("svg",$d,ue[0]||(ue[0]=[ks('<circle cx="32" cy="32" r="14" fill="#FFC107" data-v-cde30794></circle><g stroke="#FF9800" stroke-width="3" data-v-cde30794><line x1="32" y1="4" x2="32" y2="16" data-v-cde30794></line><line x1="32" y1="48" x2="32" y2="60" data-v-cde30794></line><line x1="4" y1="32" x2="16" y2="32" data-v-cde30794></line><line x1="48" y1="32" x2="60" y2="32" data-v-cde30794></line><line x1="12" y1="12" x2="20" y2="20" data-v-cde30794></line><line x1="44" y1="44" x2="52" y2="52" data-v-cde30794></line><line x1="12" y1="52" x2="20" y2="44" data-v-cde30794></line><line x1="44" y1="20" x2="52" y2="12" data-v-cde30794></line></g>',2)]))):Le(le)==="clouds"?(s(),r("svg",Nd,ue[1]||(ue[1]=[e("ellipse",{cx:"32",cy:"40",rx:"18",ry:"10",fill:"#757575"},[e("animate",{attributeName:"cx",values:"32;36;32",dur:"2s",repeatCount:"indefinite"})],-1),e("ellipse",{cx:"44",cy:"44",rx:"10",ry:"6",fill:"#90A4AE"},[e("animate",{attributeName:"cx",values:"44;40;44",dur:"2s",repeatCount:"indefinite"})],-1)]))):Le(le)==="rain"?(s(),r("svg",Dd,[ue[2]||(ue[2]=e("ellipse",{cx:"32",cy:"40",rx:"18",ry:"10",fill:"#757575"},null,-1)),ue[3]||(ue[3]=e("ellipse",{cx:"44",cy:"44",rx:"10",ry:"6",fill:"#90A4AE"},null,-1)),e("g",null,[(s(),r(I,null,K(4,J=>e("line",{key:J,x1:20+J*6,y1:"50",x2:18+J*6,y2:"60",stroke:"#1565C0","stroke-width":"2"},[e("animate",{attributeName:"y1",values:"50;60;50",begin:(J-1)*.3+"s",dur:"1.2s",repeatCount:"indefinite"},null,8,Sd),e("animate",{attributeName:"y2",values:"60;70;60",begin:(J-1)*.3+"s",dur:"1.2s",repeatCount:"indefinite"},null,8,jd)],8,Ad)),64))])])):Le(le)==="thunder"?(s(),r("svg",Td,ue[4]||(ue[4]=[e("ellipse",{cx:"32",cy:"40",rx:"18",ry:"10",fill:"#757575"},null,-1),e("ellipse",{cx:"44",cy:"44",rx:"10",ry:"6",fill:"#90A4AE"},null,-1),e("polyline",{points:"30,48 36,48 32,58 38,58",fill:"none",stroke:"#FFC107","stroke-width":"4"},[e("animate",{attributeName:"stroke-opacity",values:"1;0.2;1",dur:"0.7s",repeatCount:"indefinite"})],-1)]))):Le(le)==="snow"?(s(),r("svg",Pd,[ue[5]||(ue[5]=e("ellipse",{cx:"32",cy:"40",rx:"18",ry:"10",fill:"#757575"},null,-1)),ue[6]||(ue[6]=e("ellipse",{cx:"44",cy:"44",rx:"10",ry:"6",fill:"#90A4AE"},null,-1)),e("g",null,[(s(),r(I,null,K(4,J=>e("circle",{key:J,cx:20+J*8,cy:"54",r:"2",fill:"#81D4FA"},[e("animate",{attributeName:"cy",values:"54;64;54",begin:(J-1)*.3+"s",dur:"1.5s",repeatCount:"indefinite"},null,8,Ed)],8,Vd)),64))])])):Le(le)==="mist"?(s(),r("svg",Rd,ue[7]||(ue[7]=[ks('<ellipse cx="32" cy="40" rx="18" ry="10" fill="#B0BEC5" data-v-cde30794></ellipse><ellipse cx="44" cy="44" rx="10" ry="6" fill="#CFD8DC" data-v-cde30794></ellipse><rect x="16" y="54" width="32" height="3" rx="2" fill="#B0BEC5" data-v-cde30794><animate attributeName="x" values="16;24;16" dur="2s" repeatCount="indefinite" data-v-cde30794></animate></rect><rect x="20" y="59" width="24" height="2" rx="1" fill="#CFD8DC" data-v-cde30794><animate attributeName="x" values="20;28;20" dur="2s" repeatCount="indefinite" data-v-cde30794></animate></rect>',4)]))):(s(),r("svg",Md,ue[8]||(ue[8]=[e("circle",{cx:"32",cy:"32",r:"14",fill:"#B0BEC5"},null,-1)])))]))}},Od=$t(Id,[["__scopeId","data-v-cde30794"]]),Fd={class:"flex items-center justify-between mb-3 flex-shrink-0"},Ld={class:"flex-1 min-h-0 overflow-hidden"},qd={key:0,class:"space-y-2 h-full overflow-y-auto"},Ud={key:1,class:"h-full flex items-center justify-center"},zd={class:"text-center"},Gd={key:2,class:"h-full overflow-y-auto space-y-2 pr-2"},Wd=["onClick"],Kd={class:"flex items-start justify-between mb-2"},Hd={class:"flex-1 mr-2"},Jd={class:"flex items-center gap-2 mt-1"},Yd=["onClick"],Qd=["src","alt"],Zd={key:1,class:"w-5 h-5 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-xs font-bold flex-shrink-0"},Xd={key:1,class:"mb-2"},eu=["src","alt"],tu={key:2,class:"flex items-center gap-1 mb-2"},au={class:"flex items-center justify-between"},su={class:"flex items-center gap-1"},ru={__name:"AnnouncementList",props:{isNight:{type:Boolean,default:!1}},emits:["show-all"],setup(C,{emit:Ve}){const te=p([]),le=p(!0),z=p(!1),ue=p([]),J=p(0),T=async()=>{try{le.value=!0;const be=await M.get("/api/user-announcements");te.value=be.data.announcements||[]}catch(be){console.error("Error fetching announcements:",be),te.value=[]}finally{le.value=!1}},b=be=>{if(!be||be.length===0)return"Semua";const P=be.map(D=>D.target_name).filter(Boolean);return P.length===0?"Semua":P.length<=2?P.join(", "):`${P.slice(0,2).join(", ")} dan ${P.length-2} lainnya`},fe=be=>{if(!be)return"U";const P=be.trim().split(" ");return P.length===1?P[0].charAt(0).toUpperCase():(P[0].charAt(0)+P[P.length-1].charAt(0)).toUpperCase()},we=be=>{ue.value=[be],J.value=0,z.value=!0},ne=be=>{qt.visit(`/announcement/${be}`)};return st(()=>{T()}),(be,P)=>(s(),r(I,null,[e("div",{class:u(["announcement-list h-full flex flex-col",C.isNight?"text-white":"text-slate-800"])},[e("div",Fd,[e("h3",{class:u(["text-base font-semibold flex items-center gap-2",C.isNight?"text-white":"text-slate-800"])},[e("i",{class:u(["fas fa-bullhorn",C.isNight?"text-indigo-400":"text-indigo-600"])},null,2),P[2]||(P[2]=c(" Pengumuman Terbaru "))],2),e("button",{onClick:P[0]||(P[0]=D=>be.$emit("show-all")),class:u(["text-xs flex items-center gap-1",C.isNight?"text-indigo-400 hover:text-indigo-300":"text-indigo-600 hover:text-indigo-800"])},P[3]||(P[3]=[c(" Lihat Semua "),e("i",{class:"fas fa-arrow-right text-xs"},null,-1)]),2)]),e("div",Ld,[le.value?(s(),r("div",qd,[(s(),r(I,null,K(3,D=>e("div",{key:D,class:"animate-pulse"},[e("div",{class:u(["rounded-lg p-3",C.isNight?"bg-slate-700":"bg-gray-200"])},[e("div",{class:u(["h-3 rounded w-3/4 mb-2",C.isNight?"bg-slate-600":"bg-gray-300"])},null,2),e("div",{class:u(["h-2 rounded w-1/2",C.isNight?"bg-slate-600":"bg-gray-300"])},null,2)],2)])),64))])):te.value.length===0?(s(),r("div",Ud,[e("div",zd,[e("div",{class:u(["mb-2",C.isNight?"text-slate-400":"text-gray-400"])},P[4]||(P[4]=[e("i",{class:"fas fa-bullhorn text-3xl"},null,-1)]),2),e("p",{class:u(["text-sm",C.isNight?"text-slate-300":"text-gray-500"])},"Belum ada pengumuman untuk Anda",2)])])):(s(),r("div",Gd,[(s(!0),r(I,null,K(te.value,D=>(s(),r("div",{key:D.id,class:u(["rounded-lg border p-3 hover:shadow-lg transition-all duration-200 cursor-pointer backdrop-blur-sm",[C.isNight?"bg-slate-700/80 border-slate-600 hover:bg-slate-700/90":"bg-white/80 border-slate-200 hover:bg-white/90"]]),onClick:N=>ne(D.id)},[e("div",Kd,[e("div",Hd,[e("h4",{class:u(["font-medium text-sm line-clamp-1",C.isNight?"text-white":"text-slate-900"])},a(D.title),3),e("div",Jd,[D.creator_avatar?(s(),r("div",{key:0,class:"w-5 h-5 rounded-full overflow-hidden flex-shrink-0 cursor-pointer hover:scale-110 transition-transform",onClick:N=>we(`/storage/${D.creator_avatar}`)},[e("img",{src:`/storage/${D.creator_avatar}`,alt:D.creator_name,class:"w-full h-full object-cover"},null,8,Qd)],8,Yd)):(s(),r("div",Zd,a(fe(D.creator_name)),1)),e("span",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},a(D.creator_name||"Unknown"),3)])]),e("span",{class:u(["text-xs whitespace-nowrap",C.isNight?"text-slate-400":"text-slate-500"])},a(D.created_at_formatted),3)]),D.content?(s(),r("p",{key:0,class:u(["text-xs line-clamp-2 mb-2",C.isNight?"text-slate-300":"text-slate-600"])},a(D.content),3)):i("",!0),D.image_path?(s(),r("div",Xd,[e("img",{src:`/storage/${D.image_path}`,alt:D.title,class:"w-full h-20 object-cover rounded-lg"},null,8,eu)])):i("",!0),D.files&&D.files.length>0?(s(),r("div",tu,[e("i",{class:u(["fas fa-paperclip text-xs",(C.isNight,"text-slate-400")])},null,2),e("span",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},a(D.files.length)+" file ",3)])):i("",!0),e("div",au,[e("div",su,[e("i",{class:u(["fas fa-users text-xs",(C.isNight,"text-slate-400")])},null,2),e("span",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},a(b(D.targets)),3)]),e("i",{class:u(["fas fa-chevron-right text-xs",(C.isNight,"text-slate-400")])},null,2)])],10,Wd))),128))]))])],2),Qe(Le(_s),{visible:z.value,imgs:ue.value,index:J.value,onHide:P[1]||(P[1]=D=>z.value=!1)},null,8,["visible","imgs","index"])],64))}},lu=$t(ru,[["__scopeId","data-v-38cf20f2"]]),ou={key:0,class:"flex-shrink-0 mb-4"},nu={class:"flex items-center justify-between mb-3"},iu={class:"flex items-center gap-2"},du={class:"bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full"},uu={key:0,class:"text-center py-4"},cu={key:1,class:"space-y-2"},gu=["onClick"],xu={class:"flex items-center justify-between"},pu={class:"flex-1"},mu={class:"text-xs text-green-500 font-medium"},vu={key:0,class:"text-center pt-2"},fu={key:0,class:"text-center py-8"},yu={key:1,class:"space-y-6"},bu={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},hu={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ku={class:"text-gray-900 dark:text-white font-semibold"},_u={class:"text-gray-900 dark:text-white"},wu={class:"text-gray-900 dark:text-white"},Cu={class:"text-gray-900 dark:text-white"},Bu={class:"text-gray-900 dark:text-white font-semibold text-lg"},$u={class:"text-gray-900 dark:text-white"},Nu={key:0,class:"mt-4"},Du={class:"text-gray-900 dark:text-white"},Au={key:1,class:"mt-4"},Su={class:"mt-2"},ju=["href"],Tu={key:0,class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},Pu={class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},Vu={class:"space-y-4"},Eu={class:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3"},Ru={class:"text-sm text-gray-900 dark:text-white font-semibold"},Mu={class:"text-sm text-gray-900 dark:text-white"},Iu={key:0},Ou={class:"text-sm text-gray-900 dark:text-white"},Fu={key:1},Lu={class:"text-sm text-gray-900 dark:text-white"},qu={class:"text-sm text-gray-900 dark:text-white font-semibold"},Uu={key:0,class:"mt-3"},zu={class:"overflow-x-auto"},Gu={class:"min-w-full text-xs"},Wu={class:"px-2 py-1 text-gray-900 dark:text-white"},Ku={class:"px-2 py-1 text-gray-900 dark:text-white"},Hu={class:"px-2 py-1 text-gray-900 dark:text-white"},Ju={class:"px-2 py-1 text-gray-900 dark:text-white"},Yu={class:"px-2 py-1 text-gray-900 dark:text-white font-semibold"},Qu={class:"flex items-center justify-between mb-4"},Zu={class:"flex items-center gap-2"},Xu={key:0,class:"mb-4 p-2 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-between"},e0={class:"text-sm font-medium text-green-800 dark:text-green-200"},t0={class:"mb-4 space-y-3"},a0={class:"flex flex-wrap gap-3"},s0={class:"flex items-center justify-between"},r0={class:"text-sm text-gray-600 dark:text-gray-400"},l0={key:1,class:"text-center py-8"},o0={key:2,class:"text-center py-8 text-gray-500 dark:text-gray-400"},n0={key:3,class:"space-y-2"},i0=["onClick"],d0={class:"flex items-center justify-between"},u0={class:"flex items-center gap-2 flex-1"},c0=["checked","onClick"],g0={class:"flex-1"},x0={class:"text-xs text-green-500 font-medium"},p0={key:4,class:"mt-4 flex items-center justify-between"},m0={class:"text-sm text-gray-600 dark:text-gray-400"},v0={class:"flex gap-2"},f0=["disabled"],y0=["onClick"],b0={key:1,class:"px-3 py-1 text-gray-500"},h0=["disabled"],k0={__name:"FoodPaymentApprovalCard",props:{isNight:{type:Boolean,default:!1}},emits:["approved","rejected"],setup(C,{expose:Ve,emit:te}){const le=te,z=p([]),ue=p(!1),J=p(!1),T=p(null),b=p(!1),fe=p(!1),we=p([]),ne=p(!1),be=p(!1),P=p(new Set),D=p(""),N=p(""),j=p(""),ee=p("newest"),O=p(1),H=p(10),xe=ve(()=>z.value.length),V=ve(()=>{let F=[...we.value];if(D.value){const w=D.value.toLowerCase();F=F.filter(ce=>{var y,n;const E=(ce.number||"").toLowerCase(),g=(((y=ce.supplier)==null?void 0:y.name)||"").toLowerCase(),h=(((n=ce.creator)==null?void 0:n.nama_lengkap)||"").toLowerCase();return E.includes(w)||g.includes(w)||h.includes(w)})}if(N.value&&(F=F.filter(w=>(w.status||"paid").toString().toLowerCase()===N.value)),j.value){const w=new Date,ce=new Date(w.getFullYear(),w.getMonth(),w.getDate());F=F.filter(E=>{const g=new Date(E.date);switch(j.value){case"today":return g>=ce;case"week":return g>=new Date(ce.getTime()-7*24*60*60*1e3);case"month":return g>=new Date(ce.getTime()-30*24*60*60*1e3);default:return!0}})}return F.sort((w,ce)=>{switch(ee.value){case"oldest":return new Date(w.date||w.created_at)-new Date(ce.date||ce.created_at);case"number":return(w.number||"").localeCompare(ce.number||"");case"amount":return(ce.total||0)-(w.total||0);case"newest":default:return new Date(ce.date||ce.created_at)-new Date(w.date||w.created_at)}}),F}),Ce=ve(()=>Math.ceil(V.value.length/H.value)),De=ve(()=>{const F=(O.value-1)*H.value,w=F+H.value;return V.value.slice(F,w)}),Ne=ve(()=>{const F=Ce.value,w=O.value,ce=[];if(F<=7)for(let E=1;E<=F;E++)ce.push(E);else if(w<=3){for(let E=1;E<=5;E++)ce.push(E);ce.push("..."),ce.push(F)}else if(w>=F-2){ce.push(1),ce.push("...");for(let E=F-4;E<=F;E++)ce.push(E)}else{ce.push(1),ce.push("...");for(let E=w-1;E<=w+1;E++)ce.push(E);ce.push("..."),ce.push(F)}return ce});function Be(F){return F?new Date(F).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}async function ie(){ue.value=!0;try{const F=await M.get("/api/food-payment/pending-approvals");F.data.success&&(z.value=F.data.food_payments||[])}catch(F){console.error("Error loading pending Food Payment approvals:",F)}finally{ue.value=!1}}const Se=p("");async function ke(F){var w,ce,E;try{fe.value&&(fe.value=!1);const g=z.value.find(y=>y.id===F)||we.value.find(y=>y.id===F);g&&(Se.value=g.approval_level),b.value=!0,J.value=!0;const h=await M.get(`/api/food-payment/${F}`);h.data&&h.data.success&&h.data.food_payment?(T.value=h.data.food_payment,!T.value.approval_level&&Se.value&&(T.value.approval_level=Se.value)):(v.fire("Error",((w=h.data)==null?void 0:w.message)||"Gagal memuat detail Food Payment","error"),R())}catch(g){console.error("Error loading Food Payment details:",g);const h=((E=(ce=g.response)==null?void 0:ce.data)==null?void 0:E.message)||g.message||"Gagal memuat detail Food Payment";v.fire("Error",h,"error"),R()}finally{b.value=!1}}function R(){J.value=!1,T.value=null}async function ge(){var w,ce,E;if(!T.value)return;const F=T.value.id;try{const g=await M.post(`/food-payments/${F}/approve`,{approved:!0,note:""});if(g.status>=200&&g.status<300)if(g.data&&g.data.success)v.fire("Success",g.data.message||"Food Payment berhasil disetujui","success"),R(),ie(),le("approved",F);else{const h=((w=g.data)==null?void 0:w.message)||"Gagal menyetujui Food Payment";v.fire("Error",h,"error")}else v.fire("Error","Gagal menyetujui Food Payment","error")}catch(g){console.error("Error approving Food Payment:",g);const h=((E=(ce=g.response)==null?void 0:ce.data)==null?void 0:E.message)||g.message||"Gagal menyetujui Food Payment";v.fire("Error",h,"error")}}function he(){v.fire({title:"Tolak Food Payment",input:"textarea",inputLabel:"Alasan Penolakan",inputPlaceholder:"Masukkan alasan penolakan...",inputAttributes:{"aria-label":"Masukkan alasan penolakan"},showCancelButton:!0,confirmButtonText:"Tolak",cancelButtonText:"Batal",confirmButtonColor:"#ef4444",inputValidator:F=>{if(!F)return"Alasan penolakan harus diisi!"}}).then(async F=>{var w,ce,E;if(F.isConfirmed&&T.value){const g=T.value.id;try{const h=await M.post(`/food-payments/${g}/approve`,{approved:!1,note:F.value});if(h.status>=200&&h.status<300)if(h.data&&h.data.success)v.fire("Success",h.data.message||"Food Payment berhasil ditolak","success"),R(),ie(),le("rejected",g);else{const y=((w=h.data)==null?void 0:w.message)||"Gagal menolak Food Payment";v.fire("Error",y,"error")}else v.fire("Error","Gagal menolak Food Payment","error")}catch(h){console.error("Error rejecting Food Payment:",h);const y=((E=(ce=h.response)==null?void 0:ce.data)==null?void 0:E.message)||h.message||"Gagal menolak Food Payment";v.fire("Error",y,"error")}}})}async function se(){ne.value=!0;try{const F=await M.get("/api/food-payment/pending-approvals?limit=500");F.data.success&&(we.value=F.data.food_payments||[],O.value=1)}catch(F){console.error("Error loading all Food Payment approvals:",F)}finally{ne.value=!1}}function W(){fe.value=!0,se(),be.value=!1,P.value.clear()}function re(F){P.value.has(F)?P.value.delete(F):P.value.add(F)}function L(){De.value.forEach(F=>{P.value.add(F.id)})}async function q(){if(P.value.size===0){v.fire("Warning","Pilih minimal satu Food Payment untuk di-approve","warning");return}if((await v.fire({title:"Approve Multiple Food Payments?",text:`Apakah Anda yakin ingin approve ${P.value.size} Food Payment?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#10b981"})).isConfirmed)try{v.fire({title:"Processing...",text:"Sedang memproses approval...",allowOutsideClick:!1,didOpen:()=>{v.showLoading()}});const ce=Array.from(P.value).map(async y=>{var $;if(!we.value.find(f=>f.id===y))return{error:new Error("Food Payment not found"),fpId:y};try{const f=await M.post(`/food-payments/${y}/approve`,{approved:!0,note:""});return f.status>=200&&f.status<300&&f.data&&f.data.success?{success:!0,fpId:y}:{error:new Error((($=f.data)==null?void 0:$.message)||"Approval failed"),fpId:y}}catch(f){return{error:f,fpId:y}}}),E=await Promise.all(ce),g=E.filter(y=>y.success).length,h=E.filter(y=>y.error).length;P.value.clear(),be.value=!1,se(),ie(),h===0?v.fire("Success",`${g} Food Payment berhasil disetujui`,"success"):v.fire("Partial Success",`${g} berhasil, ${h} gagal`,"warning")}catch(w){console.error("Error approving multiple Food Payments:",w),v.fire("Error","Gagal menyetujui Food Payments","error")}}function _e(){fe.value=!1}function Z(F){F>=1&&F<=Ce.value&&(O.value=F)}return it([D,N,j,ee],()=>{O.value=1}),st(()=>{ie()}),Ve({loadPendingApprovals:ie,refresh:ie}),(F,w)=>{var ce,E;return s(),r("div",null,[xe.value>0?(s(),r("div",ou,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl",C.isNight?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",nu,[e("div",iu,[w[13]||(w[13]=e("div",{class:"w-3 h-3 rounded-full bg-green-500 animate-pulse"},null,-1)),e("h3",{class:u(["text-lg font-bold",C.isNight?"text-white":"text-slate-800"])},w[12]||(w[12]=[e("i",{class:"fa fa-utensils mr-2 text-green-500"},null,-1),c(" Food Payment Approval ")]),2)]),e("div",du,a(xe.value),1)]),ue.value?(s(),r("div",uu,[w[14]||(w[14]=e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-green-500"},null,-1)),e("p",{class:u(["text-sm mt-2",C.isNight?"text-slate-300":"text-slate-600"])},"Memuat data...",2)])):(s(),r("div",cu,[(s(!0),r(I,null,K(z.value.slice(0,3),g=>{var h,y;return s(),r("div",{key:"food-payment-approval-"+g.id,onClick:n=>ke(g.id),class:u(["p-3 rounded-lg cursor-pointer transition-all duration-200 hover:scale-105",C.isNight?"bg-slate-700/50 hover:bg-slate-600/50":"bg-green-50 hover:bg-green-100"])},[e("div",xu,[e("div",pu,[e("div",{class:u(["font-semibold text-sm",C.isNight?"text-white":"text-slate-800"])},a(g.number),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-300":"text-slate-600"])},a(((h=g.supplier)==null?void 0:h.name)||"Unknown Supplier"),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[w[15]||(w[15]=e("i",{class:"fa fa-credit-card mr-1 text-green-600"},null,-1)),c(" "+a(g.payment_type),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])}," Rp "+a(new Intl.NumberFormat("id-ID").format(g.total)),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[w[16]||(w[16]=e("i",{class:"fa fa-user mr-1 text-green-500"},null,-1)),c(a((y=g.creator)==null?void 0:y.nama_lengkap),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},a(Be(g.date)),3)]),e("div",mu,[w[17]||(w[17]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(g.approver_name||g.approval_level_display),1)])])],10,gu)}),128)),z.value.length>3?(s(),r("div",vu,[e("button",{onClick:W,class:"text-sm text-green-500 hover:text-green-700 font-medium"}," Lihat "+a(z.value.length-3)+" Food Payment lainnya... ",1)])):i("",!0)]))],2)])):i("",!0),(s(),He(Ze,{to:"body"},[J.value&&T.value?(s(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]",onClick:R},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",onClick:w[0]||(w[0]=Q(()=>{},["stop"]))},[e("div",{class:"flex items-center justify-between mb-4"},[w[19]||(w[19]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-utensils mr-2 text-green-500"}),c(" Detail Food Payment Approval ")],-1)),e("button",{onClick:R,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},w[18]||(w[18]=[e("i",{class:"fa fa-times text-xl"},null,-1)]))]),b.value?(s(),r("div",fu,w[20]||(w[20]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-400"},"Memuat detail...",-1)]))):(s(),r("div",yu,[e("div",bu,[w[30]||(w[30]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Informasi Dasar",-1)),e("div",hu,[e("div",null,[w[21]||(w[21]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"FP Number",-1)),e("p",ku,a(T.value.number),1)]),e("div",null,[w[22]||(w[22]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Date",-1)),e("p",_u,a(new Date(T.value.date).toLocaleDateString("id-ID")),1)]),e("div",null,[w[23]||(w[23]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Supplier",-1)),e("p",wu,a(((ce=T.value.supplier)==null?void 0:ce.name)||"Unknown"),1)]),e("div",null,[w[24]||(w[24]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Payment Type",-1)),e("p",Cu,a(T.value.payment_type),1)]),e("div",null,[w[25]||(w[25]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Total",-1)),e("p",Bu," Rp "+a(new Intl.NumberFormat("id-ID").format(T.value.total)),1)]),e("div",null,[w[26]||(w[26]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Created By",-1)),e("p",$u,a(((E=T.value.creator)==null?void 0:E.nama_lengkap)||"Unknown"),1)])]),T.value.notes?(s(),r("div",Nu,[w[27]||(w[27]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Notes",-1)),e("p",Du,a(T.value.notes),1)])):i("",!0),T.value.bukti_transfer_path?(s(),r("div",Au,[w[29]||(w[29]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Bukti Transfer",-1)),e("div",Su,[e("a",{href:`/storage/${T.value.bukti_transfer_path}`,target:"_blank",class:"text-blue-500 hover:text-blue-700 underline"},w[28]||(w[28]=[e("i",{class:"fa fa-file-image mr-1"},null,-1),c("Lihat Bukti Transfer ")]),8,ju)])])):i("",!0)]),T.value.contra_bons&&T.value.contra_bons.length>0?(s(),r("div",Tu,[e("h4",Pu,[w[31]||(w[31]=e("i",{class:"fa fa-file-invoice-dollar mr-2 text-blue-500"},null,-1)),c(" Contra Bons ("+a(T.value.contra_bons.length)+") ",1)]),e("div",Vu,[(s(!0),r(I,null,K(T.value.contra_bons,g=>(s(),r("div",{key:"cb-"+g.id,class:"bg-white dark:bg-gray-800 p-3 rounded border border-gray-200 dark:border-gray-700"},[e("div",Eu,[e("div",null,[w[32]||(w[32]=e("label",{class:"text-xs font-medium text-gray-600 dark:text-gray-400"},"Contra Bon Number",-1)),e("p",Ru,a(g.number),1)]),e("div",null,[w[33]||(w[33]=e("label",{class:"text-xs font-medium text-gray-600 dark:text-gray-400"},"Source Type",-1)),e("p",Mu,a(g.source_type_display),1)]),g.source_numbers&&g.source_numbers.length>0?(s(),r("div",Iu,[w[34]||(w[34]=e("label",{class:"text-xs font-medium text-gray-600 dark:text-gray-400"},"Source Numbers",-1)),e("p",Ou,a(g.source_numbers.join(", ")),1)])):i("",!0),g.source_outlets&&g.source_outlets.length>0?(s(),r("div",Fu,[w[35]||(w[35]=e("label",{class:"text-xs font-medium text-gray-600 dark:text-gray-400"},"Outlets",-1)),e("p",Lu,a(g.source_outlets.join(", ")),1)])):i("",!0),e("div",null,[w[36]||(w[36]=e("label",{class:"text-xs font-medium text-gray-600 dark:text-gray-400"},"Total Amount",-1)),e("p",qu," Rp "+a(new Intl.NumberFormat("id-ID").format(g.total_amount)),1)])]),g.items&&g.items.length>0?(s(),r("div",Uu,[w[38]||(w[38]=e("label",{class:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2 block"},"Items",-1)),e("div",zu,[e("table",Gu,[w[37]||(w[37]=e("thead",{class:"bg-gray-100 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Item"),e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Qty"),e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Unit"),e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Price"),e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Total")])],-1)),e("tbody",null,[(s(!0),r(I,null,K(g.items,h=>{var y,n;return s(),r("tr",{key:"item-"+h.id,class:"border-t border-gray-200 dark:border-gray-600"},[e("td",Wu,a(((y=h.item)==null?void 0:y.name)||h.item_name||"-"),1),e("td",Ku,a(h.quantity||0),1),e("td",Hu,a(((n=h.unit)==null?void 0:n.name)||h.unit_name||"-"),1),e("td",Ju,"Rp "+a(new Intl.NumberFormat("id-ID").format(h.price||0)),1),e("td",Yu,"Rp "+a(new Intl.NumberFormat("id-ID").format(h.total||0)),1)])}),128))])])])])):i("",!0)]))),128))])])):i("",!0),e("div",{class:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"},[e("button",{onClick:he,class:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors"},w[39]||(w[39]=[e("i",{class:"fa fa-times mr-2"},null,-1),c("Tolak ")])),e("button",{onClick:ge,class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"},w[40]||(w[40]=[e("i",{class:"fa fa-check mr-2"},null,-1),c("Setujui ")]))])]))])])):i("",!0)])),(s(),He(Ze,{to:"body"},[fe.value?(s(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998]",onClick:_e},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-5xl mx-4 max-h-[90vh] overflow-y-auto",onClick:w[11]||(w[11]=Q(()=>{},["stop"]))},[e("div",Qu,[w[44]||(w[44]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-list mr-2 text-green-500"}),c(" Semua Food Payment Pending ")],-1)),e("div",Zu,[be.value?(s(),r("button",{key:1,onClick:w[2]||(w[2]=Q(g=>{be.value=!1,P.value.clear()},["stop"])),class:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 transition"},w[42]||(w[42]=[e("i",{class:"fa fa-times mr-1"},null,-1),c("Cancel ")]))):(s(),r("button",{key:0,onClick:w[1]||(w[1]=Q(g=>be.value=!0,["stop"])),class:"text-xs bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 transition"},w[41]||(w[41]=[e("i",{class:"fa fa-check-square mr-1"},null,-1),c("Multi Approve ")]))),e("button",{onClick:_e,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},w[43]||(w[43]=[e("i",{class:"fa fa-times text-xl"},null,-1)]))])]),be.value&&P.value.size>0?(s(),r("div",Xu,[e("span",e0,a(P.value.size)+" item dipilih ",1),e("div",{class:"flex gap-2"},[e("button",{onClick:L,class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition"},w[45]||(w[45]=[e("i",{class:"fa fa-check-double mr-1"},null,-1),c("Select All ")])),e("button",{onClick:q,class:"text-xs bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700 transition"},w[46]||(w[46]=[e("i",{class:"fa fa-check mr-1"},null,-1),c("Approve Selected ")]))])])):i("",!0),e("div",t0,[e("div",a0,[de(e("input",{"onUpdate:modelValue":w[3]||(w[3]=g=>D.value=g),type:"text",placeholder:"Cari nomor, supplier, creator...",class:"flex-1 min-w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[Ge,D.value]]),de(e("select",{"onUpdate:modelValue":w[4]||(w[4]=g=>N.value=g),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},w[47]||(w[47]=[e("option",{value:""},"Semua Status",-1),e("option",{value:"paid"},"Paid",-1)]),512),[[Te,N.value]]),de(e("select",{"onUpdate:modelValue":w[5]||(w[5]=g=>j.value=g),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},w[48]||(w[48]=[e("option",{value:""},"Semua Tanggal",-1),e("option",{value:"today"},"Hari Ini",-1),e("option",{value:"week"},"Minggu Ini",-1),e("option",{value:"month"},"Bulan Ini",-1)]),512),[[Te,j.value]]),de(e("select",{"onUpdate:modelValue":w[6]||(w[6]=g=>ee.value=g),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},w[49]||(w[49]=[e("option",{value:"newest"},"Terbaru",-1),e("option",{value:"oldest"},"Terlama",-1),e("option",{value:"number"},"Nomor",-1),e("option",{value:"amount"},"Jumlah",-1)]),512),[[Te,ee.value]])]),e("div",s0,[e("div",r0," Menampilkan "+a(De.value.length)+" dari "+a(V.value.length)+" Food Payment ",1),de(e("select",{"onUpdate:modelValue":w[7]||(w[7]=g=>H.value=g),onChange:w[8]||(w[8]=g=>O.value=1),class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"},w[50]||(w[50]=[e("option",{value:10},"10 per halaman",-1),e("option",{value:25},"25 per halaman",-1),e("option",{value:50},"50 per halaman",-1),e("option",{value:100},"100 per halaman",-1)]),544),[[Te,H.value]])])]),ne.value?(s(),r("div",l0,w[51]||(w[51]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-400"},"Memuat data...",-1)]))):De.value.length===0?(s(),r("div",o0," Tidak ada Food Payment yang ditemukan ")):(s(),r("div",n0,[(s(!0),r(I,null,K(De.value,g=>{var h,y;return s(),r("div",{key:"all-fp-"+g.id,class:u(["p-3 rounded-lg transition-all duration-200 border border-gray-200 dark:border-gray-700",[be.value?"cursor-default":"cursor-pointer hover:scale-[1.02] hover:border-green-500 dark:hover:border-green-500",C.isNight?"bg-slate-700/50 hover:bg-slate-600/50":"bg-gray-50 hover:bg-green-50",P.value.has(g.id)?"ring-2 ring-green-500":""]]),onClick:n=>be.value?re(g.id):ke(g.id)},[e("div",d0,[e("div",u0,[be.value?(s(),r("input",{key:0,type:"checkbox",checked:P.value.has(g.id),onClick:Q(n=>re(g.id),["stop"]),class:"w-4 h-4 text-green-600 rounded focus:ring-green-500"},null,8,c0)):i("",!0),e("div",g0,[e("div",{class:u(["font-semibold text-sm",C.isNight?"text-white":"text-slate-800"])},a(g.number),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-300":"text-slate-600"])},a(((h=g.supplier)==null?void 0:h.name)||"Unknown Supplier"),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[w[52]||(w[52]=e("i",{class:"fa fa-credit-card mr-1 text-green-600"},null,-1)),c(" "+a(g.payment_type),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])}," Rp "+a(new Intl.NumberFormat("id-ID").format(g.total)),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[w[53]||(w[53]=e("i",{class:"fa fa-user mr-1 text-green-500"},null,-1)),c(a((y=g.creator)==null?void 0:y.nama_lengkap),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},a(Be(g.date)),3)])]),e("div",x0,[w[54]||(w[54]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(g.approver_name||g.approval_level_display),1)])])],10,i0)}),128))])),Ce.value>1?(s(),r("div",p0,[e("div",m0," Halaman "+a(O.value)+" dari "+a(Ce.value),1),e("div",v0,[e("button",{onClick:w[9]||(w[9]=g=>Z(O.value-1)),disabled:O.value===1,class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed"},w[55]||(w[55]=[e("i",{class:"fa fa-chevron-left"},null,-1)]),8,f0),(s(!0),r(I,null,K(Ne.value,g=>(s(),r(I,{key:"page-"+g},[g!=="..."?(s(),r("button",{key:0,onClick:h=>Z(g),class:u(["px-3 py-1 border rounded-lg",O.value===g?"bg-green-500 text-white border-green-500":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"])},a(g),11,y0)):(s(),r("span",b0,"..."))],64))),128)),e("button",{onClick:w[10]||(w[10]=g=>Z(O.value+1)),disabled:O.value===Ce.value,class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed"},w[56]||(w[56]=[e("i",{class:"fa fa-chevron-right"},null,-1)]),8,h0)])])):i("",!0)])])):i("",!0)]))])}}},_0={key:0,class:"flex-shrink-0 mb-4"},w0={class:"flex items-center justify-between mb-3"},C0={class:"flex items-center gap-2"},B0={class:"flex items-center gap-2"},$0={class:"bg-orange-500 text-white text-xs font-bold px-2 py-1 rounded-full"},N0={key:0,class:"mb-3 p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg flex items-center justify-between"},D0={class:"text-sm font-medium text-orange-800 dark:text-orange-200"},A0={key:1,class:"text-center py-4"},S0={key:2,class:"space-y-2"},j0=["onClick"],T0={class:"flex items-center justify-between"},P0={class:"flex items-center gap-2 flex-1"},V0=["checked","onClick"],E0={class:"flex-1"},R0={class:"text-xs text-orange-500 font-medium"},M0={key:0,class:"text-center pt-2"},I0={key:0,class:"text-center py-8"},O0={key:1,class:"space-y-6"},F0={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},L0={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},q0={class:"text-gray-900 dark:text-white font-semibold"},U0={class:"text-gray-900 dark:text-white"},z0={class:"text-gray-900 dark:text-white"},G0={class:"text-gray-900 dark:text-white"},W0={class:"text-gray-900 dark:text-white font-semibold text-lg"},K0={class:"text-gray-900 dark:text-white"},H0={class:"text-gray-900 dark:text-white"},J0={key:0},Y0={class:"text-gray-900 dark:text-white"},Q0={key:0,class:"mt-4"},Z0={class:"text-gray-900 dark:text-white"},X0={key:1,class:"mt-4"},ec={class:"text-gray-900 dark:text-white"},tc={key:0,class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},ac={class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},sc={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},rc={key:0},lc={class:"text-gray-900 dark:text-white font-semibold"},oc={key:1},nc={class:"text-gray-900 dark:text-white font-semibold"},ic={key:2},dc={class:"text-gray-900 dark:text-white"},uc={key:3},cc={class:"text-gray-900 dark:text-white"},gc={key:4},xc={class:"text-gray-900 dark:text-white font-semibold"},pc={key:5},mc={class:"text-gray-900 dark:text-white font-semibold text-red-600"},vc={key:0},fc={key:1},yc={key:2},bc={key:6},hc={class:"text-gray-900 dark:text-white font-semibold"},kc={key:7},_c={class:"text-gray-900 dark:text-white font-semibold"},wc={key:8},Cc={class:"text-gray-900 dark:text-white"},Bc={key:9},$c={class:"text-gray-900 dark:text-white"},Nc={key:10},Dc={class:"text-gray-900 dark:text-white"},Ac={key:11},Sc={class:"text-gray-900 dark:text-white"},jc={key:12},Tc={class:"text-gray-900 dark:text-white"},Pc={key:0,class:"mt-4"},Vc={class:"text-gray-900 dark:text-white"},Ec={key:1,class:"space-y-4"},Rc={class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},Mc={key:0,class:"text-sm font-normal text-gray-600 dark:text-gray-400"},Ic={key:0,class:"mb-3"},Oc={class:"text-gray-900 dark:text-white"},Fc={key:1,class:"mb-3"},Lc={class:"text-gray-900 dark:text-white"},qc={key:1,class:"mb-3 grid grid-cols-1 md:grid-cols-2 gap-2 text-xs"},Uc={class:"text-gray-900 dark:text-white font-medium"},zc={key:0},Gc={class:"text-gray-900 dark:text-white"},Wc={key:1},Kc={class:"text-gray-900 dark:text-white"},Hc={key:2},Jc={class:"text-gray-900 dark:text-white"},Yc={class:"overflow-x-auto mb-3"},Qc={class:"min-w-full text-xs"},Zc={class:"bg-gray-100 dark:bg-gray-700"},Xc={key:0,class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},eg={class:"px-2 py-1 text-gray-900 dark:text-white"},tg={key:0,class:"text-xs text-gray-500 italic mt-1"},ag={class:"px-2 py-1 text-gray-900 dark:text-white"},sg={class:"px-2 py-1 text-gray-900 dark:text-white"},rg={class:"px-2 py-1 text-gray-900 dark:text-white"},lg={key:0,class:"px-2 py-1 text-xs"},og={key:0,class:"text-red-600"},ng={key:0},ig={key:1},dg={key:1,class:"text-gray-400"},ug={class:"px-2 py-1 text-gray-900 dark:text-white font-semibold"},cg={class:"bg-gray-50 dark:bg-gray-800"},gg=["colspan"],xg={key:0},pg={class:"px-2 py-1 font-semibold text-gray-900 dark:text-white"},mg={key:2,class:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600"},vg={class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"},fg={class:"flex flex-wrap gap-2"},yg=["onClick"],bg=["src","alt"],hg=["title"],kg=["href","onClick"],_g={key:2,class:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg"},wg={class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},Cg={class:"flex flex-wrap gap-2"},Bg=["onClick"],$g=["src","alt"],Ng=["title"],Dg=["href","onClick"],Ag={key:3,class:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg"},Sg={class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},jg={class:"flex flex-wrap gap-2"},Tg=["onClick"],Pg=["src","alt"],Vg=["title"],Eg=["href","onClick"],Rg={class:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"},Mg=["disabled"],Ig={key:0,class:"fa fa-times mr-2"},Og={key:1,class:"fa fa-spinner fa-spin mr-2"},Fg=["disabled"],Lg={key:0,class:"fa fa-check mr-2"},qg={key:1,class:"fa fa-spinner fa-spin mr-2"},Ug=["src","alt"],zg={class:"text-center mt-4 text-white"},Gg={class:"text-sm"},Wg={class:"flex items-center justify-between mb-4"},Kg={class:"flex items-center gap-2"},Hg={key:0,class:"mb-4 p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg flex items-center justify-between"},Jg={class:"text-sm font-medium text-orange-800 dark:text-orange-200"},Yg={class:"mb-4 space-y-3"},Qg={class:"flex flex-wrap gap-3"},Zg={class:"flex items-center justify-between"},Xg={class:"text-sm text-gray-600 dark:text-gray-400"},ex={key:1,class:"text-center py-8"},tx={key:2,class:"text-center py-8 text-gray-500 dark:text-gray-400"},ax={key:3,class:"space-y-2"},sx=["onClick"],rx={class:"flex items-center justify-between"},lx={class:"flex items-center gap-2 flex-1"},ox=["checked","onClick"],nx={class:"flex-1"},ix={class:"text-xs text-orange-500 font-medium"},dx={key:4,class:"mt-4 flex items-center justify-between"},ux={class:"text-sm text-gray-600 dark:text-gray-400"},cx={class:"flex gap-2"},gx=["disabled"],xx=["onClick"],px={key:1,class:"px-3 py-1 text-gray-500"},mx=["disabled"],vx={__name:"NonFoodPaymentApprovalCard",props:{isNight:{type:Boolean,default:!1}},emits:["approved","rejected"],setup(C,{expose:Ve,emit:te}){const le=te,z=p([]),ue=p(!1),J=p(!1),T=p(!1),b=p(new Set),fe=p(!1),we=p(!1),ne=p(new Set),be=ve(()=>z.value.length);function P(m){return m?new Date(m).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}async function D(){ue.value=!0;try{const m=new Date().getTime(),d=await M.get(`/api/non-food-payment/pending-approvals?t=${m}`);d.data.success&&(z.value=d.data.non_food_payments||[])}catch(m){console.error("Error loading pending Non Food Payment approvals:",m)}finally{ue.value=!1}}const N=p(!1),j=p(null),ee=p(!1);async function O(m){var d,ae,ye;try{ke.value&&(ke.value=!1),ee.value=!0,N.value=!0;const Ae=await M.get(`/api/non-food-payment/${m}`);Ae.data&&Ae.data.success&&Ae.data.non_food_payment?j.value=Ae.data.non_food_payment:(v.fire("Error",((d=Ae.data)==null?void 0:d.message)||"Gagal memuat detail Non Food Payment","error"),H())}catch(Ae){console.error("Error loading Non Food Payment details:",Ae);const Ee=((ye=(ae=Ae.response)==null?void 0:ae.data)==null?void 0:ye.message)||Ae.message||"Gagal memuat detail Non Food Payment";v.fire("Error",Ee,"error"),H()}finally{ee.value=!1}}function H(){N.value=!1,j.value=null}function xe(m){b.value.has(m)?b.value.delete(m):b.value.add(m)}function V(){z.value.forEach(m=>{b.value.add(m.id)})}async function Ce(){if(b.value.size===0){v.fire("Warning","Pilih minimal satu Non Food Payment untuk di-approve","warning");return}if((await v.fire({title:"Approve Multiple Non Food Payments?",text:`Apakah Anda yakin ingin approve ${b.value.size} Non Food Payment?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#ea580c"})).isConfirmed)try{v.fire({title:"Processing...",text:"Sedang memproses approval...",allowOutsideClick:!1,didOpen:()=>{v.showLoading()}});const ae=Array.from(b.value).map(async A=>{try{return await M.post(`/non-food-payments/${A}/approve`,{note:""}),{success:!0,nfpId:A}}catch(Me){return{error:Me,nfpId:A}}}),ye=await Promise.all(ae),Ae=ye.filter(A=>A.success).length,Ee=ye.filter(A=>A.error).length,Oe=ye.filter(A=>A.success&&A.nfpId).map(A=>A.nfpId);b.value.clear(),fe.value=!1,await new Promise(A=>setTimeout(A,500)),await D(),Ee===0?(v.fire("Success",`${Ae} Non Food Payment berhasil disetujui`,"success"),Oe.forEach(A=>{A&&le("approved",A)})):(v.fire("Partial Success",`${Ae} berhasil, ${Ee} gagal`,"warning"),Oe.forEach(A=>{A&&le("approved",A)}))}catch(d){console.error("Error approving multiple Non Food Payments:",d),v.fire("Error","Gagal menyetujui Non Food Payments","error")}}function De(m){ne.value.has(m)?ne.value.delete(m):ne.value.add(m)}function Ne(){_.value.forEach(m=>{ne.value.add(m.id)})}async function Be(){if(ne.value.size===0){v.fire("Warning","Pilih minimal satu Non Food Payment untuk di-approve","warning");return}if((await v.fire({title:"Approve Multiple Non Food Payments?",text:`Apakah Anda yakin ingin approve ${ne.value.size} Non Food Payment?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#ea580c"})).isConfirmed)try{v.fire({title:"Processing...",text:"Sedang memproses approval...",allowOutsideClick:!1,didOpen:()=>{v.showLoading()}});const ae=Array.from(ne.value).map(async A=>{try{return await M.post(`/non-food-payments/${A}/approve`,{note:""}),{success:!0,nfpId:A}}catch(Me){return{error:Me,nfpId:A}}}),ye=await Promise.all(ae),Ae=ye.filter(A=>A.success).length,Ee=ye.filter(A=>A.error).length,Oe=ye.filter(A=>A.success&&A.nfpId).map(A=>A.nfpId);ne.value.clear(),we.value=!1,await new Promise(A=>setTimeout(A,500)),await h(),await D(),Ee===0?(v.fire("Success",`${Ae} Non Food Payment berhasil disetujui`,"success"),Oe.forEach(A=>{A&&le("approved",A)})):(v.fire("Partial Success",`${Ae} berhasil, ${Ee} gagal`,"warning"),Oe.forEach(A=>{A&&le("approved",A)}))}catch(d){console.error("Error approving multiple Non Food Payments:",d),v.fire("Error","Gagal menyetujui Non Food Payments","error")}}async function ie(){var m,d,ae,ye;if(!(!j.value||J.value)){J.value=!0;try{const Ae=await M.post(`/non-food-payments/${j.value.id}/approve`,{note:""},{headers:{Accept:"application/json","Content-Type":"application/json"}});if(console.log("Approve response:",Ae.data),Ae.data&&Ae.data.success){const Ee=(m=j.value)==null?void 0:m.id;v.fire("Success",Ae.data.message||"Non Food Payment berhasil disetujui","success"),H(),await new Promise(Oe=>setTimeout(Oe,500)),await D(),Ee&&le("approved",Ee)}else{const Ee=((d=Ae.data)==null?void 0:d.message)||"Gagal menyetujui Non Food Payment";console.error("Approve failed:",Ae.data),v.fire("Error",Ee,"error")}}catch(Ae){console.error("Error approving Non Food Payment:",Ae),console.error("Error response:",Ae.response);const Ee=((ye=(ae=Ae.response)==null?void 0:ae.data)==null?void 0:ye.message)||Ae.message||"Gagal menyetujui Non Food Payment";v.fire("Error",Ee,"error")}finally{J.value=!1}}}function Se(){v.fire({title:"Tolak Non Food Payment",input:"textarea",inputLabel:"Alasan Penolakan",inputPlaceholder:"Masukkan alasan penolakan...",inputAttributes:{"aria-label":"Masukkan alasan penolakan"},showCancelButton:!0,confirmButtonText:"Tolak",cancelButtonText:"Batal",confirmButtonColor:"#ef4444",inputValidator:m=>{if(!m)return"Alasan penolakan harus diisi!"}}).then(async m=>{var d,ae,ye;if(m.isConfirmed&&j.value){T.value=!0;try{if((await M.post(`/non-food-payments/${j.value.id}/reject`,{note:m.value})).data.success){const Ee=(d=j.value)==null?void 0:d.id;v.fire("Success","Non Food Payment berhasil ditolak","success"),H(),await new Promise(Oe=>setTimeout(Oe,500)),await D(),Ee&&le("rejected",Ee)}}catch(Ae){console.error("Error rejecting Non Food Payment:",Ae),v.fire("Error",((ye=(ae=Ae.response)==null?void 0:ae.data)==null?void 0:ye.message)||"Gagal menolak Non Food Payment","error")}finally{T.value=!1}}})}const ke=p(!1),R=p([]),ge=p(!1),he=p(""),se=p(null),W=p("");function re(m){if(!m)return!1;const d=[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg"],ae=m.toLowerCase();return d.some(ye=>ae.endsWith(ye))}function L(m){if(!m)return"fa fa-file";const d=m.toLowerCase();return d.endsWith(".pdf")?"fa fa-file-pdf":d.endsWith(".doc")||d.endsWith(".docx")?"fa fa-file-word":d.endsWith(".xls")||d.endsWith(".xlsx")?"fa fa-file-excel":"fa fa-file"}function q(m,d){se.value=m,W.value=d}function _e(){se.value=null,W.value=""}function Z(m,d){}function F(m){m.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100"%3E%3Crect fill="%23ddd" width="100" height="100"/%3E%3Ctext fill="%23999" font-family="sans-serif" font-size="12" x="50%25" y="50%25" text-anchor="middle" dy=".3em"%3EImage%3C/text%3E%3C/svg%3E'}p("");const w=p(""),ce=p("newest"),E=p(1),g=p(10);async function h(){ge.value=!0;try{const m=await M.get("/api/non-food-payment/pending-approvals?limit=500");m.data.success&&(R.value=m.data.non_food_payments||[],E.value=1)}catch(m){console.error("Error loading all Non Food Payment approvals:",m)}finally{ge.value=!1}}function y(){ke.value=!0,h(),we.value=!1,ne.value.clear()}function n(){ke.value=!1}const $=ve(()=>{let m=[...R.value];if(he.value){const d=he.value.toLowerCase();m=m.filter(ae=>{var A,Me;const ye=(ae.payment_number||"").toLowerCase(),Ae=(((A=ae.supplier)==null?void 0:A.name)||"").toLowerCase(),Ee=(((Me=ae.creator)==null?void 0:Me.nama_lengkap)||"").toLowerCase(),Oe=(ae.source_number||"").toLowerCase();return ye.includes(d)||Ae.includes(d)||Ee.includes(d)||Oe.includes(d)})}if(w.value){const d=new Date,ae=new Date(d.getFullYear(),d.getMonth(),d.getDate());m=m.filter(ye=>{const Ae=new Date(ye.payment_date);switch(w.value){case"today":return Ae>=ae;case"week":return Ae>=new Date(ae.getTime()-7*24*60*60*1e3);case"month":return Ae>=new Date(ae.getTime()-30*24*60*60*1e3);default:return!0}})}return m.sort((d,ae)=>{switch(ce.value){case"oldest":return new Date(d.payment_date||d.created_at)-new Date(ae.payment_date||ae.created_at);case"number":return(d.payment_number||"").localeCompare(ae.payment_number||"");case"amount":return(ae.amount||0)-(d.amount||0);case"newest":default:return new Date(ae.payment_date||ae.created_at)-new Date(d.payment_date||d.created_at)}}),m}),f=ve(()=>Math.ceil($.value.length/g.value)),_=ve(()=>{const m=(E.value-1)*g.value,d=m+g.value;return $.value.slice(m,d)}),Y=ve(()=>{const m=f.value,d=E.value,ae=[];if(m<=7)for(let ye=1;ye<=m;ye++)ae.push(ye);else if(d<=3){for(let ye=1;ye<=5;ye++)ae.push(ye);ae.push("..."),ae.push(m)}else if(d>=m-2){ae.push(1),ae.push("...");for(let ye=m-4;ye<=m;ye++)ae.push(ye)}else{ae.push(1),ae.push("...");for(let ye=d-1;ye<=d+1;ye++)ae.push(ye);ae.push("..."),ae.push(m)}return ae});function k(m){m>=1&&m<=f.value&&(E.value=m)}return it([he,w,ce],()=>{E.value=1}),st(()=>{D()}),Ve({loadPendingApprovals:D,refresh:D}),(m,d)=>{var ae,ye,Ae,Ee,Oe;return s(),r("div",null,[be.value>0?(s(),r("div",_0,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl",C.isNight?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",w0,[e("div",C0,[d[18]||(d[18]=e("div",{class:"w-3 h-3 rounded-full bg-orange-500 animate-pulse"},null,-1)),e("h3",{class:u(["text-lg font-bold",C.isNight?"text-white":"text-slate-800"])},d[17]||(d[17]=[e("i",{class:"fa fa-money-bill-wave mr-2 text-orange-500"},null,-1),c(" Non Food Payment Approval ")]),2)]),e("div",B0,[fe.value?(s(),r("button",{key:1,onClick:d[1]||(d[1]=Q(A=>{fe.value=!1,b.value.clear()},["stop"])),class:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 transition"},d[20]||(d[20]=[e("i",{class:"fa fa-times mr-1"},null,-1),c("Cancel ")]))):(s(),r("button",{key:0,onClick:d[0]||(d[0]=Q(A=>fe.value=!0,["stop"])),class:"text-xs bg-orange-500 text-white px-2 py-1 rounded hover:bg-orange-600 transition"},d[19]||(d[19]=[e("i",{class:"fa fa-check-square mr-1"},null,-1),c("Multi Approve ")]))),e("div",$0,a(be.value),1)])]),fe.value&&b.value.size>0?(s(),r("div",N0,[e("span",D0,a(b.value.size)+" item dipilih ",1),e("div",{class:"flex gap-2"},[e("button",{onClick:V,class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition"},d[21]||(d[21]=[e("i",{class:"fa fa-check-double mr-1"},null,-1),c("Select All ")])),e("button",{onClick:Ce,class:"text-xs bg-orange-600 text-white px-2 py-1 rounded hover:bg-orange-700 transition"},d[22]||(d[22]=[e("i",{class:"fa fa-check mr-1"},null,-1),c("Approve Selected ")]))])])):i("",!0),ue.value?(s(),r("div",A0,[d[23]||(d[23]=e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-orange-500"},null,-1)),e("p",{class:u(["text-sm mt-2",C.isNight?"text-slate-300":"text-slate-600"])},"Memuat data...",2)])):(s(),r("div",S0,[(s(!0),r(I,null,K(z.value.slice(0,3),A=>{var Me,Pe;return s(),r("div",{key:"non-food-payment-approval-"+A.id,onClick:ze=>fe.value?xe(A.id):O(A.id),class:u(["p-3 rounded-lg transition-all duration-200",[fe.value?"cursor-default":"cursor-pointer hover:scale-105",C.isNight?"bg-slate-700/50 hover:bg-slate-600/50":"bg-orange-50 hover:bg-orange-100",b.value.has(A.id)?"ring-2 ring-orange-500":""]])},[e("div",T0,[e("div",P0,[fe.value?(s(),r("input",{key:0,type:"checkbox",checked:b.value.has(A.id),onClick:Q(ze=>xe(A.id),["stop"]),class:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500"},null,8,V0)):i("",!0),e("div",E0,[e("div",{class:u(["font-semibold text-sm",C.isNight?"text-white":"text-slate-800"])},a(A.payment_number),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-300":"text-slate-600"])},a(((Me=A.supplier)==null?void 0:Me.name)||"Unknown Supplier"),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[d[24]||(d[24]=e("i",{class:"fa fa-credit-card mr-1 text-orange-600"},null,-1)),c(" "+a(A.payment_method),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[d[25]||(d[25]=e("i",{class:"fa fa-file-invoice mr-1 text-orange-600"},null,-1)),c(" "+a(A.payment_type)+": "+a(A.source_number||"-"),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])}," Rp "+a(new Intl.NumberFormat("id-ID").format(A.amount)),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[d[26]||(d[26]=e("i",{class:"fa fa-user mr-1 text-orange-500"},null,-1)),c(a((Pe=A.creator)==null?void 0:Pe.nama_lengkap),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},a(P(A.payment_date)),3)])]),e("div",R0,[d[27]||(d[27]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(A.approver_name||A.approval_level||"Finance Manager"),1)])])],10,j0)}),128)),z.value.length>3?(s(),r("div",M0,[e("button",{onClick:y,class:"text-sm text-orange-500 hover:text-orange-700 font-medium"}," Lihat "+a(z.value.length-3)+" Non Food Payment lainnya... ",1)])):i("",!0)]))],2)])):i("",!0),(s(),He(Ze,{to:"body"},[N.value&&j.value?(s(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]",onClick:H},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",onClick:d[5]||(d[5]=Q(()=>{},["stop"]))},[e("div",{class:"flex items-center justify-between mb-4"},[d[29]||(d[29]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-money-bill-wave mr-2 text-orange-500"}),c(" Detail Non Food Payment Approval ")],-1)),e("button",{onClick:H,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},d[28]||(d[28]=[e("i",{class:"fa fa-times text-xl"},null,-1)]))]),ee.value?(s(),r("div",I0,d[30]||(d[30]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-400"},"Memuat detail...",-1)]))):(s(),r("div",O0,[e("div",F0,[d[41]||(d[41]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Informasi Dasar",-1)),e("div",L0,[e("div",null,[d[31]||(d[31]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Payment Number",-1)),e("p",q0,a(j.value.payment_number),1)]),e("div",null,[d[32]||(d[32]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Payment Date",-1)),e("p",U0,a(new Date(j.value.payment_date).toLocaleDateString("id-ID")),1)]),e("div",null,[d[33]||(d[33]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Supplier",-1)),e("p",z0,a(((ae=j.value.supplier)==null?void 0:ae.name)||"Unknown"),1)]),e("div",null,[d[34]||(d[34]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Payment Method",-1)),e("p",G0,a(j.value.payment_method),1)]),e("div",null,[d[35]||(d[35]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Amount",-1)),e("p",W0," Rp "+a(new Intl.NumberFormat("id-ID").format(j.value.amount)),1)]),e("div",null,[d[36]||(d[36]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Payment Type",-1)),e("p",K0,a(j.value.payment_type)+": "+a(((ye=j.value.source_info)==null?void 0:ye.number)||((Ae=j.value.source_info)==null?void 0:Ae.pr_number)||"-"),1)]),e("div",null,[d[37]||(d[37]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Created By",-1)),e("p",H0,a(((Ee=j.value.creator)==null?void 0:Ee.nama_lengkap)||"Unknown"),1)]),j.value.due_date?(s(),r("div",J0,[d[38]||(d[38]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Due Date",-1)),e("p",Y0,a(new Date(j.value.due_date).toLocaleDateString("id-ID")),1)])):i("",!0)]),j.value.description?(s(),r("div",Q0,[d[39]||(d[39]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Description",-1)),e("p",Z0,a(j.value.description),1)])):i("",!0),j.value.notes?(s(),r("div",X0,[d[40]||(d[40]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Notes",-1)),e("p",ec,a(j.value.notes),1)])):i("",!0)]),j.value.source_info?(s(),r("div",tc,[e("h4",ac,[d[42]||(d[42]=e("i",{class:"fa fa-file-invoice mr-2 text-blue-500"},null,-1)),c(" Informasi "+a(j.value.source_info.type),1)]),e("div",sc,[j.value.source_info.type==="PO"?(s(),r("div",rc,[d[43]||(d[43]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"PO Number",-1)),e("p",lc,a(j.value.source_info.number),1)])):i("",!0),j.value.source_info.type==="PR"?(s(),r("div",oc,[d[44]||(d[44]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"PR Number",-1)),e("p",nc,a(j.value.source_info.pr_number),1)])):i("",!0),j.value.source_info.date?(s(),r("div",ic,[d[45]||(d[45]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Date",-1)),e("p",dc,a(new Date(j.value.source_info.date).toLocaleDateString("id-ID")),1)])):i("",!0),j.value.source_info.title?(s(),r("div",uc,[d[46]||(d[46]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Title",-1)),e("p",cc,a(j.value.source_info.title),1)])):i("",!0),j.value.source_info.subtotal?(s(),r("div",gc,[d[47]||(d[47]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Subtotal",-1)),e("p",xc," Rp "+a(new Intl.NumberFormat("id-ID").format(j.value.source_info.subtotal)),1)])):i("",!0),j.value.source_info.type==="PO"&&(j.value.source_info.discount_total_percent>0||j.value.source_info.discount_total_amount>0)?(s(),r("div",pc,[d[48]||(d[48]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Diskon Total PO",-1)),e("p",mc,[j.value.source_info.discount_total_percent>0?(s(),r("span",vc,a(j.value.source_info.discount_total_percent)+"%",1)):i("",!0),j.value.source_info.discount_total_percent>0&&j.value.source_info.discount_total_amount>0?(s(),r("span",fc," / ")):i("",!0),j.value.source_info.discount_total_amount>0?(s(),r("span",yc,"Rp "+a(new Intl.NumberFormat("id-ID").format(j.value.source_info.discount_total_amount)),1)):i("",!0)])])):i("",!0),j.value.source_info.grand_total?(s(),r("div",bc,[d[49]||(d[49]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Grand Total",-1)),e("p",hc," Rp "+a(new Intl.NumberFormat("id-ID").format(j.value.source_info.grand_total)),1)])):i("",!0),j.value.source_info.amount?(s(),r("div",kc,[d[50]||(d[50]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Amount",-1)),e("p",_c," Rp "+a(new Intl.NumberFormat("id-ID").format(j.value.source_info.amount)),1)])):i("",!0),j.value.source_info.division?(s(),r("div",wc,[d[51]||(d[51]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Division",-1)),e("p",Cc,a(j.value.source_info.division.nama_divisi),1)])):i("",!0),j.value.source_info.outlet?(s(),r("div",Bc,[d[52]||(d[52]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Outlet",-1)),e("p",$c,a(j.value.source_info.outlet.nama_outlet),1)])):i("",!0),j.value.source_info.type==="PR"&&(j.value.source_info.creator||j.value.source_info.created_by_name)?(s(),r("div",Nc,[d[54]||(d[54]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Created By",-1)),e("p",Dc,[d[53]||(d[53]=e("i",{class:"fa fa-user mr-1 text-gray-400"},null,-1)),c(" "+a(((Oe=j.value.source_info.creator)==null?void 0:Oe.nama_lengkap)||j.value.source_info.created_by_name||"-"),1)])])):i("",!0),j.value.source_info.supplier?(s(),r("div",Ac,[d[55]||(d[55]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Supplier",-1)),e("p",Sc,a(j.value.source_info.supplier.name),1)])):i("",!0),j.value.source_info.source_pr?(s(),r("div",jc,[d[56]||(d[56]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Source PR",-1)),e("p",Tc,a(j.value.source_info.source_pr.pr_number)+" - "+a(j.value.source_info.source_pr.title),1)])):i("",!0)]),j.value.source_info.description?(s(),r("div",Pc,[d[57]||(d[57]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Description",-1)),e("p",Vc,a(j.value.source_info.description),1)])):i("",!0)])):i("",!0),j.value.source_info&&j.value.source_info.items_by_outlet&&j.value.source_info.items_by_outlet.length>0?(s(),r("div",Ec,[(s(!0),r(I,null,K(j.value.source_info.items_by_outlet,(A,Me)=>(s(),r("div",{key:"outlet-"+Me,class:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg"},[e("h4",Rc,[d[58]||(d[58]=e("i",{class:"fa fa-store mr-2 text-green-500"},null,-1)),c(" "+a(A.outlet_name)+" ",1),A.pr_number&&j.value.source_info&&j.value.source_info.type==="PO"?(s(),r("span",Mc," (PR: "+a(A.pr_number)+") ",1)):i("",!0)]),j.value.source_info&&j.value.source_info.type==="PO"?(s(),r(I,{key:0},[A.pr_title?(s(),r("div",Ic,[d[59]||(d[59]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"PR Title",-1)),e("p",Oc,a(A.pr_title),1)])):i("",!0),A.pr_description?(s(),r("div",Fc,[d[60]||(d[60]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"PR Description",-1)),e("p",Lc,a(A.pr_description),1)])):i("",!0)],64)):i("",!0),A.category_name?(s(),r("div",qc,[e("div",null,[d[61]||(d[61]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Category: ",-1)),e("span",Uc,a(A.category_name),1)]),A.category_division?(s(),r("div",zc,[d[62]||(d[62]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Division: ",-1)),e("span",Gc,a(A.category_division),1)])):i("",!0),A.category_subcategory?(s(),r("div",Wc,[d[63]||(d[63]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Subcategory: ",-1)),e("span",Kc,a(A.category_subcategory),1)])):i("",!0),A.category_budget_type?(s(),r("div",Hc,[d[64]||(d[64]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Budget Type: ",-1)),e("span",Jc,a(A.category_budget_type),1)])):i("",!0)])):i("",!0),e("div",Yc,[e("table",Qc,[e("thead",Zc,[e("tr",null,[d[65]||(d[65]=e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Item",-1)),d[66]||(d[66]=e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Qty",-1)),d[67]||(d[67]=e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Unit",-1)),d[68]||(d[68]=e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Price",-1)),j.value.source_info&&j.value.source_info.type==="PO"?(s(),r("th",Xc,"Diskon")):i("",!0),d[69]||(d[69]=e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Total",-1))])]),e("tbody",null,[(s(!0),r(I,null,K(A.items,Pe=>(s(),r("tr",{key:"item-"+Pe.id,class:"border-t border-gray-200 dark:border-gray-600"},[e("td",eg,[c(a(Pe.item_name)+" ",1),Pe.others_notes?(s(),r("div",tg," Note: "+a(Pe.others_notes),1)):i("",!0)]),e("td",ag,a(Pe.quantity||0),1),e("td",sg,a(Pe.unit||"-"),1),e("td",rg,"Rp "+a(new Intl.NumberFormat("id-ID").format(Pe.price||0)),1),j.value.source_info&&j.value.source_info.type==="PO"?(s(),r("td",lg,[Pe.discount_percent>0||Pe.discount_amount>0?(s(),r("div",og,[Pe.discount_percent>0?(s(),r("div",ng,a(Pe.discount_percent)+"%",1)):i("",!0),Pe.discount_amount>0?(s(),r("div",ig,"Rp "+a(new Intl.NumberFormat("id-ID").format(Pe.discount_amount||0)),1)):i("",!0)])):(s(),r("span",dg,"-"))])):i("",!0),e("td",ug,"Rp "+a(new Intl.NumberFormat("id-ID").format(Pe.total||0)),1)]))),128))]),e("tfoot",cg,[e("tr",null,[e("td",{colspan:j.value.source_info&&j.value.source_info.type==="PO"?4:3,class:"px-2 py-1 text-right font-medium text-gray-700 dark:text-gray-300"},"Subtotal:",8,gg),j.value.source_info&&j.value.source_info.type==="PO"?(s(),r("td",xg)):i("",!0),e("td",pg," Rp "+a(new Intl.NumberFormat("id-ID").format(A.subtotal||0)),1)])])])]),A.pr_attachments&&A.pr_attachments.length>0?(s(),r("div",mg,[e("h5",vg,[d[70]||(d[70]=e("i",{class:"fa fa-paperclip mr-1 text-green-500"},null,-1)),c(" PR Attachments ("+a(A.pr_attachments.length)+") ",1)]),e("div",fg,[(s(!0),r(I,null,K(A.pr_attachments,Pe=>(s(),r("div",{key:"pr-attachment-"+Pe.id,class:"relative"},[re(Pe.file_name)?(s(),r("div",{key:0,onClick:ze=>q(`/purchase-requisitions/attachments/${Pe.id}/download`,Pe.file_name),class:"cursor-pointer group"},[e("img",{src:`/purchase-requisitions/attachments/${Pe.id}/download`,alt:Pe.file_name,class:"w-20 h-20 object-cover rounded border-2 border-green-200 dark:border-green-700 hover:border-green-400 dark:hover:border-green-500 transition-all hover:scale-105 shadow-md",onError:d[2]||(d[2]=ze=>F(ze))},null,40,bg),d[71]||(d[71]=e("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 rounded transition-all flex items-center justify-center"},[e("i",{class:"fa fa-search-plus text-white opacity-0 group-hover:opacity-100 transition-opacity"})],-1)),e("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1 truncate w-20",title:Pe.file_name},a(Pe.file_name),9,hg)],8,yg)):(s(),r("a",{key:1,href:`/purchase-requisitions/attachments/${Pe.id}/download`,onClick:ze=>(Pe.file_name,void 0),class:"inline-flex items-center px-2 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded text-xs hover:bg-green-200 dark:hover:bg-green-800 transition"},[e("i",{class:u(L(Pe.file_name)+" mr-1")},null,2),c(" "+a(Pe.file_name),1)],8,kg))]))),128))])])):i("",!0)]))),128))])):i("",!0),j.value.po_attachments&&j.value.po_attachments.length>0?(s(),r("div",_g,[e("h4",wg,[d[72]||(d[72]=e("i",{class:"fa fa-paperclip mr-2 text-purple-500"},null,-1)),c(" PO Attachments ("+a(j.value.po_attachments.length)+") ",1)]),e("div",Cg,[(s(!0),r(I,null,K(j.value.po_attachments,A=>(s(),r("div",{key:"po-attachment-"+A.id,class:"relative"},[re(A.file_name)?(s(),r("div",{key:0,onClick:Me=>q(`/po-ops/attachments/${A.id}/download`,A.file_name),class:"cursor-pointer group"},[e("img",{src:`/po-ops/attachments/${A.id}/download`,alt:A.file_name,class:"w-24 h-24 object-cover rounded border-2 border-purple-200 dark:border-purple-700 hover:border-purple-400 dark:hover:border-purple-500 transition-all hover:scale-105 shadow-md",onError:d[3]||(d[3]=Me=>F(Me))},null,40,$g),d[73]||(d[73]=e("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 rounded transition-all flex items-center justify-center"},[e("i",{class:"fa fa-search-plus text-white opacity-0 group-hover:opacity-100 transition-opacity"})],-1)),e("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1 truncate w-24",title:A.file_name},a(A.file_name),9,Ng)],8,Bg)):(s(),r("a",{key:1,href:`/po-ops/attachments/${A.id}/download`,onClick:Me=>(A.file_name,void 0),class:"inline-flex items-center px-3 py-2 bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded text-sm hover:bg-purple-200 dark:hover:bg-purple-800 transition"},[e("i",{class:u(L(A.file_name)+" mr-2")},null,2),c(" "+a(A.file_name),1)],8,Dg))]))),128))])])):i("",!0),j.value.pr_attachments&&j.value.pr_attachments.length>0&&j.value.source_info&&j.value.source_info.type==="PR"?(s(),r("div",Ag,[e("h4",Sg,[d[74]||(d[74]=e("i",{class:"fa fa-paperclip mr-2 text-purple-500"},null,-1)),c(" PR Attachments ("+a(j.value.pr_attachments.length)+") ",1)]),e("div",jg,[(s(!0),r(I,null,K(j.value.pr_attachments,A=>(s(),r("div",{key:"pr-attachment-"+A.id,class:"relative"},[re(A.file_name)?(s(),r("div",{key:0,onClick:Me=>q(`/purchase-requisitions/attachments/${A.id}/download`,A.file_name),class:"cursor-pointer group"},[e("img",{src:`/purchase-requisitions/attachments/${A.id}/download`,alt:A.file_name,class:"w-24 h-24 object-cover rounded border-2 border-purple-200 dark:border-purple-700 hover:border-purple-400 dark:hover:border-purple-500 transition-all hover:scale-105 shadow-md",onError:d[4]||(d[4]=Me=>F(Me))},null,40,Pg),d[75]||(d[75]=e("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 rounded transition-all flex items-center justify-center"},[e("i",{class:"fa fa-search-plus text-white opacity-0 group-hover:opacity-100 transition-opacity"})],-1)),e("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1 truncate w-24",title:A.file_name},a(A.file_name),9,Vg)],8,Tg)):(s(),r("a",{key:1,href:`/purchase-requisitions/attachments/${A.id}/download`,onClick:Me=>(A.file_name,void 0),class:"inline-flex items-center px-3 py-2 bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded text-sm hover:bg-purple-200 dark:hover:bg-purple-800 transition"},[e("i",{class:u(L(A.file_name)+" mr-2")},null,2),c(" "+a(A.file_name),1)],8,Eg))]))),128))])])):i("",!0),e("div",Rg,[e("button",{onClick:Se,disabled:T.value,class:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[T.value?(s(),r("i",Og)):(s(),r("i",Ig)),c(" "+a(T.value?"Memproses...":"Tolak"),1)],8,Mg),e("button",{onClick:ie,disabled:J.value,class:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[J.value?(s(),r("i",qg)):(s(),r("i",Lg)),c(" "+a(J.value?"Memproses...":"Setujui"),1)],8,Fg)])]))])])):i("",!0)])),(s(),He(Ze,{to:"body"},[se.value?(s(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[10000]",onClick:_e},[e("div",{class:"relative max-w-7xl max-h-[95vh] p-4",onClick:d[6]||(d[6]=Q(()=>{},["stop"]))},[e("button",{onClick:_e,class:"absolute top-2 right-2 text-white hover:text-gray-300 text-3xl font-bold z-10 bg-black bg-opacity-50 rounded-full w-10 h-10 flex items-center justify-center"},d[76]||(d[76]=[e("i",{class:"fa fa-times"},null,-1)])),e("img",{src:se.value,alt:W.value,class:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl"},null,8,Ug),e("div",zg,[e("p",Gg,a(W.value),1)])])])):i("",!0)])),(s(),He(Ze,{to:"body"},[ke.value?(s(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998]",onClick:n},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-5xl mx-4 max-h-[90vh] overflow-y-auto",onClick:d[16]||(d[16]=Q(()=>{},["stop"]))},[e("div",Wg,[d[80]||(d[80]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-list mr-2 text-orange-500"}),c(" Semua Non Food Payment Pending ")],-1)),e("div",Kg,[we.value?(s(),r("button",{key:1,onClick:d[8]||(d[8]=Q(A=>{we.value=!1,ne.value.clear()},["stop"])),class:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 transition"},d[78]||(d[78]=[e("i",{class:"fa fa-times mr-1"},null,-1),c("Cancel ")]))):(s(),r("button",{key:0,onClick:d[7]||(d[7]=Q(A=>we.value=!0,["stop"])),class:"text-xs bg-orange-500 text-white px-2 py-1 rounded hover:bg-orange-600 transition"},d[77]||(d[77]=[e("i",{class:"fa fa-check-square mr-1"},null,-1),c("Multi Approve ")]))),e("button",{onClick:n,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},d[79]||(d[79]=[e("i",{class:"fa fa-times text-xl"},null,-1)]))])]),we.value&&ne.value.size>0?(s(),r("div",Hg,[e("span",Jg,a(ne.value.size)+" item dipilih ",1),e("div",{class:"flex gap-2"},[e("button",{onClick:Ne,class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition"},d[81]||(d[81]=[e("i",{class:"fa fa-check-double mr-1"},null,-1),c("Select All ")])),e("button",{onClick:Be,class:"text-xs bg-orange-600 text-white px-2 py-1 rounded hover:bg-orange-700 transition"},d[82]||(d[82]=[e("i",{class:"fa fa-check mr-1"},null,-1),c("Approve Selected ")]))])])):i("",!0),e("div",Yg,[e("div",Qg,[de(e("input",{"onUpdate:modelValue":d[9]||(d[9]=A=>he.value=A),type:"text",placeholder:"Cari nomor, supplier, creator...",class:"flex-1 min-w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[Ge,he.value]]),de(e("select",{"onUpdate:modelValue":d[10]||(d[10]=A=>w.value=A),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},d[83]||(d[83]=[e("option",{value:""},"Semua Tanggal",-1),e("option",{value:"today"},"Hari Ini",-1),e("option",{value:"week"},"Minggu Ini",-1),e("option",{value:"month"},"Bulan Ini",-1)]),512),[[Te,w.value]]),de(e("select",{"onUpdate:modelValue":d[11]||(d[11]=A=>ce.value=A),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},d[84]||(d[84]=[e("option",{value:"newest"},"Terbaru",-1),e("option",{value:"oldest"},"Terlama",-1),e("option",{value:"number"},"Nomor",-1),e("option",{value:"amount"},"Jumlah",-1)]),512),[[Te,ce.value]])]),e("div",Zg,[e("div",Xg," Menampilkan "+a(_.value.length)+" dari "+a($.value.length)+" Non Food Payment ",1),de(e("select",{"onUpdate:modelValue":d[12]||(d[12]=A=>g.value=A),onChange:d[13]||(d[13]=A=>E.value=1),class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"},d[85]||(d[85]=[e("option",{value:10},"10 per halaman",-1),e("option",{value:25},"25 per halaman",-1),e("option",{value:50},"50 per halaman",-1),e("option",{value:100},"100 per halaman",-1)]),544),[[Te,g.value]])])]),ge.value?(s(),r("div",ex,d[86]||(d[86]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-400"},"Memuat data...",-1)]))):_.value.length===0?(s(),r("div",tx," Tidak ada Non Food Payment yang ditemukan ")):(s(),r("div",ax,[(s(!0),r(I,null,K(_.value,A=>{var Me,Pe;return s(),r("div",{key:"all-nfp-"+A.id,onClick:ze=>we.value?De(A.id):O(A.id),class:u(["p-3 rounded-lg transition-all duration-200 border border-gray-200 dark:border-gray-700",[we.value?"cursor-default":"cursor-pointer hover:scale-[1.02] hover:border-orange-500 dark:hover:border-orange-500",C.isNight?"bg-slate-700/50 hover:bg-slate-600/50":"bg-gray-50 hover:bg-orange-50",ne.value.has(A.id)?"ring-2 ring-orange-500":""]])},[e("div",rx,[e("div",lx,[we.value?(s(),r("input",{key:0,type:"checkbox",checked:ne.value.has(A.id),onClick:Q(ze=>De(A.id),["stop"]),class:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500"},null,8,ox)):i("",!0),e("div",nx,[e("div",{class:u(["font-semibold text-sm",C.isNight?"text-white":"text-slate-800"])},a(A.payment_number),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-300":"text-slate-600"])},a(((Me=A.supplier)==null?void 0:Me.name)||"Unknown Supplier"),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[d[87]||(d[87]=e("i",{class:"fa fa-credit-card mr-1 text-orange-600"},null,-1)),c(" "+a(A.payment_method),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[d[88]||(d[88]=e("i",{class:"fa fa-file-invoice mr-1 text-orange-600"},null,-1)),c(" "+a(A.payment_type)+": "+a(A.source_number||"-"),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])}," Rp "+a(new Intl.NumberFormat("id-ID").format(A.amount)),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[d[89]||(d[89]=e("i",{class:"fa fa-user mr-1 text-orange-500"},null,-1)),c(a((Pe=A.creator)==null?void 0:Pe.nama_lengkap),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},a(P(A.payment_date)),3)])]),e("div",ix,[d[90]||(d[90]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(A.approver_name||A.approval_level||"Finance Manager"),1)])])],10,sx)}),128))])),f.value>1?(s(),r("div",dx,[e("div",ux," Halaman "+a(E.value)+" dari "+a(f.value),1),e("div",cx,[e("button",{onClick:d[14]||(d[14]=A=>k(E.value-1)),disabled:E.value===1,class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed"},d[91]||(d[91]=[e("i",{class:"fa fa-chevron-left"},null,-1)]),8,gx),(s(!0),r(I,null,K(Y.value,A=>(s(),r(I,{key:"page-"+A},[A!=="..."?(s(),r("button",{key:0,onClick:Me=>k(A),class:u(["px-3 py-1 border rounded-lg",E.value===A?"bg-orange-500 text-white border-orange-500":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"])},a(A),11,xx)):(s(),r("span",px,"..."))],64))),128)),e("button",{onClick:d[15]||(d[15]=A=>k(E.value+1)),disabled:E.value===f.value,class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed"},d[92]||(d[92]=[e("i",{class:"fa fa-chevron-right"},null,-1)]),8,mx)])])):i("",!0)])])):i("",!0)]))])}}},fx={key:0,class:"flex-shrink-0 mb-4"},yx={class:"flex items-center justify-between mb-3"},bx={class:"flex items-center gap-2"},hx={class:"flex items-center gap-2"},kx={class:"bg-purple-500 text-white text-xs font-bold px-2 py-1 rounded-full"},_x={key:0,class:"mb-3 p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-between"},wx={class:"text-sm font-medium text-purple-800 dark:text-purple-200"},Cx={key:1,class:"text-center py-4"},Bx={key:2,class:"space-y-2"},$x=["onClick"],Nx={class:"flex items-center justify-between"},Dx={class:"flex items-center gap-2 flex-1"},Ax=["checked","onClick"],Sx={class:"flex-1"},jx={class:"text-xs text-purple-500 font-medium"},Tx={key:0,class:"text-center pt-2"},Px={key:0,class:"text-center py-8"},Vx={key:1,class:"space-y-6"},Ex={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},Rx={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Mx={class:"text-gray-900 dark:text-white font-semibold"},Ix={class:"text-gray-900 dark:text-white"},Ox={class:"text-gray-900 dark:text-white"},Fx={class:"text-gray-900 dark:text-white"},Lx={class:"text-gray-900 dark:text-white"},qx={key:0,class:"mt-4"},Ux={class:"text-gray-900 dark:text-white"},zx={key:0,class:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg"},Gx={class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},Wx={class:"overflow-x-auto"},Kx={class:"min-w-full text-xs"},Hx={class:"px-2 py-1 text-gray-900 dark:text-white"},Jx={class:"px-2 py-1 text-gray-900 dark:text-white"},Yx={class:"px-2 py-1 text-gray-900 dark:text-white"},Qx={class:"px-2 py-1 text-gray-900 dark:text-white"},Zx={class:"px-2 py-1 text-gray-900 dark:text-white"},Xx={class:"flex items-center justify-between mb-4"},ep={class:"flex items-center gap-2"},tp={key:0,class:"mb-4 p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-between"},ap={class:"text-sm font-medium text-purple-800 dark:text-purple-200"},sp={class:"mb-4 space-y-3"},rp={class:"flex flex-wrap gap-3"},lp={class:"flex items-center justify-between"},op={class:"text-sm text-gray-600 dark:text-gray-400"},np={key:1,class:"text-center py-8"},ip={key:2,class:"text-center py-8 text-gray-500 dark:text-gray-400"},dp={key:3,class:"space-y-2"},up=["onClick"],cp={class:"flex items-center justify-between"},gp={class:"flex items-center gap-2 flex-1"},xp=["checked","onClick"],pp={class:"flex-1"},mp={class:"text-xs text-purple-500 font-medium"},vp={key:4,class:"mt-4 flex items-center justify-between"},fp={class:"text-sm text-gray-600 dark:text-gray-400"},yp={class:"flex gap-2"},bp=["disabled"],hp=["onClick"],kp={key:1,class:"px-3 py-1 text-gray-500"},_p=["disabled"],wp={__name:"PRFoodApprovalCard",props:{isNight:{type:Boolean,default:!1}},emits:["approved","rejected"],setup(C,{expose:Ve,emit:te}){const le=te,z=p([]),ue=p(!1),J=p(new Set),T=p(!1),b=ve(()=>z.value.length);function fe(g){return g?new Date(g).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}function we(g){J.value.has(g)?J.value.delete(g):J.value.add(g)}function ne(){z.value.forEach(g=>{J.value.add(g.id)})}async function be(){if(J.value.size===0){v.fire("Warning","Pilih minimal satu PR Food untuk di-approve","warning");return}if((await v.fire({title:"Approve Multiple PR Foods?",text:`Apakah Anda yakin ingin approve ${J.value.size} PR Food?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#9333ea"})).isConfirmed)try{v.fire({title:"Processing...",text:"Sedang memproses approval...",allowOutsideClick:!1,didOpen:()=>{v.showLoading()}});const y=Array.from(J.value).map(async _=>{const Y=z.value.find(k=>k.id===_);if(!Y)return{error:new Error("PR not found"),prId:_};try{let k="";const m=Y.approval_level;if(m==="assistant_ssd_manager")k=`/pr-foods/${_}/approve-assistant-ssd-manager`;else if(m==="ssd_manager"||m==="sous_chef_mk")k=`/pr-foods/${_}/approve-ssd-manager`;else return{error:new Error("Unknown approval level"),prId:_};const d={approved:!0};return m==="assistant_ssd_manager"?d.assistant_ssd_manager_note="":(m==="ssd_manager"||m==="sous_chef_mk")&&(d.ssd_manager_note=""),await M.post(k,d),{success:!0,prId:_}}catch(k){return{error:k,prId:_}}}),n=await Promise.all(y),$=n.filter(_=>_.success).length,f=n.filter(_=>_.error).length;J.value.clear(),T.value=!1,P(),f===0?v.fire("Success",`${$} PR Food berhasil disetujui`,"success"):v.fire("Partial Success",`${$} berhasil, ${f} gagal`,"warning")}catch(h){console.error("Error approving multiple PR Foods:",h),v.fire("Error","Gagal menyetujui PR Foods","error")}}async function P(){ue.value=!0;try{const g=await M.get("/api/pr-food/pending-approvals");g.data.success&&(z.value=g.data.pr_foods||[])}catch(g){console.error("Error loading pending PR Foods approvals:",g)}finally{ue.value=!1}}const D=p(!1),N=p(null),j=p(!1),ee=p("");async function O(g){var h,y,n;try{Ce.value&&(Ce.value=!1);const $=z.value.find(_=>_.id===g)||De.value.find(_=>_.id===g);$&&(ee.value=$.approval_level),j.value=!0,D.value=!0;const f=await M.get(`/api/pr-food/${g}`);f.data&&f.data.success&&f.data.pr_food?(N.value=f.data.pr_food,!N.value.approval_level&&ee.value&&(N.value.approval_level=ee.value)):(v.fire("Error",((h=f.data)==null?void 0:h.message)||"Gagal memuat detail PR Food","error"),H())}catch($){console.error("Error loading PR Food details:",$);const f=((n=(y=$.response)==null?void 0:y.data)==null?void 0:n.message)||$.message||"Gagal memuat detail PR Food";v.fire("Error",f,"error"),H()}finally{j.value=!1}}function H(){D.value=!1,N.value=null}async function xe(){var g,h;if(N.value)try{let y="";const n=N.value.approval_level||ee.value;if(n==="assistant_ssd_manager")y=`/pr-foods/${N.value.id}/approve-assistant-ssd-manager`;else if(n==="ssd_manager"||n==="sous_chef_mk")y=`/pr-foods/${N.value.id}/approve-ssd-manager`;else{v.fire("Error","Tidak dapat menentukan level approval","error");return}const $={approved:!0};n==="assistant_ssd_manager"?$.assistant_ssd_manager_note="":(n==="ssd_manager"||n==="sous_chef_mk")&&($.ssd_manager_note="");const f=await M.post(y,$);f.data&&f.data.success?v.fire("Success",f.data.message||"PR Food berhasil disetujui","success"):v.fire("Success","PR Food berhasil disetujui","success"),H(),P(),le("approved",N.value.id)}catch(y){console.error("Error approving PR Food:",y),v.fire("Error",((h=(g=y.response)==null?void 0:g.data)==null?void 0:h.message)||"Gagal menyetujui PR Food","error")}}function V(){v.fire({title:"Tolak PR Food",input:"textarea",inputLabel:"Alasan Penolakan",inputPlaceholder:"Masukkan alasan penolakan...",inputAttributes:{"aria-label":"Masukkan alasan penolakan"},showCancelButton:!0,confirmButtonText:"Tolak",cancelButtonText:"Batal",confirmButtonColor:"#ef4444",inputValidator:g=>{if(!g)return"Alasan penolakan harus diisi!"}}).then(async g=>{var h,y;if(g.isConfirmed&&N.value)try{let n="";const $=N.value.approval_level||ee.value;if($==="assistant_ssd_manager")n=`/pr-foods/${N.value.id}/approve-assistant-ssd-manager`;else if($==="ssd_manager"||$==="sous_chef_mk")n=`/pr-foods/${N.value.id}/approve-ssd-manager`;else{v.fire("Error","Tidak dapat menentukan level approval","error");return}const f={approved:!1};$==="assistant_ssd_manager"?f.assistant_ssd_manager_note=g.value:($==="ssd_manager"||$==="sous_chef_mk")&&(f.ssd_manager_note=g.value);const _=await M.post(n,f,{headers:{Accept:"application/json","Content-Type":"application/json"}});_.data&&_.data.success?v.fire("Success",_.data.message||"PR Food berhasil ditolak","success"):v.fire("Success","PR Food berhasil ditolak","success"),H(),P(),le("rejected",N.value.id)}catch(n){console.error("Error rejecting PR Food:",n),v.fire("Error",((y=(h=n.response)==null?void 0:h.data)==null?void 0:y.message)||"Gagal menolak PR Food","error")}})}const Ce=p(!1),De=p([]),Ne=p(!1),Be=p(""),ie=p(""),Se=p("newest"),ke=p(1),R=p(10),ge=p(!1),he=p(new Set);async function se(){Ne.value=!0;try{const g=await M.get("/api/pr-food/pending-approvals?limit=500");g.data.success&&(De.value=g.data.pr_foods||[],ke.value=1)}catch(g){console.error("Error loading all PR Foods approvals:",g)}finally{Ne.value=!1}}function W(){Ce.value=!0,se(),ge.value=!1,he.value.clear()}function re(g){he.value.has(g)?he.value.delete(g):he.value.add(g)}function L(){w.value.forEach(g=>{he.value.add(g.id)})}async function q(){if(he.value.size===0){v.fire("Warning","Pilih minimal satu PR Food untuk di-approve","warning");return}if((await v.fire({title:"Approve Multiple PR Foods?",text:`Apakah Anda yakin ingin approve ${he.value.size} PR Food?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#9333ea"})).isConfirmed)try{v.fire({title:"Processing...",text:"Sedang memproses approval...",allowOutsideClick:!1,didOpen:()=>{v.showLoading()}});const y=Array.from(he.value).map(async _=>{const Y=De.value.find(k=>k.id===_);if(!Y)return{error:new Error("PR not found"),prId:_};try{let k="";const m=Y.approval_level;if(m==="assistant_ssd_manager")k=`/pr-foods/${_}/approve-assistant-ssd-manager`;else if(m==="ssd_manager"||m==="sous_chef_mk")k=`/pr-foods/${_}/approve-ssd-manager`;else return{error:new Error("Unknown approval level"),prId:_};const d={approved:!0};return m==="assistant_ssd_manager"?d.assistant_ssd_manager_note="":(m==="ssd_manager"||m==="sous_chef_mk")&&(d.ssd_manager_note=""),await M.post(k,d),{success:!0,prId:_}}catch(k){return{error:k,prId:_}}}),n=await Promise.all(y),$=n.filter(_=>_.success).length,f=n.filter(_=>_.error).length;he.value.clear(),ge.value=!1,se(),P(),f===0?v.fire("Success",`${$} PR Food berhasil disetujui`,"success"):v.fire("Partial Success",`${$} berhasil, ${f} gagal`,"warning")}catch(h){console.error("Error approving multiple PR Foods:",h),v.fire("Error","Gagal menyetujui PR Foods","error")}}function _e(){Ce.value=!1}const Z=ve(()=>{let g=[...De.value];if(Be.value){const h=Be.value.toLowerCase();g=g.filter(y=>{var _,Y;const n=(y.pr_number||"").toLowerCase(),$=(((_=y.warehouse)==null?void 0:_.name)||"").toLowerCase(),f=(((Y=y.requester)==null?void 0:Y.nama_lengkap)||"").toLowerCase();return n.includes(h)||$.includes(h)||f.includes(h)})}if(ie.value){const h=new Date,y=new Date(h.getFullYear(),h.getMonth(),h.getDate());g=g.filter(n=>{const $=new Date(n.tanggal);switch(ie.value){case"today":return $>=y;case"week":return $>=new Date(y.getTime()-7*24*60*60*1e3);case"month":return $>=new Date(y.getTime()-30*24*60*60*1e3);default:return!0}})}return g.sort((h,y)=>{switch(Se.value){case"oldest":return new Date(h.tanggal||h.created_at)-new Date(y.tanggal||y.created_at);case"number":return(h.pr_number||"").localeCompare(y.pr_number||"");case"newest":default:return new Date(y.tanggal||y.created_at)-new Date(h.tanggal||h.created_at)}}),g}),F=ve(()=>Math.ceil(Z.value.length/R.value)),w=ve(()=>{const g=(ke.value-1)*R.value,h=g+R.value;return Z.value.slice(g,h)}),ce=ve(()=>{const g=F.value,h=ke.value,y=[];if(g<=7)for(let n=1;n<=g;n++)y.push(n);else if(h<=3){for(let n=1;n<=5;n++)y.push(n);y.push("..."),y.push(g)}else if(h>=g-2){y.push(1),y.push("...");for(let n=g-4;n<=g;n++)y.push(n)}else{y.push(1),y.push("...");for(let n=h-1;n<=h+1;n++)y.push(n);y.push("..."),y.push(g)}return y});function E(g){g>=1&&g<=F.value&&(ke.value=g)}return it([Be,ie,Se],()=>{ke.value=1}),st(()=>{P()}),Ve({loadPendingApprovals:P,refresh:P}),(g,h)=>{var y,n,$;return s(),r("div",null,[b.value>0?(s(),r("div",fx,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl",C.isNight?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",yx,[e("div",bx,[h[14]||(h[14]=e("div",{class:"w-3 h-3 rounded-full bg-purple-500 animate-pulse"},null,-1)),e("h3",{class:u(["text-lg font-bold",C.isNight?"text-white":"text-slate-800"])},h[13]||(h[13]=[e("i",{class:"fa fa-shopping-basket mr-2 text-purple-500"},null,-1),c(" PR Foods Approval ")]),2)]),e("div",hx,[T.value?(s(),r("button",{key:1,onClick:h[1]||(h[1]=Q(f=>{T.value=!1,J.value.clear()},["stop"])),class:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 transition"},h[16]||(h[16]=[e("i",{class:"fa fa-times mr-1"},null,-1),c("Cancel ")]))):(s(),r("button",{key:0,onClick:h[0]||(h[0]=Q(f=>T.value=!0,["stop"])),class:"text-xs bg-purple-500 text-white px-2 py-1 rounded hover:bg-purple-600 transition"},h[15]||(h[15]=[e("i",{class:"fa fa-check-square mr-1"},null,-1),c("Multi Approve ")]))),e("div",kx,a(b.value),1)])]),T.value&&J.value.size>0?(s(),r("div",_x,[e("span",wx,a(J.value.size)+" item dipilih ",1),e("div",{class:"flex gap-2"},[e("button",{onClick:ne,class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition"},h[17]||(h[17]=[e("i",{class:"fa fa-check-double mr-1"},null,-1),c("Select All ")])),e("button",{onClick:be,class:"text-xs bg-purple-600 text-white px-2 py-1 rounded hover:bg-purple-700 transition"},h[18]||(h[18]=[e("i",{class:"fa fa-check mr-1"},null,-1),c("Approve Selected ")]))])])):i("",!0),ue.value?(s(),r("div",Cx,[h[19]||(h[19]=e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-purple-500"},null,-1)),e("p",{class:u(["text-sm mt-2",C.isNight?"text-slate-300":"text-slate-600"])},"Memuat data...",2)])):(s(),r("div",Bx,[(s(!0),r(I,null,K(z.value.slice(0,3),f=>{var _,Y;return s(),r("div",{key:"pr-food-approval-"+f.id,onClick:k=>T.value?we(f.id):O(f.id),class:u(["p-3 rounded-lg transition-all duration-200",[T.value?"cursor-default":"cursor-pointer hover:scale-105",C.isNight?"bg-slate-700/50 hover:bg-slate-600/50":"bg-purple-50 hover:bg-purple-100",J.value.has(f.id)?"ring-2 ring-purple-500":""]])},[e("div",Nx,[e("div",Dx,[T.value?(s(),r("input",{key:0,type:"checkbox",checked:J.value.has(f.id),onClick:Q(k=>we(f.id),["stop"]),class:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"},null,8,Ax)):i("",!0),e("div",Sx,[e("div",{class:u(["font-semibold text-sm",C.isNight?"text-white":"text-slate-800"])},a(f.pr_number),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-300":"text-slate-600"])},a(((_=f.warehouse)==null?void 0:_.name)||"Unknown Warehouse"),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[h[20]||(h[20]=e("i",{class:"fa fa-box mr-1 text-purple-600"},null,-1)),c(" "+a(f.items_count)+" items ",1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[h[21]||(h[21]=e("i",{class:"fa fa-user mr-1 text-purple-500"},null,-1)),c(a((Y=f.requester)==null?void 0:Y.nama_lengkap),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},a(fe(f.tanggal)),3)])]),e("div",jx,[h[22]||(h[22]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(f.approver_name||f.approval_level_display),1)])])],10,$x)}),128)),z.value.length>3?(s(),r("div",Tx,[e("button",{onClick:W,class:"text-sm text-purple-500 hover:text-purple-700 font-medium"}," Lihat "+a(z.value.length-3)+" PR Foods lainnya... ",1)])):i("",!0)]))],2)])):i("",!0),(s(),He(Ze,{to:"body"},[D.value&&N.value?(s(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]",onClick:H},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",onClick:h[2]||(h[2]=Q(()=>{},["stop"]))},[e("div",{class:"flex items-center justify-between mb-4"},[h[24]||(h[24]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-shopping-basket mr-2 text-purple-500"}),c(" Detail PR Food Approval ")],-1)),e("button",{onClick:H,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},h[23]||(h[23]=[e("i",{class:"fa fa-times text-xl"},null,-1)]))]),j.value?(s(),r("div",Px,h[25]||(h[25]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-400"},"Memuat detail...",-1)]))):(s(),r("div",Vx,[e("div",Ex,[h[32]||(h[32]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Informasi Dasar",-1)),e("div",Rx,[e("div",null,[h[26]||(h[26]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"PR Number",-1)),e("p",Mx,a(N.value.pr_number),1)]),e("div",null,[h[27]||(h[27]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Tanggal",-1)),e("p",Ix,a(new Date(N.value.tanggal).toLocaleDateString("id-ID")),1)]),e("div",null,[h[28]||(h[28]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Warehouse",-1)),e("p",Ox,a(((y=N.value.warehouse)==null?void 0:y.name)||"Unknown"),1)]),e("div",null,[h[29]||(h[29]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Requester",-1)),e("p",Fx,a(((n=N.value.requester)==null?void 0:n.nama_lengkap)||"Unknown"),1)]),e("div",null,[h[30]||(h[30]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Items Count",-1)),e("p",Lx,a((($=N.value.items)==null?void 0:$.length)||0)+" items",1)])]),N.value.description?(s(),r("div",qx,[h[31]||(h[31]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Description",-1)),e("p",Ux,a(N.value.description),1)])):i("",!0)]),N.value.items&&N.value.items.length>0?(s(),r("div",zx,[e("h4",Gx,[h[33]||(h[33]=e("i",{class:"fa fa-box mr-2 text-purple-500"},null,-1)),c(" Items ("+a(N.value.items.length)+") ",1)]),e("div",Wx,[e("table",Kx,[h[34]||(h[34]=e("thead",{class:"bg-gray-100 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Item"),e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Qty"),e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Unit"),e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Note"),e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Arrival Date")])],-1)),e("tbody",null,[(s(!0),r(I,null,K(N.value.items,f=>{var _;return s(),r("tr",{key:"item-"+f.id,class:"border-t border-gray-200 dark:border-gray-600"},[e("td",Hx,a(((_=f.item)==null?void 0:_.name)||"-"),1),e("td",Jx,a(f.qty||0),1),e("td",Yx,a(f.unit||"-"),1),e("td",Qx,a(f.note||"-"),1),e("td",Zx,a(f.arrival_date?new Date(f.arrival_date).toLocaleDateString("id-ID"):"-"),1)])}),128))])])])])):i("",!0),e("div",{class:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"},[e("button",{onClick:V,class:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors"},h[35]||(h[35]=[e("i",{class:"fa fa-times mr-2"},null,-1),c("Tolak ")])),e("button",{onClick:xe,class:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors"},h[36]||(h[36]=[e("i",{class:"fa fa-check mr-2"},null,-1),c("Setujui ")]))])]))])])):i("",!0)])),(s(),He(Ze,{to:"body"},[Ce.value?(s(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998]",onClick:_e},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-5xl mx-4 max-h-[90vh] overflow-y-auto",onClick:h[12]||(h[12]=Q(()=>{},["stop"]))},[e("div",Xx,[h[40]||(h[40]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-list mr-2 text-purple-500"}),c(" Semua PR Foods Pending ")],-1)),e("div",ep,[ge.value?(s(),r("button",{key:1,onClick:h[4]||(h[4]=Q(f=>{ge.value=!1,he.value.clear()},["stop"])),class:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 transition"},h[38]||(h[38]=[e("i",{class:"fa fa-times mr-1"},null,-1),c("Cancel ")]))):(s(),r("button",{key:0,onClick:h[3]||(h[3]=Q(f=>ge.value=!0,["stop"])),class:"text-xs bg-purple-500 text-white px-2 py-1 rounded hover:bg-purple-600 transition"},h[37]||(h[37]=[e("i",{class:"fa fa-check-square mr-1"},null,-1),c("Multi Approve ")]))),e("button",{onClick:_e,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},h[39]||(h[39]=[e("i",{class:"fa fa-times text-xl"},null,-1)]))])]),ge.value&&he.value.size>0?(s(),r("div",tp,[e("span",ap,a(he.value.size)+" item dipilih ",1),e("div",{class:"flex gap-2"},[e("button",{onClick:L,class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition"},h[41]||(h[41]=[e("i",{class:"fa fa-check-double mr-1"},null,-1),c("Select All ")])),e("button",{onClick:q,class:"text-xs bg-purple-600 text-white px-2 py-1 rounded hover:bg-purple-700 transition"},h[42]||(h[42]=[e("i",{class:"fa fa-check mr-1"},null,-1),c("Approve Selected ")]))])])):i("",!0),e("div",sp,[e("div",rp,[de(e("input",{"onUpdate:modelValue":h[5]||(h[5]=f=>Be.value=f),type:"text",placeholder:"Cari nomor, warehouse, requester...",class:"flex-1 min-w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[Ge,Be.value]]),de(e("select",{"onUpdate:modelValue":h[6]||(h[6]=f=>ie.value=f),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},h[43]||(h[43]=[e("option",{value:""},"Semua Tanggal",-1),e("option",{value:"today"},"Hari Ini",-1),e("option",{value:"week"},"Minggu Ini",-1),e("option",{value:"month"},"Bulan Ini",-1)]),512),[[Te,ie.value]]),de(e("select",{"onUpdate:modelValue":h[7]||(h[7]=f=>Se.value=f),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},h[44]||(h[44]=[e("option",{value:"newest"},"Terbaru",-1),e("option",{value:"oldest"},"Terlama",-1),e("option",{value:"number"},"Nomor",-1)]),512),[[Te,Se.value]])]),e("div",lp,[e("div",op," Menampilkan "+a(w.value.length)+" dari "+a(Z.value.length)+" PR Foods ",1),de(e("select",{"onUpdate:modelValue":h[8]||(h[8]=f=>R.value=f),onChange:h[9]||(h[9]=f=>ke.value=1),class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"},h[45]||(h[45]=[e("option",{value:10},"10 per halaman",-1),e("option",{value:25},"25 per halaman",-1),e("option",{value:50},"50 per halaman",-1),e("option",{value:100},"100 per halaman",-1)]),544),[[Te,R.value]])])]),Ne.value?(s(),r("div",np,h[46]||(h[46]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-400"},"Memuat data...",-1)]))):w.value.length===0?(s(),r("div",ip," Tidak ada PR Foods yang ditemukan ")):(s(),r("div",dp,[(s(!0),r(I,null,K(w.value,f=>{var _,Y;return s(),r("div",{key:"all-pr-"+f.id,class:u(["p-3 rounded-lg transition-all duration-200 border border-gray-200 dark:border-gray-700",[ge.value?"cursor-default":"cursor-pointer hover:scale-[1.02] hover:border-purple-500 dark:hover:border-purple-500",C.isNight?"bg-slate-700/50 hover:bg-slate-600/50":"bg-gray-50 hover:bg-purple-50",he.value.has(f.id)?"ring-2 ring-purple-500":""]]),onClick:k=>ge.value?re(f.id):O(f.id)},[e("div",cp,[e("div",gp,[ge.value?(s(),r("input",{key:0,type:"checkbox",checked:he.value.has(f.id),onClick:Q(k=>re(f.id),["stop"]),class:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"},null,8,xp)):i("",!0),e("div",pp,[e("div",{class:u(["font-semibold text-sm",C.isNight?"text-white":"text-slate-800"])},a(f.pr_number),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-300":"text-slate-600"])},a(((_=f.warehouse)==null?void 0:_.name)||"Unknown Warehouse"),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[h[47]||(h[47]=e("i",{class:"fa fa-box mr-1 text-purple-600"},null,-1)),c(" "+a(f.items_count)+" items ",1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[h[48]||(h[48]=e("i",{class:"fa fa-user mr-1 text-purple-500"},null,-1)),c(a((Y=f.requester)==null?void 0:Y.nama_lengkap),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},a(fe(f.tanggal)),3)])]),e("div",mp,[h[49]||(h[49]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(f.approver_name||f.approval_level_display),1)])])],10,up)}),128))])),F.value>1?(s(),r("div",vp,[e("div",fp," Halaman "+a(ke.value)+" dari "+a(F.value),1),e("div",yp,[e("button",{onClick:h[10]||(h[10]=f=>E(ke.value-1)),disabled:ke.value===1,class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed"},h[50]||(h[50]=[e("i",{class:"fa fa-chevron-left"},null,-1)]),8,bp),(s(!0),r(I,null,K(ce.value,f=>(s(),r(I,{key:"page-"+f},[f!=="..."?(s(),r("button",{key:0,onClick:_=>E(f),class:u(["px-3 py-1 border rounded-lg",ke.value===f?"bg-purple-500 text-white border-purple-500":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"])},a(f),11,hp)):(s(),r("span",kp,"..."))],64))),128)),e("button",{onClick:h[11]||(h[11]=f=>E(ke.value+1)),disabled:ke.value===F.value,class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed"},h[51]||(h[51]=[e("i",{class:"fa fa-chevron-right"},null,-1)]),8,_p)])])):i("",!0)])])):i("",!0)]))])}}},Cp={key:0,class:"flex-shrink-0 mb-4"},Bp={class:"flex items-center justify-between mb-3"},$p={class:"flex items-center gap-2"},Np={class:"flex items-center gap-2"},Dp={class:"bg-indigo-500 text-white text-xs font-bold px-2 py-1 rounded-full"},Ap={key:0,class:"mb-3 p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg flex items-center justify-between"},Sp={class:"text-sm font-medium text-indigo-800 dark:text-indigo-200"},jp={key:1,class:"text-center py-4"},Tp={key:2,class:"space-y-2"},Pp=["onClick"],Vp={class:"flex items-center justify-between"},Ep={class:"flex items-center gap-2 flex-1"},Rp=["checked","onClick"],Mp={class:"flex-1"},Ip={class:"text-xs text-indigo-500 font-medium"},Op={key:0,class:"text-center pt-2"},Fp={key:0,class:"text-center py-8"},Lp={key:1,class:"space-y-6"},qp={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},Up={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},zp={class:"text-gray-900 dark:text-white font-semibold"},Gp={class:"text-gray-900 dark:text-white"},Wp={class:"text-gray-900 dark:text-white"},Kp={class:"text-gray-900 dark:text-white"},Hp={class:"text-gray-900 dark:text-white"},Jp={class:"text-gray-900 dark:text-white"},Yp={class:"text-gray-900 dark:text-white font-semibold text-lg"},Qp={key:0},Zp={class:"text-gray-900 dark:text-white"},Xp={key:0},em={key:1},tm={key:0,class:"mt-4"},am={class:"text-gray-900 dark:text-white"},sm={key:0,class:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-lg"},rm={class:"flex justify-between items-center mb-3"},lm={class:"text-md font-semibold text-gray-900 dark:text-white"},om={class:"overflow-x-auto"},nm={class:"min-w-full text-xs"},im={class:"px-2 py-1 text-gray-900 dark:text-white"},dm={class:"px-2 py-1 text-gray-900 dark:text-white"},um={class:"px-2 py-1 text-gray-900 dark:text-white"},cm={class:"px-2 py-1 text-gray-900 dark:text-white"},gm={class:"px-2 py-1 text-gray-900 dark:text-white font-semibold"},xm={class:"px-2 py-1 text-gray-900 dark:text-white text-xs"},pm={class:"flex items-center justify-between mb-4"},mm={class:"flex items-center gap-2"},vm={key:0,class:"mb-4 p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg flex items-center justify-between"},fm={class:"text-sm font-medium text-indigo-800 dark:text-indigo-200"},ym={class:"mb-4 space-y-3"},bm={class:"flex flex-wrap gap-3"},hm={class:"flex items-center justify-between"},km={class:"text-sm text-gray-600 dark:text-gray-400"},_m={key:1,class:"text-center py-8"},wm={key:2,class:"text-center py-8 text-gray-500 dark:text-gray-400"},Cm={key:3,class:"space-y-2"},Bm=["onClick"],$m={class:"flex items-center justify-between"},Nm={class:"flex items-center gap-2 flex-1"},Dm=["checked","onClick"],Am={class:"flex-1"},Sm={class:"text-xs text-indigo-500 font-medium"},jm={key:4,class:"mt-4 flex items-center justify-between"},Tm={class:"text-sm text-gray-600 dark:text-gray-400"},Pm={class:"flex gap-2"},Vm=["disabled"],Em=["onClick"],Rm={key:1,class:"px-3 py-1 text-gray-500"},Mm=["disabled"],Im={__name:"POFoodApprovalCard",props:{isNight:{type:Boolean,default:!1}},emits:["approved","rejected"],setup(C,{expose:Ve,emit:te}){const le=te,z=p([]),ue=p(!1),J=p(new Set),T=p(!1),b=ve(()=>z.value.length);function fe(y){return y?new Date(y).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}function we(y){J.value.has(y)?J.value.delete(y):J.value.add(y)}function ne(){z.value.forEach(y=>{J.value.add(y.id)})}async function be(){if(J.value.size===0){v.fire("Warning","Pilih minimal satu PO Food untuk di-approve","warning");return}if((await v.fire({title:"Approve Multiple PO Foods?",text:`Apakah Anda yakin ingin approve ${J.value.size} PO Food?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#6366f1"})).isConfirmed)try{v.fire({title:"Processing...",text:"Sedang memproses approval...",allowOutsideClick:!1,didOpen:()=>{v.showLoading()}});const $=Array.from(J.value).map(async k=>{const m=z.value.find(d=>d.id===k);if(!m)return{error:new Error("PO not found"),poId:k};try{let d="";const ae=m.approval_level;if(ae==="purchasing_manager")d=`/po-foods/${k}/approve`;else if(ae==="gm_finance")d=`/po-foods/${k}/approve-gm-finance`;else return{error:new Error("Unknown approval level"),poId:k};const ye=await M.post(d,{approved:!0,note:""});return ye.data&&ye.data.success===!1?{error:new Error(ye.data.message||"Gagal menyetujui PO Food"),poId:k}:{success:!0,poId:k}}catch(d){return{error:d,poId:k}}}),f=await Promise.all($),_=f.filter(k=>k.success).length,Y=f.filter(k=>k.error).length;J.value.clear(),T.value=!1,_>0&&P(),Y===0?v.fire("Success",`${_} PO Food berhasil disetujui`,"success"):_===0?v.fire("Error",`Semua PO Food gagal disetujui (${Y} gagal)`,"error"):v.fire("Partial Success",`${_} berhasil, ${Y} gagal`,"warning")}catch(n){console.error("Error approving multiple PO Foods:",n),v.fire("Error","Gagal menyetujui PO Foods","error")}}async function P(){ue.value=!0;try{const y=await M.get("/api/po-food/pending-approvals");y.data.success&&(z.value=y.data.po_foods||[])}catch(y){console.error("Error loading pending PO Foods approvals:",y)}finally{ue.value=!1}}const D=p(!1),N=p(null),j=p(!1),ee=p("");async function O(y){var n,$,f;try{Ce.value&&(Ce.value=!1,await ol(),await new Promise(k=>setTimeout(k,100)));const _=z.value.find(k=>k.id===y)||De.value.find(k=>k.id===y);_&&(ee.value=_.approval_level),j.value=!0,D.value=!0;const Y=await M.get(`/api/po-food/${y}`);Y.data&&Y.data.success&&Y.data.po_food?(N.value=Y.data.po_food,!N.value.approval_level&&ee.value&&(N.value.approval_level=ee.value)):(v.fire("Error",((n=Y.data)==null?void 0:n.message)||"Gagal memuat detail PO Food","error"),H())}catch(_){console.error("Error loading PO Food details:",_);const Y=((f=($=_.response)==null?void 0:$.data)==null?void 0:f.message)||_.message||"Gagal memuat detail PO Food";v.fire("Error",Y,"error"),H()}finally{j.value=!1}}function H(){D.value=!1,N.value=null}async function xe(){var y,n;if(N.value)try{let $="";const f=N.value.approval_level||ee.value;if(f==="purchasing_manager")$=`/po-foods/${N.value.id}/approve`;else if(f==="gm_finance")$=`/po-foods/${N.value.id}/approve-gm-finance`;else{v.fire("Error","Tidak dapat menentukan level approval","error");return}const _=await M.post($,{approved:!0,note:""});if(_.data&&_.data.success===!1){const k=_.data.message||"Gagal menyetujui PO Food";v.fire("Error",k,"error");return}const Y=N.value.id;v.fire("Success","PO Food berhasil disetujui","success"),H(),P(),le("approved",Y)}catch($){console.error("Error approving PO Food:",$);const f=((n=(y=$.response)==null?void 0:y.data)==null?void 0:n.message)||$.message||"Gagal menyetujui PO Food";v.fire("Error",f,"error")}}function V(){v.fire({title:"Tolak PO Food",input:"textarea",inputLabel:"Alasan Penolakan",inputPlaceholder:"Masukkan alasan penolakan...",inputAttributes:{"aria-label":"Masukkan alasan penolakan"},showCancelButton:!0,confirmButtonText:"Tolak",cancelButtonText:"Batal",confirmButtonColor:"#ef4444",inputValidator:y=>{if(!y)return"Alasan penolakan harus diisi!"}}).then(async y=>{var n,$;if(y.isConfirmed&&N.value)try{let f="";const _=N.value.approval_level||ee.value;if(_==="purchasing_manager")f=`/po-foods/${N.value.id}/approve`;else if(_==="gm_finance")f=`/po-foods/${N.value.id}/approve-gm-finance`;else{v.fire("Error","Tidak dapat menentukan level approval","error");return}const Y=await M.post(f,{approved:!1,note:y.value});if(Y.data&&Y.data.success===!1){const m=Y.data.message||"Gagal menolak PO Food";v.fire("Error",m,"error");return}const k=N.value.id;v.fire("Success","PO Food berhasil ditolak","success"),H(),P(),le("rejected",k)}catch(f){console.error("Error rejecting PO Food:",f);const _=(($=(n=f.response)==null?void 0:n.data)==null?void 0:$.message)||f.message||"Gagal menolak PO Food";v.fire("Error",_,"error")}})}const Ce=p(!1),De=p([]),Ne=p(!1),Be=p(""),ie=p(""),Se=p("newest"),ke=p(1),R=p(10),ge=p(!1),he=p(new Set);async function se(){Ne.value=!0;try{const y=await M.get("/api/po-food/pending-approvals?limit=500");y.data.success&&(De.value=y.data.po_foods||[],ke.value=1)}catch(y){console.error("Error loading all PO Foods approvals:",y)}finally{Ne.value=!1}}function W(){Ce.value=!0,se(),ge.value=!1,he.value.clear()}function re(y){he.value.has(y)?he.value.delete(y):he.value.add(y)}function L(){w.value.forEach(y=>{he.value.add(y.id)})}async function q(){if(he.value.size===0){v.fire("Warning","Pilih minimal satu PO Food untuk di-approve","warning");return}if((await v.fire({title:"Approve Multiple PO Foods?",text:`Apakah Anda yakin ingin approve ${he.value.size} PO Food?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#6366f1"})).isConfirmed)try{v.fire({title:"Processing...",text:"Sedang memproses approval...",allowOutsideClick:!1,didOpen:()=>{v.showLoading()}});const $=Array.from(he.value).map(async k=>{const m=De.value.find(d=>d.id===k);if(!m)return{error:new Error("PO not found"),poId:k};try{let d="";const ae=m.approval_level;if(ae==="purchasing_manager")d=`/po-foods/${k}/approve`;else if(ae==="gm_finance")d=`/po-foods/${k}/approve-gm-finance`;else return{error:new Error("Unknown approval level"),poId:k};const ye=await M.post(d,{approved:!0,note:""});return ye.data&&ye.data.success===!1?{error:new Error(ye.data.message||"Gagal menyetujui PO Food"),poId:k}:{success:!0,poId:k}}catch(d){return{error:d,poId:k}}}),f=await Promise.all($),_=f.filter(k=>k.success).length,Y=f.filter(k=>k.error).length;he.value.clear(),ge.value=!1,_>0&&(se(),P()),Y===0?v.fire("Success",`${_} PO Food berhasil disetujui`,"success"):_===0?v.fire("Error",`Semua PO Food gagal disetujui (${Y} gagal)`,"error"):v.fire("Partial Success",`${_} berhasil, ${Y} gagal`,"warning")}catch(n){console.error("Error approving multiple PO Foods:",n),v.fire("Error","Gagal menyetujui PO Foods","error")}}function _e(){Ce.value=!1}const Z=ve(()=>{let y=[...De.value];if(Be.value){const n=Be.value.toLowerCase();y=y.filter($=>{var k,m;const f=($.number||"").toLowerCase(),_=(((k=$.supplier)==null?void 0:k.name)||"").toLowerCase(),Y=(((m=$.creator)==null?void 0:m.nama_lengkap)||"").toLowerCase();return f.includes(n)||_.includes(n)||Y.includes(n)})}if(ie.value){const n=new Date,$=new Date(n.getFullYear(),n.getMonth(),n.getDate());y=y.filter(f=>{const _=new Date(f.date);switch(ie.value){case"today":return _>=$;case"week":return _>=new Date($.getTime()-7*24*60*60*1e3);case"month":return _>=new Date($.getTime()-30*24*60*60*1e3);default:return!0}})}return y.sort((n,$)=>{switch(Se.value){case"oldest":return new Date(n.date||n.created_at)-new Date($.date||$.created_at);case"number":return(n.number||"").localeCompare($.number||"");case"amount":return($.grand_total||0)-(n.grand_total||0);case"newest":default:return new Date($.date||$.created_at)-new Date(n.date||n.created_at)}}),y}),F=ve(()=>Math.ceil(Z.value.length/R.value)),w=ve(()=>{const y=(ke.value-1)*R.value,n=y+R.value;return Z.value.slice(y,n)}),ce=ve(()=>{const y=F.value,n=ke.value,$=[];if(y<=7)for(let f=1;f<=y;f++)$.push(f);else if(n<=3){for(let f=1;f<=5;f++)$.push(f);$.push("..."),$.push(y)}else if(n>=y-2){$.push(1),$.push("...");for(let f=y-4;f<=y;f++)$.push(f)}else{$.push(1),$.push("...");for(let f=n-1;f<=n+1;f++)$.push(f);$.push("..."),$.push(y)}return $});function E(y){y>=1&&y<=F.value&&(ke.value=y)}async function g(){if(!(!N.value||!N.value.items||N.value.items.length===0)){if(!N.value.warehouse_outlet_id){v.fire("Info","Warehouse outlet tidak tersedia untuk PO ini","info");return}try{const y=N.value.items.map(async $=>{if(!$.item_id||!N.value.warehouse_outlet_id)return $;try{const f=await M.get("/api/inventory/stock",{params:{item_id:$.item_id,warehouse_id:N.value.warehouse_outlet_id}});return{...$,stock:f.data}}catch(f){return console.error(`Error fetching stock for item ${$.item_id}:`,f),$}}),n=await Promise.all(y);N.value.items_with_stock=n}catch(y){console.error("Error fetching stock for PO:",y),v.fire("Error","Gagal mengambil data stock","error")}}}function h(y){if(!y)return"Stok: 0";const n=[];return y.qty_small!==void 0&&y.qty_small>0&&n.push(`${Number(y.qty_small).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2})} ${y.unit_small||""}`),y.qty_medium!==void 0&&y.qty_medium>0&&n.push(`${Number(y.qty_medium).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2})} ${y.unit_medium||""}`),y.qty_large!==void 0&&y.qty_large>0&&n.push(`${Number(y.qty_large).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2})} ${y.unit_large||""}`),n.length>0?`Stok: ${n.join(" | ")}`:"Stok: 0"}return it([Be,ie,Se],()=>{ke.value=1}),st(()=>{P()}),Ve({loadPendingApprovals:P,refresh:P}),(y,n)=>{var $,f;return s(),r("div",null,[b.value>0?(s(),r("div",Cp,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl",C.isNight?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",Bp,[e("div",$p,[n[14]||(n[14]=e("div",{class:"w-3 h-3 rounded-full bg-indigo-500 animate-pulse"},null,-1)),e("h3",{class:u(["text-lg font-bold",C.isNight?"text-white":"text-slate-800"])},n[13]||(n[13]=[e("i",{class:"fa fa-file-invoice-dollar mr-2 text-indigo-500"},null,-1),c(" PO Foods Approval ")]),2)]),e("div",Np,[T.value?(s(),r("button",{key:1,onClick:n[1]||(n[1]=Q(_=>{T.value=!1,J.value.clear()},["stop"])),class:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 transition"},n[16]||(n[16]=[e("i",{class:"fa fa-times mr-1"},null,-1),c("Cancel ")]))):(s(),r("button",{key:0,onClick:n[0]||(n[0]=Q(_=>T.value=!0,["stop"])),class:"text-xs bg-indigo-500 text-white px-2 py-1 rounded hover:bg-indigo-600 transition"},n[15]||(n[15]=[e("i",{class:"fa fa-check-square mr-1"},null,-1),c("Multi Approve ")]))),e("div",Dp,a(b.value),1)])]),T.value&&J.value.size>0?(s(),r("div",Ap,[e("span",Sp,a(J.value.size)+" item dipilih ",1),e("div",{class:"flex gap-2"},[e("button",{onClick:ne,class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition"},n[17]||(n[17]=[e("i",{class:"fa fa-check-double mr-1"},null,-1),c("Select All ")])),e("button",{onClick:be,class:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700 transition"},n[18]||(n[18]=[e("i",{class:"fa fa-check mr-1"},null,-1),c("Approve Selected ")]))])])):i("",!0),ue.value?(s(),r("div",jp,[n[19]||(n[19]=e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-500"},null,-1)),e("p",{class:u(["text-sm mt-2",C.isNight?"text-slate-300":"text-slate-600"])},"Memuat data...",2)])):(s(),r("div",Tp,[(s(!0),r(I,null,K(z.value.slice(0,3),_=>{var Y,k;return s(),r("div",{key:"po-food-approval-"+_.id,onClick:m=>T.value?we(_.id):O(_.id),class:u(["p-3 rounded-lg transition-all duration-200",[T.value?"cursor-default":"cursor-pointer hover:scale-105",C.isNight?"bg-slate-700/50 hover:bg-slate-600/50":"bg-indigo-50 hover:bg-indigo-100",J.value.has(_.id)?"ring-2 ring-indigo-500":""]])},[e("div",Vp,[e("div",Ep,[T.value?(s(),r("input",{key:0,type:"checkbox",checked:J.value.has(_.id),onClick:Q(m=>we(_.id),["stop"]),class:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"},null,8,Rp)):i("",!0),e("div",Mp,[e("div",{class:u(["font-semibold text-sm",C.isNight?"text-white":"text-slate-800"])},a(_.number),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-300":"text-slate-600"])},a(((Y=_.supplier)==null?void 0:Y.name)||"Unknown Supplier"),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[n[20]||(n[20]=e("i",{class:"fa fa-box mr-1 text-indigo-600"},null,-1)),c(" "+a(_.items_count)+" items ",1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[n[21]||(n[21]=e("i",{class:"fa fa-money-bill-wave mr-1 text-indigo-600"},null,-1)),c(" Rp "+a(new Intl.NumberFormat("id-ID").format(_.grand_total)),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[n[22]||(n[22]=e("i",{class:"fa fa-user mr-1 text-indigo-500"},null,-1)),c(a((k=_.creator)==null?void 0:k.nama_lengkap),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},a(fe(_.date)),3)])]),e("div",Ip,[n[23]||(n[23]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(_.approver_name||_.approval_level_display),1)])])],10,Pp)}),128)),z.value.length>3?(s(),r("div",Op,[e("button",{onClick:W,class:"text-sm text-indigo-500 hover:text-indigo-700 font-medium"}," Lihat "+a(z.value.length-3)+" PO Foods lainnya... ",1)])):i("",!0)]))],2)])):i("",!0),(s(),He(Ze,{to:"body"},[D.value&&N.value?(s(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000]",onClick:H},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",onClick:n[2]||(n[2]=Q(()=>{},["stop"]))},[e("div",{class:"flex items-center justify-between mb-4"},[n[25]||(n[25]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-file-invoice-dollar mr-2 text-indigo-500"}),c(" Detail PO Food Approval ")],-1)),e("button",{onClick:H,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},n[24]||(n[24]=[e("i",{class:"fa fa-times text-xl"},null,-1)]))]),j.value?(s(),r("div",Fp,n[26]||(n[26]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-400"},"Memuat detail...",-1)]))):(s(),r("div",Lp,[e("div",qp,[n[36]||(n[36]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Informasi Dasar",-1)),e("div",Up,[e("div",null,[n[27]||(n[27]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"PO Number",-1)),e("p",zp,a(N.value.number),1)]),e("div",null,[n[28]||(n[28]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Date",-1)),e("p",Gp,a(new Date(N.value.date).toLocaleDateString("id-ID")),1)]),e("div",null,[n[29]||(n[29]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Supplier",-1)),e("p",Wp,a((($=N.value.supplier)==null?void 0:$.name)||"Unknown"),1)]),e("div",null,[n[30]||(n[30]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Creator",-1)),e("p",Kp,a(((f=N.value.creator)==null?void 0:f.nama_lengkap)||"Unknown"),1)]),e("div",null,[n[31]||(n[31]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Subtotal",-1)),e("p",Hp,"Rp "+a(new Intl.NumberFormat("id-ID").format(N.value.subtotal||0)),1)]),e("div",null,[n[32]||(n[32]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"PPN",-1)),e("p",Jp,a(N.value.ppn_enabled?"Ya":"Tidak")+" ("+a(N.value.ppn_enabled?"Rp "+new Intl.NumberFormat("id-ID").format(N.value.ppn_amount||0):"-")+")",1)]),e("div",null,[n[33]||(n[33]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Grand Total",-1)),e("p",Yp," Rp "+a(new Intl.NumberFormat("id-ID").format(N.value.grand_total||0)),1)]),N.value.source_info?(s(),r("div",Qp,[n[34]||(n[34]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Source",-1)),e("p",Zp,[c(a(N.value.source_info.type)+" ",1),N.value.source_info.pr_numbers&&N.value.source_info.pr_numbers.length>0?(s(),r("span",Xp," : "+a(N.value.source_info.pr_numbers.join(", ")),1)):i("",!0),N.value.source_info.ro_numbers&&N.value.source_info.ro_numbers.length>0?(s(),r("span",em," : "+a(N.value.source_info.ro_numbers.join(", ")),1)):i("",!0)])])):i("",!0)]),N.value.notes?(s(),r("div",tm,[n[35]||(n[35]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Notes",-1)),e("p",am,a(N.value.notes),1)])):i("",!0)]),N.value.items&&N.value.items.length>0?(s(),r("div",sm,[e("div",rm,[e("h4",lm,[n[37]||(n[37]=e("i",{class:"fa fa-box mr-2 text-indigo-500"},null,-1)),c(" Items ("+a(N.value.items.length)+") ",1)]),e("button",{onClick:g,class:"px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded text-sm hover:bg-blue-200 dark:hover:bg-blue-800 transition"},n[38]||(n[38]=[e("i",{class:"fas fa-sync-alt mr-1"},null,-1),c(" Refresh Stock ")]))]),e("div",om,[e("table",nm,[n[39]||(n[39]=e("thead",{class:"bg-gray-100 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Item"),e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Qty"),e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Unit"),e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Price"),e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Total"),e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Last Stock")])],-1)),e("tbody",null,[(s(!0),r(I,null,K(N.value.items_with_stock||N.value.items,_=>{var Y,k;return s(),r("tr",{key:"item-"+_.id,class:"border-t border-gray-200 dark:border-gray-600"},[e("td",im,a(((Y=_.item)==null?void 0:Y.name)||"-"),1),e("td",dm,a(_.quantity||0),1),e("td",um,a(((k=_.unit)==null?void 0:k.name)||"-"),1),e("td",cm,"Rp "+a(new Intl.NumberFormat("id-ID").format(_.price||0)),1),e("td",gm,"Rp "+a(new Intl.NumberFormat("id-ID").format(_.total||0)),1),e("td",xm,a(h(_.stock)),1)])}),128))])])])])):i("",!0),e("div",{class:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"},[e("button",{onClick:V,class:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors"},n[40]||(n[40]=[e("i",{class:"fa fa-times mr-2"},null,-1),c("Tolak ")])),e("button",{onClick:xe,class:"px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors"},n[41]||(n[41]=[e("i",{class:"fa fa-check mr-2"},null,-1),c("Setujui ")]))])]))])])):i("",!0)])),(s(),He(Ze,{to:"body"},[Ce.value?(s(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998]",onClick:_e},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-5xl mx-4 max-h-[90vh] overflow-y-auto",onClick:n[12]||(n[12]=Q(()=>{},["stop"]))},[e("div",pm,[n[45]||(n[45]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-list mr-2 text-indigo-500"}),c(" Semua PO Foods Pending ")],-1)),e("div",mm,[ge.value?(s(),r("button",{key:1,onClick:n[4]||(n[4]=Q(_=>{ge.value=!1,he.value.clear()},["stop"])),class:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 transition"},n[43]||(n[43]=[e("i",{class:"fa fa-times mr-1"},null,-1),c("Cancel ")]))):(s(),r("button",{key:0,onClick:n[3]||(n[3]=Q(_=>ge.value=!0,["stop"])),class:"text-xs bg-indigo-500 text-white px-2 py-1 rounded hover:bg-indigo-600 transition"},n[42]||(n[42]=[e("i",{class:"fa fa-check-square mr-1"},null,-1),c("Multi Approve ")]))),e("button",{onClick:_e,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},n[44]||(n[44]=[e("i",{class:"fa fa-times text-xl"},null,-1)]))])]),ge.value&&he.value.size>0?(s(),r("div",vm,[e("span",fm,a(he.value.size)+" item dipilih ",1),e("div",{class:"flex gap-2"},[e("button",{onClick:L,class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition"},n[46]||(n[46]=[e("i",{class:"fa fa-check-double mr-1"},null,-1),c("Select All ")])),e("button",{onClick:q,class:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700 transition"},n[47]||(n[47]=[e("i",{class:"fa fa-check mr-1"},null,-1),c("Approve Selected ")]))])])):i("",!0),e("div",ym,[e("div",bm,[de(e("input",{"onUpdate:modelValue":n[5]||(n[5]=_=>Be.value=_),type:"text",placeholder:"Cari nomor, supplier, creator...",class:"flex-1 min-w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[Ge,Be.value]]),de(e("select",{"onUpdate:modelValue":n[6]||(n[6]=_=>ie.value=_),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},n[48]||(n[48]=[e("option",{value:""},"Semua Tanggal",-1),e("option",{value:"today"},"Hari Ini",-1),e("option",{value:"week"},"Minggu Ini",-1),e("option",{value:"month"},"Bulan Ini",-1)]),512),[[Te,ie.value]]),de(e("select",{"onUpdate:modelValue":n[7]||(n[7]=_=>Se.value=_),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},n[49]||(n[49]=[e("option",{value:"newest"},"Terbaru",-1),e("option",{value:"oldest"},"Terlama",-1),e("option",{value:"number"},"Nomor",-1),e("option",{value:"amount"},"Jumlah",-1)]),512),[[Te,Se.value]])]),e("div",hm,[e("div",km," Menampilkan "+a(w.value.length)+" dari "+a(Z.value.length)+" PO Foods ",1),de(e("select",{"onUpdate:modelValue":n[8]||(n[8]=_=>R.value=_),onChange:n[9]||(n[9]=_=>ke.value=1),class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"},n[50]||(n[50]=[e("option",{value:10},"10 per halaman",-1),e("option",{value:25},"25 per halaman",-1),e("option",{value:50},"50 per halaman",-1),e("option",{value:100},"100 per halaman",-1)]),544),[[Te,R.value]])])]),Ne.value?(s(),r("div",_m,n[51]||(n[51]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-400"},"Memuat data...",-1)]))):w.value.length===0?(s(),r("div",wm," Tidak ada PO Foods yang ditemukan ")):(s(),r("div",Cm,[(s(!0),r(I,null,K(w.value,_=>{var Y,k;return s(),r("div",{key:"all-po-"+_.id,class:u(["p-3 rounded-lg transition-all duration-200 border border-gray-200 dark:border-gray-700",[ge.value?"cursor-default":"cursor-pointer hover:scale-[1.02] hover:border-indigo-500 dark:hover:border-indigo-500",C.isNight?"bg-slate-700/50 hover:bg-slate-600/50":"bg-gray-50 hover:bg-indigo-50",he.value.has(_.id)?"ring-2 ring-indigo-500":""]]),onClick:m=>ge.value?re(_.id):O(_.id)},[e("div",$m,[e("div",Nm,[ge.value?(s(),r("input",{key:0,type:"checkbox",checked:he.value.has(_.id),onClick:Q(m=>re(_.id),["stop"]),class:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"},null,8,Dm)):i("",!0),e("div",Am,[e("div",{class:u(["font-semibold text-sm",C.isNight?"text-white":"text-slate-800"])},a(_.number),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-300":"text-slate-600"])},a(((Y=_.supplier)==null?void 0:Y.name)||"Unknown Supplier"),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[n[52]||(n[52]=e("i",{class:"fa fa-box mr-1 text-indigo-600"},null,-1)),c(" "+a(_.items_count)+" items ",1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[n[53]||(n[53]=e("i",{class:"fa fa-money-bill-wave mr-1 text-indigo-600"},null,-1)),c(" Rp "+a(new Intl.NumberFormat("id-ID").format(_.grand_total)),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[n[54]||(n[54]=e("i",{class:"fa fa-user mr-1 text-indigo-500"},null,-1)),c(a((k=_.creator)==null?void 0:k.nama_lengkap),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},a(fe(_.date)),3)])]),e("div",Sm,[n[55]||(n[55]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(_.approver_name||_.approval_level_display),1)])])],10,Bm)}),128))])),F.value>1?(s(),r("div",jm,[e("div",Tm," Halaman "+a(ke.value)+" dari "+a(F.value),1),e("div",Pm,[e("button",{onClick:n[10]||(n[10]=_=>E(ke.value-1)),disabled:ke.value===1,class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed"},n[56]||(n[56]=[e("i",{class:"fa fa-chevron-left"},null,-1)]),8,Vm),(s(!0),r(I,null,K(ce.value,_=>(s(),r(I,{key:"page-"+_},[_!=="..."?(s(),r("button",{key:0,onClick:Y=>E(_),class:u(["px-3 py-1 border rounded-lg",ke.value===_?"bg-indigo-500 text-white border-indigo-500":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"])},a(_),11,Em)):(s(),r("span",Rm,"..."))],64))),128)),e("button",{onClick:n[11]||(n[11]=_=>E(ke.value+1)),disabled:ke.value===F.value,class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed"},n[57]||(n[57]=[e("i",{class:"fa fa-chevron-right"},null,-1)]),8,Mm)])])):i("",!0)])])):i("",!0)]))])}}},Om=$t(Im,[["__scopeId","data-v-97c7f9bb"]]),Fm={key:0,class:"flex-shrink-0 mb-4"},Lm={class:"flex items-center justify-between mb-3"},qm={class:"flex items-center gap-2"},Um={class:"flex items-center gap-2"},zm={class:"bg-teal-500 text-white text-xs font-bold px-2 py-1 rounded-full"},Gm={key:0,class:"mb-3 p-2 bg-teal-100 dark:bg-teal-900/30 rounded-lg flex items-center justify-between"},Wm={class:"text-sm font-medium text-teal-800 dark:text-teal-200"},Km={key:1,class:"text-center py-4"},Hm={key:2,class:"space-y-2"},Jm=["onClick"],Ym={class:"flex items-center justify-between"},Qm={class:"flex items-center gap-2 flex-1"},Zm=["checked","onClick"],Xm={class:"flex-1"},ev={class:"text-xs text-teal-500 font-medium"},tv={key:0,class:"text-center pt-2"},av={key:0,class:"text-center py-8"},sv={key:1,class:"space-y-6"},rv={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},lv={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ov={class:"text-gray-900 dark:text-white font-semibold"},nv={class:"text-gray-900 dark:text-white"},iv={class:"text-gray-900 dark:text-white"},dv={class:"text-gray-900 dark:text-white"},uv={class:"text-gray-900 dark:text-white"},cv={key:0},gv={class:"text-gray-900 dark:text-white"},xv={class:"text-gray-900 dark:text-white"},pv={key:0,class:"mt-4"},mv={class:"text-gray-900 dark:text-white"},vv={key:0,class:"bg-teal-50 dark:bg-teal-900/20 p-4 rounded-lg"},fv={class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},yv={class:"overflow-x-auto"},bv={class:"min-w-full text-xs"},hv={class:"px-2 py-1 text-gray-900 dark:text-white"},kv={class:"px-2 py-1 text-gray-900 dark:text-white"},_v={class:"px-2 py-1 text-gray-900 dark:text-white"},wv={class:"px-2 py-1 text-gray-900 dark:text-white"},Cv={class:"px-2 py-1 text-gray-900 dark:text-white font-semibold"},Bv={class:"flex items-center justify-between mb-4"},$v={class:"flex items-center gap-2"},Nv={key:0,class:"mb-4 p-2 bg-teal-100 dark:bg-teal-900/30 rounded-lg flex items-center justify-between"},Dv={class:"text-sm font-medium text-teal-800 dark:text-teal-200"},Av={class:"mb-4 space-y-3"},Sv={class:"flex flex-wrap gap-3"},jv={class:"flex items-center justify-between"},Tv={class:"text-sm text-gray-600 dark:text-gray-400"},Pv={key:1,class:"text-center py-8"},Vv={key:2,class:"text-center py-8 text-gray-500 dark:text-gray-400"},Ev={key:3,class:"space-y-2"},Rv=["onClick"],Mv={class:"flex items-center justify-between"},Iv={class:"flex items-center gap-2 flex-1"},Ov=["checked","onClick"],Fv={class:"flex-1"},Lv={class:"text-xs text-teal-500 font-medium"},qv={key:4,class:"mt-4 flex items-center justify-between"},Uv={class:"text-sm text-gray-600 dark:text-gray-400"},zv={class:"flex gap-2"},Gv=["disabled"],Wv=["onClick"],Kv={key:1,class:"px-3 py-1 text-gray-500"},Hv=["disabled"],Jv={__name:"ROKhususApprovalCard",props:{isNight:{type:Boolean,default:!1}},emits:["approved","rejected"],setup(C,{expose:Ve,emit:te}){const le=te,z=p([]),ue=p(!1),J=p(new Set),T=p(!1),b=ve(()=>z.value.length);function fe(E){return E?new Date(E).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}function we(E){J.value.has(E)?J.value.delete(E):J.value.add(E)}function ne(){z.value.forEach(E=>{J.value.add(E.id)})}async function be(){if(J.value.size===0){v.fire("Warning","Pilih minimal satu RO Khusus untuk di-approve","warning");return}if((await v.fire({title:"Approve Multiple RO Khusus?",text:`Apakah Anda yakin ingin approve ${J.value.size} RO Khusus?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#14b8a6"})).isConfirmed)try{v.fire({title:"Processing...",text:"Sedang memproses approval...",allowOutsideClick:!1,didOpen:()=>{v.showLoading()}});const h=Array.from(J.value).map(async f=>{try{return await M.post(`/floor-order/${f}/approve`,{notes:""}),{success:!0,roId:f}}catch(_){return{error:_,roId:f}}}),y=await Promise.all(h),n=y.filter(f=>f.success).length,$=y.filter(f=>f.error).length;J.value.clear(),T.value=!1,P(),$===0?v.fire("Success",`${n} RO Khusus berhasil disetujui`,"success"):v.fire("Partial Success",`${n} berhasil, ${$} gagal`,"warning")}catch(g){console.error("Error approving multiple RO Khusus:",g),v.fire("Error","Gagal menyetujui RO Khusus","error")}}async function P(){ue.value=!0;try{const E=await M.get("/api/ro-khusus/pending-approvals");E.data.success&&(z.value=E.data.ro_khusus||[])}catch(E){console.error("Error loading pending RO Khusus approvals:",E)}finally{ue.value=!1}}const D=p(!1),N=p(null),j=p(!1);async function ee(E){var g,h,y;try{V.value&&(V.value=!1),j.value=!0,D.value=!0;const n=await M.get(`/api/ro-khusus/${E}`);n.data&&n.data.success&&n.data.ro_khusus?N.value=n.data.ro_khusus:(v.fire("Error",((g=n.data)==null?void 0:g.message)||"Gagal memuat detail RO Khusus","error"),O())}catch(n){console.error("Error loading RO Khusus details:",n);const $=((y=(h=n.response)==null?void 0:h.data)==null?void 0:y.message)||n.message||"Gagal memuat detail RO Khusus";v.fire("Error",$,"error"),O()}finally{j.value=!1}}function O(){D.value=!1,N.value=null}async function H(){var E,g;if(N.value)try{if(!(await v.fire({title:"Setujui RO Khusus?",text:`Anda akan menyetujui RO Khusus ${N.value.order_number}.`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Setujui",cancelButtonText:"Batal",confirmButtonColor:"#10B981",cancelButtonColor:"#6B7280"})).isConfirmed)return;const y=N.value.id,n=await M.post(`/floor-order/${y}/approve`,{notes:""});v.fire("Success","RO Khusus berhasil disetujui","success"),O(),P(),le("approved",y)}catch(h){console.error("Error approving RO Khusus:",h);const y=((g=(E=h.response)==null?void 0:E.data)==null?void 0:g.message)||h.message||"Gagal menyetujui RO Khusus";v.fire("Error",y,"error")}}function xe(){v.fire({title:"Tolak RO Khusus",input:"textarea",inputLabel:"Alasan Penolakan",inputPlaceholder:"Masukkan alasan penolakan...",inputAttributes:{"aria-label":"Masukkan alasan penolakan"},showCancelButton:!0,confirmButtonText:"Tolak",cancelButtonText:"Batal",confirmButtonColor:"#ef4444",inputValidator:E=>{if(!E)return"Alasan penolakan harus diisi!"}}).then(async E=>{var g,h;if(E.isConfirmed&&N.value)try{const y=N.value.id,n=await M.post(`/floor-order/${y}/approve`,{notes:E.value,approved:!1});v.fire("Success","RO Khusus berhasil ditolak","success"),O(),P(),le("rejected",y)}catch(y){console.error("Error rejecting RO Khusus:",y),v.fire("Error",((h=(g=y.response)==null?void 0:g.data)==null?void 0:h.message)||"Gagal menolak RO Khusus","error")}})}const V=p(!1),Ce=p([]),De=p(!1),Ne=p(""),Be=p(""),ie=p("newest"),Se=p(1),ke=p(10),R=p(!1),ge=p(new Set);async function he(){De.value=!0;try{const E=await M.get("/api/ro-khusus/pending-approvals?limit=500");E.data.success&&(Ce.value=E.data.ro_khusus||[],Se.value=1)}catch(E){console.error("Error loading all RO Khusus approvals:",E)}finally{De.value=!1}}function se(){V.value=!0,he(),R.value=!1,ge.value.clear()}function W(E){ge.value.has(E)?ge.value.delete(E):ge.value.add(E)}function re(){F.value.forEach(E=>{ge.value.add(E.id)})}async function L(){if(ge.value.size===0){v.fire("Warning","Pilih minimal satu RO Khusus untuk di-approve","warning");return}if((await v.fire({title:"Approve Multiple RO Khusus?",text:`Apakah Anda yakin ingin approve ${ge.value.size} RO Khusus?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#14b8a6"})).isConfirmed)try{v.fire({title:"Processing...",text:"Sedang memproses approval...",allowOutsideClick:!1,didOpen:()=>{v.showLoading()}});const h=Array.from(ge.value).map(async f=>{try{return await M.post(`/floor-order/${f}/approve`,{notes:""}),{success:!0,roId:f}}catch(_){return{error:_,roId:f}}}),y=await Promise.all(h),n=y.filter(f=>f.success).length,$=y.filter(f=>f.error).length;ge.value.clear(),R.value=!1,he(),P(),$===0?v.fire("Success",`${n} RO Khusus berhasil disetujui`,"success"):v.fire("Partial Success",`${n} berhasil, ${$} gagal`,"warning")}catch(g){console.error("Error approving multiple RO Khusus:",g),v.fire("Error","Gagal menyetujui RO Khusus","error")}}function q(){V.value=!1}const _e=ve(()=>{let E=[...Ce.value];if(Ne.value){const g=Ne.value.toLowerCase();E=E.filter(h=>{var _,Y,k;const y=(h.order_number||"").toLowerCase(),n=(((_=h.outlet)==null?void 0:_.nama_outlet)||"").toLowerCase(),$=(((Y=h.warehouse_outlet)==null?void 0:Y.name)||"").toLowerCase(),f=(((k=h.requester)==null?void 0:k.nama_lengkap)||"").toLowerCase();return y.includes(g)||n.includes(g)||$.includes(g)||f.includes(g)})}if(Be.value){const g=new Date,h=new Date(g.getFullYear(),g.getMonth(),g.getDate());E=E.filter(y=>{const n=new Date(y.tanggal);switch(Be.value){case"today":return n>=h;case"week":return n>=new Date(h.getTime()-7*24*60*60*1e3);case"month":return n>=new Date(h.getTime()-30*24*60*60*1e3);default:return!0}})}return E.sort((g,h)=>{switch(ie.value){case"oldest":return new Date(g.tanggal||g.created_at)-new Date(h.tanggal||h.created_at);case"number":return(g.order_number||"").localeCompare(h.order_number||"");case"newest":default:return new Date(h.tanggal||h.created_at)-new Date(g.tanggal||g.created_at)}}),E}),Z=ve(()=>Math.ceil(_e.value.length/ke.value)),F=ve(()=>{const E=(Se.value-1)*ke.value,g=E+ke.value;return _e.value.slice(E,g)}),w=ve(()=>{const E=Z.value,g=Se.value,h=[];if(E<=7)for(let y=1;y<=E;y++)h.push(y);else if(g<=3){for(let y=1;y<=5;y++)h.push(y);h.push("..."),h.push(E)}else if(g>=E-2){h.push(1),h.push("...");for(let y=E-4;y<=E;y++)h.push(y)}else{h.push(1),h.push("...");for(let y=g-1;y<=g+1;y++)h.push(y);h.push("..."),h.push(E)}return h});function ce(E){E>=1&&E<=Z.value&&(Se.value=E)}return it([Ne,Be,ie],()=>{Se.value=1}),st(()=>{P()}),Ve({loadPendingApprovals:P,refresh:P}),(E,g)=>{var h,y,n,$;return s(),r("div",null,[b.value>0?(s(),r("div",Fm,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl",C.isNight?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",Lm,[e("div",qm,[g[14]||(g[14]=e("div",{class:"w-3 h-3 rounded-full bg-teal-500 animate-pulse"},null,-1)),e("h3",{class:u(["text-lg font-bold",C.isNight?"text-white":"text-slate-800"])},g[13]||(g[13]=[e("i",{class:"fa fa-clipboard-list mr-2 text-teal-500"},null,-1),c(" RO Khusus Approval ")]),2)]),e("div",Um,[T.value?(s(),r("button",{key:1,onClick:g[1]||(g[1]=Q(f=>{T.value=!1,J.value.clear()},["stop"])),class:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 transition"},g[16]||(g[16]=[e("i",{class:"fa fa-times mr-1"},null,-1),c("Cancel ")]))):(s(),r("button",{key:0,onClick:g[0]||(g[0]=Q(f=>T.value=!0,["stop"])),class:"text-xs bg-teal-500 text-white px-2 py-1 rounded hover:bg-teal-600 transition"},g[15]||(g[15]=[e("i",{class:"fa fa-check-square mr-1"},null,-1),c("Multi Approve ")]))),e("div",zm,a(b.value),1)])]),T.value&&J.value.size>0?(s(),r("div",Gm,[e("span",Wm,a(J.value.size)+" item dipilih ",1),e("div",{class:"flex gap-2"},[e("button",{onClick:ne,class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition"},g[17]||(g[17]=[e("i",{class:"fa fa-check-double mr-1"},null,-1),c("Select All ")])),e("button",{onClick:be,class:"text-xs bg-teal-600 text-white px-2 py-1 rounded hover:bg-teal-700 transition"},g[18]||(g[18]=[e("i",{class:"fa fa-check mr-1"},null,-1),c("Approve Selected ")]))])])):i("",!0),ue.value?(s(),r("div",Km,[g[19]||(g[19]=e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-teal-500"},null,-1)),e("p",{class:u(["text-sm mt-2",C.isNight?"text-slate-300":"text-slate-600"])},"Memuat data...",2)])):(s(),r("div",Hm,[(s(!0),r(I,null,K(z.value.slice(0,3),f=>{var _,Y,k;return s(),r("div",{key:"ro-khusus-approval-"+f.id,onClick:m=>T.value?we(f.id):ee(f.id),class:u(["p-3 rounded-lg transition-all duration-200",[T.value?"cursor-default":"cursor-pointer hover:scale-105",C.isNight?"bg-slate-700/50 hover:bg-slate-600/50":"bg-teal-50 hover:bg-teal-100",J.value.has(f.id)?"ring-2 ring-teal-500":""]])},[e("div",Ym,[e("div",Qm,[T.value?(s(),r("input",{key:0,type:"checkbox",checked:J.value.has(f.id),onClick:Q(m=>we(f.id),["stop"]),class:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"},null,8,Zm)):i("",!0),e("div",Xm,[e("div",{class:u(["font-semibold text-sm",C.isNight?"text-white":"text-slate-800"])},a(f.order_number),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-300":"text-slate-600"])},a(((_=f.outlet)==null?void 0:_.nama_outlet)||"Unknown Outlet"),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[g[20]||(g[20]=e("i",{class:"fa fa-warehouse mr-1 text-teal-600"},null,-1)),c(" "+a(((Y=f.warehouse_outlet)==null?void 0:Y.name)||"Unknown Warehouse"),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[g[21]||(g[21]=e("i",{class:"fa fa-box mr-1 text-teal-600"},null,-1)),c(" "+a(f.items_count)+" items ",1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[g[22]||(g[22]=e("i",{class:"fa fa-user mr-1 text-teal-500"},null,-1)),c(a((k=f.requester)==null?void 0:k.nama_lengkap),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},a(fe(f.tanggal)),3)])]),e("div",ev,[g[23]||(g[23]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(f.approver_name||f.approval_level_display),1)])])],10,Jm)}),128)),z.value.length>3?(s(),r("div",tv,[e("button",{onClick:se,class:"text-sm text-teal-500 hover:text-teal-700 font-medium"}," Lihat "+a(z.value.length-3)+" RO Khusus lainnya... ",1)])):i("",!0)]))],2)])):i("",!0),(s(),He(Ze,{to:"body"},[D.value&&N.value?(s(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]",onClick:O},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",onClick:g[2]||(g[2]=Q(()=>{},["stop"]))},[e("div",{class:"flex items-center justify-between mb-4"},[g[25]||(g[25]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-clipboard-list mr-2 text-teal-500"}),c(" Detail RO Khusus Approval ")],-1)),e("button",{onClick:O,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},g[24]||(g[24]=[e("i",{class:"fa fa-times text-xl"},null,-1)]))]),j.value?(s(),r("div",av,g[26]||(g[26]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-teal-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-400"},"Memuat detail...",-1)]))):(s(),r("div",sv,[e("div",rv,[g[35]||(g[35]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Informasi Dasar",-1)),e("div",lv,[e("div",null,[g[27]||(g[27]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"RO Number",-1)),e("p",ov,a(N.value.order_number),1)]),e("div",null,[g[28]||(g[28]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Tanggal",-1)),e("p",nv,a(new Date(N.value.tanggal).toLocaleDateString("id-ID")),1)]),e("div",null,[g[29]||(g[29]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Outlet",-1)),e("p",iv,a(((h=N.value.outlet)==null?void 0:h.nama_outlet)||"Unknown"),1)]),e("div",null,[g[30]||(g[30]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Warehouse Outlet",-1)),e("p",dv,a(((y=N.value.warehouse_outlet)==null?void 0:y.name)||"Unknown"),1)]),e("div",null,[g[31]||(g[31]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Requester",-1)),e("p",uv,a(((n=N.value.requester)==null?void 0:n.nama_lengkap)||"Unknown"),1)]),N.value.arrival_date?(s(),r("div",cv,[g[32]||(g[32]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Arrival Date",-1)),e("p",gv,a(new Date(N.value.arrival_date).toLocaleDateString("id-ID")),1)])):i("",!0),e("div",null,[g[33]||(g[33]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Items Count",-1)),e("p",xv,a((($=N.value.items)==null?void 0:$.length)||0)+" items",1)])]),N.value.description?(s(),r("div",pv,[g[34]||(g[34]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Description",-1)),e("p",mv,a(N.value.description),1)])):i("",!0)]),N.value.items&&N.value.items.length>0?(s(),r("div",vv,[e("h4",fv,[g[36]||(g[36]=e("i",{class:"fa fa-box mr-2 text-teal-500"},null,-1)),c(" Items ("+a(N.value.items.length)+") ",1)]),e("div",yv,[e("table",bv,[g[37]||(g[37]=e("thead",{class:"bg-gray-100 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Item"),e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Qty"),e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Unit"),e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Price"),e("th",{class:"px-2 py-1 text-left text-gray-700 dark:text-gray-300"},"Subtotal")])],-1)),e("tbody",null,[(s(!0),r(I,null,K(N.value.items,f=>{var _;return s(),r("tr",{key:"item-"+f.id,class:"border-t border-gray-200 dark:border-gray-600"},[e("td",hv,a(((_=f.item)==null?void 0:_.name)||f.item_name||"-"),1),e("td",kv,a(f.qty||0),1),e("td",_v,a(f.unit||"-"),1),e("td",wv,"Rp "+a(new Intl.NumberFormat("id-ID").format(f.price||0)),1),e("td",Cv,"Rp "+a(new Intl.NumberFormat("id-ID").format(f.subtotal||0)),1)])}),128))])])])])):i("",!0),e("div",{class:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"},[e("button",{onClick:xe,class:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors"},g[38]||(g[38]=[e("i",{class:"fa fa-times mr-2"},null,-1),c("Tolak ")])),e("button",{onClick:H,class:"px-4 py-2 bg-teal-500 text-white rounded-lg hover:bg-teal-600 transition-colors"},g[39]||(g[39]=[e("i",{class:"fa fa-check mr-2"},null,-1),c("Setujui ")]))])]))])])):i("",!0)])),(s(),He(Ze,{to:"body"},[V.value?(s(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998]",onClick:q},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-5xl mx-4 max-h-[90vh] overflow-y-auto",onClick:g[12]||(g[12]=Q(()=>{},["stop"]))},[e("div",Bv,[g[43]||(g[43]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-list mr-2 text-teal-500"}),c(" Semua RO Khusus Pending ")],-1)),e("div",$v,[R.value?(s(),r("button",{key:1,onClick:g[4]||(g[4]=Q(f=>{R.value=!1,ge.value.clear()},["stop"])),class:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 transition"},g[41]||(g[41]=[e("i",{class:"fa fa-times mr-1"},null,-1),c("Cancel ")]))):(s(),r("button",{key:0,onClick:g[3]||(g[3]=Q(f=>R.value=!0,["stop"])),class:"text-xs bg-teal-500 text-white px-2 py-1 rounded hover:bg-teal-600 transition"},g[40]||(g[40]=[e("i",{class:"fa fa-check-square mr-1"},null,-1),c("Multi Approve ")]))),e("button",{onClick:q,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},g[42]||(g[42]=[e("i",{class:"fa fa-times text-xl"},null,-1)]))])]),R.value&&ge.value.size>0?(s(),r("div",Nv,[e("span",Dv,a(ge.value.size)+" item dipilih ",1),e("div",{class:"flex gap-2"},[e("button",{onClick:re,class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition"},g[44]||(g[44]=[e("i",{class:"fa fa-check-double mr-1"},null,-1),c("Select All ")])),e("button",{onClick:L,class:"text-xs bg-teal-600 text-white px-2 py-1 rounded hover:bg-teal-700 transition"},g[45]||(g[45]=[e("i",{class:"fa fa-check mr-1"},null,-1),c("Approve Selected ")]))])])):i("",!0),e("div",Av,[e("div",Sv,[de(e("input",{"onUpdate:modelValue":g[5]||(g[5]=f=>Ne.value=f),type:"text",placeholder:"Cari nomor, outlet, warehouse, requester...",class:"flex-1 min-w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[Ge,Ne.value]]),de(e("select",{"onUpdate:modelValue":g[6]||(g[6]=f=>Be.value=f),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},g[46]||(g[46]=[e("option",{value:""},"Semua Tanggal",-1),e("option",{value:"today"},"Hari Ini",-1),e("option",{value:"week"},"Minggu Ini",-1),e("option",{value:"month"},"Bulan Ini",-1)]),512),[[Te,Be.value]]),de(e("select",{"onUpdate:modelValue":g[7]||(g[7]=f=>ie.value=f),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},g[47]||(g[47]=[e("option",{value:"newest"},"Terbaru",-1),e("option",{value:"oldest"},"Terlama",-1),e("option",{value:"number"},"Nomor",-1)]),512),[[Te,ie.value]])]),e("div",jv,[e("div",Tv," Menampilkan "+a(F.value.length)+" dari "+a(_e.value.length)+" RO Khusus ",1),de(e("select",{"onUpdate:modelValue":g[8]||(g[8]=f=>ke.value=f),onChange:g[9]||(g[9]=f=>Se.value=1),class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"},g[48]||(g[48]=[e("option",{value:10},"10 per halaman",-1),e("option",{value:25},"25 per halaman",-1),e("option",{value:50},"50 per halaman",-1),e("option",{value:100},"100 per halaman",-1)]),544),[[Te,ke.value]])])]),De.value?(s(),r("div",Pv,g[49]||(g[49]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-teal-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-400"},"Memuat data...",-1)]))):F.value.length===0?(s(),r("div",Vv," Tidak ada RO Khusus yang ditemukan ")):(s(),r("div",Ev,[(s(!0),r(I,null,K(F.value,f=>{var _,Y,k;return s(),r("div",{key:"all-ro-"+f.id,class:u(["p-3 rounded-lg transition-all duration-200 border border-gray-200 dark:border-gray-700",[R.value?"cursor-default":"cursor-pointer hover:scale-[1.02] hover:border-teal-500 dark:hover:border-teal-500",C.isNight?"bg-slate-700/50 hover:bg-slate-600/50":"bg-gray-50 hover:bg-teal-50",ge.value.has(f.id)?"ring-2 ring-teal-500":""]]),onClick:m=>R.value?W(f.id):ee(f.id)},[e("div",Mv,[e("div",Iv,[R.value?(s(),r("input",{key:0,type:"checkbox",checked:ge.value.has(f.id),onClick:Q(m=>W(f.id),["stop"]),class:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"},null,8,Ov)):i("",!0),e("div",Fv,[e("div",{class:u(["font-semibold text-sm",C.isNight?"text-white":"text-slate-800"])},a(f.order_number),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-300":"text-slate-600"])},a(((_=f.outlet)==null?void 0:_.nama_outlet)||"Unknown Outlet"),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[g[50]||(g[50]=e("i",{class:"fa fa-warehouse mr-1 text-teal-600"},null,-1)),c(" "+a(((Y=f.warehouse_outlet)==null?void 0:Y.name)||"Unknown Warehouse"),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[g[51]||(g[51]=e("i",{class:"fa fa-box mr-1 text-teal-600"},null,-1)),c(" "+a(f.items_count)+" items ",1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[g[52]||(g[52]=e("i",{class:"fa fa-user mr-1 text-teal-500"},null,-1)),c(a((k=f.requester)==null?void 0:k.nama_lengkap),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},a(fe(f.tanggal)),3)])]),e("div",Lv,[g[53]||(g[53]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(f.approver_name||f.approval_level_display),1)])])],10,Rv)}),128))])),Z.value>1?(s(),r("div",qv,[e("div",Uv," Halaman "+a(Se.value)+" dari "+a(Z.value),1),e("div",zv,[e("button",{onClick:g[10]||(g[10]=f=>ce(Se.value-1)),disabled:Se.value===1,class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed"},g[54]||(g[54]=[e("i",{class:"fa fa-chevron-left"},null,-1)]),8,Gv),(s(!0),r(I,null,K(w.value,f=>(s(),r(I,{key:"page-"+f},[f!=="..."?(s(),r("button",{key:0,onClick:_=>ce(f),class:u(["px-3 py-1 border rounded-lg",Se.value===f?"bg-teal-500 text-white border-teal-500":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"])},a(f),11,Wv)):(s(),r("span",Kv,"..."))],64))),128)),e("button",{onClick:g[11]||(g[11]=f=>ce(Se.value+1)),disabled:Se.value===Z.value,class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed"},g[55]||(g[55]=[e("i",{class:"fa fa-chevron-right"},null,-1)]),8,Hv)])])):i("",!0)])])):i("",!0)]))])}}},Yv=$t(Jv,[["__scopeId","data-v-086e33d0"]]),Qv={key:0,class:"flex-shrink-0 mb-4"},Zv={class:"flex items-center justify-between mb-3"},Xv={class:"flex items-center gap-2"},e1={class:"flex items-center gap-2"},t1={class:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full"},a1={key:0,class:"mb-3 p-2 bg-red-100 dark:bg-red-900/30 rounded-lg flex items-center justify-between"},s1={class:"text-sm font-medium text-red-800 dark:text-red-200"},r1={key:1,class:"text-center py-4"},l1={key:2,class:"space-y-2"},o1=["onClick"],n1={class:"flex items-center justify-between"},i1={class:"flex items-center gap-2 flex-1"},d1=["checked","onClick"],u1={class:"flex-1"},c1={class:"text-xs text-red-500 font-medium"},g1={key:0,class:"text-center pt-2"},x1={key:0,class:"text-center py-8"},p1={key:1,class:"space-y-6"},m1={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},v1={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},f1={class:"text-gray-900 dark:text-white font-semibold"},y1={class:"text-gray-900 dark:text-white"},b1={class:"text-gray-900 dark:text-white"},h1={class:"text-gray-900 dark:text-white"},k1={class:"text-gray-900 dark:text-white"},_1={class:"text-gray-900 dark:text-white"},w1={class:"px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800"},C1={class:"text-gray-900 dark:text-white"},B1={class:"text-gray-900 dark:text-white"},$1={key:0,class:"mt-4"},N1={class:"text-gray-900 dark:text-white"},D1={key:0,class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},A1={class:"space-y-2"},S1={class:"flex items-center gap-3"},j1={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},T1={class:"font-medium text-gray-900 dark:text-white"},P1={class:"text-xs text-gray-600 dark:text-gray-400"},V1={class:"text-right"},E1={key:0,class:"text-xs text-gray-500 mt-1"},R1={key:1,class:"text-xs text-gray-500 mt-1"},M1={class:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"},I1=["disabled"],O1={key:0,class:"fa fa-times mr-2"},F1={key:1,class:"fa fa-spinner fa-spin mr-2"},L1=["disabled"],q1={key:0,class:"fa fa-check mr-2"},U1={key:1,class:"fa fa-spinner fa-spin mr-2"},z1={class:"flex items-center justify-between mb-4"},G1={class:"flex items-center gap-2"},W1={key:0,class:"mb-4 p-2 bg-red-100 dark:bg-red-900/30 rounded-lg flex items-center justify-between"},K1={class:"text-sm font-medium text-red-800 dark:text-red-200"},H1={class:"mb-4 space-y-3"},J1={class:"flex flex-wrap gap-3"},Y1={class:"flex items-center justify-between"},Q1={class:"text-sm text-gray-600 dark:text-gray-400"},Z1={key:1,class:"text-center py-8"},X1={key:2,class:"text-center py-8 text-gray-500 dark:text-gray-400"},ef={key:3,class:"space-y-2"},tf=["onClick"],af={class:"flex items-center justify-between"},sf={class:"flex items-center gap-2 flex-1"},rf=["checked","onClick"],lf={class:"flex-1"},of={class:"text-xs text-red-500 font-medium"},nf={key:4,class:"mt-4 flex items-center justify-between"},df={class:"text-sm text-gray-600 dark:text-gray-400"},uf={class:"flex gap-2"},cf=["disabled"],gf=["onClick"],xf={key:1,class:"px-3 py-1 text-gray-500"},pf=["disabled"],mf={__name:"EmployeeResignationApprovalCard",props:{isNight:{type:Boolean,default:!1}},emits:["approved","rejected"],setup(C,{expose:Ve,emit:te}){const le=te,z=p([]),ue=p(!1),J=p(!1),T=p(!1),b=p(new Set),fe=p(!1),we=p(!1),ne=p(new Set),be=ve(()=>z.value.length);function P(y){return y?new Date(y).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}function D(y){return y?new Date(y).toLocaleString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}async function N(){ue.value=!0;try{const y=new Date().getTime(),n=await M.get(`/api/employee-resignations/pending-approvals?t=${y}`);n.data.success&&(z.value=n.data.resignations||[])}catch(y){console.error("Error loading pending Employee Resignation approvals:",y)}finally{ue.value=!1}}const j=p(!1),ee=p(null),O=p(!1);async function H(y){var n,$,f;try{R.value&&(R.value=!1),O.value=!0,j.value=!0;const _=await M.get(`/employee-resignations/${y}`);_.data&&_.data.resignation?ee.value=_.data.resignation:(v.fire("Error",((n=_.data)==null?void 0:n.message)||"Gagal memuat detail Employee Resignation","error"),xe())}catch(_){console.error("Error loading Employee Resignation details:",_);const Y=((f=($=_.response)==null?void 0:$.data)==null?void 0:f.message)||_.message||"Gagal memuat detail Employee Resignation";v.fire("Error",Y,"error"),xe()}finally{O.value=!1}}function xe(){j.value=!1,ee.value=null}function V(y){b.value.has(y)?b.value.delete(y):b.value.add(y)}function Ce(){z.value.forEach(y=>{b.value.add(y.id)})}async function De(){if(b.value.size===0){v.fire("Warning","Pilih minimal satu Employee Resignation untuk di-approve","warning");return}if((await v.fire({title:"Approve Multiple Employee Resignations?",text:`Apakah Anda yakin ingin approve ${b.value.size} Employee Resignation?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#dc2626"})).isConfirmed)try{v.fire({title:"Processing...",text:"Sedang memproses approval...",allowOutsideClick:!1,didOpen:()=>{v.showLoading()}});const $=Array.from(b.value).map(async m=>{try{return await M.post(`/employee-resignations/${m}/approve`,{note:""}),{success:!0,resignationId:m}}catch(d){return{error:d,resignationId:m}}}),f=await Promise.all($),_=f.filter(m=>m.success).length,Y=f.filter(m=>m.error).length,k=f.filter(m=>m.success&&m.resignationId).map(m=>m.resignationId);b.value.clear(),fe.value=!1,await new Promise(m=>setTimeout(m,500)),await N(),Y===0?(v.fire("Success",`${_} Employee Resignation berhasil disetujui`,"success"),k.forEach(m=>{m&&le("approved",m)})):(v.fire("Partial Success",`${_} berhasil, ${Y} gagal`,"warning"),k.forEach(m=>{m&&le("approved",m)}))}catch(n){console.error("Error approving multiple Employee Resignations:",n),v.fire("Error","Gagal menyetujui Employee Resignations","error")}}function Ne(y){ne.value.has(y)?ne.value.delete(y):ne.value.add(y)}function Be(){E.value.forEach(y=>{ne.value.add(y.id)})}async function ie(){if(ne.value.size===0){v.fire("Warning","Pilih minimal satu Employee Resignation untuk di-approve","warning");return}if((await v.fire({title:"Approve Multiple Employee Resignations?",text:`Apakah Anda yakin ingin approve ${ne.value.size} Employee Resignation?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#dc2626"})).isConfirmed)try{v.fire({title:"Processing...",text:"Sedang memproses approval...",allowOutsideClick:!1,didOpen:()=>{v.showLoading()}});const $=Array.from(ne.value).map(async m=>{try{return await M.post(`/employee-resignations/${m}/approve`,{note:""}),{success:!0,resignationId:m}}catch(d){return{error:d,resignationId:m}}}),f=await Promise.all($),_=f.filter(m=>m.success).length,Y=f.filter(m=>m.error).length,k=f.filter(m=>m.success&&m.resignationId).map(m=>m.resignationId);ne.value.clear(),we.value=!1,await new Promise(m=>setTimeout(m,500)),await _e(),await N(),Y===0?(v.fire("Success",`${_} Employee Resignation berhasil disetujui`,"success"),k.forEach(m=>{m&&le("approved",m)})):(v.fire("Partial Success",`${_} berhasil, ${Y} gagal`,"warning"),k.forEach(m=>{m&&le("approved",m)}))}catch(n){console.error("Error approving multiple Employee Resignations:",n),v.fire("Error","Gagal menyetujui Employee Resignations","error")}}async function Se(){var y,n,$,f;if(!(!ee.value||J.value)){J.value=!0;try{const _=await M.post(`/employee-resignations/${ee.value.id}/approve`,{note:""});if(_.data&&_.data.success){const Y=(y=ee.value)==null?void 0:y.id;v.fire("Success",_.data.message||"Employee Resignation berhasil disetujui","success"),xe(),await new Promise(k=>setTimeout(k,500)),await N(),Y&&le("approved",Y)}else{const Y=((n=_.data)==null?void 0:n.message)||"Gagal menyetujui Employee Resignation";v.fire("Error",Y,"error")}}catch(_){console.error("Error approving Employee Resignation:",_);const Y=((f=($=_.response)==null?void 0:$.data)==null?void 0:f.message)||_.message||"Gagal menyetujui Employee Resignation";v.fire("Error",Y,"error")}finally{J.value=!1}}}function ke(){v.fire({title:"Tolak Employee Resignation",input:"textarea",inputLabel:"Alasan Penolakan",inputPlaceholder:"Masukkan alasan penolakan...",inputAttributes:{"aria-label":"Masukkan alasan penolakan"},showCancelButton:!0,confirmButtonText:"Tolak",cancelButtonText:"Batal",confirmButtonColor:"#ef4444",inputValidator:y=>{if(!y)return"Alasan penolakan harus diisi!"}}).then(async y=>{var n,$,f;if(y.isConfirmed&&ee.value){T.value=!0;try{if((await M.post(`/employee-resignations/${ee.value.id}/reject`,{note:y.value})).data.success){const Y=(n=ee.value)==null?void 0:n.id;v.fire("Success","Employee Resignation berhasil ditolak","success"),xe(),await new Promise(k=>setTimeout(k,500)),await N(),Y&&le("rejected",Y)}}catch(_){console.error("Error rejecting Employee Resignation:",_),v.fire("Error",((f=($=_.response)==null?void 0:$.data)==null?void 0:f.message)||"Gagal menolak Employee Resignation","error")}finally{T.value=!1}}})}const R=p(!1),ge=p([]),he=p(!1),se=p(""),W=p(""),re=p("newest"),L=p(1),q=p(10);async function _e(){he.value=!0;try{const y=await M.get("/api/employee-resignations/pending-approvals?limit=500");y.data.success&&(ge.value=y.data.resignations||[],L.value=1)}catch(y){console.error("Error loading all Employee Resignation approvals:",y)}finally{he.value=!1}}function Z(){R.value=!0,_e(),we.value=!1,ne.value.clear()}function F(){R.value=!1}const w=ve(()=>{let y=[...ge.value];if(se.value){const n=se.value.toLowerCase();y=y.filter($=>{var k,m;const f=($.resignation_number||"").toLowerCase(),_=(((k=$.employee)==null?void 0:k.nama_lengkap)||"").toLowerCase(),Y=(((m=$.outlet)==null?void 0:m.nama_outlet)||"").toLowerCase();return f.includes(n)||_.includes(n)||Y.includes(n)})}if(W.value){const n=new Date,$=new Date(n.getFullYear(),n.getMonth(),n.getDate());y=y.filter(f=>{const _=new Date(f.resignation_date);switch(W.value){case"today":return _>=$;case"week":return _>=new Date($.getTime()-7*24*60*60*1e3);case"month":return _>=new Date($.getTime()-30*24*60*60*1e3);default:return!0}})}return y.sort((n,$)=>{switch(re.value){case"oldest":return new Date(n.resignation_date||n.created_at)-new Date($.resignation_date||$.created_at);case"number":return(n.resignation_number||"").localeCompare($.resignation_number||"");case"newest":default:return new Date($.resignation_date||$.created_at)-new Date(n.resignation_date||n.created_at)}}),y}),ce=ve(()=>Math.ceil(w.value.length/q.value)),E=ve(()=>{const y=(L.value-1)*q.value,n=y+q.value;return w.value.slice(y,n)}),g=ve(()=>{const y=ce.value,n=L.value,$=[];if(y<=7)for(let f=1;f<=y;f++)$.push(f);else if(n<=3){for(let f=1;f<=5;f++)$.push(f);$.push("..."),$.push(y)}else if(n>=y-2){$.push(1),$.push("...");for(let f=y-4;f<=y;f++)$.push(f)}else{$.push(1),$.push("...");for(let f=n-1;f<=n+1;f++)$.push(f);$.push("..."),$.push(y)}return $});function h(y){y>=1&&y<=ce.value&&(L.value=y)}return it([se,W,re],()=>{L.value=1}),st(()=>{N()}),Ve({loadPendingApprovals:N,refresh:N}),(y,n)=>{var $,f,_,Y;return s(),r("div",null,[be.value>0?(s(),r("div",Qv,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl",C.isNight?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",Zv,[e("div",Xv,[n[14]||(n[14]=e("div",{class:"w-3 h-3 rounded-full bg-red-500 animate-pulse"},null,-1)),e("h3",{class:u(["text-lg font-bold",C.isNight?"text-white":"text-slate-800"])},n[13]||(n[13]=[e("i",{class:"fa fa-user-minus mr-2 text-red-500"},null,-1),c(" Employee Resignation Approval ")]),2)]),e("div",e1,[fe.value?(s(),r("button",{key:1,onClick:n[1]||(n[1]=Q(k=>{fe.value=!1,b.value.clear()},["stop"])),class:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 transition"},n[16]||(n[16]=[e("i",{class:"fa fa-times mr-1"},null,-1),c("Cancel ")]))):(s(),r("button",{key:0,onClick:n[0]||(n[0]=Q(k=>fe.value=!0,["stop"])),class:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 transition"},n[15]||(n[15]=[e("i",{class:"fa fa-check-square mr-1"},null,-1),c("Multi Approve ")]))),e("div",t1,a(be.value),1)])]),fe.value&&b.value.size>0?(s(),r("div",a1,[e("span",s1,a(b.value.size)+" item dipilih ",1),e("div",{class:"flex gap-2"},[e("button",{onClick:Ce,class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition"},n[17]||(n[17]=[e("i",{class:"fa fa-check-double mr-1"},null,-1),c("Select All ")])),e("button",{onClick:De,class:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700 transition"},n[18]||(n[18]=[e("i",{class:"fa fa-check mr-1"},null,-1),c("Approve Selected ")]))])])):i("",!0),ue.value?(s(),r("div",r1,[n[19]||(n[19]=e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-red-500"},null,-1)),e("p",{class:u(["text-sm mt-2",C.isNight?"text-slate-300":"text-slate-600"])},"Memuat data...",2)])):(s(),r("div",l1,[(s(!0),r(I,null,K(z.value.slice(0,3),k=>{var m,d,ae;return s(),r("div",{key:"resignation-approval-"+k.id,onClick:ye=>fe.value?V(k.id):H(k.id),class:u(["p-3 rounded-lg transition-all duration-200",[fe.value?"cursor-default":"cursor-pointer hover:scale-105",C.isNight?"bg-slate-700/50 hover:bg-slate-600/50":"bg-red-50 hover:bg-red-100",b.value.has(k.id)?"ring-2 ring-red-500":""]])},[e("div",n1,[e("div",i1,[fe.value?(s(),r("input",{key:0,type:"checkbox",checked:b.value.has(k.id),onClick:Q(ye=>V(k.id),["stop"]),class:"w-4 h-4 text-red-600 rounded focus:ring-red-500"},null,8,d1)):i("",!0),e("div",u1,[e("div",{class:u(["font-semibold text-sm",C.isNight?"text-white":"text-slate-800"])},a(k.resignation_number),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-300":"text-slate-600"])},[n[20]||(n[20]=e("i",{class:"fa fa-user mr-1 text-red-500"},null,-1)),c(" "+a(((m=k.employee)==null?void 0:m.nama_lengkap)||"Unknown Employee"),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[n[21]||(n[21]=e("i",{class:"fa fa-store mr-1 text-red-600"},null,-1)),c(" "+a(((d=k.outlet)==null?void 0:d.nama_outlet)||"Unknown Outlet"),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[n[22]||(n[22]=e("i",{class:"fa fa-calendar mr-1 text-red-600"},null,-1)),c(" "+a(P(k.resignation_date)),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[n[23]||(n[23]=e("i",{class:"fa fa-tag mr-1 text-red-600"},null,-1)),c(" "+a(k.resignation_type==="prosedural"?"Prosedural":"Non Prosedural"),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[n[24]||(n[24]=e("i",{class:"fa fa-user mr-1 text-red-500"},null,-1)),c(a((ae=k.creator)==null?void 0:ae.nama_lengkap),1)],2)])]),e("div",c1,[n[25]||(n[25]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(k.approver_name||`Level ${k.approval_level||1}`),1)])])],10,o1)}),128)),z.value.length>3?(s(),r("div",g1,[e("button",{onClick:Z,class:"text-sm text-red-500 hover:text-red-700 font-medium"}," Lihat "+a(z.value.length-3)+" Employee Resignation lainnya... ",1)])):i("",!0)]))],2)])):i("",!0),(s(),He(Ze,{to:"body"},[j.value&&ee.value?(s(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]",onClick:xe},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",onClick:n[2]||(n[2]=Q(()=>{},["stop"]))},[e("div",{class:"flex items-center justify-between mb-4"},[n[27]||(n[27]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-user-minus mr-2 text-red-500"}),c(" Detail Employee Resignation Approval ")],-1)),e("button",{onClick:xe,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},n[26]||(n[26]=[e("i",{class:"fa fa-times text-xl"},null,-1)]))]),O.value?(s(),r("div",x1,n[28]||(n[28]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-400"},"Memuat detail...",-1)]))):(s(),r("div",p1,[e("div",m1,[n[38]||(n[38]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Informasi Dasar",-1)),e("div",v1,[e("div",null,[n[29]||(n[29]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Resignation Number",-1)),e("p",f1,a(ee.value.resignation_number),1)]),e("div",null,[n[30]||(n[30]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Resignation Date",-1)),e("p",y1,a(P(ee.value.resignation_date)),1)]),e("div",null,[n[31]||(n[31]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Employee",-1)),e("p",b1,a((($=ee.value.employee)==null?void 0:$.nama_lengkap)||"Unknown")+" ("+a(((f=ee.value.employee)==null?void 0:f.nik)||"-")+")",1)]),e("div",null,[n[32]||(n[32]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Outlet",-1)),e("p",h1,a(((_=ee.value.outlet)==null?void 0:_.nama_outlet)||"Unknown"),1)]),e("div",null,[n[33]||(n[33]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Resignation Type",-1)),e("p",k1,[e("span",{class:u([ee.value.resignation_type==="prosedural"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800","px-2 py-1 rounded text-xs font-medium"])},a(ee.value.resignation_type==="prosedural"?"Prosedural":"Non Prosedural"),3)])]),e("div",null,[n[34]||(n[34]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Status",-1)),e("p",_1,[e("span",w1,a(ee.value.status),1)])]),e("div",null,[n[35]||(n[35]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Created By",-1)),e("p",C1,a(((Y=ee.value.creator)==null?void 0:Y.nama_lengkap)||"Unknown"),1)]),e("div",null,[n[36]||(n[36]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Created At",-1)),e("p",B1,a(D(ee.value.created_at)),1)])]),ee.value.notes?(s(),r("div",$1,[n[37]||(n[37]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Notes",-1)),e("p",N1,a(ee.value.notes),1)])):i("",!0)]),ee.value.approval_flows&&ee.value.approval_flows.length>0?(s(),r("div",D1,[n[39]||(n[39]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},[e("i",{class:"fa fa-users mr-2 text-blue-500"}),c(" Approval Flow ")],-1)),e("div",A1,[(s(!0),r(I,null,K(ee.value.approval_flows,k=>{var m,d;return s(),r("div",{key:k.id,class:u(["flex items-center justify-between p-3 rounded-lg",k.status==="APPROVED"?"bg-green-100 dark:bg-green-900/30":k.status==="REJECTED"?"bg-red-100 dark:bg-red-900/30":"bg-gray-100 dark:bg-gray-700"])},[e("div",S1,[e("span",j1," Level "+a(k.approval_level),1),e("div",null,[e("div",T1,a(((m=k.approver)==null?void 0:m.nama_lengkap)||"Unknown"),1),e("div",P1,a(((d=k.approver)==null?void 0:d.email)||""),1)])]),e("div",V1,[e("span",{class:u(["px-2 py-1 rounded text-xs font-medium",k.status==="APPROVED"?"bg-green-500 text-white":k.status==="REJECTED"?"bg-red-500 text-white":"bg-yellow-500 text-white"])},a(k.status),3),k.approved_at?(s(),r("div",E1,a(D(k.approved_at)),1)):i("",!0),k.rejected_at?(s(),r("div",R1,a(D(k.rejected_at)),1)):i("",!0)])],2)}),128))])])):i("",!0),e("div",M1,[e("button",{onClick:ke,disabled:T.value,class:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[T.value?(s(),r("i",F1)):(s(),r("i",O1)),c(" "+a(T.value?"Memproses...":"Tolak"),1)],8,I1),e("button",{onClick:Se,disabled:J.value,class:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[J.value?(s(),r("i",U1)):(s(),r("i",q1)),c(" "+a(J.value?"Memproses...":"Setujui"),1)],8,L1)])]))])])):i("",!0)])),(s(),He(Ze,{to:"body"},[R.value?(s(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998]",onClick:F},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-5xl mx-4 max-h-[90vh] overflow-y-auto",onClick:n[12]||(n[12]=Q(()=>{},["stop"]))},[e("div",z1,[n[43]||(n[43]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-list mr-2 text-red-500"}),c(" Semua Employee Resignation Pending ")],-1)),e("div",G1,[we.value?(s(),r("button",{key:1,onClick:n[4]||(n[4]=Q(k=>{we.value=!1,ne.value.clear()},["stop"])),class:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 transition"},n[41]||(n[41]=[e("i",{class:"fa fa-times mr-1"},null,-1),c("Cancel ")]))):(s(),r("button",{key:0,onClick:n[3]||(n[3]=Q(k=>we.value=!0,["stop"])),class:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 transition"},n[40]||(n[40]=[e("i",{class:"fa fa-check-square mr-1"},null,-1),c("Multi Approve ")]))),e("button",{onClick:F,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},n[42]||(n[42]=[e("i",{class:"fa fa-times text-xl"},null,-1)]))])]),we.value&&ne.value.size>0?(s(),r("div",W1,[e("span",K1,a(ne.value.size)+" item dipilih ",1),e("div",{class:"flex gap-2"},[e("button",{onClick:Be,class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition"},n[44]||(n[44]=[e("i",{class:"fa fa-check-double mr-1"},null,-1),c("Select All ")])),e("button",{onClick:ie,class:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700 transition"},n[45]||(n[45]=[e("i",{class:"fa fa-check mr-1"},null,-1),c("Approve Selected ")]))])])):i("",!0),e("div",H1,[e("div",J1,[de(e("input",{"onUpdate:modelValue":n[5]||(n[5]=k=>se.value=k),type:"text",placeholder:"Cari nomor, employee, outlet...",class:"flex-1 min-w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[Ge,se.value]]),de(e("select",{"onUpdate:modelValue":n[6]||(n[6]=k=>W.value=k),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},n[46]||(n[46]=[e("option",{value:""},"Semua Tanggal",-1),e("option",{value:"today"},"Hari Ini",-1),e("option",{value:"week"},"Minggu Ini",-1),e("option",{value:"month"},"Bulan Ini",-1)]),512),[[Te,W.value]]),de(e("select",{"onUpdate:modelValue":n[7]||(n[7]=k=>re.value=k),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},n[47]||(n[47]=[e("option",{value:"newest"},"Terbaru",-1),e("option",{value:"oldest"},"Terlama",-1),e("option",{value:"number"},"Nomor",-1)]),512),[[Te,re.value]])]),e("div",Y1,[e("div",Q1," Menampilkan "+a(E.value.length)+" dari "+a(w.value.length)+" Employee Resignation ",1),de(e("select",{"onUpdate:modelValue":n[8]||(n[8]=k=>q.value=k),onChange:n[9]||(n[9]=k=>L.value=1),class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"},n[48]||(n[48]=[e("option",{value:10},"10 per halaman",-1),e("option",{value:25},"25 per halaman",-1),e("option",{value:50},"50 per halaman",-1),e("option",{value:100},"100 per halaman",-1)]),544),[[Te,q.value]])])]),he.value?(s(),r("div",Z1,n[49]||(n[49]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-400"},"Memuat data...",-1)]))):E.value.length===0?(s(),r("div",X1," Tidak ada Employee Resignation yang ditemukan ")):(s(),r("div",ef,[(s(!0),r(I,null,K(E.value,k=>{var m,d;return s(),r("div",{key:"all-resignation-"+k.id,onClick:ae=>we.value?Ne(k.id):H(k.id),class:u(["p-3 rounded-lg transition-all duration-200 border border-gray-200 dark:border-gray-700",[we.value?"cursor-default":"cursor-pointer hover:scale-[1.02] hover:border-red-500 dark:hover:border-red-500",C.isNight?"bg-slate-700/50 hover:bg-slate-600/50":"bg-gray-50 hover:bg-red-50",ne.value.has(k.id)?"ring-2 ring-red-500":""]])},[e("div",af,[e("div",sf,[we.value?(s(),r("input",{key:0,type:"checkbox",checked:ne.value.has(k.id),onClick:Q(ae=>Ne(k.id),["stop"]),class:"w-4 h-4 text-red-600 rounded focus:ring-red-500"},null,8,rf)):i("",!0),e("div",lf,[e("div",{class:u(["font-semibold text-sm",C.isNight?"text-white":"text-slate-800"])},a(k.resignation_number),3),e("div",{class:u(["text-xs",C.isNight?"text-slate-300":"text-slate-600"])},[n[50]||(n[50]=e("i",{class:"fa fa-user mr-1 text-red-500"},null,-1)),c(" "+a(((m=k.employee)==null?void 0:m.nama_lengkap)||"Unknown Employee"),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[n[51]||(n[51]=e("i",{class:"fa fa-store mr-1 text-red-600"},null,-1)),c(" "+a(((d=k.outlet)==null?void 0:d.nama_outlet)||"Unknown Outlet"),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[n[52]||(n[52]=e("i",{class:"fa fa-calendar mr-1 text-red-600"},null,-1)),c(" "+a(P(k.resignation_date)),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[n[53]||(n[53]=e("i",{class:"fa fa-tag mr-1 text-red-600"},null,-1)),c(" "+a(k.resignation_type==="prosedural"?"Prosedural":"Non Prosedural"),1)],2)])]),e("div",of,[n[54]||(n[54]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(k.approver_name||`Level ${k.approval_level||1}`),1)])])],10,tf)}),128))])),ce.value>1?(s(),r("div",nf,[e("div",df," Halaman "+a(L.value)+" dari "+a(ce.value),1),e("div",uf,[e("button",{onClick:n[10]||(n[10]=k=>h(L.value-1)),disabled:L.value===1,class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed"},n[55]||(n[55]=[e("i",{class:"fa fa-chevron-left"},null,-1)]),8,cf),(s(!0),r(I,null,K(g.value,k=>(s(),r(I,{key:"page-"+k},[k!=="..."?(s(),r("button",{key:0,onClick:m=>h(k),class:u(["px-3 py-1 border rounded-lg",L.value===k?"bg-red-500 text-white border-red-500":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"])},a(k),11,gf)):(s(),r("span",xf,"..."))],64))),128)),e("button",{onClick:n[11]||(n[11]=k=>h(L.value+1)),disabled:L.value===ce.value,class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed"},n[56]||(n[56]=[e("i",{class:"fa fa-chevron-right"},null,-1)]),8,pf)])])):i("",!0)])])):i("",!0)]))])}}},vf={key:0,class:"flex-shrink-0 mb-4"},ff={class:"flex items-center justify-between mb-3"},yf={class:"flex items-center gap-2"},bf={class:"bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded-full"},hf={key:0,class:"text-center py-4"},kf={key:1,class:"space-y-2"},_f=["onClick"],wf={class:"flex items-center justify-between"},Cf={class:"flex-1"},Bf={class:"flex-shrink-0 h-6 w-6 rounded-full overflow-hidden bg-blue-100 flex items-center justify-center border border-blue-200"},$f=["src","alt"],Nf={key:1,class:"fa-solid fa-user text-blue-500 text-xs"},Df={key:0,class:"text-center pt-2"},Af={key:0,class:"text-center py-8"},Sf={key:1,class:"space-y-6"},jf={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},Tf={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Pf={class:"text-gray-900 dark:text-white font-semibold"},Vf={class:"text-gray-900 dark:text-white"},Ef={class:"flex items-center gap-3"},Rf={class:"flex-shrink-0 h-10 w-10 rounded-full overflow-hidden bg-blue-100 flex items-center justify-center border-2 border-blue-200"},Mf=["src","alt"],If={key:1,class:"fa-solid fa-user text-blue-600"},Of={class:"text-gray-900 dark:text-white font-semibold"},Ff={class:"text-gray-900 dark:text-white"},Lf={key:0,class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},qf={class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},Uf={class:"flex flex-wrap gap-2"},zf={key:1,class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},Gf={class:"text-gray-900 dark:text-white"},Wf={key:2,class:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg"},Kf={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Hf={class:"text-gray-900 dark:text-white"},Jf={class:"md:col-span-2"},Yf={class:"grid grid-cols-2 gap-4"},Qf={class:"text-sm font-bold text-gray-900 dark:text-white"},Zf={class:"text-sm font-bold text-gray-900 dark:text-white"},Xf={class:"text-gray-900 dark:text-white"},ey={class:"text-gray-900 dark:text-white"},ty={class:"md:col-span-2"},ay={class:"text-gray-900 dark:text-white whitespace-pre-wrap"},sy={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},ry={class:"text-gray-900 dark:text-white whitespace-pre-wrap"},ly={__name:"CctvAccessRequestApprovalCard",props:{isNight:{type:Boolean,default:!1}},emits:["approved","rejected"],setup(C,{expose:Ve,emit:te}){const le=te,z=p([]),ue=p(!1),J=p(!1),T=p(null),b=p(!1),fe=ve(()=>z.value.length);function we(xe){return xe?new Date(xe).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function ne(xe){return xe?xe.substring(0,5):"-"}function be(xe){return xe?new Date(xe).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}function P(xe){var V,Ce;if((V=T.value)!=null&&V.outlet_names){const De=(Ce=T.value.outlet_ids)==null?void 0:Ce.indexOf(xe);if(De!==-1&&T.value.outlet_names[De])return T.value.outlet_names[De]}return xe}async function D(){var xe;ue.value=!0;try{const V=await M.get("/api/cctv-access-requests/pending-approvals");console.log("CCTV Access Request pending approvals response:",V.data),V.data&&V.data.success?Array.isArray(V.data.data)?z.value=V.data.data||[]:z.value=[]:z.value=[]}catch(V){console.error("Error loading pending CCTV Access Request approvals:",V),console.error("Error response:",V.response),((xe=V.response)==null?void 0:xe.status)===403?z.value=[]:z.value=[]}finally{ue.value=!1}}async function N(xe){var V,Ce,De;try{b.value=!0,J.value=!0;const Ne=await M.get(`/api/cctv-access-requests/${xe}`);Ne.data&&Ne.data.success&&Ne.data.data?T.value=Ne.data.data:(v.fire("Error",((V=Ne.data)==null?void 0:V.message)||"Gagal memuat detail Request","error"),j())}catch(Ne){console.error("Error loading CCTV Access Request details:",Ne);const Be=((De=(Ce=Ne.response)==null?void 0:Ce.data)==null?void 0:De.message)||Ne.message||"Gagal memuat detail Request";v.fire("Error",Be,"error"),j()}finally{b.value=!1}}function j(){J.value=!1,T.value=null}async function ee(){var Ce,De,Ne;if(!T.value)return;const xe=T.value.id,{value:V}=await v.fire({title:"Setujui Request",input:"textarea",inputLabel:"Catatan (Opsional)",inputPlaceholder:"Masukkan catatan approval...",inputAttributes:{"aria-label":"Masukkan catatan approval"},showCancelButton:!0,confirmButtonText:"Setujui",cancelButtonText:"Batal",confirmButtonColor:"#10b981"});if(V!==void 0)try{const Be=await M.post(`/api/cctv-access-requests/${xe}/approve`,{approval_notes:V||null});if(Be.data&&Be.data.success)v.fire("Success",Be.data.message||"Request berhasil disetujui","success"),j(),D(),le("approved",xe);else{const ie=((Ce=Be.data)==null?void 0:Ce.message)||"Gagal menyetujui Request";v.fire("Error",ie,"error")}}catch(Be){console.error("Error approving CCTV Access Request:",Be);const ie=((Ne=(De=Be.response)==null?void 0:De.data)==null?void 0:Ne.message)||Be.message||"Gagal menyetujui Request";v.fire("Error",ie,"error")}}function O(){if(!T.value)return;const xe=T.value.id;v.fire({title:"Tolak Request",input:"textarea",inputLabel:"Alasan Penolakan *",inputPlaceholder:"Masukkan alasan penolakan...",inputAttributes:{"aria-label":"Masukkan alasan penolakan"},showCancelButton:!0,confirmButtonText:"Tolak",cancelButtonText:"Batal",confirmButtonColor:"#ef4444",inputValidator:V=>{if(!V)return"Alasan penolakan harus diisi!"}}).then(async V=>{var Ce,De,Ne;if(V.isConfirmed&&xe)try{const Be=await M.post(`/api/cctv-access-requests/${xe}/reject`,{approval_notes:V.value});if(Be.data&&Be.data.success)v.fire("Success",Be.data.message||"Request berhasil ditolak","success"),j(),D(),le("rejected",xe);else{const ie=((Ce=Be.data)==null?void 0:Ce.message)||"Gagal menolak Request";v.fire("Error",ie,"error")}}catch(Be){console.error("Error rejecting CCTV Access Request:",Be);const ie=((Ne=(De=Be.response)==null?void 0:De.data)==null?void 0:Ne.message)||Be.message||"Gagal menolak Request";v.fire("Error",ie,"error")}})}function H(){z.value.length>0&&N(z.value[0].id)}return st(()=>{D()}),Ve({loadPendingApprovals:D,refresh:D}),(xe,V)=>{var Ce,De,Ne,Be;return s(),r("div",null,[fe.value>0?(s(),r("div",vf,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl",C.isNight?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",ff,[e("div",yf,[V[2]||(V[2]=e("div",{class:"w-3 h-3 rounded-full bg-blue-500 animate-pulse"},null,-1)),e("h3",{class:u(["text-lg font-bold",C.isNight?"text-white":"text-slate-800"])},V[1]||(V[1]=[e("i",{class:"fa-solid fa-video mr-2 text-blue-500"},null,-1),c(" CCTV Access Request Approval ")]),2)]),e("div",bf,a(fe.value),1)]),ue.value?(s(),r("div",hf,[V[3]||(V[3]=e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"},null,-1)),e("p",{class:u(["text-sm mt-2",C.isNight?"text-slate-300":"text-slate-600"])},"Memuat data...",2)])):(s(),r("div",kf,[(s(!0),r(I,null,K(z.value.slice(0,3),ie=>{var Se,ke,R,ge,he;return s(),r("div",{key:"cctv-approval-"+ie.id,onClick:se=>N(ie.id),class:u(["p-3 rounded-lg cursor-pointer transition-all duration-200 hover:scale-105",C.isNight?"bg-slate-700/50 hover:bg-slate-600/50":"bg-blue-50 hover:bg-blue-100"])},[e("div",wf,[e("div",Cf,[e("div",{class:u(["font-semibold text-sm",C.isNight?"text-white":"text-slate-800"])},[e("span",{class:u([ie.access_type==="live_view"?"bg-blue-100 text-blue-700 border border-blue-300":"bg-purple-100 text-purple-700 border border-purple-300","px-2 py-0.5 rounded-full text-xs font-bold mr-2"])},a(ie.access_type==="live_view"?"Live View":"Playback"),3),c(" Request #"+a(ie.id),1)],2),e("div",{class:u(["text-xs mt-1 flex items-center gap-2",C.isNight?"text-slate-300":"text-slate-600"])},[e("div",Bf,[(Se=ie.user)!=null&&Se.avatar||(ke=ie.user)!=null&&ke.avatar_path?(s(),r("img",{key:0,src:`/storage/${ie.user.avatar||ie.user.avatar_path}`,alt:((R=ie.user)==null?void 0:R.nama_lengkap)||"User",class:"w-full h-full object-cover"},null,8,$f)):(s(),r("i",Nf))]),e("span",null,a(((ge=ie.user)==null?void 0:ge.nama_lengkap)||"Unknown User"),1)],2),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[V[4]||(V[4]=e("i",{class:"fa-solid fa-store mr-1 text-blue-600"},null,-1)),c(" "+a(((he=ie.outlet_ids)==null?void 0:he.length)||0)+" Outlet ",1)],2),ie.access_type==="live_view"&&ie.email?(s(),r("div",{key:0,class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[V[5]||(V[5]=e("i",{class:"fa-solid fa-envelope mr-1 text-blue-500"},null,-1)),c(a(ie.email),1)],2)):i("",!0),ie.access_type==="playback"&&ie.area?(s(),r("div",{key:1,class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},[V[6]||(V[6]=e("i",{class:"fa-solid fa-map-marker-alt mr-1 text-purple-500"},null,-1)),c(a(ie.area),1)],2)):i("",!0),e("div",{class:u(["text-xs",C.isNight?"text-slate-400":"text-slate-500"])},a(we(ie.created_at)),3)])])],10,_f)}),128)),z.value.length>3?(s(),r("div",Df,[e("button",{onClick:H,class:"text-sm text-blue-500 hover:text-blue-700 font-medium"}," Lihat "+a(z.value.length-3)+" Request lainnya... ",1)])):i("",!0)]))],2)])):i("",!0),(s(),He(Ze,{to:"body"},[J.value&&T.value?(s(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]",onClick:j},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",onClick:V[0]||(V[0]=Q(()=>{},["stop"]))},[e("div",{class:"flex items-center justify-between mb-4"},[V[8]||(V[8]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa-solid fa-video mr-2 text-blue-500"}),c(" Detail CCTV Access Request Approval ")],-1)),e("button",{onClick:j,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},V[7]||(V[7]=[e("i",{class:"fa fa-times text-xl"},null,-1)]))]),b.value?(s(),r("div",Af,V[9]||(V[9]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-400"},"Memuat detail...",-1)]))):(s(),r("div",Sf,[e("div",jf,[V[15]||(V[15]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Informasi Dasar",-1)),e("div",Tf,[e("div",null,[V[10]||(V[10]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Request ID",-1)),e("p",Pf,"#"+a(T.value.id),1)]),e("div",null,[V[11]||(V[11]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Jenis Akses",-1)),e("p",Vf,[e("span",{class:u([T.value.access_type==="live_view"?"bg-blue-100 text-blue-700 border border-blue-300":"bg-purple-100 text-purple-700 border border-purple-300","px-2 py-1 rounded-full text-xs font-bold"])},a(T.value.access_type==="live_view"?"Live View":"Playback"),3)])]),e("div",null,[V[12]||(V[12]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2"},"User",-1)),e("div",Ef,[e("div",Rf,[(Ce=T.value.user)!=null&&Ce.avatar||(De=T.value.user)!=null&&De.avatar_path?(s(),r("img",{key:0,src:`/storage/${T.value.user.avatar||T.value.user.avatar_path}`,alt:((Ne=T.value.user)==null?void 0:Ne.nama_lengkap)||"User",class:"w-full h-full object-cover"},null,8,Mf)):(s(),r("i",If))]),e("p",Of,a(((Be=T.value.user)==null?void 0:Be.nama_lengkap)||"Unknown"),1)])]),e("div",null,[V[13]||(V[13]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Tanggal Request",-1)),e("p",Ff,a(we(T.value.created_at)),1)]),V[14]||(V[14]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Status"),e("p",{class:"text-gray-900 dark:text-white"},[e("span",{class:"px-2 py-1 rounded-full text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300"}," Menunggu Approval ")])],-1))])]),T.value.outlet_ids&&T.value.outlet_ids.length>0?(s(),r("div",Lf,[e("h4",qf,[V[16]||(V[16]=e("i",{class:"fa-solid fa-store mr-2 text-blue-500"},null,-1)),c(" Outlet yang Diminta ("+a(T.value.outlet_ids.length)+") ",1)]),e("div",Uf,[(s(!0),r(I,null,K(T.value.outlet_ids,ie=>(s(),r("span",{key:ie,class:"px-3 py-1.5 bg-white dark:bg-gray-800 text-blue-800 dark:text-blue-200 rounded-lg text-sm font-semibold border border-blue-200 dark:border-blue-700"},a(P(ie)),1))),128))])])):i("",!0),T.value.access_type==="live_view"?(s(),r("div",zf,[V[19]||(V[19]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},[e("i",{class:"fa-solid fa-eye mr-2 text-blue-500"}),c(" Informasi Live View ")],-1)),e("div",null,[V[18]||(V[18]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Email",-1)),e("p",Gf,[V[17]||(V[17]=e("i",{class:"fa-solid fa-envelope mr-2 text-blue-500"},null,-1)),c(" "+a(T.value.email||"-"),1)])])])):i("",!0),T.value.access_type==="playback"?(s(),r("div",Wf,[V[28]||(V[28]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},[e("i",{class:"fa-solid fa-play mr-2 text-purple-500"}),c(" Informasi Playback ")],-1)),e("div",Kf,[e("div",null,[V[21]||(V[21]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Area",-1)),e("p",Hf,[V[20]||(V[20]=e("i",{class:"fa-solid fa-map-marker-alt mr-2 text-purple-500"},null,-1)),c(" "+a(T.value.area||"-"),1)])]),e("div",Jf,[V[24]||(V[24]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2"},"Tanggal",-1)),e("div",Yf,[e("div",null,[V[22]||(V[22]=e("label",{class:"text-xs text-gray-500"},"Tanggal Mulai",-1)),e("p",Qf,a(be(T.value.date_from)||"-"),1)]),e("div",null,[V[23]||(V[23]=e("label",{class:"text-xs text-gray-500"},"Tanggal Selesai",-1)),e("p",Zf,a(be(T.value.date_to)||"-"),1)])])]),e("div",null,[V[25]||(V[25]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Waktu Mulai",-1)),e("p",Xf,a(ne(T.value.time_from)||"-"),1)]),e("div",null,[V[26]||(V[26]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Waktu Selesai",-1)),e("p",ey,a(ne(T.value.time_to)||"-"),1)]),e("div",ty,[V[27]||(V[27]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Deskripsi Kejadian",-1)),e("p",ay,a(T.value.incident_description||"-"),1)])])])):i("",!0),e("div",sy,[V[29]||(V[29]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Alasan Permintaan",-1)),e("p",ry,a(T.value.reason||"-"),1)]),e("div",{class:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"},[e("button",{onClick:O,class:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors"},V[30]||(V[30]=[e("i",{class:"fa fa-times mr-2"},null,-1),c("Tolak ")])),e("button",{onClick:ee,class:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"},V[31]||(V[31]=[e("i",{class:"fa fa-check mr-2"},null,-1),c("Setujui ")]))])]))])])):i("",!0)]))])}}},oy={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},ny={class:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center"},iy={key:0,class:"ml-2 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center"},dy={class:"mb-6 p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500"},uy={class:"mt-3"},cy={class:"flex items-center gap-2"},gy={key:0,class:"text-sm text-gray-600 dark:text-gray-300 flex items-center gap-2"},xy={key:1,class:"text-sm text-gray-400 dark:text-gray-500"},py={class:"mt-3 flex items-center justify-between"},my={class:"flex items-center"},vy=["disabled"],fy={key:0,class:"fas fa-spinner fa-spin mr-2"},yy={key:1,class:"fas fa-paper-plane mr-2"},by={key:0,class:"text-center py-8"},hy={key:1,class:"space-y-4"},ky={class:"flex items-center justify-between mb-2"},_y={class:"flex items-center space-x-2"},wy={class:"font-medium text-gray-900 dark:text-white"},Cy={key:0,class:"px-2 py-1 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 text-xs rounded-full"},By={class:"flex items-center gap-2"},$y={class:"text-sm text-gray-500 dark:text-gray-400"},Ny={key:0,class:"flex items-center gap-1"},Dy=["onClick"],Ay=["onClick"],Sy={class:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},jy={key:0,class:"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-500"},Ty={class:"flex items-center gap-3"},Py={key:0,class:"flex-shrink-0"},Vy=["src","alt","onClick"],Ey={key:1,class:"flex-shrink-0"},Ry={class:"flex-1 min-w-0"},My={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},Iy={class:"text-xs text-gray-500 dark:text-gray-400"},Oy={class:"flex items-center gap-2"},Fy=["href","download"],Ly=["onClick"],qy={key:2,class:"text-center py-8 text-gray-500 dark:text-gray-400"},Uy={class:"space-y-4"},zy={class:"flex items-center"},Gy={class:"flex justify-end gap-2"},Wy=["disabled"],Ky={key:0,class:"fas fa-spinner fa-spin mr-2"},Hy=["src","alt"],Jy={class:"absolute bottom-4 left-4 right-4 text-center"},Yy={class:"text-white bg-black/50 px-3 py-1 rounded-lg text-sm"},ll={__name:"PurchaseRequisitionCommentSection",props:{purchaseRequisitionId:{type:[Number,String],required:!0},currentUserId:{type:[Number,String],required:!0},unreadCount:{type:Number,default:0}},emits:["comment-added","comment-updated","comment-deleted"],setup(C,{expose:Ve,emit:te}){const le=C,z=te,ue=p([]),J=p(!1),T=p(!1),b=p(""),fe=p(!1),we=p(null),ne=p(null),be=p(!1),P=p({}),D=p(!1),N=p(!1),j=p(null);st(()=>{ee()}),it(()=>le.purchaseRequisitionId,()=>{le.purchaseRequisitionId&&ee()});async function ee(){if(le.purchaseRequisitionId){J.value=!0;try{const L=await M.get(`/purchase-requisitions/${le.purchaseRequisitionId}/comments`);L.data.success&&(ue.value=L.data.data)}catch(L){console.error("Error loading comments:",L),v.fire({title:"Error",text:"Failed to load comments",icon:"error",didOpen:()=>{const q=document.querySelector(".swal2-container");q&&q.style.setProperty("z-index","999999","important")}})}finally{J.value=!1}}}function O(L){const q=L.target.files[0];if(q){if(q.size>10*1024*1024){v.fire({title:"Error",text:"File size must be less than 10MB",icon:"error",didOpen:()=>{const _e=document.querySelector(".swal2-container");_e&&_e.style.setProperty("z-index","999999","important")}}),L.target.value="";return}we.value=q}}function H(){we.value=null,ne.value&&(ne.value.value="")}async function xe(){var L,q;if(!(!b.value.trim()||!le.purchaseRequisitionId)){T.value=!0;try{const _e=new FormData;_e.append("comment",b.value),_e.append("is_internal",fe.value?"1":"0"),we.value&&_e.append("attachment",we.value);const Z=await M.post(`/purchase-requisitions/${le.purchaseRequisitionId}/comments`,_e,{headers:{"Content-Type":"multipart/form-data"}});(Z.status===200||Z.status===201)&&(await ee(),b.value="",fe.value=!1,H(),z("comment-added"),v.fire({title:"Success!",text:"Comment added successfully",icon:"success",timer:1500,showConfirmButton:!1,didOpen:()=>{const F=document.querySelector(".swal2-container");F&&F.style.setProperty("z-index","999999","important")}}))}catch(_e){console.error("Error adding comment:",_e),v.fire({title:"Error",text:((q=(L=_e.response)==null?void 0:L.data)==null?void 0:q.message)||"Failed to add comment",icon:"error",didOpen:()=>{const Z=document.querySelector(".swal2-container");Z&&Z.style.setProperty("z-index","999999","important")}})}finally{T.value=!1}}}function V(L){P.value={id:L.id,comment:L.comment,is_internal:L.is_internal||!1},be.value=!0}function Ce(){be.value=!1,P.value={}}async function De(){var L,q,_e;if(!(!((L=P.value.comment)!=null&&L.trim())||!le.purchaseRequisitionId)){D.value=!0;try{(await M.put(`/purchase-requisitions/${le.purchaseRequisitionId}/comments/${P.value.id}`,{comment:P.value.comment,is_internal:P.value.is_internal})).data.success&&(await ee(),Ce(),z("comment-updated"),v.fire({title:"Success!",text:"Comment updated successfully",icon:"success",timer:1500,showConfirmButton:!1,didOpen:()=>{const F=document.querySelector(".swal2-container");F&&F.style.setProperty("z-index","999999","important")}}))}catch(Z){console.error("Error updating comment:",Z),v.fire({title:"Error",text:((_e=(q=Z.response)==null?void 0:q.data)==null?void 0:_e.message)||"Failed to update comment",icon:"error",didOpen:()=>{const F=document.querySelector(".swal2-container");F&&F.style.setProperty("z-index","999999","important")}})}finally{D.value=!1}}}function Ne(L){v.fire({title:"Delete Comment?",text:"Are you sure you want to delete this comment? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280",confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",reverseButtons:!0,allowOutsideClick:!1,didOpen:()=>{const q=()=>{const _e=document.querySelector(".swal2-container");_e&&(_e.style.setProperty("z-index","999999","important"),_e.style.setProperty("position","fixed","important"));const Z=document.querySelector(".swal2-popup");Z&&Z.style.setProperty("z-index","999999","important");const F=document.querySelector(".swal2-backdrop-show");F&&F.style.setProperty("z-index","999998","important")};q(),setTimeout(q,10),setTimeout(q,50),setTimeout(q,100)}}).then(q=>{q.isConfirmed&&Be(L)})}async function Be(L){var q,_e;try{(await M.delete(`/purchase-requisitions/${le.purchaseRequisitionId}/comments/${L.id}`)).data.success&&(await ee(),z("comment-deleted"),v.fire({title:"Deleted!",text:"Comment has been deleted",icon:"success",timer:1500,showConfirmButton:!1,didOpen:()=>{const F=()=>{const w=document.querySelector(".swal2-container");w&&w.style.setProperty("z-index","999999","important")};F(),setTimeout(F,10)}}))}catch(Z){console.error("Error deleting comment:",Z),v.fire({title:"Error",text:((_e=(q=Z.response)==null?void 0:q.data)==null?void 0:_e.message)||"Failed to delete comment",icon:"error",didOpen:()=>{const F=()=>{const w=document.querySelector(".swal2-container");w&&w.style.setProperty("z-index","999999","important")};F(),setTimeout(F,10)}})}}function ie(L){return L.attachment_path?`/storage/${L.attachment_path}`:""}function Se(L){return L?L.startsWith("image/"):!1}function ke(L){if(!L)return"fa-file text-gray-500";const q=L.split(".").pop().toLowerCase();return{pdf:"fa-file-pdf text-red-500",doc:"fa-file-word text-blue-500",docx:"fa-file-word text-blue-500",xls:"fa-file-excel text-green-500",xlsx:"fa-file-excel text-green-500",ppt:"fa-file-powerpoint text-orange-500",pptx:"fa-file-powerpoint text-orange-500",jpg:"fa-file-image text-purple-500",jpeg:"fa-file-image text-purple-500",png:"fa-file-image text-purple-500",gif:"fa-file-image text-purple-500",txt:"fa-file-alt text-gray-500",zip:"fa-file-archive text-yellow-500",rar:"fa-file-archive text-yellow-500"}[q]||"fa-file text-gray-500"}function R(L){if(!L)return"0 Bytes";const q=1024,_e=["Bytes","KB","MB","GB"],Z=Math.floor(Math.log(L)/Math.log(q));return parseFloat((L/Math.pow(q,Z)).toFixed(2))+" "+_e[Z]}function ge(L){return L?new Date(L).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}function he(L){return L?new Date(L).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):"-"}function se(L){j.value=L,N.value=!0}function W(){N.value=!1,j.value=null}const re=ve(()=>j.value?ie(j.value):"");return Ve({loadComments:ee}),(L,q)=>{var _e;return s(),r("div",oy,[e("h4",ny,[q[7]||(q[7]=e("i",{class:"fas fa-comment mr-2 text-indigo-500"},null,-1)),q[8]||(q[8]=c(" Comments ")),C.unreadCount>0?(s(),r("span",iy,a(C.unreadCount>99?"99+":C.unreadCount),1)):i("",!0)]),e("div",dy,[de(e("textarea",{"onUpdate:modelValue":q[0]||(q[0]=Z=>b.value=Z),rows:"3",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-500 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white",placeholder:"Add a comment..."},null,512),[[Ge,b.value]]),e("div",uy,[q[12]||(q[12]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Attachment (Optional) ",-1)),e("div",cy,[e("input",{type:"file",ref_key:"attachmentInput",ref:ne,onChange:O,accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx",class:"hidden"},null,544),e("button",{onClick:q[1]||(q[1]=Z=>L.$refs.attachmentInput.click()),type:"button",class:"px-3 py-2 bg-gray-200 dark:bg-gray-500 text-gray-700 dark:text-white rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 text-sm"},q[9]||(q[9]=[e("i",{class:"fas fa-paperclip mr-2"},null,-1),c(" Choose File ")])),we.value?(s(),r("span",gy,[q[11]||(q[11]=e("i",{class:"fas fa-file"},null,-1)),c(" "+a(we.value.name)+" ",1),e("button",{onClick:H,class:"text-red-500 hover:text-red-700"},q[10]||(q[10]=[e("i",{class:"fas fa-times"},null,-1)]))])):(s(),r("span",xy,"No file selected"))]),q[13]||(q[13]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Max size: 10MB (Images, PDF, Word, Excel)",-1))]),e("div",py,[e("label",my,[de(e("input",{"onUpdate:modelValue":q[2]||(q[2]=Z=>fe.value=Z),type:"checkbox",class:"mr-2"},null,512),[[rl,fe.value]]),q[14]||(q[14]=e("span",{class:"text-sm text-gray-600 dark:text-gray-300"},"Internal comment",-1))]),e("button",{onClick:xe,disabled:!b.value.trim()||T.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed"},[T.value?(s(),r("i",fy)):(s(),r("i",yy)),c(" "+a(T.value?"Uploading...":"Add Comment"),1)],8,vy)])]),J.value?(s(),r("div",by,q[15]||(q[15]=[e("i",{class:"fas fa-spinner fa-spin text-4xl text-indigo-500 mb-4"},null,-1),e("p",{class:"text-gray-500 dark:text-gray-400"},"Loading comments...",-1)]))):ue.value.length>0?(s(),r("div",hy,[(s(!0),r(I,null,K(ue.value,Z=>{var F;return s(),r("div",{key:Z.id,class:"p-4 border border-gray-200 dark:border-gray-500 rounded-lg bg-white dark:bg-gray-600 hover:bg-gray-50 dark:hover:bg-gray-500 transition-colors"},[e("div",ky,[e("div",_y,[e("span",wy,a(((F=Z.user)==null?void 0:F.nama_lengkap)||"Unknown User"),1),Z.is_internal?(s(),r("span",Cy," Internal ")):i("",!0)]),e("div",By,[e("span",$y,a(ge(Z.created_at))+" "+a(he(Z.created_at)),1),Z.user_id===C.currentUserId?(s(),r("div",Ny,[e("button",{onClick:w=>V(Z),class:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm",title:"Edit comment"},q[16]||(q[16]=[e("i",{class:"fas fa-edit"},null,-1)]),8,Dy),e("button",{onClick:w=>Ne(Z),class:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 text-sm",title:"Delete comment"},q[17]||(q[17]=[e("i",{class:"fas fa-trash"},null,-1)]),8,Ay)])):i("",!0)])]),e("p",Sy,a(Z.comment),1),Z.attachment_path?(s(),r("div",jy,[e("div",Ty,[Se(Z.attachment_mime_type)?(s(),r("div",Py,[e("img",{src:ie(Z),alt:Z.attachment_name,class:"w-24 h-24 object-cover rounded-lg border border-gray-300 dark:border-gray-500 cursor-pointer hover:opacity-80 transition-opacity",onClick:w=>se(Z)},null,8,Vy)])):(s(),r("div",Ey,[e("i",{class:u([ke(Z.attachment_name),"text-3xl"])},null,2)])),e("div",Ry,[e("p",My,a(Z.attachment_name),1),e("p",Iy,a(R(Z.attachment_size)),1)]),e("div",Oy,[e("a",{href:ie(Z),download:Z.attachment_name,class:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm"},q[18]||(q[18]=[e("i",{class:"fas fa-download mr-1"},null,-1),c(" Download ")]),8,Fy),Se(Z.attachment_mime_type)?(s(),r("button",{key:0,onClick:w=>se(Z),class:"px-3 py-1.5 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm"},q[19]||(q[19]=[e("i",{class:"fas fa-eye mr-1"},null,-1),c(" View ")]),8,Ly)):i("",!0)])])])):i("",!0)])}),128))])):(s(),r("div",qy,q[20]||(q[20]=[e("i",{class:"fas fa-comment text-4xl mb-4 text-gray-300 dark:text-gray-600"},null,-1),e("p",null,"No comments yet",-1)]))),be.value?(s(),r("div",{key:3,class:"fixed inset-0 z-[100004] flex items-center justify-center bg-black/40",onClick:Ce},[e("div",{class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg w-full max-w-2xl p-6 relative",onClick:q[5]||(q[5]=Q(()=>{},["stop"]))},[e("button",{onClick:Ce,class:"absolute top-3 right-3 text-gray-400 hover:text-gray-600"},q[21]||(q[21]=[e("i",{class:"fas fa-times text-lg"},null,-1)])),q[24]||(q[24]=e("div",{class:"mb-4"},[e("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white flex items-center gap-2"},[e("i",{class:"fas fa-edit text-blue-500"}),c(" Edit Comment ")])],-1)),e("div",Uy,[e("div",null,[q[22]||(q[22]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Comment",-1)),de(e("textarea",{"onUpdate:modelValue":q[3]||(q[3]=Z=>P.value.comment=Z),rows:"4",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-500 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your comment..."},null,512),[[Ge,P.value.comment]])]),e("div",null,[e("label",zy,[de(e("input",{"onUpdate:modelValue":q[4]||(q[4]=Z=>P.value.is_internal=Z),type:"checkbox",class:"mr-2"},null,512),[[rl,P.value.is_internal]]),q[23]||(q[23]=e("span",{class:"text-sm text-gray-600 dark:text-gray-300"},"Internal comment",-1))])]),e("div",Gy,[e("button",{onClick:Ce,class:"px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-white rounded-md hover:bg-gray-300 dark:hover:bg-gray-500"}," Cancel "),e("button",{onClick:De,disabled:!P.value.comment.trim()||D.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"},[D.value?(s(),r("i",Ky)):i("",!0),c(" "+a(D.value?"Updating...":"Update Comment"),1)],8,Wy)])])])])):i("",!0),N.value?(s(),r("div",{key:4,class:"fixed inset-0 z-[100005] flex items-center justify-center bg-black/80",onClick:W},[e("div",{class:"relative max-w-4xl max-h-[90vh] p-4",onClick:q[6]||(q[6]=Q(()=>{},["stop"]))},[e("button",{onClick:W,class:"absolute top-2 right-2 text-white hover:text-gray-300 z-10 bg-black/50 rounded-full p-2"},q[25]||(q[25]=[e("i",{class:"fas fa-times text-xl"},null,-1)])),j.value?(s(),r("img",{key:0,src:re.value,alt:j.value.attachment_name,class:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl"},null,8,Hy)):i("",!0),e("div",Jy,[e("p",Yy,a((_e=j.value)==null?void 0:_e.attachment_name),1)])])])):i("",!0)])}}},Qy={key:0,class:"absolute inset-0 z-0 overflow-hidden pointer-events-none"},Zy={class:"relative z-10 w-full min-h-screen flex flex-col overflow-x-hidden"},Xy={class:"flex-shrink-0 mb-4 px-4 md:px-6 max-w-full"},eb={class:"relative h-56 sm:h-64 md:h-72 lg:h-80 overflow-hidden"},tb={key:0,class:"w-full h-full"},ab=["src"],sb={key:1,class:"w-full h-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"},rb={class:"px-6 pb-6 w-full"},lb={class:"flex flex-col md:flex-row md:items-start md:gap-6"},ob={class:"flex flex-col items-center text-center md:items-start md:text-left md:w-80 lg:w-96 flex-shrink-0"},nb={class:"relative -mt-16 sm:-mt-20 md:-mt-24 mb-4"},ib=["src"],db={key:1,class:"w-32 h-32 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-4xl font-bold border-4 border-white shadow-2xl"},ub={class:"w-full"},cb={class:"mt-3 flex flex-wrap gap-2 justify-center md:justify-start"},gb={class:"w-full"},xb={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 w-full"},pb={class:"min-w-0 flex-1"},mb={class:"min-w-0 flex-1"},vb={class:"flex items-center gap-2 mb-2"},fb={class:"flex items-center gap-2 mb-3"},yb={class:"space-y-2"},bb={class:"flex items-center justify-between mb-2"},hb={key:0,class:"flex-shrink-0 mb-4 px-4 md:px-6 max-w-full"},kb={class:"flex items-center justify-between mb-3"},_b={class:"flex items-center gap-2"},wb={class:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full"},Cb={key:0,class:"text-center py-4"},Bb={key:1,class:"space-y-2"},$b=["onClick"],Nb={class:"flex items-center justify-between"},Db={class:"flex-1"},Ab={class:"text-xs text-blue-500 font-medium"},Sb=["onClick"],jb={class:"flex items-center justify-between"},Tb={class:"flex-1"},Pb={class:"text-xs text-purple-500 font-medium"},Vb={class:"flex items-center justify-between mb-2"},Eb={class:"flex-1"},Rb={key:0,class:"mt-2 p-2 bg-blue-50 rounded text-xs border-l-4 border-blue-400"},Mb={class:"text-xs text-blue-600"},Ib={class:"text-xs text-orange-500 font-medium"},Ob={class:"flex gap-2"},Fb=["onClick"],Lb=["onClick"],qb=["onClick"],Ub={class:"flex items-start gap-2"},zb={class:"flex-shrink-0 mt-1"},Gb={key:0,class:"w-2 h-2 rounded-full bg-green-500"},Wb={key:1,class:"w-2 h-2 rounded-full bg-red-500"},Kb={key:2,class:"w-2 h-2 rounded-full bg-purple-500"},Hb={key:3,class:"w-2 h-2 rounded-full bg-yellow-500"},Jb={class:"flex-1"},Yb={key:0,class:"text-center pt-2"},Qb={class:"text-sm text-blue-500 hover:text-blue-700 font-medium"},Zb={key:1,class:"text-center pt-2"},Xb={key:1,class:"flex-shrink-0 mb-4"},eh={class:"flex items-center justify-between mb-3"},th={class:"flex items-center gap-2"},ah={class:"bg-emerald-500 text-white text-xs font-bold px-2 py-1 rounded-full"},sh={key:0,class:"text-center py-4"},rh={key:1,class:"space-y-2"},lh=["onClick"],oh={class:"flex items-center justify-between"},nh={class:"flex-1 min-w-0"},ih={class:"text-xs text-emerald-600 font-medium whitespace-nowrap ml-2"},dh={key:0,class:"text-center pt-2"},uh={key:2,class:"flex-shrink-0 mb-4"},ch={class:"flex items-center justify-between mb-3"},gh={class:"flex items-center gap-2"},xh={class:"space-y-3"},ph={class:"flex items-start gap-3"},mh={class:"flex-1"},vh={class:"flex items-center justify-between mb-2"},fh={class:"flex items-center gap-2"},yh={class:"text-xs text-blue-500 font-medium"},bh={class:"flex justify-between"},hh={class:"flex justify-between"},kh={class:"mt-1"},_h={class:"flex gap-2"},wh=["onClick"],Ch=["onClick"],Bh={key:0,class:"text-center pt-2"},$h={class:"text-sm text-blue-500 hover:text-blue-700 font-medium"},Nh={key:3,class:"flex-shrink-0 mb-4"},Dh={class:"flex items-center justify-between mb-3"},Ah={class:"flex items-center gap-2"},Sh={class:"flex items-center gap-2"},jh={class:"bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full"},Th={key:0,class:"mb-3 p-2 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-between"},Ph={class:"text-sm font-medium text-green-800 dark:text-green-200"},Vh={key:1,class:"text-center py-4"},Eh={key:2,class:"space-y-2"},Rh=["onClick"],Mh={class:"flex items-center justify-between"},Ih={class:"flex items-center gap-2 flex-1"},Oh=["checked","onClick"],Fh={class:"flex-1"},Lh={class:"flex items-center gap-2"},qh=["onClick"],Uh={key:0,class:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-4 w-4 flex items-center justify-center min-w-[1rem]"},zh={class:"text-xs text-green-500 font-medium"},Gh={key:0,class:"text-center pt-2"},Wh={key:4,class:"flex-shrink-0 mb-4"},Kh={class:"flex items-center justify-between mb-3"},Hh={class:"flex items-center gap-2"},Jh={class:"flex items-center gap-2"},Yh={class:"bg-orange-500 text-white text-xs font-bold px-2 py-1 rounded-full"},Qh={key:0,class:"mb-3 p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg flex items-center justify-between"},Zh={class:"text-sm font-medium text-orange-800 dark:text-orange-200"},Xh={key:1,class:"text-center py-4"},ek={key:2,class:"space-y-2"},tk=["onClick"],ak={class:"flex items-center justify-between"},sk={class:"flex items-center gap-2 flex-1"},rk=["checked","onClick"],lk={class:"flex-1"},ok={class:"text-xs text-orange-500 font-medium"},nk={key:0,class:"text-center pt-2"},ik={key:5,class:"flex-shrink-0 mb-4"},dk={class:"flex items-center justify-between mb-3"},uk={class:"flex items-center gap-2"},ck={class:"bg-emerald-500 text-white text-xs font-bold px-2 py-1 rounded-full"},gk={key:0,class:"text-center py-4"},xk={key:1,class:"space-y-2"},pk=["onClick"],mk={class:"flex items-center justify-between"},vk={class:"flex-1"},fk={class:"text-xs text-emerald-500 font-medium"},yk={key:0},bk={key:0,class:"text-center pt-2"},hk={key:6,class:"flex-shrink-0 mb-4"},kk={class:"flex items-center justify-between mb-3"},_k={class:"flex items-center gap-2"},wk={class:"bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded-full"},Ck={key:0,class:"text-center py-4"},Bk={key:1,class:"space-y-2"},$k=["onClick"],Nk={class:"flex items-center justify-between"},Dk={class:"flex-1"},Ak={class:"text-xs text-blue-500 font-medium"},Sk={key:0},jk={key:0,class:"text-center pt-2"},Tk={key:7,class:"flex-shrink-0 mb-4"},Pk={class:"flex items-center justify-between mb-3"},Vk={class:"flex items-center gap-2"},Ek={class:"bg-purple-500 text-white text-xs font-bold px-2 py-1 rounded-full"},Rk={key:0,class:"text-center py-4"},Mk={key:1,class:"space-y-2"},Ik=["onClick"],Ok={class:"flex items-center justify-between"},Fk={class:"flex-1"},Lk={class:"text-xs text-purple-500 font-medium"},qk={key:0},Uk={key:0,class:"text-center pt-2"},zk={key:8,class:"flex-shrink-0 mb-4"},Gk={class:"flex items-center justify-between mb-3"},Wk={class:"flex items-center gap-2"},Kk={class:"flex items-center gap-2"},Hk={class:"bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded-full"},Jk={key:0,class:"mb-3 p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-between"},Yk={class:"text-sm font-medium text-blue-800 dark:text-blue-200"},Qk={key:1,class:"text-center py-4"},Zk={key:2,class:"space-y-2"},Xk=["onClick"],e_={class:"flex items-center justify-between"},t_={class:"flex items-center gap-2 flex-1"},a_=["checked","onClick"],s_={class:"flex-1"},r_={key:1,class:"px-1.5 py-0.5 rounded-full text-xs font-semibold bg-gray-100 text-gray-700"},l_={class:"text-xs text-blue-500 font-medium"},o_={key:0,class:"text-center pt-2"},n_={key:9,class:"flex-shrink-0 mb-4"},i_={class:"flex items-center justify-between mb-3"},d_={class:"flex items-center gap-2"},u_={class:"bg-purple-500 text-white text-xs font-bold px-2 py-1 rounded-full"},c_={key:0,class:"text-center py-4"},g_={key:1,class:"space-y-2"},x_=["onClick"],p_={class:"flex items-center justify-between"},m_={class:"flex-1"},v_={class:"text-xs text-purple-500 font-medium"},f_={key:0,class:"text-center pt-2"},y_={key:10,class:"flex-shrink-0 mb-4"},b_={class:"flex items-center justify-between mb-3"},h_={class:"flex items-center gap-2"},k_={class:"bg-teal-500 text-white text-xs font-bold px-2 py-1 rounded-full"},__={key:0,class:"text-center py-4"},w_={key:1,class:"space-y-2"},C_=["onClick"],B_={class:"flex items-center justify-between"},$_={class:"flex-1"},N_={class:"text-xs text-teal-500 font-medium"},D_={key:0,class:"text-center pt-2"},A_={class:"text-sm text-teal-500 hover:text-teal-700 font-medium"},S_={key:11,class:"flex-shrink-0 mb-4"},j_={class:"flex items-center justify-between mb-3"},T_={class:"flex items-center gap-2"},P_={class:"bg-indigo-500 text-white text-xs font-bold px-2 py-1 rounded-full"},V_={key:0,class:"text-center py-4"},E_={key:1,class:"space-y-2"},R_=["onClick"],M_={class:"flex items-center justify-between"},I_={class:"flex-1"},O_={class:"text-xs text-indigo-500 font-medium"},F_={key:0,class:"text-center pt-2"},L_={class:"flex-1 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-4 mb-6 items-start px-4 md:px-6"},q_={class:"sm:col-span-2 lg:col-span-1 xl:col-span-1 flex flex-col gap-4"},U_={class:"flex justify-center"},z_={class:"flex flex-col items-center gap-2"},G_={class:"flex items-center gap-2"},W_={class:"sm:col-span-1 lg:col-span-1 xl:col-span-1 flex"},K_={class:"transition-all duration-500 hover:shadow-3xl w-full"},H_={class:"sm:col-span-1 lg:col-span-1 xl:col-span-1 flex"},J_={class:"w-full"},Y_={class:"sm:col-span-1 lg:col-span-1 xl:col-span-1 flex"},Q_={class:"w-full"},Z_={class:"sm:col-span-2 lg:col-span-2 xl:col-span-2 flex"},X_={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},e2={class:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},t2={class:"space-y-4"},a2={class:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg"},s2={class:"text-lg font-semibold text-gray-900 dark:text-white"},r2={class:"text-sm text-gray-600 dark:text-gray-400"},l2={class:"grid grid-cols-2 gap-4"},o2={class:"text-sm text-gray-900 dark:text-white"},n2={class:"text-sm text-gray-900 dark:text-white"},i2={class:"grid grid-cols-2 gap-4"},d2={class:"text-sm text-gray-900 dark:text-white"},u2={class:"text-sm text-gray-900 dark:text-white"},c2={class:"text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 p-2 rounded"},g2={key:0},x2={key:0,class:"grid grid-cols-2 gap-3"},p2=["onClick"],m2=["src","alt"],v2={key:1,class:"w-full h-32 bg-gray-100 dark:bg-gray-700 rounded-lg border border-gray-300 dark:border-gray-600 flex items-center justify-center"},f2=["href"],y2={key:1,class:"mt-2"},b2=["href"],h2={key:1},k2={class:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg space-y-2"},_2={key:0},w2={class:"text-xs text-green-700 dark:text-green-300"},C2={class:"text-xs text-gray-600 dark:text-gray-400"},B2={key:0,class:"text-xs text-gray-600 dark:text-gray-400"},$2={key:1},N2={class:"text-xs text-green-700 dark:text-green-300"},D2={class:"text-xs text-gray-600 dark:text-gray-400"},A2={key:0,class:"text-xs text-gray-600 dark:text-gray-400"},S2={key:2},j2={class:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg space-y-2"},T2={key:0},P2={class:"text-xs text-red-700 dark:text-red-300"},V2={class:"text-xs text-gray-600 dark:text-gray-400"},E2={key:0,class:"text-xs text-gray-600 dark:text-gray-400"},R2={key:1},M2={class:"text-xs text-red-700 dark:text-red-300"},I2={class:"text-xs text-gray-600 dark:text-gray-400"},O2={key:0,class:"text-xs text-gray-600 dark:text-gray-400"},F2={class:"bg-gray-50 dark:bg-gray-700 px-6 py-4 border-t border-gray-200 dark:border-gray-600"},L2={class:"flex justify-end gap-3"},q2={class:"flex items-center justify-between mb-4"},U2={class:"flex items-center space-x-3"},z2={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},G2={class:"space-y-6"},W2={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},K2={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},H2={class:"text-lg font-semibold text-gray-900 dark:text-white"},J2={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},Y2={class:"text-gray-900 dark:text-white"},Q2={class:"text-gray-900 dark:text-white"},Z2={key:0},X2={class:"text-gray-900 dark:text-white"},ew={key:0},tw={key:0},aw={key:1},sw={key:1},rw={class:"text-gray-900 dark:text-white"},lw={class:"text-lg font-semibold text-gray-900 dark:text-white"},ow={class:"text-gray-900 dark:text-white"},nw={class:"text-gray-900 dark:text-white"},iw={class:"mt-4"},dw={class:"text-gray-900 dark:text-white mt-1"},uw={key:0,class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},cw={class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},gw={class:"ml-2 text-sm font-normal text-gray-600 dark:text-gray-400"},xw={key:0,class:"mb-4 p-4 bg-blue-100 dark:bg-blue-800/30 border border-blue-200 dark:border-blue-700 rounded-lg"},pw={class:"flex items-center justify-between mb-3"},mw={class:"text-sm font-semibold text-blue-600 dark:text-blue-400"},vw={class:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-purple-300 dark:border-purple-600"},fw={class:"text-lg font-bold text-purple-800 dark:text-purple-200"},yw={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},bw={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},hw={class:"bg-white dark:bg-gray-800 p-4 rounded-lg border-2 border-blue-300 dark:border-blue-600"},kw={class:"text-sm font-medium text-blue-600 dark:text-blue-400 mb-1"},_w={class:"text-xl font-bold text-blue-800 dark:text-blue-200"},ww={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Cw={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Bw={key:0},$w={key:1,class:"text-xs"},Nw={class:"bg-white dark:bg-gray-800 p-4 rounded-lg border-2 border-orange-300 dark:border-orange-600"},Dw={class:"text-xl font-bold text-orange-800 dark:text-orange-200"},Aw={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-2"},Sw={class:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700"},jw={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Tw={class:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-700"},Pw={class:"text-right"},Vw={class:"text-sm font-bold text-green-800 dark:text-green-200"},Ew={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"},Rw={class:"flex items-center justify-between p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-700"},Mw={class:"text-right"},Iw={class:"text-sm font-bold text-yellow-800 dark:text-yellow-200"},Ow={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"},Fw={key:0,class:"flex items-center justify-between p-3 bg-teal-50 dark:bg-teal-900/20 rounded-lg border border-teal-200 dark:border-teal-700"},Lw={class:"text-right"},qw={class:"text-sm font-bold text-teal-800 dark:text-teal-200"},Uw={key:1,class:"flex items-center justify-between p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-700"},zw={class:"text-right"},Gw={class:"text-sm font-bold text-amber-800 dark:text-amber-200"},Ww={class:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700"},Kw={class:"text-right"},Hw={class:"text-sm font-bold text-blue-800 dark:text-blue-200"},Jw={class:"flex items-center justify-between p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg border border-emerald-200 dark:border-emerald-700"},Yw={class:"text-right"},Qw={class:"text-sm font-bold text-emerald-800 dark:text-emerald-200"},Zw={class:"flex items-center justify-between p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-700"},Xw={class:"text-right"},e5={class:"text-sm font-bold text-orange-800 dark:text-orange-200"},t5={class:"flex items-center justify-between p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-700"},a5={class:"text-right"},s5={class:"text-sm font-bold text-purple-800 dark:text-purple-200"},r5={key:1,class:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600"},l5={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},o5={class:"p-3 bg-white dark:bg-gray-800 rounded-lg border border-blue-100 dark:border-blue-800 shadow-sm"},n5={class:"text-lg font-bold text-blue-800 dark:text-blue-200"},i5={class:"p-3 bg-white dark:bg-gray-800 rounded-lg border border-blue-100 dark:border-blue-800 shadow-sm"},d5={class:"text-lg font-bold text-blue-800 dark:text-blue-200"},u5={class:"p-3 bg-white dark:bg-gray-800 rounded-lg border border-purple-100 dark:border-purple-800 shadow-sm"},c5={class:"text-lg font-bold text-purple-600 dark:text-purple-300"},g5={key:2,class:"mt-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded text-red-800 dark:text-red-400 text-sm"},x5={key:0},p5={key:1},m5={key:3,class:"mt-4 p-3 bg-yellow-100 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700 rounded text-yellow-800 dark:text-yellow-400 text-sm"},v5={key:1,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},f5={class:"space-y-4"},y5={key:0},b5={class:"flex flex-wrap gap-2"},h5={key:1},k5={class:"text-gray-900 dark:text-white bg-white dark:bg-gray-800 p-4 rounded-lg border-2 border-purple-200 dark:border-purple-700 whitespace-pre-wrap leading-relaxed"},_5={key:2},w5={class:"text-gray-900 dark:text-white bg-white dark:bg-gray-800 p-4 rounded-lg border-2 border-purple-200 dark:border-purple-700 whitespace-pre-wrap leading-relaxed"},C5={key:3},B5={class:"text-gray-900 dark:text-white bg-white dark:bg-gray-800 p-3 rounded-lg border border-gray-200 dark:border-gray-600 whitespace-pre-wrap"},$5={key:2,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},N5={class:"space-y-4"},D5={class:"text-lg font-semibold text-gray-900 dark:text-white"},A5={key:0},S5={class:"text-gray-900 dark:text-white bg-white dark:bg-gray-800 p-3 rounded-lg border border-gray-200 dark:border-gray-600 whitespace-pre-wrap"},j5={key:3,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},T5={class:"space-y-6"},P5={class:"text-sm font-semibold text-gray-900 dark:text-white mb-3 flex items-center"},V5={class:"space-y-4"},E5={class:"text-xs font-semibold text-gray-700 dark:text-gray-400 mb-2"},R5={class:"overflow-x-auto"},M5={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-600"},I5={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-600"},O5={class:"px-3 py-2 text-sm text-gray-900 dark:text-white"},F5={key:0,class:"text-xs text-gray-500 mt-1"},L5={key:0},q5={key:1,class:"text-xs text-gray-500 mt-1"},U5={class:"px-3 py-2 text-sm text-gray-900 dark:text-white"},z5={class:"px-3 py-2 text-sm text-gray-900 dark:text-white"},G5={class:"px-3 py-2 text-sm text-gray-900 dark:text-white"},W5={class:"px-3 py-2 text-sm text-gray-900 dark:text-white text-right"},K5={key:4,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},H5={class:"overflow-x-auto"},J5={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-600"},Y5={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-600"},Q5={class:"px-4 py-2 text-sm text-gray-900 dark:text-white"},Z5={key:0,class:"text-xs text-gray-500 mt-1"},X5={key:0},e3={key:1,class:"text-xs text-gray-500 mt-1"},t3={class:"px-4 py-2 text-sm text-gray-900 dark:text-white"},a3={class:"px-4 py-2 text-sm text-gray-900 dark:text-white"},s3={class:"px-4 py-2 text-sm text-gray-900 dark:text-white"},r3={class:"px-4 py-2 text-sm text-gray-900 dark:text-white text-right"},l3={key:5,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},o3={class:"text-md font-semibold text-gray-900 dark:text-white mb-3 flex items-center"},n3={class:"ml-2 bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full"},i3={class:"space-y-4"},d3={class:"text-sm font-semibold text-gray-900 dark:text-white mb-3 flex items-center"},u3={class:"ml-2 bg-gray-100 text-gray-800 text-xs font-medium px-2 py-0.5 rounded-full"},c3={class:"flex flex-wrap gap-3"},g3=["onClick"],x3=["src","alt"],p3=["title"],m3={class:"text-xs text-gray-500 dark:text-gray-500 mt-0.5"},v3=["href","onClick"],f3={class:"text-xs text-center break-words"},y3={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},b3={key:6,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},h3={class:"text-md font-semibold text-gray-900 dark:text-white mb-3 flex items-center"},k3={class:"ml-2 bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full"},_3={class:"flex flex-wrap gap-3"},w3=["onClick"],C3=["src","alt"],B3=["title"],$3={class:"text-xs text-gray-500 dark:text-gray-500 mt-0.5"},N3=["href","onClick"],D3={class:"text-xs text-center break-words"},A3={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},S3={key:7,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},j3={class:"text-md font-semibold text-gray-900 dark:text-white mb-3 flex items-center"},T3={class:"ml-2 bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full"},P3={class:"space-y-3"},V3={class:"flex items-center space-x-4 flex-1"},E3={class:"flex-shrink-0"},R3={class:"flex-1 min-w-0"},M3={class:"flex items-center gap-2 mb-1"},I3={class:"font-semibold text-gray-900 dark:text-white text-base"},O3={key:0,class:"text-sm text-gray-600 dark:text-gray-400 mb-1"},F3={key:1,class:"text-xs text-blue-600 dark:text-blue-400 font-medium mb-2"},L3={key:2,class:"mt-2 p-2 bg-gray-50 dark:bg-gray-700 rounded text-xs text-gray-700 dark:text-gray-300"},q3={class:"flex-shrink-0 text-right ml-4"},U3={key:0,class:"text-sm font-medium text-green-600 dark:text-green-400 mb-1"},z3={key:1,class:"text-xs text-gray-600 dark:text-gray-400"},G3={key:2,class:"text-xs text-gray-500 dark:text-gray-500"},W3={key:3,class:"text-sm font-medium text-red-600 dark:text-red-400 mb-1"},K3={key:4,class:"text-xs text-gray-600 dark:text-gray-400"},H3={key:5,class:"text-xs text-gray-500 dark:text-gray-500"},J3={key:6,class:"text-xs text-yellow-600 dark:text-yellow-400 mt-2"},Y3={class:"mt-4"},Q3={class:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-600"},Z3={class:"flex items-center justify-between mb-4"},X3={key:0,class:"space-y-6"},e4={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},t4={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},a4={class:"text-lg font-semibold text-gray-900 dark:text-white"},s4={class:"text-gray-900 dark:text-white"},r4={class:"text-gray-900 dark:text-white"},l4={class:"text-gray-900 dark:text-white"},o4={class:"text-gray-900 dark:text-white"},n4={class:"text-gray-900 dark:text-white"},i4={key:0,class:"mt-4"},d4={class:"text-gray-900 dark:text-white mt-1"},u4={key:0,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},c4={class:"overflow-x-auto"},g4={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-600"},x4={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-600"},p4={class:"px-4 py-2 text-sm text-gray-900 dark:text-white"},m4={class:"px-4 py-2 text-sm text-gray-900 dark:text-white"},v4={class:"px-4 py-2 text-sm text-gray-900 dark:text-white"},f4={class:"px-4 py-2 text-sm text-gray-900 dark:text-white"},y4={key:1,class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},b4={class:"space-y-3"},h4={class:"flex items-center space-x-3"},k4={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},_4={class:"font-medium text-gray-900 dark:text-white"},w4={class:"text-sm text-gray-600 dark:text-gray-400"},C4={key:0,class:"text-xs text-blue-600 font-medium"},B4={class:"text-right"},$4={key:0,class:"text-xs text-gray-500"},N4={key:1,class:"text-xs text-gray-500"},D4={key:2,class:"text-xs text-gray-500 mt-1"},A4={class:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-600"},S4={class:"flex items-center justify-between mb-4"},j4={class:"mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},T4={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3"},P4={key:0,class:"text-center py-6"},V4={key:1},E4={key:0,class:"text-center py-10"},R4={key:1,class:"space-y-3"},M4={class:"text-sm text-gray-600 dark:text-gray-400 mb-1"},I4=["onClick"],O4={class:"flex items-center justify-between"},F4={class:"flex-1 min-w-0"},L4={class:"flex items-center gap-2"},q4={class:"font-semibold text-gray-900 dark:text-white truncate"},U4={class:"text-xs text-gray-600 dark:text-gray-300 truncate mt-1"},z4={key:0,class:"text-xs text-gray-600 dark:text-gray-300 truncate"},G4={class:"text-[11px] text-gray-500 dark:text-gray-400 truncate mt-1"},W4={key:1,class:"text-[11px] text-purple-600 dark:text-purple-400 truncate mt-1"},K4={class:"text-xs text-gray-500 dark:text-gray-400 pl-3 whitespace-nowrap"},H4={class:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-600"},J4={class:"flex items-center justify-between mb-4"},Y4={key:0,class:"space-y-6"},Q4={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},Z4={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},X4={class:"text-lg font-semibold text-gray-900 dark:text-white"},e6={class:"text-gray-900 dark:text-white"},t6={class:"text-gray-900 dark:text-white"},a6={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},s6={class:"text-gray-900 dark:text-white"},r6={class:"text-gray-900 dark:text-white"},l6={class:"text-gray-900 dark:text-white"},o6={key:0,class:"mt-4"},n6={class:"text-gray-900 dark:text-white mt-1"},i6={key:0,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},d6={class:"overflow-x-auto"},u6={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-600"},c6={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-600"},g6={class:"px-4 py-2 text-sm text-gray-900 dark:text-white"},x6={class:"px-4 py-2 text-sm text-gray-900 dark:text-white"},p6={class:"px-4 py-2 text-sm text-gray-900 dark:text-white"},m6={class:"px-4 py-2 text-sm text-gray-900 dark:text-white"},v6={key:1,class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},f6={class:"space-y-3"},y6={class:"flex items-center space-x-3"},b6={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},h6={class:"font-medium text-gray-900 dark:text-white"},k6={class:"text-sm text-gray-600 dark:text-gray-400"},_6={key:0,class:"text-xs text-blue-600 font-medium"},w6={class:"text-right"},C6={key:0,class:"text-xs text-gray-500"},B6={key:1,class:"text-xs text-gray-500"},$6={key:2,class:"text-xs text-gray-500 mt-1"},N6={class:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-600"},D6={class:"flex items-center justify-between mb-4"},A6={key:0,class:"space-y-6"},S6={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},j6={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},T6={class:"text-lg font-semibold text-gray-900 dark:text-white"},P6={class:"text-gray-900 dark:text-white"},V6={class:"text-gray-900 dark:text-white"},E6={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},R6={class:"text-gray-900 dark:text-white"},M6={class:"text-gray-900 dark:text-white"},I6={key:0,class:"mt-4"},O6={class:"text-gray-900 dark:text-white mt-1"},F6={key:0,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},L6={class:"overflow-x-auto"},q6={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-600"},U6={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-600"},z6={class:"px-4 py-2 text-sm text-gray-900 dark:text-white"},G6={class:"px-4 py-2 text-sm text-gray-900 dark:text-white"},W6={class:"px-4 py-2 text-sm text-gray-900 dark:text-white"},K6={class:"px-4 py-2 text-sm text-gray-900 dark:text-white"},H6={key:1,class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},J6={class:"space-y-3"},Y6={class:"flex items-center space-x-3"},Q6={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Z6={class:"text-xs text-blue-600 font-medium mb-1"},X6={class:"font-medium text-gray-900 dark:text-white"},e8={class:"text-sm text-gray-600 dark:text-gray-400"},t8={key:0,class:"text-xs text-gray-500"},a8={class:"text-right"},s8={key:0,class:"text-xs text-gray-500"},r8={key:1,class:"text-xs text-gray-600 mt-1 italic max-w-xs"},l8={class:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-600"},o8={class:"flex items-center justify-between mb-4"},n8={class:"mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},i8={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3"},d8={key:0,class:"text-center py-8"},u8={key:1},c8={key:0,class:"text-center py-12 text-gray-500 dark:text-gray-400"},g8={key:1,class:"space-y-3"},x8={class:"text-sm text-gray-600 dark:text-gray-400 mb-2"},p8=["onClick"],m8={class:"flex items-center justify-between"},v8={class:"flex-1"},f8={class:"font-bold text-lg text-gray-900 dark:text-white mb-1"},y8={class:"grid grid-cols-2 gap-2 text-sm"},b8={class:"text-gray-600 dark:text-gray-400"},h8={class:"text-gray-600 dark:text-gray-400"},k8={class:"text-gray-600 dark:text-gray-400"},_8={class:"text-gray-600 dark:text-gray-400"},w8={class:"ml-4 text-right"},C8={class:"text-sm text-indigo-600 dark:text-indigo-400 font-medium mb-1"},B8={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},$8=["src","alt"],N8={class:"absolute bottom-4 left-4 right-4 text-center",style:{"z-index":"100000"}},D8={class:"text-white bg-black bg-opacity-50 px-3 py-1 rounded-lg text-sm"},A8={class:"flex items-center justify-between mb-4"},S8={class:"space-y-6"},j8={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},T8={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},P8={class:"text-gray-900 dark:text-white font-semibold"},V8={class:"text-gray-900 dark:text-white"},E8={class:"text-gray-900 dark:text-white"},R8={class:"text-gray-900 dark:text-white font-semibold"},M8={key:0},I8={class:"text-gray-900 dark:text-white font-semibold text-red-600"},O8={key:0},F8={key:1},L8={key:2},q8={class:"text-gray-900 dark:text-white font-semibold text-lg"},U8={class:"text-gray-900 dark:text-white"},z8={key:0,class:"mt-4"},G8={class:"text-gray-900 dark:text-white"},W8={key:0,class:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg"},K8={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},H8={class:"text-gray-900 dark:text-white font-semibold"},J8={class:"text-gray-900 dark:text-white"},Y8={class:"text-gray-900 dark:text-white"},Q8={class:"text-gray-900 dark:text-white"},Z8={key:0},X8={key:1},e7={class:"text-gray-900 dark:text-white"},t7={class:"text-gray-900 dark:text-white"},a7={class:"text-gray-900 dark:text-white"},s7={key:0,class:"mt-4"},r7={class:"text-gray-900 dark:text-white mt-1"},l7={key:1,class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},o7={class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},n7={class:"ml-2 text-sm font-normal text-gray-600 dark:text-gray-400"},i7={key:0,class:"mb-4 p-3 bg-blue-100 dark:bg-blue-800/30 border border-blue-200 dark:border-blue-700 rounded-lg"},d7={class:"text-sm text-blue-600 dark:text-blue-400"},u7={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},c7={class:"bg-white dark:bg-gray-800 p-3 rounded-lg"},g7={class:"text-sm font-medium text-blue-600"},x7={class:"text-lg font-bold text-blue-800"},p7={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},m7={class:"bg-white dark:bg-gray-800 p-3 rounded-lg"},v7={class:"text-lg font-bold text-orange-800"},f7={class:"bg-white dark:bg-gray-800 p-3 rounded-lg"},y7={class:"text-lg font-bold text-green-800"},b7={class:"mt-4"},h7={class:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2"},k7={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3"},_7={key:1,class:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600"},w7={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},C7={class:"p-3 bg-white dark:bg-gray-800 rounded-lg border border-blue-100 dark:border-blue-800 shadow-sm"},B7={class:"text-lg font-bold text-blue-800 dark:text-blue-200"},$7={class:"p-3 bg-white dark:bg-gray-800 rounded-lg border border-blue-100 dark:border-blue-800 shadow-sm"},N7={class:"text-lg font-bold text-blue-800 dark:text-blue-200"},D7={class:"p-3 bg-white dark:bg-gray-800 rounded-lg border border-purple-100 dark:border-purple-800 shadow-sm"},A7={class:"text-lg font-bold text-purple-600 dark:text-purple-300"},S7={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},j7={class:"overflow-x-auto"},T7={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-600"},P7={class:"bg-white dark:bg-gray-700 divide-y divide-gray-200 dark:divide-gray-600"},V7={class:"px-3 py-2 text-sm text-gray-900 dark:text-white"},E7={class:"px-3 py-2 text-sm text-gray-900 dark:text-white"},R7={class:"px-3 py-2 text-sm text-gray-900 dark:text-white"},M7={class:"px-3 py-2 text-sm text-gray-900 dark:text-white"},I7={class:"px-3 py-2 text-sm text-xs"},O7={key:0,class:"text-red-600"},F7={key:0},L7={key:1},q7={key:1,class:"text-gray-400"},U7={class:"px-3 py-2 text-sm text-gray-900 dark:text-white font-semibold"},z7={key:2,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},G7={class:"text-md font-semibold text-gray-900 dark:text-white mb-3 flex items-center"},W7={class:"ml-2 bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full"},K7={class:"flex flex-wrap gap-3"},H7=["onClick"],J7=["src","alt"],Y7=["title"],Q7={class:"text-xs text-gray-500 dark:text-gray-500 mt-0.5"},Z7=["href","onClick"],X7={class:"text-xs text-center break-words"},e9={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},t9={key:3,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},a9={class:"text-md font-semibold text-gray-900 dark:text-white mb-3 flex items-center"},s9={class:"ml-2 bg-orange-100 text-orange-800 text-xs font-medium px-2.5 py-0.5 rounded-full"},r9={class:"flex flex-wrap gap-3"},l9=["onClick"],o9=["src","alt"],n9=["title"],i9={class:"text-xs text-gray-500 dark:text-gray-500 mt-0.5"},d9=["href","onClick"],u9={class:"text-xs text-center break-words"},c9={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},g9={key:4,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},x9={class:"space-y-3"},p9={class:"flex items-center space-x-3"},m9={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},v9={class:"font-medium text-gray-900 dark:text-white"},f9={class:"text-sm text-gray-600 dark:text-gray-400"},y9={key:0,class:"text-xs text-blue-600 font-medium"},b9={class:"text-right"},h9={key:0,class:"text-xs text-gray-500"},k9={key:1,class:"text-xs text-gray-500"},_9={key:5,class:"mt-4"},w9={key:1,class:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-700"},C9={class:"text-sm text-yellow-800 dark:text-yellow-200"},B9={class:"text-xs block mt-1"},$9={class:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-600"},N9={class:"flex items-center justify-between mb-4"},D9={class:"space-y-6"},A9={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},S9={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},j9={class:"text-gray-900 dark:text-white font-semibold"},T9={class:"text-gray-900 dark:text-white"},P9={class:"text-gray-900 dark:text-white"},V9={class:"text-gray-900 dark:text-white font-semibold text-lg"},E9={class:"text-gray-900 dark:text-white"},R9={key:0},M9={class:"flex flex-wrap gap-1 mt-1"},I9={key:1},O9={class:"text-gray-900 dark:text-white"},F9={key:2,class:"md:col-span-2"},L9={class:"mt-1 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800"},q9={key:0,class:"text-sm"},U9={class:"font-semibold text-red-600"},z9={key:1,class:"text-sm"},G9={class:"font-semibold text-red-600"},W9={class:"text-sm mt-1"},K9={class:"font-semibold"},H9={class:"text-sm"},J9={class:"font-semibold text-green-600"},Y9={key:0,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},Q9={class:"overflow-x-auto"},Z9={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-600"},X9={class:"bg-gray-100 dark:bg-gray-600"},eC={key:0,class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},tC={class:"bg-white dark:bg-gray-700 divide-y divide-gray-200 dark:divide-gray-600"},aC={class:"px-3 py-2 text-sm text-gray-900 dark:text-white"},sC={class:"px-3 py-2 text-sm text-gray-900 dark:text-white"},rC={class:"px-3 py-2 text-sm text-gray-900 dark:text-white"},lC={class:"px-3 py-2 text-sm text-gray-900 dark:text-white"},oC={key:0,class:"px-3 py-2 text-sm text-xs"},nC={key:0,class:"text-red-600"},iC={key:0},dC={key:1},uC={key:1,class:"text-gray-400"},cC={class:"px-3 py-2 text-sm text-gray-900 dark:text-white font-semibold"},gC={key:1,class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},xC=["src"],pC={class:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-600"},mC={class:"flex items-center justify-between mb-4"},vC={class:"flex items-center gap-2"},fC={key:0,class:"mb-4 p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-between"},yC={class:"text-sm font-medium text-blue-800 dark:text-blue-200"},bC={class:"mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},hC={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3"},kC={key:1,class:"text-center py-6"},_C={key:2},wC={key:0,class:"text-center py-10"},CC={key:1,class:"space-y-3"},BC={class:"text-sm text-gray-600 dark:text-gray-400 mb-1"},$C=["onClick"],NC={class:"flex items-center justify-between"},DC={class:"flex items-center gap-2 flex-1 min-w-0"},AC=["checked","onClick"],SC={class:"flex-1 min-w-0"},jC={class:"flex items-center gap-2"},TC={class:"font-semibold text-gray-900 dark:text-white truncate"},PC={key:0,class:"text-xs px-2 py-0.5 rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},VC={class:"text-xs text-gray-600 dark:text-gray-300 truncate"},EC={class:"text-[11px] flex flex-wrap gap-1 items-center mt-1"},RC={key:1,class:"px-1.5 py-0.5 rounded-full text-[10px] font-semibold bg-gray-100 text-gray-700"},MC={class:"text-[11px] text-gray-500 dark:text-gray-400 truncate"},IC={class:"text-xs text-gray-500 dark:text-gray-400 pl-3 whitespace-nowrap"},OC={key:2,class:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200 dark:border-gray-600"},FC={class:"text-sm text-gray-600 dark:text-gray-400"},LC={class:"flex items-center gap-2"},qC=["disabled"],UC={class:"flex gap-1"},zC=["onClick"],GC={key:1,class:"px-2 text-gray-500"},WC=["onClick"],KC={key:2,class:"px-2 text-gray-500"},HC=["disabled"],JC={class:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-600"},YC={class:"flex items-center justify-between mb-4"},QC={class:"flex items-center gap-2"},ZC={key:0,class:"mb-4 p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg flex items-center justify-between"},XC={class:"text-sm font-medium text-orange-800 dark:text-orange-200"},eB={class:"mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},tB={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3"},aB={key:1,class:"text-center py-6"},sB={key:2},rB={key:0,class:"text-center py-10"},lB={key:1,class:"space-y-3"},oB={class:"text-sm text-gray-600 dark:text-gray-400 mb-1"},nB=["onClick"],iB={class:"flex items-center justify-between"},dB={class:"flex items-center gap-2 flex-1 min-w-0"},uB=["checked","onClick"],cB={class:"flex-1 min-w-0"},gB={class:"flex items-center gap-2"},xB={class:"font-semibold text-gray-900 dark:text-white truncate"},pB={class:"text-xs text-gray-600 dark:text-gray-300 truncate"},mB={key:0,class:"text-[11px] text-gray-500 dark:text-gray-400 truncate"},vB={class:"flex flex-col items-end gap-1"},fB={class:"text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap"},yB={key:0,class:"text-xs text-orange-500 dark:text-orange-400 font-medium whitespace-nowrap"},bB={key:1,class:"text-xs text-orange-500 dark:text-orange-400 font-medium whitespace-nowrap"},hB={class:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-600"},kB={class:"flex items-center justify-between mb-4"},_B={class:"flex items-center gap-2"},wB={key:0,class:"mb-4 p-2 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-between"},CB={class:"text-sm font-medium text-green-800 dark:text-green-200"},BB={class:"mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},$B={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3"},NB={key:1,class:"text-center py-6"},DB={key:2},AB={key:0,class:"text-center py-10"},SB={key:1,class:"space-y-3"},jB={class:"text-sm text-gray-600 dark:text-gray-400 mb-1"},TB=["onClick"],PB={class:"flex items-center justify-between"},VB={class:"flex items-center gap-2 flex-1 min-w-0"},EB=["checked","onClick"],RB={class:"flex-1 min-w-0"},MB={class:"flex items-center gap-2"},IB={class:"font-semibold text-gray-900 dark:text-white truncate"},OB={class:"text-xs text-gray-600 dark:text-gray-300 truncate mt-1"},FB={class:"flex items-center gap-3 mt-2"},LB={key:0,class:"flex items-center gap-1 bg-blue-100 dark:bg-blue-900/30 px-2 py-1 rounded"},qB={class:"text-xs font-medium text-blue-700 dark:text-blue-300"},UB={key:0,class:"text-[10px] text-blue-600 dark:text-blue-400"},zB={key:1,class:"flex items-center gap-1 bg-blue-100 dark:bg-blue-900/30 px-2 py-1 rounded"},GB={class:"text-xs font-medium text-blue-700 dark:text-blue-300"},WB={class:"flex items-center gap-1 bg-green-100 dark:bg-green-900/30 px-2 py-1 rounded"},KB={class:"text-sm font-semibold text-green-700 dark:text-green-300"},HB={class:"text-xs text-gray-500 dark:text-gray-400 truncate mt-1"},JB={class:"text-[11px] text-gray-500 dark:text-gray-400 truncate mt-1"},YB={class:"flex flex-col items-end gap-1"},QB={class:"flex items-center gap-2"},ZB=["onClick"],XB={key:0,class:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-4 w-4 flex items-center justify-center min-w-[1rem]"},e$={class:"text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap"},t$={key:0,class:"text-xs text-green-500 dark:text-green-400 font-medium whitespace-nowrap"},a$={key:1,class:"text-xs text-green-500 dark:text-green-400 font-medium whitespace-nowrap"},s$={class:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-600"},r$={class:"flex items-center justify-between mb-4"},l$={key:0,class:"text-center py-6"},o$={key:1,class:"space-y-6"},n$={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},i$={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},d$={class:"text-gray-900 dark:text-white font-semibold"},u$={class:"text-gray-900 dark:text-white"},c$={class:"text-gray-900 dark:text-white"},g$={class:"text-gray-900 dark:text-white"},x$={class:"text-gray-900 dark:text-white"},p$={class:"md:col-span-2"},m$={class:"text-gray-900 dark:text-white"},v$={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},f$={key:0,class:"space-y-2"},y$={class:"flex items-center space-x-3"},b$={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},h$={class:"font-medium text-sm text-gray-900 dark:text-white"},k$={class:"text-xs text-gray-500 dark:text-gray-300"},_$={key:0,class:"text-xs text-blue-600 dark:text-blue-400 font-medium"},w$={key:1,class:"text-xs text-gray-600 dark:text-gray-400 mt-1 italic"},C$={class:"text-right"},B$={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},$$={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},N$={key:1,class:"space-y-2"},D$={class:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border border-gray-200 dark:border-gray-500"},A$={class:"text-xs text-gray-500 dark:text-gray-300"},S$={class:"text-right"},j$={key:0,class:"text-xs text-gray-500"},T$={class:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border border-gray-200 dark:border-gray-500"},P$={class:"text-xs text-gray-500 dark:text-gray-300"},V$={class:"text-right"},E$={key:0,class:"text-xs text-gray-500"},R$={class:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border border-gray-200 dark:border-gray-500"},M$={class:"text-xs text-gray-500 dark:text-gray-300"},I$={class:"text-right"},O$={key:0,class:"text-xs text-gray-500"},F$={class:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border border-gray-200 dark:border-gray-500"},L$={class:"text-xs text-gray-500 dark:text-gray-300"},q$={class:"text-right"},U$={key:0,class:"text-xs text-gray-500"},z$={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},G$={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},W$={key:0},K$={class:"text-sm text-gray-900 dark:text-white"},H$={class:"font-semibold"},J$={key:1},Y$={class:"text-sm text-gray-900 dark:text-white"},Q$={class:"font-semibold"},Z$={key:2},X$={class:"text-sm text-gray-900 dark:text-white"},eN={class:"font-semibold"},tN={key:3},aN={class:"text-sm text-gray-900 dark:text-white"},sN={class:"font-semibold"},rN={key:4},lN={class:"text-sm text-gray-900 dark:text-white"},oN={class:"font-semibold"},nN={key:5},iN={class:"text-sm text-gray-900 dark:text-white"},dN={class:"font-semibold"},uN={key:0,class:"mt-4 text-xs text-gray-600 dark:text-gray-300"},cN={class:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-600"},gN={class:"flex items-center justify-between mb-4"},xN={class:"mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},pN={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},mN={key:0,class:"text-center py-10"},vN={key:1,class:"space-y-3"},fN={class:"text-sm text-gray-600 dark:text-gray-400 mb-1"},yN=["onClick"],bN={class:"flex items-center justify-between"},hN={class:"flex-1 min-w-0"},kN={class:"text-xs text-gray-600 dark:text-gray-300 truncate"},_N={class:"text-xs text-gray-500 dark:text-gray-400 pl-3 whitespace-nowrap"},wN={class:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-600"},CN={class:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},BN={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},$N={key:0,class:"text-center py-8"},NN={key:1,class:"text-center py-8"},DN={key:2,class:"space-y-4 max-h-96 overflow-y-auto"},AN=["onClick"],SN={class:"flex items-start justify-between mb-2"},jN={class:"flex-1 mr-4"},TN={class:"font-semibold text-gray-900 dark:text-white"},PN={class:"flex items-center gap-2 mt-1"},VN=["onClick"],EN=["src","alt"],RN={key:1,class:"w-5 h-5 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-xs font-bold"},MN={class:"text-xs text-gray-500 dark:text-gray-400"},IN={class:"text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap"},ON={key:0,class:"text-sm text-gray-600 dark:text-gray-300 mb-3 line-clamp-3"},FN={key:1,class:"mb-3"},LN=["src","alt"],qN={key:2,class:"flex items-center gap-2 mb-3"},UN={class:"text-sm text-gray-500 dark:text-gray-400"},zN={class:"flex items-center justify-between"},GN={class:"flex items-center gap-2"},WN={class:"text-sm text-gray-500 dark:text-gray-400"},KN={key:3,class:"mt-6 flex items-center justify-between"},HN={class:"text-sm text-gray-700 dark:text-gray-300"},JN={class:"flex items-center gap-2"},YN=["disabled"],QN={class:"flex items-center gap-1"},ZN=["onClick"],XN=["disabled"];const eD={key:15,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-40"},tD={class:"bg-white rounded-xl shadow-lg p-6 relative w-full max-w-md"},aD={key:0,class:"mb-4"},sD=["value"];const rD={key:17,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-40"},lD={class:"bg-white rounded-xl shadow-lg p-6 relative w-full max-w-md"},oD={class:"flex items-center justify-between mb-4"},nD={key:0,class:"mb-4"},iD=["value"],dD={class:"mt-4 text-center"};const uD={class:"max-w-4xl mx-auto"},cD={class:"relative bg-white border-2 border-gray-300 shadow-lg overflow-hidden",style:{"aspect-ratio":"4/3",width:"100%"}},gD=["src"],xD={class:"relative z-10 h-full flex flex-col justify-center items-center p-8"},pD={class:"text-center space-y-6"},mD={class:"text-3xl font-bold text-gray-900"},vD={class:"text-xl text-gray-700"},fD={class:"text-lg text-gray-600"},yD={class:"text-base text-gray-600"},bD={class:"absolute bottom-8 left-0 right-0 flex justify-between items-end px-8"},hD={class:"text-sm text-gray-500"},kD={class:"text-base text-gray-700"},_D={class:"flex justify-end gap-3 mt-6"};const wD={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},CD={class:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},BD={class:"mb-6 space-y-4"},$D={class:"relative"},ND={class:"flex flex-wrap gap-4"},DD={class:"flex items-center gap-2"},AD={class:"flex items-center gap-2"},SD={class:"flex items-center gap-2"},jD={key:0,class:"text-center py-8"},TD={key:1,class:"text-center py-8"},PD={key:2,class:"space-y-4"},VD={class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},ED={class:"flex items-center justify-between mb-3"},RD={class:"flex items-center gap-3"},MD={class:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center"},ID={key:0,class:"fa-solid fa-calendar-times text-blue-600 dark:text-blue-400"},OD={key:1,class:"fa-solid fa-user-check text-blue-600 dark:text-blue-400"},FD={key:2,class:"fa-solid fa-edit text-blue-600 dark:text-blue-400"},LD={class:"font-semibold text-gray-900 dark:text-white"},qD={class:"text-sm text-gray-600 dark:text-gray-400"},UD={class:"text-right"},zD={class:"text-sm text-gray-500 dark:text-gray-400"},GD={class:"text-xs text-gray-400 dark:text-gray-500"},WD={class:"mb-3"},KD={key:0},HD={class:"text-sm text-gray-600 dark:text-gray-400"},JD={class:"font-medium"},YD={key:0,class:"text-purple-600 dark:text-purple-400"},QD={key:1,class:"text-blue-600 dark:text-blue-400"},ZD={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},XD={key:1},eA={class:"text-sm text-gray-600 dark:text-gray-400"},tA={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},aA={key:0,class:"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},sA={class:"space-y-2"},rA={class:"flex justify-between items-center"},lA={class:"text-sm font-medium text-red-600 dark:text-red-400"},oA={class:"flex justify-between items-center"},nA={class:"text-sm font-medium text-green-600 dark:text-green-400"},iA={key:1,class:"mt-2 p-2 bg-blue-50 rounded text-xs border-l-4 border-blue-400"},dA={class:"text-xs text-blue-600"},uA={class:"flex gap-2"},cA=["onClick"],gA=["onClick"],xA={key:3,class:"text-center py-8"},pA={class:"bg-gray-50 dark:bg-gray-700 px-6 py-4 border-t border-gray-200 dark:border-gray-600"},mA={class:"flex justify-between items-center"},vA={class:"text-sm text-gray-600 dark:text-gray-400"},fA={key:0},yA={key:1},bA={__name:"Home",setup(C){var hr;const te=((hr=Xo().props.auth)==null?void 0:hr.user)||{},{t:le,locale:z}=rn(),ue=p(""),J=p(new Date),T=p({temp:"",desc:"",icon:"",city:"",code:""}),b=p(!1),fe=p({text:"",author:""}),we=p(!0),ne=p([]),be=p(!1),P=p(!1),D=p(null),N=p([]),j=p(!1),ee=p(!1),O=p(null),H=p(null),xe=p(null),V=p(new Set),Ce=p(!1),De=p(!1),Ne=p(null),Be=p("pr"),ie=p([]),Se=p(!1),ke=p(!1),R=p(null),ge=p(new Set),he=p(!1),se=p([]),W=p(!1),re=p(!1),L=p(null);p(""),p(new Set),p(!1);const q=p(!1),_e=p([]),Z=p(!1),F=p(""),w=p(""),ce=p(""),E=p("newest"),g=p([]);p(new Set),p(!1);const h=p([]),y=p(!1),n=p(!1),$=p(null),f=p(new Set),_=p(!1),Y=p(!1),k=p([]),m=p(!1),d=p(""),ae=p(""),ye=p(""),Ae=p(""),Ee=p(""),Oe=p("newest"),A=p(1),Me=p(10),Pe=p(!1),ze=p(new Set),pt=p(!1),ot=p(!1),We=p(null),kt=p([]);p(new Set),p(!1);const Nt=p(!1),Dt=p(!1),Ke=p(null),Jt=p(!1),Yt=p(""),Qt=p(""),At=p(""),Ut=p("newest"),qe=p(null),St=p(!1),Ra=p([]),Ma=p(!1),ua=p(""),ca=p(""),ga=p(""),Ia=p("newest"),mt=p(!1),et=p(new Set),jt=p(!1),Oa=p([]),Fa=p(!1),xa=p(""),pa=p(""),ma=p(""),La=p("newest"),va=p(""),vt=p(!1),tt=p(new Set),zt=p([]),Tt=p(!1);p(new Set),p(!1);const Gt=p([]),Pt=p(!1),Wt=p([]),Vt=p(!1);p(new Set),p(!1);const Zt=ve(()=>{let o=[...k.value];if(d.value){const t=d.value.toLowerCase();o=o.filter(x=>{var X,je;const B=(x.number||"").toLowerCase(),S=(((X=x.supplier)==null?void 0:X.name)||"").toLowerCase(),G=(((je=x.creator)==null?void 0:je.nama_lengkap)||"").toLowerCase();return B.includes(t)||S.includes(t)||G.includes(t)})}if(ae.value&&(o=o.filter(t=>(t.status||"draft").toString().toLowerCase()===ae.value)),ye.value){const t=new Date,x=new Date(t.getFullYear(),t.getMonth(),t.getDate());o=o.filter(B=>{const S=new Date(B.date);switch(ye.value){case"today":return S>=x;case"week":return S>=new Date(x.getTime()-7*24*60*60*1e3);case"month":return S>=new Date(x.getTime()-30*24*60*60*1e3);default:return!0}})}return Ae.value&&(o=o.filter(t=>(t.source_type||"").toString().toLowerCase()===Ae.value)),Ee.value&&(o=o.filter(t=>(t.approval_level||"").toString().toLowerCase()===Ee.value)),o.sort((t,x)=>{switch(Oe.value){case"oldest":return new Date(t.date||t.created_at)-new Date(x.date||x.created_at);case"number":return(t.number||"").localeCompare(x.number||"");case"amount":return(x.total_amount||0)-(t.total_amount||0);case"newest":default:return new Date(x.date||x.created_at)-new Date(t.date||t.created_at)}}),o}),dt=ve(()=>Math.ceil(Zt.value.length/Me.value)),ws=ve(()=>{const o=(A.value-1)*Me.value,t=o+Me.value;return Zt.value.slice(o,t)}),fa=ve(()=>{let o=[...Ra.value];if(ua.value){const t=ua.value.toLowerCase();o=o.filter(x=>{var Ie,$e,Fe,Ue;const B=(x.number||"").toLowerCase(),S=(((Ie=x.supplier)==null?void 0:Ie.name)||"").toLowerCase(),G=((($e=x.purchase_requisition)==null?void 0:$e.pr_number)||"").toLowerCase(),X=(((Fe=x.purchase_requisition)==null?void 0:Fe.title)||"").toLowerCase(),je=(((Ue=x.creator)==null?void 0:Ue.nama_lengkap)||"").toLowerCase();return B.includes(t)||S.includes(t)||G.includes(t)||X.includes(t)||je.includes(t)})}if(ca.value&&(o=o.filter(t=>(t.status||"").toString().toLowerCase()===ca.value)),ga.value){const t=new Date,x=new Date(t.getFullYear(),t.getMonth(),t.getDate());o=o.filter(B=>{const S=new Date(B.date);switch(ga.value){case"today":return S>=x;case"week":return S>=new Date(x.getTime()-7*24*60*60*1e3);case"month":return S>=new Date(x.getTime()-30*24*60*60*1e3);default:return!0}})}return o.sort((t,x)=>{switch(Ia.value){case"oldest":return new Date(t.date)-new Date(x.date);case"number":return(t.number||"").localeCompare(x.number||"");case"amount":return(x.grand_total||0)-(t.grand_total||0);case"newest":default:return new Date(x.date)-new Date(t.date)}}),o});function qa(o){if(te.id_role==="5af56935b011a"){const S=(o.status||"").toString().toLowerCase();return!["approved","rejected","cancelled","received"].includes(S)}const x=(o.status||"").toString().toLowerCase();if(["approved","rejected","cancelled","received"].includes(x))return!1;const B=Array.isArray(o.approval_flows)?o.approval_flows:[];return B.some(S=>(S.status||"").toString().toUpperCase()==="REJECTED")?!1:B.length>0?B.some(S=>S.approver_id===te.id&&(S.status||"").toString().toUpperCase()==="PENDING"):["submitted","pending","awaiting","waiting"].includes(x)}const Xt=p(!1),ya=p(""),ft=p([]),Et=p(!1),yt=p(!1),pe=p(null),Ua=p(!1);function za(o){if(!o)return null;if(o.approval_flows&&Array.isArray(o.approval_flows)&&o.approval_flows.length>0){const G=o.approval_flows.find(X=>X.approver_id===te.id&&X.status==="PENDING");return G&&o.approval_flows.filter(Ie=>Ie.approval_level<G.approval_level).every(Ie=>Ie.status==="APPROVED")?G.approval_level:null}const t=o.hod_approver_id===te.id&&!o.hod_approval,x=o.gm_approver_id===te.id&&!o.gm_approval&&(o.hod_approval||"").toLowerCase()==="approved",B=o.gm_hr_approver_id===te.id&&!o.gm_hr_approval&&(o.gm_approval||"").toLowerCase()==="approved",S=o.bod_approver_id===te.id&&!o.bod_approval&&(o.gm_hr_approval||"").toLowerCase()==="approved";return t?"hod":x?"gm":B?"gm_hr":S?"bod":null}const nl=ve(()=>!!za(pe.value));async function il(){var x,B,S,G,X,je;const o=pe.value,t=za(o);if(!(!o||!t))try{if(!(await v.fire({title:"Setujui Personal Movement?",text:"Tindakan ini akan meneruskan ke approver berikutnya.",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Setujui",cancelButtonText:"Batal",confirmButtonColor:"#10B981",cancelButtonColor:"#6B7280"})).isConfirmed)return;if(o.approval_flows&&Array.isArray(o.approval_flows)&&o.approval_flows.length>0){const Fe=o.approval_flows.find(Ue=>Ue.approver_id===te.id&&Ue.status==="PENDING");if(Fe){const Ue=await M.post(`/employee-movements/${o.id}/approve`,{approval_flow_id:Fe.id,status:"approved",notes:""});(x=Ue.data)!=null&&x.success?(await v.fire("Berhasil","Persetujuan berhasil diproses","success"),yt.value=!1,await ea()):await v.fire("Gagal",((B=Ue.data)==null?void 0:B.message)||"Gagal memproses persetujuan","error");return}}const $e=await M.post(`/employee-movements/${o.id}/approve`,{approval_level:t,status:"approved",notes:""});(S=$e.data)!=null&&S.success?(await v.fire("Berhasil","Persetujuan berhasil diproses","success"),yt.value=!1,await ea()):await v.fire("Gagal",((G=$e.data)==null?void 0:G.message)||"Gagal memproses persetujuan","error")}catch(Ie){console.error(Ie),await v.fire("Error",((je=(X=Ie.response)==null?void 0:X.data)==null?void 0:je.message)||"Gagal memproses persetujuan","error")}}async function dl(){var B,S,G,X,je,Ie;const o=pe.value,t=za(o);if(!o||!t)return;const{value:x}=await v.fire({title:"Tolak Personal Movement",text:"Berikan alasan penolakan:",input:"textarea",inputPlaceholder:"Masukkan alasan penolakan...",inputValidator:$e=>{if(!$e)return"Alasan harus diisi"},showCancelButton:!0,confirmButtonText:"Tolak",cancelButtonText:"Batal",confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280"});if(x)try{if(o.approval_flows&&Array.isArray(o.approval_flows)&&o.approval_flows.length>0){const Fe=o.approval_flows.find(Ue=>Ue.approver_id===te.id&&Ue.status==="PENDING");if(Fe){const Ue=await M.post(`/employee-movements/${o.id}/approve`,{approval_flow_id:Fe.id,status:"rejected",notes:x});(B=Ue.data)!=null&&B.success?(await v.fire("Berhasil","Penolakan berhasil diproses","success"),yt.value=!1,await ea()):await v.fire("Gagal",((S=Ue.data)==null?void 0:S.message)||"Gagal memproses penolakan","error");return}}const $e=await M.post(`/employee-movements/${o.id}/approve`,{approval_level:t,status:"rejected",notes:x});(G=$e.data)!=null&&G.success?(await v.fire("Berhasil","Penolakan berhasil diproses","success"),yt.value=!1,await ea()):await v.fire("Gagal",((X=$e.data)==null?void 0:X.message)||"Gagal memproses penolakan","error")}catch($e){console.error($e),await v.fire("Error",((Ie=(je=$e.response)==null?void 0:je.data)==null?void 0:Ie.message)||"Gagal memproses penolakan","error")}}function ul(o){if(o==null)return"";let t=String(o).trim();return/^\d+$/.test(t)?"":(t=t.replace(/\s[-–—]\s*\d+$/g,"").replace(/\s->\s*\d+$/g,"").replace(/\s→\s*\d+$/g,"").trim(),t=t.replace(/\s[–—-]\s*\d+(?=\s|$)/g,"").trim(),t)}function ut(o){return ul(o)||"-"}const Ga=ve(()=>{let o=[...ft.value];if(ya.value){const t=ya.value.toLowerCase();o=o.filter(x=>{const B=(x.employee_name||"").toLowerCase(),S=(x.employment_type||"").toLowerCase();return B.includes(t)||S.includes(t)||(x.id+"").includes(t)})}return o});async function ea(){var o;Et.value=!0;try{const t=await M.get("/employee-movements/pending-approvals?limit=100");(o=t.data)!=null&&o.success&&(ft.value=t.data.data||[])}catch(t){console.error("Error loading pending personal movement approvals:",t)}finally{Et.value=!1}}async function Cs(o){var t;if(o!=null&&o.id){Ua.value=!0;try{const x=await M.get(`/employee-movements/${o.id}/debug`);(t=x.data)!=null&&t.success&&(pe.value=x.data.data,yt.value=!0)}catch(x){console.error("Error loading movement detail:",x)}finally{Ua.value=!1}}}const Rt=p([]),Wa=p(!1),ct=p([]),Ka=p(!1),_t=p([]),Mt=p(!1),ta=p(!1),It=p([]),Ha=p(!1),aa=p(""),sa=p(""),ra=p(""),ba=p("newest"),Ja=p([]),Bs=p(!1),Ot=p([]),Kt=p(!1),$s=p(!1),Ya=p(!1),Ns=p([]),Ds=p(""),hA=ve(()=>!1),Qa=p(!1),ha=p([]),Za=p(!1),Ye=p({current_page:1,last_page:1,per_page:10,total:0}),Xe=p({search:"",target:"",date_from:"",date_to:""}),cl=ve(()=>{var o;return((o=te.outlet)==null?void 0:o.nama_outlet)||"N/A"}),gl=ve(()=>{var o;return((o=te.divisi)==null?void 0:o.nama_divisi)||"N/A"}),xl=ve(()=>{var o,t;return((t=(o=te.jabatan)==null?void 0:o.level)==null?void 0:t.nama_level)||"N/A"}),As=ve(()=>{var o;return((o=te.jabatan)==null?void 0:o.nama_jabatan)||"N/A"}),kA=ve(()=>{const o=As.value.toLowerCase();return o.includes("trainer")||o.includes("instruktur")||o.includes("pengajar")}),Ss=ve(()=>{const o=ne.value.length,t=ct.value.length,x=_t.value.length,B=Rt.value.filter(G=>!G.is_read&&(G.type==="leave_approved"||G.type==="leave_rejected"||G.type==="leave_hrd_approval_request")&&Ea(G)).length,S=o+t+x+B;return S>0?S:0}),js=ve(()=>{const o=N.value.length;return o>0?o:0}),Ts=ve(()=>{const o=ie.value.length;return o>0?o:0}),Ps=ve(()=>{const o=zt.value.length;return o>0?o:0}),Vs=ve(()=>{const o=Gt.value.length;return o>0?o:0}),Es=ve(()=>{const o=Wt.value.length;return o>0?o:0}),Rs=ve(()=>{const o=g.value.length;return o>0?o:0}),Ms=ve(()=>{const o=kt.value.length;return o>0?o:0}),Is=ve(()=>{const o=h.value.length;return o>0?o:0}),la=ve(()=>{let o=[...It.value];if(aa.value){const t=aa.value.toLowerCase();o=o.filter(x=>{var je,Ie;const B=(x.employee_name||((je=x.user)==null?void 0:je.nama_lengkap)||"").toLowerCase(),S=(((Ie=x.leave_type)==null?void 0:Ie.name)||"").toLowerCase(),G=(x.reason||"").toLowerCase(),X=(x.nama_outlet||"").toLowerCase();return B.includes(t)||S.includes(t)||G.includes(t)||X.includes(t)})}if(sa.value&&(o=o.filter(t=>t.type===sa.value)),ra.value){const t=new Date,x=new Date(t.getFullYear(),t.getMonth(),t.getDate());o=o.filter(B=>{const S=new Date(B.created_at||B.tanggal);switch(ra.value){case"today":return S>=x;case"week":const G=new Date(x.getTime()-7*24*60*60*1e3);return S>=G;case"month":const X=new Date(x.getTime()-30*24*60*60*1e3);return S>=X;default:return!0}})}return o.sort((t,x)=>{var B,S;switch(ba.value){case"oldest":return new Date(t.created_at||t.tanggal)-new Date(x.created_at||x.tanggal);case"name":const G=(t.employee_name||((B=t.user)==null?void 0:B.nama_lengkap)||"").toLowerCase(),X=(x.employee_name||((S=x.user)==null?void 0:S.nama_lengkap)||"").toLowerCase();return G.localeCompare(X);case"date":return new Date(t.date_from||t.tanggal)-new Date(x.date_from||x.tanggal);case"newest":default:return new Date(x.created_at||x.tanggal)-new Date(t.created_at||t.tanggal)}}),o});function Xa(){const o=J.value.getHours();o>=5&&o<12?ue.value=le("greeting.pagi"):o>=12&&o<16?ue.value=le("greeting.siang"):o>=16&&o<19?ue.value=le("greeting.sore"):ue.value=le("greeting.malam"),b.value=o>=19||o<5}function pl(){J.value=new Date,Xa()}async function ml(){we.value=!0;try{const o=new Date,t=new Date(o.getFullYear(),0,0),x=o-t,B=Math.floor(x/(1e3*60*60*24)),G=await(await fetch(`/api/quotes/${B}`)).json();G.quote&&G.author?fe.value={text:G.quote,author:G.author}:fe.value={text:le("home.default_quote"),author:le("home.default_author")}}catch{fe.value={text:le("home.default_quote"),author:le("home.default_author")}}we.value=!1}function Os(o){return o?o.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2):""}async function Fs(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(async o=>{const t=o.coords.latitude,x=o.coords.longitude,S=`https://api.openweathermap.org/data/2.5/weather?lat=${t}&lon=${x}&appid=b1b15e88fa797225412429c1c50c122a1&units=metric&lang=${z.value}`,X=await(await fetch(S)).json();T.value={temp:Math.round(X.main.temp)+"°C",desc:X.weather[0].description,icon:`https://openweathermap.org/img/wn/${X.weather[0].icon}@2x.png`,city:X.name,code:X.weather[0].id}})}async function es(){be.value=!0;try{const o=await M.get("/api/approval/pending");if(o.data.success){const t=o.data.approvals||[];te.id_role==="5af56935b011a"?ne.value=t.filter(B=>{const S=(B.status||B.approval_status||"").toString().toLowerCase();return!["approved","rejected","completed","cancelled"].includes(S)}):ne.value=t.filter(B=>{const S=(B.status||B.approval_status||"").toString().toLowerCase();return S?S==="pending"||S==="awaiting"||S==="waiting":!0})}}catch(o){console.error("Error loading pending approvals:",o)}finally{be.value=!1}}async function vl(){j.value=!0,Se.value=!0,y.value=!0,W.value=!0,pt.value=!0,Nt.value=!0,Tt.value=!0,Pt.value=!0,Vt.value=!0,be.value=!0,Et.value=!0,Kt.value=!0,Mt.value=!0;try{const o=await M.get("/api/pending-approvals/all",{params:{limit:50}});if(o.data.success){const t=o.data.data;return N.value=t.purchase_requisitions||[],ie.value=(t.purchase_order_ops||[]).filter(x=>qa(x)),h.value=t.contra_bons||[],se.value=t.outlet_internal_use_waste||[],g.value=t.outlet_food_inventory_adjustment||[],kt.value=t.food_inventory_adjustment||[],zt.value=t.stock_opnames||[],Gt.value=t.outlet_transfer||[],Wt.value=t.warehouse_stock_opnames||[],ne.value=t.approval||[],ft.value=t.employee_movements||[],Ot.value=t.coaching||[],_t.value=t.schedule_attendance_correction||[],j.value=!1,Se.value=!1,y.value=!1,W.value=!1,pt.value=!1,Nt.value=!1,Tt.value=!1,Pt.value=!1,Vt.value=!1,be.value=!1,Et.value=!1,Kt.value=!1,Mt.value=!1,console.log("✅ Loaded all pending approvals from optimized endpoint (cached:",o.data.cached,")"),!0}else return j.value=!1,Se.value=!1,y.value=!1,W.value=!1,pt.value=!1,Nt.value=!1,Tt.value=!1,Pt.value=!1,Vt.value=!1,be.value=!1,Et.value=!1,Kt.value=!1,Mt.value=!1,!1}catch(o){return console.warn("⚠️ Optimized endpoint failed, falling back to individual endpoints:",o),j.value=!1,Se.value=!1,y.value=!1,W.value=!1,pt.value=!1,Tt.value=!1,Pt.value=!1,Vt.value=!1,be.value=!1,Et.value=!1,Kt.value=!1,Mt.value=!1,!1}}async function ka(){j.value=!0;try{const o=await M.get("/api/purchase-requisitions/pending-approvals");o.data.success&&(N.value=o.data.purchase_requisitions)}catch(o){console.error("Error loading pending PR approvals:",o)}finally{j.value=!1}}async function ts(){W.value=!0;try{const o=await M.get("/outlet-internal-use-waste/approvals/pending");o.data.success&&(se.value=o.data.headers)}catch(o){console.error("Error loading pending Category Cost approvals:",o)}finally{W.value=!1}}async function fl(){Z.value=!0;try{const o=await M.get("/outlet-internal-use-waste/approvals/pending");o.data.success&&(_e.value=o.data.headers||[])}catch(o){console.error("Error loading all Category Cost approvals:",o),_e.value=[]}finally{Z.value=!1}}async function yl(){q.value=!0,_e.value.length===0&&await fl()}const as=ve(()=>{let o=[..._e.value];if(F.value){const t=F.value.toLowerCase();o=o.filter(x=>(x.number||"").toLowerCase().includes(t)||(x.outlet_name||"").toLowerCase().includes(t)||(x.creator_name||"").toLowerCase().includes(t)||(x.warehouse_outlet_name||"").toLowerCase().includes(t)||($a(x.type)||"").toLowerCase().includes(t))}if(w.value&&(o=o.filter(t=>t.type===w.value)),ce.value){const t=new Date;if(ce.value==="today")o=o.filter(x=>new Date(x.date).toDateString()===t.toDateString());else if(ce.value==="week"){const x=new Date(t.getTime()-6048e5);o=o.filter(B=>new Date(B.date)>=x)}else if(ce.value==="month"){const x=new Date(t.getTime()-2592e6);o=o.filter(B=>new Date(B.date)>=x)}}return E.value==="newest"?o.sort((t,x)=>new Date(x.created_at||x.date)-new Date(t.created_at||t.date)):E.value==="oldest"?o.sort((t,x)=>new Date(t.created_at||t.date)-new Date(x.created_at||x.date)):E.value==="number"&&o.sort((t,x)=>(t.number||"").localeCompare(x.number||"")),o});function bl(){F.value="",w.value="",ce.value="",E.value="newest"}async function _a(){Se.value=!0;try{const o=await M.get("/po-ops/pending-approvals");if(o.data.success){const t=o.data.data||[];ie.value=t.filter(x=>qa(x))}}catch(o){console.error("Error loading pending PO Ops approvals:",o)}finally{Se.value=!1}}async function ss(){pt.value=!0;try{const o=await M.get("/api/outlet-food-inventory-adjustment/pending-approvals");o.data.success&&(g.value=o.data.adjustments||[])}catch(o){console.error("Error loading pending Stock Adjustment approvals:",o)}finally{pt.value=!1}}async function rs(){Nt.value=!0;try{const o=await M.get("/api/food-inventory-adjustment/pending-approvals");o.data.success&&(kt.value=o.data.adjustments||[])}catch(o){console.error("Error loading pending Warehouse Stock Adjustment approvals:",o)}finally{Nt.value=!1}}async function hl(){Tt.value=!0;try{const o=await M.get("/api/stock-opnames/pending-approvals");o.data.success&&(zt.value=o.data.stock_opnames||[])}catch(o){console.error("Error loading pending Stock Opname approvals:",o)}finally{Tt.value=!1}}async function kl(){Pt.value=!0;try{const o=await M.get("/api/outlet-transfer/pending-approvals");o.data.success&&(Gt.value=o.data.outlet_transfers||[])}catch(o){console.error("Error loading pending Outlet Transfer approvals:",o)}finally{Pt.value=!1}}async function _l(){Vt.value=!0;try{const o=await M.get("/api/warehouse-stock-opnames/pending-approvals");o.data.success&&(Wt.value=o.data.warehouse_stock_opnames||[])}catch(o){console.error("Error loading pending Warehouse Stock Opname approvals:",o)}finally{Vt.value=!1}}async function wa(){y.value=!0;try{const o=await M.get("/api/contra-bon/pending-approvals");o.data.success&&(h.value=o.data.contra_bons||[])}catch(o){console.error("Error loading pending Contra Bon approvals:",o)}finally{y.value=!1}}async function Ls(){m.value=!0;try{const o=await M.get("/api/contra-bon/pending-approvals?limit=500");o.data.success&&(k.value=o.data.contra_bons||[],A.value=1)}catch(o){console.error("Error loading all Contra Bon approvals:",o)}finally{m.value=!1}}function wl(){Y.value=!0,Ls(),Pe.value=!1,ze.value.clear()}function qs(o){ze.value.has(o)?ze.value.delete(o):ze.value.add(o)}function Cl(){ws.value.forEach(o=>{ze.value.add(o.id)})}async function Bl(){if(ze.value.size===0){v.fire("Warning","Pilih minimal satu Contra Bon untuk di-approve","warning");return}if((await v.fire({title:"Approve Multiple Contra Bons?",text:`Apakah Anda yakin ingin approve ${ze.value.size} Contra Bon?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#3b82f6"})).isConfirmed)try{v.fire({title:"Processing...",text:"Sedang memproses approval...",allowOutsideClick:!1,didOpen:()=>{v.showLoading()}});const x=Array.from(ze.value).map(X=>M.post(`/contra-bons/${X}/approve`,{approved:!0,note:""}).catch(je=>({error:je,cbId:X}))),B=await Promise.all(x),S=B.filter(X=>!X.error).length,G=B.filter(X=>X.error).length;ze.value.clear(),Pe.value=!1,Ls(),G===0?v.fire("Success",`${S} Contra Bon berhasil disetujui`,"success"):v.fire("Partial Success",`${S} berhasil, ${G} gagal`,"warning")}catch(t){console.error("Error approving multiple Contra Bons:",t),v.fire("Error","Gagal menyetujui Contra Bon","error")}}function Ht(o){A.value=o}function $l(o){Me.value=o,A.value=1}function Nl(){const o=A.value,t=dt.value,x=[];if(t<=7)for(let B=1;B<=t;B++)x.push(B);else{let B=Math.max(1,o-2),S=Math.min(t,o+2);o<=3?(B=1,S=5):o>=t-2&&(B=t-4,S=t);for(let G=B;G<=S;G++)x.push(G)}return x}it([d,ae,ye,Ae,Ee,Oe],()=>{A.value=1});async function Us(){Ma.value=!0;try{const o=await M.get("/po-ops/pending-approvals?limit=200");if(o.data.success){const t=o.data.data||[];Ra.value=t.filter(x=>qa(x))}}catch(o){console.error("Error loading all pending PO Ops approvals:",o)}finally{Ma.value=!1}}function Dl(){St.value=!0,mt.value=!1,et.value.clear(),Us()}function zs(o){et.value.has(o)?et.value.delete(o):et.value.add(o)}function Al(){fa.value.forEach(o=>{et.value.add(o.id)})}async function Sl(){if(et.value.size===0){v.fire("Warning","Pilih minimal satu Purchase Order Ops untuk di-approve","warning");return}if((await v.fire({title:"Approve Multiple PO Ops?",text:`Apakah Anda yakin ingin approve ${et.value.size} Purchase Order Ops?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#f97316"})).isConfirmed)try{v.fire({title:"Processing...",text:"Sedang memproses approval...",allowOutsideClick:!1,didOpen:()=>{v.showLoading()}});const x=Array.from(et.value).map(X=>M.post(`/po-ops/${X}/approve`,{approved:!0,comments:""}).catch(je=>({error:je,poId:X}))),B=await Promise.all(x),S=B.filter(X=>!X.error).length,G=B.filter(X=>X.error).length;et.value.clear(),mt.value=!1,Us(),G===0?v.fire("Success",`${S} Purchase Order Ops berhasil disetujui`,"success"):v.fire("Partial Success",`${S} berhasil, ${G} gagal`,"warning")}catch(t){console.error("Error approving multiple PO Ops:",t),v.fire("Error","Gagal menyetujui Purchase Order Ops","error")}}async function Gs(){Fa.value=!0;try{const o=await M.get("/api/purchase-requisitions/pending-approvals?limit=500");o.data.success&&(Oa.value=o.data.purchase_requisitions||[])}catch(o){console.error("Error loading all PR approvals:",o)}finally{Fa.value=!1}}function jl(){jt.value=!0,Gs(),vt.value=!1,tt.value.clear()}function Ws(o){tt.value.has(o)?tt.value.delete(o):tt.value.add(o)}function Tl(){Ca.value.forEach(o=>{tt.value.add(o.id)})}async function Pl(){var t,x;if(tt.value.size===0){v.fire("Warning","Pilih minimal satu Purchase Requisition untuk di-approve","warning");return}if((await v.fire({title:"Approve Multiple PRs?",text:`Apakah Anda yakin ingin approve ${tt.value.size} Purchase Requisition?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#10b981"})).isConfirmed)try{v.fire({title:"Processing...",text:"Sedang memproses approval...",allowOutsideClick:!1,didOpen:()=>{v.showLoading()}});const S=Array.from(tt.value).map($e=>M.post(`/purchase-requisitions/${$e}/approve`).catch(Fe=>({error:Fe,prId:$e}))),G=await Promise.all(S),X=G.filter($e=>!$e.error).length,je=G.filter($e=>$e.error).length,Ie=G.filter($e=>$e.error).map($e=>{var Ue,nt,at,Ct,Bt;const Fe=$e.error;if((nt=(Ue=Fe.response)==null?void 0:Ue.data)!=null&&nt.message)return`PR ${$e.prId}: ${Fe.response.data.message}`;if((Bt=(Ct=(at=Fe.response)==null?void 0:at.data)==null?void 0:Ct.errors)!=null&&Bt.budget_exceeded){const xt=Fe.response.data.errors.budget_exceeded;return`PR ${$e.prId}: ${Array.isArray(xt)?xt[0]:xt}`}return`PR ${$e.prId}: Gagal menyetujui`});if(tt.value.clear(),vt.value=!1,Gs(),je===0)v.fire("Success",`${X} Purchase Requisition berhasil disetujui`,"success");else{const $e=Ie.length>0?Ie.join(`
`):`${je} PR gagal disetujui`;v.fire({icon:"warning",title:"Partial Success",html:`${X} berhasil, ${je} gagal<br><br><small style="text-align: left; display: block;">${$e}</small>`,confirmButtonColor:"#3085d6"})}}catch(B){console.error("Error approving multiple PRs:",B);let S="Gagal menyetujui Purchase Requisition";(x=(t=B.response)==null?void 0:t.data)!=null&&x.message&&(S=B.response.data.message),v.fire("Error",S,"error")}}const Ca=ve(()=>{let o=[...Oa.value];if(xa.value){const t=xa.value.toLowerCase();o=o.filter(x=>{var Ie,$e,Fe;const B=(x.pr_number||"").toLowerCase(),S=(x.title||"").toLowerCase(),G=(((Ie=x.division)==null?void 0:Ie.nama_divisi)||"").toLowerCase(),X=((($e=x.outlet)==null?void 0:$e.nama_outlet)||"").toLowerCase(),je=(((Fe=x.creator)==null?void 0:Fe.nama_lengkap)||x.created_by_name||"").toLowerCase();return B.includes(t)||S.includes(t)||G.includes(t)||X.includes(t)||je.includes(t)})}if(pa.value&&(o=o.filter(t=>(t.status||"").toString().toUpperCase()===pa.value.toUpperCase())),va.value&&(o=o.filter(t=>(t.mode||"")===va.value)),ma.value){const t=new Date,x=new Date(t.getFullYear(),t.getMonth(),t.getDate());o=o.filter(B=>{const S=new Date(B.created_at);switch(ma.value){case"today":return S>=x;case"week":return S>=new Date(x.getTime()-7*24*60*60*1e3);case"month":return S>=new Date(x.getTime()-30*24*60*60*1e3);default:return!0}})}return o.sort((t,x)=>{switch(La.value){case"oldest":return new Date(t.created_at)-new Date(x.created_at);case"number":return(t.pr_number||"").localeCompare(x.pr_number||"");case"amount":return(x.amount||0)-(t.amount||0);case"newest":default:return new Date(x.created_at)-new Date(t.created_at)}}),o});async function Vl(){Bs.value=!0;try{const o=await M.get("/api/coaching/user-sanctions");o.data.success&&(Ja.value=o.data.active_sanctions)}catch(o){console.error("Error loading active sanctions:",o)}finally{Bs.value=!1}}async function ls(){Kt.value=!0;try{const o=await M.get("/api/coaching/pending-approvals");o.data.success&&(Ot.value=o.data.pending_approvals)}catch(o){console.error("Error loading coaching approvals:",o)}finally{Kt.value=!1}}async function El(o,t){try{const x=await M.post(`/coaching/${o}/approve`,{approver_id:t,comments:""});x.data.message&&(v.fire({icon:"success",title:"Berhasil",text:x.data.message,timer:2e3,showConfirmButton:!1}),ls())}catch(x){console.error("Error approving coaching:",x),v.fire({icon:"error",title:"Error",text:"Gagal menyetujui coaching"})}}async function Rl(o,t){const{value:x}=await v.fire({title:"Tolak Coaching",input:"textarea",inputLabel:"Alasan Penolakan",inputPlaceholder:"Masukkan alasan penolakan...",inputAttributes:{"aria-label":"Masukkan alasan penolakan"},showCancelButton:!0,confirmButtonText:"Tolak",cancelButtonText:"Batal",confirmButtonColor:"#dc3545",inputValidator:B=>{if(!B)return"Alasan penolakan harus diisi!"}});if(x)try{const B=await M.post(`/coaching/${o}/reject`,{approver_id:t,comments:x});B.data.message&&(v.fire({icon:"success",title:"Berhasil",text:B.data.message,timer:2e3,showConfirmButton:!1}),ls())}catch(B){console.error("Error rejecting coaching:",B),v.fire({icon:"error",title:"Error",text:"Gagal menolak coaching"})}}async function Ba(o){var t,x;try{jt.value&&(jt.value=!1);const B=await M.get(`/api/purchase-requisitions/${o}/approval-details`);B.data.success&&(O.value=B.data.purchase_requisition,H.value=B.data.budget_info||null,xe.value=B.data.mode_specific_data||null,console.log("Budget Info:",H.value),console.log("PR Mode:",(t=O.value)==null?void 0:t.mode),console.log("Category ID:",(x=O.value)==null?void 0:x.category_id),ee.value=!0)}catch(B){console.error("Error loading PR approval details:",B),v.fire("Error","Gagal memuat detail Purchase Requisition","error")}}function Ks(o){return{pr_ops:"Purchase Requisition",purchase_payment:"Payment Application",travel_application:"Travel Application",kasbon:"Kasbon"}[o]||o}function Hs(o){return{pr_ops:"bg-blue-100 text-blue-800",purchase_payment:"bg-green-100 text-green-800",travel_application:"bg-purple-100 text-purple-800",kasbon:"bg-orange-100 text-orange-800"}[o]||"bg-gray-100 text-gray-800"}function Ml(o){if(!o||o.length===0)return{};const t={};return o.forEach(x=>{var Ie,$e,Fe,Ue,nt;const B=x.outlet_id||"no-outlet",S=((Ie=x.outlet)==null?void 0:Ie.nama_outlet)||((Fe=($e=O.value)==null?void 0:$e.outlet)==null?void 0:Fe.nama_outlet)||"General",G=x.category_id||"no-category",X=x.category||((Ue=O.value)==null?void 0:Ue.category);let je="General";if(X)je=X.division?`[${X.division}] ${X.name}`:X.name;else if((nt=O.value)!=null&&nt.category){const at=O.value.category;je=at.division?`[${at.division}] ${at.name}`:at.name}t[B]||(t[B]={outlet_id:B,outlet_name:S,categories:{}}),t[B].categories[G]||(t[B].categories[G]={category_id:G,category_name:je,items:[]}),t[B].categories[G].items.push(x)}),t}function Il(o){if(!o||o.length===0)return{};const t={};return o.forEach(x=>{var G,X,je;const B=x.outlet_id||"no-outlet",S=((G=x.outlet)==null?void 0:G.nama_outlet)||((je=(X=O.value)==null?void 0:X.outlet)==null?void 0:je.nama_outlet)||"General";t[B]||(t[B]={outlet_id:B,outlet_name:S,attachments:[]}),t[B].attachments.push(x)}),t}function Js(o){V.value.has(o)?V.value.delete(o):V.value.add(o)}function Ol(){N.value.forEach(o=>{V.value.add(o.id)})}async function Fl(){var t,x;if(V.value.size===0){v.fire("Warning","Pilih minimal satu Purchase Requisition untuk di-approve","warning");return}if((await v.fire({title:"Approve Multiple PRs?",text:`Apakah Anda yakin ingin approve ${V.value.size} Purchase Requisition?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#10b981"})).isConfirmed)try{v.fire({title:"Processing...",text:"Sedang memproses approval...",allowOutsideClick:!1,didOpen:()=>{v.showLoading()}});const S=Array.from(V.value).map($e=>M.post(`/purchase-requisitions/${$e}/approve`).catch(Fe=>({error:Fe,prId:$e}))),G=await Promise.all(S),X=G.filter($e=>!$e.error).length,je=G.filter($e=>$e.error).length,Ie=G.filter($e=>$e.error).map($e=>{var Ue,nt,at,Ct,Bt;const Fe=$e.error;if((nt=(Ue=Fe.response)==null?void 0:Ue.data)!=null&&nt.message)return`PR ${$e.prId}: ${Fe.response.data.message}`;if((Bt=(Ct=(at=Fe.response)==null?void 0:at.data)==null?void 0:Ct.errors)!=null&&Bt.budget_exceeded){const xt=Fe.response.data.errors.budget_exceeded;return`PR ${$e.prId}: ${Array.isArray(xt)?xt[0]:xt}`}return`PR ${$e.prId}: Gagal menyetujui`});if(V.value.clear(),Ce.value=!1,ka(),je===0)v.fire("Success",`${X} Purchase Requisition berhasil disetujui`,"success");else{const $e=Ie.length>0?Ie.join(`
`):`${je} PR gagal disetujui`;v.fire({icon:"warning",title:"Partial Success",html:`${X} berhasil, ${je} gagal<br><br><small style="text-align: left; display: block;">${$e}</small>`,confirmButtonColor:"#3085d6"})}}catch(B){console.error("Error approving multiple PRs:",B);let S="Gagal menyetujui Purchase Requisition";(x=(t=B.response)==null?void 0:t.data)!=null&&x.message&&(S=B.response.data.message),v.fire("Error",S,"error")}}async function Ll(o){var t,x,B,S;try{(await M.post(`/purchase-requisitions/${o}/approve`)).status===200&&(v.fire("Success","Purchase Requisition berhasil disetujui","success"),ee.value=!1,ka())}catch(G){console.error("Error approving PR:",G);let X="Gagal menyetujui Purchase Requisition";if((x=(t=G.response)==null?void 0:t.data)!=null&&x.message)X=G.response.data.message;else if((S=(B=G.response)==null?void 0:B.data)!=null&&S.errors){const je=G.response.data.errors;je.budget_exceeded?X=Array.isArray(je.budget_exceeded)?je.budget_exceeded[0]:je.budget_exceeded:X=Object.values(je).flat().join(", ")}v.fire({icon:"error",title:"Gagal Menyetujui PR",text:X,confirmButtonColor:"#3085d6"})}}async function ql(o,t){try{(await M.post(`/purchase-requisitions/${o}/reject`,{rejection_reason:t})).status===200&&(v.fire("Success","Purchase Requisition berhasil ditolak","success"),ee.value=!1,ka())}catch(x){console.error("Error rejecting PR:",x),v.fire("Error","Gagal menolak Purchase Requisition","error")}}async function Ul(o){try{const t=await M.get(`/api/outlet-food-inventory-adjustment/${o}/approval-details`);t.data.success&&(We.value=t.data,ot.value=!0)}catch(t){console.error("Error loading Stock Adjustment approval details:",t),v.fire("Error","Gagal memuat detail Outlet Stock Adjustment","error")}}async function zl(o){var t,x,B;try{if(!(await v.fire({title:"Setujui Outlet Stock Adjustment?",text:"Tindakan ini akan meneruskan ke approver berikutnya.",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Setujui",cancelButtonText:"Batal",confirmButtonColor:"#10B981",cancelButtonColor:"#6B7280"})).isConfirmed)return;const G=await M.post(`/outlet-food-inventory-adjustment/${o}/approve`,{note:""});(G.status===200||(t=G.data)!=null&&t.success)&&(v.fire("Success","Outlet Stock Adjustment berhasil disetujui","success"),ot.value=!1,ss())}catch(S){console.error("Error approving Stock Adjustment:",S),v.fire("Error",((B=(x=S.response)==null?void 0:x.data)==null?void 0:B.message)||"Gagal menyetujui Outlet Stock Adjustment","error")}}async function Gl(o,t){var x,B,S;try{const G=await M.post(`/outlet-food-inventory-adjustment/${o}/reject`,{rejection_reason:t});(G.status===200||(x=G.data)!=null&&x.success)&&(v.fire("Success","Outlet Stock Adjustment berhasil ditolak","success"),ot.value=!1,ss())}catch(G){console.error("Error rejecting Stock Adjustment:",G),v.fire("Error",((S=(B=G.response)==null?void 0:B.data)==null?void 0:S.message)||"Gagal menolak Outlet Stock Adjustment","error")}}function Wl(o){v.fire({title:"Tolak Outlet Stock Adjustment?",input:"textarea",inputLabel:"Alasan Penolakan",inputPlaceholder:"Masukkan alasan penolakan...",inputAttributes:{"aria-label":"Masukkan alasan penolakan"},showCancelButton:!0,confirmButtonText:"Tolak",cancelButtonText:"Batal",confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280",inputValidator:t=>{if(!t)return"Alasan penolakan harus diisi!"}}).then(t=>{t.isConfirmed&&Gl(o,t.value)})}async function Ys(o){try{const t=await M.get(`/api/food-inventory-adjustment/${o}/approval-details`);t.data.success&&(Ke.value=t.data,Dt.value=!0)}catch(t){console.error("Error loading Warehouse Stock Adjustment approval details:",t),v.fire("Error","Gagal memuat detail Warehouse Stock Adjustment","error")}}async function Kl(o){var t,x,B;try{if(!(await v.fire({title:"Setujui Warehouse Stock Adjustment?",text:"Tindakan ini akan meneruskan ke approver berikutnya.",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Setujui",cancelButtonText:"Batal",confirmButtonColor:"#10B981",cancelButtonColor:"#6B7280"})).isConfirmed)return;const G=await M.post(`/api/food-inventory-adjustment/${o}/approve`,{note:""});(G.status===200||(t=G.data)!=null&&t.success)&&(v.fire("Success","Warehouse Stock Adjustment berhasil disetujui","success"),Dt.value=!1,rs())}catch(S){console.error("Error approving Warehouse Stock Adjustment:",S),v.fire("Error",((B=(x=S.response)==null?void 0:x.data)==null?void 0:B.message)||"Gagal menyetujui Warehouse Stock Adjustment","error")}}async function Hl(o,t){var x,B,S;try{const G=await M.post(`/api/food-inventory-adjustment/${o}/reject`,{rejection_reason:t});(G.status===200||(x=G.data)!=null&&x.success)&&(v.fire("Success","Warehouse Stock Adjustment berhasil ditolak","success"),Dt.value=!1,rs())}catch(G){console.error("Error rejecting Warehouse Stock Adjustment:",G),v.fire("Error",((S=(B=G.response)==null?void 0:B.data)==null?void 0:S.message)||"Gagal menolak Warehouse Stock Adjustment","error")}}function Jl(o){v.fire({title:"Tolak Warehouse Stock Adjustment?",input:"textarea",inputLabel:"Alasan Penolakan",inputPlaceholder:"Masukkan alasan penolakan...",inputAttributes:{"aria-label":"Masukkan alasan penolakan"},showCancelButton:!0,confirmButtonText:"Tolak",cancelButtonText:"Batal",confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280",inputValidator:t=>{if(!t)return"Alasan penolakan harus diisi!"}}).then(t=>{t.isConfirmed&&Hl(o,t.value)})}function Yl(){Jt.value=!0}const os=ve(()=>{let o=[...kt.value];if(Yt.value){const t=Yt.value.toLowerCase();o=o.filter(x=>{var B,S;return(x.number||"").toLowerCase().includes(t)||(((B=x.warehouse)==null?void 0:B.name)||"").toLowerCase().includes(t)||(((S=x.creator)==null?void 0:S.nama_lengkap)||"").toLowerCase().includes(t)||(x.type==="in"?"stock in":"stock out").toLowerCase().includes(t)})}if(Qt.value&&(o=o.filter(t=>t.type===Qt.value)),At.value){const t=new Date;if(At.value==="today")o=o.filter(x=>new Date(x.date).toDateString()===t.toDateString());else if(At.value==="week"){const x=new Date(t.getTime()-6048e5);o=o.filter(B=>new Date(B.date)>=x)}else if(At.value==="month"){const x=new Date(t.getTime()-2592e6);o=o.filter(B=>new Date(B.date)>=x)}}return Ut.value==="newest"?o.sort((t,x)=>new Date(x.date||x.created_at)-new Date(t.date||t.created_at)):Ut.value==="oldest"?o.sort((t,x)=>new Date(t.date||t.created_at)-new Date(x.date||x.created_at)):Ut.value==="number"&&o.sort((t,x)=>(t.number||"").localeCompare(x.number||"")),o});function Ql(){Yt.value="",Qt.value="",At.value="",Ut.value="newest"}async function Qs(o){try{const t=await M.get(`/api/outlet-internal-use-waste/${o}/approval-details`);t.data.success&&(L.value=t.data,re.value=!0)}catch(t){console.error("Error loading Category Cost approval details:",t),v.fire("Error","Gagal memuat detail Category Cost Outlet","error")}}async function Zl(o){var t,x;try{const B=await M.post(`/outlet-internal-use-waste/${o}/approve`);B.data.success?(v.fire("Success",B.data.message,"success"),re.value=!1,ts()):v.fire("Error",B.data.message||"Gagal menyetujui Category Cost Outlet","error")}catch(B){console.error("Error approving Category Cost:",B);const G=(((x=(t=B.response)==null?void 0:t.data)==null?void 0:x.message)||"Gagal menyetujui Category Cost Outlet").replace(/\n/g,"<br>");v.fire({icon:"error",title:"Stock Tidak Mencukupi",html:G,confirmButtonText:"OK",customClass:{popup:"text-left",htmlContainer:"text-left"}})}}async function Xl(o,t){var x,B;try{const S=await M.post(`/outlet-internal-use-waste/${o}/reject`,{rejection_reason:t});S.data.success?(v.fire("Success","Category Cost Outlet berhasil ditolak","success"),re.value=!1,ts()):v.fire("Error",S.data.message||"Gagal menolak Category Cost Outlet","error")}catch(S){console.error("Error rejecting Category Cost:",S),v.fire("Error",((B=(x=S.response)==null?void 0:x.data)==null?void 0:B.message)||"Gagal menolak Category Cost Outlet","error")}}function eo(o){v.fire({title:"Tolak Category Cost Outlet",input:"textarea",inputLabel:"Alasan Penolakan",inputPlaceholder:"Masukkan alasan penolakan...",inputAttributes:{"aria-label":"Masukkan alasan penolakan"},showCancelButton:!0,confirmButtonText:"Tolak",cancelButtonText:"Batal",confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280",inputValidator:t=>{if(!t)return"Anda harus mengisi alasan penolakan!"}}).then(t=>{t.isConfirmed&&Xl(o,t.value)})}function $a(o){return o==="internal_use"?"Internal Use":o==="spoil"?"Spoil":o==="waste"?"Waste":o==="r_and_d"?"R & D":o==="marketing"?"Marketing":o==="non_commodity"?"Non Commodity":o==="guest_supplies"?"Guest Supplies":o==="wrong_maker"?"Wrong Maker":o}function Na(o){const t=["jpg","jpeg","png","gif","webp","bmp"],x=o.split(".").pop().toLowerCase();return t.includes(x)}function Da(o){const t=o.split(".").pop().toLowerCase();return{pdf:"fa-file-pdf text-red-500",doc:"fa-file-word text-blue-500",docx:"fa-file-word text-blue-500",xls:"fa-file-excel text-green-500",xlsx:"fa-file-excel text-green-500",ppt:"fa-file-powerpoint text-orange-500",pptx:"fa-file-powerpoint text-orange-500",jpg:"fa-file-image text-purple-500",jpeg:"fa-file-image text-purple-500",png:"fa-file-image text-purple-500",gif:"fa-file-image text-purple-500",webp:"fa-file-image text-purple-500",bmp:"fa-file-image text-purple-500",txt:"fa-file-alt text-gray-500",zip:"fa-file-archive text-yellow-500",rar:"fa-file-archive text-yellow-500"}[t]||"fa-file text-gray-500"}function wt(o){if(o===0)return"0 Bytes";const t=1024,x=["Bytes","KB","MB","GB"],B=Math.floor(Math.log(o)/Math.log(t));return parseFloat((o/Math.pow(t,B)).toFixed(2))+" "+x[B]}function gt(o){return o?new Date(o).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function Aa(o,t="pr"){Ne.value=o,Be.value=t,De.value=!0}function Zs(){De.value=!1,Ne.value=null}function _A(o,t){}function Sa(o){o.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100"%3E%3Crect fill="%23ddd" width="100" height="100"/%3E%3Ctext fill="%23999" font-family="sans-serif" font-size="12" x="50%25" y="50%25" text-anchor="middle" dy=".3em"%3EImage%3C/text%3E%3C/svg%3E'}function to(o){v.fire({title:"Tolak Purchase Requisition",input:"textarea",inputLabel:"Alasan Penolakan",inputPlaceholder:"Masukkan alasan penolakan...",inputAttributes:{"aria-label":"Masukkan alasan penolakan"},showCancelButton:!0,confirmButtonText:"Tolak",cancelButtonText:"Batal",confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280",inputValidator:t=>{if(!t)return"Alasan penolakan harus diisi!"}}).then(t=>{t.isConfirmed&&ql(o,t.value)})}function ja(o){return{draft:"bg-gray-100 text-gray-800",submitted:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",received:"bg-blue-100 text-blue-800",cancelled:"bg-gray-100 text-gray-800"}[o]||"bg-gray-100 text-gray-800"}async function Xs(o){var t,x,B;try{Y.value&&(Y.value=!1);const S=await M.get(`/api/contra-bon/${o}`);S.data&&S.data.success&&S.data.contra_bon?($.value=S.data.contra_bon,n.value=!0):v.fire("Error",((t=S.data)==null?void 0:t.message)||"Gagal memuat detail Contra Bon","error")}catch(S){console.error("Error loading Contra Bon approval details:",S);const G=((B=(x=S.response)==null?void 0:x.data)==null?void 0:B.message)||S.message||"Gagal memuat detail Contra Bon";v.fire("Error",G,"error")}}function er(o){f.value.has(o)?f.value.delete(o):f.value.add(o)}function ao(){h.value.forEach(o=>{f.value.add(o.id)})}async function so(){if(f.value.size===0){v.fire("Warning","Pilih minimal satu Contra Bon untuk di-approve","warning");return}if((await v.fire({title:"Approve Multiple Contra Bons?",text:`Apakah Anda yakin ingin approve ${f.value.size} Contra Bon?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#3b82f6"})).isConfirmed)try{v.fire({title:"Processing...",text:"Sedang memproses approval...",allowOutsideClick:!1,didOpen:()=>{v.showLoading()}});const x=Array.from(f.value).map(X=>M.post(`/contra-bons/${X}/approve`,{approved:!0,note:""}).catch(je=>({error:je,cbId:X}))),B=await Promise.all(x),S=B.filter(X=>!X.error).length,G=B.filter(X=>X.error).length;f.value.clear(),_.value=!1,wa(),G===0?v.fire("Success",`${S} Contra Bon berhasil disetujui`,"success"):v.fire("Partial Success",`${S} berhasil, ${G} gagal`,"warning")}catch(t){console.error("Error approving multiple Contra Bons:",t),v.fire("Error","Gagal menyetujui Contra Bon","error")}}async function ro(o){var t,x;try{(await M.post(`/contra-bons/${o}/approve`,{approved:!0,note:""})).data.success&&(v.fire("Success","Contra Bon berhasil disetujui","success"),n.value=!1,wa())}catch(B){console.error("Error approving Contra Bon:",B),v.fire("Error",((x=(t=B.response)==null?void 0:t.data)==null?void 0:x.message)||"Gagal menyetujui Contra Bon","error")}}async function lo(o,t){var x,B;try{(await M.post(`/contra-bons/${o}/approve`,{approved:!1,note:t})).data.success&&(v.fire("Success","Contra Bon berhasil ditolak","success"),n.value=!1,wa())}catch(S){console.error("Error rejecting Contra Bon:",S),v.fire("Error",((B=(x=S.response)==null?void 0:x.data)==null?void 0:B.message)||"Gagal menolak Contra Bon","error")}}function oo(o){v.fire({title:"Tolak Contra Bon",input:"textarea",inputLabel:"Alasan Penolakan",inputPlaceholder:"Masukkan alasan penolakan...",inputAttributes:{"aria-label":"Masukkan alasan penolakan"},showCancelButton:!0,confirmButtonText:"Tolak",cancelButtonText:"Batal",confirmButtonColor:"#ef4444",inputValidator:t=>{if(!t)return"Alasan penolakan harus diisi!"}}).then(t=>{t.isConfirmed&&lo(o,t.value)})}async function tr(o){try{St.value&&(St.value=!1,await ol(),await new Promise(x=>setTimeout(x,100)));const t=await M.get(`/po-ops/${o}`);if(t.data){if(R.value=t.data.po,t.data.po.source_type==="purchase_requisition_ops"&&t.data.po.source_id)try{const x=await M.get(`/api/purchase-requisitions/${t.data.po.source_id}/approval-details`);x.data.success&&x.data.budget_info&&(qe.value=x.data.budget_info)}catch{}ke.value=!0}}catch(t){console.error("Error loading PO Ops approval details:",t),v.fire("Error","Gagal memuat detail Purchase Order Ops","error")}}function ar(o){ge.value.has(o)?ge.value.delete(o):ge.value.add(o)}function no(){ie.value.forEach(o=>{ge.value.add(o.id)})}async function io(){if(ge.value.size===0){v.fire("Warning","Pilih minimal satu Purchase Order Ops untuk di-approve","warning");return}if((await v.fire({title:"Approve Multiple PO Ops?",text:`Apakah Anda yakin ingin approve ${ge.value.size} Purchase Order Ops?`,icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Approve",cancelButtonText:"Batal",confirmButtonColor:"#f97316"})).isConfirmed)try{v.fire({title:"Processing...",text:"Sedang memproses approval...",allowOutsideClick:!1,didOpen:()=>{v.showLoading()}});const x=Array.from(ge.value).map(X=>M.post(`/po-ops/${X}/approve`,{approved:!0,comments:""}).catch(je=>({error:je,poId:X}))),B=await Promise.all(x),S=B.filter(X=>!X.error).length,G=B.filter(X=>X.error).length;ge.value.clear(),he.value=!1,_a(),G===0?v.fire("Success",`${S} Purchase Order Ops berhasil disetujui`,"success"):v.fire("Partial Success",`${S} berhasil, ${G} gagal`,"warning")}catch(t){console.error("Error approving multiple PO Ops:",t),v.fire("Error","Gagal menyetujui Purchase Order Ops","error")}}async function uo(o){try{(await M.post(`/po-ops/${o}/approve`,{approved:!0,comments:""})).data.success&&(v.fire("Success","Purchase Order Ops berhasil disetujui","success"),ke.value=!1,_a())}catch(t){console.error("Error approving PO Ops:",t),v.fire("Error","Gagal menyetujui Purchase Order Ops","error")}}async function co(o,t){try{(await M.post(`/po-ops/${o}/approve`,{approved:!1,comments:t})).data.success&&(v.fire("Success","Purchase Order Ops berhasil ditolak","success"),ke.value=!1,_a())}catch(x){console.error("Error rejecting PO Ops:",x),v.fire("Error","Gagal menolak Purchase Order Ops","error")}}function go(o){v.fire({title:"Tolak Purchase Order Ops",input:"textarea",inputLabel:"Alasan Penolakan",inputPlaceholder:"Masukkan alasan penolakan...",inputAttributes:{"aria-label":"Masukkan alasan penolakan"},showCancelButton:!0,confirmButtonText:"Tolak",cancelButtonText:"Batal",confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280",inputValidator:t=>{if(!t)return"Alasan penolakan harus diisi!"}}).then(t=>{t.isConfirmed&&co(o,t.value)})}function ns(o){return["January","February","March","April","May","June","July","August","September","October","November","December"][o-1]||"Unknown"}function Ta(o){return o?new Date(o).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A"}function xo(o){if(!o||!o.effective_date||!o.end_date)return!1;const t=new Date().toISOString().split("T")[0];return o.effective_date<=t&&o.end_date>=t}function sr(o,t){const x=o/t*100;return x>=100?"bg-red-500":x>=80?"bg-yellow-500":x>=60?"bg-orange-500":"bg-green-500"}function Pa(){return H.value?H.value.budget_type==="PER_OUTLET"?H.value.outlet_budget:H.value.category_budget:0}function is(){return H.value?H.value.budget_type==="PER_OUTLET"?H.value.outlet_used_amount:H.value.category_used_amount:0}function Ft(){return H.value&&H.value.real_remaining_budget||0}function rr(){const o=is(),t=Pa();return t===0?0:o/t*100}function lr(o){if(!o)return null;const t=o.source_pr||o.purchase_requisition;if(!t)return null;if(t.items&&t.items.length>0){const x=t.items.find(B=>B.category_id&&B.category);if(x&&x.category){const B=x.category,S=B.division||"",G=B.name||"";return S&&G?`[${S}] ${G}`:G||S||null}}if(t.category){const x=t.category,B=x.division||"",S=x.name||"";return B&&S?`[${B}] ${S}`:S||B||null}return null}function ds(){var t,x;if(!R.value)return null;const o=R.value;return console.log("getPurchaseRequisitionIdForComment - PO data:",{source_type:o.source_type,source_id:o.source_id,has_source_pr:!!o.source_pr,source_pr_id:(t=o.source_pr)==null?void 0:t.id,has_purchase_requisition:!!o.purchase_requisition,purchase_requisition_id:(x=o.purchase_requisition)==null?void 0:x.id}),o.source_pr&&typeof o.source_pr=="object"&&o.source_pr.id?(console.log("Found PR ID from source_pr.id:",o.source_pr.id),o.source_pr.id):o.purchase_requisition&&typeof o.purchase_requisition=="object"&&o.purchase_requisition.id?(console.log("Found PR ID from purchase_requisition.id:",o.purchase_requisition.id),o.purchase_requisition.id):o.source_id&&o.source_type==="purchase_requisition_ops"?(console.log("Found PR ID from source_id:",o.source_id),o.source_id):(console.log("No PR ID found"),null)}function or(){console.log("Comment added")}function nr(){console.log("Comment updated")}function ir(){console.log("Comment deleted")}function us(){return qe.value?qe.value.budget_type==="PER_OUTLET"?qe.value.outlet_budget:qe.value.category_budget:0}function cs(){return qe.value?qe.value.budget_type==="PER_OUTLET"?qe.value.outlet_used_amount:qe.value.category_used_amount:0}function po(){return qe.value?qe.value.budget_type==="PER_OUTLET"?qe.value.outlet_remaining_amount:qe.value.category_remaining_amount:0}function dr(){const o=cs(),t=us();return t===0?0:o/t*100}function mo(o){switch(o){case"APPROVED":return"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-700";case"REJECTED":return"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700";case"PENDING":return"bg-yellow-50 border-yellow-200 dark:bg-yellow-900/20 dark:border-yellow-700";default:return"bg-gray-50 border-gray-200 dark:bg-gray-700 dark:border-gray-600"}}function ur(o){switch(o){case"APPROVED":return"text-green-600 dark:text-green-400";case"REJECTED":return"text-red-600 dark:text-red-400";case"PENDING":return"text-yellow-600 dark:text-yellow-400";default:return"text-gray-600 dark:text-gray-400"}}async function oa(){Wa.value=!0;try{const o=await M.get("/api/approval/notifications");o.data.success&&(Rt.value=o.data.notifications)}catch(o){console.error("Error loading leave notifications:",o)}finally{Wa.value=!1}}async function gs(){const o=te.id_role==="5af56935b011a";if(!(!o&&te.division_id!==6)){Ka.value=!0;try{const t=await M.get("/api/approval/pending-hrd?limit=200");if(t.data.success){const x=t.data.approvals||[];o?ct.value=x.filter(B=>{const S=(B.status||B.approval_status||"").toString().toLowerCase();return!["approved","rejected","completed","cancelled"].includes(S)}):ct.value=x.filter(B=>{const S=(B.status||B.approval_status||"").toString().toLowerCase();return S?S==="pending"||S==="awaiting"||S==="waiting":!0})}}catch(t){console.error("Error loading pending HRD approvals:",t)}finally{Ka.value=!1}}}async function xs(){if(!(!(te.id_role==="5af56935b011a")&&te.division_id!==6)){Mt.value=!0;try{const t=await M.get("/api/schedule-attendance-correction/pending-approvals");t.data.success&&(_t.value=t.data.approvals)}catch(t){console.error("Error loading pending correction approvals:",t)}finally{Mt.value=!1}}}async function Lt(){Ha.value=!0;try{const o=te.id_role==="5af56935b011a",t=[];ne.value.forEach(x=>{t.push({...x,type:"leave",typeLabel:"Izin/Cuti"})}),ct.value.forEach(x=>{t.push({...x,type:"hrd_leave",typeLabel:"Izin/Cuti HRD"})}),_t.value.forEach(x=>{t.push({...x,type:"correction",typeLabel:x.type==="schedule"?"Koreksi Schedule":"Koreksi Attendance"})}),t.sort((x,B)=>new Date(B.created_at||B.tanggal)-new Date(x.created_at||x.tanggal)),It.value=t,console.log("All approvals loaded:",{leave:ne.value.length,hrd:ct.value.length,correction:_t.value.length,total:t.length})}catch(o){console.error("Error loading all approvals:",o)}finally{Ha.value=!1}}function vo(){ta.value=!0,Lt()}async function fo(o){o.type==="leave"?await na(o.id):o.type==="hrd_leave"?await na(o.id):o.type==="correction"&&(await pr(o.id),await Lt())}async function yo(o){o.type==="leave"?await gr(o.id):o.type==="hrd_leave"?await xr(o.id):o.type==="correction"&&await mr(o.id),await Lt()}const ps=p(!1),rt=p(null);function wA(o){rt.value=o,ps.value=!0}function bo(o){const t=route("lms.certificates.download",o.id);window.open(t,"_blank")}function ms(){ps.value=!1,rt.value=null}function ho(){}function cr(){$s.value=!1}en(()=>{});async function na(o){try{const t=await M.get(`/api/approval/${o}`);t.data.success&&(D.value=t.data.approval,P.value=!0)}catch(t){console.error("Error loading approval details:",t),await v.fire({icon:"error",title:"Error",text:"Gagal memuat detail approval",confirmButtonText:"OK",confirmButtonColor:"#EF4444"})}}async function ko(o){if(o.type==="leave_approval_request"||o.type==="leave_hrd_approval_request"){const t=await _o(o);t&&await na(t)}else if(o.type==="leave_approved"||o.type==="leave_rejected"){try{await M.post(`/api/approval/notifications/${o.id}/mark-read`);const t=Rt.value.findIndex(x=>x.id===o.id);t!==-1&&(Rt.value[t].is_read=!0)}catch(t){console.error("Error marking notification as read:",t)}await v.fire({icon:o.type==="leave_approved"?"success":"error",title:o.type==="leave_approved"?"Izin Disetujui":"Izin Ditolak",text:o.message,confirmButtonText:"OK",confirmButtonColor:o.type==="leave_approved"?"#10B981":"#EF4444"})}}async function _o(o){try{if(o.approval_id)return o.approval_id;if(te.division_id===6){const t=await M.get("/api/approval/pending-hrd");if(t.data.success&&t.data.approvals.length>0)return t.data.approvals[0].id}else{const t=await M.get("/api/approval/pending");if(t.data.success&&t.data.approvals.length>0)return t.data.approvals[0].id}}catch(t){console.error("Error finding approval ID:",t)}return null}async function wo(o){if((await v.fire({title:"Setujui Permohonan?",text:"Apakah Anda yakin ingin menyetujui permohonan izin/cuti ini?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Setujui",cancelButtonText:"Batal",confirmButtonColor:"#10B981",cancelButtonColor:"#6B7280"})).isConfirmed)try{const x=await M.post(`/api/approval/${o}/approve`);x.data.success&&(await v.fire({icon:"success",title:"Berhasil!",text:x.data.message,confirmButtonText:"OK",confirmButtonColor:"#10B981"}),P.value=!1,await es(),await Lt(),await oa())}catch(x){console.error("Error approving request:",x),await v.fire({icon:"error",title:"Error",text:"Gagal menyetujui permohonan",confirmButtonText:"OK",confirmButtonColor:"#EF4444"})}}async function gr(o){const{value:t}=await v.fire({title:"Tolak Permohonan",text:"Berikan alasan penolakan:",input:"textarea",inputPlaceholder:"Masukkan alasan penolakan...",inputValidator:x=>{if(!x)return"Alasan penolakan harus diisi!"},showCancelButton:!0,confirmButtonText:"Tolak",cancelButtonText:"Batal",confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280"});if(t)try{const x=await M.post(`/api/approval/${o}/reject`,{notes:t});x.data.success&&(await v.fire({icon:"success",title:"Berhasil!",text:x.data.message,confirmButtonText:"OK",confirmButtonColor:"#10B981"}),P.value=!1,await es(),await Lt(),await oa())}catch(x){console.error("Error rejecting request:",x),await v.fire({icon:"error",title:"Error",text:"Gagal menolak permohonan",confirmButtonText:"OK",confirmButtonColor:"#EF4444"})}}async function Co(o){if((await v.fire({title:"Setujui Permohonan HRD?",text:"Apakah Anda yakin ingin menyetujui permohonan izin/cuti ini sebagai HRD?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Setujui",cancelButtonText:"Batal",confirmButtonColor:"#10B981",cancelButtonColor:"#6B7280"})).isConfirmed)try{const x=await M.post(`/api/approval/${o}/hrd-approve`);x.data.success&&(await v.fire({icon:"success",title:"Berhasil!",text:x.data.message,confirmButtonText:"OK",confirmButtonColor:"#10B981"}),P.value=!1,await gs(),await Lt(),await oa())}catch(x){console.error("Error HRD approving request:",x),await v.fire({icon:"error",title:"Error",text:"Gagal menyetujui permohonan",confirmButtonText:"OK",confirmButtonColor:"#EF4444"})}}async function xr(o){const{value:t}=await v.fire({title:"Tolak Permohonan HRD",text:"Berikan alasan penolakan:",input:"textarea",inputPlaceholder:"Masukkan alasan penolakan...",inputValidator:x=>{if(!x)return"Alasan penolakan harus diisi!"},showCancelButton:!0,confirmButtonText:"Tolak",cancelButtonText:"Batal",confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280"});if(t)try{const x=await M.post(`/api/approval/${o}/hrd-reject`,{notes:t});x.data.success&&(await v.fire({icon:"success",title:"Berhasil!",text:x.data.message,confirmButtonText:"OK",confirmButtonColor:"#10B981"}),P.value=!1,await gs(),await Lt(),await oa())}catch(x){console.error("Error HRD rejecting request:",x),await v.fire({icon:"error",title:"Error",text:"Gagal menolak permohonan",confirmButtonText:"OK",confirmButtonColor:"#EF4444"})}}async function pr(o){if((await v.fire({title:"Setujui Koreksi?",text:"Apakah Anda yakin ingin menyetujui koreksi ini?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Setujui",cancelButtonText:"Batal",confirmButtonColor:"#10B981",cancelButtonColor:"#6B7280"})).isConfirmed)try{const x=await M.post(`/api/schedule-attendance-correction/approve/${o}`);x.data.success&&(await v.fire({icon:"success",title:"Berhasil!",text:x.data.message,confirmButtonText:"OK",confirmButtonColor:"#10B981"}),await xs())}catch(x){console.error("Error approving correction:",x),await v.fire({icon:"error",title:"Error",text:"Gagal menyetujui koreksi",confirmButtonText:"OK",confirmButtonColor:"#EF4444"})}}async function mr(o){const{value:t}=await v.fire({title:"Tolak Koreksi",text:"Berikan alasan penolakan:",input:"textarea",inputPlaceholder:"Masukkan alasan penolakan...",inputValidator:x=>{if(!x)return"Alasan penolakan harus diisi!"},showCancelButton:!0,confirmButtonText:"Tolak",cancelButtonText:"Batal",confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280"});if(t)try{const x=await M.post(`/api/schedule-attendance-correction/reject/${o}`,{rejection_reason:t});x.data.success&&(await v.fire({icon:"success",title:"Berhasil!",text:x.data.message,confirmButtonText:"OK",confirmButtonColor:"#10B981"}),await xs())}catch(x){console.error("Error rejecting correction:",x),await v.fire({icon:"error",title:"Error",text:"Gagal menolak koreksi",confirmButtonText:"OK",confirmButtonColor:"#EF4444"})}}function vr(o){return Bo(o.old_value,o.new_value,o.type)}function fr(o){try{const t=JSON.parse(o),x=new Date(t.scan_date),B=x.toLocaleDateString("id-ID"),S=x.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),G=t.inoutmode===1?"Masuk":"Keluar";return`${B} ${S} (${G})`}catch{return o}}function Bo(o,t,x="attendance"){if(x==="schedule")return`Dari: ${o} → Ke: ${t}`;if(x==="manual_attendance")try{const B=JSON.parse(t);if(B.scan_date){const S=new Date(B.scan_date).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return`Input ${B.inoutmode===1?"Masuk":"Keluar"}: ${S}`}}catch{return"Input Absen Manual"}try{const B=JSON.parse(o),S=JSON.parse(t);if(B.scan_date&&S.scan_date){const G=new Date(B.scan_date).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),X=new Date(S.scan_date).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return`Waktu ${B.inoutmode===1?"Masuk":"Keluar"}: ${G} → ${X}`}}catch{const S=/(\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2})/,G=o&&o.match?o.match(S):null,X=t&&t.match?t.match(S):null;if(G&&X){const je=new Date(G[1]).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),Ie=new Date(X[1]).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return`Waktu: ${je} → ${Ie}`}}return"Koreksi Attendance"}const vs=p(!1),fs=p([]),ia=p(0);function $o(o){if(!o)return!1;const t=[".jpg",".jpeg",".png",".gif",".bmp",".webp"],x=o.toLowerCase().substring(o.lastIndexOf("."));return t.includes(x)}const No=o=>{if(!o)return null;try{return`/storage/${o}`}catch(t){return console.error("Error processing image:",t),null}};function ys(o,t=[]){!t||t.length===0?(fs.value=[o],ia.value=0):(fs.value=t.map(x=>No(x)).filter(x=>x),ia.value=t.findIndex(x=>o.includes(x.split("/").pop())),ia.value===-1&&(ia.value=0)),vs.value=!0}async function Va(o=1){Za.value=!0;try{const t=new URLSearchParams({page:o,per_page:Ye.value.per_page,search:Xe.value.search,target:Xe.value.target,date_from:Xe.value.date_from,date_to:Xe.value.date_to}),x=await M.get(`/api/user-announcements?${t}`);x.data.success&&(ha.value=x.data.announcements.data||[],Ye.value={current_page:x.data.announcements.current_page,last_page:x.data.announcements.last_page,per_page:x.data.announcements.per_page,total:x.data.announcements.total})}catch(t){console.error("Error loading announcements:",t),await v.fire({icon:"error",title:"Error",text:"Gagal memuat pengumuman",confirmButtonText:"OK",confirmButtonColor:"#EF4444"})}finally{Za.value=!1}}async function Do(){Qa.value=!0,Xe.value={search:"",target:"",date_from:"",date_to:""},await Va(1)}function yr(){Qa.value=!1,ha.value=[],Ye.value={current_page:1,last_page:1,per_page:10,total:0},Xe.value={search:"",target:"",date_from:"",date_to:""}}async function Ao(){await Va(1)}function So(){Xe.value={search:"",target:"",date_from:"",date_to:""},Va(1)}function br(){aa.value="",sa.value="",ra.value="",ba.value="newest"}function Ea(o){if(o.type==="leave_approved"||o.type==="leave_rejected")return!1;if(te.division_id===6){if(o.type==="leave_approval_request")return!1}else if(o.type==="leave_hrd_approval_request")return!1;return!0}async function bs(o){await Va(o)}function jo(o){if(!o||o.length===0)return"Semua";const t=o.map(x=>x.target_name).filter(Boolean);return t.length===0?"Semua":t.length<=2?t.join(", "):`${t.slice(0,2).join(", ")} dan ${t.length-2} lainnya`}function To(o){window.open(`/announcement/${o}`,"_blank")}function Po(){const o=document.createElement("input");o.type="file",o.accept="image/*",o.onchange=async t=>{const x=t.target.files[0];if(x){const B=new FormData;B.append("avatar",x);try{const S=await fetch("/api/user/upload-avatar",{method:"POST",body:B,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}});if(S.ok){const G=await S.json();te.avatar=G.avatar_path,v.fire("Berhasil!","Avatar berhasil diupload.","success")}else v.fire("Error!","Gagal mengupload avatar.","error")}catch(S){console.error("Error uploading avatar:",S),v.fire("Error!","Terjadi kesalahan saat mengupload avatar.","error")}}},o.click()}function Vo(){const o=document.createElement("input");o.type="file",o.accept="image/*",o.onchange=async t=>{const x=t.target.files[0];if(x){const B=new FormData;B.append("banner",x);try{const S=await fetch("/api/user/upload-banner",{method:"POST",body:B,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}});if(S.ok){const G=await S.json();te.banner=G.banner_path,v.fire("Berhasil!","Banner berhasil diupload.","success")}else v.fire("Error!","Gagal mengupload banner.","error")}catch(S){console.error("Error uploading banner:",S),v.fire("Error!","Terjadi kesalahan saat mengupload banner.","error")}}},o.click()}function Eo(o){o.target.style.display="none",o.target.parentElement.innerHTML='<div class="w-full h-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"></div>'}function Ro(o){console.log("Food Payment approved:",o)}function Mo(o){console.log("Food Payment rejected:",o)}function Io(o){console.log("Non Food Payment approved:",o)}function Oo(o){console.log("Non Food Payment rejected:",o)}function Fo(o){console.log("PR Food approved:",o)}function Lo(o){console.log("PR Food rejected:",o)}function qo(o){console.log("PO Food approved:",o)}function Uo(o){console.log("PO Food rejected:",o)}function zo(o){console.log("RO Khusus approved:",o)}function Go(o){console.log("RO Khusus rejected:",o)}function Wo(o){console.log("Employee Resignation approved:",o)}function Ko(o){console.log("Employee Resignation rejected:",o)}function Ho(o){console.log("CCTV Access Request approved:",o)}function Jo(o){console.log("CCTV Access Request rejected:",o)}return st(async()=>{Xa(),setInterval(pl,1e3),ml(),Fs(),await vl()||(console.log("⚠️ Using individual endpoints (fallback)"),es(),ka(),_a(),ts(),ss(),rs(),wa(),hl(),kl(),_l(),ea(),ls(),xs()),oa(),gs(),Vl()}),it(z,()=>{Xa(),Fs()}),(o,t)=>(s(),He(ln,null,{default:tn(()=>{var x,B,S,G,X,je,Ie,$e,Fe,Ue,nt,at,Ct,Bt,xt,kr,_r,wr,Cr,Br,$r,Nr,Dr,Ar,Sr,jr,Tr,Pr,Vr,Er,Rr,Mr,Ir,Or,Fr,Lr,qr,Ur,zr,Gr,Wr,Kr,Hr,Jr,Yr,Qr,Zr,Xr,el,tl,al,sl;return[Qe(Le(an),{title:"Home"}),e("div",{class:u(["min-h-screen w-full transition-all duration-700 relative overflow-x-hidden",b.value?"bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900":"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50"])},[b.value?(s(),r("div",Qy,[(s(),r(I,null,K(50,l=>e("div",{key:l,style:ht({left:Math.random()*100+"vw",top:Math.random()*100+"vh",width:"2px",height:"2px",background:"white",position:"absolute",borderRadius:"50%",opacity:Math.random()})},null,4)),64))])):i("",!0),e("div",Zy,[e("div",Xy,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border transition-all duration-500 animate-fade-in hover:shadow-3xl overflow-hidden",b.value?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",eb,[Le(te).banner?(s(),r("div",tb,[e("img",{src:Le(te).banner?`/storage/${Le(te).banner}`:"/images/banner-default.jpg",alt:"Banner",class:"w-full h-full object-cover",onError:Eo},null,40,ab)])):(s(),r("div",sb)),e("button",{onClick:Vo,class:"absolute top-3 right-3 bg-black/20 hover:bg-black/30 text-white p-2 rounded-full transition-all"},t[184]||(t[184]=[e("i",{class:"fa-solid fa-camera text-sm"},null,-1)]))]),e("div",rb,[e("div",lb,[e("div",ob,[e("div",nb,[Le(te).avatar?(s(),r("div",{key:0,class:"w-32 h-32 rounded-full overflow-hidden border-4 border-white shadow-2xl cursor-pointer hover:shadow-3xl transition-all hover:scale-105",onClick:t[0]||(t[0]=l=>ys(`/storage/${Le(te).avatar}`))},[e("img",{src:Le(te).avatar?`/storage/${Le(te).avatar}`:"/images/avatar-default.png",alt:"Avatar",class:"w-full h-full object-cover"},null,8,ib)])):(s(),r("div",db,a(Os(Le(te).nama_lengkap)),1)),e("button",{onClick:Po,class:"absolute -bottom-2 right-2 bg-indigo-500 hover:bg-indigo-600 text-white p-2 rounded-full shadow-lg transition-all"},t[185]||(t[185]=[e("i",{class:"fa-solid fa-camera text-sm"},null,-1)]))]),e("div",ub,[e("div",{class:u(["text-xl sm:text-2xl md:text-3xl font-extrabold",b.value?"text-white":"text-slate-800"])},a(ue.value)+",",3),e("div",{class:u(["text-base sm:text-lg md:text-xl font-bold",b.value?"text-indigo-200":"text-indigo-700"])},a(Le(te).nama_lengkap),3),e("div",cb,[e("span",{class:u(["px-3 py-1 rounded-full text-xs font-semibold border",b.value?"bg-slate-700/60 text-slate-100 border-slate-600":"bg-slate-50 text-slate-700 border-slate-200"])},a(As.value),3),e("span",{class:u(["px-3 py-1 rounded-full text-xs font-semibold border",b.value?"bg-indigo-900/40 text-indigo-100 border-indigo-700/60":"bg-indigo-50 text-indigo-700 border-indigo-200"])},a(xl.value),3)])])]),e("div",gb,[e("div",xb,[e("div",{class:u(["w-full p-4 rounded-xl border flex items-start gap-3",b.value?"bg-slate-700/40 border-slate-600/60":"bg-white border-slate-200"])},[e("div",{class:u(["w-9 h-9 rounded-lg flex items-center justify-center flex-shrink-0",b.value?"bg-blue-900/30 text-blue-200":"bg-blue-50 text-blue-700"])},t[186]||(t[186]=[e("i",{class:"fa-solid fa-store text-sm"},null,-1)]),2),e("div",pb,[e("div",{class:u(["text-xs font-semibold tracking-wide uppercase",b.value?"text-blue-200/80":"text-slate-500"])},"Outlet",2),e("div",{class:u(["text-sm font-semibold break-words",b.value?"text-white":"text-slate-800"])},a(cl.value),3)])],2),e("div",{class:u(["w-full p-4 rounded-xl border flex items-start gap-3",b.value?"bg-slate-700/40 border-slate-600/60":"bg-white border-slate-200"])},[e("div",{class:u(["w-9 h-9 rounded-lg flex items-center justify-center flex-shrink-0",b.value?"bg-green-900/30 text-green-200":"bg-green-50 text-green-700"])},t[187]||(t[187]=[e("i",{class:"fa-solid fa-building text-sm"},null,-1)]),2),e("div",mb,[e("div",{class:u(["text-xs font-semibold tracking-wide uppercase",b.value?"text-green-200/80":"text-slate-500"])},"Divisi",2),e("div",{class:u(["text-sm font-semibold break-words",b.value?"text-white":"text-slate-800"])},a(gl.value),3)])],2)]),e("div",{class:u(["mt-3 p-4 rounded-xl border shadow-sm",b.value?"bg-slate-700/40 text-white border-slate-600/60":"bg-white text-slate-800 border-slate-200"])},[e("div",vb,[e("i",{class:u(["fa-solid fa-quote-left text-xs",b.value?"text-indigo-200":"text-indigo-600"])},null,2),e("span",{class:u(["text-xs font-semibold tracking-wide uppercase",b.value?"text-indigo-200/80":"text-slate-500"])},a(Le(le)("home.quote_of_the_day")),3)]),we.value?(s(),r("div",{key:0,class:u(["italic text-sm",b.value?"text-slate-300":"text-slate-500"])},a(Le(le)("home.loading_quote")),3)):(s(),r(I,{key:1},[e("div",{class:u(["italic text-sm md:text-base",b.value?"text-slate-200":"text-slate-700"])},' "'+a(fe.value.text)+'" ',3),e("div",{class:u(["mt-2 text-right font-semibold text-xs",b.value?"text-indigo-200":"text-indigo-600"])}," - "+a(fe.value.author),3)],64))],2)])]),Ja.value.length>0?(s(),r("div",{key:0,class:u(["mt-4 p-4 rounded-xl border shadow-lg animate-fade-in",[b.value?"bg-red-900/80 text-white border-red-600":"bg-gradient-to-r from-red-50 to-orange-50 text-red-800 border-red-200"]])},[e("div",fb,[e("i",{class:u(["fa-solid fa-gavel text-lg",b.value?"text-red-300":"text-red-600"])},null,2),e("span",{class:u(["font-semibold text-sm",b.value?"text-red-300":"text-red-600"])},"Sanksi Aktif",2)]),(s(!0),r(I,null,K(Ja.value,l=>(s(),r("div",{key:l.id,class:"mb-3 last:mb-0"},[(s(!0),r(I,null,K(l.sanctions,(U,oe)=>de((s(),r("div",{key:oe,class:u(["p-3 rounded-lg border mb-2",b.value?"bg-red-800/50 border-red-700":"bg-white/80 border-red-200"])},[e("div",yb,[e("div",bb,[e("div",{class:u(["font-semibold text-sm",b.value?"text-white":"text-red-800"])},a(U.name),3),e("div",{class:u(["text-xs px-2 py-1 rounded-full",b.value?"bg-red-700 text-red-200":"bg-red-100 text-red-700"])}," Aktif ",2)]),e("div",{class:u(["text-xs",b.value?"text-red-300":"text-red-600"])},[t[188]||(t[188]=e("span",{class:"font-medium"},"Tanggal Pelanggaran:",-1)),c(" "+a(Ta(l.violation_date)),1)],2),e("div",{class:u(["text-xs",b.value?"text-red-300":"text-red-600"])},[t[189]||(t[189]=e("span",{class:"font-medium"},"Tempat Terjadi Pelanggaran:",-1)),c(" "+a(l.location),1)],2),e("div",{class:u(["text-xs",b.value?"text-red-300":"text-red-600"])},[t[190]||(t[190]=e("span",{class:"font-medium"},"Detail Pelanggaran:",-1)),c(" "+a(l.violation_details),1)],2),e("div",{class:u(["text-xs",b.value?"text-red-300":"text-red-600"])},[t[191]||(t[191]=e("span",{class:"font-medium"},"Tanggal Berlaku:",-1)),c(" "+a(Ta(U.effective_date)),1)],2),e("div",{class:u(["text-xs",b.value?"text-red-300":"text-red-600"])},[t[192]||(t[192]=e("span",{class:"font-medium"},"Tanggal Berakhir:",-1)),c(" "+a(Ta(U.end_date)),1)],2),U.remarks?(s(),r("div",{key:0,class:u(["text-xs",b.value?"text-red-300":"text-red-600"])},[t[193]||(t[193]=e("span",{class:"font-medium"},"Keterangan:",-1)),c(" "+a(U.remarks),1)],2)):i("",!0)])],2)),[[sn,U&&xo(U)]])),128))]))),128))],2)):i("",!0)])],2)]),Ss.value>0?(s(),r("div",hb,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl",b.value?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",kb,[e("div",_b,[t[194]||(t[194]=e("div",{class:"w-3 h-3 rounded-full bg-red-500 animate-pulse"},null,-1)),e("h3",{class:u(["text-lg font-bold",b.value?"text-white":"text-slate-800"])}," Notifikasi Izin/Cuti ",2)]),e("div",wb,a(Ss.value),1)]),be.value||Wa.value||Ka.value||Mt.value?(s(),r("div",Cb,[t[195]||(t[195]=e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"},null,-1)),e("p",{class:u(["text-sm mt-2",b.value?"text-slate-300":"text-slate-600"])},"Memuat data...",2)])):(s(),r("div",Bb,[(s(!0),r(I,null,K(ne.value.slice(0,2),l=>(s(),r("div",{key:"approval-"+l.id,onClick:U=>na(l.id),class:u(["p-3 rounded-lg cursor-pointer transition-all duration-200 hover:scale-105",b.value?"bg-slate-700/50 hover:bg-slate-600/50":"bg-blue-50 hover:bg-blue-100"])},[e("div",Nb,[e("div",Db,[e("div",{class:u(["font-semibold text-sm",b.value?"text-white":"text-slate-800"])},a(l.user.nama_lengkap),3),e("div",{class:u(["text-xs",b.value?"text-slate-300":"text-slate-600"])},a(l.leave_type.name)+" • "+a(l.duration_text),3),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},a(new Date(l.date_from).toLocaleDateString("id-ID"))+" - "+a(new Date(l.date_to).toLocaleDateString("id-ID")),3)]),e("div",Ab,[t[196]||(t[196]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(l.approver_name||"Approval"),1)])])],10,$b))),128)),(s(!0),r(I,null,K(ct.value.slice(0,2),l=>(s(),r("div",{key:"hrd-approval-"+l.id,onClick:U=>na(l.id),class:u(["p-3 rounded-lg cursor-pointer transition-all duration-200 hover:scale-105",b.value?"bg-slate-700/50 hover:bg-slate-600/50":"bg-purple-50 hover:bg-purple-100"])},[e("div",jb,[e("div",Tb,[e("div",{class:u(["font-semibold text-sm",b.value?"text-white":"text-slate-800"])},a(l.user.nama_lengkap),3),e("div",{class:u(["text-xs",b.value?"text-slate-300":"text-slate-600"])},a(l.leave_type.name)+" • "+a(l.duration_text)+" • HRD Approval ",3),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},a(new Date(l.date_from).toLocaleDateString("id-ID"))+" - "+a(new Date(l.date_to).toLocaleDateString("id-ID")),3)]),e("div",Pb,[t[197]||(t[197]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(l.approver_name||"HRD"),1)])])],10,Sb))),128)),(s(!0),r(I,null,K(_t.value.slice(0,2),l=>(s(),r("div",{key:"correction-approval-"+l.id,class:u(["p-3 rounded-lg transition-all duration-200",b.value?"bg-slate-700/50":"bg-orange-50"])},[e("div",Vb,[e("div",Eb,[e("div",{class:u(["font-semibold text-sm",b.value?"text-white":"text-slate-800"])},a(l.employee_name),3),e("div",{class:u(["text-xs",b.value?"text-slate-300":"text-slate-600"])},a(l.type==="schedule"?"Koreksi Schedule":l.type==="attendance"?"Koreksi Attendance":"Input Absen Manual")+" • "+a(l.nama_outlet),3),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},a(new Date(l.tanggal).toLocaleDateString("id-ID"))+" • "+a(vr(l)),3),l.reason?(s(),r("div",Rb,[t[198]||(t[198]=e("div",{class:"font-medium mb-1 text-blue-700"},"Alasan Koreksi:",-1)),e("div",Mb,a(l.reason),1)])):i("",!0)]),e("div",Ib,[t[199]||(t[199]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(l.approver_name||"HRD"),1)])]),e("div",Ob,[e("button",{onClick:U=>pr(l.id),class:"flex-1 text-xs bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 transition-colors"},t[200]||(t[200]=[e("i",{class:"fa-solid fa-check mr-1"},null,-1),c("Setujui ")]),8,Fb),e("button",{onClick:U=>mr(l.id),class:"flex-1 text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 transition-colors"},t[201]||(t[201]=[e("i",{class:"fa-solid fa-times mr-1"},null,-1),c("Tolak ")]),8,Lb)])],2))),128)),(s(!0),r(I,null,K(Rt.value.filter(l=>(l.type==="leave_approved"||l.type==="leave_rejected"||l.type==="leave_hrd_approval_request")&&!l.is_read&&Ea(l)).slice(0,2),l=>(s(),r("div",{key:"notification-"+l.id,onClick:U=>ko(l),class:u(["p-3 rounded-lg transition-all duration-200",[b.value?"bg-slate-700/50":"bg-green-50",l.type==="leave_approved"?(b.value,"border-l-4 border-green-500"):l.type==="leave_rejected"?(b.value,"border-l-4 border-red-500"):l.type==="leave_hrd_approval_request"?(b.value,"border-l-4 border-purple-500"):(b.value,"border-l-4 border-yellow-500")]])},[e("div",Ub,[e("div",zb,[l.type==="leave_approved"?(s(),r("div",Gb)):l.type==="leave_rejected"?(s(),r("div",Wb)):l.type==="leave_hrd_approval_request"?(s(),r("div",Kb)):(s(),r("div",Hb))]),e("div",Jb,[e("div",{class:u(["text-xs font-medium",b.value?"text-white":"text-slate-800"])},a(l.type==="leave_approved"?"Izin Disetujui":l.type==="leave_rejected"?"Izin Ditolak":l.type==="leave_hrd_approval_request"?"Butuh Persetujuan HRD":"Notifikasi Izin"),3),e("div",{class:u(["text-xs mt-1",b.value?"text-slate-300":"text-slate-600"])},a(l.message),3),e("div",{class:u(["text-xs mt-1",b.value?"text-slate-400":"text-slate-500"])},a(new Date(l.created_at).toLocaleString("id-ID")),3)])])],10,qb))),128)),ne.value.length+ct.value.length+Rt.value.filter(l=>(l.type==="leave_approved"||l.type==="leave_rejected"||l.type==="leave_hrd_approval_request")&&!l.is_read&&Ea(l)).length>6?(s(),r("div",Yb,[e("button",Qb," Lihat "+a(ne.value.length+ct.value.length+Rt.value.filter(l=>(l.type==="leave_approved"||l.type==="leave_rejected"||l.type==="leave_hrd_approval_request")&&!l.is_read&&Ea(l)).length-6)+" notifikasi lainnya... ",1)])):i("",!0),ne.value.length>0||ct.value.length>0||_t.value.length>0?(s(),r("div",Zb,[e("button",{onClick:vo,class:"text-sm bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition-colors"},[t[202]||(t[202]=e("i",{class:"fa-solid fa-list-check mr-1"},null,-1)),c(" Lihat Semua Approval ("+a(ne.value.length+ct.value.length+_t.value.length)+") ",1)])])):i("",!0)]))],2)])):i("",!0),ft.value.length>0?(s(),r("div",Xb,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl",b.value?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",eh,[e("div",th,[t[204]||(t[204]=e("div",{class:"w-3 h-3 rounded-full bg-emerald-500 animate-pulse"},null,-1)),e("h3",{class:u(["text-lg font-bold",b.value?"text-white":"text-slate-800"])},t[203]||(t[203]=[e("i",{class:"fa fa-person-walking-arrow-right mr-2 text-emerald-500"},null,-1),c(" Personal Movement Approval ")]),2)]),e("div",ah,a(ft.value.length),1)]),Et.value?(s(),r("div",sh,[t[205]||(t[205]=e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-emerald-500"},null,-1)),e("p",{class:u(["text-sm mt-2",b.value?"text-slate-300":"text-slate-600"])},"Memuat data...",2)])):(s(),r("div",rh,[(s(!0),r(I,null,K(ft.value.slice(0,3),l=>(s(),r("div",{key:"pm-approval-"+l.id,onClick:U=>Cs(l),class:u(["p-3 rounded-lg cursor-pointer transition-all duration-200 hover:scale-105",b.value?"bg-slate-700/50 hover:bg-slate-600/50":"bg-emerald-50 hover:bg-emerald-100"])},[e("div",oh,[e("div",nh,[e("div",{class:u(["font-semibold text-sm truncate",b.value?"text-white":"text-slate-800"])},"Personal Movement",2),e("div",{class:u(["text-xs truncate",b.value?"text-slate-300":"text-slate-600"])},a(l.employee_name)+" — "+a((l.employment_type||"").replaceAll("_"," ")),3)]),e("div",ih,[t[206]||(t[206]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(l.approver_name||"Approval"),1)])])],10,lh))),128)),ft.value.length>3?(s(),r("div",dh,[e("button",{onClick:t[1]||(t[1]=l=>Xt.value=!0),class:"text-sm text-emerald-600 hover:text-emerald-700 font-medium"}," Lihat "+a(ft.value.length-3)+" Personal Movement lainnya... ",1)])):i("",!0)]))],2)])):i("",!0),Ot.value.length>0?(s(),r("div",uh,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl",b.value?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",ch,[e("div",gh,[e("i",{class:u(["fa-solid fa-clipboard-check text-lg",b.value?"text-blue-400":"text-blue-600"])},null,2),e("h3",{class:u(["text-lg font-semibold",b.value?"text-white":"text-slate-800"])},"Coaching Menunggu Persetujuan",2)]),e("div",{class:u(["text-sm px-2 py-1 rounded-full",b.value?"bg-blue-700 text-blue-200":"bg-blue-100 text-blue-800"])},a(Ot.value.length)+" item ",3)]),e("div",xh,[(s(!0),r(I,null,K(Ot.value.slice(0,3),l=>(s(),r("div",{key:l.id,class:u(["p-3 rounded-lg border transition-all duration-200",b.value?"bg-slate-700/50 border-slate-600":"bg-blue-50 border-blue-200"])},[e("div",ph,[t[213]||(t[213]=e("div",{class:"flex-shrink-0 mt-1"},[e("div",{class:"w-2 h-2 rounded-full bg-blue-500"})],-1)),e("div",mh,[e("div",vh,[e("div",{class:u(["font-medium text-sm",b.value?"text-white":"text-slate-800"])},a(l.employee_name),3),e("div",fh,[e("div",{class:u(["text-xs px-2 py-1 rounded-full",b.value?"bg-blue-700 text-blue-200":"bg-blue-100 text-blue-800"])}," Level "+a(l.approval_level),3),e("div",yh,[t[207]||(t[207]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(l.approver_name||"Approval"),1)])])]),e("div",{class:u(["text-xs space-y-1 mb-3",b.value?"text-slate-300":"text-slate-600"])},[e("div",bh,[t[208]||(t[208]=e("span",null,"Tanggal Pelanggaran:",-1)),e("span",null,a(Ta(l.violation_date)),1)]),e("div",hh,[t[209]||(t[209]=e("span",null,"Supervisor:",-1)),e("span",null,a(l.supervisor_name),1)])],2),e("div",{class:u(["text-xs mb-3",b.value?"text-slate-300":"text-slate-600"])},[t[210]||(t[210]=e("span",{class:"font-medium"},"Detail:",-1)),e("div",kh,a(l.violation_details),1)],2),e("div",_h,[e("button",{onClick:U=>El(l.coaching_id,l.id),class:"px-3 py-1 text-xs rounded-full bg-green-500 hover:bg-green-600 text-white transition-colors"},t[211]||(t[211]=[e("i",{class:"fa-solid fa-check mr-1"},null,-1),c("Setujui ")]),8,wh),e("button",{onClick:U=>Rl(l.coaching_id,l.id),class:"px-3 py-1 text-xs rounded-full bg-red-500 hover:bg-red-600 text-white transition-colors"},t[212]||(t[212]=[e("i",{class:"fa-solid fa-times mr-1"},null,-1),c("Tolak ")]),8,Ch)])])])],2))),128)),Ot.value.length>3?(s(),r("div",Bh,[e("button",$h," Lihat "+a(Ot.value.length-3)+" coaching lainnya... ",1)])):i("",!0)])],2)])):i("",!0),js.value>0?(s(),r("div",Nh,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl",b.value?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",Dh,[e("div",Ah,[t[215]||(t[215]=e("div",{class:"w-3 h-3 rounded-full bg-green-500 animate-pulse"},null,-1)),e("h3",{class:u(["text-lg font-bold",b.value?"text-white":"text-slate-800"])},t[214]||(t[214]=[e("i",{class:"fa fa-shopping-cart mr-2 text-green-500"},null,-1),c(" Purchase Requisition Approval ")]),2)]),e("div",Sh,[Ce.value?(s(),r("button",{key:1,onClick:t[3]||(t[3]=Q(l=>{Ce.value=!1,V.value.clear()},["stop"])),class:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 transition"},t[217]||(t[217]=[e("i",{class:"fa fa-times mr-1"},null,-1),c("Cancel ")]))):(s(),r("button",{key:0,onClick:t[2]||(t[2]=Q(l=>Ce.value=!0,["stop"])),class:"text-xs bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 transition"},t[216]||(t[216]=[e("i",{class:"fa fa-check-square mr-1"},null,-1),c("Multi Approve ")]))),e("div",jh,a(js.value),1)])]),Ce.value&&V.value.size>0?(s(),r("div",Th,[e("span",Ph,a(V.value.size)+" item dipilih ",1),e("div",{class:"flex gap-2"},[e("button",{onClick:Ol,class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition"},t[218]||(t[218]=[e("i",{class:"fa fa-check-double mr-1"},null,-1),c("Select All ")])),e("button",{onClick:Fl,class:"text-xs bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700 transition"},t[219]||(t[219]=[e("i",{class:"fa fa-check mr-1"},null,-1),c("Approve Selected ")]))])])):i("",!0),j.value?(s(),r("div",Vh,[t[220]||(t[220]=e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-green-500"},null,-1)),e("p",{class:u(["text-sm mt-2",b.value?"text-slate-300":"text-slate-600"])},"Memuat data...",2)])):(s(),r("div",Eh,[(s(!0),r(I,null,K(N.value.slice(0,3),l=>{var U,oe;return s(),r("div",{key:"pr-approval-"+l.id,onClick:me=>Ce.value?Js(l.id):Ba(l.id),class:u(["p-3 rounded-lg transition-all duration-200",[Ce.value?"cursor-default":"cursor-pointer hover:scale-105",b.value?"bg-slate-700/50 hover:bg-slate-600/50":"bg-green-50 hover:bg-green-100",V.value.has(l.id)?"ring-2 ring-green-500":""]])},[e("div",Mh,[e("div",Ih,[Ce.value?(s(),r("input",{key:0,type:"checkbox",checked:V.value.has(l.id),onClick:Q(me=>Js(l.id),["stop"]),class:"w-4 h-4 text-green-600 rounded focus:ring-green-500"},null,8,Oh)):i("",!0),e("div",Fh,[e("div",{class:u(["font-semibold text-sm",b.value?"text-white":"text-slate-800"])},a(l.pr_number),3),e("div",{class:u(["text-xs",b.value?"text-slate-300":"text-slate-600"])},a(l.title),3),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},a((U=l.division)==null?void 0:U.nama_divisi)+" • Rp "+a(new Intl.NumberFormat("id-ID").format(l.amount)),3),(oe=l.outlet)!=null&&oe.nama_outlet?(s(),r("div",{key:0,class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},[t[221]||(t[221]=e("i",{class:"fa fa-map-marker-alt mr-1 text-blue-500"},null,-1)),c(a(l.outlet.nama_outlet),1)],2)):i("",!0)])]),e("div",Lh,[e("button",{onClick:Q(me=>Ba(l.id),["stop"]),class:"relative text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 transition-colors",title:"Comments"},[t[222]||(t[222]=e("i",{class:"fas fa-comment text-sm"},null,-1)),l.unread_comments_count>0?(s(),r("span",Uh,a(l.unread_comments_count>99?"99+":l.unread_comments_count),1)):i("",!0)],8,qh),e("div",zh,[t[223]||(t[223]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(l.approver_name||"PR Approval"),1)])])])],10,Rh)}),128)),N.value.length>3?(s(),r("div",Gh,[e("button",{onClick:jl,class:"text-sm text-green-500 hover:text-green-700 font-medium"}," Lihat "+a(N.value.length-3)+" PR lainnya... ",1)])):i("",!0)]))],2)])):i("",!0),Ts.value>0?(s(),r("div",Wh,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl",b.value?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",Kh,[e("div",Hh,[t[225]||(t[225]=e("div",{class:"w-3 h-3 rounded-full bg-orange-500 animate-pulse"},null,-1)),e("h3",{class:u(["text-lg font-bold",b.value?"text-white":"text-slate-800"])},t[224]||(t[224]=[e("i",{class:"fa fa-file-invoice mr-2 text-orange-500"},null,-1),c(" Purchase Order Ops Approval ")]),2)]),e("div",Jh,[he.value?(s(),r("button",{key:1,onClick:t[5]||(t[5]=Q(l=>{he.value=!1,ge.value.clear()},["stop"])),class:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 transition"},t[227]||(t[227]=[e("i",{class:"fa fa-times mr-1"},null,-1),c("Cancel ")]))):(s(),r("button",{key:0,onClick:t[4]||(t[4]=Q(l=>he.value=!0,["stop"])),class:"text-xs bg-orange-500 text-white px-2 py-1 rounded hover:bg-orange-600 transition"},t[226]||(t[226]=[e("i",{class:"fa fa-check-square mr-1"},null,-1),c("Multi Approve ")]))),e("div",Yh,a(Ts.value),1)])]),he.value&&ge.value.size>0?(s(),r("div",Qh,[e("span",Zh,a(ge.value.size)+" item dipilih ",1),e("div",{class:"flex gap-2"},[e("button",{onClick:no,class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition"},t[228]||(t[228]=[e("i",{class:"fa fa-check-double mr-1"},null,-1),c("Select All ")])),e("button",{onClick:io,class:"text-xs bg-orange-600 text-white px-2 py-1 rounded hover:bg-orange-700 transition"},t[229]||(t[229]=[e("i",{class:"fa fa-check mr-1"},null,-1),c("Approve Selected ")]))])])):i("",!0),Se.value?(s(),r("div",Xh,[t[230]||(t[230]=e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-orange-500"},null,-1)),e("p",{class:u(["text-sm mt-2",b.value?"text-slate-300":"text-slate-600"])},"Memuat data...",2)])):(s(),r("div",ek,[(s(!0),r(I,null,K(ie.value.slice(0,3),l=>{var U,oe,me,Re,Je,lt,bt,da,hs;return s(),r("div",{key:"po-ops-approval-"+l.id,onClick:Yo=>he.value?ar(l.id):tr(l.id),class:u(["p-3 rounded-lg transition-all duration-200",[he.value?"cursor-default":"cursor-pointer hover:scale-105",b.value?"bg-slate-700/50 hover:bg-slate-600/50":"bg-orange-50 hover:bg-orange-100",ge.value.has(l.id)?"ring-2 ring-orange-500":""]])},[e("div",ak,[e("div",sk,[he.value?(s(),r("input",{key:0,type:"checkbox",checked:ge.value.has(l.id),onClick:Q(Yo=>ar(l.id),["stop"]),class:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500"},null,8,rk)):i("",!0),e("div",lk,[e("div",{class:u(["font-semibold text-sm",b.value?"text-white":"text-slate-800"])},a(l.number),3),e("div",{class:u(["text-xs",b.value?"text-slate-300":"text-slate-600"])},a(((U=l.supplier)==null?void 0:U.name)||"Unknown Supplier"),3),l.purchase_requisition?(s(),r("div",{key:0,class:u(["text-xs",b.value?"text-slate-300":"text-slate-600"])},[t[231]||(t[231]=e("i",{class:"fa fa-shopping-cart mr-1 text-green-600"},null,-1)),c(" PR: "+a(l.purchase_requisition.pr_number),1)],2)):i("",!0),(oe=l.purchase_requisition)!=null&&oe.title?(s(),r("div",{key:1,class:u(["text-[11px] truncate",b.value?"text-slate-400":"text-slate-500"])},a(l.purchase_requisition.title),3)):i("",!0),(me=l.purchase_requisition)!=null&&me.outlet||(Re=l.purchase_requisition)!=null&&Re.division?(s(),r("div",{key:2,class:u(["text-[11px]",b.value?"text-slate-400":"text-slate-500"])},[t[232]||(t[232]=e("i",{class:"fa fa-store mr-1 text-blue-500"},null,-1)),c(" "+a(((lt=(Je=l.purchase_requisition)==null?void 0:Je.outlet)==null?void 0:lt.nama_outlet)||((da=(bt=l.purchase_requisition)==null?void 0:bt.division)==null?void 0:da.nama_divisi)||"-"),1)],2)):i("",!0),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])}," Rp "+a(new Intl.NumberFormat("id-ID").format(l.grand_total)),3),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},[t[233]||(t[233]=e("i",{class:"fa fa-user mr-1 text-blue-500"},null,-1)),c(a((hs=l.creator)==null?void 0:hs.nama_lengkap),1)],2)])]),e("div",ok,[t[234]||(t[234]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(l.approver_name||"PO Ops"),1)])])],10,tk)}),128)),ie.value.length>3?(s(),r("div",nk,[e("button",{onClick:Dl,class:"text-sm text-orange-500 hover:text-orange-700 font-medium"}," Lihat "+a(ie.value.length-3)+" PO Ops lainnya... ",1)])):i("",!0)]))],2)])):i("",!0),Vs.value>0?(s(),r("div",ik,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl",b.value?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",dk,[e("div",uk,[t[236]||(t[236]=e("div",{class:"w-3 h-3 rounded-full bg-emerald-500 animate-pulse"},null,-1)),e("h3",{class:u(["text-lg font-bold",b.value?"text-white":"text-slate-800"])},t[235]||(t[235]=[e("i",{class:"fa fa-right-left mr-2 text-emerald-500"},null,-1),c(" Outlet Transfer Approval ")]),2)]),e("div",ck,a(Vs.value),1)]),Pt.value?(s(),r("div",gk,[t[237]||(t[237]=e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-emerald-500"},null,-1)),e("p",{class:u(["text-sm mt-2",b.value?"text-slate-300":"text-slate-600"])},"Memuat data...",2)])):(s(),r("div",xk,[(s(!0),r(I,null,K(Gt.value.slice(0,3),l=>{var U,oe,me,Re,Je,lt,bt,da;return s(),r("div",{key:"ot-approval-"+l.id,onClick:hs=>Le(qt).visit(o.route("outlet-transfer.show",l.id)),class:u(["p-3 rounded-lg transition-all duration-200 cursor-pointer hover:scale-105",b.value?"bg-slate-700/50 hover:bg-slate-600/50":"bg-emerald-50 hover:bg-emerald-100"])},[e("div",mk,[e("div",vk,[e("div",{class:u(["font-semibold text-sm",b.value?"text-white":"text-slate-800"])},a(l.transfer_number),3),e("div",{class:u(["text-xs",b.value?"text-slate-300":"text-slate-600"])},[t[238]||(t[238]=e("i",{class:"fa fa-store mr-1 text-emerald-500"},null,-1)),c(" "+a(((oe=(U=l.warehouse_outlet_from)==null?void 0:U.outlet)==null?void 0:oe.nama_outlet)||"-")+" → "+a(((Re=(me=l.warehouse_outlet_to)==null?void 0:me.outlet)==null?void 0:Re.nama_outlet)||((Je=l.outlet)==null?void 0:Je.nama_outlet)||"-"),1)],2),e("div",{class:u(["text-xs",b.value?"text-slate-300":"text-slate-600"])},[t[239]||(t[239]=e("i",{class:"fa fa-warehouse mr-1 text-purple-500"},null,-1)),c(" "+a(((lt=l.warehouse_outlet_from)==null?void 0:lt.name)||"-")+" → "+a(((bt=l.warehouse_outlet_to)==null?void 0:bt.name)||"-"),1)],2),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},[t[240]||(t[240]=e("i",{class:"fa fa-calendar mr-1"},null,-1)),c(" "+a(new Date(l.transfer_date).toLocaleDateString("id-ID")),1)],2),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},[t[241]||(t[241]=e("i",{class:"fa fa-user mr-1"},null,-1)),c(a((da=l.creator)==null?void 0:da.nama_lengkap),1)],2)]),e("div",fk,[t[242]||(t[242]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),l.approval_level?(s(),r("span",yk,"Level "+a(l.approval_level)+": ",1)):i("",!0),c(" "+a(l.approver_name||"Outlet Transfer Approval"),1)])])],10,pk)}),128)),Gt.value.length>3?(s(),r("div",bk,[e("button",{onClick:t[6]||(t[6]=l=>Le(qt).visit(o.route("outlet-transfer.index"))),class:"text-sm text-emerald-500 hover:text-emerald-700 font-medium"}," Lihat "+a(Gt.value.length-3)+" Outlet Transfer lainnya... ",1)])):i("",!0)]))],2)])):i("",!0),Ps.value>0?(s(),r("div",hk,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl",b.value?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",kk,[e("div",_k,[t[244]||(t[244]=e("div",{class:"w-3 h-3 rounded-full bg-blue-500 animate-pulse"},null,-1)),e("h3",{class:u(["text-lg font-bold",b.value?"text-white":"text-slate-800"])},t[243]||(t[243]=[e("i",{class:"fa fa-clipboard-check mr-2 text-blue-500"},null,-1),c(" Outlet Stock Opname Approval ")]),2)]),e("div",wk,a(Ps.value),1)]),Tt.value?(s(),r("div",Ck,[t[245]||(t[245]=e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"},null,-1)),e("p",{class:u(["text-sm mt-2",b.value?"text-slate-300":"text-slate-600"])},"Memuat data...",2)])):(s(),r("div",Bk,[(s(!0),r(I,null,K(zt.value.slice(0,3),l=>{var U,oe;return s(),r("div",{key:"so-approval-"+l.id,onClick:me=>Le(qt).visit(o.route("stock-opnames.show",l.id)),class:u(["p-3 rounded-lg transition-all duration-200 cursor-pointer hover:scale-105",b.value?"bg-slate-700/50 hover:bg-slate-600/50":"bg-blue-50 hover:bg-blue-100"])},[e("div",Nk,[e("div",Dk,[e("div",{class:u(["font-semibold text-sm",b.value?"text-white":"text-slate-800"])},a(l.opname_number),3),e("div",{class:u(["text-xs",b.value?"text-slate-300":"text-slate-600"])},[t[246]||(t[246]=e("i",{class:"fa fa-store mr-1 text-blue-500"},null,-1)),c(" "+a(((U=l.outlet)==null?void 0:U.nama_outlet)||"-"),1)],2),l.warehouse_outlet?(s(),r("div",{key:0,class:u(["text-xs",b.value?"text-slate-300":"text-slate-600"])},[t[247]||(t[247]=e("i",{class:"fa fa-warehouse mr-1 text-purple-500"},null,-1)),c(" "+a(l.warehouse_outlet.name),1)],2)):i("",!0),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},[t[248]||(t[248]=e("i",{class:"fa fa-calendar mr-1"},null,-1)),c(" "+a(new Date(l.opname_date).toLocaleDateString("id-ID")),1)],2),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},[t[249]||(t[249]=e("i",{class:"fa fa-user mr-1"},null,-1)),c(a((oe=l.creator)==null?void 0:oe.nama_lengkap),1)],2)]),e("div",Ak,[t[250]||(t[250]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),l.approval_level?(s(),r("span",Sk,"Level "+a(l.approval_level)+": ",1)):i("",!0),c(" "+a(l.approver_name||"Stock Opname Approval"),1)])])],10,$k)}),128)),zt.value.length>3?(s(),r("div",jk,[e("button",{onClick:t[7]||(t[7]=l=>Le(qt).visit(o.route("stock-opnames.index"))),class:"text-sm text-blue-500 hover:text-blue-700 font-medium"}," Lihat "+a(zt.value.length-3)+" Stock Opname lainnya... ",1)])):i("",!0)]))],2)])):i("",!0),Es.value>0?(s(),r("div",Tk,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl",b.value?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",Pk,[e("div",Vk,[t[252]||(t[252]=e("div",{class:"w-3 h-3 rounded-full bg-purple-500 animate-pulse"},null,-1)),e("h3",{class:u(["text-lg font-bold",b.value?"text-white":"text-slate-800"])},t[251]||(t[251]=[e("i",{class:"fa fa-clipboard-check mr-2 text-purple-500"},null,-1),c(" Warehouse Stock Opname Approval ")]),2)]),e("div",Ek,a(Es.value),1)]),Vt.value?(s(),r("div",Rk,[t[253]||(t[253]=e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-purple-500"},null,-1)),e("p",{class:u(["text-sm mt-2",b.value?"text-slate-300":"text-slate-600"])},"Memuat data...",2)])):(s(),r("div",Mk,[(s(!0),r(I,null,K(Wt.value.slice(0,3),l=>{var U,oe;return s(),r("div",{key:"wso-approval-"+l.id,onClick:me=>Le(qt).visit(o.route("warehouse-stock-opnames.show",l.id)),class:u(["p-3 rounded-lg transition-all duration-200 cursor-pointer hover:scale-105",b.value?"bg-slate-700/50 hover:bg-slate-600/50":"bg-purple-50 hover:bg-purple-100"])},[e("div",Ok,[e("div",Fk,[e("div",{class:u(["font-semibold text-sm",b.value?"text-white":"text-slate-800"])},a(l.opname_number),3),e("div",{class:u(["text-xs",b.value?"text-slate-300":"text-slate-600"])},[t[254]||(t[254]=e("i",{class:"fa fa-warehouse mr-1 text-purple-500"},null,-1)),c(" "+a(((U=l.warehouse)==null?void 0:U.name)||"-"),1)],2),l.warehouse_division?(s(),r("div",{key:0,class:u(["text-xs",b.value?"text-slate-300":"text-slate-600"])},[t[255]||(t[255]=e("i",{class:"fa fa-layer-group mr-1 text-indigo-500"},null,-1)),c(" "+a(l.warehouse_division.name),1)],2)):i("",!0),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},[t[256]||(t[256]=e("i",{class:"fa fa-calendar mr-1"},null,-1)),c(" "+a(new Date(l.opname_date).toLocaleDateString("id-ID")),1)],2),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},[t[257]||(t[257]=e("i",{class:"fa fa-user mr-1"},null,-1)),c(a((oe=l.creator)==null?void 0:oe.nama_lengkap),1)],2)]),e("div",Lk,[t[258]||(t[258]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),l.approval_level?(s(),r("span",qk,"Level "+a(l.approval_level)+": ",1)):i("",!0),c(" "+a(l.approver_name||"Warehouse Stock Opname Approval"),1)])])],10,Ik)}),128)),Wt.value.length>3?(s(),r("div",Uk,[e("button",{onClick:t[8]||(t[8]=l=>Le(qt).visit(o.route("warehouse-stock-opnames.index"))),class:"text-sm text-purple-500 hover:text-purple-700 font-medium"}," Lihat "+a(Wt.value.length-3)+" Warehouse Stock Opname lainnya... ",1)])):i("",!0)]))],2)])):i("",!0),Qe(k0,{"is-night":b.value,onApproved:Ro,onRejected:Mo},null,8,["is-night"]),Qe(vx,{"is-night":b.value,onApproved:Io,onRejected:Oo},null,8,["is-night"]),Qe(wp,{"is-night":b.value,onApproved:Fo,onRejected:Lo},null,8,["is-night"]),Qe(Om,{"is-night":b.value,onApproved:qo,onRejected:Uo},null,8,["is-night"]),Qe(Yv,{"is-night":b.value,onApproved:zo,onRejected:Go},null,8,["is-night"]),Qe(mf,{"is-night":b.value,onApproved:Wo,onRejected:Ko},null,8,["is-night"]),Qe(ly,{"is-night":b.value,onApproved:Ho,onRejected:Jo},null,8,["is-night"]),Is.value>0?(s(),r("div",zk,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl",b.value?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",Gk,[e("div",Wk,[t[260]||(t[260]=e("div",{class:"w-3 h-3 rounded-full bg-blue-500 animate-pulse"},null,-1)),e("h3",{class:u(["text-lg font-bold",b.value?"text-white":"text-slate-800"])},t[259]||(t[259]=[e("i",{class:"fa fa-file-invoice-dollar mr-2 text-blue-500"},null,-1),c(" Contra Bon Approval ")]),2)]),e("div",Kk,[_.value?(s(),r("button",{key:1,onClick:t[10]||(t[10]=Q(l=>{_.value=!1,f.value.clear()},["stop"])),class:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 transition"},t[262]||(t[262]=[e("i",{class:"fa fa-times mr-1"},null,-1),c("Cancel ")]))):(s(),r("button",{key:0,onClick:t[9]||(t[9]=Q(l=>_.value=!0,["stop"])),class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition"},t[261]||(t[261]=[e("i",{class:"fa fa-check-square mr-1"},null,-1),c("Multi Approve ")]))),e("div",Hk,a(Is.value),1)])]),_.value&&f.value.size>0?(s(),r("div",Jk,[e("span",Yk,a(f.value.size)+" item dipilih ",1),e("div",{class:"flex gap-2"},[e("button",{onClick:ao,class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition"},t[263]||(t[263]=[e("i",{class:"fa fa-check-double mr-1"},null,-1),c("Select All ")])),e("button",{onClick:so,class:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700 transition"},t[264]||(t[264]=[e("i",{class:"fa fa-check mr-1"},null,-1),c("Approve Selected ")]))])])):i("",!0),y.value?(s(),r("div",Qk,[t[265]||(t[265]=e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"},null,-1)),e("p",{class:u(["text-sm mt-2",b.value?"text-slate-300":"text-slate-600"])},"Memuat data...",2)])):(s(),r("div",Zk,[(s(!0),r(I,null,K(h.value.slice(0,3),l=>{var U,oe;return s(),r("div",{key:"contra-bon-approval-"+l.id,onClick:me=>_.value?er(l.id):Xs(l.id),class:u(["p-3 rounded-lg transition-all duration-200",[_.value?"cursor-default":"cursor-pointer hover:scale-105",b.value?"bg-slate-700/50 hover:bg-slate-600/50":"bg-blue-50 hover:bg-blue-100",f.value.has(l.id)?"ring-2 ring-blue-500":""]])},[e("div",e_,[e("div",t_,[_.value?(s(),r("input",{key:0,type:"checkbox",checked:f.value.has(l.id),onClick:Q(me=>er(l.id),["stop"]),class:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"},null,8,a_)):i("",!0),e("div",s_,[e("div",{class:u(["font-semibold text-sm",b.value?"text-white":"text-slate-800"])},a(l.number),3),e("div",{class:u(["text-xs",b.value?"text-slate-300":"text-slate-600"])},a(((U=l.supplier)==null?void 0:U.name)||"Unknown Supplier"),3),e("div",{class:u(["text-xs flex flex-wrap gap-1 mt-1",b.value?"text-slate-400":"text-slate-500"])},[t[266]||(t[266]=e("i",{class:"fa fa-tag mr-1 text-blue-600"},null,-1)),l.source_types&&l.source_types.length>0?(s(!0),r(I,{key:0},K(l.source_types,me=>(s(),r("span",{key:me,class:u([{"bg-blue-100 text-blue-700 border border-blue-300":me==="PR Foods","bg-green-100 text-green-700 border border-green-300":me==="RO Supplier","bg-purple-100 text-purple-700 border border-purple-300":me==="Retail Food","bg-orange-100 text-orange-700 border border-orange-300":me==="Warehouse Retail Food","bg-gray-100 text-gray-700 border border-gray-300":me==="Unknown"},"px-1.5 py-0.5 rounded-full text-xs font-semibold"])},a(me==="PR Foods"?"PRF":me==="Retail Food"?"RF":me==="Warehouse Retail Food"?"RWF":me),3))),128)):(s(),r("span",r_,a(l.source_type_display||"N/A"),1))],2),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])}," Rp "+a(new Intl.NumberFormat("id-ID").format(l.total_amount)),3),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},[t[267]||(t[267]=e("i",{class:"fa fa-user mr-1 text-blue-500"},null,-1)),c(a((oe=l.creator)==null?void 0:oe.nama_lengkap),1)],2),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},a(gt(l.date)),3)])]),e("div",l_,[t[268]||(t[268]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(l.approver_name||l.approval_level_display),1)])])],10,Xk)}),128)),h.value.length>3?(s(),r("div",o_,[e("button",{onClick:wl,class:"text-sm text-blue-500 hover:text-blue-700 font-medium"}," Lihat "+a(h.value.length-3)+" Contra Bon lainnya... ",1)])):i("",!0)]))],2)])):i("",!0),se.value.length>0?(s(),r("div",n_,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl",b.value?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",i_,[e("div",d_,[t[270]||(t[270]=e("div",{class:"w-3 h-3 rounded-full bg-purple-500 animate-pulse"},null,-1)),e("h3",{class:u(["text-lg font-bold",b.value?"text-white":"text-slate-800"])},t[269]||(t[269]=[e("i",{class:"fa fa-recycle mr-2 text-purple-500"},null,-1),c(" Category Cost Outlet Approval ")]),2)]),e("div",u_,a(se.value.length),1)]),W.value?(s(),r("div",c_,[t[271]||(t[271]=e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-purple-500"},null,-1)),e("p",{class:u(["text-sm mt-2",b.value?"text-slate-300":"text-slate-600"])},"Memuat data...",2)])):(s(),r("div",g_,[(s(!0),r(I,null,K(se.value.slice(0,3),l=>(s(),r("div",{key:"category-cost-approval-"+l.id,onClick:U=>Qs(l.id),class:u(["p-3 rounded-lg cursor-pointer transition-all duration-200 hover:scale-105",b.value?"bg-slate-700/50 hover:bg-slate-600/50":"bg-purple-50 hover:bg-purple-100"])},[e("div",p_,[e("div",m_,[e("div",{class:u(["font-semibold text-sm",b.value?"text-white":"text-slate-800"])},a(l.number||"N/A"),3),e("div",{class:u(["text-xs",b.value?"text-slate-300":"text-slate-600"])},a($a(l.type)),3),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},[t[272]||(t[272]=e("i",{class:"fa fa-map-marker-alt mr-1 text-blue-500"},null,-1)),c(a(l.outlet_name),1)],2),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},[t[273]||(t[273]=e("i",{class:"fa fa-user mr-1 text-blue-500"},null,-1)),c(a(l.creator_name),1)],2),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},a(gt(l.date)),3)]),e("div",v_,[t[274]||(t[274]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(l.approver_name||"Approval"),1)])])],10,x_))),128)),se.value.length>3?(s(),r("div",f_,[e("button",{onClick:yl,class:"text-sm text-purple-500 hover:text-purple-700 font-medium"}," Lihat "+a(se.value.length-3)+" lainnya... ",1)])):i("",!0)]))],2)])):i("",!0),Rs.value>0?(s(),r("div",y_,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl",b.value?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",b_,[e("div",h_,[t[276]||(t[276]=e("div",{class:"w-3 h-3 rounded-full bg-teal-500 animate-pulse"},null,-1)),e("h3",{class:u(["text-lg font-bold",b.value?"text-white":"text-slate-800"])},t[275]||(t[275]=[e("i",{class:"fa fa-adjust mr-2 text-teal-500"},null,-1),c(" Outlet Stock Adjustment Approval ")]),2)]),e("div",k_,a(Rs.value),1)]),pt.value?(s(),r("div",__,[t[277]||(t[277]=e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-teal-500"},null,-1)),e("p",{class:u(["text-sm mt-2",b.value?"text-slate-300":"text-slate-600"])},"Memuat data...",2)])):(s(),r("div",w_,[(s(!0),r(I,null,K(g.value.slice(0,3),l=>(s(),r("div",{key:"stock-adj-approval-"+l.id,onClick:U=>Ul(l.id),class:u(["p-3 rounded-lg cursor-pointer transition-all duration-200 hover:scale-105",b.value?"bg-slate-700/50 hover:bg-slate-600/50":"bg-teal-50 hover:bg-teal-100"])},[e("div",B_,[e("div",$_,[e("div",{class:u(["font-semibold text-sm",b.value?"text-white":"text-slate-800"])},a(l.number),3),e("div",{class:u(["text-xs",b.value?"text-slate-300":"text-slate-600"])},a(l.type==="in"?"Stock In":"Stock Out"),3),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},[t[278]||(t[278]=e("i",{class:"fa fa-map-marker-alt mr-1 text-blue-500"},null,-1)),c(a(l.nama_outlet),1)],2),l.warehouse_outlet_name?(s(),r("div",{key:0,class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},[t[279]||(t[279]=e("i",{class:"fa fa-warehouse mr-1 text-blue-500"},null,-1)),c(a(l.warehouse_outlet_name),1)],2)):i("",!0),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},[t[280]||(t[280]=e("i",{class:"fa fa-user mr-1 text-blue-500"},null,-1)),c(a(l.creator_name),1)],2),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},a(gt(l.date)),3)]),e("div",N_,[t[281]||(t[281]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(l.approver_name||"Approval"),1)])])],10,C_))),128)),g.value.length>3?(s(),r("div",D_,[e("button",A_," Lihat "+a(g.value.length-3)+" lainnya... ",1)])):i("",!0)]))],2)])):i("",!0),Ms.value>0?(s(),r("div",S_,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl",b.value?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",j_,[e("div",T_,[t[283]||(t[283]=e("div",{class:"w-3 h-3 rounded-full bg-indigo-500 animate-pulse"},null,-1)),e("h3",{class:u(["text-lg font-bold",b.value?"text-white":"text-slate-800"])},t[282]||(t[282]=[e("i",{class:"fa fa-warehouse mr-2 text-indigo-500"},null,-1),c(" Warehouse Stock Adjustment Approval ")]),2)]),e("div",P_,a(Ms.value),1)]),Nt.value?(s(),r("div",V_,[t[284]||(t[284]=e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-500"},null,-1)),e("p",{class:u(["text-sm mt-2",b.value?"text-slate-300":"text-slate-600"])},"Memuat data...",2)])):(s(),r("div",E_,[(s(!0),r(I,null,K(kt.value.slice(0,3),l=>{var U,oe;return s(),r("div",{key:"warehouse-adj-approval-"+l.id,onClick:me=>Ys(l.id),class:u(["p-3 rounded-lg cursor-pointer transition-all duration-200 hover:scale-105",b.value?"bg-slate-700/50 hover:bg-slate-600/50":"bg-indigo-50 hover:bg-indigo-100"])},[e("div",M_,[e("div",I_,[e("div",{class:u(["font-semibold text-sm",b.value?"text-white":"text-slate-800"])},a(l.number),3),e("div",{class:u(["text-xs",b.value?"text-slate-300":"text-slate-600"])},a(l.type==="in"?"Stock In":"Stock Out"),3),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},[t[285]||(t[285]=e("i",{class:"fa fa-warehouse mr-1 text-blue-500"},null,-1)),c(a(((U=l.warehouse)==null?void 0:U.name)||"N/A"),1)],2),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},[t[286]||(t[286]=e("i",{class:"fa fa-user mr-1 text-blue-500"},null,-1)),c(a(((oe=l.creator)==null?void 0:oe.nama_lengkap)||"N/A"),1)],2),e("div",{class:u(["text-xs",b.value?"text-slate-400":"text-slate-500"])},a(gt(l.date)),3)]),e("div",O_,[t[287]||(t[287]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(l.approver_name||"Approval"),1)])])],10,R_)}),128)),kt.value.length>3?(s(),r("div",F_,[e("button",{onClick:Yl,class:"text-sm text-indigo-500 hover:text-indigo-700 font-medium"}," Lihat "+a(kt.value.length-3)+" lainnya... ",1)])):i("",!0)]))],2)])):i("",!0),e("div",L_,[e("div",q_,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 hover:shadow-3xl flex-shrink-0",b.value?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",U_,[Qe(dn,{date:J.value,class:"scale-100 md:scale-110 animate-slide-in"},null,8,["date"])])],2),T.value.city&&T.value.code?(s(),r("div",{key:0,class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 transition-all duration-500 animate-fade-in hover:shadow-3xl flex-shrink-0",b.value?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[e("div",z_,[e("div",G_,[Qe(Od,{code:T.value.code},null,8,["code"])]),e("div",{class:u(["text-base sm:text-lg font-semibold",b.value?"text-white":"text-slate-800"])},a(T.value.city),3),e("div",{class:u(["text-xs sm:text-sm",b.value?"text-slate-300":"text-slate-600"])},a(T.value.temp)+" - "+a(T.value.desc),3)])],2)):i("",!0)]),e("div",W_,[e("div",K_,[Qe(gi,{"is-night":b.value},null,8,["is-night"])])]),e("div",H_,[e("div",J_,[Qe(ld,{"is-night":b.value},null,8,["is-night"])])]),e("div",Y_,[e("div",Q_,[Qe(Cd,{"is-night":b.value},null,8,["is-night"])])]),e("div",Z_,[e("div",{class:u(["backdrop-blur-md rounded-2xl shadow-2xl border p-4 w-full overflow-y-auto transition-all duration-500 hover:shadow-3xl",b.value?"bg-slate-800/90 border-slate-600/50":"bg-white/90 border-white/20"])},[Qe(lu,{"is-night":b.value,onShowAll:Do},null,8,["is-night"])],2)])])])],2),P.value&&D.value?(s(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[18]||(t[18]=l=>P.value=!1)},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-lg mx-4 max-h-[90vh] overflow-hidden",onClick:t[17]||(t[17]=Q(()=>{},["stop"]))},[e("div",X_,[t[289]||(t[289]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"}," Detail Permohonan Izin/Cuti ",-1)),e("button",{onClick:t[11]||(t[11]=l=>P.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[288]||(t[288]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),e("div",e2,[e("div",t2,[e("div",a2,[t[290]||(t[290]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Karyawan",-1)),e("div",s2,a(D.value.user.nama_lengkap),1),e("div",r2,a(((x=D.value.user.jabatan)==null?void 0:x.nama_jabatan)||"N/A"),1)]),e("div",l2,[e("div",null,[t[291]||(t[291]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Jenis Izin/Cuti",-1)),e("div",o2,a(D.value.leave_type.name),1)]),e("div",null,[t[292]||(t[292]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Durasi",-1)),e("div",n2,a(D.value.duration_text),1)])]),e("div",i2,[e("div",null,[t[293]||(t[293]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Tanggal Mulai",-1)),e("div",d2,a(new Date(D.value.date_from).toLocaleDateString("id-ID")),1)]),e("div",null,[t[294]||(t[294]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Tanggal Selesai",-1)),e("div",u2,a(new Date(D.value.date_to).toLocaleDateString("id-ID")),1)])]),e("div",null,[t[295]||(t[295]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Alasan",-1)),e("div",c2,a(D.value.reason),1)]),D.value.document_paths&&D.value.document_paths.length>0||D.value.document_path?(s(),r("div",g2,[t[299]||(t[299]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Dokumen Pendukung",-1)),D.value.document_paths&&D.value.document_paths.length>0?(s(),r("div",x2,[(s(!0),r(I,null,K(D.value.document_paths,(l,U)=>(s(),r("div",{key:U,class:"relative group"},[$o(l)?(s(),r("div",{key:0,class:"relative cursor-pointer",onClick:oe=>ys(`/storage/${l}`,D.value.document_paths)},[e("img",{src:`/storage/${l}`,alt:`Document ${U+1}`,class:"w-full h-32 object-cover rounded-lg border border-gray-300 dark:border-gray-600 hover:opacity-90 transition-opacity"},null,8,m2),t[296]||(t[296]=e("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all rounded-lg flex items-center justify-center pointer-events-none"},[e("i",{class:"fa-solid fa-search-plus text-white opacity-0 group-hover:opacity-100 transition-opacity"})],-1))],8,p2)):(s(),r("div",v2,[e("a",{href:`/storage/${l}`,target:"_blank",class:"text-center text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"},t[297]||(t[297]=[e("i",{class:"fa-solid fa-file-pdf text-2xl mb-2"},null,-1),e("div",{class:"text-xs"},"Lihat Dokumen",-1)]),8,f2)]))]))),128))])):D.value.document_path?(s(),r("div",y2,[e("a",{href:`/storage/${D.value.document_path}`,target:"_blank",class:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"},t[298]||(t[298]=[e("i",{class:"fa-solid fa-file-pdf mr-1"},null,-1),c(" Lihat Dokumen ")]),8,b2)])):i("",!0)])):i("",!0),D.value.status==="approved"||D.value.hrd_status==="approved"?(s(),r("div",h2,[t[304]||(t[304]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Informasi Approval",-1)),e("div",k2,[D.value.status==="approved"?(s(),r("div",_2,[e("div",w2,[t[300]||(t[300]=e("i",{class:"fa-solid fa-check-circle mr-1"},null,-1)),t[301]||(t[301]=c(" Disetujui oleh Atasan: ")),e("strong",null,a((B=D.value.approver)==null?void 0:B.nama_lengkap),1)]),e("div",C2,a(D.value.approved_at?new Date(D.value.approved_at).toLocaleString("id-ID"):""),1),D.value.approval_notes?(s(),r("div",B2," Catatan: "+a(D.value.approval_notes),1)):i("",!0)])):i("",!0),D.value.hrd_status==="approved"?(s(),r("div",$2,[e("div",N2,[t[302]||(t[302]=e("i",{class:"fa-solid fa-check-circle mr-1"},null,-1)),t[303]||(t[303]=c(" Disetujui oleh HRD: ")),e("strong",null,a((S=D.value.hrd_approver)==null?void 0:S.nama_lengkap),1)]),e("div",D2,a(D.value.hrd_approved_at?new Date(D.value.hrd_approved_at).toLocaleString("id-ID"):""),1),D.value.hrd_approval_notes?(s(),r("div",A2," Catatan: "+a(D.value.hrd_approval_notes),1)):i("",!0)])):i("",!0)])])):i("",!0),D.value.status==="rejected"||D.value.hrd_status==="rejected"?(s(),r("div",S2,[t[309]||(t[309]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Informasi Penolakan",-1)),e("div",j2,[D.value.status==="rejected"?(s(),r("div",T2,[e("div",P2,[t[305]||(t[305]=e("i",{class:"fa-solid fa-times-circle mr-1"},null,-1)),t[306]||(t[306]=c(" Ditolak oleh Atasan: ")),e("strong",null,a((G=D.value.approver)==null?void 0:G.nama_lengkap),1)]),e("div",V2,a(D.value.rejected_at?new Date(D.value.rejected_at).toLocaleString("id-ID"):""),1),D.value.approval_notes?(s(),r("div",E2," Alasan: "+a(D.value.approval_notes),1)):i("",!0)])):i("",!0),D.value.hrd_status==="rejected"?(s(),r("div",R2,[e("div",M2,[t[307]||(t[307]=e("i",{class:"fa-solid fa-times-circle mr-1"},null,-1)),t[308]||(t[308]=c(" Ditolak oleh HRD: ")),e("strong",null,a((X=D.value.hrd_approver)==null?void 0:X.nama_lengkap),1)]),e("div",I2,a(D.value.hrd_rejected_at?new Date(D.value.hrd_rejected_at).toLocaleString("id-ID"):""),1),D.value.hrd_approval_notes?(s(),r("div",O2," Alasan: "+a(D.value.hrd_approval_notes),1)):i("",!0)])):i("",!0)])])):i("",!0)])]),e("div",F2,[e("div",L2,[Le(te).division_id===6&&D.value.status==="approved"&&D.value.hrd_status==="pending"?(s(),r(I,{key:0},[e("button",{onClick:t[12]||(t[12]=l=>xr(D.value.id)),class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors"}," Tolak HRD "),e("button",{onClick:t[13]||(t[13]=l=>Co(D.value.id)),class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors"}," Setujui HRD ")],64)):D.value.status==="pending"?(s(),r(I,{key:1},[e("button",{onClick:t[14]||(t[14]=l=>gr(D.value.id)),class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors"}," Tolak "),e("button",{onClick:t[15]||(t[15]=l=>wo(D.value.id)),class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors"}," Setujui ")],64)):i("",!0),e("button",{onClick:t[16]||(t[16]=l=>P.value=!1),class:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors"}," Tutup ")])])])])):i("",!0),ee.value&&O.value?(s(),r("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[26]||(t[26]=l=>ee.value=!1)},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",onClick:t[25]||(t[25]=Q(()=>{},["stop"]))},[e("div",q2,[e("div",U2,[t[310]||(t[310]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-shopping-cart mr-2 text-green-500"}),c(" Detail Purchase Requisition ")],-1)),O.value.mode?(s(),r("span",{key:0,class:u(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",Hs(O.value.mode)])},a(Ks(O.value.mode)),3)):(s(),r("span",z2," Legacy Data "))]),e("button",{onClick:t[19]||(t[19]=l=>ee.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[311]||(t[311]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),e("div",G2,[e("div",W2,[t[324]||(t[324]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Informasi Dasar",-1)),e("div",K2,[e("div",null,[t[312]||(t[312]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"PR Number",-1)),e("div",H2,a(O.value.pr_number),1)]),e("div",null,[t[313]||(t[313]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Status",-1)),e("span",J2,a(O.value.status),1)]),e("div",null,[t[314]||(t[314]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Title",-1)),e("div",Y2,a(O.value.title),1)]),e("div",null,[t[315]||(t[315]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Division",-1)),e("div",Q2,a((je=O.value.division)==null?void 0:je.nama_divisi),1)]),!O.value.mode||!["pr_ops","purchase_payment","travel_application"].includes(O.value.mode)?(s(),r("div",Z2,[t[316]||(t[316]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Category",-1)),e("div",X2,[O.value.category?(s(),r("span",ew,[O.value.category.division?(s(),r("span",tw,"["+a(O.value.category.division)+"] ",1)):i("",!0),c(" "+a(O.value.category.name),1)])):(s(),r("span",aw,"-"))])])):i("",!0),!O.value.mode||!["pr_ops","purchase_payment","travel_application"].includes(O.value.mode)?(s(),r("div",sw,[t[317]||(t[317]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Outlet",-1)),e("div",rw,a(((Ie=O.value.outlet)==null?void 0:Ie.nama_outlet)||"-"),1)])):i("",!0),e("div",null,[t[318]||(t[318]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Amount",-1)),e("div",lw," Rp "+a(new Intl.NumberFormat("id-ID").format(O.value.amount)),1)]),e("div",null,[t[320]||(t[320]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Tanggal Dibuat",-1)),e("div",ow,[t[319]||(t[319]=e("i",{class:"fa fa-calendar mr-1 text-gray-400"},null,-1)),c(" "+a(gt(O.value.created_at)),1)])]),e("div",null,[t[322]||(t[322]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Created By",-1)),e("div",nw,[t[321]||(t[321]=e("i",{class:"fa fa-user mr-1 text-gray-400"},null,-1)),c(" "+a((($e=O.value.creator)==null?void 0:$e.nama_lengkap)||O.value.created_by_name||"-"),1)])])]),e("div",iw,[t[323]||(t[323]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Description",-1)),e("div",dw,a(O.value.description),1)])]),H.value&&O.value&&O.value.mode!=="kasbon"?(s(),r("div",uw,[e("h4",cw,[t[325]||(t[325]=e("i",{class:"fa fa-chart-pie mr-2 text-blue-500"},null,-1)),c(" "+a(H.value.budget_type==="PER_OUTLET"?"Informasi Budget Outlet":"Informasi Budget Category")+" - "+a(ns(H.value.current_month))+" "+a(H.value.current_year)+" ",1),e("span",gw," ("+a(H.value.budget_type==="PER_OUTLET"?"Per Outlet":"Global")+") ",1)]),H.value.outlet_info&&H.value.outlet_used_amount!==void 0?(s(),r("div",xw,[e("div",pw,[e("p",mw,[t[326]||(t[326]=e("i",{class:"fa fa-store mr-2"},null,-1)),t[327]||(t[327]=e("strong",null,"Outlet:",-1)),c(" "+a(H.value.outlet_info.name),1)])]),e("div",vw,[t[328]||(t[328]=e("div",{class:"text-xs font-medium text-purple-600 dark:text-purple-400 mb-1"},[e("i",{class:"fa fa-chart-bar mr-1"}),c(" Budget Terpakai oleh Outlet Ini ")],-1)),e("div",fw," Rp "+a(new Intl.NumberFormat("id-ID").format(H.value.outlet_used_amount||0)),1),e("div",yw," Total penggunaan budget kategori ini oleh outlet "+a(H.value.outlet_info.name)+" di bulan "+a(ns(H.value.current_month))+" "+a(H.value.current_year),1)])])):i("",!0),e("div",bw,[e("div",hw,[e("div",kw,[t[329]||(t[329]=e("i",{class:"fa fa-wallet mr-1"},null,-1)),c(" "+a(H.value.budget_type==="PER_OUTLET"?"Outlet Budget":"Total Budget"),1)]),e("div",_w," Rp "+a(new Intl.NumberFormat("id-ID").format(Pa())),1),H.value.budget_type==="PER_OUTLET"?(s(),r("div",ww," Global: Rp "+a(new Intl.NumberFormat("id-ID").format(H.value.category_budget)),1)):i("",!0)]),e("div",{class:u(["bg-white dark:bg-gray-800 p-4 rounded-lg border-2",Ft()<0?"border-red-300 dark:border-red-600":"border-green-300 dark:border-green-600"])},[e("div",{class:u(["text-sm font-medium mb-1",Ft()<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"])},t[330]||(t[330]=[e("i",{class:"fa fa-coins mr-1"},null,-1),c(" Sisa Budget Real ")]),2),e("div",{class:u(["text-xl font-bold",Ft()<0?"text-red-800 dark:text-red-200":"text-green-800 dark:text-green-200"])}," Rp "+a(new Intl.NumberFormat("id-ID").format(Ft())),3),e("div",Cw,[t[331]||(t[331]=c(" (Budget - Approved - Unapproved) ")),H.value.retail_non_food_approved||H.value.retail_non_food_pending?(s(),r("br",Bw)):i("",!0),H.value.retail_non_food_approved||H.value.retail_non_food_pending?(s(),r("span",$w," Termasuk Purchase Requisition & Retail Non Food ")):i("",!0)])],2),e("div",Nw,[t[332]||(t[332]=e("div",{class:"text-sm font-medium text-orange-600 dark:text-orange-400 mb-1"},[e("i",{class:"fa fa-chart-line mr-1"}),c(" Budget Usage ")],-1)),e("div",Dw,a(Math.round(rr()))+"% ",1),e("div",Aw,[e("div",{class:u(["h-2 rounded-full transition-all duration-300",sr(is(),Pa())]),style:ht({width:Math.min(rr(),100)+"%"})},null,6)])])]),e("div",Sw,[t[342]||(t[342]=e("h5",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"},[e("i",{class:"fa fa-list-ul mr-2"}),c(" Breakdown Budget ")],-1)),e("div",jw,[e("div",Tw,[t[333]||(t[333]=e("div",{class:"flex items-center"},[e("i",{class:"fa fa-check-circle text-green-600 dark:text-green-400 mr-2"}),e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Sudah Di-Approved")],-1)),e("div",Pw,[e("div",Vw," Rp "+a(new Intl.NumberFormat("id-ID").format(H.value.approved_amount||0)),1),H.value.retail_non_food_approved?(s(),r("div",Ew," (Termasuk Retail Non Food) ")):i("",!0)])]),e("div",Rw,[t[334]||(t[334]=e("div",{class:"flex items-center"},[e("i",{class:"fa fa-clock text-yellow-600 dark:text-yellow-400 mr-2"}),e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Belum Di-Approved")],-1)),e("div",Mw,[e("div",Iw," Rp "+a(new Intl.NumberFormat("id-ID").format(H.value.unapproved_amount||0)),1),H.value.retail_non_food_pending?(s(),r("div",Ow," (Termasuk Retail Non Food) ")):i("",!0)])]),H.value.retail_non_food_approved?(s(),r("div",Fw,[t[335]||(t[335]=e("div",{class:"flex items-center"},[e("i",{class:"fa fa-store text-teal-600 dark:text-teal-400 mr-2"}),e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Retail Non Food (Approved)")],-1)),e("div",Lw,[e("div",qw," Rp "+a(new Intl.NumberFormat("id-ID").format(H.value.retail_non_food_approved||0)),1)])])):i("",!0),H.value.retail_non_food_pending?(s(),r("div",Uw,[t[336]||(t[336]=e("div",{class:"flex items-center"},[e("i",{class:"fa fa-store text-amber-600 dark:text-amber-400 mr-2"}),e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Retail Non Food (Pending)")],-1)),e("div",zw,[e("div",Gw," Rp "+a(new Intl.NumberFormat("id-ID").format(H.value.retail_non_food_pending||0)),1)])])):i("",!0),e("div",Ww,[t[337]||(t[337]=e("div",{class:"flex items-center"},[e("i",{class:"fa fa-shopping-cart text-blue-600 dark:text-blue-400 mr-2"}),e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Sudah Dibuat PO")],-1)),e("div",Kw,[e("div",Hw," Rp "+a(new Intl.NumberFormat("id-ID").format(H.value.po_created_amount||0)),1)])]),e("div",Jw,[t[338]||(t[338]=e("div",{class:"flex items-center"},[e("i",{class:"fa fa-check-double text-emerald-600 dark:text-emerald-400 mr-2"}),e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Sudah Di-Bayar")],-1)),e("div",Yw,[e("div",Qw," Rp "+a(new Intl.NumberFormat("id-ID").format(H.value.paid_amount||0)),1)])]),e("div",Zw,[t[340]||(t[340]=e("div",{class:"flex items-center"},[e("i",{class:"fa fa-exclamation-circle text-orange-600 dark:text-orange-400 mr-2"}),e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Belum Di-Bayar")],-1)),e("div",Xw,[e("div",e5," Rp "+a(new Intl.NumberFormat("id-ID").format(H.value.unpaid_amount||0)),1),t[339]||(t[339]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"}," (PO sudah dibuat) ",-1))])]),e("div",t5,[t[341]||(t[341]=e("div",{class:"flex items-center"},[e("i",{class:"fa fa-chart-bar text-purple-600 dark:text-purple-400 mr-2"}),e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Total Terpakai Bulan Ini")],-1)),e("div",a5,[e("div",s5," Rp "+a(new Intl.NumberFormat("id-ID").format(is())),1)])])])]),H.value.breakdown?(s(),r("div",r5,[t[349]||(t[349]=e("h5",{class:"text-sm font-semibold text-gray-800 dark:text-white mb-3 flex items-center gap-2"},[e("i",{class:"fa fa-list-ul text-blue-500"}),c("Budget Breakdown Detail ")],-1)),e("div",l5,[e("div",o5,[t[343]||(t[343]=e("p",{class:"text-blue-600 dark:text-blue-400 font-medium text-sm mb-1"},"PR",-1)),e("p",n5,a(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(H.value.breakdown.pr_total||0)),1),t[344]||(t[344]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},[c("Total PR items"),e("br"),c("yang sudah dibuat")],-1))]),e("div",i5,[t[345]||(t[345]=e("p",{class:"text-blue-600 dark:text-blue-400 font-medium text-sm mb-1"},"PO",-1)),e("p",d5,a(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(H.value.breakdown.po_total||0)),1),t[346]||(t[346]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},[c("Total PO items"),e("br"),c("yang sudah dibuat")],-1))]),e("div",u5,[t[347]||(t[347]=e("p",{class:"text-purple-600 dark:text-purple-400 font-medium text-sm mb-1"},"Retail Non Food",-1)),e("p",c5,a(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(H.value.breakdown.retail_non_food||0)),1),t[348]||(t[348]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Status: Approved",-1))])])])):i("",!0),Ft()<0?(s(),r("div",g5,[t[350]||(t[350]=e("i",{class:"fa fa-exclamation-triangle mr-2"},null,-1)),t[351]||(t[351]=e("strong",null,"Budget Exceeded!",-1)),H.value.budget_type==="PER_OUTLET"?(s(),r("span",x5," This outlet has exceeded its monthly budget limit. ")):(s(),r("span",p5," This category has exceeded its monthly budget limit. "))])):Ft()<Pa()*.1?(s(),r("div",m5,[t[352]||(t[352]=e("i",{class:"fa fa-exclamation-circle mr-2"},null,-1)),t[353]||(t[353]=e("strong",null,"Budget Warning!",-1)),c(" Only Rp "+a(new Intl.NumberFormat("id-ID").format(Ft()))+" remaining. ",1)])):i("",!0)])):i("",!0),O.value.mode==="travel_application"?(s(),r("div",v5,[t[359]||(t[359]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},[e("i",{class:"fa fa-plane mr-2 text-purple-500"}),c(" Informasi Perjalanan Dinas ")],-1)),e("div",f5,[xe.value&&xe.value.travel_outlets&&xe.value.travel_outlets.length>0?(s(),r("div",y5,[t[355]||(t[355]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Outlet Tujuan Perjalanan Dinas",-1)),e("div",b5,[(s(!0),r(I,null,K(xe.value.travel_outlets,l=>(s(),r("span",{key:l.id,class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200"},[t[354]||(t[354]=e("i",{class:"fa fa-store mr-2"},null,-1)),c(" "+a(l.name),1)]))),128))])])):i("",!0),xe.value&&xe.value.travel_agenda?(s(),r("div",h5,[t[356]||(t[356]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[e("i",{class:"fa fa-calendar-check mr-2 text-purple-500"}),c(" Agenda Kerja ")],-1)),e("div",k5,a(xe.value.travel_agenda),1)])):O.value.description&&!xe.value?(s(),r("div",_5,[t[357]||(t[357]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[e("i",{class:"fa fa-calendar-check mr-2 text-purple-500"}),c(" Agenda Kerja ")],-1)),e("div",w5,a(O.value.description),1)])):i("",!0),xe.value&&xe.value.travel_notes?(s(),r("div",C5,[t[358]||(t[358]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[e("i",{class:"fa fa-sticky-note mr-2 text-purple-500"}),c(" Notes ")],-1)),e("div",B5,a(xe.value.travel_notes),1)])):i("",!0)])])):i("",!0),O.value.mode==="kasbon"&&xe.value?(s(),r("div",$5,[t[362]||(t[362]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},[e("i",{class:"fa fa-money-bill-wave mr-2 text-orange-500"}),c(" Informasi Kasbon ")],-1)),e("div",N5,[e("div",null,[t[360]||(t[360]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Nilai Kasbon",-1)),e("div",D5," Rp "+a(new Intl.NumberFormat("id-ID").format(xe.value.kasbon_amount||0)),1)]),xe.value.kasbon_reason?(s(),r("div",A5,[t[361]||(t[361]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Reason / Alasan Kasbon",-1)),e("div",S5,a(xe.value.kasbon_reason),1)])):i("",!0)])])):i("",!0),O.value.items&&O.value.items.length>0&&(["pr_ops","purchase_payment"].includes(O.value.mode)||!O.value.mode&&O.value.items.some(l=>l.outlet_id||l.category_id))?(s(),r("div",j5,[t[368]||(t[368]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Items",-1)),e("div",T5,[(s(!0),r(I,null,K(Ml(O.value.items),(l,U)=>(s(),r("div",{key:U,class:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-600"},[e("h5",P5,[t[363]||(t[363]=e("i",{class:"fa fa-store mr-2 text-blue-500"},null,-1)),c(" Outlet: "+a(l.outlet_name),1)]),e("div",V5,[(s(!0),r(I,null,K(l.categories,(oe,me)=>(s(),r("div",{key:me,class:"ml-4 border-l-2 border-gray-300 dark:border-gray-600 pl-4"},[e("h6",E5,[t[364]||(t[364]=e("i",{class:"fa fa-tag mr-1"},null,-1)),c(" Category: "+a(oe.category_name),1)]),e("div",R5,[e("table",M5,[t[367]||(t[367]=e("thead",{class:"bg-gray-100 dark:bg-gray-600"},[e("tr",null,[e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Item Name"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Qty"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Unit"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Unit Price"),e("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Subtotal")])],-1)),e("tbody",I5,[(s(!0),r(I,null,K(oe.items,Re=>(s(),r("tr",{key:Re.id},[e("td",O5,[c(a(Re.item_name)+" ",1),Re.item_type==="allowance"&&Re.allowance_recipient_name?(s(),r("div",F5,[t[365]||(t[365]=e("i",{class:"fa fa-user mr-1"},null,-1)),c(" Penerima: "+a(Re.allowance_recipient_name)+" ",1),Re.allowance_account_number?(s(),r("span",L5," | No. Rek: "+a(Re.allowance_account_number),1)):i("",!0)])):i("",!0),Re.item_type==="others"&&Re.others_notes?(s(),r("div",q5,[t[366]||(t[366]=e("i",{class:"fa fa-sticky-note mr-1"},null,-1)),c(" Notes: "+a(Re.others_notes),1)])):i("",!0)]),e("td",U5,a(Re.qty),1),e("td",z5,a(Re.unit),1),e("td",G5,"Rp "+a(new Intl.NumberFormat("id-ID").format(Re.unit_price)),1),e("td",W5,"Rp "+a(new Intl.NumberFormat("id-ID").format(Re.subtotal)),1)]))),128))])])])]))),128))])]))),128))])])):i("",!0),O.value.items&&O.value.items.length>0&&!["pr_ops","purchase_payment","kasbon"].includes(O.value.mode)&&(!O.value.mode||!O.value.items.some(l=>l.outlet_id||l.category_id))?(s(),r("div",K5,[t[372]||(t[372]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Items",-1)),e("div",H5,[e("table",J5,[t[371]||(t[371]=e("thead",{class:"bg-gray-100 dark:bg-gray-600"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Item Name"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Qty"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Unit"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Unit Price"),e("th",{class:"px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Subtotal")])],-1)),e("tbody",Y5,[(s(!0),r(I,null,K(O.value.items,l=>(s(),r("tr",{key:l.id},[e("td",Q5,[c(a(l.item_name)+" ",1),l.item_type==="allowance"&&l.allowance_recipient_name?(s(),r("div",Z5,[t[369]||(t[369]=e("i",{class:"fa fa-user mr-1"},null,-1)),c(" Penerima: "+a(l.allowance_recipient_name)+" ",1),l.allowance_account_number?(s(),r("span",X5," | No. Rek: "+a(l.allowance_account_number),1)):i("",!0)])):i("",!0),l.item_type==="others"&&l.others_notes?(s(),r("div",e3,[t[370]||(t[370]=e("i",{class:"fa fa-sticky-note mr-1"},null,-1)),c(" Notes: "+a(l.others_notes),1)])):i("",!0)]),e("td",t3,a(l.qty),1),e("td",a3,a(l.unit),1),e("td",s3,"Rp "+a(new Intl.NumberFormat("id-ID").format(l.unit_price)),1),e("td",r3,"Rp "+a(new Intl.NumberFormat("id-ID").format(l.subtotal)),1)]))),128))])])])])):i("",!0),O.value.attachments&&O.value.attachments.length>0&&(["pr_ops","purchase_payment"].includes(O.value.mode)||!O.value.mode&&O.value.attachments.some(l=>l.outlet_id))?(s(),r("div",l3,[e("h4",o3,[t[373]||(t[373]=e("i",{class:"fa fa-paperclip mr-2 text-blue-500"},null,-1)),t[374]||(t[374]=c(" Attachments ")),e("span",n3,a(O.value.attachments.length),1)]),e("div",i3,[(s(!0),r(I,null,K(Il(O.value.attachments),(l,U)=>(s(),r("div",{key:U,class:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-600"},[e("h5",d3,[t[375]||(t[375]=e("i",{class:"fa fa-store mr-2 text-blue-500"},null,-1)),c(" Outlet: "+a(l.outlet_name)+" ",1),e("span",u3,a(l.attachments.length),1)]),e("div",c3,[(s(!0),r(I,null,K(l.attachments,oe=>(s(),r("div",{key:oe.id,class:"relative"},[Na(oe.file_name)?(s(),r("div",{key:0,onClick:me=>Aa(oe),class:"cursor-pointer group"},[e("img",{src:`/purchase-requisitions/attachments/${oe.id}/download`,alt:oe.file_name,class:"w-24 h-24 object-cover rounded border-2 border-blue-200 dark:border-blue-700 hover:border-blue-400 dark:hover:border-blue-500 transition-all hover:scale-105 shadow-md",onError:t[20]||(t[20]=me=>Sa(me))},null,40,x3),t[376]||(t[376]=e("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 rounded transition-all flex items-center justify-center"},[e("i",{class:"fa fa-search-plus text-white opacity-0 group-hover:opacity-100 transition-opacity"})],-1)),e("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1 truncate w-24",title:oe.file_name},a(oe.file_name),9,p3),e("div",m3,a(wt(oe.file_size)),1)],8,g3)):(s(),r("a",{key:1,href:`/purchase-requisitions/attachments/${oe.id}/download`,onClick:me=>(oe.file_name,void 0),class:"inline-flex flex-col items-center px-3 py-2 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded text-sm hover:bg-blue-200 dark:hover:bg-blue-800 transition min-w-[120px]"},[e("i",{class:u(Da(oe.file_name)+" text-2xl mb-1")},null,2),e("span",f3,a(oe.file_name),1),e("span",y3,a(wt(oe.file_size)),1)],8,v3))]))),128))])]))),128))])])):i("",!0),O.value.attachments&&O.value.attachments.length>0&&!["pr_ops","purchase_payment"].includes(O.value.mode)&&(!O.value.mode||!O.value.attachments.some(l=>l.outlet_id))?(s(),r("div",b3,[e("h4",h3,[t[377]||(t[377]=e("i",{class:"fa fa-paperclip mr-2 text-blue-500"},null,-1)),t[378]||(t[378]=c(" Attachments ")),e("span",k3,a(O.value.attachments.length),1)]),e("div",_3,[(s(!0),r(I,null,K(O.value.attachments,l=>(s(),r("div",{key:l.id,class:"relative"},[Na(l.file_name)?(s(),r("div",{key:0,onClick:U=>Aa(l),class:"cursor-pointer group"},[e("img",{src:`/purchase-requisitions/attachments/${l.id}/download`,alt:l.file_name,class:"w-24 h-24 object-cover rounded border-2 border-blue-200 dark:border-blue-700 hover:border-blue-400 dark:hover:border-blue-500 transition-all hover:scale-105 shadow-md",onError:t[21]||(t[21]=U=>Sa(U))},null,40,C3),t[379]||(t[379]=e("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 rounded transition-all flex items-center justify-center"},[e("i",{class:"fa fa-search-plus text-white opacity-0 group-hover:opacity-100 transition-opacity"})],-1)),e("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1 truncate w-24",title:l.file_name},a(l.file_name),9,B3),e("div",$3,a(wt(l.file_size)),1)],8,w3)):(s(),r("a",{key:1,href:`/purchase-requisitions/attachments/${l.id}/download`,onClick:U=>(l.file_name,void 0),class:"inline-flex flex-col items-center px-3 py-2 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded text-sm hover:bg-blue-200 dark:hover:bg-blue-800 transition min-w-[120px]"},[e("i",{class:u(Da(l.file_name)+" text-2xl mb-1")},null,2),e("span",D3,a(l.file_name),1),e("span",A3,a(wt(l.file_size)),1)],8,N3))]))),128))])])):i("",!0),O.value.approval_flows&&O.value.approval_flows.length>0?(s(),r("div",S3,[e("h4",j3,[t[380]||(t[380]=e("i",{class:"fa fa-users mr-2 text-blue-500"},null,-1)),t[381]||(t[381]=c(" Approval Flow ")),e("span",T3,a(O.value.approval_flows.length)+" Approver"+a(O.value.approval_flows.length>1?"s":""),1)]),e("div",P3,[(s(!0),r(I,null,K(O.value.approval_flows.sort((l,U)=>(l.approval_level||0)-(U.approval_level||0)),l=>{var U,oe,me,Re,Je;return s(),r("div",{key:l.id,class:u(["flex items-center justify-between p-4 bg-white dark:bg-gray-800 border-2 rounded-lg shadow-sm",mo(l.status)])},[e("div",V3,[e("div",E3,[e("span",{class:u(["inline-flex items-center justify-center w-10 h-10 rounded-full text-sm font-bold",l.status==="APPROVED"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":l.status==="REJECTED"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"])},a(l.approval_level||"?"),3)]),e("div",R3,[e("div",M3,[e("div",I3,a(((U=l.approver)==null?void 0:U.nama_lengkap)||((oe=l.approver)==null?void 0:oe.name)||"Unknown Approver"),1),e("span",{class:u(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",ur(l.status)])},a(l.status),3)]),(me=l.approver)!=null&&me.email?(s(),r("div",O3,[t[382]||(t[382]=e("i",{class:"fa fa-envelope mr-1"},null,-1)),c(a(l.approver.email),1)])):i("",!0),(Je=(Re=l.approver)==null?void 0:Re.jabatan)!=null&&Je.nama_jabatan?(s(),r("div",F3,[t[383]||(t[383]=e("i",{class:"fa fa-briefcase mr-1"},null,-1)),c(a(l.approver.jabatan.nama_jabatan),1)])):i("",!0),l.comments?(s(),r("div",L3,[t[384]||(t[384]=e("i",{class:"fa fa-comment mr-1"},null,-1)),t[385]||(t[385]=e("strong",null,"Comments:",-1)),c(" "+a(l.comments),1)])):i("",!0)])]),e("div",q3,[l.approved_at?(s(),r("div",U3,t[386]||(t[386]=[e("i",{class:"fa fa-check-circle mr-1"},null,-1),c("Approved ")]))):i("",!0),l.approved_at?(s(),r("div",z3,a(new Date(l.approved_at).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"short",day:"numeric"})),1)):i("",!0),l.approved_at?(s(),r("div",G3,a(new Date(l.approved_at).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})),1)):i("",!0),l.rejected_at?(s(),r("div",W3,t[387]||(t[387]=[e("i",{class:"fa fa-times-circle mr-1"},null,-1),c("Rejected ")]))):i("",!0),l.rejected_at?(s(),r("div",K3,a(new Date(l.rejected_at).toLocaleDateString("id-ID",{weekday:"short",year:"numeric",month:"short",day:"numeric"})),1)):i("",!0),l.rejected_at?(s(),r("div",H3,a(new Date(l.rejected_at).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})),1)):i("",!0),l.status==="PENDING"?(s(),r("div",J3,t[388]||(t[388]=[e("i",{class:"fa fa-clock mr-1"},null,-1),c("Menunggu Approval ")]))):i("",!0)])],2)}),128))])])):i("",!0),e("div",Y3,[O.value&&O.value.id?(s(),He(ll,{key:`comment-section-pr-${O.value.id}`,"purchase-requisition-id":O.value.id,"current-user-id":Le(te).id,"unread-count":0,onCommentAdded:or,onCommentUpdated:nr,onCommentDeleted:ir},null,8,["purchase-requisition-id","current-user-id"])):i("",!0)])]),e("div",Q3,[e("button",{onClick:t[22]||(t[22]=l=>ee.value=!1),class:"px-4 py-2 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Tutup "),e("button",{onClick:t[23]||(t[23]=l=>Ll(O.value.id)),class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors"},t[389]||(t[389]=[e("i",{class:"fa fa-check mr-2"},null,-1),c("Approve ")])),e("button",{onClick:t[24]||(t[24]=l=>to(O.value.id)),class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors"},t[390]||(t[390]=[e("i",{class:"fa fa-times mr-2"},null,-1),c("Reject ")]))])])])):i("",!0),re.value&&L.value?(s(),r("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[32]||(t[32]=l=>re.value=!1)},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",onClick:t[31]||(t[31]=Q(()=>{},["stop"]))},[e("div",Z3,[t[392]||(t[392]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-recycle mr-2 text-purple-500"}),c(" Detail Category Cost Outlet ")],-1)),e("button",{onClick:t[27]||(t[27]=l=>re.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[391]||(t[391]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),L.value.header?(s(),r("div",X3,[e("div",e4,[t[400]||(t[400]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Informasi Dasar",-1)),e("div",t4,[e("div",null,[t[393]||(t[393]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Number",-1)),e("div",a4,a(L.value.header.number||"N/A"),1)]),e("div",null,[t[394]||(t[394]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Tipe",-1)),e("div",s4,a($a(L.value.header.type)),1)]),e("div",null,[t[395]||(t[395]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Tanggal",-1)),e("div",r4,a(gt(L.value.header.date)),1)]),e("div",null,[t[396]||(t[396]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Outlet",-1)),e("div",l4,a(L.value.header.outlet_name),1)]),e("div",null,[t[397]||(t[397]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Warehouse Outlet",-1)),e("div",o4,a(L.value.header.warehouse_outlet_name),1)]),e("div",null,[t[398]||(t[398]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Dibuat Oleh",-1)),e("div",n4,a(L.value.header.creator_name),1)])]),L.value.header.notes?(s(),r("div",i4,[t[399]||(t[399]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Catatan",-1)),e("div",d4,a(L.value.header.notes),1)])):i("",!0)]),L.value.details&&L.value.details.length>0?(s(),r("div",u4,[t[402]||(t[402]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Items",-1)),e("div",c4,[e("table",g4,[t[401]||(t[401]=e("thead",{class:"bg-gray-100 dark:bg-gray-600"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Item Name"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Qty"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Unit"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Note")])],-1)),e("tbody",x4,[(s(!0),r(I,null,K(L.value.details,l=>(s(),r("tr",{key:l.id},[e("td",p4,a(l.item_name),1),e("td",m4,a(l.qty),1),e("td",v4,a(l.unit_name),1),e("td",f4,a(l.note||"-"),1)]))),128))])])])])):i("",!0),L.value.approval_flows&&L.value.approval_flows.length>0?(s(),r("div",y4,[t[403]||(t[403]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},[e("i",{class:"fa fa-users mr-2 text-blue-500"}),c(" Approval Flow ")],-1)),e("div",b4,[(s(!0),r(I,null,K(L.value.approval_flows,l=>(s(),r("div",{key:l.id,class:u(["flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border",{"border-green-500":l.status==="APPROVED","border-red-500":l.status==="REJECTED","border-yellow-500":l.status==="PENDING"}])},[e("div",h4,[e("span",k4," Level "+a(l.approval_level),1),e("div",null,[e("div",_4,a(l.approver_name),1),e("div",w4,a(l.approver_email),1),l.approver_jabatan?(s(),r("div",C4,a(l.approver_jabatan),1)):i("",!0)])]),e("div",B4,[e("div",{class:u(["text-sm font-medium",{"text-green-600":l.status==="APPROVED","text-red-600":l.status==="REJECTED","text-yellow-600":l.status==="PENDING"}])},a(l.status),3),l.approved_at?(s(),r("div",$4," Approved: "+a(new Date(l.approved_at).toLocaleDateString("id-ID")),1)):i("",!0),l.rejected_at?(s(),r("div",N4," Rejected: "+a(new Date(l.rejected_at).toLocaleDateString("id-ID")),1)):i("",!0),l.comments?(s(),r("div",D4,a(l.comments),1)):i("",!0)])],2))),128))])])):i("",!0)])):i("",!0),e("div",A4,[e("button",{onClick:t[28]||(t[28]=l=>re.value=!1),class:"px-4 py-2 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Tutup "),e("button",{onClick:t[29]||(t[29]=l=>Zl(L.value.header.id)),class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors"},t[404]||(t[404]=[e("i",{class:"fa fa-check mr-2"},null,-1),c("Approve ")])),e("button",{onClick:t[30]||(t[30]=l=>eo(L.value.header.id)),class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors"},t[405]||(t[405]=[e("i",{class:"fa fa-times mr-2"},null,-1),c("Reject ")]))])])])):i("",!0),q.value?(s(),r("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[50]",onClick:t[40]||(t[40]=l=>q.value=!1)},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-5xl mx-4 max-h-[90vh] overflow-y-auto",onClick:t[39]||(t[39]=Q(()=>{},["stop"]))},[e("div",S4,[t[407]||(t[407]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-recycle mr-2 text-purple-500"}),c(" Semua Category Cost Outlet Pending ")],-1)),e("button",{onClick:t[33]||(t[33]=l=>q.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[406]||(t[406]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),e("div",j4,[e("div",T4,[e("div",null,[t[408]||(t[408]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Cari",-1)),de(e("input",{"onUpdate:modelValue":t[34]||(t[34]=l=>F.value=l),type:"text",placeholder:"No CIU, Outlet, atau Pembuat",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-600 dark:text-gray-100"},null,512),[[Ge,F.value]])]),e("div",null,[t[410]||(t[410]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tipe",-1)),de(e("select",{"onUpdate:modelValue":t[35]||(t[35]=l=>w.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-600 dark:text-gray-100"},t[409]||(t[409]=[e("option",{value:""},"Semua",-1),e("option",{value:"use"},"Use",-1),e("option",{value:"waste"},"Waste",-1)]),512),[[Te,w.value]])]),e("div",null,[t[412]||(t[412]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tanggal",-1)),de(e("select",{"onUpdate:modelValue":t[36]||(t[36]=l=>ce.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-600 dark:text-gray-100"},t[411]||(t[411]=[e("option",{value:""},"Semua",-1),e("option",{value:"today"},"Hari ini",-1),e("option",{value:"week"},"7 hari terakhir",-1),e("option",{value:"month"},"30 hari terakhir",-1)]),512),[[Te,ce.value]])]),e("div",null,[t[414]||(t[414]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Urutkan",-1)),de(e("select",{"onUpdate:modelValue":t[37]||(t[37]=l=>E.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-600 dark:text-gray-100"},t[413]||(t[413]=[e("option",{value:"newest"},"Terbaru",-1),e("option",{value:"oldest"},"Terlama",-1),e("option",{value:"number"},"Nomor CIU",-1)]),512),[[Te,E.value]])])]),e("div",{class:"mt-3"},[e("button",{onClick:bl,class:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 border border-gray-300 dark:border-gray-600 rounded-md px-3 py-1 hover:bg-gray-50 dark:hover:bg-gray-700"},t[415]||(t[415]=[e("i",{class:"fa-solid fa-times mr-1"},null,-1),c("Reset Filter ")]))])]),Z.value?(s(),r("div",P4,t[416]||(t[416]=[e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-purple-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-300"},"Memuat data...",-1)]))):(s(),r("div",V4,[as.value.length===0?(s(),r("div",E4,t[417]||(t[417]=[e("i",{class:"fa-solid fa-check-circle text-4xl text-green-500 mb-2"},null,-1),e("p",{class:"text-gray-600 dark:text-gray-300"},"Tidak ada Category Cost Outlet pending",-1)]))):(s(),r("div",R4,[e("div",M4," Menampilkan "+a(as.value.length)+" dari "+a(_e.value.length)+" Category Cost Outlet ",1),(s(!0),r(I,null,K(as.value,l=>(s(),r("div",{key:"all-category-cost-"+l.id,class:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 transition-colors cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:U=>{Qs(l.id),q.value=!1}},[e("div",O4,[e("div",F4,[e("div",L4,[e("span",q4,a(l.number||"N/A"),1),e("span",{class:u(["text-xs px-2 py-0.5 rounded-full",{"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-200":l.type==="use","bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-200":l.type==="waste"}])},a($a(l.type)),3)]),e("div",U4,[t[418]||(t[418]=e("i",{class:"fa fa-map-marker-alt mr-1 text-blue-500"},null,-1)),c(a(l.outlet_name||"N/A"),1)]),l.warehouse_outlet_name?(s(),r("div",z4,[t[419]||(t[419]=e("i",{class:"fa fa-warehouse mr-1 text-blue-500"},null,-1)),c(a(l.warehouse_outlet_name),1)])):i("",!0),e("div",G4,[t[420]||(t[420]=e("i",{class:"fa fa-user mr-1 text-blue-500"},null,-1)),c(a(l.creator_name||"Unknown"),1)]),l.approver_name?(s(),r("div",W4,[t[421]||(t[421]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(l.approver_name),1)])):i("",!0)]),e("div",K4,a(gt(l.date)),1)])],8,I4))),128))]))])),e("div",H4,[e("button",{onClick:t[38]||(t[38]=l=>q.value=!1),class:"px-4 py-2 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Tutup ")])])])):i("",!0),ot.value&&We.value&&We.value.adjustment?(s(),r("div",{key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[46]||(t[46]=l=>ot.value=!1)},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",onClick:t[45]||(t[45]=Q(()=>{},["stop"]))},[e("div",J4,[t[423]||(t[423]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-adjust mr-2 text-teal-500"}),c(" Detail Outlet Stock Adjustment ")],-1)),e("button",{onClick:t[41]||(t[41]=l=>ot.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[422]||(t[422]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),We.value.adjustment?(s(),r("div",Y4,[e("div",Q4,[t[432]||(t[432]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Informasi Dasar",-1)),e("div",Z4,[e("div",null,[t[424]||(t[424]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Number",-1)),e("div",X4,a(We.value.adjustment.number),1)]),e("div",null,[t[425]||(t[425]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Tanggal",-1)),e("div",e6,a(gt(We.value.adjustment.date)),1)]),e("div",null,[t[426]||(t[426]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Tipe",-1)),e("div",t6,[e("span",{class:u([We.value.adjustment.type==="in"?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 py-1 rounded-full text-xs font-medium"])},a(We.value.adjustment.type==="in"?"Stock In":"Stock Out"),3)])]),e("div",null,[t[427]||(t[427]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Status",-1)),e("span",a6,a(We.value.adjustment.status),1)]),e("div",null,[t[428]||(t[428]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Outlet",-1)),e("div",s6,a(We.value.adjustment.nama_outlet),1)]),e("div",null,[t[429]||(t[429]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Warehouse Outlet",-1)),e("div",r6,a(We.value.adjustment.warehouse_outlet_name),1)]),e("div",null,[t[430]||(t[430]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Dibuat Oleh",-1)),e("div",l6,a(We.value.adjustment.creator_name),1)])]),We.value.adjustment.reason?(s(),r("div",o6,[t[431]||(t[431]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Alasan / Catatan",-1)),e("div",n6,a(We.value.adjustment.reason),1)])):i("",!0)]),We.value.items&&We.value.items.length>0?(s(),r("div",i6,[t[434]||(t[434]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Items",-1)),e("div",d6,[e("table",u6,[t[433]||(t[433]=e("thead",{class:"bg-gray-100 dark:bg-gray-600"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Item Name"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Qty"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Unit"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Note")])],-1)),e("tbody",c6,[(s(!0),r(I,null,K(We.value.items,l=>(s(),r("tr",{key:l.id},[e("td",g6,a(l.item_name),1),e("td",x6,a(l.qty),1),e("td",p6,a(l.unit),1),e("td",m6,a(l.note||"-"),1)]))),128))])])])])):i("",!0),We.value.approval_flows&&We.value.approval_flows.length>0?(s(),r("div",v6,[t[435]||(t[435]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},[e("i",{class:"fa fa-users mr-2 text-blue-500"}),c(" Approval Flow ")],-1)),e("div",f6,[(s(!0),r(I,null,K(We.value.approval_flows,l=>(s(),r("div",{key:l.id,class:u(["flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border",{"border-green-500":l.status==="APPROVED","border-red-500":l.status==="REJECTED","border-yellow-500":l.status==="PENDING"}])},[e("div",y6,[e("span",b6," Level "+a(l.approval_level),1),e("div",null,[e("div",h6,a(l.nama_lengkap),1),e("div",k6,a(l.email),1),l.nama_jabatan?(s(),r("div",_6,a(l.nama_jabatan),1)):i("",!0)])]),e("div",w6,[e("div",{class:u(["text-sm font-medium",{"text-green-600":l.status==="APPROVED","text-red-600":l.status==="REJECTED","text-yellow-600":l.status==="PENDING"}])},a(l.status),3),l.approved_at?(s(),r("div",C6," Approved: "+a(new Date(l.approved_at).toLocaleDateString("id-ID")),1)):i("",!0),l.rejected_at?(s(),r("div",B6," Rejected: "+a(new Date(l.rejected_at).toLocaleDateString("id-ID")),1)):i("",!0),l.comments?(s(),r("div",$6,a(l.comments),1)):i("",!0)])],2))),128))])])):i("",!0)])):i("",!0),e("div",N6,[e("button",{onClick:t[42]||(t[42]=l=>ot.value=!1),class:"px-4 py-2 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Tutup "),e("button",{onClick:t[43]||(t[43]=l=>zl(We.value.adjustment.id)),class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors"},t[436]||(t[436]=[e("i",{class:"fa fa-check mr-2"},null,-1),c("Approve ")])),e("button",{onClick:t[44]||(t[44]=l=>Wl(We.value.adjustment.id)),class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors"},t[437]||(t[437]=[e("i",{class:"fa fa-times mr-2"},null,-1),c("Reject ")]))])])])):i("",!0),Dt.value&&Ke.value&&Ke.value.adjustment?(s(),r("div",{key:5,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[52]||(t[52]=l=>Dt.value=!1)},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",onClick:t[51]||(t[51]=Q(()=>{},["stop"]))},[e("div",D6,[t[439]||(t[439]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-warehouse mr-2 text-indigo-500"}),c(" Detail Warehouse Stock Adjustment ")],-1)),e("button",{onClick:t[47]||(t[47]=l=>Dt.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[438]||(t[438]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),Ke.value.adjustment?(s(),r("div",A6,[e("div",S6,[t[447]||(t[447]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Informasi Dasar",-1)),e("div",j6,[e("div",null,[t[440]||(t[440]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Number",-1)),e("div",T6,a(Ke.value.adjustment.number),1)]),e("div",null,[t[441]||(t[441]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Tanggal",-1)),e("div",P6,a(gt(Ke.value.adjustment.date)),1)]),e("div",null,[t[442]||(t[442]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Tipe",-1)),e("div",V6,[e("span",{class:u([Ke.value.adjustment.type==="in"?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 py-1 rounded-full text-xs font-medium"])},a(Ke.value.adjustment.type==="in"?"Stock In":"Stock Out"),3)])]),e("div",null,[t[443]||(t[443]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Status",-1)),e("span",E6,a(Ke.value.adjustment.status),1)]),e("div",null,[t[444]||(t[444]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Warehouse",-1)),e("div",R6,a(((Fe=Ke.value.adjustment.warehouse)==null?void 0:Fe.name)||"N/A"),1)]),e("div",null,[t[445]||(t[445]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Dibuat Oleh",-1)),e("div",M6,a(((Ue=Ke.value.adjustment.creator)==null?void 0:Ue.nama_lengkap)||"N/A"),1)])]),Ke.value.adjustment.reason?(s(),r("div",I6,[t[446]||(t[446]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Alasan / Catatan",-1)),e("div",O6,a(Ke.value.adjustment.reason),1)])):i("",!0)]),Ke.value.items&&Ke.value.items.length>0?(s(),r("div",F6,[t[449]||(t[449]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Items",-1)),e("div",L6,[e("table",q6,[t[448]||(t[448]=e("thead",{class:"bg-gray-100 dark:bg-gray-600"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Item Name"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Qty"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Unit"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Note")])],-1)),e("tbody",U6,[(s(!0),r(I,null,K(Ke.value.items,l=>{var U;return s(),r("tr",{key:l.id},[e("td",z6,a(((U=l.item)==null?void 0:U.name)||"N/A"),1),e("td",G6,a(l.qty),1),e("td",W6,a(l.unit||"-"),1),e("td",K6,a(l.note||"-"),1)])}),128))])])])])):i("",!0),Ke.value.approvers&&Ke.value.approvers.length>0?(s(),r("div",H6,[t[451]||(t[451]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},[e("i",{class:"fa fa-users mr-2 text-blue-500"}),c(" Riwayat Approval ")],-1)),e("div",J6,[(s(!0),r(I,null,K(Ke.value.approvers,l=>{var U,oe,me;return s(),r("div",{key:l.level,class:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg border border-green-500"},[e("div",Y6,[e("span",Q6," Level "+a(l.level),1),e("div",null,[e("div",Z6,a(l.role),1),e("div",X6,a(((U=l.approver)==null?void 0:U.nama_lengkap)||"N/A"),1),e("div",e8,a(((oe=l.approver)==null?void 0:oe.email)||"N/A"),1),(me=l.approver)!=null&&me.nama_jabatan?(s(),r("div",t8,a(l.approver.nama_jabatan),1)):i("",!0)])]),e("div",a8,[t[450]||(t[450]=e("div",{class:"text-sm font-medium text-green-600"}," APPROVED ",-1)),l.approved_at?(s(),r("div",s8,a(new Date(l.approved_at).toLocaleString("id-ID")),1)):i("",!0),l.note?(s(),r("div",r8,' "'+a(l.note)+'" ',1)):i("",!0)])])}),128))])])):i("",!0)])):i("",!0),e("div",l8,[e("button",{onClick:t[48]||(t[48]=l=>Dt.value=!1),class:"px-4 py-2 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Tutup "),e("button",{onClick:t[49]||(t[49]=l=>Kl(Ke.value.adjustment.id)),class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors"},t[452]||(t[452]=[e("i",{class:"fa fa-check mr-2"},null,-1),c("Approve ")])),e("button",{onClick:t[50]||(t[50]=l=>Jl(Ke.value.adjustment.id)),class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors"},t[453]||(t[453]=[e("i",{class:"fa fa-times mr-2"},null,-1),c("Reject ")]))])])])):i("",!0),Jt.value?(s(),r("div",{key:6,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[59]||(t[59]=l=>Jt.value=!1)},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-6xl mx-4 max-h-[90vh] overflow-y-auto",onClick:t[58]||(t[58]=Q(()=>{},["stop"]))},[e("div",o8,[t[455]||(t[455]=e("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"},[e("i",{class:"fa fa-warehouse mr-2 text-indigo-500"}),c(" Semua Warehouse Stock Adjustment Approval ")],-1)),e("button",{onClick:t[53]||(t[53]=l=>Jt.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[454]||(t[454]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),e("div",n8,[e("div",i8,[e("div",null,[t[456]||(t[456]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Cari",-1)),de(e("input",{"onUpdate:modelValue":t[54]||(t[54]=l=>Yt.value=l),type:"text",placeholder:"No, Warehouse, atau Pembuat",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-600 dark:text-gray-100"},null,512),[[Ge,Yt.value]])]),e("div",null,[t[458]||(t[458]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tipe",-1)),de(e("select",{"onUpdate:modelValue":t[55]||(t[55]=l=>Qt.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-600 dark:text-gray-100"},t[457]||(t[457]=[e("option",{value:""},"Semua",-1),e("option",{value:"in"},"Stock In",-1),e("option",{value:"out"},"Stock Out",-1)]),512),[[Te,Qt.value]])]),e("div",null,[t[460]||(t[460]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tanggal",-1)),de(e("select",{"onUpdate:modelValue":t[56]||(t[56]=l=>At.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-600 dark:text-gray-100"},t[459]||(t[459]=[e("option",{value:""},"Semua",-1),e("option",{value:"today"},"Hari ini",-1),e("option",{value:"week"},"7 hari terakhir",-1),e("option",{value:"month"},"30 hari terakhir",-1)]),512),[[Te,At.value]])]),e("div",null,[t[462]||(t[462]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Urutkan",-1)),de(e("select",{"onUpdate:modelValue":t[57]||(t[57]=l=>Ut.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-600 dark:text-gray-100"},t[461]||(t[461]=[e("option",{value:"newest"},"Terbaru",-1),e("option",{value:"oldest"},"Terlama",-1),e("option",{value:"number"},"Nomor",-1)]),512),[[Te,Ut.value]])])]),e("div",{class:"mt-3"},[e("button",{onClick:Ql,class:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 border border-gray-300 dark:border-gray-600 rounded-md px-3 py-1 hover:bg-gray-50 dark:hover:bg-gray-700"},t[463]||(t[463]=[e("i",{class:"fa-solid fa-times mr-1"},null,-1),c("Reset Filter ")]))])]),Nt.value?(s(),r("div",d8,t[464]||(t[464]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-400"},"Memuat data...",-1)]))):(s(),r("div",u8,[os.value.length===0?(s(),r("div",c8,t[465]||(t[465]=[e("i",{class:"fa fa-inbox text-4xl mb-3"},null,-1),e("p",{class:"text-lg font-medium"},"Tidak ada approval ditemukan",-1)]))):(s(),r("div",g8,[e("div",x8," Menampilkan "+a(os.value.length)+" dari "+a(kt.value.length)+" Warehouse Stock Adjustment ",1),(s(!0),r(I,null,K(os.value,l=>{var U,oe;return s(),r("div",{key:"all-warehouse-adj-"+l.id,onClick:me=>{Ys(l.id),Jt.value=!1},class:"p-4 rounded-lg cursor-pointer transition-all duration-200 hover:scale-[1.02] bg-gray-50 dark:bg-gray-700 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 border border-gray-200 dark:border-gray-600"},[e("div",m8,[e("div",v8,[e("div",f8,a(l.number),1),e("div",y8,[e("div",b8,[t[466]||(t[466]=e("i",{class:"fa fa-tag mr-1 text-indigo-500"},null,-1)),e("span",{class:u(l.type==="in"?"text-green-600 font-medium":"text-red-600 font-medium")},a(l.type==="in"?"Stock In":"Stock Out"),3)]),e("div",h8,[t[467]||(t[467]=e("i",{class:"fa fa-warehouse mr-1 text-blue-500"},null,-1)),c(a(((U=l.warehouse)==null?void 0:U.name)||"N/A"),1)]),e("div",k8,[t[468]||(t[468]=e("i",{class:"fa fa-user mr-1 text-green-500"},null,-1)),c(a(((oe=l.creator)==null?void 0:oe.nama_lengkap)||"N/A"),1)]),e("div",_8,[t[469]||(t[469]=e("i",{class:"fa fa-calendar mr-1 text-purple-500"},null,-1)),c(a(gt(l.date)),1)])])]),e("div",w8,[e("div",C8,[t[470]||(t[470]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(l.approver_name||"Approval"),1)]),e("span",B8,a(l.status),1)])])],8,p8)}),128))]))]))])])):i("",!0),(s(),He(Ze,{to:"body"},[De.value?(s(),r("div",{key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-75",onClick:Zs,style:{"z-index":"99999 !important"}},[e("div",{class:"relative max-w-4xl max-h-full p-4",onClick:t[60]||(t[60]=Q(()=>{},["stop"])),style:{"z-index":"99999"}},[e("button",{onClick:Zs,class:"absolute top-2 right-2 p-2 text-white bg-black bg-opacity-50 rounded-full hover:bg-opacity-75 transition-colors",style:{"z-index":"100000"}},t[471]||(t[471]=[e("i",{class:"fa fa-times text-xl"},null,-1)])),Ne.value?(s(),r("img",{key:0,src:Be.value==="po"?`/po-ops/attachments/${Ne.value.id}/download`:`/purchase-requisitions/attachments/${Ne.value.id}/download`,alt:Ne.value.file_name,class:"max-w-full max-h-full object-contain rounded-lg"},null,8,$8)):i("",!0),e("div",N8,[e("p",D8,a((nt=Ne.value)==null?void 0:nt.file_name),1)])])])):i("",!0)])),(s(),He(Ze,{to:"body"},[ke.value&&R.value?(s(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[10000]",onClick:t[68]||(t[68]=l=>ke.value=!1)},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",onClick:t[67]||(t[67]=Q(()=>{},["stop"]))},[e("div",A8,[t[473]||(t[473]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-file-invoice mr-2 text-orange-500"}),c(" Detail Purchase Order Ops ")],-1)),e("button",{onClick:t[61]||(t[61]=l=>ke.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[472]||(t[472]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),e("div",S8,[e("div",j8,[t[483]||(t[483]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Informasi Dasar",-1)),e("div",T8,[e("div",null,[t[474]||(t[474]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"PO Number",-1)),e("p",P8,a(R.value.number),1)]),e("div",null,[t[475]||(t[475]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Date",-1)),e("p",V8,a(new Date(R.value.date).toLocaleDateString("id-ID")),1)]),e("div",null,[t[476]||(t[476]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Supplier",-1)),e("p",E8,a(((at=R.value.supplier)==null?void 0:at.name)||"Unknown"),1)]),e("div",null,[t[477]||(t[477]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Status",-1)),e("span",{class:u(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",ja(R.value.status)])},a(R.value.status.toUpperCase()),3)]),e("div",null,[t[478]||(t[478]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Subtotal",-1)),e("p",R8,a(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(R.value.subtotal||0)),1)]),R.value.discount_total_percent>0||R.value.discount_total_amount>0?(s(),r("div",M8,[t[479]||(t[479]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Diskon Total",-1)),e("p",I8,[R.value.discount_total_percent>0?(s(),r("span",O8,a(R.value.discount_total_percent)+"%",1)):i("",!0),R.value.discount_total_percent>0&&R.value.discount_total_amount>0?(s(),r("span",F8," / ")):i("",!0),R.value.discount_total_amount>0?(s(),r("span",L8,a(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(R.value.discount_total_amount||0)),1)):i("",!0)])])):i("",!0),e("div",null,[t[480]||(t[480]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Grand Total",-1)),e("p",q8," Rp "+a(new Intl.NumberFormat("id-ID").format(R.value.grand_total)),1)]),e("div",null,[t[481]||(t[481]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Created By",-1)),e("p",U8,a(((Ct=R.value.creator)==null?void 0:Ct.nama_lengkap)||"Unknown"),1)])]),R.value.notes?(s(),r("div",z8,[t[482]||(t[482]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Notes",-1)),e("p",G8,a(R.value.notes),1)])):i("",!0)]),R.value.source_pr||R.value.purchase_requisition?(s(),r("div",W8,[t[492]||(t[492]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},[e("i",{class:"fa fa-shopping-cart mr-2 text-green-500"}),c(" Informasi Purchase Requisition Ops ")],-1)),e("div",K8,[e("div",null,[t[484]||(t[484]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"PR Number",-1)),e("p",H8,a((Bt=R.value.source_pr||R.value.purchase_requisition)==null?void 0:Bt.pr_number),1)]),e("div",null,[t[485]||(t[485]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Title",-1)),e("p",J8,a(((xt=R.value.source_pr||R.value.purchase_requisition)==null?void 0:xt.title)||"-"),1)]),e("div",null,[t[486]||(t[486]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Tanggal PR",-1)),e("p",Y8,a((kr=R.value.source_pr||R.value.purchase_requisition)!=null&&kr.date?new Date((R.value.source_pr||R.value.purchase_requisition).date).toLocaleDateString("id-ID"):(_r=R.value.source_pr||R.value.purchase_requisition)!=null&&_r.created_at?new Date((R.value.source_pr||R.value.purchase_requisition).created_at).toLocaleDateString("id-ID"):"-"),1)]),e("div",null,[t[487]||(t[487]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Category",-1)),e("p",Q8,[lr(R.value)?(s(),r("span",Z8,a(lr(R.value)),1)):(s(),r("span",X8,"-"))])]),e("div",null,[t[488]||(t[488]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Outlet",-1)),e("p",e7,a(((Cr=(wr=R.value.source_pr||R.value.purchase_requisition)==null?void 0:wr.outlet)==null?void 0:Cr.nama_outlet)||"-"),1)]),e("div",null,[t[489]||(t[489]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Pembuat PR",-1)),e("p",t7,a((($r=(Br=R.value.source_pr||R.value.purchase_requisition)==null?void 0:Br.creator)==null?void 0:$r.nama_lengkap)||"-"),1)]),e("div",null,[t[490]||(t[490]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Division",-1)),e("p",a7,a(((Dr=(Nr=R.value.source_pr||R.value.purchase_requisition)==null?void 0:Nr.division)==null?void 0:Dr.nama_divisi)||"-"),1)])]),(Ar=R.value.source_pr||R.value.purchase_requisition)!=null&&Ar.description?(s(),r("div",s7,[t[491]||(t[491]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Description",-1)),e("p",r7,a((Sr=R.value.source_pr||R.value.purchase_requisition)==null?void 0:Sr.description),1)])):i("",!0)])):i("",!0),qe.value?(s(),r("div",l7,[e("h4",o7,[t[493]||(t[493]=e("i",{class:"fa fa-chart-pie mr-2 text-blue-500"},null,-1)),c(" "+a(qe.value.budget_type==="PER_OUTLET"?"Informasi Budget Outlet":"Informasi Budget Category")+" - "+a(ns(qe.value.current_month))+" "+a(qe.value.current_year)+" ",1),e("span",n7," ("+a(qe.value.budget_type==="PER_OUTLET"?"Per Outlet":"Global")+") ",1)]),qe.value.budget_type==="PER_OUTLET"&&qe.value.outlet_info?(s(),r("div",i7,[e("p",d7,[t[494]||(t[494]=e("i",{class:"fa fa-store mr-2"},null,-1)),t[495]||(t[495]=e("strong",null,"Outlet:",-1)),c(" "+a(qe.value.outlet_info.name),1)])])):i("",!0),e("div",u7,[e("div",c7,[e("div",g7,a(qe.value.budget_type==="PER_OUTLET"?"Outlet Budget":"Total Budget"),1),e("div",x7," Rp "+a(new Intl.NumberFormat("id-ID").format(us())),1),qe.value.budget_type==="PER_OUTLET"?(s(),r("div",p7," Global: Rp "+a(new Intl.NumberFormat("id-ID").format(qe.value.category_budget)),1)):i("",!0)]),e("div",m7,[t[496]||(t[496]=e("div",{class:"text-sm font-medium text-orange-600"},"Used This Month",-1)),e("div",v7," Rp "+a(new Intl.NumberFormat("id-ID").format(cs())),1)]),e("div",f7,[t[497]||(t[497]=e("div",{class:"text-sm font-medium text-green-600"},"Remaining Budget",-1)),e("div",y7," Rp "+a(new Intl.NumberFormat("id-ID").format(po())),1)])]),e("div",b7,[e("div",h7,[t[498]||(t[498]=e("span",null,"Budget Usage",-1)),e("span",null,a(Math.round(dr()))+"%",1)]),e("div",k7,[e("div",{class:u(["h-3 rounded-full transition-all duration-300",sr(cs(),us())]),style:ht({width:Math.min(dr(),100)+"%"})},null,6)])]),qe.value.breakdown?(s(),r("div",_7,[t[505]||(t[505]=e("h5",{class:"text-sm font-semibold text-gray-800 dark:text-white mb-3 flex items-center gap-2"},[e("i",{class:"fa fa-list-ul text-blue-500"}),c("Budget Breakdown Detail ")],-1)),e("div",w7,[e("div",C7,[t[499]||(t[499]=e("p",{class:"text-blue-600 dark:text-blue-400 font-medium text-sm mb-1"},"PR",-1)),e("p",B7,a(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(qe.value.breakdown.pr_total||0)),1),t[500]||(t[500]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},[c("Total PR items"),e("br"),c("yang sudah dibuat")],-1))]),e("div",$7,[t[501]||(t[501]=e("p",{class:"text-blue-600 dark:text-blue-400 font-medium text-sm mb-1"},"PO",-1)),e("p",N7,a(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(qe.value.breakdown.po_total||0)),1),t[502]||(t[502]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},[c("Total PO items"),e("br"),c("yang sudah dibuat")],-1))]),e("div",D7,[t[503]||(t[503]=e("p",{class:"text-purple-600 dark:text-purple-400 font-medium text-sm mb-1"},"Retail Non Food",-1)),e("p",A7,a(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(qe.value.breakdown.retail_non_food||0)),1),t[504]||(t[504]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Status: Approved",-1))])])])):i("",!0)])):i("",!0),e("div",S7,[t[507]||(t[507]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Items",-1)),e("div",j7,[e("table",T7,[t[506]||(t[506]=e("thead",{class:"bg-gray-100 dark:bg-gray-600"},[e("tr",null,[e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Item"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Qty"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Unit"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Price"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Diskon"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Total")])],-1)),e("tbody",P7,[(s(!0),r(I,null,K(R.value.items,l=>(s(),r("tr",{key:l.id},[e("td",V7,a(l.item_name),1),e("td",E7,a(l.quantity),1),e("td",R7,a(l.unit),1),e("td",M7,"Rp "+a(new Intl.NumberFormat("id-ID").format(l.price)),1),e("td",I7,[l.discount_percent>0||l.discount_amount>0?(s(),r("div",O7,[l.discount_percent>0?(s(),r("div",F7,a(l.discount_percent)+"%",1)):i("",!0),l.discount_amount>0?(s(),r("div",L7,"Rp "+a(new Intl.NumberFormat("id-ID").format(l.discount_amount||0)),1)):i("",!0)])):(s(),r("span",q7,"-"))]),e("td",U7,"Rp "+a(new Intl.NumberFormat("id-ID").format(l.total)),1)]))),128))])])])]),(R.value.source_pr||R.value.purchase_requisition)&&((Tr=(jr=R.value.source_pr||R.value.purchase_requisition)==null?void 0:jr.attachments)==null?void 0:Tr.length)>0?(s(),r("div",z7,[e("h4",G7,[t[508]||(t[508]=e("i",{class:"fa fa-paperclip mr-2 text-blue-500"},null,-1)),t[509]||(t[509]=c(" Purchase Requisition Attachments ")),e("span",W7,a((((Pr=R.value.source_pr||R.value.purchase_requisition)==null?void 0:Pr.attachments)||[]).length),1)]),e("div",K7,[(s(!0),r(I,null,K(((Vr=R.value.source_pr||R.value.purchase_requisition)==null?void 0:Vr.attachments)||[],l=>(s(),r("div",{key:l.id,class:"relative"},[Na(l.file_name)?(s(),r("div",{key:0,onClick:U=>Aa(l),class:"cursor-pointer group"},[e("img",{src:`/purchase-requisitions/attachments/${l.id}/download`,alt:l.file_name,class:"w-24 h-24 object-cover rounded border-2 border-blue-200 dark:border-blue-700 hover:border-blue-400 dark:hover:border-blue-500 transition-all hover:scale-105 shadow-md",onError:t[62]||(t[62]=U=>Sa(U))},null,40,J7),t[510]||(t[510]=e("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 rounded transition-all flex items-center justify-center"},[e("i",{class:"fa fa-search-plus text-white opacity-0 group-hover:opacity-100 transition-opacity"})],-1)),e("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1 truncate w-24",title:l.file_name},a(l.file_name),9,Y7),e("div",Q7,a(wt(l.file_size)),1)],8,H7)):(s(),r("a",{key:1,href:`/purchase-requisitions/attachments/${l.id}/download`,onClick:U=>(l.file_name,void 0),class:"inline-flex flex-col items-center px-3 py-2 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded text-sm hover:bg-blue-200 dark:hover:bg-blue-800 transition min-w-[120px]"},[e("i",{class:u(Da(l.file_name)+" text-2xl mb-1")},null,2),e("span",X7,a(l.file_name),1),e("span",e9,a(wt(l.file_size)),1)],8,Z7))]))),128))])])):i("",!0),R.value.attachments&&R.value.attachments.length>0?(s(),r("div",t9,[e("h4",a9,[t[511]||(t[511]=e("i",{class:"fa fa-paperclip mr-2 text-orange-500"},null,-1)),t[512]||(t[512]=c(" Purchase Order Attachments ")),e("span",s9,a(R.value.attachments.length),1)]),e("div",r9,[(s(!0),r(I,null,K(R.value.attachments,l=>(s(),r("div",{key:l.id,class:"relative"},[Na(l.file_name)?(s(),r("div",{key:0,onClick:U=>Aa(l,"po"),class:"cursor-pointer group"},[e("img",{src:`/po-ops/attachments/${l.id}/download`,alt:l.file_name,class:"w-24 h-24 object-cover rounded border-2 border-orange-200 dark:border-orange-700 hover:border-orange-400 dark:hover:border-orange-500 transition-all hover:scale-105 shadow-md",onError:t[63]||(t[63]=U=>Sa(U))},null,40,o9),t[513]||(t[513]=e("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 rounded transition-all flex items-center justify-center"},[e("i",{class:"fa fa-search-plus text-white opacity-0 group-hover:opacity-100 transition-opacity"})],-1)),e("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1 truncate w-24",title:l.file_name},a(l.file_name),9,n9),e("div",i9,a(wt(l.file_size)),1)],8,l9)):(s(),r("a",{key:1,href:`/po-ops/attachments/${l.id}/download`,onClick:U=>(l.file_name,void 0),class:"inline-flex flex-col items-center px-3 py-2 bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-300 rounded text-sm hover:bg-orange-200 dark:hover:bg-orange-800 transition min-w-[120px]"},[e("i",{class:u(Da(l.file_name)+" text-2xl mb-1")},null,2),e("span",u9,a(l.file_name),1),e("span",c9,a(wt(l.file_size)),1)],8,d9))]))),128))])])):i("",!0),R.value.approval_flows&&R.value.approval_flows.length>0?(s(),r("div",g9,[t[514]||(t[514]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Approval Flow",-1)),e("div",x9,[(s(!0),r(I,null,K(R.value.approval_flows,l=>{var U,oe,me,Re,Je;return s(),r("div",{key:l.id,class:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500"},[e("div",p9,[e("span",m9," Level "+a(l.approval_level),1),e("div",null,[e("div",v9,a(((U=l.approver)==null?void 0:U.nama_lengkap)||((oe=l.approver)==null?void 0:oe.name)),1),e("div",f9,a((me=l.approver)==null?void 0:me.email),1),(Je=(Re=l.approver)==null?void 0:Re.jabatan)!=null&&Je.nama_jabatan?(s(),r("div",y9,a(l.approver.jabatan.nama_jabatan),1)):i("",!0)])]),e("div",b9,[e("div",{class:u(["text-sm font-medium",ur(l.status)])},a(l.status),3),l.approved_at?(s(),r("div",h9," Approved: "+a(new Date(l.approved_at).toLocaleDateString("id-ID")),1)):i("",!0),l.rejected_at?(s(),r("div",k9," Rejected: "+a(new Date(l.rejected_at).toLocaleDateString("id-ID")),1)):i("",!0)])])}),128))])])):i("",!0),R.value.source_type==="purchase_requisition_ops"||R.value.source_pr||R.value.purchase_requisition?(s(),r("div",_9,[ds()?(s(),He(ll,{key:`comment-section-${R.value.id}-${ds()}`,"purchase-requisition-id":ds(),"current-user-id":Le(te).id,"unread-count":0,onCommentAdded:or,onCommentUpdated:nr,onCommentDeleted:ir},null,8,["purchase-requisition-id","current-user-id"])):(s(),r("div",w9,[e("p",C9,[t[515]||(t[515]=e("i",{class:"fas fa-info-circle mr-2"},null,-1)),t[516]||(t[516]=c(" Purchase Requisition ID tidak ditemukan. ")),e("span",B9,"Debug: source_type="+a(R.value.source_type)+", source_id="+a(R.value.source_id)+", has_source_pr="+a(!!R.value.source_pr)+", has_purchase_requisition="+a(!!R.value.purchase_requisition),1)])]))])):i("",!0)]),e("div",$9,[e("button",{onClick:t[64]||(t[64]=l=>ke.value=!1),class:"px-4 py-2 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Tutup "),e("button",{onClick:t[65]||(t[65]=l=>uo(R.value.id)),class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors"},t[517]||(t[517]=[e("i",{class:"fa fa-check mr-2"},null,-1),c("Approve ")])),e("button",{onClick:t[66]||(t[66]=l=>go(R.value.id)),class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors"},t[518]||(t[518]=[e("i",{class:"fa fa-times mr-2"},null,-1),c("Reject ")]))])])])):i("",!0)])),n.value&&$.value?(s(),r("div",{key:7,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",onClick:t[74]||(t[74]=l=>n.value=!1)},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",onClick:t[73]||(t[73]=Q(()=>{},["stop"]))},[e("div",N9,[t[520]||(t[520]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-file-invoice-dollar mr-2 text-blue-500"}),c(" Detail Contra Bon Approval ")],-1)),e("button",{onClick:t[69]||(t[69]=l=>n.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[519]||(t[519]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),e("div",D9,[e("div",A9,[t[534]||(t[534]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Informasi Dasar",-1)),e("div",S9,[e("div",null,[t[521]||(t[521]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Contra Bon Number",-1)),e("p",j9,a($.value.number),1)]),e("div",null,[t[522]||(t[522]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Date",-1)),e("p",T9,a($.value.date?new Date($.value.date).toLocaleDateString("id-ID"):"-"),1)]),e("div",null,[t[523]||(t[523]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Supplier",-1)),e("p",P9,a(((Er=$.value.supplier)==null?void 0:Er.name)||"Unknown"),1)]),e("div",null,[t[524]||(t[524]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Status",-1)),e("span",{class:u(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",ja($.value.status||"draft")])},a(($.value.status||"draft").toUpperCase()),3)]),e("div",null,[t[525]||(t[525]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Total Amount",-1)),e("p",V9," Rp "+a(new Intl.NumberFormat("id-ID").format($.value.total_amount||0)),1)]),e("div",null,[t[526]||(t[526]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Created By",-1)),e("p",E9,a(((Rr=$.value.creator)==null?void 0:Rr.nama_lengkap)||"Unknown"),1)]),$.value.source_types&&$.value.source_types.length>0?(s(),r("div",R9,[t[527]||(t[527]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Source Type",-1)),e("div",M9,[(s(!0),r(I,null,K($.value.source_types,l=>(s(),r("span",{key:l,class:u([{"bg-blue-100 text-blue-700 border border-blue-300 dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-700":l==="PR Foods","bg-green-100 text-green-700 border border-green-300 dark:bg-green-900/30 dark:text-green-300 dark:border-green-700":l==="RO Supplier","bg-purple-100 text-purple-700 border border-purple-300 dark:bg-purple-900/30 dark:text-purple-300 dark:border-purple-700":l==="Retail Food","bg-orange-100 text-orange-700 border border-orange-300 dark:bg-orange-900/30 dark:text-orange-300 dark:border-orange-700":l==="Warehouse Retail Food","bg-gray-100 text-gray-700 border border-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600":l==="Unknown"},"px-2 py-1 rounded-full text-xs font-semibold"])},a(l==="PR Foods"?"PRF":l==="Retail Food"?"RF":l==="Warehouse Retail Food"?"RWF":l),3))),128))])])):$.value.source_type_display?(s(),r("div",I9,[t[528]||(t[528]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Source Type",-1)),e("p",O9,a($.value.source_type_display),1)])):i("",!0),$.value.po_discount_info&&($.value.po_discount_info.discount_total_percent>0||$.value.po_discount_info.discount_total_amount>0)?(s(),r("div",F9,[t[533]||(t[533]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Informasi Diskon PO",-1)),e("div",L9,[$.value.po_discount_info.discount_total_percent>0?(s(),r("div",q9,[t[529]||(t[529]=c(" Diskon Total: ")),e("span",U9,a($.value.po_discount_info.discount_total_percent)+"%",1)])):i("",!0),$.value.po_discount_info.discount_total_amount>0?(s(),r("div",z9,[t[530]||(t[530]=c(" Diskon Total: ")),e("span",G9,"Rp "+a(new Intl.NumberFormat("id-ID").format($.value.po_discount_info.discount_total_amount||0)),1)])):i("",!0),e("div",W9,[t[531]||(t[531]=c(" Subtotal PO: ")),e("span",K9,"Rp "+a(new Intl.NumberFormat("id-ID").format($.value.po_discount_info.subtotal||0)),1)]),e("div",H9,[t[532]||(t[532]=c(" Grand Total PO: ")),e("span",J9,"Rp "+a(new Intl.NumberFormat("id-ID").format($.value.po_discount_info.grand_total||0)),1)])])])):i("",!0)])]),$.value.items&&$.value.items.length>0?(s(),r("div",Y9,[t[540]||(t[540]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Items",-1)),e("div",Q9,[e("table",Z9,[e("thead",X9,[e("tr",null,[t[535]||(t[535]=e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Item",-1)),t[536]||(t[536]=e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Qty",-1)),t[537]||(t[537]=e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Unit",-1)),t[538]||(t[538]=e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Price",-1)),$.value.source_type==="purchase_order"?(s(),r("th",eC,"Diskon")):i("",!0),t[539]||(t[539]=e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Total",-1))])]),e("tbody",tC,[(s(!0),r(I,null,K($.value.items,l=>{var U,oe;return s(),r("tr",{key:l.id},[e("td",aC,a(((U=l.item)==null?void 0:U.name)||l.item_name||"N/A"),1),e("td",sC,a(l.quantity),1),e("td",rC,a(((oe=l.unit)==null?void 0:oe.name)||l.unit_name||"-"),1),e("td",lC,"Rp "+a(new Intl.NumberFormat("id-ID").format(l.price||0)),1),$.value.source_type==="purchase_order"?(s(),r("td",oC,[l.discount_percent>0||l.discount_amount>0?(s(),r("div",nC,[l.discount_percent>0?(s(),r("div",iC,a(l.discount_percent)+"%",1)):i("",!0),l.discount_amount>0?(s(),r("div",dC,"Rp "+a(new Intl.NumberFormat("id-ID").format(l.discount_amount||0)),1)):i("",!0)])):(s(),r("span",uC,"-"))])):i("",!0),e("td",cC," Rp "+a(new Intl.NumberFormat("id-ID").format(l.total||0)),1)])}),128))])])])])):i("",!0),$.value.image?(s(),r("div",gC,[t[541]||(t[541]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Gambar Contra Bon",-1)),e("img",{src:`/storage/${$.value.image}`,alt:"Contra Bon Image",class:"max-w-full h-auto rounded-lg border border-gray-300 dark:border-gray-600"},null,8,xC)])):i("",!0)]),e("div",pC,[e("button",{onClick:t[70]||(t[70]=l=>n.value=!1),class:"px-4 py-2 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Tutup "),e("button",{onClick:t[71]||(t[71]=l=>ro($.value.id)),class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors"},t[542]||(t[542]=[e("i",{class:"fa fa-check mr-2"},null,-1),c("Approve ")])),e("button",{onClick:t[72]||(t[72]=l=>oo($.value.id)),class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors"},t[543]||(t[543]=[e("i",{class:"fa fa-times mr-2"},null,-1),c("Reject ")]))])])])):i("",!0),Y.value?(s(),r("div",{key:8,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[50]",onClick:t[92]||(t[92]=l=>Y.value=!1)},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-5xl mx-4 max-h-[90vh] overflow-y-auto",onClick:t[91]||(t[91]=Q(()=>{},["stop"]))},[e("div",mC,[t[547]||(t[547]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-list mr-2 text-blue-500"}),c(" Semua Contra Bon Pending ")],-1)),e("div",vC,[Pe.value?(s(),r("button",{key:1,onClick:t[76]||(t[76]=Q(l=>{Pe.value=!1,ze.value.clear()},["stop"])),class:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 transition"},t[545]||(t[545]=[e("i",{class:"fa fa-times mr-1"},null,-1),c("Cancel ")]))):(s(),r("button",{key:0,onClick:t[75]||(t[75]=Q(l=>Pe.value=!0,["stop"])),class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition"},t[544]||(t[544]=[e("i",{class:"fa fa-check-square mr-1"},null,-1),c("Multi Approve ")]))),e("button",{onClick:t[77]||(t[77]=l=>Y.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[546]||(t[546]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))])]),Pe.value&&ze.value.size>0?(s(),r("div",fC,[e("span",yC,a(ze.value.size)+" item dipilih ",1),e("div",{class:"flex gap-2"},[e("button",{onClick:Cl,class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition"},t[548]||(t[548]=[e("i",{class:"fa fa-check-double mr-1"},null,-1),c("Select All ")])),e("button",{onClick:Bl,class:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700 transition"},t[549]||(t[549]=[e("i",{class:"fa fa-check mr-1"},null,-1),c("Approve Selected ")]))])])):i("",!0),e("div",bC,[e("div",hC,[e("div",null,[t[550]||(t[550]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Cari",-1)),de(e("input",{"onUpdate:modelValue":t[78]||(t[78]=l=>d.value=l),type:"text",placeholder:"No CB, Supplier, atau Pembuat",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:text-gray-100"},null,512),[[Ge,d.value]])]),e("div",null,[t[552]||(t[552]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Status",-1)),de(e("select",{"onUpdate:modelValue":t[79]||(t[79]=l=>ae.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:text-gray-100"},t[551]||(t[551]=[e("option",{value:""},"Semua",-1),e("option",{value:"draft"},"Draft",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"rejected"},"Rejected",-1)]),512),[[Te,ae.value]])]),e("div",null,[t[554]||(t[554]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tanggal",-1)),de(e("select",{"onUpdate:modelValue":t[80]||(t[80]=l=>ye.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:text-gray-100"},t[553]||(t[553]=[e("option",{value:""},"Semua",-1),e("option",{value:"today"},"Hari ini",-1),e("option",{value:"week"},"7 hari terakhir",-1),e("option",{value:"month"},"30 hari terakhir",-1)]),512),[[Te,ye.value]])]),e("div",null,[t[556]||(t[556]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Source Type",-1)),de(e("select",{"onUpdate:modelValue":t[81]||(t[81]=l=>Ae.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:text-gray-100"},t[555]||(t[555]=[e("option",{value:""},"Semua",-1),e("option",{value:"purchase_order"},"PR Foods",-1),e("option",{value:"retail_food"},"Retail Food",-1),e("option",{value:"warehouse_retail_food"},"Warehouse Retail Food",-1)]),512),[[Te,Ae.value]])]),e("div",null,[t[558]||(t[558]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Approval Level",-1)),de(e("select",{"onUpdate:modelValue":t[82]||(t[82]=l=>Ee.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:text-gray-100"},t[557]||(t[557]=[e("option",{value:""},"Semua",-1),e("option",{value:"finance_manager"},"Finance Manager",-1),e("option",{value:"gm_finance"},"GM Finance",-1)]),512),[[Te,Ee.value]])]),e("div",null,[t[560]||(t[560]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Urutkan",-1)),de(e("select",{"onUpdate:modelValue":t[83]||(t[83]=l=>Oe.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:text-gray-100"},t[559]||(t[559]=[e("option",{value:"newest"},"Terbaru",-1),e("option",{value:"oldest"},"Terlama",-1),e("option",{value:"number"},"Nomor CB",-1),e("option",{value:"amount"},"Nominal",-1)]),512),[[Te,Oe.value]])]),e("div",null,[t[562]||(t[562]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Per Halaman",-1)),de(e("select",{"onUpdate:modelValue":t[84]||(t[84]=l=>Me.value=l),onChange:t[85]||(t[85]=l=>$l(Me.value)),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:text-gray-100"},t[561]||(t[561]=[e("option",{value:10},"10",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1),e("option",{value:100},"100",-1)]),544),[[Te,Me.value]])])])]),m.value?(s(),r("div",kC,t[563]||(t[563]=[e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-300"},"Memuat data...",-1)]))):(s(),r("div",_C,[Zt.value.length===0?(s(),r("div",wC,t[564]||(t[564]=[e("i",{class:"fa-solid fa-check-circle text-4xl text-green-500 mb-2"},null,-1),e("p",{class:"text-gray-600 dark:text-gray-300"},"Tidak ada Contra Bon pending",-1)]))):(s(),r("div",CC,[e("div",BC," Menampilkan "+a((A.value-1)*Me.value+1)+" - "+a(Math.min(A.value*Me.value,Zt.value.length))+" dari "+a(Zt.value.length)+" Contra Bon ",1),(s(!0),r(I,null,K(ws.value,l=>{var U,oe;return s(),r("div",{key:"all-contra-bon-"+l.id,class:u(["p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 transition-colors",[Pe.value?"cursor-default":"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",ze.value.has(l.id)?"ring-2 ring-blue-500":""]]),onClick:me=>Pe.value?qs(l.id):Xs(l.id)},[e("div",NC,[e("div",DC,[Pe.value?(s(),r("input",{key:0,type:"checkbox",checked:ze.value.has(l.id),onClick:Q(me=>qs(l.id),["stop"]),class:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"},null,8,AC)):i("",!0),e("div",SC,[e("div",jC,[e("span",TC,a(l.number),1),e("span",{class:u(["text-xs px-2 py-0.5 rounded-full",ja(l.status||"draft")])},a((l.status||"draft").toString().toUpperCase()),3),l.approval_level_display?(s(),r("span",PC,a(l.approval_level_display),1)):i("",!0)]),e("div",VC,a(((U=l.supplier)==null?void 0:U.name)||"Unknown Supplier")+" • Rp "+a(new Intl.NumberFormat("id-ID").format(l.total_amount||0)),1),e("div",EC,[t[565]||(t[565]=e("i",{class:"fa fa-tag mr-1 text-blue-600"},null,-1)),l.source_types&&l.source_types.length>0?(s(!0),r(I,{key:0},K(l.source_types,me=>(s(),r("span",{key:me,class:u([{"bg-blue-100 text-blue-700 border border-blue-300 dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-700":me==="PR Foods","bg-green-100 text-green-700 border border-green-300 dark:bg-green-900/30 dark:text-green-300 dark:border-green-700":me==="RO Supplier","bg-purple-100 text-purple-700 border border-purple-300 dark:bg-purple-900/30 dark:text-purple-300 dark:border-purple-700":me==="Retail Food","bg-orange-100 text-orange-700 border border-orange-300 dark:bg-orange-900/30 dark:text-orange-300 dark:border-orange-700":me==="Warehouse Retail Food","bg-gray-100 text-gray-700 border border-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600":me==="Unknown"},"px-1.5 py-0.5 rounded-full text-[10px] font-semibold"])},a(me==="PR Foods"?"PRF":me==="Retail Food"?"RF":me==="Warehouse Retail Food"?"RWF":me),3))),128)):(s(),r("span",RC,a(l.source_type_display||"N/A"),1))]),e("div",MC,[t[566]||(t[566]=e("i",{class:"fa fa-user mr-1 text-blue-500"},null,-1)),c(" "+a(((oe=l.creator)==null?void 0:oe.nama_lengkap)||"Unknown"),1)])])]),e("div",IC,a(l.date?new Date(l.date).toLocaleDateString("id-ID"):"-"),1)])],10,$C)}),128))])),dt.value>1?(s(),r("div",OC,[e("div",FC," Halaman "+a(A.value)+" dari "+a(dt.value),1),e("div",LC,[e("button",{onClick:t[86]||(t[86]=l=>Ht(A.value-1)),disabled:A.value===1,class:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"},t[567]||(t[567]=[e("i",{class:"fa fa-chevron-left"},null,-1),c(" Sebelumnya ")]),8,qC),e("div",UC,[dt.value<=7?(s(!0),r(I,{key:0},K(dt.value,l=>(s(),r("button",{key:l,onClick:U=>Ht(l),class:u(["px-3 py-1 text-sm rounded-md",A.value===l?"bg-blue-600 text-white":"border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"])},a(l),11,zC))),128)):(s(),r(I,{key:1},[A.value>3?(s(),r("button",{key:0,onClick:t[87]||(t[87]=l=>Ht(1)),class:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700"}," 1 ")):i("",!0),A.value>4?(s(),r("span",GC,"...")):i("",!0),(s(!0),r(I,null,K(Nl(),l=>(s(),r("button",{key:l,onClick:U=>Ht(l),class:u(["px-3 py-1 text-sm rounded-md",A.value===l?"bg-blue-600 text-white":"border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"])},a(l),11,WC))),128)),A.value<dt.value-3?(s(),r("span",KC,"...")):i("",!0),A.value<dt.value-2?(s(),r("button",{key:3,onClick:t[88]||(t[88]=l=>Ht(dt.value)),class:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700"},a(dt.value),1)):i("",!0)],64))]),e("button",{onClick:t[89]||(t[89]=l=>Ht(A.value+1)),disabled:A.value===dt.value,class:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"},t[568]||(t[568]=[c(" Selanjutnya "),e("i",{class:"fa fa-chevron-right"},null,-1)]),8,HC)])])):i("",!0)])),e("div",JC,[e("button",{onClick:t[90]||(t[90]=l=>Y.value=!1),class:"px-4 py-2 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Tutup ")])])])):i("",!0),(s(),He(Ze,{to:"body"},[St.value?(s(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998]",onClick:t[102]||(t[102]=l=>St.value=!1)},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-5xl mx-4 max-h-[90vh] overflow-y-auto",onClick:t[101]||(t[101]=Q(()=>{},["stop"]))},[e("div",YC,[t[572]||(t[572]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-list mr-2 text-orange-500"}),c(" Semua Purchase Order Ops Pending ")],-1)),e("div",QC,[mt.value?(s(),r("button",{key:1,onClick:t[94]||(t[94]=Q(l=>{mt.value=!1,et.value.clear()},["stop"])),class:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 transition"},t[570]||(t[570]=[e("i",{class:"fa fa-times mr-1"},null,-1),c("Cancel ")]))):(s(),r("button",{key:0,onClick:t[93]||(t[93]=Q(l=>mt.value=!0,["stop"])),class:"text-xs bg-orange-500 text-white px-2 py-1 rounded hover:bg-orange-600 transition"},t[569]||(t[569]=[e("i",{class:"fa fa-check-square mr-1"},null,-1),c("Multi Approve ")]))),e("button",{onClick:t[95]||(t[95]=l=>St.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[571]||(t[571]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))])]),mt.value&&et.value.size>0?(s(),r("div",ZC,[e("span",XC,a(et.value.size)+" item dipilih ",1),e("div",{class:"flex gap-2"},[e("button",{onClick:Al,class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition"},t[573]||(t[573]=[e("i",{class:"fa fa-check-double mr-1"},null,-1),c("Select All ")])),e("button",{onClick:Sl,class:"text-xs bg-orange-600 text-white px-2 py-1 rounded hover:bg-orange-700 transition"},t[574]||(t[574]=[e("i",{class:"fa fa-check mr-1"},null,-1),c("Approve Selected ")]))])])):i("",!0),e("div",eB,[e("div",tB,[e("div",null,[t[575]||(t[575]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Cari",-1)),de(e("input",{"onUpdate:modelValue":t[96]||(t[96]=l=>ua.value=l),type:"text",placeholder:"No PO, Supplier, PR, atau Pembuat",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 dark:bg-gray-600 dark:text-gray-100"},null,512),[[Ge,ua.value]])]),e("div",null,[t[577]||(t[577]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Status",-1)),de(e("select",{"onUpdate:modelValue":t[97]||(t[97]=l=>ca.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 dark:bg-gray-600 dark:text-gray-100"},t[576]||(t[576]=[e("option",{value:""},"Semua",-1),e("option",{value:"submitted"},"Submitted",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"awaiting"},"Awaiting",-1),e("option",{value:"waiting"},"Waiting",-1)]),512),[[Te,ca.value]])]),e("div",null,[t[579]||(t[579]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tanggal",-1)),de(e("select",{"onUpdate:modelValue":t[98]||(t[98]=l=>ga.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 dark:bg-gray-600 dark:text-gray-100"},t[578]||(t[578]=[e("option",{value:""},"Semua",-1),e("option",{value:"today"},"Hari ini",-1),e("option",{value:"week"},"7 hari terakhir",-1),e("option",{value:"month"},"30 hari terakhir",-1)]),512),[[Te,ga.value]])]),e("div",null,[t[581]||(t[581]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Urutkan",-1)),de(e("select",{"onUpdate:modelValue":t[99]||(t[99]=l=>Ia.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 dark:bg-gray-600 dark:text-gray-100"},t[580]||(t[580]=[e("option",{value:"newest"},"Terbaru",-1),e("option",{value:"oldest"},"Terlama",-1),e("option",{value:"number"},"Nomor PO",-1),e("option",{value:"amount"},"Nominal",-1)]),512),[[Te,Ia.value]])])])]),Ma.value?(s(),r("div",aB,t[582]||(t[582]=[e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-orange-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-300"},"Memuat data...",-1)]))):(s(),r("div",sB,[fa.value.length===0?(s(),r("div",rB,t[583]||(t[583]=[e("i",{class:"fa-solid fa-check-circle text-4xl text-green-500 mb-2"},null,-1),e("p",{class:"text-gray-600 dark:text-gray-300"},"Tidak ada PO Ops pending",-1)]))):(s(),r("div",lB,[e("div",oB,"Menampilkan "+a(fa.value.length)+" dari "+a(Ra.value.length)+" PO Ops",1),(s(!0),r(I,null,K(fa.value,l=>{var U;return s(),r("div",{key:"all-po-ops-"+l.id,class:u(["p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 transition-colors",[mt.value?"cursor-default":"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",et.value.has(l.id)?"ring-2 ring-orange-500":""]]),onClick:oe=>mt.value?zs(l.id):tr(l.id)},[e("div",iB,[e("div",dB,[mt.value?(s(),r("input",{key:0,type:"checkbox",checked:et.value.has(l.id),onClick:Q(oe=>zs(l.id),["stop"]),class:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500"},null,8,uB)):i("",!0),e("div",cB,[e("div",gB,[e("span",xB,a(l.number),1),e("span",{class:u(["text-xs px-2 py-0.5 rounded-full",ja(l.status)])},a((l.status||"").toString().toUpperCase()),3)]),e("div",pB,a(((U=l.supplier)==null?void 0:U.name)||"Unknown Supplier")+" • Rp "+a(new Intl.NumberFormat("id-ID").format(l.grand_total)),1),l.purchase_requisition?(s(),r("div",mB,[t[584]||(t[584]=e("i",{class:"fa fa-shopping-cart mr-1 text-green-600"},null,-1)),c(" PR "+a(l.purchase_requisition.pr_number)+" — "+a(l.purchase_requisition.title),1)])):i("",!0)])]),e("div",vB,[e("div",fB,a(new Date(l.date).toLocaleDateString("id-ID")),1),l.approver_name?(s(),r("div",yB,[t[585]||(t[585]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(l.approver_name),1)])):(s(),r("div",bB,t[586]||(t[586]=[e("i",{class:"fa fa-file-invoice mr-1"},null,-1),c("PO Ops ")])))])])],10,nB)}),128))]))])),e("div",hB,[e("button",{onClick:t[100]||(t[100]=l=>St.value=!1),class:"px-4 py-2 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Tutup ")])])])):i("",!0)])),jt.value?(s(),r("div",{key:9,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[113]||(t[113]=l=>jt.value=!1)},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-5xl mx-4 max-h-[90vh] overflow-y-auto",onClick:t[112]||(t[112]=Q(()=>{},["stop"]))},[e("div",kB,[t[590]||(t[590]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-list mr-2 text-green-500"}),c(" Semua Purchase Requisition Pending ")],-1)),e("div",_B,[vt.value?(s(),r("button",{key:1,onClick:t[104]||(t[104]=Q(l=>{vt.value=!1,tt.value.clear()},["stop"])),class:"text-xs bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 transition"},t[588]||(t[588]=[e("i",{class:"fa fa-times mr-1"},null,-1),c("Cancel ")]))):(s(),r("button",{key:0,onClick:t[103]||(t[103]=Q(l=>vt.value=!0,["stop"])),class:"text-xs bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 transition"},t[587]||(t[587]=[e("i",{class:"fa fa-check-square mr-1"},null,-1),c("Multi Approve ")]))),e("button",{onClick:t[105]||(t[105]=l=>jt.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[589]||(t[589]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))])]),vt.value&&tt.value.size>0?(s(),r("div",wB,[e("span",CB,a(tt.value.size)+" item dipilih ",1),e("div",{class:"flex gap-2"},[e("button",{onClick:Tl,class:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 transition"},t[591]||(t[591]=[e("i",{class:"fa fa-check-double mr-1"},null,-1),c("Select All ")])),e("button",{onClick:Pl,class:"text-xs bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700 transition"},t[592]||(t[592]=[e("i",{class:"fa fa-check mr-1"},null,-1),c("Approve Selected ")]))])])):i("",!0),e("div",BB,[e("div",$B,[e("div",null,[t[593]||(t[593]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Cari",-1)),de(e("input",{"onUpdate:modelValue":t[106]||(t[106]=l=>xa.value=l),type:"text",placeholder:"No PR, Judul, Divisi, Outlet, atau Pembuat",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 dark:bg-gray-600 dark:text-gray-100"},null,512),[[Ge,xa.value]])]),e("div",null,[t[595]||(t[595]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Status",-1)),de(e("select",{"onUpdate:modelValue":t[107]||(t[107]=l=>pa.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 dark:bg-gray-600 dark:text-gray-100"},t[594]||(t[594]=[e("option",{value:""},"Semua",-1),e("option",{value:"SUBMITTED"},"Submitted",-1),e("option",{value:"APPROVED"},"Approved",-1),e("option",{value:"REJECTED"},"Rejected",-1),e("option",{value:"PROCESSED"},"Processed",-1)]),512),[[Te,pa.value]])]),e("div",null,[t[597]||(t[597]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Mode",-1)),de(e("select",{"onUpdate:modelValue":t[108]||(t[108]=l=>va.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 dark:bg-gray-600 dark:text-gray-100"},t[596]||(t[596]=[e("option",{value:""},"Semua",-1),e("option",{value:"pr_ops"},"PR Ops",-1),e("option",{value:"purchase_payment"},"Purchase Payment",-1),e("option",{value:"travel_application"},"Travel Application",-1),e("option",{value:"kasbon"},"Kasbon",-1)]),512),[[Te,va.value]])]),e("div",null,[t[599]||(t[599]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tanggal",-1)),de(e("select",{"onUpdate:modelValue":t[109]||(t[109]=l=>ma.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 dark:bg-gray-600 dark:text-gray-100"},t[598]||(t[598]=[e("option",{value:""},"Semua",-1),e("option",{value:"today"},"Hari ini",-1),e("option",{value:"week"},"7 hari terakhir",-1),e("option",{value:"month"},"30 hari terakhir",-1)]),512),[[Te,ma.value]])]),e("div",null,[t[601]||(t[601]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Urutkan",-1)),de(e("select",{"onUpdate:modelValue":t[110]||(t[110]=l=>La.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 dark:bg-gray-600 dark:text-gray-100"},t[600]||(t[600]=[e("option",{value:"newest"},"Terbaru",-1),e("option",{value:"oldest"},"Terlama",-1),e("option",{value:"number"},"Nomor PR",-1),e("option",{value:"amount"},"Nominal",-1)]),512),[[Te,La.value]])])])]),Fa.value?(s(),r("div",NB,t[602]||(t[602]=[e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-green-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-300"},"Memuat data...",-1)]))):(s(),r("div",DB,[Ca.value.length===0?(s(),r("div",AB,t[603]||(t[603]=[e("i",{class:"fa-solid fa-check-circle text-4xl text-green-500 mb-2"},null,-1),e("p",{class:"text-gray-600 dark:text-gray-300"},"Tidak ada Purchase Requisition pending",-1)]))):(s(),r("div",SB,[e("div",jB,"Menampilkan "+a(Ca.value.length)+" dari "+a(Oa.value.length)+" Purchase Requisition",1),(s(!0),r(I,null,K(Ca.value,l=>{var U,oe,me;return s(),r("div",{key:"all-pr-"+l.id,class:u(["p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 transition-colors",[vt.value?"cursor-default":"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",tt.value.has(l.id)?"ring-2 ring-green-500":""]]),onClick:Re=>vt.value?Ws(l.id):Ba(l.id)},[e("div",PB,[e("div",VB,[vt.value?(s(),r("input",{key:0,type:"checkbox",checked:tt.value.has(l.id),onClick:Q(Re=>Ws(l.id),["stop"]),class:"w-4 h-4 text-green-600 rounded focus:ring-green-500"},null,8,EB)):i("",!0),e("div",RB,[e("div",MB,[e("span",IB,a(l.pr_number),1),l.mode?(s(),r("span",{key:0,class:u(["text-xs px-2 py-0.5 rounded-full",Hs(l.mode)])},a(Ks(l.mode)),3)):i("",!0),e("span",{class:u(["text-xs px-2 py-0.5 rounded-full",l.status==="SUBMITTED"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":l.status==="APPROVED"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":l.status==="REJECTED"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"])},a((l.status||"").toString().toUpperCase()),3)]),e("div",OB,a(l.title),1),e("div",FB,[l.items&&l.items.length>0&&l.items[0].outlet?(s(),r("div",LB,[t[604]||(t[604]=e("i",{class:"fa fa-store text-xs text-blue-600 dark:text-blue-400"},null,-1)),e("span",qB,a(l.items[0].outlet.nama_outlet),1),l.items.filter((Re,Je,lt)=>lt.findIndex(bt=>bt.outlet_id===Re.outlet_id)===Je).length>1?(s(),r("span",UB,"+"+a(l.items.filter((Re,Je,lt)=>lt.findIndex(bt=>bt.outlet_id===Re.outlet_id)===Je).length-1),1)):i("",!0)])):(U=l.outlet)!=null&&U.nama_outlet?(s(),r("div",zB,[t[605]||(t[605]=e("i",{class:"fa fa-store text-xs text-blue-600 dark:text-blue-400"},null,-1)),e("span",GB,a(l.outlet.nama_outlet),1)])):i("",!0),e("div",WB,[t[606]||(t[606]=e("i",{class:"fa fa-money-bill-wave text-xs text-green-600 dark:text-green-400"},null,-1)),e("span",KB,"Rp "+a(new Intl.NumberFormat("id-ID").format(l.amount||0)),1)])]),e("div",HB,a(((oe=l.division)==null?void 0:oe.nama_divisi)||"-"),1),e("div",JB,[t[607]||(t[607]=e("i",{class:"fa fa-user mr-1 text-green-600"},null,-1)),c(" "+a(((me=l.creator)==null?void 0:me.nama_lengkap)||l.created_by_name||"-"),1)])])]),e("div",YB,[e("div",QB,[e("button",{onClick:Q(Re=>Ba(l.id),["stop"]),class:"relative text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 transition-colors",title:"Comments"},[t[608]||(t[608]=e("i",{class:"fas fa-comment text-sm"},null,-1)),l.unread_comments_count>0?(s(),r("span",XB,a(l.unread_comments_count>99?"99+":l.unread_comments_count),1)):i("",!0)],8,ZB)]),e("div",e$,a(new Date(l.created_at).toLocaleDateString("id-ID")),1),l.approver_name?(s(),r("div",t$,[t[609]||(t[609]=e("i",{class:"fa fa-user-check mr-1"},null,-1)),c(a(l.approver_name),1)])):(s(),r("div",a$,t[610]||(t[610]=[e("i",{class:"fa fa-shopping-cart mr-1"},null,-1),c("PR Approval ")])))])])],10,TB)}),128))]))])),e("div",s$,[e("button",{onClick:t[111]||(t[111]=l=>jt.value=!1),class:"px-4 py-2 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Tutup ")])])])):i("",!0),yt.value&&pe.value?(s(),r("div",{key:10,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[117]||(t[117]=l=>yt.value=!1)},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-3xl mx-4 max-h-[85vh] overflow-y-auto",onClick:t[116]||(t[116]=Q(()=>{},["stop"]))},[e("div",r$,[t[612]||(t[612]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-person-walking-arrow-right mr-2 text-emerald-500"}),c(" Detail Personal Movement ")],-1)),e("button",{onClick:t[114]||(t[114]=l=>yt.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[611]||(t[611]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),Ua.value?(s(),r("div",l$,t[613]||(t[613]=[e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-emerald-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-300"},"Memuat detail...",-1)]))):(s(),r("div",o$,[e("div",n$,[e("div",i$,[e("div",null,[t[614]||(t[614]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Karyawan",-1)),e("p",d$,a(pe.value.employee_nama_lengkap||((Mr=pe.value.employee)==null?void 0:Mr.nama_lengkap)||pe.value.employee_name),1)]),e("div",null,[t[615]||(t[615]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Jenis Movement",-1)),e("p",u$,a((pe.value.employment_type||"").replaceAll("_"," ")),1)]),e("div",null,[t[616]||(t[616]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Status",-1)),e("span",{class:u(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",pe.value.status==="approved"?"bg-green-100 text-green-800":pe.value.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},a((pe.value.status||"").toUpperCase()),3)]),e("div",null,[t[617]||(t[617]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Dibuat",-1)),e("p",c$,a(new Date(pe.value.created_at).toLocaleString("id-ID")),1)]),e("div",null,[t[618]||(t[618]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Jabatan Saat Ini",-1)),e("p",g$,a(((Or=(Ir=pe.value.employee)==null?void 0:Ir.jabatan)==null?void 0:Or.nama_jabatan)||pe.value.employee_jabatan||"-"),1)]),e("div",null,[t[619]||(t[619]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Divisi Saat Ini",-1)),e("p",x$,a(((Lr=(Fr=pe.value.employee)==null?void 0:Fr.divisi)==null?void 0:Lr.nama_divisi)||pe.value.employee_divisi||"-"),1)]),e("div",p$,[t[620]||(t[620]=e("label",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Outlet/Unit Saat Ini",-1)),e("p",m$,a(((Ur=(qr=pe.value.employee)==null?void 0:qr.outlet)==null?void 0:Ur.nama_outlet)||pe.value.employee_outlet||"-"),1)])])]),e("div",v$,[t[627]||(t[627]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Approval Flow",-1)),pe.value.approval_flows&&pe.value.approval_flows.length>0?(s(),r("div",f$,[(s(!0),r(I,null,K(pe.value.approval_flows.sort((l,U)=>(l.approval_level||0)-(U.approval_level||0)),(l,U)=>{var oe,me,Re,Je,lt;return s(),r("div",{key:l.id,class:u(["flex items-center justify-between p-3 rounded border",[l.status==="APPROVED"?"bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700":l.status==="REJECTED"?"bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700":"bg-white dark:bg-gray-600 border-gray-200 dark:border-gray-500"]])},[e("div",y$,[e("span",b$," Level "+a(l.approval_level),1),e("div",null,[e("div",h$,a(((oe=l.approver)==null?void 0:oe.nama_lengkap)||((me=l.approver)==null?void 0:me.name)||"Unknown"),1),e("div",k$,a(((Re=l.approver)==null?void 0:Re.email)||"-"),1),(lt=(Je=l.approver)==null?void 0:Je.jabatan)!=null&&lt.nama_jabatan?(s(),r("div",_$,a(l.approver.jabatan.nama_jabatan),1)):i("",!0),l.comments?(s(),r("div",w$,' "'+a(l.comments)+'" ',1)):i("",!0)])]),e("div",C$,[e("div",{class:u(["text-sm font-medium px-2 py-1 rounded-full",[l.status==="APPROVED"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":l.status==="REJECTED"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"]])},a(l.status),3),l.approved_at?(s(),r("div",B$,[t[621]||(t[621]=e("i",{class:"fa fa-check-circle mr-1 text-green-500"},null,-1)),c(" "+a(new Date(l.approved_at).toLocaleString("id-ID")),1)])):i("",!0),l.rejected_at?(s(),r("div",$$,[t[622]||(t[622]=e("i",{class:"fa fa-times-circle mr-1 text-red-500"},null,-1)),c(" "+a(new Date(l.rejected_at).toLocaleString("id-ID")),1)])):i("",!0)])],2)}),128))])):(s(),r("div",N$,[e("div",D$,[e("div",null,[t[623]||(t[623]=e("div",{class:"font-medium text-sm text-gray-900 dark:text-white"},"HOD",-1)),e("div",A$,a(((zr=pe.value.hod_approver)==null?void 0:zr.nama_lengkap)||"-"),1)]),e("div",S$,[e("div",{class:u(["text-sm",(pe.value.hod_approval||"PENDING").toUpperCase()==="APPROVED"?"text-green-600":(pe.value.hod_approval||"PENDING").toUpperCase()==="REJECTED"?"text-red-600":"text-yellow-600"])},a((pe.value.hod_approval||"PENDING").toUpperCase()),3),pe.value.hod_approval_date?(s(),r("div",j$,a(new Date(pe.value.hod_approval_date).toLocaleString("id-ID")),1)):i("",!0)])]),e("div",T$,[e("div",null,[t[624]||(t[624]=e("div",{class:"font-medium text-sm text-gray-900 dark:text-white"},"GM",-1)),e("div",P$,a(((Gr=pe.value.gm_approver)==null?void 0:Gr.nama_lengkap)||"-"),1)]),e("div",V$,[e("div",{class:u(["text-sm",(pe.value.gm_approval||"PENDING").toUpperCase()==="APPROVED"?"text-green-600":(pe.value.gm_approval||"PENDING").toUpperCase()==="REJECTED"?"text-red-600":"text-yellow-600"])},a((pe.value.gm_approval||"PENDING").toUpperCase()),3),pe.value.gm_approval_date?(s(),r("div",E$,a(new Date(pe.value.gm_approval_date).toLocaleString("id-ID")),1)):i("",!0)])]),e("div",R$,[e("div",null,[t[625]||(t[625]=e("div",{class:"font-medium text-sm text-gray-900 dark:text-white"},"GM HR",-1)),e("div",M$,a(((Wr=pe.value.gm_hr_approver)==null?void 0:Wr.nama_lengkap)||"-"),1)]),e("div",I$,[e("div",{class:u(["text-sm",(pe.value.gm_hr_approval||"PENDING").toUpperCase()==="APPROVED"?"text-green-600":(pe.value.gm_hr_approval||"PENDING").toUpperCase()==="REJECTED"?"text-red-600":"text-yellow-600"])},a((pe.value.gm_hr_approval||"PENDING").toUpperCase()),3),pe.value.gm_hr_approval_date?(s(),r("div",O$,a(new Date(pe.value.gm_hr_approval_date).toLocaleString("id-ID")),1)):i("",!0)])]),e("div",F$,[e("div",null,[t[626]||(t[626]=e("div",{class:"font-medium text-sm text-gray-900 dark:text-white"},"BOD",-1)),e("div",L$,a(((Kr=pe.value.bod_approver)==null?void 0:Kr.nama_lengkap)||"-"),1)]),e("div",q$,[e("div",{class:u(["text-sm",(pe.value.bod_approval||"PENDING").toUpperCase()==="APPROVED"?"text-green-600":(pe.value.bod_approval||"PENDING").toUpperCase()==="REJECTED"?"text-red-600":"text-yellow-600"])},a((pe.value.bod_approval||"PENDING").toUpperCase()),3),pe.value.bod_approval_date?(s(),r("div",U$,a(new Date(pe.value.bod_approval_date).toLocaleString("id-ID")),1)):i("",!0)])])]))]),e("div",z$,[t[635]||(t[635]=e("h4",{class:"text-md font-semibold text-gray-900 dark:text-white mb-3"},"Perubahan",-1)),e("div",G$,[pe.value.position_change?(s(),r("div",W$,[t[628]||(t[628]=e("div",{class:"text-xs text-gray-500 dark:text-gray-300 mb-1"},"Jabatan",-1)),e("div",K$,[c(a(ut(pe.value.position_from))+" ➝ ",1),e("span",H$,a(ut(pe.value.position_to)),1)])])):i("",!0),pe.value.level_change?(s(),r("div",J$,[t[629]||(t[629]=e("div",{class:"text-xs text-gray-500 dark:text-gray-300 mb-1"},"Level",-1)),e("div",Y$,[c(a(ut(pe.value.level_from))+" ➝ ",1),e("span",Q$,a(ut(pe.value.level_to)),1)])])):i("",!0),pe.value.department_change?(s(),r("div",Z$,[t[630]||(t[630]=e("div",{class:"text-xs text-gray-500 dark:text-gray-300 mb-1"},"Departemen",-1)),e("div",X$,[c(a(ut(pe.value.department_from))+" ➝ ",1),e("span",eN,a(ut(pe.value.department_to)),1)])])):i("",!0),pe.value.division_change?(s(),r("div",tN,[t[631]||(t[631]=e("div",{class:"text-xs text-gray-500 dark:text-gray-300 mb-1"},"Divisi",-1)),e("div",aN,[c(a(ut(pe.value.division_from))+" ➝ ",1),e("span",sN,a(ut(pe.value.division_to)),1)])])):i("",!0),pe.value.unit_property_change?(s(),r("div",rN,[t[632]||(t[632]=e("div",{class:"text-xs text-gray-500 dark:text-gray-300 mb-1"},"Outlet/Unit",-1)),e("div",lN,[c(a(ut(pe.value.unit_property_from))+" ➝ ",1),e("span",oN,a(ut(pe.value.unit_property_to)),1)])])):i("",!0),pe.value.salary_change?(s(),r("div",nN,[t[633]||(t[633]=e("div",{class:"text-xs text-gray-500 dark:text-gray-300 mb-1"},"Gaji",-1)),e("div",iN,[c("Rp "+a(new Intl.NumberFormat("id-ID").format(pe.value.salary_from||0))+" ➝ ",1),e("span",dN,"Rp "+a(new Intl.NumberFormat("id-ID").format(pe.value.salary_to||0)),1)])])):i("",!0)]),pe.value.employment_effective_date?(s(),r("div",uN,[t[634]||(t[634]=e("span",{class:"font-medium"},"Efektif:",-1)),c(" "+a(new Date(pe.value.employment_effective_date).toLocaleDateString("id-ID")),1)])):i("",!0)]),e("div",cN,[e("button",{onClick:t[115]||(t[115]=l=>yt.value=!1),class:"px-4 py-2 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Tutup "),nl.value?(s(),r(I,{key:0},[e("button",{onClick:dl,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors"},t[636]||(t[636]=[e("i",{class:"fa fa-times mr-2"},null,-1),c("Tolak ")])),e("button",{onClick:il,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors"},t[637]||(t[637]=[e("i",{class:"fa fa-check mr-2"},null,-1),c("Approve ")]))],64)):i("",!0)])]))])])):i("",!0),Xt.value?(s(),r("div",{key:11,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[122]||(t[122]=l=>Xt.value=!1)},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",onClick:t[121]||(t[121]=Q(()=>{},["stop"]))},[e("div",gN,[t[639]||(t[639]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa fa-list-check mr-2 text-emerald-500"}),c(" Semua Personal Movement Pending ")],-1)),e("button",{onClick:t[118]||(t[118]=l=>Xt.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[638]||(t[638]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),e("div",xN,[e("div",pN,[e("div",null,[t[640]||(t[640]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Cari",-1)),de(e("input",{"onUpdate:modelValue":t[119]||(t[119]=l=>ya.value=l),type:"text",placeholder:"Nama karyawan, judul, dll",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 dark:bg-gray-600 dark:text-gray-100"},null,512),[[Ge,ya.value]])])])]),Ga.value.length===0?(s(),r("div",mN,t[641]||(t[641]=[e("i",{class:"fa-solid fa-check-circle text-4xl text-green-500 mb-2"},null,-1),e("p",{class:"text-gray-600 dark:text-gray-300"},"Tidak ada Personal Movement pending",-1)]))):(s(),r("div",vN,[e("div",fN,"Menampilkan "+a(Ga.value.length)+" dari "+a(ft.value.length)+" Personal Movement",1),(s(!0),r(I,null,K(Ga.value,l=>(s(),r("div",{key:"all-pm-"+l.id,class:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors cursor-pointer",onClick:U=>Cs(l)},[e("div",bN,[e("div",hN,[t[642]||(t[642]=e("div",{class:"font-semibold text-gray-900 dark:text-white truncate"},"Personal Movement",-1)),e("div",kN,a(l.employee_name)+" — "+a((l.employment_type||"").replaceAll("_"," ")),1)]),e("div",_N,a(new Date(l.created_at).toLocaleDateString("id-ID")),1)])],8,yN))),128))])),e("div",wN,[e("button",{onClick:t[120]||(t[120]=l=>Xt.value=!1),class:"px-4 py-2 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Tutup ")])])])):i("",!0),Qa.value?(s(),r("div",{key:12,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:yr},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-6xl mx-4 max-h-[90vh] overflow-y-auto",onClick:t[129]||(t[129]=Q(()=>{},["stop"]))},[e("div",{class:"flex items-center justify-between mb-4"},[t[644]||(t[644]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"}," Semua Pengumuman ",-1)),e("button",{onClick:yr,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[643]||(t[643]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),e("div",CN,[e("div",BN,[e("div",null,[t[645]||(t[645]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Cari",-1)),de(e("input",{"onUpdate:modelValue":t[123]||(t[123]=l=>Xe.value.search=l),type:"text",placeholder:"Cari pengumuman...",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:text-gray-100"},null,512),[[Ge,Xe.value.search]])]),e("div",null,[t[647]||(t[647]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Target",-1)),de(e("select",{"onUpdate:modelValue":t[124]||(t[124]=l=>Xe.value.target=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:text-gray-100"},t[646]||(t[646]=[e("option",{value:""},"Semua Target",-1),e("option",{value:"all"},"Semua Karyawan",-1),e("option",{value:"outlet"},"Outlet Tertentu",-1),e("option",{value:"division"},"Divisi Tertentu",-1),e("option",{value:"level"},"Level Tertentu",-1)]),512),[[Te,Xe.value.target]])]),e("div",null,[t[648]||(t[648]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Dari Tanggal",-1)),de(e("input",{"onUpdate:modelValue":t[125]||(t[125]=l=>Xe.value.date_from=l),type:"date",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:text-gray-100"},null,512),[[Ge,Xe.value.date_from]])]),e("div",null,[t[649]||(t[649]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Sampai Tanggal",-1)),de(e("input",{"onUpdate:modelValue":t[126]||(t[126]=l=>Xe.value.date_to=l),type:"date",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:text-gray-100"},null,512),[[Ge,Xe.value.date_to]])])]),e("div",{class:"flex justify-end gap-2 mt-4"},[e("button",{onClick:So,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-md transition-colors"}," Reset Filter "),e("button",{onClick:Ao,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors"}," Terapkan Filter ")])]),Za.value?(s(),r("div",$N,t[650]||(t[650]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-400"},"Memuat pengumuman...",-1)]))):ha.value.length===0?(s(),r("div",NN,t[651]||(t[651]=[e("div",{class:"mb-4 text-gray-400 dark:text-gray-500"},[e("i",{class:"fas fa-bullhorn text-4xl"})],-1),e("p",{class:"text-gray-600 dark:text-gray-400"},"Tidak ada pengumuman yang ditemukan",-1)]))):(s(),r("div",DN,[(s(!0),r(I,null,K(ha.value,l=>(s(),r("div",{key:l.id,class:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:U=>To(l.id)},[e("div",SN,[e("div",jN,[e("h4",TN,a(l.title),1),e("div",PN,[l.creator_avatar?(s(),r("div",{key:0,class:"w-5 h-5 rounded-full overflow-hidden cursor-pointer hover:scale-110 transition-transform",onClick:U=>ys(`/storage/${l.creator_avatar}`)},[e("img",{src:`/storage/${l.creator_avatar}`,alt:l.creator_name,class:"w-full h-full object-cover"},null,8,EN)],8,VN)):(s(),r("div",RN,a(Os(l.creator_name)),1)),e("span",MN,a(l.creator_name||"Unknown"),1)])]),e("span",IN,a(l.created_at_formatted),1)]),l.content?(s(),r("p",ON,a(l.content),1)):i("",!0),l.image_path?(s(),r("div",FN,[e("img",{src:`/storage/${l.image_path}`,alt:l.title,class:"w-full h-32 object-cover rounded-lg"},null,8,LN)])):i("",!0),l.files&&l.files.length>0?(s(),r("div",qN,[t[652]||(t[652]=e("i",{class:"fas fa-paperclip text-gray-400"},null,-1)),e("span",UN,a(l.files.length)+" file terlampir ",1)])):i("",!0),e("div",zN,[e("div",GN,[t[653]||(t[653]=e("i",{class:"fas fa-users text-gray-400"},null,-1)),e("span",WN,a(jo(l.targets)),1)]),t[654]||(t[654]=e("i",{class:"fas fa-chevron-right text-gray-400"},null,-1))])],8,AN))),128))])),Ye.value.last_page>1?(s(),r("div",KN,[e("div",HN," Menampilkan "+a((Ye.value.current_page-1)*Ye.value.per_page+1)+" sampai "+a(Math.min(Ye.value.current_page*Ye.value.per_page,Ye.value.total))+" dari "+a(Ye.value.total)+" pengumuman ",1),e("div",JN,[e("button",{onClick:t[127]||(t[127]=l=>bs(Ye.value.current_page-1)),disabled:Ye.value.current_page<=1,class:"px-3 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"}," Sebelumnya ",8,YN),e("div",QN,[(s(!0),r(I,null,K(Math.min(5,Ye.value.last_page),l=>(s(),r("button",{key:l,onClick:U=>bs(l),class:u(["px-3 py-2 text-sm font-medium rounded-md",l===Ye.value.current_page?"bg-blue-600 text-white":"text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"])},a(l),11,ZN))),128))]),e("button",{onClick:t[128]||(t[128]=l=>bs(Ye.value.current_page+1)),disabled:Ye.value.current_page>=Ye.value.last_page,class:"px-3 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"}," Selanjutnya ",8,XN)])])):i("",!0)])])):i("",!0),i("",!0),i("",!0),$s.value?(s(),r("div",eD,[e("div",tD,[e("div",{class:"flex items-center justify-between mb-4"},[t[694]||(t[694]=e("h4",{class:"text-lg font-semibold text-slate-800"},"Scan QR Code",-1)),e("button",{onClick:cr,class:"text-slate-500 hover:text-slate-700"},t[693]||(t[693]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),o.cameras.length>1?(s(),r("div",aD,[t[695]||(t[695]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Pilih Kamera",-1)),de(e("select",{"onUpdate:modelValue":t[145]||(t[145]=l=>o.selectedCameraId=l),onChange:t[146]||(t[146]=(...l)=>o.switchCamera&&o.switchCamera(...l)),class:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"},[(s(!0),r(I,null,K(o.cameras,l=>(s(),r("option",{key:l.id,value:l.id},a(l.label),9,sD))),128))],544),[[Te,o.selectedCameraId]])])):i("",!0),t[696]||(t[696]=e("div",{id:"training-qr-reader",style:{width:"100%"}},null,-1)),e("div",{class:"mt-4 text-center"},[e("button",{onClick:cr,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors"}," Tutup Kamera ")])])])):i("",!0),i("",!0),Ya.value?(s(),r("div",rD,[e("div",lD,[e("div",oD,[t[705]||(t[705]=e("h4",{class:"text-lg font-semibold text-slate-800"},"Scan QR Code Check-out",-1)),e("button",{onClick:t[154]||(t[154]=l=>Ya.value=!1),class:"text-slate-500 hover:text-slate-700"},t[704]||(t[704]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),Ns.value.length>1?(s(),r("div",nD,[t[706]||(t[706]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Pilih Kamera",-1)),de(e("select",{"onUpdate:modelValue":t[155]||(t[155]=l=>Ds.value=l),onChange:ho,class:"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"},[(s(!0),r(I,null,K(Ns.value,l=>(s(),r("option",{key:l.id,value:l.id},a(l.label),9,iD))),128))],544),[[Te,Ds.value]])])):i("",!0),t[707]||(t[707]=e("div",{id:"training-checkout-qr-reader",style:{width:"100%"}},null,-1)),e("div",dD,[e("button",{onClick:t[156]||(t[156]=l=>Ya.value=!1),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors"}," Tutup Kamera ")])])])):i("",!0),i("",!0),i("",!0),i("",!0),Qe(Le(_s),{visible:vs.value,imgs:fs.value,index:ia.value,onHide:t[170]||(t[170]=l=>vs.value=!1)},null,8,["visible","imgs","index"]),ps.value?(s(),r("div",{key:21,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:ms},[e("div",{class:"bg-white rounded-lg p-6 w-full max-w-5xl mx-4 max-h-[90vh] overflow-y-auto",onClick:t[172]||(t[172]=Q(()=>{},["stop"]))},[e("div",{class:"flex items-center justify-between mb-6"},[t[797]||(t[797]=e("h3",{class:"text-xl font-semibold text-slate-800"},[e("i",{class:"fas fa-certificate mr-2 text-yellow-500"}),c(" Preview Sertifikat ")],-1)),e("button",{onClick:ms,class:"text-slate-500 hover:text-slate-700"},t[796]||(t[796]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",uD,[e("div",cD,[(Jr=(Hr=rt.value)==null?void 0:Hr.template)!=null&&Jr.background_image?(s(),r("img",{key:0,src:`/storage/${rt.value.template.background_image}`,alt:"Certificate Background",class:"absolute inset-0 w-full h-full object-cover object-center"},null,8,gD)):i("",!0),e("div",xD,[t[798]||(t[798]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-4xl font-bold text-gray-800 mb-2"}," SERTIFIKAT "),e("div",{class:"w-24 h-1 bg-blue-600 mx-auto"})],-1)),e("div",pD,[e("div",mD,a(((Qr=(Yr=rt.value)==null?void 0:Yr.user)==null?void 0:Qr.nama_lengkap)||"John Doe"),1),e("div",vD,a(((Xr=(Zr=rt.value)==null?void 0:Zr.course)==null?void 0:Xr.title)||"Sample Training Course"),1),e("div",fD,a((el=rt.value)!=null&&el.issued_at?new Date(rt.value.issued_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}):"18 September 2025"),1),e("div",yD,a(((tl=rt.value)==null?void 0:tl.training_location)||"Lokasi Training"),1)]),e("div",bD,[e("div",hD,a(((al=rt.value)==null?void 0:al.certificate_number)||"CERT-SAMPLE-001"),1),e("div",kD,a(((sl=rt.value)==null?void 0:sl.instructor_name)||"Jane Smith"),1)])])])]),e("div",_D,[e("button",{onClick:t[171]||(t[171]=l=>bo(rt.value)),class:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},t[799]||(t[799]=[e("i",{class:"fas fa-download mr-2"},null,-1),c(" Download PDF ")])),e("button",{onClick:ms,class:"inline-flex items-center px-4 py-2 bg-gray-300 text-gray-700 text-sm font-medium rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"}," Tutup ")])])])):i("",!0),i("",!0),t[838]||(t[838]=e("div",{class:"px-4 md:px-6 py-4 text-center"},[e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Crafted with ❤️ by IT Department-Justus Group © 2025 ")],-1)),ta.value?(s(),r("div",{key:23,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[183]||(t[183]=l=>ta.value=!1)},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-4xl mx-4 max-h-[90vh] overflow-hidden",onClick:t[182]||(t[182]=Q(()=>{},["stop"]))},[e("div",wD,[t[818]||(t[818]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},[e("i",{class:"fa-solid fa-list-check mr-2 text-blue-500"}),c(" Semua Approval Pending ")],-1)),e("button",{onClick:t[176]||(t[176]=l=>ta.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},t[817]||(t[817]=[e("i",{class:"fa-solid fa-times text-xl"},null,-1)]))]),e("div",CD,[e("div",BD,[e("div",$D,[de(e("input",{"onUpdate:modelValue":t[177]||(t[177]=l=>aa.value=l),type:"text",placeholder:"Cari berdasarkan nama, jenis izin, atau alasan...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"},null,512),[[Ge,aa.value]]),t[819]||(t[819]=e("i",{class:"fa-solid fa-search absolute left-3 top-3 text-gray-400"},null,-1))]),e("div",ND,[e("div",DD,[t[821]||(t[821]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Tipe:",-1)),de(e("select",{"onUpdate:modelValue":t[178]||(t[178]=l=>sa.value=l),class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-sm dark:bg-gray-700 dark:text-white"},t[820]||(t[820]=[e("option",{value:""},"Semua",-1),e("option",{value:"leave"},"Izin/Cuti",-1),e("option",{value:"hrd_leave"},"Izin/Cuti HRD",-1),e("option",{value:"correction"},"Koreksi",-1)]),512),[[Te,sa.value]])]),e("div",AD,[t[823]||(t[823]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Tanggal:",-1)),de(e("select",{"onUpdate:modelValue":t[179]||(t[179]=l=>ra.value=l),class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-sm dark:bg-gray-700 dark:text-white"},t[822]||(t[822]=[e("option",{value:""},"Semua",-1),e("option",{value:"today"},"Hari ini",-1),e("option",{value:"week"},"Minggu ini",-1),e("option",{value:"month"},"Bulan ini",-1)]),512),[[Te,ra.value]])]),e("div",SD,[t[825]||(t[825]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Urutkan:",-1)),de(e("select",{"onUpdate:modelValue":t[180]||(t[180]=l=>ba.value=l),class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-sm dark:bg-gray-700 dark:text-white"},t[824]||(t[824]=[e("option",{value:"newest"},"Terbaru",-1),e("option",{value:"oldest"},"Terlama",-1),e("option",{value:"name"},"Nama A-Z",-1),e("option",{value:"date"},"Tanggal Izin",-1)]),512),[[Te,ba.value]])]),e("button",{onClick:br,class:"px-3 py-1 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700"},t[826]||(t[826]=[e("i",{class:"fa-solid fa-times mr-1"},null,-1),c("Reset ")]))])]),Ha.value?(s(),r("div",jD,t[827]||(t[827]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"},null,-1),e("p",{class:"text-sm mt-2 text-gray-600 dark:text-gray-400"},"Memuat data...",-1)]))):It.value.length===0?(s(),r("div",TD,t[828]||(t[828]=[e("i",{class:"fa-solid fa-check-circle text-4xl text-green-500 mb-4"},null,-1),e("p",{class:"text-gray-600 dark:text-gray-400"},"Tidak ada approval pending",-1)]))):la.value.length>0?(s(),r("div",PD,[e("div",VD," Menampilkan "+a(la.value.length)+" dari "+a(It.value.length)+" approval ",1),(s(!0),r(I,null,K(la.value,l=>{var U,oe;return s(),r("div",{key:`all-approval-${l.type}-${l.id}`,class:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[e("div",ED,[e("div",RD,[e("div",MD,[l.type==="leave"?(s(),r("i",ID)):l.type==="hrd_leave"?(s(),r("i",OD)):l.type==="correction"?(s(),r("i",FD)):i("",!0)]),e("div",null,[e("div",LD,a(l.employee_name||((U=l.user)==null?void 0:U.nama_lengkap)),1),e("div",qD,a(l.typeLabel),1)])]),e("div",UD,[e("div",zD,a(new Date(l.created_at||l.tanggal).toLocaleDateString("id-ID")),1),e("div",GD,a(new Date(l.created_at||l.tanggal).toLocaleTimeString("id-ID")),1)])]),e("div",WD,[l.type==="leave"||l.type==="hrd_leave"?(s(),r("div",KD,[e("div",HD,[e("span",JD,a((oe=l.leave_type)==null?void 0:oe.name),1),c(" • "+a(l.duration_text)+" • ",1),l.type==="hrd_leave"?(s(),r("span",YD,"HRD Approval")):(s(),r("span",QD,"Supervisor Approval"))]),e("div",ZD,a(new Date(l.date_from).toLocaleDateString("id-ID"))+" - "+a(new Date(l.date_to).toLocaleDateString("id-ID")),1)])):l.type==="correction"?(s(),r("div",XD,[e("div",eA,a(l.nama_outlet)+" • "+a(new Date(l.tanggal).toLocaleDateString("id-ID")),1),e("div",tA,a(vr(l)),1),l.type==="attendance"?(s(),r("div",aA,[t[831]||(t[831]=e("div",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Detail Koreksi:",-1)),e("div",sA,[e("div",rA,[t[829]||(t[829]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Dari:",-1)),e("span",lA,a(fr(l.old_value)),1)]),e("div",oA,[t[830]||(t[830]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Ke:",-1)),e("span",nA,a(fr(l.new_value)),1)])])])):i("",!0),l.reason?(s(),r("div",iA,[t[832]||(t[832]=e("div",{class:"font-medium mb-1 text-blue-700"},"Alasan Koreksi:",-1)),e("div",dA,a(l.reason),1)])):i("",!0)])):i("",!0)]),e("div",uA,[e("button",{onClick:me=>fo(l),class:"flex-1 bg-green-500 text-white px-3 py-2 rounded-md hover:bg-green-600 transition-colors text-sm"},t[833]||(t[833]=[e("i",{class:"fa-solid fa-check mr-1"},null,-1),c("Setujui ")]),8,cA),e("button",{onClick:me=>yo(l),class:"flex-1 bg-red-500 text-white px-3 py-2 rounded-md hover:bg-red-600 transition-colors text-sm"},t[834]||(t[834]=[e("i",{class:"fa-solid fa-times mr-1"},null,-1),c("Tolak ")]),8,gA)])])}),128))])):(s(),r("div",xA,[t[836]||(t[836]=e("i",{class:"fa-solid fa-search text-4xl text-gray-400 mb-4"},null,-1)),t[837]||(t[837]=e("p",{class:"text-gray-600 dark:text-gray-400"},"Tidak ada approval yang sesuai dengan filter",-1)),e("button",{onClick:br,class:"mt-2 px-4 py-2 text-sm text-blue-600 hover:text-blue-800 border border-blue-300 rounded-md hover:bg-blue-50"},t[835]||(t[835]=[e("i",{class:"fa-solid fa-times mr-1"},null,-1),c("Reset Filter ")]))]))]),e("div",pA,[e("div",mA,[e("div",vA,[la.value.length===It.value.length?(s(),r("span",fA," Total: "+a(It.value.length)+" approval pending ",1)):(s(),r("span",yA," Menampilkan "+a(la.value.length)+" dari "+a(It.value.length)+" approval ",1))]),e("button",{onClick:t[181]||(t[181]=l=>ta.value=!1),class:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors"}," Tutup ")])])])])):i("",!0)]}),_:1}))}},EA=$t(bA,[["__scopeId","data-v-109a9db3"]]);export{EA as default};
