import{r as v,k as T,w as L,A as N,B as r,C as y,D as e,O as U,L as d,E as u,H as n,G as m,J as g,N as a,I as S,a6 as _,V as k,F as h,M as w,x as E,Q as A,S as B,W as V}from"./vendor-vue-g7iCcTkf.js";import{A as M}from"./AppLayout-BKllqouQ.js";import"./vendor-utils-CpgP2uT4.js";import"./app-DlrnVByK.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-10Z7fBeb.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const R={class:"flex items-center justify-between"},P={class:"py-12"},G={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},j={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},q={class:"p-6"},D={class:"space-y-6"},$={key:0,class:"mt-1 text-sm text-red-600"},F={key:0,class:"mt-1 text-sm text-red-600"},H={key:0,class:"mt-1 text-sm text-red-600"},J={class:"space-y-3"},W={class:"flex items-center"},K={class:"flex items-center"},Q={key:0,class:"mt-1 text-sm text-red-600"},z={class:"relative"},X={key:0,class:"mt-1 text-sm text-red-600"},Y={class:"mt-1 text-xs text-gray-500"},Z={key:0},I={class:"border border-gray-300 rounded-md p-4 max-h-60 overflow-y-auto"},ee={class:"space-y-2"},te={class:"flex items-center"},se=["id","value"],le=["for"],oe={key:0,class:"mt-1 text-sm text-red-600"},re={key:1},de={class:"space-y-3"},ie={class:"flex-1"},ae={class:"block text-sm font-medium text-gray-700"},ue={class:"flex-1"},ne={class:"relative"},me=["id","onUpdate:modelValue"],be={key:0,class:"mt-1 text-sm text-red-600"},ge={key:0,class:"mt-1 text-sm text-red-600"},ce={class:"mt-8 flex justify-end space-x-3"},xe=["disabled"],ye={key:0},pe={key:1},Oe={__name:"CreateCategory",props:{divisions:Array,outlets:Array,errors:Object},setup(o){const b=o,c=v(!1),x=v(!1),s=T({name:"",division:"",subcategory:"",budget_type:"GLOBAL",budget_limit:"",description:"",selected_outlets:[],outlet_budgets:{}}),f=i=>{const t=b.outlets.find(l=>l.id_outlet==i);return t?t.nama_outlet:`Outlet ${i}`},C=()=>{x.value?(s.selected_outlets=b.outlets.map(i=>i.id_outlet),b.outlets.forEach(i=>{s.outlet_budgets[i.id_outlet]=""})):(s.selected_outlets=[],s.outlet_budgets={})};L(()=>s.selected_outlets,i=>{x.value=i.length===b.outlets.length&&b.outlets.length>0,i.forEach(t=>{t in s.outlet_budgets||(s.outlet_budgets[t]="")}),Object.keys(s.outlet_budgets).forEach(t=>{i.includes(parseInt(t))||delete s.outlet_budgets[t]})},{deep:!0});const O=()=>{if(s.budget_type==="PER_OUTLET"){if(!s.selected_outlets||s.selected_outlets.length===0){alert("Please select at least one outlet for per-outlet budget type.");return}for(const i of s.selected_outlets){const t=s.outlet_budgets[i];if(!t||t<=0){alert(`Please enter a valid budget amount for ${f(i)}.`);return}}}c.value=!0,V.post("/budget-management/category",s,{onFinish:()=>{c.value=!1},onError:i=>{}})};return(i,t)=>(r(),N(M,{title:"Create Budget Category"},{header:y(()=>[e("div",R,[t[10]||(t[10]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Create Budget Category ",-1)),E(A(B),{href:"/budget-management",class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"},{default:y(()=>t[9]||(t[9]=[e("i",{class:"fa fa-arrow-left mr-2"},null,-1),m(" Back to Budget Management ")])),_:1})])]),default:y(()=>[e("div",P,[e("div",G,[e("div",j,[e("div",q,[e("form",{onSubmit:U(O,["prevent"])},[e("div",D,[e("div",null,[t[11]||(t[11]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"},[m(" Category Name "),e("span",{class:"text-red-500"},"*")],-1)),n(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=l=>s.name=l),type:"text",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter category name",required:""},null,512),[[g,s.name]]),o.errors.name?(r(),d("div",$,a(o.errors.name),1)):u("",!0)]),e("div",null,[t[13]||(t[13]=e("label",{for:"division",class:"block text-sm font-medium text-gray-700 mb-2"},[m(" Division "),e("span",{class:"text-red-500"},"*")],-1)),n(e("select",{id:"division","onUpdate:modelValue":t[1]||(t[1]=l=>s.division=l),class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:""},t[12]||(t[12]=[e("option",{value:""},"Select division",-1),e("option",{value:"GENERAL"},"General",-1),e("option",{value:"MARKETING"},"Marketing",-1),e("option",{value:"MAINTENANCE"},"Maintenance",-1),e("option",{value:"ASSET"},"Asset",-1),e("option",{value:"PROJECT_ENHANCEMENT"},"Project Enhancement",-1)]),512),[[S,s.division]]),o.errors.division?(r(),d("div",F,a(o.errors.division),1)):u("",!0)]),e("div",null,[t[14]||(t[14]=e("label",{for:"subcategory",class:"block text-sm font-medium text-gray-700 mb-2"},[m(" Subcategory "),e("span",{class:"text-red-500"},"*")],-1)),n(e("input",{id:"subcategory","onUpdate:modelValue":t[2]||(t[2]=l=>s.subcategory=l),type:"text",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter subcategory",required:""},null,512),[[g,s.subcategory]]),o.errors.subcategory?(r(),d("div",H,a(o.errors.subcategory),1)):u("",!0)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[m(" Budget Type "),e("span",{class:"text-red-500"},"*")],-1)),e("div",J,[e("div",W,[n(e("input",{id:"budget_type_global","onUpdate:modelValue":t[3]||(t[3]=l=>s.budget_type=l),type:"radio",value:"GLOBAL",class:"focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300"},null,512),[[_,s.budget_type]]),t[15]||(t[15]=e("label",{for:"budget_type_global",class:"ml-3 block text-sm font-medium text-gray-700"},[e("div",{class:"flex items-center"},[e("i",{class:"fa fa-globe text-blue-600 mr-2"}),e("div",null,[e("div",{class:"font-medium"},"Global Budget"),e("div",{class:"text-xs text-gray-500"},"Budget dihitung total semua outlet dalam kategori")])])],-1))]),e("div",K,[n(e("input",{id:"budget_type_per_outlet","onUpdate:modelValue":t[4]||(t[4]=l=>s.budget_type=l),type:"radio",value:"PER_OUTLET",class:"focus:ring-orange-500 h-4 w-4 text-orange-600 border-gray-300"},null,512),[[_,s.budget_type]]),t[16]||(t[16]=e("label",{for:"budget_type_per_outlet",class:"ml-3 block text-sm font-medium text-gray-700"},[e("div",{class:"flex items-center"},[e("i",{class:"fa fa-building text-orange-600 mr-2"}),e("div",null,[e("div",{class:"font-medium"},"Per-Outlet Budget"),e("div",{class:"text-xs text-gray-500"},"Setiap outlet memiliki budget terpisah dalam kategori")])])],-1))])]),o.errors.budget_type?(r(),d("div",Q,a(o.errors.budget_type),1)):u("",!0)]),e("div",null,[t[19]||(t[19]=e("label",{for:"budget_limit",class:"block text-sm font-medium text-gray-700 mb-2"},[m(" Budget Limit "),e("span",{class:"text-red-500"},"*")],-1)),e("div",z,[t[18]||(t[18]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"Rp")],-1)),n(e("input",{id:"budget_limit","onUpdate:modelValue":t[5]||(t[5]=l=>s.budget_limit=l),type:"number",step:"0.01",min:"0",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"0.00",required:""},null,512),[[g,s.budget_limit]])]),o.errors.budget_limit?(r(),d("div",X,a(o.errors.budget_limit),1)):u("",!0),e("p",Y,a(s.budget_type==="GLOBAL"?"Total budget untuk semua outlet":"Budget referensi untuk alokasi per outlet"),1)]),s.budget_type==="PER_OUTLET"?(r(),d("div",Z,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[m(" Select Outlets "),e("span",{class:"text-red-500"},"*")],-1)),e("div",I,[e("div",ee,[e("div",te,[n(e("input",{id:"select_all_outlets","onUpdate:modelValue":t[6]||(t[6]=l=>x.value=l),type:"checkbox",onChange:C,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,544),[[k,x.value]]),t[20]||(t[20]=e("label",{for:"select_all_outlets",class:"ml-2 block text-sm font-medium text-gray-700"}," Select All Outlets ",-1))]),t[21]||(t[21]=e("hr",{class:"my-2"},null,-1)),(r(!0),d(h,null,w(o.outlets,l=>(r(),d("div",{key:l.id_outlet,class:"flex items-center"},[n(e("input",{id:`outlet_${l.id_outlet}`,"onUpdate:modelValue":t[7]||(t[7]=p=>s.selected_outlets=p),value:l.id_outlet,type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,8,se),[[k,s.selected_outlets]]),e("label",{for:`outlet_${l.id_outlet}`,class:"ml-2 block text-sm text-gray-700"},a(l.nama_outlet),9,le)]))),128))])]),o.errors.selected_outlets?(r(),d("div",oe,a(o.errors.selected_outlets),1)):u("",!0),t[23]||(t[23]=e("p",{class:"mt-1 text-xs text-gray-500"}," Select outlets that will have individual budget allocations for this category. ",-1))])):u("",!0),s.budget_type==="PER_OUTLET"&&s.selected_outlets.length>0?(r(),d("div",re,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[m(" Budget Allocation per Outlet "),e("span",{class:"text-red-500"},"*")],-1)),e("div",de,[(r(!0),d(h,null,w(s.selected_outlets,l=>(r(),d("div",{key:l,class:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg"},[e("div",ie,[e("label",ae,a(f(l)),1)]),e("div",ue,[e("div",ne,[t[24]||(t[24]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"Rp")],-1)),n(e("input",{id:`budget_${l}`,"onUpdate:modelValue":p=>s.outlet_budgets[l]=p,type:"number",step:"0.01",min:"0",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"0.00",required:""},null,8,me),[[g,s.outlet_budgets[l]]])])])]))),128))]),o.errors.outlet_budgets?(r(),d("div",be,a(o.errors.outlet_budgets),1)):u("",!0),t[26]||(t[26]=e("p",{class:"mt-1 text-xs text-gray-500"}," Set individual budget allocation for each selected outlet. ",-1))])):u("",!0),e("div",null,[t[27]||(t[27]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"}," Description ",-1)),n(e("textarea",{id:"description","onUpdate:modelValue":t[8]||(t[8]=l=>s.description=l),rows:"3",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter description (optional)"},null,512),[[g,s.description]]),o.errors.description?(r(),d("div",ge,a(o.errors.description),1)):u("",!0)])]),e("div",ce,[E(A(B),{href:"/budget-management",class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded"},{default:y(()=>t[28]||(t[28]=[m(" Cancel ")])),_:1}),e("button",{type:"submit",disabled:c.value,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50"},[c.value?(r(),d("span",ye,"Creating...")):(r(),d("span",pe,"Create Category"))],8,xe)])],32)])])])])]),_:1}))}};export{Oe as default};
