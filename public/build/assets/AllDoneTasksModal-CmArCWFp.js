import{r as n,w as D,L as i,E as h,B as d,D as e,x as P,H as $,J as N,F as _,M as w,N as a,l as B}from"./vendor-vue-g7iCcTkf.js";import{a as M}from"./vendor-utils-CpgP2uT4.js";import S from"./TaskDetailModal-CVuZALLV.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LightboxModal-C05wjdKL.js";const A={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40"},V={class:"bg-white rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-y-auto relative animate-fadeIn"},j={class:"p-6"},I={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-4 gap-2"},O={class:"overflow-x-auto"},E={class:"min-w-full text-sm rounded-xl overflow-hidden"},F=["onClick"],L={class:"py-2 px-3"},H={class:"py-2 px-3"},J={class:"py-2 px-3"},R={class:"py-2 px-3"},U={class:"py-2 px-3"},q={class:"py-2 px-3 text-center"},G=["onClick"],K={key:0,class:"flex justify-between items-center mt-2"},Q=["disabled"],W={class:"text-xs"},X=["disabled"],Y=10,Z={__name:"AllDoneTasksModal",props:{show:Boolean},emits:["close"],setup(f,{emit:ee}){const k=f,b=n([]),o=n(1),r=n(1),c=n(""),v=n(null),p=n(!1),m=n({});async function x(){const l=await M.get("/api/maintenance-tasks/done",{params:{page:o.value,perPage:Y,search:c.value}});b.value=l.data.data,r.value=l.data.lastPage}function y(l){l>=1&&l<=r.value&&(o.value=l,x())}function g(l){m.value=l,p.value=!0}function T(l){switch(l){case"Done":return"bg-green-100 text-green-700";case"Overdue":return"bg-red-100 text-red-700";case"PO":return"bg-blue-100 text-blue-700";case"PR":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}}function C(){clearTimeout(v.value),v.value=setTimeout(()=>{o.value=1,x()},400)}return D(()=>k.show,l=>{l&&x()}),(l,t)=>f.show?(d(),i("div",A,[e("div",V,[e("button",{onClick:t[0]||(t[0]=s=>l.$emit("close")),class:"absolute top-3 right-3 text-gray-400 hover:text-red-500 text-xl z-10"},t[5]||(t[5]=[e("i",{class:"fas fa-times"},null,-1)])),e("div",j,[e("div",I,[t[6]||(t[6]=e("h2",{class:"text-xl font-bold"},"Semua Tasks Selesai",-1)),$(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>c.value=s),onInput:C,type:"text",placeholder:"Cari task...",class:"border rounded px-3 py-1 text-sm w-full md:w-64"},null,544),[[N,c.value]])]),e("div",O,[e("table",E,[t[8]||(t[8]=e("thead",{class:"bg-gray-100 sticky top-0 z-10"},[e("tr",null,[e("th",{class:"py-2 px-3 text-left font-bold"},"Task Number"),e("th",{class:"py-2 px-3 text-left font-bold"},"Title"),e("th",{class:"py-2 px-3 text-left font-bold"},"Outlet"),e("th",{class:"py-2 px-3 text-left font-bold"},"Assigned To"),e("th",{class:"py-2 px-3 text-left font-bold"},"Due Date"),e("th",{class:"py-2 px-3 text-left font-bold"},"Status"),e("th",{class:"py-2 px-3 text-center font-bold"},"Action")])],-1)),e("tbody",null,[(d(!0),i(_,null,w(b.value,s=>(d(),i("tr",{key:s.id,class:"hover:bg-blue-50 transition"},[e("td",{class:"py-2 px-3 font-semibold text-blue-700 cursor-pointer underline",onClick:u=>g(s)},a(s.task_number),9,F),e("td",L,a(s.title),1),e("td",H,a(s.outlet),1),e("td",J,[(d(!0),i(_,null,w(s.assigned_to,u=>(d(),i("span",{key:u,class:"inline-block bg-indigo-100 text-indigo-700 rounded px-2 py-0.5 mr-1 text-xs font-semibold"},a(u),1))),128))]),e("td",R,a(s.due_date),1),e("td",U,[e("span",{class:B(["badge",T(s.status)])},a(s.status),3)]),e("td",q,[e("button",{class:"p-2 rounded hover:bg-blue-100 transition",onClick:u=>g(s)},t[7]||(t[7]=[e("i",{class:"fas fa-eye text-blue-600"},null,-1)]),8,G)])]))),128))])])]),r.value>1?(d(),i("div",K,[e("button",{disabled:o.value===1,onClick:t[2]||(t[2]=s=>y(o.value-1)),class:"px-2 py-1 rounded bg-gray-100 text-gray-600 disabled:opacity-50"},"Prev",8,Q),e("span",W,"Page "+a(o.value)+" of "+a(r.value),1),e("button",{disabled:o.value===r.value,onClick:t[3]||(t[3]=s=>y(o.value+1)),class:"px-2 py-1 rounded bg-gray-100 text-gray-600 disabled:opacity-50"},"Next",8,X)])):h("",!0),P(S,{task:m.value,show:p.value,onClose:t[4]||(t[4]=s=>p.value=!1)},null,8,["task","show"])])])])):h("",!0)}},ne=z(Z,[["__scopeId","data-v-351b4f3b"]]);export{ne as default};
