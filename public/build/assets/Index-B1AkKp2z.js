import{A as C}from"./AppLayout-CCl6N_RX.js";import{r as D,A as B,B as a,C as S,D as t,G as o,L as r,E as f,F as I,M as L,N as i,W as d}from"./vendor-vue-g7iCcTkf.js";import{S as x}from"./app-DvUgkxHf.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-oDgFzWKX.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const N={class:"max-w-7xl mx-auto py-8 px-2"},T={class:"bg-white rounded-2xl shadow-2xl overflow-x-auto transition-all"},W={class:"w-full min-w-full divide-y divide-gray-200"},A={key:0},F={class:"px-6 py-3"},G={class:"px-6 py-3"},U={class:"px-6 py-3"},E={class:"px-6 py-3"},V={class:"px-6 py-3"},$={class:"px-6 py-3"},M={class:"px-6 py-3"},R={class:"px-6 py-3"},Y=["onClick"],j=["onClick","disabled"],q={key:0},H={key:1},st={__name:"Index",props:{data:Array,canDelete:Boolean},setup(g){const c=g,u=D(null);function m(){d.visit(route("internal-use-waste.create"))}function b(){d.visit(route("internal-use-waste.report"))}function h(){d.visit(route("internal-use-waste.report-waste-spoil"))}function y(e){d.visit(route("internal-use-waste.show",e))}function k(e){x.fire({title:"Yakin hapus data ini?",text:"Stok akan di-rollback otomatis!",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, hapus",cancelButtonText:"Batal",reverseButtons:!0}).then(async s=>{var n,p;if(s.isConfirmed){u.value=e;try{const l=await axios.delete(`/internal-use-waste/${e}`);if(l.data&&l.data.success)x.fire({icon:"success",title:"Berhasil",text:"Data berhasil dihapus dan stok di-rollback!",timer:1500,showConfirmButton:!1}),setTimeout(()=>d.reload(),1200);else throw new Error("Gagal menghapus data")}catch(l){x.fire({icon:"error",title:"Gagal",text:((p=(n=l.response)==null?void 0:n.data)==null?void 0:p.message)||l.message||"Gagal menghapus data"})}finally{u.value=null}}})}function w(e){return e?new Date(e).toLocaleDateString("id-ID"):"-"}function _(e){return e==null?"-":Number(e)%1===0?Number(e):Number(e).toLocaleString("id-ID",{minimumFractionDigits:0,maximumFractionDigits:2})}function v(e){return e==="internal_use"?"Internal Use":e==="spoil"?"Spoil":e==="waste"?"Waste":e}return(e,s)=>(a(),B(C,null,{default:S(()=>[t("div",N,[t("div",{class:"flex justify-between items-center mb-6"},[s[2]||(s[2]=t("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[t("i",{class:"fa-solid fa-recycle text-green-500"}),o(" Internal Use & Waste ")],-1)),t("div",{class:"flex gap-2"},[t("button",{onClick:b,class:"bg-blue-500 text-white px-4 py-2 rounded-xl shadow-lg hover:bg-blue-600 transition-all font-semibold"},s[0]||(s[0]=[t("i",{class:"fa fa-file-lines mr-1"},null,-1),o(" Laporan Internal Use ")])),t("button",{onClick:h,class:"bg-yellow-500 text-white px-4 py-2 rounded-xl shadow-lg hover:bg-yellow-600 transition-all font-semibold"},s[1]||(s[1]=[t("i",{class:"fa fa-file-lines mr-1"},null,-1),o(" Laporan Spoil & Waste ")])),t("button",{onClick:m,class:"bg-gradient-to-r from-green-500 to-green-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"}," + Tambah Baru ")])]),t("div",T,[t("table",W,[s[7]||(s[7]=t("thead",{class:"bg-gradient-to-r from-green-50 to-green-100"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-bold text-green-700 uppercase tracking-wider rounded-tl-2xl"},"Tanggal"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-green-700 uppercase tracking-wider"},"Tipe"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-green-700 uppercase tracking-wider"},"Warehouse"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-green-700 uppercase tracking-wider"},"Item"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-green-700 uppercase tracking-wider"},"Qty"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-green-700 uppercase tracking-wider"},"Unit"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-green-700 uppercase tracking-wider"},"Catatan"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-green-700 uppercase tracking-wider rounded-tr-2xl"},"Aksi")])],-1)),t("tbody",null,[c.data.length?f("",!0):(a(),r("tr",A,s[3]||(s[3]=[t("td",{colspan:"8",class:"text-center py-10 text-green-300"},"Tidak ada data.",-1)]))),(a(!0),r(I,null,L(c.data,n=>(a(),r("tr",{key:n.id},[t("td",F,i(w(n.date)),1),t("td",G,i(v(n.type)),1),t("td",U,i(n.warehouse_name),1),t("td",E,i(n.item_name),1),t("td",V,i(_(n.qty)),1),t("td",$,i(n.unit_name),1),t("td",M,i(n.notes),1),t("td",R,[t("button",{class:"inline-flex items-center btn btn-xs bg-green-100 text-green-800 hover:bg-green-200 rounded px-2 py-1 font-semibold transition",onClick:p=>y(n.id)},s[4]||(s[4]=[t("i",{class:"fa fa-eye mr-1"},null,-1),o(" Detail ")]),8,Y),c.canDelete?(a(),r("button",{key:0,class:"inline-flex items-center btn btn-xs bg-red-100 text-red-700 hover:bg-red-200 rounded px-2 py-1 font-semibold transition ml-2",onClick:p=>k(n.id),disabled:u.value===n.id},[u.value===n.id?(a(),r("span",q,s[5]||(s[5]=[t("i",{class:"fa fa-spinner fa-spin mr-1"},null,-1),o(" Menghapus...")]))):(a(),r("span",H,s[6]||(s[6]=[t("i",{class:"fa fa-trash mr-1"},null,-1),o(" Hapus")])))],8,j)):f("",!0)])]))),128))])])])])]),_:1}))}};export{st as default};
