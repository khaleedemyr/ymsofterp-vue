import{r as u,W as m,c as z,A as W,B as s,C as Y,D as e,L as a,E as F,x as J,G as v,H as y,J as q,F as w,M as h,N as i,I as B,l as Q}from"./vendor-vue-g7iCcTkf.js";import{l as X}from"./lodash-DB3HVzpp.js";import{S as _}from"./app-xIQ7JztA.js";import{A as Z}from"./AppLayout-BdiuRSin.js";import ee from"./LockedBudgetFormModal-rIZCOm37.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./ProfileUpdateModal-LiNpoaCg.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const oe={class:"max-w-7xl w-full mx-auto py-8 px-2"},le={class:"mb-4"},se={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},ae=["value"],re=["value"],ne={class:"bg-white rounded-2xl shadow-2xl overflow-x-auto transition-all"},ue={class:"w-full min-w-full divide-y divide-gray-200"},ie={key:0},de={class:"px-6 py-3 font-semibold"},ce={class:"px-6 py-3"},pe={class:"px-6 py-3"},be={class:"px-6 py-3"},fe={class:"font-semibold text-green-600"},ge={class:"px-6 py-3 text-gray-500"},xe={class:"px-6 py-3"},me={class:"flex gap-2"},ve=["onClick"],ye=["onClick"],we={key:0,class:"flex justify-end mt-4 gap-2"},he=["disabled","onClick","innerHTML"],ke={__name:"Index",props:{budgets:Object,categories:Array,subCategories:Array,outlets:Array,filters:Object},setup(r){var A,E,S,I;const n=r,p=u(((A=n.filters)==null?void 0:A.search)||""),b=u(((E=n.filters)==null?void 0:E.category_id)||""),f=u(((S=n.filters)==null?void 0:S.outlet_id)||""),g=u(((I=n.filters)==null?void 0:I.per_page)||10),x=u(!1),k=u("create"),C=u(null),L=X.debounce(()=>{c()},400);function V(){L()}function c(){const l={search:p.value,category_id:b.value,outlet_id:f.value,per_page:g.value};m.get("/locked-budget-food-categories",l,{preserveState:!0,replace:!0})}function H(){p.value="",b.value="",f.value="",g.value=10,c()}function N(l){l&&m.visit(l,{preserveState:!0,replace:!0})}function O(){k.value="create",C.value=null,x.value=!0}function U(l){k.value="edit",C.value=l,x.value=!0}async function $(l){var t,d;(await _.fire({title:"Hapus Budget?",text:`Yakin ingin menghapus budget untuk ${(t=l.category)==null?void 0:t.name} - ${(d=l.outlet)==null?void 0:d.nama_outlet}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed&&m.delete(`/locked-budget-food-categories/${l.id}`,{onSuccess:()=>{_.fire("Berhasil","Budget berhasil dihapus!","success")},onError:()=>{_.fire("Error","Terjadi kesalahan saat menghapus data","error")}})}function j(l){return new Intl.NumberFormat("id-ID").format(l)}function G(l){return l?new Date(l).toLocaleDateString("id-ID"):"-"}function P(){x.value=!1}function R(){m.reload({preserveState:!0,replace:!0})}const T=z(()=>!n.budgets||!n.budgets.data?[]:n.budgets.data);return(l,o)=>(s(),W(Z,{title:"Locked Budget Food Categories"},{default:Y(()=>[e("div",oe,[e("div",{class:"flex justify-between items-center mb-6"},[o[5]||(o[5]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-lock text-blue-500"}),v(" Locked Budget Food Categories ")],-1)),e("button",{onClick:O,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"},o[4]||(o[4]=[e("i",{class:"fas fa-plus mr-2"},null,-1),v(" Tambah Budget ")]))]),e("div",le,[y(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>p.value=t),onInput:V,type:"text",placeholder:"Cari kategori/outlet/budget...",class:"w-full px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},null,544),[[q,p.value]])]),e("div",se,[e("div",null,[o[7]||(o[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Category",-1)),y(e("select",{"onUpdate:modelValue":o[1]||(o[1]=t=>b.value=t),onChange:c,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[o[6]||(o[6]=e("option",{value:""},"All Categories",-1)),(s(!0),a(w,null,h(r.categories,t=>(s(),a("option",{key:t.id,value:t.id},i(t.name),9,ae))),128))],544),[[B,b.value]])]),e("div",null,[o[9]||(o[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Outlet",-1)),y(e("select",{"onUpdate:modelValue":o[2]||(o[2]=t=>f.value=t),onChange:c,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[o[8]||(o[8]=e("option",{value:""},"All Outlets",-1)),(s(!0),a(w,null,h(r.outlets,t=>(s(),a("option",{key:t.id_outlet,value:t.id_outlet},i(t.nama_outlet),9,re))),128))],544),[[B,f.value]])]),e("div",null,[o[11]||(o[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Per Page",-1)),y(e("select",{"onUpdate:modelValue":o[3]||(o[3]=t=>g.value=t),onChange:c,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},o[10]||(o[10]=[e("option",{value:"10"},"10",-1),e("option",{value:"25"},"25",-1),e("option",{value:"50"},"50",-1),e("option",{value:"100"},"100",-1)]),544),[[B,g.value]])])]),e("div",{class:"mb-4"},[e("button",{onClick:H,class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"}," Clear Filters ")]),e("div",ne,[e("table",ue,[o[15]||(o[15]=e("thead",{class:"bg-gradient-to-r from-blue-50 to-blue-100"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider rounded-tl-2xl"},"KATEGORI"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"SUB KATEGORI"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"OUTLET"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"BUDGET"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"CREATED AT"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider rounded-tr-2xl"},"AKSI")])],-1)),e("tbody",null,[T.value.length===0?(s(),a("tr",ie,o[12]||(o[12]=[e("td",{colspan:"6",class:"text-center py-10 text-gray-400"},"Tidak ada data budget.",-1)]))):F("",!0),(s(!0),a(w,null,h(T.value,t=>{var d,M,D;return s(),a("tr",{key:t.id,class:"hover:bg-blue-50 transition shadow-sm"},[e("td",de,i(((d=t.category)==null?void 0:d.name)||"-"),1),e("td",ce,i(((M=t.sub_category)==null?void 0:M.name)||"-"),1),e("td",pe,i(((D=t.outlet)==null?void 0:D.nama_outlet)||"-"),1),e("td",be,[e("span",fe,"Rp "+i(j(t.budget)),1)]),e("td",ge,i(G(t.created_at)),1),e("td",xe,[e("div",me,[e("button",{onClick:K=>U(t),class:"inline-flex items-center btn btn-xs bg-yellow-100 text-yellow-800 hover:bg-yellow-200 rounded px-2 py-1 font-semibold transition"},o[13]||(o[13]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M15.232 5.232l3.536 3.536M9 13l6-6m2 2l-6 6m-2 2h6a2 2 0 002-2v-6a2 2 0 00-2-2H7a2 2 0 00-2 2v6a2 2 0 002 2z"})],-1),v(" Edit ")]),8,ve),e("button",{onClick:K=>$(t),class:"inline-flex items-center btn btn-xs bg-red-100 text-red-700 hover:bg-red-200 rounded px-2 py-1 font-semibold transition"},o[14]||(o[14]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M6 18L18 6M6 6l12 12"})],-1),v(" Hapus ")]),8,ye)])])])}),128))])])]),r.budgets&&r.budgets.links?(s(),a("div",we,[(s(!0),a(w,null,h(r.budgets.links,t=>(s(),a("button",{key:t.label,disabled:!t.url,onClick:d=>N(t.url),innerHTML:t.label,class:Q(["px-3 py-1 rounded-lg border text-sm font-semibold",[t.active?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-700 hover:bg-blue-50",t.url?"cursor-pointer":"opacity-50 cursor-not-allowed"]])},null,10,he))),128))])):F("",!0),J(ee,{show:x.value,mode:k.value,budget:C.value,categories:r.categories,"sub-categories":r.subCategories,outlets:r.outlets,onClose:P,onSuccess:R},null,8,["show","mode","budget","categories","sub-categories","outlets"])])]),_:1}))}},Ve=te(ke,[["__scopeId","data-v-532a4ebf"]]);export{Ve as default};
