import{$ as _t,c as N,r as x,w as G,a as ht,A as wt,B as n,C as kt,D as t,L as a,E as v,G as b,N as o,H as j,F as g,M as f,I as A,l as m,Q as Ct,W as y,O as St}from"./vendor-vue-g7iCcTkf.js";import{l as jt}from"./lodash-DB3HVzpp.js";import{S as D}from"./app-e_83ELsm.js";import{A as At}from"./AppLayout-BaHOzAR0.js";import"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DOFHeIjT.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const Dt={class:"w-full py-8 px-4"},$t={class:"max-w-7xl mx-auto"},It={class:"flex items-center justify-between mb-8"},Mt={class:"flex gap-3"},Bt=["href"],Ot={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},Ft={class:"bg-white rounded-2xl shadow-lg p-6 border-l-4 border-blue-500"},Pt={class:"flex items-center justify-between"},Ut={class:"text-2xl font-bold text-gray-900"},Tt={class:"bg-white rounded-2xl shadow-lg p-6 border-l-4 border-yellow-500"},Et={class:"flex items-center justify-between"},Lt={class:"text-2xl font-bold text-gray-900"},Vt={class:"bg-white rounded-2xl shadow-lg p-6 border-l-4 border-green-500"},Yt={class:"flex items-center justify-between"},Nt={class:"text-2xl font-bold text-gray-900"},Gt={class:"bg-white rounded-2xl shadow-lg p-6 mb-8"},Ht={class:"flex flex-wrap items-center gap-4"},zt={class:"flex items-center gap-2"},Jt=["value"],Rt={class:"flex items-center gap-2"},Wt=["value"],qt={class:"flex items-center gap-2"},Kt=["value"],Qt={class:"flex items-center gap-2"},Xt={class:"flex-1"},Zt=["value"],te={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ee={class:"p-6 pb-4"},se={class:"flex items-start justify-between mb-4"},le={class:"flex-1"},oe={class:"text-lg font-bold text-gray-800 mb-1"},ne={class:"text-sm text-gray-600"},ae={class:"mb-4"},re={class:"flex items-center gap-2 mb-3"},ie={class:"text-sm font-medium text-gray-600"},de={class:"flex flex-wrap gap-2"},ue=["onClick"],ce=["src","alt"],ge={key:1,class:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-xs font-bold"},xe={class:"text-sm font-medium text-gray-700"},fe={key:0,class:"mb-4"},ve={class:"flex items-center gap-2 mb-3"},me={class:"text-sm font-medium text-gray-600"},pe={class:"flex flex-wrap gap-2"},be=["onClick"],ye=["src","alt"],_e={key:1,class:"w-8 h-8 rounded-full bg-gradient-to-br from-green-500 to-blue-600 flex items-center justify-center text-white text-xs font-bold"},he={class:"text-sm font-medium text-gray-700"},we={class:"mb-4"},ke={class:"text-sm text-gray-800"},Ce={class:"grid grid-cols-2 gap-4 mb-4"},Se={class:"text-center"},je={class:"text-2xl font-bold text-blue-600"},Ae={class:"text-center"},De={class:"flex justify-center gap-1"},$e={class:"bg-gray-50 rounded-lg p-3 mb-4"},Ie={class:"grid grid-cols-2 gap-4 text-center"},Me={class:"text-lg font-bold text-green-600"},Be={class:"text-lg font-bold text-blue-600"},Oe={class:"flex items-center gap-2 text-sm text-gray-500"},Fe={class:"px-6 py-4 border-t border-gray-100 bg-gray-50"},Pe={class:"flex items-center justify-between"},Ue={class:"flex items-center gap-2"},Te=["onClick"],Ee=["onClick"],Le=["onClick"],Ve=["onClick"],Ye={class:"flex items-center gap-2"},Ne=["onClick"],Ge={key:1,class:"text-center py-12"},He=["href"],ze={key:2,class:"mt-6 flex items-center justify-between"},Je={class:"text-sm text-gray-700"},Re={class:"flex items-center gap-2"},We=["onClick","innerHTML"],qe=["innerHTML"],Ke={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Qe={class:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden"},Xe={class:"bg-gradient-to-r from-green-500 to-green-600 text-white p-6"},Ze={class:"flex justify-between items-center mb-4"},ts={class:"flex items-center gap-4"},es={class:"flex items-center gap-2"},ss=["value"],ls={class:"flex items-center gap-2"},os=["value"],ns={class:"text-sm text-green-100"},as={class:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]"},rs={key:0,class:"text-center py-8"},is={key:1,class:"space-y-4"},ds=["onClick"],us={class:"flex justify-between items-center"},cs={class:"flex items-center"},gs={class:"text-lg font-semibold text-gray-800"},xs={class:"ml-3 px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full"},fs={class:"flex items-center gap-4"},vs={class:"text-right"},ms={class:"text-right"},ps={class:"text-lg font-bold text-blue-600"},bs={class:"text-right"},ys={class:"text-lg font-bold text-purple-600"},_s={key:0,class:"border-t border-gray-200"},hs={class:"p-4 space-y-4"},ws=["onClick"],ks={class:"flex justify-between items-center"},Cs={class:"flex items-center"},Ss={class:"text-md font-semibold text-gray-800"},js={class:"ml-3 px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full"},As={class:"flex items-center gap-4"},Ds={class:"text-right"},$s={class:"text-xs text-gray-400"},Is={class:"text-right"},Ms={class:"text-sm font-bold text-blue-600"},Bs={class:"text-right"},Os={class:"text-sm font-bold text-purple-600"},Fs={class:"text-right"},Ps={key:0,class:"border-t border-gray-200"},Us={class:"p-4 space-y-3"},Ts=["onClick"],Es={class:"flex justify-between items-center"},Ls={class:"flex items-center gap-4"},Vs={class:"font-medium text-gray-800"},Ys={class:"text-sm text-gray-500"},Ns={class:"flex items-center gap-4"},Gs={class:"text-center"},Hs={class:"text-xs text-gray-400"},zs={class:"text-center"},Js={class:"font-bold text-blue-600"},Rs={class:"text-center"},Ws={class:"font-bold text-purple-600"},qs={class:"text-center"},Ks={class:"text-center"},Qs=["src"],dl={__name:"Index",props:{inspections:Object,filters:Object,statistics:Object,outlets:Array,departemenOptions:Array,statusOptions:Array},setup(c){var X,Z,tt,et,st;const h=c,lt=_t(),E=N(()=>{var l;return((l=lt.props.auth)==null?void 0:l.user)||{}}),H=N(()=>E.value.id_outlet&&E.value.id_outlet!==1),$=x(((X=h.filters)==null?void 0:X.search)||""),w=x(((Z=h.filters)==null?void 0:Z.outlet_id)||""),k=x(((tt=h.filters)==null?void 0:tt.departemen)||""),C=x(((et=h.filters)==null?void 0:et.status)||""),I=x(((st=h.filters)==null?void 0:st.per_page)||15),L=x(!1),V=x(""),M=x(!1),U=x({}),B=x(new Set),S=x(new Set),O=x(new Date().getMonth()),F=x(new Date().getFullYear()),ot=jt.debounce(l=>{$.value=l},300);function nt(l){ot(l.target.value)}function Y(){y.get(route("inspections.index"),{search:$.value,outlet_id:w.value,departemen:k.value,status:C.value,per_page:I.value},{preserveState:!0,replace:!0})}function at(){$.value="",w.value="",k.value="",C.value="",I.value=15,Y()}function rt(){y.reload()}function z(l){return l?l.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2):"U"}function T(l){return`/storage/${l}`}function J(l){V.value=l,L.value=!0}function R(){L.value=!1,V.value=""}function it(l){y.visit(route("inspections.cpa",l.id))}const dt=l=>l.status==="Completed",ut=l=>!H.value,ct=l=>!H.value&&l.created_by===E.value.id;function W(l){if(!l.details||l.details.length===0)return[l.created_by_user].filter(Boolean);const e=new Map;return l.created_by_user&&e.set(l.created_by_user.id,l.created_by_user),l.details.forEach(s=>{s.created_by_user&&e.set(s.created_by_user.id,s.created_by_user)}),Array.from(e.values())}function gt(l){return l>=90?5:l>=80?4:l>=70?3:l>=60?2:l>=50?1:0}function P(l){return{Kitchen:85,Bar:90,Service:95}[l]||80}function q(){const l={};h.inspections.data.forEach(e=>{var i;const s=new Date(e.inspection_date),u=s.getMonth(),d=s.getFullYear();if(u===O.value&&d===F.value){const r=e.outlet_id,_=((i=e.outlet)==null?void 0:i.nama_outlet)||"Unknown Outlet",p=e.departemen;l[r]||(l[r]={outlet_name:_,total_inspections:0,total_findings:0,total_points:0,average_score:0,departemens:{}}),l[r].departemens[p]||(l[r].departemens[p]={departemen_name:p,total_inspections:0,total_findings:0,total_points:0,average_score:0,passing_score:P(p),inspections:[]}),l[r].total_inspections++,l[r].total_findings+=e.total_findings||0,l[r].total_points+=e.total_points||0,l[r].departemens[p].total_inspections++,l[r].departemens[p].total_findings+=e.total_findings||0,l[r].departemens[p].total_points+=e.total_points||0,l[r].departemens[p].inspections.push(e)}}),Object.keys(l).forEach(e=>{const s=l[e];let u=0,d=0;Object.keys(s.departemens).forEach(i=>{const r=s.departemens[i];if(r.total_inspections>0){const _=r.inspections.reduce((p,yt)=>p+(yt.score||0),0);r.average_score=Math.round(_/r.total_inspections),u+=_,d+=r.total_inspections}}),d>0&&(s.average_score=Math.round(u/d))}),U.value=l}function xt(l){var e;B.value.has(l)?(B.value.delete(l),Object.keys(((e=U.value[l])==null?void 0:e.departemens)||{}).forEach(s=>{S.value.delete(`${l}-${s}`)})):B.value.add(l)}function ft(l,e){const s=`${l}-${e}`;S.value.has(s)?S.value.delete(s):S.value.add(s)}const K=[{value:0,label:"January"},{value:1,label:"February"},{value:2,label:"March"},{value:3,label:"April"},{value:4,label:"May"},{value:5,label:"June"},{value:6,label:"July"},{value:7,label:"August"},{value:8,label:"September"},{value:9,label:"October"},{value:10,label:"November"},{value:11,label:"December"}],vt=N(()=>{const l=new Date().getFullYear(),e=[];for(let s=l-2;s<=l+2;s++)e.push({value:s,label:s.toString()});return e});function Q(l){y.visit(route("inspections.show",l.id))}function mt(l){y.visit(route("inspections.add-finding",l.id))}async function pt(l){if((await D.fire({title:"Complete Inspection?",text:"Are you sure you want to complete this inspection?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Complete!",cancelButtonText:"Cancel"})).isConfirmed)try{await y.patch(route("inspections.complete",l.id),{},{onSuccess:()=>{D.fire("Success","Inspection completed successfully!","success")},onError:()=>{D.fire("Error","Failed to complete inspection","error")}})}catch{D.fire("Error","Failed to complete inspection","error")}}async function bt(l){(await D.fire({title:"Delete Inspection?",text:"Are you sure you want to delete this inspection?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel"})).isConfirmed&&y.delete(route("inspections.destroy",l.id),{onSuccess:()=>D.fire("Success","Inspection deleted successfully!","success")})}return G([w,k,C,I],()=>{Y()}),G(M,l=>{l&&q()}),G([O,F],()=>{M.value&&q()}),ht(()=>{($.value||w.value||k.value||C.value)&&Y()}),(l,e)=>(n(),wt(At,{title:"Inspections"},{default:kt(()=>[t("div",Dt,[t("div",$t,[t("div",It,[e[12]||(e[12]=t("div",{class:"flex items-center gap-4"},[t("h1",{class:"text-3xl font-bold text-gray-800 flex items-center gap-3"},[t("i",{class:"fa-solid fa-clipboard-check text-blue-500"}),b(" Inspections ")])],-1)),t("div",Mt,[t("button",{onClick:rt,class:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-xl font-medium transition"},e[9]||(e[9]=[t("i",{class:"fa-solid fa-refresh mr-2"},null,-1),b("Refresh ")])),t("button",{onClick:e[0]||(e[0]=s=>M.value=!0),class:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-xl font-medium transition"},e[10]||(e[10]=[t("i",{class:"fa-solid fa-chart-bar mr-2"},null,-1),b("Summary ")])),t("a",{href:l.route("inspections.create"),class:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-xl font-medium transition"},e[11]||(e[11]=[t("i",{class:"fa-solid fa-plus mr-2"},null,-1),b("New Inspection ")]),8,Bt)])]),t("div",Ot,[t("div",Ft,[t("div",Pt,[t("div",null,[e[13]||(e[13]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Inspections",-1)),t("p",Ut,o(c.statistics.total),1),e[14]||(e[14]=t("p",{class:"text-sm text-gray-500"},"All inspections",-1))]),e[15]||(e[15]=t("div",{class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"},[t("i",{class:"fa-solid fa-clipboard-check text-blue-500 text-xl"})],-1))])]),t("div",Tt,[t("div",Et,[t("div",null,[e[16]||(e[16]=t("p",{class:"text-sm font-medium text-gray-600"},"Draft",-1)),t("p",Lt,o(c.statistics.draft),1),e[17]||(e[17]=t("p",{class:"text-sm text-gray-500"},"In progress",-1))]),e[18]||(e[18]=t("div",{class:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center"},[t("i",{class:"fa-solid fa-edit text-yellow-500 text-xl"})],-1))])]),t("div",Vt,[t("div",Yt,[t("div",null,[e[19]||(e[19]=t("p",{class:"text-sm font-medium text-gray-600"},"Completed",-1)),t("p",Nt,o(c.statistics.completed),1),e[20]||(e[20]=t("p",{class:"text-sm text-gray-500"},"Finished",-1))]),e[21]||(e[21]=t("div",{class:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center"},[t("i",{class:"fa-solid fa-check-circle text-green-500 text-xl"})],-1))])])]),t("div",Gt,[t("div",Ht,[t("div",{class:"flex items-center gap-2"},[t("button",{onClick:at,class:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition"},e[22]||(e[22]=[t("i",{class:"fa-solid fa-times mr-1"},null,-1),b("Clear ")]))]),t("div",zt,[j(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>w.value=s),class:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[e[23]||(e[23]=t("option",{value:""},"All Outlets",-1)),(n(!0),a(g,null,f(c.outlets,s=>(n(),a("option",{key:s.id_outlet,value:s.id_outlet},o(s.nama_outlet),9,Jt))),128))],512),[[A,w.value]])]),t("div",Rt,[j(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>k.value=s),class:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[e[24]||(e[24]=t("option",{value:""},"All Departments",-1)),(n(!0),a(g,null,f(c.departemenOptions,s=>(n(),a("option",{key:s,value:s},o(s),9,Wt))),128))],512),[[A,k.value]])]),t("div",qt,[j(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>C.value=s),class:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[e[25]||(e[25]=t("option",{value:""},"All Status",-1)),(n(!0),a(g,null,f(c.statusOptions,s=>(n(),a("option",{key:s,value:s},o(s),9,Kt))),128))],512),[[A,C.value]])]),t("div",Qt,[j(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>I.value=s),class:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[26]||(e[26]=[t("option",{value:"15"},"15 per page",-1),t("option",{value:"25"},"25 per page",-1),t("option",{value:"50"},"50 per page",-1),t("option",{value:"100"},"100 per page",-1)]),512),[[A,I.value]])]),t("div",Xt,[t("input",{onInput:nt,value:$.value,type:"text",placeholder:"Search Inspector, Outlet, or Guidance...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,40,Zt)])])]),c.inspections.data.length>0?(n(),a("div",te,[(n(!0),a(g,null,f(c.inspections.data,s=>{var u,d;return n(),a("div",{key:s.id,class:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100"},[t("div",ee,[t("div",se,[t("div",le,[t("h3",oe,o(((u=s.outlet)==null?void 0:u.nama_outlet)||"-"),1),t("p",ne,o(s.departemen),1)]),t("span",{class:m(["px-3 py-1 rounded-full text-xs font-semibold",s.status==="Completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},o(s.status),3)]),t("div",ae,[t("div",re,[e[27]||(e[27]=t("i",{class:"fa-solid fa-users text-gray-500"},null,-1)),t("span",ie,"Inspectors ("+o(W(s).length)+")",1)]),t("div",de,[(n(!0),a(g,null,f(W(s),i=>(n(),a("div",{key:i.id,class:"flex items-center gap-2 bg-gray-50 rounded-lg px-3 py-2"},[i.avatar?(n(),a("div",{key:0,class:"w-8 h-8 rounded-full overflow-hidden cursor-pointer hover:scale-110 transition-transform",onClick:r=>J(T(i.avatar))},[t("img",{src:T(i.avatar),alt:i.nama_lengkap,class:"w-full h-full object-cover"},null,8,ce)],8,ue)):(n(),a("div",ge,o(z(i.nama_lengkap||"U")),1)),t("span",xe,o(i.nama_lengkap),1)]))),128))])]),s.auditees&&s.auditees.length>0?(n(),a("div",fe,[t("div",ve,[e[28]||(e[28]=t("i",{class:"fa-solid fa-user-check text-gray-500"},null,-1)),t("span",me,"Auditees ("+o(s.auditees.length)+")",1)]),t("div",pe,[(n(!0),a(g,null,f(s.auditees,i=>(n(),a("div",{key:i.id,class:"flex items-center gap-2 bg-blue-50 rounded-lg px-3 py-2"},[i.avatar?(n(),a("div",{key:0,class:"w-8 h-8 rounded-full overflow-hidden cursor-pointer hover:scale-110 transition-transform",onClick:r=>J(T(i.avatar))},[t("img",{src:T(i.avatar),alt:i.nama_lengkap,class:"w-full h-full object-cover"},null,8,ye)],8,be)):(n(),a("div",_e,o(z(i.nama_lengkap||"U")),1)),t("span",he,o(i.nama_lengkap),1)]))),128))])])):v("",!0),t("div",we,[e[29]||(e[29]=t("p",{class:"text-sm font-medium text-gray-600 mb-1"},"Guidance",-1)),t("p",ke,o(((d=s.guidance)==null?void 0:d.title)||"-"),1)]),t("div",Ce,[t("div",Se,[t("div",je,o(s.total_findings),1),e[30]||(e[30]=t("div",{class:"text-xs text-gray-500"},"Findings",-1))]),t("div",Ae,[t("div",{class:m(["text-2xl font-bold",s.score>=80?"text-green-600":s.score>=60?"text-yellow-600":"text-red-600"])},o(s.score||0)+"%",3),e[31]||(e[31]=t("div",{class:"text-xs text-gray-500 mb-1"},"Score",-1)),t("div",De,[(n(),a(g,null,f(5,i=>t("i",{key:i,class:m([["text-sm",i<=gt(s.score)?"text-yellow-400":"text-gray-300"],"fa-solid fa-star"])},null,2)),64))])])]),t("div",$e,[t("div",Ie,[t("div",null,[t("div",Me,o(s.total_points),1),e[32]||(e[32]=t("div",{class:"text-xs text-gray-500"},"Inspection Points",-1))]),t("div",null,[t("div",Be,o(s.guidance_total_points||0),1),e[33]||(e[33]=t("div",{class:"text-xs text-gray-500"},"Guidance Points",-1))])])]),t("div",Oe,[e[34]||(e[34]=t("i",{class:"fa-solid fa-calendar"},null,-1)),t("span",null,o(new Date(s.inspection_date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})),1)])]),t("div",Fe,[t("div",Pe,[t("div",Ue,[ut(s)?(n(),a(g,{key:0},[t("button",{onClick:i=>Q(s),class:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition",title:"View"},e[35]||(e[35]=[t("i",{class:"fa-solid fa-eye"},null,-1)]),8,Te),t("button",{onClick:i=>mt(s),class:"p-2 text-yellow-600 hover:bg-yellow-100 rounded-lg transition",title:"Add Finding"},e[36]||(e[36]=[t("i",{class:"fa-solid fa-edit"},null,-1)]),8,Ee),s.status==="Draft"?(n(),a("button",{key:0,onClick:i=>pt(s),class:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition",title:"Complete"},e[37]||(e[37]=[t("i",{class:"fa-solid fa-check"},null,-1)]),8,Le)):v("",!0)],64)):v("",!0),dt(s)?(n(),a("button",{key:1,onClick:i=>it(s),class:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition font-medium",title:"Corrective and Preventive Action"},e[38]||(e[38]=[t("i",{class:"fa-solid fa-clipboard-list mr-2"},null,-1),b("CPA ")]),8,Ve)):v("",!0)]),t("div",Ye,[ct(s)?(n(),a("button",{key:0,onClick:i=>bt(s),class:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition",title:"Delete"},e[39]||(e[39]=[t("i",{class:"fa-solid fa-trash"},null,-1)]),8,Ne)):v("",!0)])])])])}),128))])):v("",!0),c.inspections.data.length===0?(n(),a("div",Ge,[e[41]||(e[41]=t("i",{class:"fa-solid fa-clipboard-check text-6xl text-gray-300 mb-4"},null,-1)),e[42]||(e[42]=t("h3",{class:"text-lg font-semibold text-gray-500 mb-2"},"No Inspections Found",-1)),e[43]||(e[43]=t("p",{class:"text-gray-400 mb-6"},"Start by creating your first inspection",-1)),t("a",{href:l.route("inspections.create"),class:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-xl font-medium transition"},e[40]||(e[40]=[t("i",{class:"fa-solid fa-plus mr-2"},null,-1),b("Create Inspection ")]),8,He)])):v("",!0),c.inspections.data.length>0?(n(),a("div",ze,[t("div",Je," Showing "+o(c.inspections.from)+" - "+o(c.inspections.to)+" of "+o(c.inspections.total)+" results ",1),t("div",Re,[(n(!0),a(g,null,f(c.inspections.links,s=>(n(),a(g,{key:s.label},[s.url?(n(),a("button",{key:0,onClick:u=>Ct(y).visit(s.url),innerHTML:s.label,class:m(["px-3 py-2 text-sm rounded-lg transition",s.active?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},null,10,We)):(n(),a("span",{key:1,innerHTML:s.label,class:"px-3 py-2 text-sm text-gray-400"},null,8,qe))],64))),128))])])):v("",!0)]),M.value?(n(),a("div",Ke,[t("div",Qe,[t("div",Xe,[t("div",Ze,[e[45]||(e[45]=t("h2",{class:"text-2xl font-bold flex items-center"},[t("i",{class:"fa-solid fa-chart-bar mr-3"}),b(" Inspection Summary ")],-1)),t("button",{onClick:e[5]||(e[5]=s=>M.value=!1),class:"text-white hover:text-gray-200 text-2xl"},e[44]||(e[44]=[t("i",{class:"fa-solid fa-times"},null,-1)]))]),t("div",ts,[t("div",es,[e[46]||(e[46]=t("label",{class:"text-sm font-medium"},"Month:",-1)),j(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>O.value=s),class:"px-3 py-1 rounded text-gray-800 text-sm focus:ring-2 focus:ring-white focus:outline-none"},[(n(),a(g,null,f(K,s=>t("option",{key:s.value,value:s.value},o(s.label),9,ss)),64))],512),[[A,O.value]])]),t("div",ls,[e[47]||(e[47]=t("label",{class:"text-sm font-medium"},"Year:",-1)),j(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>F.value=s),class:"px-3 py-1 rounded text-gray-800 text-sm focus:ring-2 focus:ring-white focus:outline-none"},[(n(!0),a(g,null,f(vt.value,s=>(n(),a("option",{key:s.value,value:s.value},o(s.label),9,os))),128))],512),[[A,F.value]])]),t("div",ns,o(K[O.value].label)+" "+o(F.value),1)])]),t("div",as,[Object.keys(U.value).length===0?(n(),a("div",rs,e[48]||(e[48]=[t("i",{class:"fa-solid fa-inbox text-4xl text-gray-400 mb-4"},null,-1),t("p",{class:"text-gray-500 text-lg"},"No inspections found for this month",-1)]))):(n(),a("div",is,[(n(!0),a(g,null,f(U.value,(s,u)=>(n(),a("div",{key:u,class:"bg-white border border-gray-200 rounded-xl shadow-sm"},[t("div",{onClick:d=>xt(u),class:"p-4 cursor-pointer hover:bg-gray-50 transition"},[t("div",us,[t("div",cs,[t("h3",gs,o(s.outlet_name),1),t("span",xs,o(s.total_inspections)+" inspection"+o(s.total_inspections>1?"s":""),1)]),t("div",fs,[t("div",vs,[e[49]||(e[49]=t("div",{class:"text-sm text-gray-500"},"Avg Score",-1)),t("div",{class:m(["text-lg font-bold",s.average_score>=80?"text-green-600":s.average_score>=60?"text-yellow-600":"text-red-600"])},o(s.average_score)+"%",3)]),t("div",ms,[e[50]||(e[50]=t("div",{class:"text-sm text-gray-500"},"Total Findings",-1)),t("div",ps,o(s.total_findings),1)]),t("div",bs,[e[51]||(e[51]=t("div",{class:"text-sm text-gray-500"},"Total Points",-1)),t("div",ys,o(s.total_points),1)]),t("i",{class:m(["fa-solid transition-transform",B.value.has(u)?"fa-chevron-up":"fa-chevron-down"])},null,2)])])],8,ds),B.value.has(u)?(n(),a("div",_s,[t("div",hs,[(n(!0),a(g,null,f(s.departemens,(d,i)=>(n(),a("div",{key:i,class:"bg-gray-50 rounded-lg border border-gray-200"},[t("div",{onClick:r=>ft(u,i),class:"p-4 cursor-pointer hover:bg-gray-100 transition"},[t("div",ks,[t("div",Cs,[t("h4",Ss,o(d.departemen_name),1),t("span",js,o(d.total_inspections)+" inspection"+o(d.total_inspections>1?"s":""),1)]),t("div",As,[t("div",Ds,[e[52]||(e[52]=t("div",{class:"text-xs text-gray-500"},"Avg Score",-1)),t("div",{class:m(["text-sm font-bold",d.average_score>=d.passing_score?"text-green-600":"text-red-600"])},o(d.average_score)+"%",3),t("div",$s," Pass: "+o(d.passing_score)+"% ",1)]),t("div",Is,[e[53]||(e[53]=t("div",{class:"text-xs text-gray-500"},"Findings",-1)),t("div",Ms,o(d.total_findings),1)]),t("div",Bs,[e[54]||(e[54]=t("div",{class:"text-xs text-gray-500"},"Points",-1)),t("div",Os,o(d.total_points),1)]),t("div",Fs,[e[55]||(e[55]=t("div",{class:"text-xs text-gray-500"},"Status",-1)),t("span",{class:m(["px-2 py-1 text-xs rounded-full font-medium",d.average_score>=d.passing_score?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},o(d.average_score>=d.passing_score?"PASS":"FAIL"),3)]),t("i",{class:m(["fa-solid transition-transform",S.value.has(`${u}-${i}`)?"fa-chevron-up":"fa-chevron-down"])},null,2)])])],8,ws),S.value.has(`${u}-${i}`)?(n(),a("div",Ps,[t("div",Us,[(n(!0),a(g,null,f(d.inspections,r=>{var _;return n(),a("div",{key:r.id,class:"bg-white rounded-lg p-4 hover:bg-gray-50 transition cursor-pointer border border-gray-100",onClick:p=>Q(r)},[t("div",Es,[t("div",Ls,[t("div",null,[t("div",Vs,o(((_=r.guidance)==null?void 0:_.title)||"No Guidance"),1),t("div",Ys,o(new Date(r.inspection_date).toLocaleDateString()),1)])]),t("div",Ns,[t("div",Gs,[e[56]||(e[56]=t("div",{class:"text-sm text-gray-500"},"Score",-1)),t("div",{class:m(["font-bold",r.score>=P(r.departemen)?"text-green-600":"text-red-600"])},o(r.score||0)+"%",3),t("div",Hs," Pass: "+o(P(r.departemen))+"% ",1)]),t("div",zs,[e[57]||(e[57]=t("div",{class:"text-sm text-gray-500"},"Findings",-1)),t("div",Js,o(r.total_findings||0),1)]),t("div",Rs,[e[58]||(e[58]=t("div",{class:"text-sm text-gray-500"},"Points",-1)),t("div",Ws,o(r.total_points||0),1)]),t("div",qs,[e[59]||(e[59]=t("div",{class:"text-sm text-gray-500"},"Pass/Fail",-1)),t("span",{class:m(["px-2 py-1 text-xs rounded-full font-medium",r.score>=P(r.departemen)?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},o(r.score>=P(r.departemen)?"PASS":"FAIL"),3)]),t("div",Ks,[e[60]||(e[60]=t("div",{class:"text-sm text-gray-500"},"Status",-1)),t("span",{class:m(["px-2 py-1 text-xs rounded-full",r.status==="Completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},o(r.status),3)])])])],8,Ts)}),128))])])):v("",!0)]))),128))])])):v("",!0)]))),128))]))])])])):v("",!0),L.value?(n(),a("div",{key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",onClick:R},[t("div",{class:"relative max-w-4xl max-h-[90vh] p-4",onClick:e[8]||(e[8]=St(()=>{},["stop"]))},[t("button",{onClick:R,class:"absolute -top-4 -right-4 bg-white rounded-full p-2 shadow-lg hover:bg-gray-100 transition-colors z-10"},e[61]||(e[61]=[t("i",{class:"fa-solid fa-times text-gray-600"},null,-1)])),t("img",{src:V.value,alt:"Avatar preview",class:"max-w-full max-h-full object-contain rounded-lg shadow-2xl"},null,8,Qs)])])):v("",!0)])]),_:1}))}};export{dl as default};
