import{r as C,k as F,A as N,B as l,C as I,D as t,G as u,N as i,H as B,J as R,L as n,F as _,M as c,I as D,E as g,l as x,Y as A,W as V}from"./vendor-vue-g7iCcTkf.js";import{A as M}from"./AppLayout-Cg9_BqdS.js";import"./vendor-utils-CpgP2uT4.js";import"./app-CL3toCqm.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DcALjTaB.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const z={class:"w-full py-8 px-0"},W={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},X={class:"bg-white rounded-xl shadow-lg p-4 border-l-4 border-blue-500"},Y={class:"flex items-center justify-between"},q={class:"text-2xl font-bold text-gray-900"},H={class:"bg-white rounded-xl shadow-lg p-4 border-l-4 border-green-500"},J={class:"flex items-center justify-between"},Q={class:"text-2xl font-bold text-gray-900"},K={class:"bg-white rounded-xl shadow-lg p-4 mb-6"},Z={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},G=["value"],tt=["value"],et={class:"bg-white rounded-xl shadow-lg overflow-hidden"},st={class:"divide-y divide-gray-200"},dt={key:0,class:"p-8 text-center text-gray-500"},it=["onClick"],lt={class:"flex items-center gap-3"},nt={class:"flex items-center gap-2"},ot={class:"font-semibold text-gray-900"},at={class:"flex items-center gap-4"},rt={class:"text-right"},ut={class:"text-sm font-medium text-gray-900"},gt={class:"text-xs text-gray-500"},xt={class:"text-green-600"},mt={class:"text-red-600"},bt={class:"flex items-center gap-2"},_t={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"},ct={key:0,class:"ml-8 mt-2 space-y-2"},pt=["onClick"],ft={class:"flex items-center gap-3"},vt={class:"flex items-center gap-2"},yt={class:"font-medium text-gray-800"},ht={class:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs"},wt={class:"flex items-center gap-4"},kt={class:"text-right"},Ot={class:"text-sm font-medium text-gray-900"},Pt={class:"text-xs text-gray-500"},Ct={class:"text-green-600"},Bt={class:"text-red-600"},Dt={class:"flex items-center gap-2"},$t={class:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium"},Rt={key:0,class:"ml-8 mt-2 space-y-2"},At=["onClick"],Ut={class:"flex items-center gap-3"},Tt={class:"flex items-center gap-2"},jt={class:"font-medium text-gray-800"},St={class:"text-sm text-gray-500"},Et={class:"flex items-center gap-1"},Lt={key:0,class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs"},Ft={class:"flex items-center gap-4"},Nt={class:"text-right"},It={class:"text-sm font-medium text-gray-900"},Vt={class:"text-xs text-gray-500"},Mt={class:"text-green-600"},zt={key:0},Wt={key:1,class:"text-red-600"},Xt={class:"text-xs text-gray-500 mt-1"},Yt={class:"flex items-center gap-2"},qt={class:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium"},Ht={key:0,class:"ml-8 mt-2"},Jt={class:"bg-gray-50 rounded-lg p-3"},Qt={class:"overflow-x-auto"},Kt={class:"w-full text-sm"},Zt={class:"divide-y divide-gray-200"},Gt={class:"px-3 py-2 font-medium text-gray-900"},te={class:"px-3 py-2 text-gray-700"},ee={class:"px-3 py-2 text-gray-700"},se={class:"px-3 py-2 text-right text-gray-700"},de={class:"px-3 py-2 text-right font-medium text-gray-900"},ie={class:"bg-white rounded-xl shadow-lg overflow-hidden mt-6"},le={class:"p-4"},ne={key:0,class:"text-center py-8 text-gray-500"},oe={key:1,class:"space-y-4"},ae={class:"flex items-center justify-between p-4 bg-gray-50 rounded-t-lg"},re={class:"flex items-center gap-3"},ue={class:"flex items-center gap-2"},ge={class:"font-semibold text-gray-800"},xe={class:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs"},me={class:"flex items-center gap-4"},be={class:"text-right"},_e={class:"text-sm font-medium text-gray-900"},ce={class:"flex items-center gap-2"},pe={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"},fe=["onClick"],ve={class:"p-4"},ye={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},he={class:"bg-blue-50 rounded-lg p-3"},we={class:"text-lg font-bold text-blue-600"},ke={class:"bg-orange-50 rounded-lg p-3"},Oe={class:"text-lg font-bold text-orange-600"},Pe={class:"text-xs text-gray-500"},Ce={class:"bg-gray-50 rounded-lg p-3"},Be={key:0,class:"mt-4 pt-4 border-t border-gray-200"},De={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},$e={class:"p-3 bg-white rounded-lg border border-blue-100 shadow-sm"},Re={class:"text-base font-bold text-blue-800"},Ae={class:"p-3 bg-white rounded-lg border border-green-100 shadow-sm"},Ue={class:"text-base font-bold text-green-800"},Te={class:"p-3 bg-white rounded-lg border border-purple-100 shadow-sm"},je={class:"text-base font-bold text-purple-600"},Se={class:"mt-3 p-3 bg-gray-50 rounded-lg border border-gray-200"},Ee={class:"flex items-center justify-between"},Le={class:"text-sm font-bold text-gray-900"},Fe={class:"mt-4"},Ne={class:"flex justify-between text-xs text-gray-600 mb-1"},Ie={class:"w-full bg-gray-200 rounded-full h-2"},Ve={key:0,class:"p-4 bg-gray-50 border-t border-gray-200"},Me={class:"space-y-3"},ze={class:"flex items-center justify-between mb-3"},We={class:"flex items-center gap-2"},Xe={class:"font-semibold text-gray-800"},Ye={class:"text-right"},qe={key:0},He={key:1},Je={class:"text-xs text-gray-500"},Qe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ke={class:"bg-blue-50 rounded-lg p-3"},Ze={class:"text-lg font-bold text-blue-600"},Ge={class:"bg-green-50 rounded-lg p-3"},ts={class:"text-lg font-bold text-green-600"},es={class:"text-xs text-gray-500"},ss={class:"bg-gray-50 rounded-lg p-3"},ds={key:0,class:"mt-4 pt-4 border-t border-gray-200"},is={class:"grid grid-cols-1 md:grid-cols-3 gap-2 text-xs"},ls={class:"p-2 bg-white rounded border border-blue-100"},ns={class:"text-sm font-bold text-blue-800"},os={class:"p-2 bg-white rounded border border-blue-100"},as={class:"text-sm font-bold text-blue-800"},rs={class:"p-2 bg-white rounded border border-purple-100"},us={class:"text-sm font-bold text-purple-600"},gs={class:"mt-3"},xs={class:"flex justify-between text-xs text-gray-600 mb-1"},ms={class:"w-full bg-gray-200 rounded-full h-2"},bs={key:0,class:"text-center py-8 text-gray-500"},Ps={__name:"Index",props:{outletData:Array,outlets:Array,categories:Array,allCategories:Array,filters:Object,summary:Object},setup(m){const v=m,y=C([]),h=C([]),w=C([]),k=C([]);C({});const b=F({date_from:v.filters.date_from||new Date().toISOString().slice(0,7)+"-01",date_to:v.filters.date_to||new Date().toISOString().slice(0,7)+"-"+new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate(),outlet_id:v.filters.outlet_id||"",category_id:v.filters.category_id||"",status:v.filters.status||""});function U(r){const e=y.value.indexOf(r);e>-1?y.value.splice(e,1):y.value.push(r)}function T(r,e){const s=`${r}-${e}`,d=h.value.indexOf(s);d>-1?h.value.splice(d,1):h.value.push(s)}function j(r,e,s){const d=`${r}-${e}-${s}`,a=w.value.indexOf(d);a>-1?w.value.splice(a,1):w.value.push(d)}function S(r){const e=k.value.indexOf(r);e>-1?k.value.splice(e,1):k.value.push(r)}function p(r,e){return!e||e===0?"0.0":(r/e*100).toFixed(1)}function $(r,e){if(!e||e===0)return"bg-gray-500";const s=r/e*100;return s>80?"bg-red-500":s>60?"bg-yellow-500":"bg-green-500"}function O(){V.get("/opex-report",b,{preserveState:!0,replace:!0})}function E(){console.log("Export report functionality to be implemented")}function P(r){var d,a;const e=parseFloat(((d=r.budget_breakdown)==null?void 0:d.pr_total)||0),s=parseFloat(((a=r.budget_breakdown)==null?void 0:a.retail_non_food)||0);return e+s}function o(r){return r==null?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(r)}function L(r){return r?new Date(r).toLocaleDateString("id-ID"):"-"}return(r,e)=>(l(),N(M,null,{default:I(()=>[t("div",z,[t("div",{class:"flex justify-between items-center mb-6"},[e[6]||(e[6]=t("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[t("i",{class:"fa-solid fa-chart-line"}),u(" OPEX Report per Outlet ")],-1)),t("div",{class:"flex gap-2 items-center"},[t("button",{onClick:E,class:"bg-gradient-to-r from-green-500 to-green-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"},e[5]||(e[5]=[t("i",{class:"fa fa-download mr-2"},null,-1),u(" Export ")]))])]),t("div",W,[t("div",X,[t("div",Y,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Outlets",-1)),t("p",q,i(m.summary.total_outlets),1)]),e[8]||(e[8]=t("i",{class:"fa fa-building text-blue-500 text-2xl"},null,-1))])]),t("div",H,[t("div",J,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Amount",-1)),t("p",Q,i(o(m.summary.total_amount)),1)]),e[10]||(e[10]=t("i",{class:"fa fa-money-bill-wave text-green-500 text-2xl"},null,-1))])])]),t("div",K,[t("div",Z,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date From",-1)),B(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=s=>b.date_from=s),onChange:O,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[R,b.date_from]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date To",-1)),B(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>b.date_to=s),onChange:O,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[R,b.date_to]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Outlet",-1)),B(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>b.outlet_id=s),onChange:O,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[e[13]||(e[13]=t("option",{value:""},"All Outlets",-1)),(l(!0),n(_,null,c(m.outlets,s=>(l(),n("option",{key:s.id,value:s.id},i(s.name),9,G))),128))],544),[[D,b.outlet_id]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Category",-1)),B(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>b.category_id=s),onChange:O,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[e[15]||(e[15]=t("option",{value:""},"All Categories",-1)),(l(!0),n(_,null,c(m.categories,s=>(l(),n("option",{key:s.id,value:s.id},i(s.name),9,tt))),128))],544),[[D,b.category_id]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),B(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>b.status=s),onChange:O,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[17]||(e[17]=[t("option",{value:""},"All Status",-1),t("option",{value:"paid"},"Paid",-1),t("option",{value:"unpaid"},"Unpaid",-1)]),544),[[D,b.status]])])])]),t("div",et,[e[56]||(e[56]=t("div",{class:"p-4 border-b border-gray-200"},[t("h2",{class:"text-lg font-semibold text-gray-800"},"OPEX Report by Outlet")],-1)),t("div",st,[!m.outletData||!m.outletData.length?(l(),n("div",dt,e[19]||(e[19]=[t("i",{class:"fa fa-inbox text-4xl mb-4"},null,-1),t("p",null,"No data available for the selected filters.",-1)]))):g("",!0),(l(!0),n(_,null,c(m.outletData,s=>(l(),n("div",{key:s.outlet_id,class:"p-4"},[t("div",{class:"flex items-center justify-between cursor-pointer hover:bg-gray-50 p-3 rounded-lg",onClick:d=>U(s.outlet_id)},[t("div",lt,[t("i",{class:x([y.value.includes(s.outlet_id)?"fa fa-chevron-down":"fa fa-chevron-right","text-gray-400"])},null,2),t("div",nt,[e[20]||(e[20]=t("i",{class:"fa fa-building text-blue-500"},null,-1)),t("span",ot,i(s.outlet_name),1)])]),t("div",at,[t("div",rt,[t("div",ut,i(o(s.total_amount)),1),t("div",gt,[t("span",xt,i(o(s.paid_amount))+" paid",1),e[21]||(e[21]=u(" • ")),t("span",mt,i(o(s.unpaid_amount))+" unpaid",1)])]),t("div",bt,[t("span",_t,i(s.categories.length)+" categories ",1)])])],8,it),y.value.includes(s.outlet_id)?(l(),n("div",ct,[(l(!0),n(_,null,c(s.categories,d=>(l(),n("div",{key:d.category_id,class:"border-l-2 border-gray-200 pl-4"},[t("div",{class:"flex items-center justify-between cursor-pointer hover:bg-gray-50 p-2 rounded-lg",onClick:a=>T(s.outlet_id,d.category_id)},[t("div",ft,[t("i",{class:x([h.value.includes(`${s.outlet_id}-${d.category_id}`)?"fa fa-chevron-down":"fa fa-chevron-right","text-gray-400"])},null,2),t("div",vt,[e[22]||(e[22]=t("i",{class:"fa fa-tags text-green-500"},null,-1)),t("span",yt,i(d.category_name),1),t("span",ht,i(d.category_division),1)])]),t("div",wt,[t("div",kt,[t("div",Ot,i(o(d.total_amount)),1),t("div",Pt,[t("span",Ct,i(o(d.paid_amount))+" paid",1),e[23]||(e[23]=u(" • ")),t("span",Bt,i(o(d.unpaid_amount))+" unpaid",1)])]),t("div",Dt,[t("span",$t,i(d.purchase_orders.length)+" POs ",1)])])],8,pt),h.value.includes(`${s.outlet_id}-${d.category_id}`)?(l(),n("div",Rt,[(l(!0),n(_,null,c(d.purchase_orders,a=>(l(),n("div",{key:a.po_id,class:"border-l-2 border-gray-200 pl-4"},[t("div",{class:"flex items-center justify-between cursor-pointer hover:bg-gray-50 p-2 rounded-lg",onClick:f=>j(s.outlet_id,d.category_id,a.po_id)},[t("div",Ut,[t("i",{class:x([w.value.includes(`${s.outlet_id}-${d.category_id}-${a.po_id}`)?"fa fa-chevron-down":"fa fa-chevron-right","text-gray-400"])},null,2),t("div",Tt,[e[24]||(e[24]=t("i",{class:"fa fa-file-invoice text-purple-500"},null,-1)),t("span",jt,i(a.po_number),1),t("span",St,i(L(a.po_date)),1)]),t("div",Et,[t("span",{class:x([a.is_paid?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 py-1 rounded-full text-xs font-medium"])},i(a.is_paid?"Paid":"Unpaid"),3),a.payment_number?(l(),n("span",Lt,i(a.payment_number),1)):g("",!0)])]),t("div",Ft,[t("div",Nt,[t("div",It,i(o(a.total_amount)),1),t("div",Vt,[t("span",Mt,i(o(a.paid_amount||0))+" paid",1),(a.paid_amount||0)>0&&(a.unpaid_amount||0)>0?(l(),n("span",zt," • ")):g("",!0),(a.unpaid_amount||0)>0?(l(),n("span",Wt,i(o(a.unpaid_amount))+" unpaid",1)):g("",!0)]),t("div",Xt,i(a.supplier_name),1)]),t("div",Yt,[t("span",qt,i(a.items.length)+" items ",1)])])],8,At),w.value.includes(`${s.outlet_id}-${d.category_id}-${a.po_id}`)?(l(),n("div",Ht,[t("div",Jt,[t("div",Qt,[t("table",Kt,[e[25]||(e[25]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-3 py-2 text-left font-medium text-gray-700"},"Item"),t("th",{class:"px-3 py-2 text-left font-medium text-gray-700"},"Qty"),t("th",{class:"px-3 py-2 text-left font-medium text-gray-700"},"Unit"),t("th",{class:"px-3 py-2 text-right font-medium text-gray-700"},"Price"),t("th",{class:"px-3 py-2 text-right font-medium text-gray-700"},"Total")])],-1)),t("tbody",Zt,[(l(!0),n(_,null,c(a.items,f=>(l(),n("tr",{key:f.po_item_id},[t("td",Gt,i(f.item_name),1),t("td",te,i(f.quantity),1),t("td",ee,i(f.unit),1),t("td",se,i(o(f.price)),1),t("td",de,i(o(f.total)),1)]))),128))])])])])])):g("",!0)]))),128))])):g("",!0)]))),128))])):g("",!0)]))),128))]),t("div",ie,[e[55]||(e[55]=t("div",{class:"p-4 border-b border-gray-200"},[t("h2",{class:"text-lg font-semibold text-gray-800"},"Budget Information by Category")],-1)),t("div",le,[!m.outletData||!m.outletData.length?(l(),n("div",ne,e[26]||(e[26]=[t("i",{class:"fa fa-inbox text-4xl mb-4"},null,-1),t("p",null,"No data available for the selected filters.",-1)]))):(l(),n("div",oe,[(l(!0),n(_,null,c(m.allCategories,s=>(l(),n("div",{key:s.category_id,class:"border border-gray-200 rounded-lg"},[t("div",ae,[t("div",re,[t("div",ue,[e[27]||(e[27]=t("i",{class:"fa fa-tags text-green-500"},null,-1)),t("span",ge,i(s.category_name),1),t("span",xe,i(s.category_division),1),s.budget_type?(l(),n("span",{key:0,class:x([s.budget_type==="GLOBAL"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800","px-2 py-1 rounded-full text-xs font-medium"])},i(s.budget_type==="GLOBAL"?"Global Budget":"Per Outlet Budget"),3)):g("",!0)])]),t("div",me,[t("div",be,[t("div",_e,i(o(s.total_budget_limit)),1),e[28]||(e[28]=t("div",{class:"text-xs text-gray-500"},"Total Budget Limit",-1))]),t("div",ce,[t("span",pe,i(s.outlets.length)+" outlets ",1),s.budget_type==="PER_OUTLET"?(l(),n("button",{key:0,onClick:d=>S(s.category_id),class:"p-1 hover:bg-gray-200 rounded"},[t("i",{class:x([k.value.includes(s.category_id)?"fa fa-chevron-down":"fa fa-chevron-right","text-gray-400"])},null,2)],8,fe)):g("",!0)])])]),t("div",ve,[t("div",ye,[t("div",he,[e[29]||(e[29]=t("div",{class:"text-xs text-gray-500 mb-1"},"Budget Limit",-1)),t("div",we,i(o(s.total_budget_limit)),1)]),t("div",ke,[e[30]||(e[30]=t("div",{class:"text-xs text-gray-500 mb-1"},"Used Budget",-1)),t("div",Oe,i(o(P(s))),1),t("div",Pe,i(p(P(s),s.budget_limit))+"% of budget ",1)]),t("div",Ce,[e[31]||(e[31]=t("div",{class:"text-xs text-gray-500 mb-1"},"Remaining Budget",-1)),t("div",{class:x(["text-lg font-bold",s.total_remaining_budget>0?"text-green-600":"text-red-600"])},i(o(s.total_remaining_budget)),3),t("div",{class:x(["text-xs",s.total_remaining_budget>0?"text-green-600":"text-red-600"])},i(s.total_remaining_budget>0?"Available":"Exceeded"),3)])]),s.budget_breakdown?(l(),n("div",Be,[e[39]||(e[39]=t("h5",{class:"text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2"},[t("i",{class:"fa fa-list-ul text-blue-500"}),u("Budget Breakdown Detail ")],-1)),t("div",De,[t("div",$e,[e[32]||(e[32]=t("p",{class:"text-blue-600 font-medium text-xs mb-1"},"PR Unpaid",-1)),t("p",Re,i(o(s.budget_breakdown.pr_unpaid||0)),1),e[33]||(e[33]=t("p",{class:"text-xs text-gray-500 mt-1"},[u("PR items yang"),t("br"),u("belum dibuat PO")],-1))]),t("div",Ae,[e[34]||(e[34]=t("p",{class:"text-green-600 font-medium text-xs mb-1"},"PR Paid (PO)",-1)),t("p",Ue,i(o(s.budget_breakdown.pr_paid||0)),1),e[35]||(e[35]=t("p",{class:"text-xs text-gray-500 mt-1"},[u("PR items yang"),t("br"),u("sudah jadi PO")],-1))]),t("div",Te,[e[36]||(e[36]=t("p",{class:"text-purple-600 font-medium text-xs mb-1"},"Retail Non Food",-1)),t("p",je,i(o(s.budget_breakdown.retail_non_food||0)),1),e[37]||(e[37]=t("p",{class:"text-xs text-gray-500 mt-1"},"Status: Approved",-1))])]),t("div",Se,[t("div",Ee,[e[38]||(e[38]=t("span",{class:"text-xs font-medium text-gray-700"},"Total PR Items (PR Unpaid + PR Paid):",-1)),t("span",Le,i(o(s.budget_breakdown.pr_total||0)),1)])])])):g("",!0),t("div",Fe,[t("div",Ne,[e[40]||(e[40]=t("span",null,"Budget Usage",-1)),t("span",null,i(p(P(s),s.budget_limit))+"%",1)]),t("div",Ie,[t("div",{class:x(["h-2 rounded-full transition-all duration-300",$(P(s),s.budget_limit)]),style:A({width:`${Math.min(p(P(s),s.budget_limit),100)}%`})},null,6)])])]),s.budget_type==="PER_OUTLET"&&k.value.includes(s.category_id)?(l(),n("div",Ve,[e[54]||(e[54]=t("h4",{class:"font-medium text-gray-700 mb-3"},"Per Outlet Budget Breakdown:",-1)),t("div",Me,[(l(!0),n(_,null,c(s.outlets,d=>(l(),n("div",{key:`${s.category_id}-${d.outlet_id}`,class:"bg-white border border-gray-200 rounded-lg p-4"},[t("div",ze,[t("div",We,[e[41]||(e[41]=t("i",{class:"fa fa-building text-blue-500"},null,-1)),t("span",Xe,i(d.outlet_name),1)]),t("div",Ye,[t("div",{class:x(["text-sm font-medium",d.remaining_budget>=0?"text-green-600":"text-red-600"])},[u(i(o(d.remaining_budget))+" ",1),d.remaining_budget>=0?(l(),n("span",qe,"remaining")):(l(),n("span",He,"exceeded"))],2),t("div",Je,i(p(d.used_amount||(d.paid_amount||0)+(d.unpaid_amount||0),d.budget_limit))+"% used ",1)])]),t("div",Qe,[t("div",Ke,[e[42]||(e[42]=t("div",{class:"text-xs text-gray-500 mb-1"},"Allocated Budget",-1)),t("div",Ze,i(o(d.budget_limit)),1)]),t("div",Ge,[e[43]||(e[43]=t("div",{class:"text-xs text-gray-500 mb-1"},"Used Budget",-1)),t("div",ts,i(o(d.used_amount||(d.paid_amount||0)+(d.unpaid_amount||0))),1),t("div",es,i(p(d.used_amount||(d.paid_amount||0)+(d.unpaid_amount||0),d.budget_limit))+"% of allocated",1)]),t("div",ss,[e[44]||(e[44]=t("div",{class:"text-xs text-gray-500 mb-1"},"Remaining Budget",-1)),t("div",{class:x(["text-lg font-bold",d.remaining_budget>0?"text-green-600":"text-red-600"])},i(o(d.remaining_budget)),3),t("div",{class:x(["text-xs",d.remaining_budget>0?"text-green-600":"text-red-600"])},i(d.remaining_budget>0?"Available":"Exceeded"),3)])]),d.breakdown?(l(),n("div",ds,[e[51]||(e[51]=t("h5",{class:"text-xs font-semibold text-gray-700 mb-3 flex items-center gap-2"},[t("i",{class:"fa fa-list-ul text-blue-500"}),u("Budget Breakdown Detail ")],-1)),t("div",is,[t("div",ls,[e[45]||(e[45]=t("p",{class:"text-blue-600 font-medium"},"PR",-1)),t("p",ns,i(o(d.breakdown.pr_total||0)),1),e[46]||(e[46]=t("p",{class:"text-xs text-gray-500 mt-1"},[u("Total PR items"),t("br"),u("yang sudah dibuat")],-1))]),t("div",os,[e[47]||(e[47]=t("p",{class:"text-blue-600 font-medium"},"PO",-1)),t("p",as,i(o(d.breakdown.po_total||0)),1),e[48]||(e[48]=t("p",{class:"text-xs text-gray-500 mt-1"},[u("Total PO items"),t("br"),u("yang sudah dibuat")],-1))]),t("div",rs,[e[49]||(e[49]=t("p",{class:"text-purple-600 font-medium"},"Retail Non Food",-1)),t("p",us,i(o(d.breakdown.retail_non_food||0)),1),e[50]||(e[50]=t("p",{class:"text-xs text-gray-500 mt-1"},"Status: Approved",-1))])])])):g("",!0),t("div",gs,[t("div",xs,[e[52]||(e[52]=t("span",null,"Budget Usage",-1)),t("span",null,i(p(d.used_amount||(d.paid_amount||0)+(d.unpaid_amount||0),d.budget_limit))+"%",1)]),t("div",ms,[t("div",{class:x(["h-2 rounded-full transition-all duration-300",$(d.used_amount||(d.paid_amount||0)+(d.unpaid_amount||0),d.budget_limit)]),style:A({width:`${Math.min(p(d.used_amount||(d.paid_amount||0)+(d.unpaid_amount||0),d.budget_limit),100)}%`})},null,6)])])]))),128)),s.outlets.length===0?(l(),n("div",bs,e[53]||(e[53]=[t("i",{class:"fa fa-building text-4xl mb-4"},null,-1),t("p",null,"No outlet budget data available for this category.",-1)]))):g("",!0)])])):g("",!0)]))),128))]))])])])])]),_:1}))}};export{Ps as default};
