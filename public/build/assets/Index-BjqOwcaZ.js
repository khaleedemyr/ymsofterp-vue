import{r as i,a as H,L as n,B as l,x as C,Q as h,U as $,C as N,D as t,A as O,E as v,H as c,J as _,I as F,G as d,F as S,M as R,N as r,l as j}from"./vendor-vue-g7iCcTkf.js";import{A as G}from"./AppLayout-BpSu8nlk.js";import z from"./PaymentModal-Mb3pI_GH.js";import J from"./HistoryModal-CTKKrp87.js";import{a as Q}from"./vendor-utils-CpgP2uT4.js";import{l as Y}from"./lodash-DB3HVzpp.js";import"./app-C7BJ3pFi.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DDWCBsJM.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./PaymentDetailModal-D3jSla_D.js";const q={class:"py-12"},K={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},W={class:"bg-white overflow-hidden shadow-lg sm:rounded-2xl"},X={class:"p-6 text-gray-900"},Z={class:"flex flex-wrap gap-3 mb-6 items-end bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl px-4 py-4 shadow-md"},tt={class:"flex justify-end mb-4"},et={class:"overflow-x-auto"},st={class:"min-w-full bg-white rounded-xl shadow-md overflow-hidden"},at={class:"px-6 py-4 whitespace-nowrap font-semibold text-blue-900"},ot={class:"px-6 py-4 whitespace-nowrap"},lt={class:"px-6 py-4 whitespace-nowrap"},nt={class:"px-6 py-4 whitespace-nowrap"},rt={class:"px-6 py-4 whitespace-nowrap"},it={class:"text-green-700 font-semibold"},ut={class:"text-red-600 font-semibold"},dt={class:"px-6 py-4 whitespace-nowrap"},pt={key:0,class:"fas fa-times-circle mr-1 text-red-500"},ct={key:1,class:"fas fa-hourglass-half mr-1 text-yellow-500"},mt={key:2,class:"fas fa-check-circle mr-1 text-green-500"},xt={class:"px-6 py-4 whitespace-nowrap flex gap-2 items-center"},ft=["onClick"],yt={key:0},Tt={__name:"Index",props:{unpaidPOs:Array},setup(T){const A=T,m=i(!1),x=i(!1),f=i(null),y=i(null),o=i({search:"",status:"",startDate:"",endDate:""}),b=i(A.unpaidPOs),u=async()=>{const a=await Q.get("/mt-po-payment",{params:o.value});b.value=a.data.unpaidPOs},P=Y.debounce(u,400);function I(a){f.value=a,m.value=!0}function k(){m.value=!1,f.value=null}function U(a=null){a&&(y.value=a),x.value=!0}function E(){x.value=!1,y.value=null}function V(){k(),u()}function L(a){if(!a)return"-";const e=new Date(a);return isNaN(e)?"-":e.toLocaleDateString("id-ID")}function g(a){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a)}function B(a){return`px-2 py-1 rounded-full text-xs ${{unpaid:"bg-red-100 text-red-800",partial_paid:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800"}[a]}`}return H(()=>{}),(a,e)=>(l(),n(S,null,[C(h($),{title:"MT PO Payment"}),C(G,null,{header:N(()=>e[6]||(e[6]=[t("div",{class:"flex justify-between items-center"},[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," MT PO Payment ")],-1)])),default:N(()=>[t("div",q,[t("div",K,[t("div",W,[t("div",X,[t("div",Z,[c(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.search=s),onInput:e[1]||(e[1]=(...s)=>h(P)&&h(P)(...s)),type:"text",placeholder:"Cari PO/Supplier...",class:"rounded-lg border border-blue-200 px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition w-56 bg-white shadow-sm"},null,544),[[_,o.value.search]]),c(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.status=s),onChange:u,class:"rounded-lg border border-blue-200 px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition bg-white shadow-sm"},e[7]||(e[7]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"unpaid"},"Unpaid",-1),t("option",{value:"partial_paid"},"Partial Paid",-1)]),544),[[F,o.value.status]]),c(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.startDate=s),onChange:u,type:"date",class:"rounded-lg border border-blue-200 px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition bg-white shadow-sm"},null,544),[[_,o.value.startDate]]),e[8]||(e[8]=t("span",{class:"text-gray-400"},"-",-1)),c(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.endDate=s),onChange:u,type:"date",class:"rounded-lg border border-blue-200 px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition bg-white shadow-sm"},null,544),[[_,o.value.endDate]])]),t("div",tt,[t("button",{onClick:e[5]||(e[5]=s=>U()),class:"btn-secondary"},e[9]||(e[9]=[t("i",{class:"fas fa-history mr-2"},null,-1),d("Payment History ")]))]),t("div",et,[t("table",st,[e[14]||(e[14]=t("thead",{class:"bg-blue-100"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"PO NUMBER"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"DATE"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"SUPPLIER"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"TOTAL AMOUNT"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"PAID / REMAINING"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"PAYMENT STATUS"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"ACTIONS")])],-1)),t("tbody",null,[(l(!0),n(S,null,R(b.value,s=>{var D,M;return l(),n("tr",{key:s.id,class:"hover:bg-blue-50 transition-all duration-200"},[t("td",at,r(s.po_number),1),t("td",ot,r(L(s.created_at)),1),t("td",lt,r(s.supplier.name),1),t("td",nt,r(g(s.total_amount)),1),t("td",rt,[t("div",it,[d(r(g(((D=s.payments)==null?void 0:D.reduce((p,w)=>p+Number(w.payment_amount),0))||0))+" ",1),e[10]||(e[10]=t("span",{class:"text-xs"},"paid",-1))]),t("div",ut,[d(r(g(s.total_amount-(((M=s.payments)==null?void 0:M.reduce((p,w)=>p+Number(w.payment_amount),0))||0)))+" ",1),e[11]||(e[11]=t("span",{class:"text-xs"},"remaining",-1))])]),t("td",dt,[t("span",{class:j(B(s.payment_status))},[s.payment_status==="unpaid"?(l(),n("i",pt)):s.payment_status==="partial_paid"?(l(),n("i",ct)):(l(),n("i",mt)),d(" "+r(s.payment_status),1)],2)]),t("td",xt,[t("button",{onClick:p=>I(s),class:"btn-primary transition-all duration-200 hover:scale-105"},e[12]||(e[12]=[t("i",{class:"fas fa-money-bill-wave mr-1"},null,-1),d(" Make Payment ")]),8,ft)])])}),128)),b.value.length===0?(l(),n("tr",yt,e[13]||(e[13]=[t("td",{colspan:"7",class:"text-center text-gray-400 py-8"},"Tidak ada data PO sesuai filter",-1)]))):v("",!0)])])])])])])]),m.value?(l(),O(z,{key:0,po:f.value,onClose:k,onPaymentSuccess:V},null,8,["po"])):v("",!0),x.value?(l(),O(J,{key:1,po:y.value,onClose:E},null,8,["po"])):v("",!0)]),_:1})],64))}};export{Tt as default};
