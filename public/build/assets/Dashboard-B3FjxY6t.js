import{r as c,a as it,j as nt,A as dt,B as a,C as ut,D as t,G as x,H as O,l as i,N as o,I as W,L as r,F as m,M as y,E as f,Y as ct}from"./vendor-vue-g7iCcTkf.js";import{A as xt}from"./AppLayout-CLYhXf-W.js";import{a as v}from"./vendor-utils-CpgP2uT4.js";import"./app-DdwtQE43.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CauiUg4O.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const pt={class:"max-w-7xl mx-auto py-8 px-4"},gt={class:"flex justify-between items-center mb-6"},ft={class:"flex items-center gap-4"},mt={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},yt={class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500"},bt={class:"flex items-center justify-between"},vt={class:"text-3xl font-bold text-gray-900 mt-2"},_t={class:"text-xs text-gray-500 mt-1"},ht={class:"flex items-center justify-between"},wt={class:"text-3xl font-bold text-gray-900 mt-2"},kt={class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-yellow-500"},St={class:"flex items-center justify-between"},Ct={class:"text-3xl font-bold text-gray-900 mt-2"},Mt={class:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500"},At={class:"flex items-center justify-between"},Tt={class:"text-3xl font-bold text-gray-900 mt-2"},qt={class:"bg-white rounded-xl shadow-lg mb-6"},Qt={class:"border-b border-gray-200"},Pt={class:"flex -mb-px"},Ut=["onClick"],Ft={class:"p-6"},Lt={key:0,class:"space-y-4"},Rt={key:0,class:"text-center py-8"},Bt={key:1,class:"text-center py-8 text-gray-500"},jt={key:2,class:"space-y-4"},It={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},Dt={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Nt={class:"flex items-center justify-between"},Et={class:"text-2xl font-bold text-blue-700 mt-1"},$t={class:"flex items-center justify-between"},Yt={class:"text-xs text-gray-600 font-medium"},Ot={class:"text-xs text-gray-500 mt-1"},Wt={class:"bg-white border border-gray-200 rounded-lg p-4 mb-4"},Vt={class:"overflow-x-auto"},zt={class:"min-w-full divide-y divide-gray-200"},Ht={class:"bg-white divide-y divide-gray-200"},Jt={class:"px-4 py-3 text-sm"},Gt={class:"flex items-center gap-2"},Kt={class:"font-medium"},Xt={class:"px-4 py-3 text-sm text-center font-semibold"},Zt={class:"px-4 py-3 text-sm text-center text-gray-600"},te={class:"px-4 py-3 text-sm"},ee={class:"w-full bg-gray-200 rounded-full h-2"},se={class:"overflow-x-auto"},le={class:"min-w-full divide-y divide-gray-200"},oe={class:"bg-white divide-y divide-gray-200"},ae={class:"px-4 py-3 text-sm"},re={class:"font-semibold text-gray-900"},ie={class:"text-xs text-gray-500"},ne={class:"px-4 py-3 text-sm"},de={class:"px-4 py-3 text-sm text-gray-600"},ue={class:"text-xs text-gray-400"},ce={class:"px-4 py-3 text-sm"},xe={key:0,class:"space-y-1"},pe={key:0,class:"text-gray-700 font-medium"},ge={key:1,class:"text-xs text-gray-500"},fe={key:0,class:"font-mono text-blue-600"},me={class:"text-gray-600"},ye={key:2,class:"text-gray-400"},be={key:1,class:"text-gray-400"},ve={class:"px-4 py-3 text-sm text-gray-600"},_e={class:"px-4 py-3 text-sm"},he={key:1,class:"space-y-4"},we={key:0,class:"text-center py-8"},ke={key:1,class:"text-center py-8 text-gray-500"},Se={key:2,class:"overflow-x-auto"},Ce={class:"min-w-full divide-y divide-gray-200"},Me={class:"bg-white divide-y divide-gray-200"},Ae={class:"px-4 py-3 text-sm"},Te={class:"px-4 py-3 text-sm"},qe={class:"px-4 py-3 text-sm"},Qe={class:"px-4 py-3 text-sm"},Pe={class:"px-4 py-3 text-sm"},Ue=["title"],Fe={class:"px-4 py-3 text-sm"},Le=["onClick"],Re={key:2,class:"space-y-4"},Be={class:"flex justify-between items-center mb-4"},je={class:"flex gap-2"},Ie={key:0,class:"text-center py-8"},De={key:1,class:"text-center py-8 text-gray-500"},Ne={key:2,class:"space-y-4"},Ee={class:"flex justify-between items-start mb-2"},$e={class:"flex gap-4"},Ye={class:"text-sm font-semibold text-gray-700"},Oe={class:"text-red-600"},We={class:"text-sm text-gray-600"},Ve={class:"font-semibold"},ze={class:"text-sm text-gray-600"},He={class:"font-semibold"},Je={class:"text-xs text-gray-500"},Ge={class:"bg-gray-50 p-3 rounded text-xs overflow-x-auto"},Ke={key:3,class:"space-y-4"},Xe={key:0,class:"text-center py-8"},Ze={key:1,class:"text-center py-8 text-gray-500"},ts={key:2,class:"overflow-x-auto"},es={class:"min-w-full divide-y divide-gray-200"},ss={class:"bg-white divide-y divide-gray-200"},ls={class:"px-4 py-3 text-sm"},os={class:"bg-gray-50 p-2 rounded text-xs max-w-2xl overflow-x-auto"},as={class:"px-4 py-3 text-sm text-center font-semibold"},rs={class:"px-4 py-3 text-sm text-center text-red-600 font-semibold"},is={class:"px-4 py-3 text-sm text-center"},ns={key:4,class:"space-y-4"},ds={key:0,class:"text-center py-8"},us={key:1,class:"text-center py-8 text-gray-500"},cs={key:2,class:"overflow-x-auto"},xs={class:"min-w-full divide-y divide-gray-200"},ps={class:"bg-white divide-y divide-gray-200"},gs={class:"px-4 py-3 text-sm font-semibold"},fs={class:"px-4 py-3 text-sm text-center"},ms={class:"px-4 py-3 text-sm text-center"},ys={class:"px-4 py-3 text-sm text-center text-red-600 font-semibold"},bs={class:"px-4 py-3 text-sm text-center"},Qs={__name:"Dashboard",setup(vs){const p=c(!1),C=c(5);let k=null;const V=[{id:"active-users",label:"Active Users",icon:"fa-solid fa-users"},{id:"processes",label:"Active Processes",icon:"fa-solid fa-list"},{id:"slow-queries",label:"Slow Queries",icon:"fa-solid fa-clock"},{id:"summary",label:"Summary",icon:"fa-solid fa-chart-bar"},{id:"tables",label:"Table Stats",icon:"fa-solid fa-table"}],u=c("active-users"),d=c({activeUsers:!1,processes:!1,slowQueries:!1,summary:!1,tableStats:!1}),g=c({}),b=c([]),M=c([]),A=c([]),T=c([]),q=c([]),Q=c([]),P=c(10),U=async()=>{try{const s=await v.get("/api/monitoring/mysql-status");s.data.success&&(g.value=s.data.data)}catch(s){console.error("Error loading MySQL status:",s)}},F=async()=>{d.value.activeUsers=!0;try{const s=await v.get("/api/monitoring/active-users");s.data.success&&(b.value=s.data.data,M.value=s.data.breakdown||[])}catch(s){console.error("Error loading active users:",s)}finally{d.value.activeUsers=!1}},h=async()=>{d.value.processes=!0;try{const s=await v.get("/api/monitoring/mysql-processes");s.data.success&&(A.value=s.data.data)}catch(s){console.error("Error loading processes:",s)}finally{d.value.processes=!1}},L=async()=>{d.value.slowQueries=!0;try{const s=await v.get("/api/monitoring/slow-queries",{params:{limit:P.value}});s.data.success&&(T.value=s.data.data)}catch(s){console.error("Error loading slow queries:",s)}finally{d.value.slowQueries=!1}},j=async()=>{d.value.summary=!0;try{const s=await v.get("/api/monitoring/slow-queries-summary");s.data.success&&(q.value=s.data.data)}catch(s){console.error("Error loading slow queries summary:",s)}finally{d.value.summary=!1}},I=async()=>{d.value.tableStats=!0;try{const s=await v.get("/api/monitoring/table-stats");s.data.success&&(Q.value=s.data.data)}catch(s){console.error("Error loading table stats:",s)}finally{d.value.tableStats=!1}},z=async s=>{var e,l;if(confirm(`Are you sure you want to kill process ${s}?`))try{(await v.post("/api/monitoring/kill-process",{process_id:s})).data.success&&(alert("Process killed successfully"),h())}catch(n){alert("Error killing process: "+(((l=(e=n.response)==null?void 0:e.data)==null?void 0:l.error)||n.message))}},H=()=>{p.value=!p.value,p.value?D():R()},D=()=>{U(),u.value==="processes"&&h(),u.value==="slow-queries"&&L(),u.value==="summary"&&j(),u.value==="tables"&&I(),k=setInterval(()=>{U(),u.value==="active-users"&&F(),u.value==="processes"&&h()},C.value*1e3)},R=()=>{k&&(clearInterval(k),k=null)},J=()=>{p.value&&(R(),D())},_=s=>s?new Intl.NumberFormat("id-ID").format(s):"0",N=s=>s?new Date(s).toLocaleString("id-ID"):"-",E=s=>s>5?"text-red-600 font-semibold":s>2?"text-yellow-600 font-semibold":"text-gray-600",G=s=>({Query:"bg-blue-100 text-blue-800",Connect:"bg-green-100 text-green-800",Sleep:"bg-gray-100 text-gray-800"})[s]||"bg-gray-100 text-gray-800",K=()=>{const s=g.value.Threads_running||0;return s>10?"border-red-500":s>5?"border-yellow-500":"border-green-500"},X=()=>{const s=g.value.Threads_running||0;return s>10?"bg-red-100":s>5?"bg-yellow-100":"bg-green-100"},Z=()=>{const s=g.value.Threads_running||0;return s>10?"text-red-600":s>5?"text-yellow-600":"text-green-600"},tt=s=>s.includes("Web")?"bg-blue-100 text-blue-800":s.includes("Member")?"bg-purple-100 text-purple-800":s.includes("YMSoft App")?"bg-green-100 text-green-800":s.includes("POS")?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800",B=s=>s.includes("Web")?"fa-solid fa-globe":s.includes("Member")?"fa-solid fa-mobile-alt":s.includes("YMSoft App")?"fa-solid fa-mobile-screen-button":s.includes("POS")?"fa-solid fa-desktop":"fa-solid fa-question-circle",et=s=>s==="web_session"?"bg-blue-100 text-blue-800":s==="api_token"?"bg-green-100 text-green-800":s==="member_token"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800",st=s=>{if(!s)return"-";const e=new Date(s),n=new Date-e,w=Math.floor(n/6e4);if(w<1)return"Just now";if(w<60)return`${w} minute${w>1?"s":""} ago`;const S=Math.floor(w/60);if(S<24)return`${S} hour${S>1?"s":""} ago`;const Y=Math.floor(S/24);return`${Y} day${Y>1?"s":""} ago`},lt=s=>s.includes("Web")?"bg-blue-50 border-blue-200":s.includes("Member")?"bg-purple-50 border-purple-200":s.includes("YMSoft App")?"bg-green-50 border-green-200":s.includes("POS")?"bg-orange-50 border-orange-200":"bg-gray-50 border-gray-200",ot=s=>s.includes("Web")?"text-blue-700":s.includes("Member")?"text-purple-700":s.includes("YMSoft App")?"text-green-700":s.includes("POS")?"text-orange-700":"text-gray-700",at=s=>s.includes("Web")?"bg-blue-100":s.includes("Member")?"bg-purple-100":s.includes("YMSoft App")?"bg-green-100":s.includes("POS")?"bg-orange-100":"bg-gray-100",$=s=>s.includes("Web")?"text-blue-600 text-xl":s.includes("Member")?"text-purple-600 text-xl":s.includes("YMSoft App")?"text-green-600 text-xl":s.includes("POS")?"text-orange-600 text-xl":"text-gray-600 text-xl",rt=s=>s.includes("Web")?"bg-blue-500":s.includes("Member")?"bg-purple-500":s.includes("YMSoft App")?"bg-green-500":s.includes("POS")?"bg-orange-500":"bg-gray-500";return it(()=>{U(),F(),h()}),nt(()=>{R()}),(s,e)=>(a(),dt(xt,null,{default:ut(()=>[t("div",pt,[t("div",gt,[e[3]||(e[3]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900 flex items-center gap-3"},[t("i",{class:"fa-solid fa-server text-blue-600"}),x(" Server Performance Monitoring ")]),t("p",{class:"text-gray-600 mt-1"},"Real-time monitoring server performance dan database queries")],-1)),t("div",ft,[t("div",{class:i(["flex items-center gap-2",p.value?"bg-green-50":"bg-gray-50"]),style:{padding:"8px 16px",borderRadius:"8px"}},[t("div",{class:i(["w-3 h-3 rounded-full",p.value?"bg-green-500 animate-pulse":"bg-gray-400"])},null,2),t("span",{class:i(["text-sm font-semibold",p.value?"text-green-700":"text-gray-700"])},o(p.value?"Live":"Paused"),3)],2),t("button",{onClick:H,class:i([p.value?"bg-red-500 hover:bg-red-600":"bg-blue-500 hover:bg-blue-600","text-white px-4 py-2 rounded-lg transition-colors"])},o(p.value?"Stop":"Start")+" Monitoring ",3),O(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>C.value=l),onChange:J,class:"border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[2]||(e[2]=[t("option",{value:2},"2 detik",-1),t("option",{value:5},"5 detik",-1),t("option",{value:10},"10 detik",-1),t("option",{value:30},"30 detik",-1)]),544),[[W,C.value]])])]),t("div",mt,[t("div",yt,[t("div",bt,[t("div",null,[e[4]||(e[4]=t("p",{class:"text-gray-600 text-sm font-medium"},"Threads Connected",-1)),t("p",vt,o(g.value.Threads_connected||0),1),t("p",_t,"Max: "+o(g.value.Max_used_connections||0),1)]),e[5]||(e[5]=t("div",{class:"bg-blue-100 p-4 rounded-full"},[t("i",{class:"fa-solid fa-plug text-blue-600 text-2xl"})],-1))])]),t("div",{class:i(["bg-white rounded-xl shadow-lg p-6 border-l-4",K()])},[t("div",ht,[t("div",null,[e[6]||(e[6]=t("p",{class:"text-gray-600 text-sm font-medium"},"Threads Running",-1)),t("p",wt,o(g.value.Threads_running||0),1),e[7]||(e[7]=t("p",{class:"text-xs text-gray-500 mt-1"},"Active queries",-1))]),t("div",{class:i(["p-4 rounded-full",X()])},[t("i",{class:i(["fa-solid fa-spinner text-2xl",Z()])},null,2)],2)])],2),t("div",kt,[t("div",St,[t("div",null,[e[8]||(e[8]=t("p",{class:"text-gray-600 text-sm font-medium"},"Slow Queries",-1)),t("p",Ct,o(g.value.Slow_queries||0),1),e[9]||(e[9]=t("p",{class:"text-xs text-gray-500 mt-1"},"Total since start",-1))]),e[10]||(e[10]=t("div",{class:"bg-yellow-100 p-4 rounded-full"},[t("i",{class:"fa-solid fa-clock text-yellow-600 text-2xl"})],-1))])]),t("div",Mt,[t("div",At,[t("div",null,[e[11]||(e[11]=t("p",{class:"text-gray-600 text-sm font-medium"},"Total Questions",-1)),t("p",Tt,o(_(g.value.Questions)),1),e[12]||(e[12]=t("p",{class:"text-xs text-gray-500 mt-1"},"Queries executed",-1))]),e[13]||(e[13]=t("div",{class:"bg-green-100 p-4 rounded-full"},[t("i",{class:"fa-solid fa-database text-green-600 text-2xl"})],-1))])])]),t("div",qt,[t("div",Qt,[t("nav",Pt,[(a(),r(m,null,y(V,l=>t("button",{key:l.id,onClick:n=>u.value=l.id,class:i([u.value===l.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","px-6 py-4 text-sm font-medium border-b-2 transition-colors"])},[t("i",{class:i([l.icon,"mr-2"])},null,2),x(" "+o(l.label),1)],10,Ut)),64))])]),t("div",Ft,[u.value==="active-users"?(a(),r("div",Lt,[t("div",{class:"flex justify-between items-center mb-4"},[e[15]||(e[15]=t("div",null,[t("h3",{class:"text-lg font-semibold"},"Active Users"),t("p",{class:"text-sm text-gray-600"},"Users yang sedang aktif dalam 15 menit terakhir")],-1)),t("button",{onClick:F,class:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors"},e[14]||(e[14]=[t("i",{class:"fa-solid fa-refresh mr-2"},null,-1),x("Refresh ")]))]),d.value.activeUsers?(a(),r("div",Rt,e[16]||(e[16]=[t("i",{class:"fa-solid fa-spinner fa-spin text-3xl text-blue-500"},null,-1),t("p",{class:"mt-2 text-gray-600"},"Loading active users...",-1)]))):b.value.length===0?(a(),r("div",Bt,e[17]||(e[17]=[t("i",{class:"fa-solid fa-users text-4xl mb-2"},null,-1),t("p",null,"No active users",-1)]))):(a(),r("div",jt,[t("div",It,[t("div",Dt,[t("div",Nt,[t("div",null,[e[18]||(e[18]=t("p",{class:"text-xs text-gray-600 font-medium"},"Total Active Users",-1)),t("p",Et,o(b.value.length),1)]),e[19]||(e[19]=t("div",{class:"bg-blue-100 p-3 rounded-full"},[t("i",{class:"fa-solid fa-users text-blue-600 text-xl"})],-1))])]),(a(!0),r(m,null,y(M.value,(l,n)=>(a(),r("div",{key:n,class:i(["border rounded-lg p-4",lt(l.application)])},[t("div",$t,[t("div",null,[t("p",Yt,o(l.application),1),t("p",{class:i(["text-2xl font-bold mt-1",ot(l.application)])},o(l.count),3),t("p",Ot,o((l.count/b.value.length*100).toFixed(1))+"% dari total ",1)]),t("div",{class:i(["p-3 rounded-full",at(l.application)])},[t("i",{class:i([B(l.application),$(l.application)])},null,2)],2)])],2))),128))]),t("div",Wt,[e[21]||(e[21]=t("h4",{class:"text-sm font-semibold text-gray-700 mb-3"},"Breakdown per Aplikasi",-1)),t("div",Vt,[t("table",zt,[e[20]||(e[20]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Aplikasi"),t("th",{class:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase"},"Jumlah User"),t("th",{class:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase"},"Persentase"),t("th",{class:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase"},"Progress")])],-1)),t("tbody",Ht,[(a(!0),r(m,null,y(M.value,(l,n)=>(a(),r("tr",{key:n,class:"hover:bg-gray-50"},[t("td",Jt,[t("div",Gt,[t("i",{class:i([B(l.application),$(l.application)])},null,2),t("span",Kt,o(l.application),1)])]),t("td",Xt,o(l.count),1),t("td",Zt,o((l.count/b.value.length*100).toFixed(1))+"% ",1),t("td",te,[t("div",ee,[t("div",{class:i(["h-2 rounded-full transition-all",rt(l.application)]),style:ct({width:l.count/b.value.length*100+"%"})},null,6)])])]))),128))])])])]),t("div",se,[t("table",le,[e[23]||(e[23]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"User"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Application"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Last Activity"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Last Action"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"IP Address"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type")])],-1)),t("tbody",oe,[(a(!0),r(m,null,y(b.value,(l,n)=>(a(),r("tr",{key:n,class:"hover:bg-gray-50"},[t("td",ae,[t("div",null,[t("div",re,o(l.name),1),t("div",ie,o(l.email||l.member_id||"-"),1)])]),t("td",ne,[t("span",{class:i(["px-2 py-1 rounded text-xs font-medium",tt(l.application)])},[t("i",{class:i([B(l.application),"mr-1"])},null,2),x(" "+o(l.application),1)],2)]),t("td",de,[x(o(N(l.last_activity))+" ",1),t("div",ue,o(st(l.last_activity)),1)]),t("td",ce,[l.last_action||l.last_route?(a(),r("div",xe,[l.last_action?(a(),r("div",pe,o(l.last_action),1)):f("",!0),l.last_route?(a(),r("div",ge,[e[22]||(e[22]=t("i",{class:"fa-solid fa-link mr-1"},null,-1)),l.last_method?(a(),r("span",fe,o(l.last_method),1)):f("",!0),t("span",me,o(l.last_route),1)])):l.last_action?f("",!0):(a(),r("div",ye,"-"))])):(a(),r("span",be,"-"))]),t("td",ve,o(l.ip_address||"-"),1),t("td",_e,[t("span",{class:i(["px-2 py-1 rounded text-xs",et(l.type)])},o(l.type),3)])]))),128))])])])]))])):f("",!0),u.value==="processes"?(a(),r("div",he,[t("div",{class:"flex justify-between items-center mb-4"},[e[25]||(e[25]=t("h3",{class:"text-lg font-semibold"},"Active MySQL Processes",-1)),t("button",{onClick:h,class:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors"},e[24]||(e[24]=[t("i",{class:"fa-solid fa-refresh mr-2"},null,-1),x("Refresh ")]))]),d.value.processes?(a(),r("div",we,e[26]||(e[26]=[t("i",{class:"fa-solid fa-spinner fa-spin text-3xl text-blue-500"},null,-1),t("p",{class:"mt-2 text-gray-600"},"Loading processes...",-1)]))):A.value.length===0?(a(),r("div",ke,e[27]||(e[27]=[t("i",{class:"fa-solid fa-check-circle text-4xl mb-2"},null,-1),t("p",null,"No active processes",-1)]))):(a(),r("div",Se,[t("table",Ce,[e[28]||(e[28]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ID"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"User"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"DB"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Command"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Time (s)"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"State"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Query"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Action")])],-1)),t("tbody",Me,[(a(!0),r(m,null,y(A.value,l=>(a(),r("tr",{key:l.id,class:i(l.time>5?"bg-red-50":l.time>2?"bg-yellow-50":"")},[t("td",Ae,o(l.id),1),t("td",Te,o(l.user),1),t("td",qe,o(l.db||"-"),1),t("td",Qe,[t("span",{class:i(["px-2 py-1 rounded text-xs font-medium",G(l.command)])},o(l.command),3)]),t("td",{class:i(["px-4 py-3 text-sm font-semibold",E(l.time)])},o(l.time),3),t("td",Pe,o(l.state||"-"),1),t("td",{class:"px-4 py-3 text-sm text-gray-600 max-w-md truncate",title:l.query_preview},o(l.query_preview||"-"),9,Ue),t("td",Fe,[l.time>5?(a(),r("button",{key:0,onClick:n=>z(l.id),class:"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition-colors text-xs"}," Kill ",8,Le)):f("",!0)])],2))),128))])])]))])):f("",!0),u.value==="slow-queries"?(a(),r("div",Re,[t("div",Be,[e[31]||(e[31]=t("h3",{class:"text-lg font-semibold"},"Recent Slow Queries",-1)),t("div",je,[O(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>P.value=l),onChange:L,class:"border border-gray-300 rounded-lg px-3 py-2 text-sm"},e[29]||(e[29]=[t("option",{value:10},"10 queries",-1),t("option",{value:20},"20 queries",-1),t("option",{value:50},"50 queries",-1)]),544),[[W,P.value]]),t("button",{onClick:L,class:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors"},e[30]||(e[30]=[t("i",{class:"fa-solid fa-refresh mr-2"},null,-1),x("Refresh ")]))])]),d.value.slowQueries?(a(),r("div",Ie,e[32]||(e[32]=[t("i",{class:"fa-solid fa-spinner fa-spin text-3xl text-blue-500"},null,-1),t("p",{class:"mt-2 text-gray-600"},"Loading slow queries...",-1)]))):T.value.length===0?(a(),r("div",De,e[33]||(e[33]=[t("i",{class:"fa-solid fa-check-circle text-4xl mb-2"},null,-1),t("p",null,"No slow queries found",-1),t("p",{class:"text-sm mt-2"},"Slow query log might be disabled or empty",-1)]))):(a(),r("div",Ne,[(a(!0),r(m,null,y(T.value,(l,n)=>(a(),r("div",{key:n,class:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow"},[t("div",Ee,[t("div",$e,[t("span",Ye,[e[34]||(e[34]=x(" Time: ")),t("span",Oe,o(parseFloat(l.query_time).toFixed(3))+"s",1)]),t("span",We,[e[35]||(e[35]=x(" Rows Examined: ")),t("span",Ve,o(_(l.rows_examined)),1)]),t("span",ze,[e[36]||(e[36]=x(" Rows Sent: ")),t("span",He,o(_(l.rows_sent)),1)])]),t("span",Je,o(N(l.created_at)),1)]),t("pre",Ge,o(l.sql_text),1)]))),128))]))])):f("",!0),u.value==="summary"?(a(),r("div",Ke,[t("div",{class:"flex justify-between items-center mb-4"},[e[38]||(e[38]=t("h3",{class:"text-lg font-semibold"},"Slow Queries Summary",-1)),t("button",{onClick:j,class:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors"},e[37]||(e[37]=[t("i",{class:"fa-solid fa-refresh mr-2"},null,-1),x("Refresh ")]))]),d.value.summary?(a(),r("div",Xe,e[39]||(e[39]=[t("i",{class:"fa-solid fa-spinner fa-spin text-3xl text-blue-500"},null,-1),t("p",{class:"mt-2 text-gray-600"},"Loading summary...",-1)]))):q.value.length===0?(a(),r("div",Ze,e[40]||(e[40]=[t("i",{class:"fa-solid fa-check-circle text-4xl mb-2"},null,-1),t("p",null,"No slow queries summary available",-1)]))):(a(),r("div",ts,[t("table",es,[e[41]||(e[41]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Query"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Call Count"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Avg Time (s)"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Max Time (s)"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Avg Rows")])],-1)),t("tbody",ss,[(a(!0),r(m,null,y(q.value,(l,n)=>(a(),r("tr",{key:n},[t("td",ls,[t("pre",os,o(l.sql_text),1)]),t("td",as,o(l.call_count),1),t("td",{class:i(["px-4 py-3 text-sm text-center",E(parseFloat(l.avg_query_time))])},o(parseFloat(l.avg_query_time).toFixed(3)),3),t("td",rs,o(parseFloat(l.max_query_time).toFixed(3)),1),t("td",is,o(_(l.avg_rows_examined)),1)]))),128))])])]))])):f("",!0),u.value==="tables"?(a(),r("div",ns,[t("div",{class:"flex justify-between items-center mb-4"},[e[43]||(e[43]=t("h3",{class:"text-lg font-semibold"},"Table Access Statistics",-1)),t("button",{onClick:I,class:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors"},e[42]||(e[42]=[t("i",{class:"fa-solid fa-refresh mr-2"},null,-1),x("Refresh ")]))]),d.value.tableStats?(a(),r("div",ds,e[44]||(e[44]=[t("i",{class:"fa-solid fa-spinner fa-spin text-3xl text-blue-500"},null,-1),t("p",{class:"mt-2 text-gray-600"},"Loading table stats...",-1)]))):Q.value.length===0?(a(),r("div",us,e[45]||(e[45]=[t("i",{class:"fa-solid fa-check-circle text-4xl mb-2"},null,-1),t("p",null,"No table access statistics available",-1)]))):(a(),r("div",cs,[t("table",xs,[e[46]||(e[46]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Table Name"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Access Count"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Avg Time (s)"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Max Time (s)"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Total Rows Examined")])],-1)),t("tbody",ps,[(a(!0),r(m,null,y(Q.value,(l,n)=>(a(),r("tr",{key:n},[t("td",gs,o(l.table_name),1),t("td",fs,o(_(l.access_count)),1),t("td",ms,o(parseFloat(l.avg_query_time).toFixed(3)),1),t("td",ys,o(parseFloat(l.max_query_time).toFixed(3)),1),t("td",bs,o(_(l.total_rows_examined)),1)]))),128))])])]))])):f("",!0)])])])]),_:1}))}};export{Qs as default};
