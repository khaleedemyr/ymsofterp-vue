import N from"./LightboxModal-C05wjdKL.js";import{r as g,c as k,L as l,E as r,B as i,D as t,x as C,G as d,N as s,F as u,M as f}from"./vendor-vue-g7iCcTkf.js";import"./vendor-utils-CpgP2uT4.js";const I={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40"},B={class:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto relative animate-fadeIn"},L={class:"p-6"},M={class:"mb-3 grid grid-cols-1 md:grid-cols-2 gap-2"},O={class:"mb-3"},$={class:"mb-4"},S={class:"text-xs ml-2"},j={key:0},D={key:1,class:"text-gray-500"},R={key:0},G={key:1,class:"text-gray-500"},P={key:0},V={key:1,class:"text-gray-500"},E={key:0},F={key:1,class:"text-gray-500"},T={class:"mb-4"},W={class:"min-w-full text-xs rounded-xl overflow-hidden"},z={class:"py-1 px-2"},q={class:"py-1 px-2 text-right"},A={class:"py-1 px-2 text-right"},H={class:"py-1 px-2 text-right"},Q={class:"mb-4"},J={class:"flex flex-row flex-wrap gap-3"},K=["src","onClick"],U={class:"mb-4"},X={class:"flex flex-row flex-wrap gap-3"},Y=["src","onClick"],Z=["src","onClick"],at={__name:"POLatestDetailModal",props:{po:Object,show:Boolean},emits:["close"],setup(o,{emit:tt}){const x=o,c=g(!1),b=g([]),h=g(0),w=k(()=>{var n;return(((n=x.po)==null?void 0:n.invoices)||[]).map(e=>({type:"image",url:"/storage/"+e.invoice_file_path,caption:e.invoice_number}))}),y=k(()=>{var n;return(((n=x.po)==null?void 0:n.receives)||[]).map(e=>({type:e.file_type&&e.file_type.startsWith("video/")?"video":"image",url:"/storage/"+e.file_path,caption:e.notes||"Good Receive"}))});function v(n,e){b.value=Array.isArray(n)?n:n.value,h.value=e,c.value=!0}function m(n){return n?"Rp "+Number(n).toLocaleString("id-ID"):"Rp 0"}return(n,e)=>o.show?(i(),l("div",I,[t("div",B,[t("button",{onClick:e[0]||(e[0]=a=>n.$emit("close")),class:"absolute top-3 right-3 text-gray-400 hover:text-red-500 text-xl z-10"},e[2]||(e[2]=[t("i",{class:"fas fa-times"},null,-1)])),t("div",L,[e[15]||(e[15]=t("h2",{class:"text-xl font-bold mb-4"},"Detail Purchase Order",-1)),t("div",M,[t("div",null,[e[3]||(e[3]=t("span",{class:"font-semibold"},"PO Number:",-1)),d(" "+s(o.po.po_number),1)]),t("div",null,[e[4]||(e[4]=t("span",{class:"font-semibold"},"Created By:",-1)),d(" "+s(o.po.created_by||"-"),1)]),t("div",null,[e[5]||(e[5]=t("span",{class:"font-semibold"},"Supplier:",-1)),d(" "+s(o.po.supplier_name||"-"),1)]),t("div",null,[e[6]||(e[6]=t("span",{class:"font-semibold"},"Status:",-1)),d(" "+s(o.po.status),1)]),t("div",null,[e[7]||(e[7]=t("span",{class:"font-semibold"},"Total:",-1)),d(" "+s(m(o.po.total_amount)),1)]),t("div",null,[e[8]||(e[8]=t("span",{class:"font-semibold"},"Tanggal:",-1)),d(" "+s(o.po.created_at?o.po.created_at.substring(0,10):"-"),1)])]),t("div",O,[e[9]||(e[9]=t("span",{class:"font-semibold"},"Notes:",-1)),d(" "+s(o.po.notes||"-"),1)]),t("div",$,[e[10]||(e[10]=t("div",{class:"font-semibold mb-1"},"Approval Info:",-1)),t("ul",S,[t("li",null,[d(" Purchasing Manager: "+s(o.po.purchasing_manager_approval)+" ",1),o.po.purchasing_manager_approver?(i(),l("span",j," ("+s(o.po.purchasing_manager_approver)+")",1)):r("",!0),o.po.purchasing_manager_approval_notes?(i(),l("div",D,"Notes: "+s(o.po.purchasing_manager_approval_notes),1)):r("",!0)]),t("li",null,[d(" GM Finance: "+s(o.po.gm_finance_approval)+" ",1),o.po.gm_finance_approver?(i(),l("span",R," ("+s(o.po.gm_finance_approver)+")",1)):r("",!0),o.po.gm_finance_approval_notes?(i(),l("div",G,"Notes: "+s(o.po.gm_finance_approval_notes),1)):r("",!0)]),t("li",null,[d(" COO: "+s(o.po.coo_approval)+" ",1),o.po.coo_approver?(i(),l("span",P," ("+s(o.po.coo_approver)+")",1)):r("",!0),o.po.coo_approval_notes?(i(),l("div",V,"Notes: "+s(o.po.coo_approval_notes),1)):r("",!0)]),t("li",null,[d(" CEO: "+s(o.po.ceo_approval)+" ",1),o.po.ceo_approver?(i(),l("span",E," ("+s(o.po.ceo_approver)+")",1)):r("",!0),o.po.ceo_approval_notes?(i(),l("div",F,"Notes: "+s(o.po.ceo_approval_notes),1)):r("",!0)])])]),t("div",T,[e[12]||(e[12]=t("div",{class:"font-semibold mb-1"},"Items:",-1)),t("table",W,[e[11]||(e[11]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"py-1 px-2 text-left"},"Nama Barang"),t("th",{class:"py-1 px-2 text-right"},"Qty"),t("th",{class:"py-1 px-2 text-right"},"Harga"),t("th",{class:"py-1 px-2 text-right"},"Subtotal")])],-1)),t("tbody",null,[(i(!0),l(u,null,f(o.po.items,a=>(i(),l("tr",{key:a.id},[t("td",z,s(a.item_name),1),t("td",q,s(a.quantity),1),t("td",A,s(m(a.price)),1),t("td",H,s(m(a.subtotal)),1)]))),128))])])]),t("div",Q,[e[13]||(e[13]=t("div",{class:"font-semibold mb-1"},"Invoice:",-1)),t("div",J,[(i(!0),l(u,null,f(o.po.invoices,(a,p)=>(i(),l(u,{key:a.id},[a.invoice_file_path?(i(),l("img",{key:0,src:"/storage/"+a.invoice_file_path,class:"w-20 h-20 object-cover rounded shadow border cursor-pointer",onClick:_=>v(w.value,p)},null,8,K)):r("",!0)],64))),128))])]),t("div",U,[e[14]||(e[14]=t("div",{class:"font-semibold mb-1"},"Good Receive:",-1)),t("div",X,[(i(!0),l(u,null,f(o.po.receives,(a,p)=>(i(),l(u,{key:a.id},[a.file_type&&a.file_type.startsWith("image/")?(i(),l("img",{key:0,src:"/storage/"+a.file_path,class:"w-20 h-20 object-cover rounded shadow border cursor-pointer",onClick:_=>v(y.value,p)},null,8,Y)):a.file_type&&a.file_type.startsWith("video/")?(i(),l("video",{key:1,src:"/storage/"+a.file_path,class:"w-20 h-20 object-cover rounded shadow border cursor-pointer",onClick:_=>v(y.value,p)},null,8,Z)):r("",!0)],64))),128))])])]),C(N,{show:c.value,mediaList:b.value,startIndex:h.value,onClose:e[1]||(e[1]=a=>c.value=!1)},null,8,["show","mediaList","startIndex"])])])):r("",!0)}};export{at as default};
