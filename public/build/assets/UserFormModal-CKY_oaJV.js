import{P as _,w as j,r as M,L as n,E as m,B as r,D as s,N as i,O as B,H as b,J as f,Q as o,I as g,F as k,M as w,G as V}from"./vendor-vue-g7iCcTkf.js";import{S as y}from"./app-CXnLHfhT.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";const D={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 transition-all"},U={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md mx-auto p-0 animate-fade-in"},C={class:"px-8 pt-8 pb-2"},N={class:"flex items-center gap-2 mb-6"},E={class:"text-2xl font-bold text-gray-900"},F={key:0,class:"text-xs text-red-500 mt-1"},L={key:0,class:"text-xs text-red-500 mt-1"},O={key:0,class:"text-xs text-red-500 mt-1"},A={key:0,class:"text-xs text-red-500 mt-1"},H=["disabled"],K=["value"],P={key:0,class:"text-xs text-red-500 mt-1"},T=["disabled"],z=["value"],I={key:0,class:"text-xs text-red-500 mt-1"},J={class:"bg-gray-50 px-6 py-4 flex justify-end rounded-b-2xl"},q=["disabled"],G={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Q={__name:"UserFormModal",props:{show:Boolean,mode:String,user:Object,dropdownData:Object,isLoadingDropdown:Boolean},emits:["close","success"],setup(d,{emit:v}){const l=d,c=v,e=_({nik:"",nama_lengkap:"",email:"",no_hp:"",id_outlet:"",id_jabatan:"",status:"A"});j(()=>l.show,x=>{x&&(l.mode==="edit"&&l.user?(e.nik=l.user.nik||"",e.nama_lengkap=l.user.nama_lengkap||"",e.email=l.user.email||"",e.no_hp=l.user.no_hp||"",e.id_outlet=l.user.id_outlet||"",e.id_jabatan=l.user.id_jabatan||"",e.status=l.user.status||"A"):(e.nik="",e.nama_lengkap="",e.email="",e.no_hp="",e.id_outlet="",e.id_jabatan="",e.status="A"))});const u=M(!1);async function p(){u.value=!0,l.mode==="create"?e.post(route("users.store"),{onSuccess:()=>{y.fire("Berhasil","Karyawan berhasil ditambahkan!","success"),c("success"),c("close")},onError:()=>u.value=!1,onFinish:()=>u.value=!1}):l.mode==="edit"&&l.user&&e.put(route("users.update",l.user.id),{onSuccess:()=>{y.fire("Berhasil","Karyawan berhasil diupdate!","success"),c("success"),c("close")},onError:()=>u.value=!1,onFinish:()=>u.value=!1})}function h(){c("close")}return(x,t)=>d.show?(r(),n("div",D,[s("div",U,[s("div",C,[s("div",N,[t[7]||(t[7]=s("svg",{class:"w-7 h-7 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{d:"M16 7a4 4 0 01-8 0","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M12 3v4m0 0a4 4 0 01-4 4H4m8-4a4 4 0 014 4h4","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),s("h3",E,i(d.mode==="edit"?"Edit":"Tambah")+" Karyawan",1)]),s("form",{onSubmit:B(p,["prevent"]),class:"space-y-5"},[s("div",null,[t[8]||(t[8]=s("label",{class:"block text-sm font-medium text-gray-700"},"NIK",-1)),b(s("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>o(e).nik=a),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500",required:"",maxlength:"50"},null,512),[[f,o(e).nik]]),o(e).errors.nik?(r(),n("div",F,i(o(e).errors.nik),1)):m("",!0)]),s("div",null,[t[9]||(t[9]=s("label",{class:"block text-sm font-medium text-gray-700"},"Nama Lengkap",-1)),b(s("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>o(e).nama_lengkap=a),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500",required:"",maxlength:"255"},null,512),[[f,o(e).nama_lengkap]]),o(e).errors.nama_lengkap?(r(),n("div",L,i(o(e).errors.nama_lengkap),1)):m("",!0)]),s("div",null,[t[10]||(t[10]=s("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),b(s("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>o(e).email=a),type:"email",class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500",maxlength:"255"},null,512),[[f,o(e).email]]),o(e).errors.email?(r(),n("div",O,i(o(e).errors.email),1)):m("",!0)]),s("div",null,[t[11]||(t[11]=s("label",{class:"block text-sm font-medium text-gray-700"},"No HP",-1)),b(s("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>o(e).no_hp=a),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500",maxlength:"15"},null,512),[[f,o(e).no_hp]]),o(e).errors.no_hp?(r(),n("div",A,i(o(e).errors.no_hp),1)):m("",!0)]),s("div",null,[t[13]||(t[13]=s("label",{class:"block text-sm font-medium text-gray-700"},"Outlet",-1)),b(s("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>o(e).id_outlet=a),disabled:d.isLoadingDropdown,class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"},[t[12]||(t[12]=s("option",{value:""},"Pilih Outlet",-1)),(r(!0),n(k,null,w(d.dropdownData.outlets,a=>(r(),n("option",{key:a.id_outlet,value:a.id_outlet},i(a.nama_outlet),9,K))),128))],8,H),[[g,o(e).id_outlet]]),o(e).errors.id_outlet?(r(),n("div",P,i(o(e).errors.id_outlet),1)):m("",!0)]),s("div",null,[t[15]||(t[15]=s("label",{class:"block text-sm font-medium text-gray-700"},"Jabatan",-1)),b(s("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>o(e).id_jabatan=a),disabled:d.isLoadingDropdown,class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"},[t[14]||(t[14]=s("option",{value:""},"Pilih Jabatan",-1)),(r(!0),n(k,null,w(d.dropdownData.jabatans,a=>(r(),n("option",{key:a.id_jabatan,value:a.id_jabatan},i(a.nama_jabatan),9,z))),128))],8,T),[[g,o(e).id_jabatan]]),o(e).errors.id_jabatan?(r(),n("div",I,i(o(e).errors.id_jabatan),1)):m("",!0)]),b(s("input",{type:"hidden","onUpdate:modelValue":t[6]||(t[6]=a=>o(e).status=a)},null,512),[[f,o(e).status]])],32)]),s("div",J,[s("button",{type:"button",onClick:h,class:"inline-flex items-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition sm:w-auto sm:text-sm mr-2"}," Batal "),s("button",{type:"button",onClick:p,disabled:u.value,class:"inline-flex items-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[u.value?(r(),n("svg",G,t[16]||(t[16]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):m("",!0),V(" "+i(u.value?d.mode==="edit"?"Menyimpan...":"Menambah...":d.mode==="edit"?"Simpan":"Tambah"),1)],8,q)])])])):m("",!0)}},$=S(Q,[["__scopeId","data-v-9d148ab5"]]);export{$ as default};
