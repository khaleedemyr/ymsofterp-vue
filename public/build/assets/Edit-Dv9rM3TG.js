import{P as k,c as S,A as V,B as r,C as f,D as e,G as d,O as C,H as a,Q as s,L as u,F as y,M as x,N as m,I as b,J as p,x as M,S as U,E as A}from"./vendor-vue-g7iCcTkf.js";import{A as _}from"./AppLayout-lnDyFfsm.js";import"./vendor-utils-CpgP2uT4.js";import"./app-CUjRlmlQ.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CXOsavaw.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const B={class:"max-w-4xl w-full mx-auto py-8 px-2"},N=["value"],P=["value"],q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},T={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},D={class:"flex justify-end gap-3 pt-4 border-t border-gray-200"},E=["disabled"],L={key:0,class:"fa-solid fa-spinner fa-spin"},K={__name:"Edit",props:{maintenance:Object,assets:Array,schedules:Array},setup(g){const o=g,l=k({asset_id:o.maintenance.asset_id||"",maintenance_schedule_id:o.maintenance.maintenance_schedule_id||null,maintenance_date:o.maintenance.maintenance_date||"",maintenance_type:o.maintenance.maintenance_type||"",cost:o.maintenance.cost||null,vendor:o.maintenance.vendor||"",notes:o.maintenance.notes||"",status:o.maintenance.status||"Scheduled",performed_by:o.maintenance.performed_by||null}),c=S(()=>l.asset_id?o.schedules.filter(i=>i.asset_id==l.asset_id&&i.is_active):[]);function v(){c.value.find(i=>i.id==l.maintenance_schedule_id)||(l.maintenance_schedule_id=null)}function w(){l.put(`/asset-management/maintenances/${o.maintenance.id}`,{preserveScroll:!0})}return(i,t)=>(r(),V(_,null,{default:f(()=>[e("div",B,[t[23]||(t[23]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-edit text-blue-500"}),d(" Edit Maintenance ")])],-1)),e("form",{onSubmit:C(w,["prevent"]),class:"bg-white rounded-xl shadow-lg p-6 space-y-6"},[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d(" Asset "),e("span",{class:"text-red-500"},"*")],-1)),a(e("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>s(l).asset_id=n),required:"",onChange:v,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[t[9]||(t[9]=e("option",{value:""},"Pilih Asset",-1)),(r(!0),u(y,null,x(g.assets,n=>(r(),u("option",{key:n.id,value:n.id},m(n.asset_code)+" - "+m(n.name),9,N))),128))],544),[[b,s(l).asset_id]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Maintenance Schedule (Optional)",-1)),a(e("select",{"onUpdate:modelValue":t[1]||(t[1]=n=>s(l).maintenance_schedule_id=n),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[t[11]||(t[11]=e("option",{value:null},"Tidak dari Schedule",-1)),(r(!0),u(y,null,x(c.value,n=>(r(),u("option",{key:n.id,value:n.id},m(n.maintenance_type)+" - "+m(n.frequency),9,P))),128))],512),[[b,s(l).maintenance_schedule_id]])]),e("div",q,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d(" Maintenance Date "),e("span",{class:"text-red-500"},"*")],-1)),a(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=n=>s(l).maintenance_date=n),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[p,s(l).maintenance_date]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d(" Maintenance Type "),e("span",{class:"text-red-500"},"*")],-1)),a(e("select",{"onUpdate:modelValue":t[3]||(t[3]=n=>s(l).maintenance_type=n),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[14]||(t[14]=[e("option",{value:""},"Pilih Tipe",-1),e("option",{value:"Cleaning"},"Cleaning",-1),e("option",{value:"Service"},"Service",-1),e("option",{value:"Repair"},"Repair",-1),e("option",{value:"Inspection"},"Inspection",-1)]),512),[[b,s(l).maintenance_type]])])]),e("div",I,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Cost",-1)),a(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=n=>s(l).cost=n),step:"0.01",min:"0",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[p,s(l).cost]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Vendor",-1)),a(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=n=>s(l).vendor=n),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[p,s(l).vendor]])])]),e("div",T,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[d(" Status "),e("span",{class:"text-red-500"},"*")],-1)),a(e("select",{"onUpdate:modelValue":t[6]||(t[6]=n=>s(l).status=n),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[18]||(t[18]=[e("option",{value:"Scheduled"},"Scheduled",-1),e("option",{value:"In Progress"},"In Progress",-1),e("option",{value:"Completed"},"Completed",-1),e("option",{value:"Cancelled"},"Cancelled",-1)]),512),[[b,s(l).status]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Performed By",-1)),a(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=n=>s(l).performed_by=n),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[p,s(l).performed_by]])])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),a(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=n=>s(l).notes=n),rows:"4",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[p,s(l).notes]])]),e("div",D,[M(s(U),{href:`/asset-management/maintenances/${g.maintenance.id}`,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"},{default:f(()=>t[22]||(t[22]=[d(" Batal ")])),_:1},8,["href"]),e("button",{type:"submit",disabled:s(l).processing,class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center gap-2 disabled:opacity-50"},[s(l).processing?(r(),u("i",L)):A("",!0),e("span",null,m(s(l).processing?"Menyimpan...":"Simpan"),1)],8,E)])],32)])]),_:1}))}};export{K as default};
