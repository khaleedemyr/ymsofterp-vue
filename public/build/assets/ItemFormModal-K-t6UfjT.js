import{P as Ue,r as D,c as _,w as q,a as Ce,L as n,E as v,B as d,D as t,G as y,N as u,F as p,M as b,O as Ve,H as c,X as A,Q as o,I as k,J as h,l as I,x as Ae,V as Ie}from"./vendor-vue-g7iCcTkf.js";import{S as w}from"./app-AaUk6aDd.js";import{s as Oe}from"./vue-multiselect.esm-V-bx43V9.js";/* empty css                            */import"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";const Me={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},je={class:"bg-white rounded-xl shadow-2xl w-full max-w-3xl p-6 relative max-h-[80vh] overflow-y-auto"},qe={class:"text-xl font-bold mb-4 flex items-center gap-2"},Be={class:"flex justify-between mb-6"},Re={class:"text-xs mt-1 text-center",style:{"min-width":"70px"}},De={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Te={class:"space-y-4"},Pe=["value"],$e={key:0},Ee=["value"],Le={key:1},Ne=["value"],Ge={class:"space-y-4"},Fe=["value"],Qe={key:0,class:"mt-4"},ze={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},He={class:"space-y-4"},Ke=["value"],We=["value"],Je=["value"],Xe={key:0},Ye=["onClick"],Ze={class:"font-semibold text-blue-700 flex items-center gap-2"},et={class:"px-4 pb-3"},tt={class:"flex flex-wrap gap-2"},st=["onClick"],it={key:0,class:"fa-solid fa-xmark ml-1 text-xs"},lt={key:1,class:"text-sm text-gray-400 italic px-2 py-4"},ot={key:0},nt={class:"flex-1"},dt=["onUpdate:modelValue"],rt={key:0,class:"text-gray-700"},at={class:"inline-flex items-center gap-1 text-sm text-gray-700 whitespace-nowrap"},ut=["onUpdate:modelValue"],mt=["onClick"],ct=["onUpdate:modelValue","onChange"],pt=["onUpdate:modelValue","disabled"],bt=["value"],ft=["onUpdate:modelValue","disabled"],gt=["value"],yt=["onUpdate:modelValue"],vt=["onClick"],xt=["onUpdate:modelValue","disabled"],_t=["value"],kt=["onUpdate:modelValue","disabled"],wt=["value"],ht=["onClick"],St={class:"space-y-4 mb-6"},Ut={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ct={class:"space-y-4"},Vt={key:0,class:"grid grid-cols-3 gap-4"},At=["src"],It=["src"],Ot=["onClick"],Mt={key:1,class:"grid grid-cols-3 gap-4"},jt=["src"],qt=["onClick"],Bt={class:"mt-6 flex justify-between"},Rt=["disabled"],Dt={key:0,class:"space-y-6"},Tt={class:"bg-gradient-to-r from-blue-50 to-blue-100 border-l-4 border-blue-400 shadow rounded-lg p-6"},Pt={class:"grid grid-cols-2 gap-4"},$t={class:"font-medium"},Et={class:"font-medium"},Lt={class:"font-medium"},Nt={class:"font-medium"},Gt={class:"font-medium"},Ft={class:"font-bold text-blue-800"},Qt={class:"font-medium"},zt={class:"bg-gradient-to-r from-purple-50 to-purple-100 border-l-4 border-purple-400 shadow rounded-lg p-6"},Ht={class:"grid grid-cols-2 gap-4"},Kt={class:"font-medium"},Wt={key:0},Jt={class:"font-medium"},Xt={key:1},Yt={class:"font-medium"},Zt={key:2},es={class:"font-medium"},ts={key:3},ss={class:"font-medium"},is={key:0,class:"bg-gradient-to-r from-cyan-50 to-cyan-100 border-l-4 border-cyan-400 shadow rounded-lg p-6"},ls={class:"font-semibold text-cyan-800 mb-1 flex items-center gap-2"},os={class:"flex flex-wrap gap-2"},ns={key:1,class:"bg-gradient-to-r from-yellow-50 to-yellow-100 border-l-4 border-yellow-400 shadow rounded-lg p-6"},ds={class:"space-y-4"},rs={class:"grid grid-cols-2 gap-4"},as={class:"font-medium"},us={key:0,class:"ml-2 text-xs text-blue-700"},ms={class:"font-medium"},cs={class:"bg-gradient-to-r from-green-50 to-green-100 border-l-4 border-green-400 shadow rounded-lg p-6"},ps={class:"space-y-4"},bs={class:"grid grid-cols-2 gap-4"},fs={class:"font-medium"},gs={class:"bg-green-200 text-green-800 px-2 py-1 rounded font-bold"},ys={class:"bg-gradient-to-r from-pink-50 to-pink-100 border-l-4 border-pink-400 shadow rounded-lg p-6"},vs={class:"space-y-4"},xs={class:"grid grid-cols-2 gap-4"},_s={class:"font-medium"},ks={class:"font-medium"},ws={class:"bg-gradient-to-r from-gray-50 to-gray-100 border-l-4 border-gray-400 shadow rounded-lg p-6"},hs={class:"space-y-4"},Ss={class:"font-medium"},Us={class:"font-medium"},Cs={key:0},Vs={class:"grid grid-cols-4 gap-4 mt-2"},As=["src"],Is=["src"],Os={class:"flex justify-end pt-6"},Ms=["disabled"],js={key:0,class:"fa-solid fa-spinner fa-spin"},qs={key:1,class:"fa-solid fa-save"},Es={__name:"ItemFormModal",props:{show:Boolean,mode:String,item:Object,categories:{type:Array,default:()=>[]},subCategories:{type:Array,default:()=>[]},units:{type:Array,default:()=>[]},warehouseDivisions:{type:Array,default:()=>[]},menuTypes:{type:Array,default:()=>[]},regions:{type:[Array,Object],default:()=>({})},outlets:{type:[Array,Object],default:()=>({})},bomItems:{type:Array,default:()=>[]},modifiers:{type:Array,default:()=>[]}},emits:["close","success"],setup(f,{emit:X}){const $=window.File,E=window.URL||window.webkitURL,r=f,S=X,i=Ue({category_id:"",sub_category_id:"",warehouse_division_id:"",sku:"",type:"",name:"",description:"",specification:"",small_unit_id:"",medium_unit_id:"",large_unit_id:"",medium_conversion_qty:"",small_conversion_qty:"",min_stock:0,exp:0,status:"active",images:[],deleted_images:[],prices:[],availabilities:[],composition_type:"single",bom:[],modifier_enabled:!1,modifier_option_ids:[]}),Y=D([]),L=_(()=>i.composition_type==="composed"),N=_(()=>O.value&&O.value.show_pos==1&&i.modifier_enabled),U=_(()=>{const l=["info","uom"];return N.value&&l.push("modifier"),L.value&&l.push("bom"),l.push("price","availability","sps","preview"),l}),Z=_(()=>{const l=["Item Info","UoM"];return N.value&&l.push("Modifier"),L.value&&l.push("BOM"),l.push("Price","Availability","SPS","Preview"),l}),x=D("info"),ee=()=>{const l=U.value.indexOf(x.value);l<U.value.length-1&&(x.value=U.value[l+1])},G=()=>{const l=U.value.indexOf(x.value);l>0&&(x.value=U.value[l-1])},F=_(()=>!i.category_id||!r.subCategories?[]:r.subCategories.filter(l=>l.category_id===Number(i.category_id)&&l.status==="active")),te=_(()=>{var l;return((l=F.value)==null?void 0:l.length)>0}),O=_(()=>{var l;return((l=r.categories)==null?void 0:l.find(e=>e.id===Number(i.category_id)))||null}),se=_(()=>O.value&&O.value.show_pos==0),ie=()=>{i.prices.push({price_type:"specific",region_id:"",outlet_id:"",price:0})},le=l=>{i.prices.splice(l,1)},oe=l=>{l.price_type==="all"&&(l.region_id="",l.outlet_id="")};_(()=>i.prices.map(l=>l.region_id?l.region_id.toString():"").filter(Boolean)),_(()=>i.prices.map(l=>l.outlet_id?l.outlet_id.toString():"").filter(Boolean));const ne=()=>{i.availabilities.push({region_id:"",outlet_id:"",status:"available"})},de=l=>{i.availabilities.splice(l,1)};_(()=>i.availabilities.map(l=>l.region_id).filter(Boolean)),_(()=>i.availabilities.map(l=>l.outlet_id).filter(Boolean));const re=()=>{i.bom.push({item_id:"",qty:"",unit_id:"",stock_cut:!1,selectedItem:null})},ae=l=>{i.bom.splice(l,1)},T=l=>{const e=r.bomItems.find(g=>g.id==l);return e&&r.units.find(g=>g.id==e.small_unit_id)||null},ue=(l,e)=>{l&&(e.item_id=l.id,e.selectedItem=l,e.unit_id=l.small_unit_id||"")},me=l=>{l.item_id="",l.selectedItem=null,l.unit_id=""},ce=l=>l&&r.bomItems.find(e=>e.id==l)||null;q(()=>i.bom.map(l=>l.item_id),(l,e)=>{i.bom.forEach((g,C)=>{const V=r.bomItems.find(R=>R.id==g.item_id);g.unit_id=V?V.small_unit_id:""})},{deep:!0}),q(()=>r.show,l=>{l&&r.mode==="create"?(i.reset(),i.prices=[{price_type:"specific",region_id:"",outlet_id:"",price:0}],i.availabilities=[],i.bom=[],i.images=[],i.modifier_option_ids=[],i.modifier_enabled=!1,i.composition_type="single",i.status="active",x.value="info"):l&&r.mode==="edit"&&r.item&&(Object.assign(i,{category_id:r.item.category_id,sub_category_id:r.item.sub_category_id,warehouse_division_id:r.item.warehouse_division_id,sku:r.item.sku,type:r.item.type,name:r.item.name,description:r.item.description,specification:r.item.specification,small_unit_id:r.item.small_unit_id,medium_unit_id:r.item.medium_unit_id,large_unit_id:r.item.large_unit_id,medium_conversion_qty:r.item.medium_conversion_qty,small_conversion_qty:r.item.small_conversion_qty,min_stock:r.item.min_stock,exp:r.item.exp,status:r.item.status,images:[],deleted_images:[],prices:r.item.prices?r.item.prices.map(e=>({price_type:e.availability_price_type==="all"?"all":"specific",region_id:e.region_id,outlet_id:e.outlet_id,price:e.price,label:e.label})):[],availabilities:r.item.availabilities?r.item.availabilities.map(e=>({region_id:e.region_id,outlet_id:e.outlet_id,availability_type:e.availability_type,label:e.label})):[],bom:r.item.bom?JSON.parse(JSON.stringify(r.item.bom)):[],modifier_option_ids:r.item.modifier_option_ids?[...r.item.modifier_option_ids]:[]}),Y.value=[])}),q(()=>i.category_id,l=>{const e=r.categories.find(g=>g.id===Number(l));if(e){const g=new Date,C=`${g.getFullYear()}${(g.getMonth()+1).toString().padStart(2,"0")}${g.getDate().toString().padStart(2,"0")}`,V=Math.floor(1e3+Math.random()*9e3);i.sku=`${e.code}-${C}-${V}`}else i.sku=""});const pe=l=>{const e=l.target.files;for(let g=0;g<e.length;g++){const C=e[g];i.images.push(C)}l.target.value=""},be=l=>{i.images.splice(l,1)},fe=l=>{i.deleted_images.push(l)},ge=()=>{r.mode==="create"?i.post(route("items.store"),{onSuccess:()=>{w.fire("Berhasil","Item berhasil ditambahkan!","success"),S("success"),S("close")},onError:()=>{w.fire("Gagal","Gagal menambah item.","error")}}):i.put(route("items.update",r.item.id),{onSuccess:()=>{w.fire("Berhasil","Item berhasil diupdate!","success"),S("success"),S("close")},onError:()=>{w.fire("Gagal","Gagal update item.","error")}})};q(x,l=>{l==="bom"&&i.bom.length===0&&i.bom.push({item_id:"",qty:"",unit_id:"",stock_cut:!1,selectedItem:null})}),q(()=>i.bom,l=>{Array.isArray(l)&&l.forEach(e=>{e.item_id&&!e.selectedItem&&(e.selectedItem=ce(e.item_id))})},{deep:!0});const j=r.modifiers||[],B=D({}),ye=l=>{B.value[l]=!B.value[l]},Q=l=>i.modifier_option_ids&&i.modifier_option_ids.includes(l),ve=l=>{i.modifier_option_ids||(i.modifier_option_ids=[]);const e=i.modifier_option_ids.indexOf(l);e===-1?i.modifier_option_ids.push(l):i.modifier_option_ids.splice(e,1)},xe=_(()=>(j||[]).filter(l=>Array.isArray(l.options)&&l.options.some(e=>i.modifier_option_ids.includes(e.id)))),_e=_(()=>(j||[]).filter(l=>l&&typeof l.id<"u"&&Array.isArray(l.options)));function ke(l){return Array.isArray(l)?l.filter(e=>e&&typeof e.id<"u"):[]}function we(l,e){return Array.isArray(l)?l.filter(g=>g&&typeof g.id<"u"&&e.includes(g.id)):[]}Ce(()=>{console.log("warehouseDivisions:",r.warehouseDivisions),console.log("modifiers:",j),console.log("regions:",r.regions),console.log("outlets:",r.outlets)});const M=D(!1),he=async()=>{M.value=!0,w.fire({title:"Menyimpan...",text:"Mohon tunggu, data sedang diproses",allowOutsideClick:!1,didOpen:()=>{w.showLoading()}});try{r.mode==="create"?await i.post(route("items.store"),{preserveScroll:!0,onSuccess:()=>{w.fire("Berhasil","Item berhasil ditambahkan!","success"),S("success"),S("close")},onError:l=>{let e="Gagal menambah item.";i.errors&&Object.values(i.errors).length>0&&(e=Object.values(i.errors).flat().join("<br>")),w.fire({title:"Gagal",html:e,icon:"error",confirmButtonText:"OK"})},onFinish:()=>{M.value=!1}}):await i.put(route("items.update",r.item.id),{preserveScroll:!0,onSuccess:()=>{w.fire("Berhasil","Item berhasil diupdate!","success"),S("success"),S("close")},onError:()=>{let l="Gagal update item.";i.errors&&Object.values(i.errors).length>0&&(l=Object.values(i.errors).flat().join("<br>")),w.fire({title:"Gagal",html:l,icon:"error"})},onFinish:()=>{M.value=!1}})}catch{M.value=!1,w.fire("Error","Terjadi kesalahan saat menyimpan.","error")}},z=_(()=>Array.isArray(r.regions)?r.regions:Object.values(r.regions||{})),H=_(()=>Array.isArray(r.outlets)?r.outlets:Object.values(r.outlets||{})),Se=()=>{i.reset(),i.clearErrors(),x.value="info",S("close")};return(l,e)=>{var g,C,V,R,K;return f.show?(d(),n("div",Me,[t("div",je,[t("h2",qe,[e[18]||(e[18]=t("i",{class:"fa-solid fa-boxes-stacked text-blue-500"},null,-1)),y(" "+u(f.mode==="create"?"Tambah Item Baru":"Edit Item"),1)]),t("button",{onClick:Se,class:"absolute top-4 right-4 text-gray-400 hover:text-red-500"},e[19]||(e[19]=[t("i",{class:"fa-solid fa-xmark text-2xl"},null,-1)])),t("div",Be,[(d(!0),n(p,null,b(Z.value,(s,m)=>(d(),n("div",{key:s,class:"flex-1 flex flex-col items-center"},[t("div",{class:I(["w-8 h-8 rounded-full flex items-center justify-center font-bold",x.value===U.value[m]?"bg-blue-500 text-white":"bg-gray-200 text-gray-500"])},u(m+1),3),t("div",Re,u(s),1)]))),128))]),t("form",{onSubmit:Ve(ge,["prevent"])},[c(t("div",null,[t("div",De,[t("div",Te,[t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700"},"Composition Type",-1)),c(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>o(i).composition_type=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},e[20]||(e[20]=[t("option",{value:"single"},"Single",-1),t("option",{value:"composed"},"Composed",-1)]),512),[[k,o(i).composition_type]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700"},"Category",-1)),c(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o(i).category_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},[e[22]||(e[22]=t("option",{value:""},"Select Category",-1)),(d(!0),n(p,null,b(f.categories,s=>(d(),n("option",{key:s.id,value:s.id},u(s.name),9,Pe))),128))],512),[[k,o(i).category_id]])]),te.value?(d(),n("div",$e,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-gray-700"},"Sub Category",-1)),c(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o(i).sub_category_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[e[24]||(e[24]=t("option",{value:""},"Select Sub Category",-1)),(d(!0),n(p,null,b(F.value,s=>(d(),n("option",{key:s.id,value:s.id},u(s.name),9,Ee))),128))],512),[[k,o(i).sub_category_id]])])):v("",!0),se.value?(d(),n("div",Le,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700"},"Warehouse Division",-1)),c(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>o(i).warehouse_division_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},[e[26]||(e[26]=t("option",{value:""},"Select Warehouse Division",-1)),(d(!0),n(p,null,b(f.warehouseDivisions,s=>(d(),n("option",{key:s.id,value:s.id},u(s.name),9,Ne))),128))],512),[[k,o(i).warehouse_division_id]])])):v("",!0)]),t("div",Ge,[t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700"},"SKU",-1)),c(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=s=>o(i).sku=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",readonly:"",required:""},null,512),[[h,o(i).sku]])]),t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-700"},"Type",-1)),c(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>o(i).type=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},[(d(!0),n(p,null,b(f.menuTypes,s=>(d(),n("option",{key:s.id,value:s.type},u(s.type),9,Fe))),128))],512),[[k,o(i).type]])]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-700"},"Name",-1)),c(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=s=>o(i).name=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[h,o(i).name]])]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-gray-700"},"Minimum Stock",-1)),c(t("input",{type:"number","onUpdate:modelValue":e[7]||(e[7]=s=>o(i).min_stock=s),min:"0",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[h,o(i).min_stock]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),c(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>o(i).status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},e[32]||(e[32]=[t("option",{value:"active"},"Active",-1),t("option",{value:"inactive"},"Inactive",-1)]),512),[[k,o(i).status]])]),t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-gray-700"},"Expiry Days",-1)),c(t("input",{type:"number","onUpdate:modelValue":e[9]||(e[9]=s=>o(i).exp=s),min:"0",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Enter expiry days"},null,512),[[h,o(i).exp]])])])]),O.value&&O.value.show_pos==1?(d(),n("div",Qe,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Aktifkan Modifier",-1)),t("button",{type:"button",onClick:e[10]||(e[10]=s=>o(i).modifier_enabled=!o(i).modifier_enabled),class:I([o(i).modifier_enabled?"bg-blue-600":"bg-gray-300","relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none"])},[t("span",{class:I([o(i).modifier_enabled?"translate-x-6":"translate-x-1","inline-block h-4 w-4 transform rounded-full bg-white transition"])},null,2)],2),e[36]||(e[36]=t("span",{class:"ml-2 text-gray-700"},"Item ini menggunakan modifier",-1))])):v("",!0)],512),[[A,x.value==="info"]]),c(t("div",null,[t("div",ze,[t("div",He,[t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-gray-700"},"Small Unit",-1)),c(t("select",{"onUpdate:modelValue":e[11]||(e[11]=s=>o(i).small_unit_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},[e[37]||(e[37]=t("option",{value:""},"Select Small Unit",-1)),(d(!0),n(p,null,b(f.units,s=>(d(),n("option",{key:s.id,value:s.id},u(s.name),9,Ke))),128))],512),[[k,o(i).small_unit_id]])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-gray-700"},"Medium Unit",-1)),c(t("select",{"onUpdate:modelValue":e[12]||(e[12]=s=>o(i).medium_unit_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[e[39]||(e[39]=t("option",{value:""},"Select Medium Unit",-1)),(d(!0),n(p,null,b(f.units,s=>(d(),n("option",{key:s.id,value:s.id},u(s.name),9,We))),128))],512),[[k,o(i).medium_unit_id]])]),t("div",null,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium text-gray-700"},"Large Unit",-1)),c(t("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>o(i).large_unit_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[e[41]||(e[41]=t("option",{value:""},"Select Large Unit",-1)),(d(!0),n(p,null,b(f.units,s=>(d(),n("option",{key:s.id,value:s.id},u(s.name),9,Je))),128))],512),[[k,o(i).large_unit_id]])]),t("div",null,[e[43]||(e[43]=t("label",{class:"block text-sm font-medium text-gray-700"},"Medium Conversion Quantity",-1)),c(t("input",{type:"number","onUpdate:modelValue":e[14]||(e[14]=s=>o(i).medium_conversion_qty=s),min:"0",step:"0.01",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[h,o(i).medium_conversion_qty]])]),t("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm font-medium text-gray-700"},"Small Conversion Quantity",-1)),c(t("input",{type:"number","onUpdate:modelValue":e[15]||(e[15]=s=>o(i).small_conversion_qty=s),min:"0",step:"0.01",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[h,o(i).small_conversion_qty]])])])])],512),[[A,x.value==="uom"]]),c(t("div",null,[o(j)&&o(j).length>0?(d(),n("div",Xe,[(d(!0),n(p,null,b(_e.value,s=>(d(),n("div",{key:s.id,class:"mb-4 border rounded-lg bg-gray-50"},[t("button",{type:"button",onClick:m=>ye(s.id),class:"w-full flex justify-between items-center px-4 py-2 focus:outline-none"},[t("span",Ze,[e[45]||(e[45]=t("i",{class:"fa-solid fa-sliders"},null,-1)),y(" "+u(s.name),1)]),t("i",{class:I(B.value[s.id]?"fa-solid fa-chevron-up":"fa-solid fa-chevron-down")},null,2)],8,Ye),c(t("div",et,[t("div",tt,[(d(!0),n(p,null,b(ke(s.options),m=>(d(),n("span",{key:m.id,class:I([Q(m.id)?"bg-blue-500 text-white":"bg-white text-blue-700 border-blue-500 border","px-3 py-1 rounded-full cursor-pointer transition select-none flex items-center gap-1"]),onClick:a=>ve(m.id)},[y(u(m.name)+" ",1),Q(m.id)?(d(),n("i",it)):v("",!0)],10,st))),128))])],512),[[A,B.value[s.id]]])]))),128))])):(d(),n("div",lt,"Tidak ada data modifier."))],512),[[A,x.value==="modifier"]]),x.value==="bom"?(d(),n("div",ot,[e[49]||(e[49]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bill of Material (BOM)",-1)),(d(!0),n(p,null,b(o(i).bom,(s,m)=>(d(),n("div",{key:m,class:"flex gap-2 mb-2 items-center"},[t("div",nt,[Ae(o(Oe),{modelValue:s.selectedItem,"onUpdate:modelValue":a=>s.selectedItem=a,options:f.bomItems,searchable:!0,"clear-on-select":!1,"close-on-select":!0,"show-labels":!1,"track-by":"id",label:"name",placeholder:"Pilih atau cari bahan...",class:"w-full",onSelect:a=>ue(a,s),onClear:()=>me(s)},null,8,["modelValue","onUpdate:modelValue","options","onSelect","onClear"])]),c(t("input",{type:"number","onUpdate:modelValue":a=>s.qty=a,min:"0",step:"0.01",placeholder:"Qty",class:"rounded border-gray-300 w-24",required:""},null,8,dt),[[h,s.qty]]),T(s.item_id)?(d(),n("span",rt,u(T(s.item_id).name),1)):v("",!0),t("label",at,[c(t("input",{type:"checkbox","onUpdate:modelValue":a=>s.stock_cut=a,class:"rounded border-gray-300"},null,8,ut),[[Ie,s.stock_cut]]),e[46]||(e[46]=y(" Stock Cut "))]),t("button",{type:"button",onClick:a=>ae(m),class:"text-red-500 hover:text-red-700"},e[47]||(e[47]=[t("i",{class:"fa-solid fa-trash"},null,-1)]),8,mt)]))),128)),t("button",{type:"button",onClick:re,class:"bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded"},e[48]||(e[48]=[t("i",{class:"fa-solid fa-plus"},null,-1),y(" Tambah Bahan ")]))])):v("",!0),c(t("div",null,[t("div",null,[e[56]||(e[56]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Harga per Region/Outlet",-1)),(d(!0),n(p,null,b(o(i).prices,(s,m)=>(d(),n("div",{key:m,class:"flex gap-2 mb-2 items-center"},[c(t("select",{"onUpdate:modelValue":a=>s.price_type=a,class:"rounded border-gray-300",onChange:a=>oe(s)},e[50]||(e[50]=[t("option",{value:"all"},"All",-1),t("option",{value:"specific"},"Specific Region/Outlet",-1)]),40,ct),[[k,s.price_type]]),s.price_type==="specific"?(d(),n(p,{key:0},[c(t("select",{"onUpdate:modelValue":a=>s.region_id=a,disabled:!!s.outlet_id,class:"rounded border-gray-300"},[e[51]||(e[51]=t("option",{value:""},"Pilih Region",-1)),(d(!0),n(p,null,b(z.value,a=>(d(),n("option",{key:a.id,value:a.id.toString()},u(a.name),9,bt))),128))],8,pt),[[k,s.region_id]]),e[53]||(e[53]=t("span",{class:"text-gray-400"},"atau",-1)),c(t("select",{"onUpdate:modelValue":a=>s.outlet_id=a,disabled:!!s.region_id,class:"rounded border-gray-300"},[e[52]||(e[52]=t("option",{value:""},"Pilih Outlet",-1)),(d(!0),n(p,null,b(H.value,a=>(d(),n("option",{key:a.id_outlet,value:a.id_outlet.toString()},u(a.nama_outlet),9,gt))),128))],8,ft),[[k,s.outlet_id]])],64)):v("",!0),c(t("input",{type:"number","onUpdate:modelValue":a=>s.price=a,min:"0",placeholder:"Harga",class:"rounded border-gray-300 w-32",required:""},null,8,yt),[[h,s.price]]),t("button",{type:"button",onClick:a=>le(m),class:"text-red-500 hover:text-red-700"},e[54]||(e[54]=[t("i",{class:"fa-solid fa-trash"},null,-1)]),8,vt)]))),128)),t("button",{type:"button",onClick:ie,class:"bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded"},e[55]||(e[55]=[t("i",{class:"fa-solid fa-plus"},null,-1),y(" Tambah Harga")]))])],512),[[A,x.value==="price"]]),c(t("div",null,[t("div",null,[e[64]||(e[64]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Availability per Region/Outlet",-1)),(d(!0),n(p,null,b(o(i).availabilities,(s,m)=>(d(),n("div",{key:m,class:"flex gap-2 mb-2 items-center"},[c(t("select",{"onUpdate:modelValue":a=>s.region_id=a,disabled:!!s.outlet_id&&s.outlet_id!=="all",class:"rounded border-gray-300"},[e[57]||(e[57]=t("option",{value:""},"Pilih Region",-1)),e[58]||(e[58]=t("option",{value:"all"},"All",-1)),(d(!0),n(p,null,b(z.value,a=>(d(),n("option",{key:a.id,value:a.id.toString()},u(a.name),9,_t))),128))],8,xt),[[k,s.region_id]]),e[62]||(e[62]=t("span",{class:"text-gray-400"},"atau",-1)),c(t("select",{"onUpdate:modelValue":a=>s.outlet_id=a,disabled:!!s.region_id&&s.region_id!=="all",class:"rounded border-gray-300"},[e[59]||(e[59]=t("option",{value:""},"Pilih Outlet",-1)),e[60]||(e[60]=t("option",{value:"all"},"All",-1)),(d(!0),n(p,null,b(H.value,a=>(d(),n("option",{key:a.id_outlet,value:a.id_outlet.toString()},u(a.nama_outlet),9,wt))),128))],8,kt),[[k,s.outlet_id]]),t("button",{type:"button",onClick:a=>de(m),class:"text-red-500 hover:text-red-700"},e[61]||(e[61]=[t("i",{class:"fa-solid fa-trash"},null,-1)]),8,ht)]))),128)),t("button",{type:"button",onClick:ne,class:"bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded"},e[63]||(e[63]=[t("i",{class:"fa-solid fa-plus"},null,-1),y(" Tambah Availability")]))])],512),[[A,x.value==="availability"]]),c(t("div",null,[t("div",St,[t("div",null,[e[65]||(e[65]=t("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),c(t("textarea",{"onUpdate:modelValue":e[16]||(e[16]=s=>o(i).description=s),rows:"3",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[h,o(i).description]])]),t("div",null,[e[66]||(e[66]=t("label",{class:"block text-sm font-medium text-gray-700"},"Specification",-1)),c(t("textarea",{"onUpdate:modelValue":e[17]||(e[17]=s=>o(i).specification=s),rows:"3",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[h,o(i).specification]])])]),t("div",Ut,[t("div",Ct,[t("div",null,[e[67]||(e[67]=t("label",{class:"block text-sm font-medium text-gray-700"},"Upload Images",-1)),t("input",{type:"file",onChange:pe,multiple:"",accept:"image/*",class:"mt-1 block w-full"},null,32)]),o(i).images.length>0?(d(),n("div",Vt,[(d(!0),n(p,null,b(o(i).images,(s,m)=>(d(),n("div",{key:m,class:"relative"},[s instanceof o($)?(d(),n("img",{key:0,src:o(E).createObjectURL(s),class:"w-full h-32 object-cover rounded-lg"},null,8,At)):(d(),n("img",{key:1,src:typeof s=="string"?"/storage/"+s:"",class:"w-full h-32 object-cover rounded-lg"},null,8,It)),t("button",{onClick:a=>be(m),class:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center"},e[68]||(e[68]=[t("i",{class:"fa-solid fa-xmark"},null,-1)]),8,Ot)]))),128))])):v("",!0),f.mode==="edit"&&f.item&&f.item.images&&f.item.images.length>0?(d(),n("div",Mt,[(d(!0),n(p,null,b(f.item.images,s=>(d(),n("div",{key:s.id,class:"relative"},[t("img",{src:"/storage/"+s.path,class:"w-full h-32 object-cover rounded-lg"},null,8,jt),t("button",{onClick:m=>fe(s.id),class:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center"},e[69]||(e[69]=[t("i",{class:"fa-solid fa-xmark"},null,-1)]),8,qt)]))),128))])):v("",!0)])])],512),[[A,x.value==="sps"]]),t("div",Bt,[t("button",{type:"button",class:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-2 rounded-lg flex items-center gap-2",onClick:G,disabled:x.value===U.value[0]},e[70]||(e[70]=[t("i",{class:"fa-solid fa-arrow-left"},null,-1),y(" Sebelumnya ")]),8,Rt),t("div",null,[x.value!=="preview"?(d(),n("button",{key:0,type:"button",class:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg flex items-center gap-2",onClick:ee},e[71]||(e[71]=[y(" Selanjutnya "),t("i",{class:"fa-solid fa-arrow-right"},null,-1)]))):v("",!0)])])],32),x.value==="preview"?(d(),n("div",Dt,[e[103]||(e[103]=t("div",{class:"flex items-center gap-3 bg-blue-50 border border-blue-200 rounded-lg px-4 py-3 mb-2"},[t("i",{class:"fa-solid fa-eye text-blue-500 text-2xl"}),t("h3",{class:"text-lg font-bold text-blue-700"},"Preview Data Item")],-1)),t("div",Tt,[e[80]||(e[80]=t("h4",{class:"flex items-center gap-2 text-md font-semibold text-blue-700 mb-4"},[t("i",{class:"fa-solid fa-info-circle"}),y(" Item Information ")],-1)),t("div",Pt,[t("div",null,[e[72]||(e[72]=t("p",{class:"text-sm text-gray-500"},"Category",-1)),t("p",$t,u((g=f.categories.find(s=>s.id===o(i).category_id))==null?void 0:g.name),1)]),t("div",null,[e[73]||(e[73]=t("p",{class:"text-sm text-gray-500"},"Sub Category",-1)),t("p",Et,u((C=f.subCategories.find(s=>s.id===o(i).sub_category_id))==null?void 0:C.name),1)]),t("div",null,[e[74]||(e[74]=t("p",{class:"text-sm text-gray-500"},"Warehouse Division",-1)),t("p",Lt,u(o(i).warehouse_division_id),1)]),t("div",null,[e[75]||(e[75]=t("p",{class:"text-sm text-gray-500"},"SKU",-1)),t("p",Nt,u(o(i).sku),1)]),t("div",null,[e[76]||(e[76]=t("p",{class:"text-sm text-gray-500"},"Type",-1)),t("p",Gt,u(o(i).type),1)]),t("div",null,[e[77]||(e[77]=t("p",{class:"text-sm text-gray-500"},"Name",-1)),t("p",Ft,u(o(i).name),1)]),t("div",null,[e[78]||(e[78]=t("p",{class:"text-sm text-gray-500"},"Min Stock",-1)),t("p",Qt,u(o(i).min_stock),1)]),t("div",null,[e[79]||(e[79]=t("p",{class:"text-sm text-gray-500"},"Status",-1)),t("span",{class:I([o(i).status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700","px-2 py-1 rounded text-xs font-bold"])},[t("i",{class:I(o(i).status==="active"?"fa-solid fa-check-circle":"fa-solid fa-times-circle")},null,2),y(" "+u(o(i).status),1)],2)])])]),t("div",zt,[e[86]||(e[86]=t("h4",{class:"flex items-center gap-2 text-md font-semibold text-purple-700 mb-4"},[t("i",{class:"fa-solid fa-ruler-combined"}),y(" Unit of Measurement ")],-1)),t("div",Ht,[t("div",null,[e[81]||(e[81]=t("p",{class:"text-sm text-gray-500"},"Small Unit",-1)),t("p",Kt,u((V=f.units.find(s=>s.id===o(i).small_unit_id))==null?void 0:V.name),1)]),o(i).medium_unit_id?(d(),n("div",Wt,[e[82]||(e[82]=t("p",{class:"text-sm text-gray-500"},"Medium Unit",-1)),t("p",Jt,u((R=f.units.find(s=>s.id===o(i).medium_unit_id))==null?void 0:R.name),1)])):v("",!0),o(i).large_unit_id?(d(),n("div",Xt,[e[83]||(e[83]=t("p",{class:"text-sm text-gray-500"},"Large Unit",-1)),t("p",Yt,u((K=f.units.find(s=>s.id===o(i).large_unit_id))==null?void 0:K.name),1)])):v("",!0),o(i).medium_conversion_qty?(d(),n("div",Zt,[e[84]||(e[84]=t("p",{class:"text-sm text-gray-500"},"Medium Conversion Qty",-1)),t("p",es,u(o(i).medium_conversion_qty),1)])):v("",!0),o(i).small_conversion_qty?(d(),n("div",ts,[e[85]||(e[85]=t("p",{class:"text-sm text-gray-500"},"Small Conversion Qty",-1)),t("p",ss,u(o(i).small_conversion_qty),1)])):v("",!0)])]),o(i).modifier_enabled&&o(i).modifier_option_ids&&o(i).modifier_option_ids.length>0?(d(),n("div",is,[e[88]||(e[88]=t("h4",{class:"flex items-center gap-2 text-md font-semibold text-cyan-700 mb-4"},[t("i",{class:"fa-solid fa-sliders"}),y(" Modifier ")],-1)),(d(!0),n(p,null,b(xe.value,s=>(d(),n("div",{key:s.id,class:"mb-2"},[t("div",ls,[e[87]||(e[87]=t("i",{class:"fa-solid fa-puzzle-piece"},null,-1)),y(" "+u(s.name),1)]),t("div",os,[(d(!0),n(p,null,b(we(s.options,o(i).modifier_option_ids),m=>(d(),n("span",{key:m.id,class:"bg-cyan-500 text-white px-3 py-1 rounded-full text-xs font-semibold flex items-center gap-1"},u(m.name),1))),128))])]))),128))])):v("",!0),o(i).composition_type==="composed"?(d(),n("div",ns,[e[91]||(e[91]=t("h4",{class:"flex items-center gap-2 text-md font-semibold text-yellow-700 mb-4"},[t("i",{class:"fa-solid fa-list-ul"}),y(" Bill of Materials ")],-1)),t("div",ds,[(d(!0),n(p,null,b(o(i).bom,(s,m)=>{var a,W;return d(),n("div",{key:m,class:"border-b pb-4"},[t("div",rs,[t("div",null,[e[89]||(e[89]=t("p",{class:"text-sm text-gray-500"},"Material",-1)),t("p",as,[y(u((a=f.bomItems.find(P=>P.id===s.item_id))==null?void 0:a.name)+" ",1),s.stock_cut?(d(),n("span",us,"(Stock Cut)")):v("",!0)])]),t("div",null,[e[90]||(e[90]=t("p",{class:"text-sm text-gray-500"},"Quantity",-1)),t("p",ms,u(s.qty)+" "+u((W=f.units.find(P=>{var J;return P.id===((J=T(s.item_id))==null?void 0:J.id)}))==null?void 0:W.name),1)])])])}),128))])])):v("",!0),t("div",cs,[e[94]||(e[94]=t("h4",{class:"flex items-center gap-2 text-md font-semibold text-green-700 mb-4"},[t("i",{class:"fa-solid fa-money-bill-wave"}),y(" Item Prices ")],-1)),t("div",ps,[(d(!0),n(p,null,b(o(i).prices,(s,m)=>(d(),n("div",{key:m,class:"border-b pb-4"},[t("div",bs,[t("div",null,[e[92]||(e[92]=t("p",{class:"text-sm text-gray-500"},"Region/Outlet",-1)),t("p",fs,u(s.label||"-"),1)]),t("div",null,[e[93]||(e[93]=t("p",{class:"text-sm text-gray-500"},"Price",-1)),t("span",gs,"Rp "+u(s.price),1)])])]))),128))])]),t("div",ys,[e[97]||(e[97]=t("h4",{class:"flex items-center gap-2 text-md font-semibold text-pink-700 mb-4"},[t("i",{class:"fa-solid fa-store"}),y(" Item Availability ")],-1)),t("div",vs,[(d(!0),n(p,null,b(o(i).availabilities,(s,m)=>(d(),n("div",{key:m,class:"border-b pb-4"},[t("div",xs,[t("div",null,[e[95]||(e[95]=t("p",{class:"text-sm text-gray-500"},"Region/Outlet",-1)),t("p",_s,u(s.label||"-"),1)]),t("div",null,[e[96]||(e[96]=t("p",{class:"text-sm text-gray-500"},"Type",-1)),t("p",ks,u(s.availability_type||"-"),1)])])]))),128))])]),t("div",ws,[e[101]||(e[101]=t("h4",{class:"flex items-center gap-2 text-md font-semibold text-gray-700 mb-4"},[t("i",{class:"fa-solid fa-file-alt"}),y(" Specification & Description ")],-1)),t("div",hs,[t("div",null,[e[98]||(e[98]=t("p",{class:"text-sm text-gray-500"},"Description",-1)),t("p",Ss,u(o(i).description),1)]),t("div",null,[e[99]||(e[99]=t("p",{class:"text-sm text-gray-500"},"Specification",-1)),t("p",Us,u(o(i).specification),1)]),o(i).images.length>0?(d(),n("div",Cs,[e[100]||(e[100]=t("p",{class:"text-sm text-gray-500"},"Images",-1)),t("div",Vs,[(d(!0),n(p,null,b(o(i).images,(s,m)=>(d(),n("div",{key:m,class:"relative"},[s instanceof o($)?(d(),n("img",{key:0,src:o(E).createObjectURL(s),class:"w-full h-24 object-cover rounded shadow border"},null,8,As)):(d(),n("img",{key:1,src:typeof s=="string"?"/storage/"+s:"",class:"w-full h-24 object-cover rounded shadow border"},null,8,Is))]))),128))])])):v("",!0)])]),t("div",{class:"flex justify-between pt-6"},[t("button",{type:"button",onClick:G,class:"bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg flex items-center gap-2"},e[102]||(e[102]=[t("i",{class:"fa-solid fa-arrow-left"},null,-1),y(" Kembali ")]))]),t("div",Os,[t("button",{type:"button",onClick:he,class:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg flex items-center gap-2 shadow",disabled:M.value},[M.value?(d(),n("i",js)):(d(),n("i",qs)),y(" "+u(f.mode==="create"?"Simpan Item":"Update Item"),1)],8,Ms)])])):v("",!0)])])):v("",!0)}}};export{Es as default};
