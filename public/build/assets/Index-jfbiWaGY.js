import{r as b,c as U,A as G,B as n,C as P,D as t,L as r,E as _,G as u,N as l,H as f,J as k,I as W,F as M,M as T,l as q,W as m}from"./vendor-vue-g7iCcTkf.js";import{A as J}from"./AppLayout-CLYhXf-W.js";import{S as C}from"./app-DdwtQE43.js";import{a as Y}from"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CauiUg4O.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const K={class:"w-full py-8 px-0"},Q={key:0,class:"mb-4"},X={class:"inline-flex items-center gap-2 bg-blue-50 text-blue-800 px-4 py-2 rounded-xl font-semibold"},Z={class:"font-bold"},tt={class:"flex flex-wrap gap-3 mb-4 items-center"},et={class:"bg-white rounded-2xl shadow-2xl overflow-x-auto transition-all"},st={class:"w-full min-w-full divide-y divide-gray-200"},ot={key:0},at={class:"px-6 py-3 font-mono font-semibold text-blue-700"},lt={class:"px-6 py-3"},nt={class:"px-6 py-3"},rt={class:"px-6 py-3"},it={class:"px-6 py-3"},dt={class:"px-6 py-3"},ut={key:0},pt={class:"text-xs text-gray-500"},ct={key:1,class:"text-gray-400 italic"},xt={class:"px-6 py-3"},bt={class:"px-6 py-3"},ft={class:"px-6 py-3"},mt={class:"flex gap-2 flex-wrap"},gt=["onClick"],ht=["onClick"],yt=["onClick","disabled"],vt=["onClick","disabled","title"],wt={class:"text-right font-bold text-lg mt-4"},_t={class:"flex justify-end mt-4 gap-2"},kt=["disabled","onClick","innerHTML"],Ft={__name:"Index",props:{user:Object,floorOrders:Object,filters:Object},setup($){var B,D;const i=$,g=b(""),h=b(""),y=b(((B=i.filters)==null?void 0:B.start_date)||""),v=b(((D=i.filters)==null?void 0:D.end_date)||"");function F(){w()}function L(){w()}function O(){w()}function w(){m.get("/floor-order",{search:g.value,status:h.value,start_date:y.value,end_date:v.value},{preserveState:!0,replace:!0})}function V(o){o&&m.visit(o,{preserveState:!0,replace:!0})}function A(){window.location.href="/floor-order/create?fo_mode=FO%20Utama&input_mode=pc"}function H(o){m.visit(`/floor-order/edit/${o}`)}function N(o){m.visit(`/floor-order/${o}`)}function j(o){window.open(`/floor-order/${o}/export-pdf`,"_blank")}async function I(o){var d,e,p,c,x;if((await C.fire({title:"Hapus Request Order?",text:`Yakin ingin menghapus Request Order ${o.order_number}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed)try{const a=await Y.delete(`/floor-order/${o.id}`);if(a.data&&a.data.success)C.fire({icon:"success",title:"Berhasil",text:a.data.message||"Request Order berhasil dihapus.",timer:1500,showConfirmButton:!1}),window.location.reload();else throw new Error(((d=a.data)==null?void 0:d.error)||"Gagal menghapus Request Order")}catch(a){C.fire({icon:"error",title:"Gagal",text:((p=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:p.error)||((x=(c=a==null?void 0:a.response)==null?void 0:c.data)==null?void 0:x.message)||(a==null?void 0:a.message)||"Tidak bisa hapus Request Order ini."})}}function z(o){return{Monday:"Senin",Tuesday:"Selasa",Wednesday:"Rabu",Thursday:"Kamis",Friday:"Jumat",Saturday:"Sabtu",Sunday:"Minggu"}[o]||o}function S(o){return(Array.isArray(o.items)?o.items:o.items?Object.values(o.items):[]).reduce((d,e)=>d+(Number(e.subtotal)||0),0)}const E=U(()=>i.floorOrders.data.reduce((o,s)=>o+S(s),0));function R(o){return o?"Rp "+Number(o).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2}):"Rp 0"}return(o,s)=>(n(),G(J,null,{default:P(()=>{var d;return[t("div",K,[(d=i.user)!=null&&d.outlet?(n(),r("div",Q,[t("div",X,[s[4]||(s[4]=t("i",{class:"fa fa-store"},null,-1)),s[5]||(s[5]=u(" Outlet Anda: ")),t("span",Z,l(i.user.outlet.nama_outlet),1)])])):_("",!0),t("div",{class:"flex justify-between items-center mb-6"},[s[6]||(s[6]=t("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[t("i",{class:"fa-solid fa-calendar-check text-blue-500"}),u(" Request Order (RO) ")],-1)),t("button",{onClick:A,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"}," + Buat Request Order (RO) ")]),t("div",tt,[f(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>g.value=e),onInput:F,type:"text",placeholder:"Cari nomor Request Order...",class:"w-64 px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},null,544),[[k,g.value]]),f(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>h.value=e),onChange:L,class:"px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},s[7]||(s[7]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"draft"},"Draft",-1),t("option",{value:"approved"},"Approved",-1)]),544),[[W,h.value]]),f(t("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=e=>y.value=e),onChange:O,class:"px-2 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",placeholder:"Dari tanggal"},null,544),[[k,y.value]]),s[8]||(s[8]=t("span",null,"-",-1)),f(t("input",{type:"date","onUpdate:modelValue":s[3]||(s[3]=e=>v.value=e),onChange:O,class:"px-2 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",placeholder:"Sampai tanggal"},null,544),[[k,v.value]])]),t("div",et,[t("table",st,[s[15]||(s[15]=t("thead",{class:"bg-gradient-to-r from-blue-50 to-blue-100"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider rounded-tl-2xl"},"No. Request Order"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Tanggal"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Outlet"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Warehouse"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Requester"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Jadwal FO"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Subtotal"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider rounded-tr-2xl"},"Aksi")])],-1)),t("tbody",null,[i.floorOrders.data.length===0?(n(),r("tr",ot,s[9]||(s[9]=[t("td",{colspan:"6",class:"text-center py-10 text-gray-400"},"Tidak ada data Request Order.",-1)]))):_("",!0),(n(!0),r(M,null,T(i.floorOrders.data,e=>{var p,c,x;return n(),r("tr",{key:e.id,class:"hover:bg-blue-50 transition shadow-sm"},[t("td",at,l(e.order_number),1),t("td",lt,l(new Date(e.tanggal).toLocaleDateString("id-ID")),1),t("td",nt,l((p=e.outlet)==null?void 0:p.nama_outlet),1),t("td",rt,l((c=e.warehouse_outlet)==null?void 0:c.name),1),t("td",it,l((x=e.requester)==null?void 0:x.nama_lengkap),1),t("td",dt,[e.fo_schedule?(n(),r("span",ut,[u(l(e.fo_schedule.fo_mode)+" - "+l(z(e.fo_schedule.day))+" ",1),s[10]||(s[10]=t("br",null,null,-1)),t("span",pt,l(e.fo_schedule.open_time)+" - "+l(e.fo_schedule.close_time),1)])):(n(),r("span",ct,"-"))]),t("td",xt,[t("span",{class:q([{"bg-gray-100 text-gray-700":e.status==="draft","bg-green-100 text-green-700":e.status==="approved"},"px-2 py-1 rounded-full text-xs font-semibold shadow"])},l(e.status),3)]),t("td",bt,l(R(S(e))),1),t("td",ft,[t("div",mt,[t("button",{onClick:a=>N(e.id),class:"inline-flex items-center btn btn-xs bg-blue-100 text-blue-800 hover:bg-blue-200 rounded px-2 py-1 font-semibold transition"},s[11]||(s[11]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),u(" Detail ")]),8,gt),t("button",{onClick:a=>j(e.id),class:"inline-flex items-center btn btn-xs bg-green-100 text-green-800 hover:bg-green-200 rounded px-2 py-1 font-semibold transition"},s[12]||(s[12]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),u(" PDF ")]),8,ht),e.fo_mode!=="RO Supplier"?(n(),r("button",{key:0,onClick:a=>H(e.id),disabled:!["draft","approved","submitted"].includes(e.status),class:"inline-flex items-center btn btn-xs bg-yellow-100 text-yellow-800 hover:bg-yellow-200 rounded px-2 py-1 font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed"},s[13]||(s[13]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M15.232 5.232l3.536 3.536M9 13l6-6m2 2l-6 6m-2 2h6a2 2 0 002-2v-6a2 2 0 00-2-2H7a2 2 0 00-2 2v6a2 2 0 002 2z"})],-1),u(" Edit ")]),8,yt)):_("",!0),t("button",{onClick:a=>I(e),disabled:!["draft","approved","submitted"].includes(e.status)||e.has_packing_list,title:e.has_packing_list?"Request Order tidak dapat dihapus karena sudah ada di Packing List":"",class:"inline-flex items-center btn btn-xs bg-red-100 text-red-700 hover:bg-red-200 rounded px-2 py-1 font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed"},s[14]||(s[14]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M6 18L18 6M6 6l12 12"})],-1),u(" Hapus ")]),8,vt)])])])}),128))])]),t("div",wt," Grand Total: "+l(R(E.value)),1)]),t("div",_t,[(n(!0),r(M,null,T(i.floorOrders.links,e=>(n(),r("button",{key:e.label,disabled:!e.url,onClick:p=>V(e.url),innerHTML:e.label,class:q(["px-3 py-1 rounded-lg border text-sm font-semibold",[e.active?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-700 hover:bg-blue-50",e.url?"cursor-pointer":"opacity-50 cursor-not-allowed"]])},null,10,kt))),128))])])]}),_:1}))}};export{Ft as default};
