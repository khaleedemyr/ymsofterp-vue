import{r as y,w as W,W as N,c as k,A as C,B as o,C as I,D as t,H as f,L as i,F as h,M as w,N as n,I as L,J as v,E as c}from"./vendor-vue-g7iCcTkf.js";import{A}from"./AppLayout-DwCHohmp.js";import"./vendor-utils-CpgP2uT4.js";import"./app-BFfP2QJl.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-BgI6B89c.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const F={class:"w-full min-h-screen py-8 px-2 md:px-6"},B={class:"flex flex-col md:flex-row md:items-center gap-4 mb-4"},U={class:"flex items-center gap-2"},V=["value"],M={class:"flex items-center gap-2"},P={class:"flex items-center gap-2"},E={class:"bg-white rounded-xl shadow-lg overflow-x-auto"},j={class:"min-w-full divide-y divide-gray-200"},R={class:"bg-white divide-y divide-gray-200"},T=["rowspan"],G=["rowspan"],H=["rowspan"],J=["rowspan"],K=["rowspan"],O={class:"px-4 py-3 whitespace-nowrap text-sm"},q={class:"px-4 py-3 whitespace-nowrap text-sm"},z={class:"px-4 py-3 whitespace-nowrap text-sm text-right"},Q={class:"px-4 py-3 whitespace-nowrap text-sm text-right"},X={class:"px-4 py-3 whitespace-nowrap text-sm text-right"},Y={class:"px-4 py-3 whitespace-nowrap text-sm text-right"},it={__name:"Index",props:{report:Array,warehouses:Array,filters:Object},setup(b){const u=b,d=y(u.filters.warehouse_id||""),x=y(u.filters.from||""),m=y(u.filters.to||"");W([d,x,m],()=>{N.get(route("inventory.stock-cost-report"),{warehouse_id:d.value,from:x.value,to:m.value},{preserveState:!0,preserveScroll:!0,replace:!0})}),k(()=>{let r=u.report;return d.value&&(r=r.filter(s=>{var e;return s.warehouse===((e=u.warehouses.find(l=>l.id==d.value))==null?void 0:e.name)})),r});const D=k(()=>{const r=[];let s=null,e=null;return u.report.forEach(l=>{const a=l.unit_whole||l.unit,p=[l.tanggal,l.warehouse,l.item_whole,l.pengurangan_whole,a].join("|");p!==s?(e&&r.push(e),e={key:p,rows:[l]},s=p):e.rows.push(l)}),e&&r.push(e),r});function S(r){return r?new Date(r).toLocaleDateString("id-ID"):"-"}function g(r){return r==null?"-":Number(r)%1===0?Number(r):Number(r).toLocaleString("id-ID",{minimumFractionDigits:0,maximumFractionDigits:2})}function _(r){return r==null?"-":"Rp "+Number(r).toLocaleString("id-ID",{minimumFractionDigits:0,maximumFractionDigits:2})}return(r,s)=>(o(),C(A,null,{default:I(()=>[t("div",F,[s[8]||(s[8]=t("h1",{class:"text-2xl font-bold mb-6"},"Laporan Stok & Cost",-1)),t("div",B,[t("div",U,[s[4]||(s[4]=t("label",{class:"text-sm"},"Warehouse",-1)),f(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[s[3]||(s[3]=t("option",{value:""},"Semua Warehouse",-1)),(o(!0),i(h,null,w(b.warehouses,e=>(o(),i("option",{key:e.id,value:e.id},n(e.name),9,V))),128))],512),[[L,d.value]])]),t("div",M,[s[5]||(s[5]=t("label",{class:"text-sm"},"Dari",-1)),f(t("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=e=>x.value=e),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[v,x.value]])]),t("div",P,[s[6]||(s[6]=t("label",{class:"text-sm"},"Sampai",-1)),f(t("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=e=>m.value=e),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[v,m.value]])])]),t("div",E,[t("table",j,[s[7]||(s[7]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Tanggal"),t("th",{class:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Warehouse"),t("th",{class:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Item Whole"),t("th",{class:"px-4 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Pengurangan Whole"),t("th",{class:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Unit Whole"),t("th",{class:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Item PCS"),t("th",{class:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Unit"),t("th",{class:"px-4 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Penambahan PCS"),t("th",{class:"px-4 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"MAC"),t("th",{class:"px-4 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Saldo"),t("th",{class:"px-4 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Nilai Stok")])],-1)),t("tbody",R,[(o(!0),i(h,null,w(D.value,(e,l)=>(o(),i(h,{key:e.key},[(o(!0),i(h,null,w(e.rows,(a,p)=>(o(),i("tr",{key:e.key+"-"+p,class:"hover:bg-gray-50 transition"},[p===0?(o(),i("td",{key:0,rowspan:e.rows.length,class:"px-4 py-3 whitespace-nowrap text-sm"},n(S(a.tanggal)),9,T)):c("",!0),p===0?(o(),i("td",{key:1,rowspan:e.rows.length,class:"px-4 py-3 whitespace-nowrap text-sm"},n(a.warehouse),9,G)):c("",!0),p===0?(o(),i("td",{key:2,rowspan:e.rows.length,class:"px-4 py-3 whitespace-nowrap text-sm"},n(a.item_whole),9,H)):c("",!0),p===0?(o(),i("td",{key:3,rowspan:e.rows.length,class:"px-4 py-3 whitespace-nowrap text-sm text-right"},n(g(a.pengurangan_whole)),9,J)):c("",!0),p===0?(o(),i("td",{key:4,rowspan:e.rows.length,class:"px-4 py-3 whitespace-nowrap text-sm"},n(a.unit_whole||a.unit),9,K)):c("",!0),t("td",O,n(a.item_pcs),1),t("td",q,n(a.unit),1),t("td",z,n(g(a.penambahan_pcs)),1),t("td",Q,n(_(a.mac)),1),t("td",X,n(g(a.saldo)),1),t("td",Y,n(_(a.nilai_stok)),1)]))),128))],64))),128))])])])])]),_:1}))}};export{it as default};
