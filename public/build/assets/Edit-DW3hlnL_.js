import{r as q,P as B,L as n,B as u,x as v,Q as r,U as M,C as g,D as e,S as w,G as _,O as N,H as h,J as S,F as p,M as k,N as f,a6 as U,E as Q}from"./vendor-vue-g7iCcTkf.js";import{A as T}from"./AppLayout-CSX-_rnh.js";import{S as E}from"./app-DcTypqnW.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-B1e0pQ9F.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const C={class:"py-12"},D={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},F={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},$={class:"p-6 text-gray-900"},A={class:"flex justify-between items-center mb-6"},K={class:"bg-gray-50 p-4 rounded-lg mb-6"},L={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},R=["value"],J=["value"],P=["value"],z=["value"],G={class:"mb-6"},H={class:"space-y-8"},I={class:"text-lg font-semibold mb-4 text-blue-600"},W={class:"space-y-4"},X={class:"mb-2"},Y={class:"text-sm font-medium text-gray-900"},Z={class:"mb-3"},ee={class:"flex space-x-4"},se=["name","value","onUpdate:modelValue"],te={class:"text-sm"},oe=["onUpdate:modelValue"],le={class:"mt-8 flex justify-end space-x-4"},re=["disabled"],ae={key:0,class:"fas fa-spinner fa-spin mr-2"},fe={__name:"Edit",props:{survey:Object,surveyQuestions:Object},setup(i){const d=i,y=q(!1),j=()=>{const t={};return Object.keys(d.surveyQuestions).forEach(s=>{d.surveyQuestions[s].forEach((o,l)=>{const x=m(s,l);t[x]={question_category:s,question_text:o,score:null,comment:""}})}),d.survey.responses.forEach(s=>{const o=m(s.question_category,d.surveyQuestions[s.question_category].indexOf(s.question_text));t[o]&&(t[o].score=s.score,t[o].comment=s.comment||"")}),t},a=B({survey_date:d.survey.survey_date,responses:j()});function m(t,s){return`${t}_${s}`}function V(){y.value=!0;const t=Object.values(a.responses).filter(s=>s.score!==null);a.transform(s=>({...s,responses:t})).put(route("employee-survey.update",d.survey.id),{onSuccess:()=>{E.fire({title:"Berhasil!",text:"Survey berhasil diperbarui.",icon:"success",timer:2e3,showConfirmButton:!1}).then(()=>{})},onError:s=>{let o="Terjadi kesalahan saat memperbarui survey.";s.responses&&(o="Pastikan semua pertanyaan telah dijawab."),E.fire({title:"Error!",text:o,icon:"error"})},onFinish:()=>{y.value=!1}})}return(t,s)=>(u(),n(p,null,[v(r(M),{title:"Edit Employee Survey"}),v(T,null,{default:g(()=>[e("div",C,[e("div",D,[e("div",F,[e("div",$,[e("div",A,[s[2]||(s[2]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Edit Employee Survey"),e("p",{class:"text-gray-600"},"Edit survey karyawan")],-1)),v(r(w),{href:t.route("employee-survey.index"),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"},{default:g(()=>s[1]||(s[1]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),_(" Kembali ")])),_:1},8,["href"])]),e("form",{onSubmit:N(V,["prevent"])},[e("div",K,[s[7]||(s[7]=e("h3",{class:"text-lg font-semibold mb-4"},"Informasi Surveyor",-1)),e("div",L,[e("div",null,[s[3]||(s[3]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nama",-1)),e("input",{type:"text",value:i.survey.surveyor_name,disabled:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm bg-gray-100"},null,8,R)]),e("div",null,[s[4]||(s[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"Jabatan",-1)),e("input",{type:"text",value:i.survey.surveyor_position,disabled:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm bg-gray-100"},null,8,J)]),e("div",null,[s[5]||(s[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"Divisi",-1)),e("input",{type:"text",value:i.survey.surveyor_division,disabled:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm bg-gray-100"},null,8,P)]),e("div",null,[s[6]||(s[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Outlet",-1)),e("input",{type:"text",value:i.survey.surveyor_outlet,disabled:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm bg-gray-100"},null,8,z)])])]),e("div",G,[s[8]||(s[8]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tanggal Survey",-1)),h(e("input",{type:"date","onUpdate:modelValue":s[0]||(s[0]=o=>r(a).survey_date=o),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[S,r(a).survey_date]])]),e("div",H,[(u(!0),n(p,null,k(i.surveyQuestions,(o,l)=>(u(),n("div",{key:l,class:"border rounded-lg p-6"},[e("h3",I,f(l),1),e("div",W,[(u(!0),n(p,null,k(o,(x,b)=>(u(),n("div",{key:b,class:"border-l-4 border-blue-200 pl-4"},[e("div",X,[e("p",Y,f(x),1)]),e("div",Z,[s[9]||(s[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Score",-1)),e("div",ee,[(u(),n(p,null,k([1,2,3,4,5],c=>e("label",{key:c,class:"flex items-center"},[h(e("input",{type:"radio",name:`score_${l}_${b}`,value:c,"onUpdate:modelValue":O=>r(a).responses[m(l,b)].score=O,class:"mr-2",required:""},null,8,se),[[U,r(a).responses[m(l,b)].score]]),e("span",te,f(c),1)])),64))]),s[10]||(s[10]=e("div",{class:"text-xs text-gray-500 mt-1"}," 1 = Sangat Tidak Setuju, 2 = Tidak Setuju, 3 = Netral, 4 = Setuju, 5 = Sangat Setuju ",-1))]),e("div",null,[s[11]||(s[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Komentar (Opsional)",-1)),h(e("textarea",{"onUpdate:modelValue":c=>r(a).responses[m(l,b)].comment=c,rows:"2",class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Masukkan komentar..."},null,8,oe),[[S,r(a).responses[m(l,b)].comment]])])]))),128))])]))),128))]),e("div",le,[v(r(w),{href:t.route("employee-survey.index"),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"},{default:g(()=>s[12]||(s[12]=[_(" Batal ")])),_:1},8,["href"]),e("button",{type:"submit",disabled:y.value,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50"},[y.value?(u(),n("i",ae)):Q("",!0),_(" "+f(y.value?"Menyimpan...":"Update Survey"),1)],8,re)])],32)])])])])]),_:1})],64))}};export{fe as default};
