import{a as _}from"./vendor-utils-CpgP2uT4.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as v,w as y,a as b,A as w,B as a,L as l,E as i,D as t,F as p,M as k,T as g,N as o}from"./vendor-vue-g7iCcTkf.js";const T={key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/40"},B={class:"bg-white rounded-xl shadow-lg w-full max-w-lg p-6 relative",style:{"max-height":"70vh",display:"flex","flex-direction":"column","justify-content":"flex-start"}},C={key:0,class:"flex justify-center items-center py-8 flex-1"},D={key:1,class:"text-center text-gray-400 py-8 flex-1"},I={key:2,class:"relative flex flex-col items-center flex-1 overflow-y-auto",style:{"max-height":"50vh"}},N={class:"w-1/2 text-right pr-4"},z={class:"text-xs text-gray-500"},M={class:"text-sm font-semibold text-blue-700"},j={class:"flex flex-col items-center"},F={key:0,class:"w-1 h-8 bg-blue-200"},L={class:"w-1/2 pl-4"},S={class:"text-sm font-bold"},E={class:"text-xs text-gray-600 mb-1"},U={key:0,class:"text-xs text-gray-400"},V={key:0},A={key:1},O={key:2},$={__name:"TimelineModal",props:{show:Boolean,taskId:[String,Number],onClose:Function},setup(d){const u=d,r=v([]),c=v(!1);function x(n){return new Date(n).toLocaleString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}async function f(){if(u.taskId){c.value=!0;try{const n=await _.get(`/api/maintenance-tasks/${u.taskId}/timeline`);r.value=n.data}catch{r.value=[]}finally{c.value=!1}}}return y(()=>u.show,n=>{n&&f()}),b(()=>{u.show&&f()}),(n,s)=>(a(),w(g,{to:"body"},[d.show?(a(),l("div",T,[t("div",B,[t("button",{onClick:s[0]||(s[0]=(...e)=>d.onClose&&d.onClose(...e)),class:"absolute top-3 right-3 text-gray-400 hover:text-gray-600"},s[1]||(s[1]=[t("i",{class:"fas fa-times text-lg"},null,-1)])),s[5]||(s[5]=t("h2",{class:"text-xl font-bold mb-4 text-center"},"Timeline",-1)),c.value?(a(),l("div",C,s[2]||(s[2]=[t("div",{class:"w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"},null,-1)]))):r.value.length===0?(a(),l("div",D," Tidak ada aktivitas. ")):(a(),l("div",I,[s[4]||(s[4]=t("div",{class:"absolute left-1/2 -translate-x-1/2 w-1 bg-blue-100 h-full z-0"},null,-1)),(a(!0),l(p,null,k(r.value,(e,m)=>(a(),l("div",{key:e.id,class:"w-full flex items-center mb-8 last:mb-0 relative z-10"},[t("div",N,[t("div",z,o(x(e.created_at)),1),t("div",M,o(e.user_name||"Unknown User"),1)]),t("div",j,[s[3]||(s[3]=t("div",{class:"w-4 h-4 rounded-full bg-blue-500 border-2 border-white z-10"},null,-1)),m<r.value.length-1?(a(),l("div",F)):i("",!0)]),t("div",L,[t("div",S,o(e.activity_type),1),t("div",E,o(e.description),1),e.old_value||e.new_value?(a(),l("div",U,[e.old_value?(a(),l("span",V,"Old: "+o(e.old_value),1)):i("",!0),e.old_value&&e.new_value?(a(),l("span",A," â†’ ")):i("",!0),e.new_value?(a(),l("span",O,"New: "+o(e.new_value),1)):i("",!0)])):i("",!0)])]))),128))]))])])):i("",!0)]))}},J=h($,[["__scopeId","data-v-2126401c"]]);export{J as default};
