import{r as d,c as ne,a as le,A as ie,B as a,C as J,D as e,x as re,L as n,E as P,l as p,G as f,N as l,H as v,J as U,I as q,F as k,M as K,W as H}from"./vendor-vue-g7iCcTkf.js";import{A as de}from"./AppLayout-DwCHohmp.js";import{_ as ce}from"./Modal-BBL5yay4.js";import{S as c}from"./app-BFfP2QJl.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-BgI6B89c.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const ue={class:"py-6"},fe={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},pe={class:"mb-6"},me={class:"border-b border-gray-200"},xe={class:"-mb-px flex space-x-8"},ge={key:0},ye={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"},ve={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},he={class:"p-6"},_e={class:"flex items-center"},we={class:"ml-4"},be={class:"text-2xl font-semibold text-gray-900"},ke={key:0,class:"fas fa-spinner fa-spin text-blue-500"},Oe={key:1},Ee={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Te={class:"p-6"},Ce={class:"flex items-center"},Be={class:"ml-4"},Se={class:"text-2xl font-semibold text-gray-900"},je={key:0,class:"fas fa-spinner fa-spin text-green-500"},$e={key:1},Ae={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},De={class:"p-6"},Pe={class:"flex items-center"},Ue={class:"ml-4"},Ne={class:"text-2xl font-semibold text-gray-900"},Ke={key:0,class:"fas fa-spinner fa-spin text-yellow-500"},Me={key:1},Fe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},He={class:"p-6"},Re={class:"flex items-center"},Ve={class:"ml-4"},Le={class:"text-2xl font-semibold text-gray-900"},Ie={key:0,class:"fas fa-spinner fa-spin text-purple-500"},Je={key:1},qe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},We={class:"p-6"},ze={class:"flex gap-4 items-end"},Xe={class:"flex-1"},Ye=["disabled"],Qe={key:0,class:"fas fa-spinner fa-spin"},Ze={key:1,class:"fas fa-play"},Ge={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},et={class:"p-6"},tt={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},st={class:"flex items-end"},ot=["disabled"],at={key:0,class:"fas fa-spinner fa-spin"},nt={key:1,class:"fas fa-filter"},lt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},it={class:"p-6"},rt={class:"overflow-x-auto"},dt={class:"min-w-full divide-y divide-gray-200"},ct={class:"bg-white divide-y divide-gray-200"},ut=["onClick"],ft={colspan:"8",class:"px-6 py-4"},pt={class:"flex items-center justify-between"},mt={class:"flex items-center"},xt={class:"text-lg font-semibold text-blue-900"},gt={class:"text-sm text-blue-700"},yt={class:"flex items-center space-x-4"},vt={class:"text-sm text-blue-600 font-medium"},ht=["onClick"],_t={colspan:"8",class:"px-6 py-3 pl-12"},wt={class:"flex items-center justify-between"},bt={class:"flex items-center"},kt={class:"text-md font-medium text-green-900"},Ot={class:"text-sm text-green-700"},Et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 pl-16"},Tt={class:"px-6 py-4 whitespace-nowrap pl-16"},Ct={class:"text-sm font-medium text-gray-900"},Bt={class:"text-sm text-gray-500"},St={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 pl-16"},jt={class:"px-6 py-4 whitespace-nowrap pl-16"},$t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 pl-16"},At={class:"px-6 py-4 whitespace-nowrap pl-16"},Dt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 pl-16"},Pt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium pl-16"},Ut=["onClick"],Nt={key:1},Kt={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"},Mt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ft={class:"p-6"},Ht={class:"flex items-center"},Rt={class:"ml-4"},Vt={class:"text-2xl font-semibold text-gray-900"},Lt={key:0,class:"fas fa-spinner fa-spin text-purple-500"},It={key:1},Jt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},qt={class:"p-6"},Wt={class:"flex items-center"},zt={class:"ml-4"},Xt={class:"text-2xl font-semibold text-gray-900"},Yt={key:0,class:"fas fa-spinner fa-spin text-orange-500"},Qt={key:1},Zt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Gt={class:"p-6"},es={class:"flex items-center"},ts={class:"ml-4"},ss={class:"text-2xl font-semibold text-gray-900"},os={key:0,class:"fas fa-spinner fa-spin text-green-500"},as={key:1},ns={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ls={class:"p-6"},is={class:"flex items-center"},rs={class:"ml-4"},ds={class:"text-2xl font-semibold text-gray-900"},cs={key:0,class:"fas fa-spinner fa-spin text-blue-500"},us={key:1},fs={class:"bg-white shadow-sm sm:rounded-lg mb-6"},ps={class:"p-6"},ms={class:"flex items-center space-x-4"},xs={class:"flex items-end"},gs=["disabled"],ys={key:0,class:"fas fa-spinner fa-spin"},vs={key:1,class:"fas fa-search"},hs={class:"bg-white shadow-sm sm:rounded-lg"},_s={class:"overflow-x-auto"},ws={class:"min-w-full divide-y divide-gray-200"},bs={class:"bg-white divide-y divide-gray-200"},ks={key:0},Os={key:1},Es={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ts={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Cs={class:"px-6 py-4 whitespace-nowrap"},Bs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ss={class:"px-6 py-4 text-sm text-gray-900"},js={class:"px-6 py-4 whitespace-nowrap"},$s={class:"p-6"},As={class:"mb-4"},Ds={class:"text-sm text-gray-600"},Ps={class:"mb-4"},Us={class:"flex justify-end space-x-3"},Ns=["disabled"],Ks={key:0,class:"fas fa-spinner fa-spin"},Ms={key:1,class:"fas fa-calendar-check"},Ys={__name:"Index",props:{compensations:Array,users:Array,filters:Object},setup(W){const m=W,O=d({}),E=d(!1),T=d(!1),C=d(!1),x=d(null),h=d(!1),B=d(!1),_=d("holiday"),S=d({}),M=d([]),w=d(!1),F=d(!1),j=d(!1),N=d({date:""}),$=d([]),g=d([]),A=d({date:""}),b=d({use_date:""}),u=d({...m.filters}),z=ne(()=>{if(console.log("props.compensations:",m.compensations),!m.compensations||m.compensations.length===0)return console.log("No compensations data found"),[];const o={};m.compensations.forEach(s=>{console.log("Processing compensation:",s);const i=s.nama_outlet||"Unknown Outlet",r=s.nama_divisi||"Unknown Division",D=parseFloat(s.compensation_amount)||0;console.log(`Amount parsed: ${D} from "${s.compensation_amount}"`),console.log(`Outlet: ${i}, Division: ${r}, Amount: ${D}`),o[i]||(o[i]={outlet:i,divisions:{},totalEmployees:0,totalAmount:0}),o[i].divisions[r]||(o[i].divisions[r]={division:r,employees:[],totalEmployees:0,totalAmount:0}),o[i].divisions[r].employees.push(s),o[i].divisions[r].totalEmployees++,o[i].divisions[r].totalAmount+=D,o[i].totalEmployees++,o[i].totalAmount+=D});const t=Object.values(o).map(s=>({...s,divisions:Object.values(s.divisions)}));return console.log("groupedCompensations result:",t),t}),X=o=>{const t=$.value.indexOf(o);t>-1?($.value.splice(t,1),g.value=g.value.filter(s=>!s.startsWith(`${o}-`))):$.value.push(o)},Y=(o,t)=>{const s=`${o}-${t}`,i=g.value.indexOf(s);i>-1?g.value.splice(i,1):g.value.push(s)},R=o=>{console.log("formatCurrency input:",o,"type:",typeof o);let t=o;return typeof o=="string"&&(t=parseFloat(o)),o==null||isNaN(t)?"Rp 0":"Rp "+new Intl.NumberFormat("id-ID").format(t)},y=o=>new Date(o).toLocaleDateString("id-ID"),V=o=>new Intl.NumberFormat("id-ID").format(o),Q=o=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",used:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",Z=o=>({pending:"Pending",approved:"Approved",used:"Used",cancelled:"Cancelled"})[o]||"Unknown",G=async()=>{if(!A.value.date){c.fire({icon:"warning",title:"Peringatan",text:"Silakan pilih tanggal terlebih dahulu!",confirmButtonText:"OK"});return}if((await c.fire({title:"Proses Holiday Attendance?",text:`Apakah Anda yakin ingin memproses holiday attendance untuk tanggal ${y(A.value.date)}?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Proses!",cancelButtonText:"Batal"})).isConfirmed){c.fire({title:"Memproses...",text:"Sedang memproses holiday attendance, mohon tunggu...",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{c.showLoading()}}),E.value=!0;try{const s=await(await fetch("/api/holiday-attendance/process",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({date:A.value.date})})).json();s.success?(c.fire({icon:"success",title:"Berhasil!",html:`
          <div class="text-left">
            <p><strong>Proses Holiday Attendance Selesai!</strong></p>
            <ul class="mt-3 space-y-1">
              <li>üìä Total diproses: <strong>${s.results.processed}</strong> karyawan</li>
              <li>üèñÔ∏è Extra off days: <strong>${s.results.extra_off_given}</strong></li>
              <li>üí∞ Bonuses: <strong>${s.results.bonus_paid}</strong></li>
            </ul>
          </div>
        `,confirmButtonText:"OK"}),H.reload()):c.fire({icon:"error",title:"Error!",text:s.message||"Terjadi kesalahan saat memproses holiday attendance",confirmButtonText:"OK"})}catch(t){c.fire({icon:"error",title:"Error!",text:"Terjadi kesalahan saat memproses holiday attendance: "+t.message,confirmButtonText:"OK"})}finally{E.value=!1}}},ee=async()=>{B.value=!0;try{await H.get("/holiday-attendance",u.value,{preserveState:!0,replace:!0})}finally{B.value=!1}},te=o=>{x.value=o,b.value.use_date="",C.value=!0},se=async()=>{if(!b.value.use_date){c.fire({icon:"warning",title:"Peringatan",text:"Silakan pilih tanggal penggunaan terlebih dahulu!",confirmButtonText:"OK"});return}if((await c.fire({title:"Gunakan Extra Off Day?",html:`
      <div class="text-left">
        <p><strong>Konfirmasi Penggunaan Extra Off Day</strong></p>
        <ul class="mt-3 space-y-1">
          <li>üë§ Karyawan: <strong>${x.value.nama_lengkap}</strong></li>
          <li>üìÖ Tanggal Libur: <strong>${y(x.value.holiday_date)}</strong></li>
          <li>üìÖ Tanggal Penggunaan: <strong>${y(b.value.use_date)}</strong></li>
        </ul>
      </div>
    `,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Gunakan!",cancelButtonText:"Batal"})).isConfirmed){c.fire({title:"Memproses...",text:"Sedang menggunakan extra off day, mohon tunggu...",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{c.showLoading()}}),T.value=!0;try{const s=await(await fetch("/api/holiday-attendance/use-extra-off",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({compensation_id:x.value.id,use_date:b.value.use_date})})).json();s.success?(c.fire({icon:"success",title:"Berhasil!",text:"Extra off day berhasil digunakan!",confirmButtonText:"OK"}),C.value=!1,H.reload()):c.fire({icon:"error",title:"Error!",text:s.message||"Terjadi kesalahan saat menggunakan extra off day",confirmButtonText:"OK"})}catch(t){c.fire({icon:"error",title:"Error!",text:"Terjadi kesalahan saat menggunakan extra off day: "+t.message,confirmButtonText:"OK"})}finally{T.value=!1}}},oe=async()=>{h.value=!0;try{const o=new URLSearchParams({start_date:u.value.start_date,end_date:u.value.end_date}),s=await(await fetch(`/api/holiday-attendance/statistics?${o.toString()}`)).json();s.success?O.value=s.statistics:console.error("Error loading statistics:",s.message)}catch(o){console.error("Error loading statistics:",o)}finally{h.value=!1}},ae=async()=>{if(!N.value.date){c.fire({icon:"warning",title:"Warning!",text:"Please select a date",confirmButtonText:"OK"});return}j.value=!0;try{const o=await fetch("/api/extra-off/detect",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json"},body:JSON.stringify({date:N.value.date})});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const t=o.headers.get("content-type");if(!t||!t.includes("application/json")){const i=await o.text();throw new Error(`Expected JSON response but got: ${i.substring(0,200)}...`)}const s=await o.json();s.success?(c.fire({icon:"success",title:"Success!",html:`
          <div class="text-left">
            <p><strong>Extra Off Detection Results:</strong></p>
            <ul class="mt-2 space-y-1">
              <li>‚Ä¢ Detected: ${s.results.detected} employees</li>
              <li>‚Ä¢ Extra Off Processed: ${s.results.processed} employees (>8 hours)</li>
              <li>‚Ä¢ Overtime Processed: ${s.results.overtime_processed} employees (‚â§8 hours)</li>
              <li>‚Ä¢ Errors: ${s.results.errors.length}</li>
            </ul>
          </div>
        `,confirmButtonText:"OK"}),L(),I()):c.fire({icon:"error",title:"Error!",text:s.message||"Terjadi kesalahan saat memproses extra off detection",confirmButtonText:"OK"})}catch(o){c.fire({icon:"error",title:"Error!",text:"Terjadi kesalahan saat memproses extra off detection: "+o.message,confirmButtonText:"OK"})}finally{j.value=!1}},L=async()=>{w.value=!0;try{const o=await fetch("/api/extra-off/statistics",{headers:{Accept:"application/json"}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const t=o.headers.get("content-type");if(!t||!t.includes("application/json")){const i=await o.text();throw new Error(`Expected JSON response but got: ${i.substring(0,200)}...`)}const s=await o.json();s.success?S.value=s.statistics:console.error("Error loading extra off stats:",s.message)}catch(o){console.error("Error loading extra off stats:",o)}finally{w.value=!1}},I=async()=>{F.value=!0;try{const o=await fetch("/api/extra-off/all-transactions",{headers:{Accept:"application/json"}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const t=o.headers.get("content-type");if(!t||!t.includes("application/json")){const i=await o.text();throw new Error(`Expected JSON response but got: ${i.substring(0,200)}...`)}const s=await o.json();s.success?M.value=s.transactions:console.error("Error loading extra off transactions:",s.message)}catch(o){console.error("Error loading extra off transactions:",o)}finally{F.value=!1}};return le(()=>{console.log("Component mounted, props:",m),console.log("Compensations data:",m.compensations),oe(),L(),I()}),(o,t)=>(a(),ie(de,null,{default:J(()=>[t[52]||(t[52]=e("div",{class:"bg-white shadow-sm border-b border-gray-200"},[e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},[e("div",{class:"py-6"},[e("h1",{class:"text-2xl font-bold text-gray-900"},"Holiday Attendance Management"),e("p",{class:"mt-1 text-sm text-gray-600"},"Manage employee compensations for working on holidays")])])],-1)),e("div",ue,[e("div",fe,[e("div",pe,[e("div",me,[e("nav",xe,[e("button",{onClick:t[0]||(t[0]=s=>_.value="holiday"),class:p([_.value==="holiday"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm"])},t[11]||(t[11]=[e("i",{class:"fas fa-calendar-day mr-2"},null,-1),f(" Holiday Attendance ")]),2),e("button",{onClick:t[1]||(t[1]=s=>_.value="extra-off"),class:p([_.value==="extra-off"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm"])},t[12]||(t[12]=[e("i",{class:"fas fa-clock mr-2"},null,-1),f(" Extra Off Detection ")]),2)])])]),_.value==="holiday"?(a(),n("div",ge,[e("div",ye,[e("div",ve,[e("div",he,[e("div",_e,[t[14]||(t[14]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",we,[t[13]||(t[13]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Compensations",-1)),e("p",be,[h.value?(a(),n("i",ke)):(a(),n("span",Oe,l(O.value.total_compensations||0),1))])])])])]),e("div",Ee,[e("div",Te,[e("div",Ce,[t[16]||(t[16]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",Be,[t[15]||(t[15]=e("p",{class:"text-sm font-medium text-gray-500"},"Extra Off Days",-1)),e("p",Se,[h.value?(a(),n("i",je)):(a(),n("span",$e,l(O.value.extra_off_given||0),1))])])])])]),e("div",Ae,[e("div",De,[e("div",Pe,[t[18]||(t[18]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])])],-1)),e("div",Ue,[t[17]||(t[17]=e("p",{class:"text-sm font-medium text-gray-500"},"Bonuses Paid",-1)),e("p",Ne,[h.value?(a(),n("i",Ke)):(a(),n("span",Me,l(O.value.bonus_paid||0),1))])])])])]),e("div",Fe,[e("div",He,[e("div",Re,[t[20]||(t[20]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])])],-1)),e("div",Ve,[t[19]||(t[19]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Bonus Amount",-1)),e("p",Le,[h.value?(a(),n("i",Ie)):(a(),n("span",Je,"Rp "+l(V(O.value.total_bonus_amount||0)),1))])])])])])]),e("div",qe,[e("div",We,[t[22]||(t[22]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Process Holiday Attendance",-1)),e("div",ze,[e("div",Xe,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Holiday Date",-1)),v(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>A.value.date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[U,A.value.date]])]),e("button",{onClick:G,disabled:E.value,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md disabled:opacity-50 flex items-center gap-2"},[E.value?(a(),n("i",Qe)):(a(),n("i",Ze)),f(" "+l(E.value?"Memproses...":"Proses Holiday"),1)],8,Ye)])])]),e("div",Ge,[e("div",et,[t[29]||(t[29]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Filters",-1)),e("div",tt,[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Start Date",-1)),v(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>u.value.start_date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[U,u.value.start_date]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"End Date",-1)),v(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>u.value.end_date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[U,u.value.end_date]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Compensation Type",-1)),v(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>u.value.compensation_type=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},t[25]||(t[25]=[e("option",{value:""},"All Types",-1),e("option",{value:"extra_off"},"Extra Off Day",-1),e("option",{value:"bonus"},"Holiday Bonus",-1)]),512),[[q,u.value.compensation_type]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),v(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>u.value.status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},t[27]||(t[27]=[e("option",{value:""},"All Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"used"},"Used",-1),e("option",{value:"cancelled"},"Cancelled",-1)]),512),[[q,u.value.status]])]),e("div",st,[e("button",{onClick:ee,disabled:B.value,class:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md mr-2 disabled:opacity-50 flex items-center gap-2"},[B.value?(a(),n("i",at)):(a(),n("i",nt)),f(" "+l(B.value?"Memproses...":"Apply Filters"),1)],8,ot)])])])]),e("div",lt,[e("div",it,[t[32]||(t[32]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Holiday Attendance Compensations",-1)),e("div",rt,[e("table",dt,[t[31]||(t[31]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Employee"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Position"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Used Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",ct,[(a(!0),n(k,null,K(z.value,s=>(a(),n(k,{key:s.outlet},[e("tr",{class:"bg-blue-50 hover:bg-blue-100 cursor-pointer",onClick:i=>X(s.outlet)},[e("td",ft,[e("div",pt,[e("div",mt,[e("i",{class:p([$.value.includes(s.outlet)?"fas fa-chevron-down":"fas fa-chevron-right","mr-3 text-blue-600"])},null,2),e("div",null,[e("h4",xt,l(s.outlet),1),e("p",gt,l(s.totalEmployees)+" employees ‚Ä¢ "+l(R(s.totalAmount))+" total compensation",1)])]),e("div",yt,[e("span",vt,l(s.divisions.length)+" divisions",1)])])])],8,ut),$.value.includes(s.outlet)?(a(!0),n(k,{key:0},K(s.divisions,i=>(a(),n(k,{key:`${s.outlet}-${i.division}`},[e("tr",{class:"bg-green-50 hover:bg-green-100 cursor-pointer",onClick:r=>Y(s.outlet,i.division)},[e("td",_t,[e("div",wt,[e("div",bt,[e("i",{class:p([g.value.includes(`${s.outlet}-${i.division}`)?"fas fa-chevron-down":"fas fa-chevron-right","mr-3 text-green-600"])},null,2),e("div",null,[e("h5",kt,l(i.division),1),e("p",Ot,l(i.totalEmployees)+" employees ‚Ä¢ "+l(R(i.totalAmount))+" total compensation",1)])])])])],8,ht),g.value.includes(`${s.outlet}-${i.division}`)?(a(!0),n(k,{key:0},K(i.employees,r=>(a(),n("tr",{key:r.id,class:"hover:bg-gray-50"},[e("td",Et,l(y(r.holiday_date)),1),e("td",Tt,[e("div",Ct,l(r.nama_lengkap),1),e("div",Bt,l(r.nik),1)]),e("td",St,l(r.nama_jabatan),1),e("td",jt,[e("span",{class:p([r.compensation_type==="extra_off"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800","px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},l(r.compensation_type==="extra_off"?"Extra Off Day":"Holiday Bonus"),3)]),e("td",$t,l(r.compensation_type==="extra_off"?"1 day":"Rp "+V(r.compensation_amount)),1),e("td",At,[e("span",{class:p([Q(r.status),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},l(Z(r.status)),3)]),e("td",Dt,l(r.used_date?y(r.used_date):"-"),1),e("td",Pt,[r.compensation_type==="extra_off"&&r.status==="pending"?(a(),n("button",{key:0,onClick:D=>te(r),class:"text-indigo-600 hover:text-indigo-900 mr-3 flex items-center gap-1"},t[30]||(t[30]=[e("i",{class:"fas fa-calendar-check"},null,-1),f(" Use ")]),8,Ut)):P("",!0)])]))),128)):P("",!0)],64))),128)):P("",!0)],64))),128))])])])])])])):P("",!0),_.value==="extra-off"?(a(),n("div",Nt,[e("div",Kt,[e("div",Mt,[e("div",Ft,[e("div",Ht,[t[34]||(t[34]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center"},[e("i",{class:"fas fa-clock text-white"})])],-1)),e("div",Rt,[t[33]||(t[33]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Extra Off",-1)),e("p",Vt,[w.value?(a(),n("i",Lt)):(a(),n("span",It,l(S.value.total_extra_off||0),1))])])])])]),e("div",Jt,[e("div",qt,[e("div",Wt,[t[36]||(t[36]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center"},[e("i",{class:"fas fa-hourglass-half text-white"})])],-1)),e("div",zt,[t[35]||(t[35]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Overtime",-1)),e("p",Xt,[w.value?(a(),n("i",Yt)):(a(),n("span",Qt,l(S.value.total_overtime||0),1))])])])])]),e("div",Zt,[e("div",Gt,[e("div",es,[t[38]||(t[38]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center"},[e("i",{class:"fas fa-users text-white"})])],-1)),e("div",ts,[t[37]||(t[37]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Users",-1)),e("p",ss,[w.value?(a(),n("i",os)):(a(),n("span",as,l(S.value.total_users||0),1))])])])])]),e("div",ns,[e("div",ls,[e("div",is,[t[40]||(t[40]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},[e("i",{class:"fas fa-chart-line text-white"})])],-1)),e("div",rs,[t[39]||(t[39]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Balance",-1)),e("p",ds,[w.value?(a(),n("i",cs)):(a(),n("span",us,l(S.value.total_balance||0),1))])])])])])]),e("div",fs,[e("div",ps,[t[42]||(t[42]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Process Extra Off Detection",-1)),e("div",ms,[e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Date",-1)),v(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>N.value.date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[U,N.value.date]])]),e("div",xs,[e("button",{onClick:ae,disabled:j.value,class:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md disabled:opacity-50 flex items-center gap-2"},[j.value?(a(),n("i",ys)):(a(),n("i",vs)),f(" "+l(j.value?"Processing...":"Detect Extra Off"),1)],8,gs)])])])]),e("div",hs,[t[46]||(t[46]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Extra Off Transactions")],-1)),e("div",_s,[e("table",ws,[t[45]||(t[45]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Employee"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status")])],-1)),e("tbody",bs,[F.value?(a(),n("tr",ks,t[43]||(t[43]=[e("td",{colspan:"6",class:"px-6 py-4 text-center"},[e("i",{class:"fas fa-spinner fa-spin text-gray-400"}),e("span",{class:"ml-2 text-gray-500"},"Loading...")],-1)]))):M.value.length===0?(a(),n("tr",Os,t[44]||(t[44]=[e("td",{colspan:"6",class:"px-6 py-4 text-center text-gray-500"}," No extra off transactions found ",-1)]))):(a(!0),n(k,{key:2},K(M.value,s=>(a(),n("tr",{key:s.id},[e("td",Es,l(y(s.source_date)),1),e("td",Ts,l(s.user?s.user.nama_lengkap:"Unknown User"),1),e("td",Cs,[e("span",{class:p([s.source_type==="unscheduled_work"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800","px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},l(s.source_type==="unscheduled_work"?"Extra Off":"Overtime"),3)]),e("td",Bs,l(s.amount>0?"+"+s.amount:s.amount)+" hari ",1),e("td",Ss,l(s.description),1),e("td",js,[e("span",{class:p([s.status==="approved"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800","px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},l(s.status),3)])]))),128))])])])])])):P("",!0)])]),re(ce,{show:C.value,onClose:t[10]||(t[10]=s=>C.value=!1)},{default:J(()=>{var s;return[e("div",$s,[t[51]||(t[51]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Use Extra Off Day",-1)),e("div",As,[e("p",Ds,[t[47]||(t[47]=f(" Employee: ")),e("strong",null,l((s=x.value)==null?void 0:s.nama_lengkap),1),t[48]||(t[48]=e("br",null,null,-1)),t[49]||(t[49]=f(" Holiday Date: ")),e("strong",null,l(x.value?y(x.value.holiday_date):""),1)])]),e("div",Ps,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Use Date",-1)),v(e("input",{"onUpdate:modelValue":t[8]||(t[8]=i=>b.value.use_date=i),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[U,b.value.use_date]])]),e("div",Us,[e("button",{onClick:t[9]||(t[9]=i=>C.value=!1),class:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded-md"}," Cancel "),e("button",{onClick:se,disabled:T.value,class:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md disabled:opacity-50 flex items-center gap-2"},[T.value?(a(),n("i",Ks)):(a(),n("i",Ms)),f(" "+l(T.value?"Menggunakan...":"Gunakan Extra Off Day"),1)],8,Ns)])])]}),_:1},8,["show"])]),_:1}))}};export{Ys as default};
