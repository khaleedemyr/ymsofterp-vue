import{r as d,A as j,B as c,C as x,D as l,G as y,O as D,x as a,l as f,L as h,E as w,H as F,J as S,N,W as _}from"./vendor-vue-g7iCcTkf.js";import{A as L}from"./AppLayout-1Wm1ZPw9.js";import{P as O}from"./PrimaryButton-BbBAD9SX.js";import{_ as b}from"./TextInput-B7P_xVe4.js";import{_ as u,a as r}from"./InputLabel-Bg0AMQZ3.js";import{S as k}from"./app-BPKNzj_F.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CVHTvH7j.js";import"./vendor-charts-CuqD4wLC.js";const R={class:"max-w-4xl mx-auto py-8 px-4"},U={class:"bg-white rounded-lg shadow p-6"},A={key:0,class:"mt-4"},G=["src"],T={key:0,class:"mt-4"},I=["src"],W={class:"flex justify-end gap-4"},ee={__name:"Create",setup($){const t=d({title:"",slug:"",link_menu:"",menu_pdf:null,thumbnail:null,image:null,content:""}),i=d({}),m=d(!1),g=d(null),p=d(null);function C(){t.value.title&&(t.value.slug=t.value.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""))}function B(n){const e=n.target.files[0];if(e){t.value.thumbnail=e;const s=new FileReader;s.onload=o=>{g.value=o.target.result},s.readAsDataURL(e)}}function V(n){const e=n.target.files[0];if(e){t.value.image=e;const s=new FileReader;s.onload=o=>{p.value=o.target.result},s.readAsDataURL(e)}}function M(n){const e=n.target.files[0];e&&(t.value.menu_pdf=e)}function P(){m.value=!0;const n=new FormData;n.append("title",t.value.title),n.append("slug",t.value.slug||""),n.append("link_menu",t.value.link_menu||""),n.append("content",t.value.content||""),t.value.thumbnail&&n.append("thumbnail",t.value.thumbnail),t.value.image&&n.append("image",t.value.image),t.value.menu_pdf&&n.append("menu_pdf",t.value.menu_pdf),_.post("/web-profile/brands",n,{forceFormData:!0,onSuccess:()=>{k.fire("Berhasil!","Brand berhasil dibuat.","success")},onError:e=>{i.value=e||{},m.value=!1;let s="Gagal membuat brand. Silakan periksa form yang diisi.";if(e&&Object.keys(e).length>0){const o=Object.values(e).flat();o.length>0&&(s=o.join("<br>"))}k.fire({icon:"error",title:"Error!",html:s})},onFinish:()=>{m.value=!1}})}function v(){_.visit("/web-profile/brands")}return(n,e)=>(c(),j(L,{title:"Create Brand"},{default:x(()=>[l("div",R,[l("div",{class:"flex justify-between items-center mb-6"},[e[5]||(e[5]=l("h1",{class:"text-2xl font-bold text-gray-800"},"Create New Brand",-1)),l("button",{onClick:v,class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"},e[4]||(e[4]=[l("i",{class:"fa-solid fa-arrow-left mr-2"},null,-1),y(" Cancel ")]))]),l("div",U,[l("form",{onSubmit:D(P,["prevent"]),class:"space-y-6"},[l("div",null,[a(u,{for:"title",value:"Title *"}),a(b,{id:"title",modelValue:t.value.title,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.title=s),type:"text",class:f(["mt-1 block w-full",{"border-red-500":i.value.title}]),onInput:C,required:""},null,8,["modelValue","class"]),a(r,{message:i.value.title,class:"mt-2"},null,8,["message"])]),l("div",null,[a(u,{for:"slug",value:"Slug"}),a(b,{id:"slug",modelValue:t.value.slug,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.slug=s),type:"text",class:f(["mt-1 block w-full",{"border-red-500":i.value.slug}]),placeholder:"Auto-generated from title"},null,8,["modelValue","class"]),a(r,{message:i.value.slug,class:"mt-2"},null,8,["message"]),e[6]||(e[6]=l("p",{class:"mt-1 text-sm text-gray-500"},"URL-friendly version of the title",-1))]),l("div",null,[a(u,{for:"thumbnail",value:"Thumbnail Image *"}),l("input",{id:"thumbnail",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",onChange:B,required:""},null,32),a(r,{message:i.value.thumbnail,class:"mt-2"},null,8,["message"]),e[7]||(e[7]=l("p",{class:"mt-1 text-sm text-gray-500"},"Recommended: 400x300px, Max 5MB, Format: JPG/PNG/WEBP",-1)),g.value?(c(),h("div",A,[l("img",{src:g.value,alt:"Thumbnail preview",class:"w-64 h-48 object-cover rounded-lg border-2 border-gray-300"},null,8,G)])):w("",!0)]),l("div",null,[a(u,{for:"image",value:"Image (Optional)"}),l("input",{id:"image",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",onChange:V},null,32),a(r,{message:i.value.image,class:"mt-2"},null,8,["message"]),e[8]||(e[8]=l("p",{class:"mt-1 text-sm text-gray-500"},"Recommended: 800x600px, Max 5MB, Format: JPG/PNG/WEBP",-1)),p.value?(c(),h("div",T,[l("img",{src:p.value,alt:"Image preview",class:"w-64 h-48 object-cover rounded-lg border-2 border-gray-300"},null,8,I)])):w("",!0)]),l("div",null,[a(u,{for:"link_menu",value:"Menu Link (Optional)"}),a(b,{id:"link_menu",modelValue:t.value.link_menu,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.link_menu=s),type:"url",class:f(["mt-1 block w-full",{"border-red-500":i.value.link_menu}]),placeholder:"https://example.com/menu"},null,8,["modelValue","class"]),a(r,{message:i.value.link_menu,class:"mt-2"},null,8,["message"])]),l("div",null,[a(u,{for:"menu_pdf",value:"Menu PDF (Optional)"}),l("input",{id:"menu_pdf",type:"file",accept:"application/pdf",class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",onChange:M},null,32),a(r,{message:i.value.menu_pdf,class:"mt-2"},null,8,["message"]),e[9]||(e[9]=l("p",{class:"mt-1 text-sm text-gray-500"},"Max 10MB, Format: PDF",-1))]),l("div",null,[a(u,{for:"content",value:"Content (Optional)"}),F(l("textarea",{id:"content","onUpdate:modelValue":e[3]||(e[3]=s=>t.value.content=s),rows:"6",class:f(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",{"border-red-500":i.value.content}])},null,2),[[S,t.value.content]]),a(r,{message:i.value.content,class:"mt-2"},null,8,["message"])]),l("div",W,[l("button",{type:"button",onClick:v,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"}," Cancel "),a(O,{disabled:m.value},{default:x(()=>[y(N(m.value?"Creating...":"Create Brand"),1)]),_:1},8,["disabled"])])],32)])])]),_:1}))}};export{ee as default};
