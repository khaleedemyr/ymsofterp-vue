import{r as d,w as y,L as r,B as o,D as e,E as u,H as U,J as T,Z as B,F as D,M as S,N as v}from"./vendor-vue-g7iCcTkf.js";import{a as C}from"./vendor-utils-CpgP2uT4.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"relative"},F={class:"relative"},M=["placeholder"],N={key:0,class:"absolute right-3 top-3"},V={key:1,class:"absolute z-50 w-full mt-2 bg-white/90 backdrop-blur-xl rounded-xl shadow-2xl border border-white/20 max-h-80 overflow-y-auto"},A={key:0,class:"py-2"},I=["onClick"],K={class:"flex items-center justify-between"},L={class:"flex-1"},$={class:"font-semibold text-gray-900 group-hover:text-blue-600 transition-colors"},z={class:"text-sm text-gray-600 space-y-1 mt-1"},H={class:"flex items-center"},J={class:"flex items-center"},Q={class:"flex items-center"},R={class:"ml-3"},Z={class:"w-6 h-6 rounded-full border-2 border-gray-300 flex items-center justify-center group-hover:border-blue-500 transition-colors"},q={key:0,class:"w-3 h-3 bg-blue-500 rounded-full"},G={key:1,class:"px-4 py-6 text-center"},O={key:2,class:"px-4 py-6 text-center"},P={__name:"UserSearchDropdown",props:{placeholder:{type:String,default:"Cari user..."},selectedUsers:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1}},emits:["user-selected","user-removed"],setup(h,{emit:g}){const n=h,m=g,l=d(""),i=d([]),c=d(!1),p=d(!1),x=d(null),b=()=>{if(clearTimeout(x.value),l.value.length<2){i.value=[];return}p.value=!0,x.value=setTimeout(async()=>{try{const t=await C.get(route("shared-documents.users.search"),{params:{search:l.value}});t.data.success&&(i.value=t.data.data)}catch(t){console.error("Error searching users:",t),i.value=[]}finally{p.value=!1}},300)},_=t=>{if(n.multiple){const s=n.selectedUsers.some(a=>a.id===t.id);m(s?"user-removed":"user-selected",t)}else m("user-selected",t),l.value=t.nama_lengkap,f()},k=t=>n.selectedUsers.some(s=>s.id===t.id),f=()=>{c.value=!1},w=()=>{setTimeout(()=>{f()},200)};return y(()=>n.selectedUsers,()=>{!n.multiple&&n.selectedUsers.length>0&&(l.value=n.selectedUsers[0].nama_lengkap)},{deep:!0}),y(c,t=>{!t&&n.multiple&&(l.value="",i.value=[])}),(t,s)=>(o(),r("div",E,[e("div",F,[U(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>l.value=a),type:"text",placeholder:h.placeholder,class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 bg-white/50 backdrop-blur-sm",onFocus:s[1]||(s[1]=a=>c.value=!0),onInput:b,onKeydown:B(f,["escape"]),onBlur:w},null,40,M),[[T,l.value]]),s[2]||(s[2]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-search text-gray-400"})],-1))]),p.value?(o(),r("div",N,s[3]||(s[3]=[e("div",{class:"spinner-modern"},null,-1)]))):u("",!0),c.value&&(i.value.length>0||l.value.length>0)?(o(),r("div",V,[i.value.length>0?(o(),r("div",A,[(o(!0),r(D,null,S(i.value,a=>(o(),r("div",{key:a.id,onClick:W=>_(a),class:"px-4 py-3 hover:bg-blue-50 cursor-pointer transition-all duration-200 group"},[e("div",K,[e("div",L,[e("div",$,v(a.nama_lengkap),1),e("div",z,[e("div",H,[s[4]||(s[4]=e("i",{class:"fas fa-envelope w-4 text-gray-400 mr-2"},null,-1)),e("span",null,v(a.email),1)]),e("div",J,[s[5]||(s[5]=e("i",{class:"fas fa-building w-4 text-gray-400 mr-2"},null,-1)),e("span",null,v(a.divisi||"Tidak ada divisi"),1)]),e("div",Q,[s[6]||(s[6]=e("i",{class:"fas fa-user-tie w-4 text-gray-400 mr-2"},null,-1)),e("span",null,v(a.jabatan||"Tidak ada jabatan"),1)])])]),e("div",R,[e("div",Z,[k(a)?(o(),r("div",q)):u("",!0)])])])],8,I))),128))])):l.value.length>0&&!p.value?(o(),r("div",G,s[7]||(s[7]=[e("div",{class:"text-gray-500"},[e("i",{class:"fas fa-search text-2xl mb-2"}),e("p",null,"Tidak ada user ditemukan"),e("p",{class:"text-sm"},"Coba kata kunci lain")],-1)]))):u("",!0),l.value.length===0?(o(),r("div",O,s[8]||(s[8]=[e("div",{class:"text-gray-500"},[e("i",{class:"fas fa-users text-2xl mb-2"}),e("p",null,"Mulai mengetik untuk mencari user"),e("p",{class:"text-sm"},"Cari berdasarkan nama, email, divisi, atau jabatan")],-1)]))):u("",!0)])):u("",!0)]))}},se=j(P,[["__scopeId","data-v-e3568e60"]]);export{se as U};
