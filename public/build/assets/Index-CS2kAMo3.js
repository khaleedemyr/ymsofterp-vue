import{r as f,w as I,W as x,A as N,B as r,C as U,D as e,G as i,H as y,L as d,F as D,M as A,N as o,I as b,E as S}from"./vendor-vue-g7iCcTkf.js";import{S as v}from"./app-DIuSMidk.js";import{A as L}from"./AppLayout-BfEUsI4L.js";import{a as V}from"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CG_QM0dl.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const z={class:"max-w-7xl w-full mx-auto py-8 px-2"},F={class:"bg-white rounded-xl shadow-lg p-4 mb-6"},O={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},R=["value"],W={class:"bg-white rounded-xl shadow-lg overflow-hidden"},E={class:"overflow-x-auto"},G={class:"min-w-full divide-y divide-gray-200"},H={class:"bg-white divide-y divide-gray-200"},q={key:0},X={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},K={class:"px-6 py-4 whitespace-nowrap"},Y={class:"text-sm font-medium text-blue-600"},J={class:"text-xs text-gray-500"},Q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Z={class:"px-6 py-4 whitespace-nowrap"},ee={class:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium"},te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},se={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ae={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},oe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ne={class:"flex items-center gap-2"},le=["href"],re=["onClick"],ie={key:0,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},de={class:"flex items-center justify-between"},ue={class:"flex-1 flex justify-between sm:hidden"},ce=["disabled"],me=["disabled"],pe={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},xe={class:"text-sm text-gray-700"},ge={class:"font-medium"},fe={class:"font-medium"},ye={class:"font-medium"},be={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},ve=["disabled"],we={class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},he=["disabled"],je={__name:"Index",props:{documents:Object,assets:Array,filters:Object},setup(a){var w,h,k;const g=a,u=f(((w=g.filters)==null?void 0:w.asset_id)||""),c=f(((h=g.filters)==null?void 0:h.document_type)||""),m=f(((k=g.filters)==null?void 0:k.per_page)||15);function p(n){if(n){const t=new URL(n);t.searchParams.set("asset_id",u.value),t.searchParams.set("document_type",c.value),t.searchParams.set("per_page",m.value),x.visit(t.toString(),{preserveState:!0,replace:!0})}}function P(){x.visit("/asset-management/documents/create")}async function $(n){var s;if((await v.fire({title:"Apakah Anda yakin?",text:`Document "${n.document_name}" akan dihapus`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"})).isConfirmed)try{const l=await V.delete(`/asset-management/documents/${n.id}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});((s=l.data)!=null&&s.success||l.status===200)&&(v.fire("Berhasil","Document berhasil dihapus","success"),j())}catch{v.fire("Error","Gagal menghapus document","error")}}function M(n){if(!n)return"-";const t=["B","KB","MB","GB"];let s=n,l=0;for(;s>=1024&&l<t.length-1;)s/=1024,l++;return`${s.toFixed(2)} ${t[l]}`}function T(n){return n?new Date(n).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function j(){x.reload({preserveState:!0,replace:!0})}return I([u,c,m],()=>{x.get("/asset-management/documents",{asset_id:u.value,document_type:c.value,per_page:m.value},{preserveState:!0,replace:!0})}),(n,t)=>(r(),N(L,null,{default:U(()=>[e("div",z,[e("div",{class:"flex justify-between items-center mb-6"},[t[8]||(t[8]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-file text-blue-500"}),i(" Asset Documents ")],-1)),e("button",{onClick:P,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2"},t[7]||(t[7]=[e("i",{class:"fa-solid fa-plus"},null,-1),i(" Upload Document ")]))]),e("div",F,[e("div",O,[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Asset",-1)),y(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[t[9]||(t[9]=e("option",{value:""},"Semua Asset",-1)),(r(!0),d(D,null,A(a.assets,s=>(r(),d("option",{key:s.id,value:s.id},o(s.asset_code)+" - "+o(s.name),9,R))),128))],512),[[b,u.value]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Document Type",-1)),y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>c.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[11]||(t[11]=[e("option",{value:""},"Semua Tipe",-1),e("option",{value:"Invoice"},"Invoice",-1),e("option",{value:"Warranty"},"Warranty",-1),e("option",{value:"Manual"},"Manual",-1),e("option",{value:"Maintenance Record"},"Maintenance Record",-1),e("option",{value:"Other"},"Other",-1)]),512),[[b,c.value]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Per Page",-1)),y(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>m.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[13]||(t[13]=[e("option",{value:"10"},"10",-1),e("option",{value:"15"},"15",-1),e("option",{value:"25"},"25",-1),e("option",{value:"50"},"50",-1)]),512),[[b,m.value]])])])]),e("div",W,[e("div",E,[e("table",G,[t[18]||(t[18]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Asset"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Document Name"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"File Size"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Uploaded By"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Uploaded At"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",H,[a.documents.data&&a.documents.data.length===0?(r(),d("tr",q,t[15]||(t[15]=[e("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"}," Tidak ada data ",-1)]))):S("",!0),(r(!0),d(D,null,A(a.documents.data,(s,l)=>{var _,B,C;return r(),d("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",X,o((a.documents.current_page-1)*a.documents.per_page+l+1),1),e("td",K,[e("div",null,[e("p",Y,o((_=s.asset)==null?void 0:_.asset_code),1),e("p",J,o((B=s.asset)==null?void 0:B.name),1)])]),e("td",Q,o(s.document_name),1),e("td",Z,[e("span",ee,o(s.document_type),1)]),e("td",te,o(M(s.file_size)),1),e("td",se,o(((C=s.uploader)==null?void 0:C.name)||"-"),1),e("td",ae,o(T(s.created_at)),1),e("td",oe,[e("div",ne,[e("a",{href:`/asset-management/documents/${s.id}/download`,class:"text-blue-600 hover:text-blue-900",title:"Download"},t[16]||(t[16]=[e("i",{class:"fa-solid fa-download"},null,-1)]),8,le),e("button",{onClick:ke=>$(s),class:"text-red-600 hover:text-red-900",title:"Hapus"},t[17]||(t[17]=[e("i",{class:"fa-solid fa-trash"},null,-1)]),8,re)])])])}),128))])])]),a.documents.last_page>1?(r(),d("div",ie,[e("div",de,[e("div",ue,[e("button",{onClick:t[3]||(t[3]=s=>p(a.documents.prev_page_url)),disabled:!a.documents.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,ce),e("button",{onClick:t[4]||(t[4]=s=>p(a.documents.next_page_url)),disabled:!a.documents.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,me)]),e("div",pe,[e("div",null,[e("p",xe,[t[19]||(t[19]=i(" Menampilkan ")),e("span",ge,o(a.documents.from),1),t[20]||(t[20]=i(" sampai ")),e("span",fe,o(a.documents.to),1),t[21]||(t[21]=i(" dari ")),e("span",ye,o(a.documents.total),1),t[22]||(t[22]=i(" hasil "))])]),e("div",null,[e("nav",be,[e("button",{onClick:t[5]||(t[5]=s=>p(a.documents.prev_page_url)),disabled:!a.documents.prev_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[23]||(t[23]=[e("i",{class:"fa-solid fa-chevron-left"},null,-1)]),8,ve),e("span",we," Page "+o(a.documents.current_page)+" of "+o(a.documents.last_page),1),e("button",{onClick:t[6]||(t[6]=s=>p(a.documents.next_page_url)),disabled:!a.documents.next_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[24]||(t[24]=[e("i",{class:"fa-solid fa-chevron-right"},null,-1)]),8,he)])])])])])):S("",!0)])])]),_:1}))}};export{je as default};
