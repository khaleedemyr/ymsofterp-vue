import{r as i,w as g,A as U,B as a,C as h,D as s,G as A,H as u,L as o,F as x,M as c,N as d,I as y,J as B,W as C}from"./vendor-vue-g7iCcTkf.js";import{A as I}from"./AppLayout-Cbd4awZb.js";import{S}from"./app-BGYKUG_N.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-BnNxTHIx.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const P={class:"w-full max-w-xl mx-auto py-8"},q={class:"bg-white rounded-2xl shadow-2xl p-8"},L={class:"mb-4"},M=["value"],T={class:"mb-4"},D=["value"],F={class:"mb-4"},G={class:"mb-4"},N=["value"],Q={class:"mb-4"},R=["value"],W={class:"mb-4"},j=["disabled"],E={key:0},J={key:1},tl={__name:"Form",props:{items:Array,units:Array,user:Object},setup(H){const n=H,r=i(""),m=i(""),k=i(""),p=i(""),v=i(""),w=i(""),f=i(!1);g(()=>r.value,t=>{var e;const l=n.items.find(b=>b.id==t);l&&(m.value=((e=l.unit)==null?void 0:e.id)||"")}),g(()=>p.value,t=>{var e;const l=n.items.find(b=>b.id==t);l&&(v.value=((e=l.unit)==null?void 0:e.id)||"")});const _=t=>{const l=[];return t!=null&&t.unit&&l.push(t.unit),t!=null&&t.medium_unit&&l.push(t.medium_unit),t!=null&&t.large_unit&&l.push(t.large_unit),l},V=async()=>{var t,l;f.value=!0;try{const e=await C.post("/repack",{item_asal_id:r.value,unit_asal_id:m.value,qty_asal:k.value,item_hasil_id:p.value,unit_hasil_id:v.value,qty_hasil:w.value});S.fire({icon:"success",title:"Berhasil",text:"Repack berhasil disimpan!",showCancelButton:!0,confirmButtonText:"Print Barcode",cancelButtonText:"Kembali ke List"}).then(b=>{b.isConfirmed?window.location.href=`/repack/${e.data.repack.id}/print-barcodes`:window.location.href="/repack"})}catch(e){S.fire({icon:"error",title:"Gagal",text:((l=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:l.message)||"Gagal simpan repack."})}finally{f.value=!1}};return(t,l)=>(a(),U(I,null,{default:h(()=>[s("div",P,[l[17]||(l[17]=s("h1",{class:"text-2xl font-bold mb-6 flex items-center gap-2"},[s("i",{class:"fa-solid fa-box-open text-blue-500"}),A(" Buat Repack ")],-1)),s("div",q,[s("div",L,[l[7]||(l[7]=s("label",{class:"block mb-1 font-semibold"},"Item Asal",-1)),u(s("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),class:"w-full px-4 py-2 rounded-xl border border-blue-200"},[l[6]||(l[6]=s("option",{value:""},"Pilih Item Asal",-1)),(a(!0),o(x,null,c(n.items,e=>(a(),o("option",{key:e.id,value:e.id},d(e.name)+d(e.unit?" ("+e.unit.name+")":""),9,M))),128))],512),[[y,r.value]])]),s("div",T,[l[9]||(l[9]=s("label",{class:"block mb-1 font-semibold"},"Satuan Asal",-1)),u(s("select",{"onUpdate:modelValue":l[1]||(l[1]=e=>m.value=e),class:"w-full px-4 py-2 rounded-xl border border-blue-200"},[l[8]||(l[8]=s("option",{value:""},"Pilih Satuan",-1)),(a(!0),o(x,null,c(_(n.items.find(e=>e.id==r.value)),e=>(a(),o("option",{key:e.id,value:e.id},d(e.name),9,D))),128))],512),[[y,m.value]])]),s("div",F,[l[10]||(l[10]=s("label",{class:"block mb-1 font-semibold"},"Qty Asal",-1)),u(s("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>k.value=e),type:"number",min:"0",class:"w-full px-4 py-2 rounded-xl border border-blue-200"},null,512),[[B,k.value]])]),s("div",G,[l[12]||(l[12]=s("label",{class:"block mb-1 font-semibold"},"Item Hasil",-1)),u(s("select",{"onUpdate:modelValue":l[3]||(l[3]=e=>p.value=e),class:"w-full px-4 py-2 rounded-xl border border-blue-200"},[l[11]||(l[11]=s("option",{value:""},"Pilih Item Hasil",-1)),(a(!0),o(x,null,c(n.items,e=>(a(),o("option",{key:e.id,value:e.id},d(e.name)+d(e.unit?" ("+e.unit.name+")":""),9,N))),128))],512),[[y,p.value]])]),s("div",Q,[l[14]||(l[14]=s("label",{class:"block mb-1 font-semibold"},"Satuan Hasil",-1)),u(s("select",{"onUpdate:modelValue":l[4]||(l[4]=e=>v.value=e),class:"w-full px-4 py-2 rounded-xl border border-blue-200"},[l[13]||(l[13]=s("option",{value:""},"Pilih Satuan",-1)),(a(!0),o(x,null,c(_(n.items.find(e=>e.id==p.value)),e=>(a(),o("option",{key:e.id,value:e.id},d(e.name),9,R))),128))],512),[[y,v.value]])]),s("div",W,[l[15]||(l[15]=s("label",{class:"block mb-1 font-semibold"},"Qty Hasil",-1)),u(s("input",{"onUpdate:modelValue":l[5]||(l[5]=e=>w.value=e),type:"number",min:"0",class:"w-full px-4 py-2 rounded-xl border border-blue-200"},null,512),[[B,w.value]])]),s("button",{disabled:f.value,onClick:V,class:"w-full bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg font-semibold mt-4 disabled:opacity-50"},[f.value?(a(),o("span",E,l[16]||(l[16]=[s("i",{class:"fa fa-spinner fa-spin"},null,-1),A(" Menyimpan...")]))):(a(),o("span",J,"Simpan"))],8,j)])])]),_:1}))}};export{tl as default};
