import{r as h,a as z,W as B,w as G,L as u,B as c,x as p,Q as y,U as I,C as w,D as t,S as k,H as S,G as v,J as D,E as C,F as O,M as F,N as i,l as _}from"./vendor-vue-g7iCcTkf.js";import{A as U}from"./AppLayout-U5X72hCR.js";import{_ as E}from"./Pagination-DElM3wPU.js";import{d as M}from"./debounce-DFlfn0vu.js";import{S as x}from"./app-CMkuePvF.js";import{a as R}from"./vendor-utils-CpgP2uT4.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DCdSPjRr.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const K={class:"w-full py-8 px-4 md:px-6"},Q={class:"mb-8"},Y={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6"},q={class:"flex gap-3"},P={class:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6"},X={class:"flex flex-col md:flex-row md:items-end gap-4"},Z={class:"flex-1"},j={class:"flex-1"},tt={class:"flex-1"},et={class:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden"},at={class:"overflow-x-auto"},ot={class:"min-w-full divide-y divide-gray-200"},st={class:"bg-white divide-y divide-gray-200"},rt={key:0,class:"hover:bg-gray-50"},lt={class:"px-6 py-4 whitespace-nowrap"},nt={class:"flex items-center"},it={class:"font-mono font-bold text-blue-700"},dt={class:"px-6 py-4 whitespace-nowrap"},ut={class:"text-sm font-medium text-gray-900"},ct={class:"px-6 py-4 whitespace-nowrap"},pt={class:"text-sm text-gray-900"},ft={class:"px-6 py-4 whitespace-nowrap"},gt={class:"text-sm text-gray-600"},xt={class:"px-6 py-4 whitespace-nowrap"},bt={class:"px-6 py-4 whitespace-nowrap"},mt={class:"text-sm text-gray-900"},ht={class:"px-6 py-4 whitespace-nowrap"},yt={class:"px-6 py-4 whitespace-nowrap"},wt={class:"flex items-center justify-center gap-2"},vt=["onClick","disabled","title"],_t={key:0,class:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap"},kt={class:"mt-6"},St={__name:"Index",props:{adjustments:Object,filters:Object,user_outlet_id:[String,Number],auth:Object},setup(b){const s=b,m=h(s.filters.search||""),l=h({from:s.filters.from||"",to:s.filters.to||""}),T=h("");z(()=>{s.user_outlet_id&&String(s.user_outlet_id)!=="1"&&(T.value=String(s.user_outlet_id))});const V=M(()=>{B.get(route("outlet-food-inventory-adjustment.index"),{search:m.value,from:l.value.from,to:l.value.to},{preserveState:!0,replace:!0})},400);G([m,l],()=>{V()});const N=o=>{if(!o)return"-";const e=new Date(o);return isNaN(e)?"-":e.toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"})},$=o=>{switch(o){case"waiting_approval":return"bg-gradient-to-r from-yellow-100 to-yellow-50 text-yellow-800 border border-yellow-200";case"waiting_cost_control":return"bg-gradient-to-r from-blue-100 to-blue-50 text-blue-800 border border-blue-200";case"approved":return"bg-gradient-to-r from-green-100 to-green-50 text-green-800 border border-green-200";case"rejected":return"bg-gradient-to-r from-red-100 to-red-50 text-red-800 border border-red-200";default:return"bg-gradient-to-r from-gray-100 to-gray-50 text-gray-800 border border-gray-200"}},L=o=>{switch(o){case"waiting_approval":return"Waiting Approval";case"waiting_cost_control":return"Waiting Cost Control";case"approved":return"Approved";case"rejected":return"Rejected";default:return o}},A=h(!1);function f(o){var d,g;if(s.canDelete!==void 0&&s.canDelete!==null)return["waiting_approval","waiting_cost_control","approved"].includes(o.status)&&s.canDelete;const a=["waiting_approval","waiting_cost_control"].includes(o.status),n=o.status==="approved",r=((g=(d=s.auth)==null?void 0:d.user)==null?void 0:g.id_role)==="5af56935b011a";return n?r:a}function W(o){return o.status==="approved"?"Hanya bisa dihapus oleh superadmin atau user warehouse division":"Hanya bisa dihapus jika status waiting_approval atau waiting_cost_control"}function H(o){var n;const e=s.adjustments.data.find(r=>r.id===o),a=(e==null?void 0:e.status)==="approved"?"Approved (Hanya bisa dihapus oleh user dengan role khusus)":(e==null?void 0:e.status)==="waiting_approval"?"Waiting Approval":"Waiting Cost Control";x.fire({title:"Hapus Outlet Stock Adjustment?",html:`
      <div class="text-left">
        <p class="mb-2"><strong>Number:</strong> ${(e==null?void 0:e.number)||"N/A"}</p>
        <p class="mb-2"><strong>Date:</strong> ${e!=null&&e.date?N(e.date):"N/A"}</p>
        <p class="mb-2"><strong>Outlet:</strong> ${((n=e==null?void 0:e.outlet)==null?void 0:n.nama_outlet)||"N/A"}</p>
        <p class="mb-2"><strong>Status:</strong> ${a}</p>
        <p class="text-red-600 font-semibold">Tindakan ini tidak dapat dibatalkan!</p>
        ${(e==null?void 0:e.status)==="approved"?'<p class="text-red-600 font-semibold">Data approved akan di-rollback dari inventory.</p>':""}
      </div>
    `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal",reverseButtons:!0,showLoaderOnConfirm:!0,preConfirm:()=>(A.value=!0,R.delete(`/outlet-food-inventory-adjustment/${o}`).then(r=>{r.data.success?(x.fire("Deleted!","Data berhasil dihapus dan inventory di-rollback.","success"),B.reload()):x.fire("Gagal",r.data.message||"Gagal menghapus data","error")}).catch(r=>{var d,g;x.fire("Gagal",((g=(d=r.response)==null?void 0:d.data)==null?void 0:g.message)||"Gagal menghapus data","error")}).finally(()=>{A.value=!1})),allowOutsideClick:()=>!x.isLoading()})}return(o,e)=>(c(),u(O,null,[p(y(I),{title:"Outlet Stock Adjustment"}),p(U,null,{default:w(()=>[t("div",K,[t("div",Q,[t("div",Y,[e[5]||(e[5]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900 flex items-center gap-3"},[t("div",{class:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg"},[t("i",{class:"fa-solid fa-store text-white text-xl"})]),t("span",null,"Outlet Stock Adjustment")]),t("p",{class:"text-gray-600 mt-2 ml-14"},"Kelola penyesuaian stok outlet dengan mudah")],-1)),t("div",q,[p(y(k),{href:o.route("outlet-food-inventory-adjustment.report-universal"),class:"group relative px-6 py-3 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 font-semibold flex items-center gap-2 overflow-hidden"},{default:w(()=>e[3]||(e[3]=[t("span",{class:"absolute inset-0 bg-gradient-to-r from-emerald-600 to-emerald-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1),t("i",{class:"fa fa-chart-bar relative z-10"},null,-1),t("span",{class:"relative z-10"},"Report",-1)])),_:1},8,["href"]),p(y(k),{href:o.route("outlet-food-inventory-adjustment.create"),class:"group relative px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 font-semibold flex items-center gap-2 overflow-hidden"},{default:w(()=>e[4]||(e[4]=[t("span",{class:"absolute inset-0 bg-gradient-to-r from-blue-600 to-blue-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1),t("i",{class:"fa fa-plus relative z-10"},null,-1),t("span",{class:"relative z-10"},"Create New",-1)])),_:1},8,["href"])])]),t("div",P,[t("div",X,[t("div",Z,[e[6]||(e[6]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa fa-search text-gray-400 mr-2"}),v("Search ")],-1)),S(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>m.value=a),type:"text",placeholder:"Search by number, outlet, or item...",class:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 shadow-sm hover:shadow-md"},null,512),[[D,m.value]])]),t("div",j,[e[7]||(e[7]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa fa-calendar text-gray-400 mr-2"}),v("From Date ")],-1)),S(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=a=>l.value.from=a),class:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 shadow-sm hover:shadow-md"},null,512),[[D,l.value.from]])]),t("div",tt,[e[8]||(e[8]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa fa-calendar text-gray-400 mr-2"}),v("To Date ")],-1)),S(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=a=>l.value.to=a),class:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 shadow-sm hover:shadow-md"},null,512),[[D,l.value.to]])])])])]),t("div",et,[t("div",at,[t("table",ot,[e[13]||(e[13]=t("thead",{class:"bg-gradient-to-r from-gray-50 to-gray-100"},[t("tr",null,[t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Number"),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Date"),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Outlet"),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Warehouse"),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Type"),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Created By"),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Status"),t("th",{class:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",st,[b.adjustments.data.length===0?(c(),u("tr",rt,e[9]||(e[9]=[t("td",{colspan:"8",class:"px-6 py-16 text-center"},[t("div",{class:"flex flex-col items-center justify-center"},[t("div",{class:"p-4 bg-gray-100 rounded-full mb-4"},[t("i",{class:"fa fa-inbox text-4xl text-gray-400"})]),t("p",{class:"text-gray-500 text-lg font-medium"},"No outlet stock adjustment data found"),t("p",{class:"text-gray-400 text-sm mt-2"},"Try adjusting your search or filters")])],-1)]))):C("",!0),(c(!0),u(O,null,F(b.adjustments.data,a=>{var n,r;return c(),u("tr",{key:a.id,class:"hover:bg-gradient-to-r hover:from-blue-50 hover:to-transparent transition-all duration-200 group"},[t("td",lt,[t("div",nt,[e[10]||(e[10]=t("div",{class:"flex-shrink-0 h-10 w-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mr-3 shadow-md"},[t("i",{class:"fa fa-file-alt text-white text-sm"})],-1)),t("span",it,i(a.number),1)])]),t("td",dt,[t("div",ut,i(N(a.date)),1)]),t("td",ct,[t("div",pt,i(((n=a.outlet)==null?void 0:n.nama_outlet)||"-"),1)]),t("td",ft,[t("div",gt,i(a.warehouse_outlet_name||"-"),1)]),t("td",xt,[t("span",{class:_(["px-3 py-1.5 rounded-full text-xs font-bold shadow-sm",a.type==="in"?"bg-gradient-to-r from-green-100 to-green-50 text-green-800 border border-green-200":"bg-gradient-to-r from-red-100 to-red-50 text-red-800 border border-red-200"])},[t("i",{class:_([a.type==="in"?"fa fa-arrow-down":"fa fa-arrow-up","mr-1"])},null,2),v(" "+i(a.type==="in"?"Stock In":"Stock Out"),1)],2)]),t("td",bt,[t("div",mt,i(((r=a.creator)==null?void 0:r.nama_lengkap)||"-"),1)]),t("td",ht,[t("span",{class:_(["px-3 py-1.5 rounded-full text-xs font-bold shadow-sm",$(a.status)])},i(L(a.status)),3)]),t("td",yt,[t("div",wt,[p(y(k),{href:o.route("outlet-food-inventory-adjustment.show",a.id),class:"group relative p-2.5 bg-blue-50 hover:bg-blue-100 text-blue-600 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md",title:"View Details"},{default:w(()=>e[11]||(e[11]=[t("i",{class:"fa fa-eye"},null,-1),t("span",{class:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap"}," View Details ",-1)])),_:2},1032,["href"]),f(a)?(c(),u("button",{key:0,onClick:d=>H(a.id),disabled:!f(a),class:_(["group relative p-2.5 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md",f(a)?"":"opacity-50 cursor-not-allowed"]),title:f(a)?"Delete":W(a)},[e[12]||(e[12]=t("i",{class:"fa fa-trash"},null,-1)),f(a)?(c(),u("span",_t," Delete ")):C("",!0)],10,vt)):C("",!0)])])])}),128))])])])]),t("div",kt,[p(E,{links:b.adjustments.links},null,8,["links"])])])]),_:1})],64))}},It=J(St,[["__scopeId","data-v-d1e9203f"]]);export{It as default};
