import{r as v,W as p,w as X,A as F,B as i,C as G,D as e,G as m,H as b,J as O,L as x,F as I,M as L,N as n,I as k,E as M,l as _}from"./vendor-vue-g7iCcTkf.js";import{l as z}from"./lodash-DB3HVzpp.js";import{S as y}from"./app-DGqVli5-.js";import{A as J}from"./AppLayout-BDukGJW2.js";import{a as N}from"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CnwZ944E.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const Y={class:"max-w-7xl w-full mx-auto py-8 px-2"},K={class:"bg-white rounded-xl shadow-lg p-4 mb-6"},Q={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},Z=["value"],ee={class:"bg-white rounded-xl shadow-lg overflow-hidden"},te={class:"overflow-x-auto"},se={class:"min-w-full divide-y divide-gray-200"},ae={class:"bg-white divide-y divide-gray-200"},le={key:0},ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ie={class:"px-6 py-4 whitespace-nowrap"},re={class:"text-sm font-medium text-blue-600"},oe={class:"text-xs text-gray-500"},de={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},me={class:"px-6 py-4 whitespace-nowrap"},xe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ge={class:"flex items-center gap-2"},fe=["onClick"],ve=["onClick","title"],be=["onClick"],ye={key:0,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},he={class:"flex items-center justify-between"},we={class:"flex-1 flex justify-between sm:hidden"},ke=["disabled"],_e=["disabled"],Se={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Ce={class:"text-sm text-gray-700"},Ae={class:"font-medium"},De={class:"font-medium"},Be={class:"font-medium"},Pe={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Te=["disabled"],$e={class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},je=["disabled"],Xe={__name:"Index",props:{schedules:Object,assets:Array,filters:Object},setup(a){var A,D,B,P,T;const g=a,f=v(((A=g.filters)==null?void 0:A.search)||""),r=v(((D=g.filters)==null?void 0:D.asset_id)||""),o=v(((B=g.filters)==null?void 0:B.maintenance_type)||""),d=v(((P=g.filters)==null?void 0:P.is_active)||"all"),u=v(((T=g.filters)==null?void 0:T.per_page)||15),V=z.debounce(()=>{p.get("/asset-management/maintenance-schedules",{search:f.value,asset_id:r.value,maintenance_type:o.value,is_active:d.value,per_page:u.value},{preserveState:!0,replace:!0})},400);function E(){V()}function h(l){if(l){const t=new URL(l);t.searchParams.set("search",f.value),t.searchParams.set("asset_id",r.value),t.searchParams.set("maintenance_type",o.value),t.searchParams.set("is_active",d.value),t.searchParams.set("per_page",u.value),p.visit(t.toString(),{preserveState:!0,replace:!0})}}function R(){p.visit("/asset-management/maintenance-schedules/create")}function q(l){p.visit(`/asset-management/maintenance-schedules/${l.id}/edit`)}async function U(l){var t;try{(t=(await N.patch(`/asset-management/maintenance-schedules/${l.id}/toggle-status`,{},{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json"}})).data)!=null&&t.success&&(y.fire("Berhasil","Status berhasil diubah","success"),C())}catch{y.fire("Error","Gagal mengubah status","error")}}async function H(l){var s,w;if((await y.fire({title:"Apakah Anda yakin?",text:`Schedule maintenance untuk "${(s=l.asset)==null?void 0:s.name}" akan dihapus`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"})).isConfirmed)try{const c=await N.delete(`/asset-management/maintenance-schedules/${l.id}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});((w=c.data)!=null&&w.success||c.status===200)&&(y.fire("Berhasil","Schedule berhasil dihapus","success"),C())}catch{y.fire("Error","Gagal menghapus schedule","error")}}function S(l){return l?new Date(l).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}function W(l){return l?new Date(l)<=new Date:!1}function C(){p.reload({preserveState:!0,replace:!0})}return X([r,o,d,u],()=>{p.get("/asset-management/maintenance-schedules",{search:f.value,asset_id:r.value,maintenance_type:o.value,is_active:d.value,per_page:u.value},{preserveState:!0,replace:!0})}),(l,t)=>(i(),F(J,null,{default:G(()=>[e("div",Y,[e("div",{class:"flex justify-between items-center mb-6"},[t[10]||(t[10]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-calendar-check text-blue-500"}),m(" Maintenance Schedules ")],-1)),e("button",{onClick:R,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2"},t[9]||(t[9]=[e("i",{class:"fa-solid fa-plus"},null,-1),m(" Tambah Schedule ")]))]),e("div",K,[e("div",Q,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),b(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>f.value=s),onInput:E,placeholder:"Cari asset...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,544),[[O,f.value]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Asset",-1)),b(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[t[12]||(t[12]=e("option",{value:""},"Semua Asset",-1)),(i(!0),x(I,null,L(a.assets,s=>(i(),x("option",{key:s.id,value:s.id},n(s.asset_code)+" - "+n(s.name),9,Z))),128))],512),[[k,r.value]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Maintenance Type",-1)),b(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[14]||(t[14]=[e("option",{value:""},"Semua Tipe",-1),e("option",{value:"Cleaning"},"Cleaning",-1),e("option",{value:"Service"},"Service",-1),e("option",{value:"Repair"},"Repair",-1),e("option",{value:"Inspection"},"Inspection",-1)]),512),[[k,o.value]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>d.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[16]||(t[16]=[e("option",{value:"all"},"Semua Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[k,d.value]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Per Page",-1)),b(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>u.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[18]||(t[18]=[e("option",{value:"10"},"10",-1),e("option",{value:"15"},"15",-1),e("option",{value:"25"},"25",-1),e("option",{value:"50"},"50",-1)]),512),[[k,u.value]])])])]),e("div",ee,[e("div",te,[e("table",se,[t[23]||(t[23]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Asset"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Frequency"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Next Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Last Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",ae,[a.schedules.data&&a.schedules.data.length===0?(i(),x("tr",le,t[20]||(t[20]=[e("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"}," Tidak ada data ",-1)]))):M("",!0),(i(!0),x(I,null,L(a.schedules.data,(s,w)=>{var c,$;return i(),x("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",ne,n((a.schedules.current_page-1)*a.schedules.per_page+w+1),1),e("td",ie,[e("div",null,[e("p",re,n((c=s.asset)==null?void 0:c.asset_code),1),e("p",oe,n(($=s.asset)==null?void 0:$.name),1)])]),e("td",de,n(s.maintenance_type),1),e("td",ue,n(s.frequency),1),e("td",ce,[e("span",{class:_(W(s.next_maintenance_date)?"text-red-600 font-semibold":"")},n(S(s.next_maintenance_date)),3)]),e("td",pe,n(S(s.last_maintenance_date)),1),e("td",me,[e("span",{class:_([s.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800","px-2 py-1 rounded-full text-xs font-medium"])},n(s.is_active?"Active":"Inactive"),3)]),e("td",xe,[e("div",ge,[e("button",{onClick:j=>q(s),class:"text-blue-600 hover:text-blue-900",title:"Edit"},t[21]||(t[21]=[e("i",{class:"fa-solid fa-edit"},null,-1)]),8,fe),e("button",{onClick:j=>U(s),class:_(s.is_active?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900"),title:s.is_active?"Nonaktifkan":"Aktifkan"},[e("i",{class:_(s.is_active?"fa-solid fa-toggle-on":"fa-solid fa-toggle-off")},null,2)],10,ve),e("button",{onClick:j=>H(s),class:"text-red-600 hover:text-red-900",title:"Hapus"},t[22]||(t[22]=[e("i",{class:"fa-solid fa-trash"},null,-1)]),8,be)])])])}),128))])])]),a.schedules.last_page>1?(i(),x("div",ye,[e("div",he,[e("div",we,[e("button",{onClick:t[5]||(t[5]=s=>h(a.schedules.prev_page_url)),disabled:!a.schedules.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,ke),e("button",{onClick:t[6]||(t[6]=s=>h(a.schedules.next_page_url)),disabled:!a.schedules.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,_e)]),e("div",Se,[e("div",null,[e("p",Ce,[t[24]||(t[24]=m(" Menampilkan ")),e("span",Ae,n(a.schedules.from),1),t[25]||(t[25]=m(" sampai ")),e("span",De,n(a.schedules.to),1),t[26]||(t[26]=m(" dari ")),e("span",Be,n(a.schedules.total),1),t[27]||(t[27]=m(" hasil "))])]),e("div",null,[e("nav",Pe,[e("button",{onClick:t[7]||(t[7]=s=>h(a.schedules.prev_page_url)),disabled:!a.schedules.prev_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[28]||(t[28]=[e("i",{class:"fa-solid fa-chevron-left"},null,-1)]),8,Te),e("span",$e," Page "+n(a.schedules.current_page)+" of "+n(a.schedules.last_page),1),e("button",{onClick:t[8]||(t[8]=s=>h(a.schedules.next_page_url)),disabled:!a.schedules.next_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[29]||(t[29]=[e("i",{class:"fa-solid fa-chevron-right"},null,-1)]),8,je)])])])])])):M("",!0)])])]),_:1}))}};export{Xe as default};
