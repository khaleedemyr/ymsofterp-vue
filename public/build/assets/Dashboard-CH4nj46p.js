import{r as m,c as w,a as at,a8 as ot,A as de,B as o,C as lt,x as rt,D as e,L as r,E as v,Q as nt,U as it,G as i,H as C,J as q,N as a,l as N,F as S,M as D,Y as te,O as Be,I as se,W as dt}from"./vendor-vue-g7iCcTkf.js";import{A as ut}from"./AppLayout-BKllqouQ.js";import{a as L}from"./vendor-utils-CpgP2uT4.js";import{m as mt}from"./vendor-charts-CuqD4wLC.js";import{_ as xt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-DlrnVByK.js";import"./ProfileUpdateModal-10Z7fBeb.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const pt={class:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50"},gt={class:"sticky top-0 z-50 backdrop-blur-xl bg-white/80 border-b border-white/20 shadow-lg"},ct={class:"w-full px-4 sm:px-6 lg:px-8 py-4"},vt={class:"flex items-center justify-between"},bt={class:"flex items-center gap-4"},yt={class:"flex items-center gap-2 bg-white/60 backdrop-blur-sm rounded-xl px-4 py-2 shadow-md"},ft=["disabled"],_t={key:0,class:"fa fa-spinner fa-spin mr-2"},ht={key:1,class:"fa-solid fa-sync-alt mr-2"},wt={class:"w-full px-4 sm:px-6 lg:px-8 py-8"},kt={key:0,class:"flex items-center justify-center min-h-screen"},Ct={key:1,class:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg mb-6"},At={class:"flex"},Mt={class:"text-red-700"},Rt={key:2,class:"space-y-6"},jt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},St={class:"group relative overflow-hidden bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300"},Dt={class:"relative z-10"},Pt={class:"flex items-center justify-between mb-4"},Ft={class:"text-right"},Ot={class:"text-2xl font-bold"},Tt={class:"flex items-center text-sm opacity-90"},It={class:"group relative overflow-hidden bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300"},Nt={class:"relative z-10"},Lt={class:"flex items-center justify-between mb-4"},Vt={class:"text-right"},Et={class:"text-2xl font-bold"},Bt={class:"flex items-center text-sm opacity-90"},Ut={class:"group relative overflow-hidden bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300"},qt={class:"relative z-10"},zt={class:"flex items-center justify-between mb-4"},$t={class:"text-right"},Qt={class:"text-2xl font-bold"},Ht={class:"flex items-center text-sm opacity-90"},Wt={class:"group relative overflow-hidden bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300"},Gt={class:"relative z-10"},Kt={class:"flex items-center justify-between mb-4"},Jt={class:"text-right"},Yt={class:"text-2xl font-bold"},Xt={class:"flex items-center text-sm opacity-90"},Zt={class:"grid grid-cols-1 gap-6"},es={class:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20"},ts={class:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20"},ss={class:"grid grid-cols-1 gap-6"},as={class:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20"},os={class:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20"},ls={class:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl p-8 shadow-2xl text-white"},rs={class:"flex items-center justify-between mb-6"},ns=["disabled"],is={key:0,class:"fa fa-spinner fa-spin mr-2"},ds={key:1,class:"fa-solid fa-magic mr-2"},us={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ms={class:"flex items-start justify-between mb-4"},xs={class:"flex-1"},ps={class:"flex items-center gap-2 mb-2"},gs={class:"px-3 py-1 bg-white/20 rounded-full text-xs"},cs={class:"text-lg font-bold mb-2"},vs={class:"text-sm text-indigo-100 mb-4"},bs={class:"space-y-2"},ys={class:"space-y-1"},fs={class:"mt-4 pt-4 border-t border-white/20"},_s={class:"flex items-center justify-between text-xs"},hs={class:"text-indigo-200"},ws={class:"font-semibold text-green-300"},ks={key:1,class:"text-center py-8"},Cs={class:"space-y-6"},As={class:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20"},Ms={key:0,class:"space-y-3"},Rs={class:"flex items-start gap-3"},js={class:"flex-1"},Ss={class:"font-semibold text-gray-800 mb-1"},Ds={class:"text-sm text-gray-600"},Ps={key:1,class:"text-center py-8 text-gray-400"},Fs={class:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20"},Os={key:0,class:"space-y-4"},Ts={class:"grid grid-cols-3 gap-4 mb-4"},Is={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4"},Ns={class:"text-2xl font-bold text-purple-600"},Ls={class:"text-xs text-gray-500 mt-1"},Vs={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4"},Es={class:"text-2xl font-bold text-green-600"},Bs={class:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4"},Us={class:"text-2xl font-bold text-orange-600"},qs={class:"text-xs text-gray-500 mt-1"},zs={key:0,class:"bg-indigo-50 rounded-xl p-3 mb-4 border border-indigo-200"},$s={class:"flex items-center justify-between"},Qs={class:"text-lg font-bold text-indigo-600"},Hs={class:"bg-gray-50 rounded-xl p-4 mb-4"},Ws={class:"space-y-2"},Gs={class:"flex items-center justify-between"},Ks={class:"font-semibold text-purple-600"},Js={class:"flex items-center justify-between"},Ys={class:"font-semibold text-gray-600"},Xs={class:"flex items-center justify-between pt-2 border-t border-gray-200"},Zs={class:"text-right"},ea={class:"text-xs text-purple-600"},ta={class:"text-xs text-gray-600"},sa={key:1,class:"bg-blue-50 rounded-xl p-4"},aa={class:"space-y-2"},oa={class:"text-sm text-gray-600 capitalize"},la={class:"text-right"},ra={class:"font-semibold text-blue-600"},na={class:"text-xs text-gray-500 ml-2"},ia={class:"mt-4 space-y-4"},da={key:0},ua={class:"space-y-2"},ma=["onClick"],xa={class:"flex items-center gap-3 flex-1 min-w-0"},pa={class:"flex-shrink-0 w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center text-white font-bold text-xs"},ga={class:"flex-1 min-w-0"},ca={class:"text-sm font-bold text-gray-800 truncate"},va={class:"text-xs text-gray-600 mt-0.5"},ba={class:"text-right ml-3 flex-shrink-0"},ya={class:"text-sm font-bold text-purple-600"},fa={class:"text-sm font-bold text-green-600"},_a={key:1},ha={class:"space-y-2"},wa=["onClick"],ka={class:"flex items-center gap-3 flex-1 min-w-0"},Ca={class:"flex-shrink-0 w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center text-white font-bold text-xs"},Aa={class:"flex-1 min-w-0"},Ma={class:"text-sm font-bold text-gray-800"},Ra={class:"text-xs text-gray-600 mt-0.5"},ja={class:"text-right ml-3 flex-shrink-0"},Sa={class:"text-sm font-bold text-orange-600"},Da={key:1,class:"text-center py-8 text-gray-500"},Pa={class:"space-y-6"},Fa={class:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20"},Oa={key:0,class:"space-y-4"},Ta={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Ia={class:"bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-xl p-4"},Na={class:"text-2xl font-bold text-indigo-600"},La={class:"text-xs text-gray-500 mt-1"},Va={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4"},Ea={class:"text-2xl font-bold text-purple-600"},Ba={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4"},Ua={class:"text-2xl font-bold text-green-600"},qa={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4"},za={class:"text-2xl font-bold text-blue-600"},$a={class:"bg-gray-50 rounded-xl p-4"},Qa={class:"flex items-center justify-between"},Ha={class:"text-center"},Wa={class:"text-sm font-bold text-gray-700"},Ga={class:"text-center"},Ka={class:"text-sm font-bold text-gray-700"},Ja={key:1,class:"text-center py-8 text-gray-500"},Ya={key:2,class:"text-center py-8 text-gray-500"},Xa={class:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20"},Za={key:0,class:"space-y-4"},eo={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},to={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4"},so={class:"text-3xl font-bold text-green-600"},ao={class:"text-xs text-gray-500 mt-1"},oo={class:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-4"},lo={class:"text-3xl font-bold text-red-600"},ro={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4"},no={class:"text-3xl font-bold text-blue-600"},io={key:0,class:"bg-gray-50 rounded-xl p-4"},uo={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},mo={class:"bg-white rounded-lg p-3 border border-gray-200"},xo={class:"text-lg font-bold text-gray-700"},po={class:"bg-white rounded-lg p-3 border border-gray-200"},go={class:"text-lg font-bold text-blue-600"},co={class:"bg-white rounded-lg p-3 border border-gray-200"},vo={class:"text-lg font-bold text-green-600"},bo={class:"bg-white rounded-lg p-3 border border-gray-200"},yo={class:"text-lg font-bold text-purple-600"},fo={key:1,class:"text-center py-8 text-gray-500"},_o={key:2,class:"text-center py-8 text-gray-500"},ho={class:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20"},wo={key:0,class:"space-y-4"},ko={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Co={class:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4"},Ao={class:"text-2xl font-bold text-orange-600"},Mo={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4"},Ro={class:"text-2xl font-bold text-blue-600"},jo={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4"},So={class:"text-2xl font-bold text-green-600"},Do={class:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-4"},Po={class:"text-2xl font-bold text-red-600"},Fo={key:0,class:"bg-gray-50 rounded-xl p-4"},Oo={class:"space-y-2"},To={class:"flex items-center justify-between"},Io={class:"flex items-center gap-2 flex-1 mx-4"},No={class:"flex-1 h-3 bg-gray-200 rounded-full overflow-hidden"},Lo={class:"text-sm font-semibold text-gray-700 w-12 text-right"},Vo={class:"flex items-center justify-between"},Eo={class:"flex items-center gap-2 flex-1 mx-4"},Bo={class:"flex-1 h-3 bg-gray-200 rounded-full overflow-hidden"},Uo={class:"text-sm font-semibold text-gray-700 w-12 text-right"},qo={class:"flex items-center justify-between"},zo={class:"flex items-center gap-2 flex-1 mx-4"},$o={class:"flex-1 h-3 bg-gray-200 rounded-full overflow-hidden"},Qo={class:"text-sm font-semibold text-gray-700 w-12 text-right"},Ho={class:"flex items-center justify-between"},Wo={class:"flex items-center gap-2 flex-1 mx-4"},Go={class:"flex-1 h-3 bg-gray-200 rounded-full overflow-hidden"},Ko={class:"text-sm font-semibold text-gray-700 w-12 text-right"},Jo={class:"flex items-center justify-between"},Yo={class:"flex items-center gap-2 flex-1 mx-4"},Xo={class:"flex-1 h-3 bg-gray-200 rounded-full overflow-hidden"},Zo={class:"text-sm font-semibold text-gray-700 w-12 text-right"},el={key:1,class:"text-center py-8 text-gray-500"},tl={key:2,class:"text-center py-8 text-gray-500"},sl={class:"space-y-6"},al={class:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20"},ol={key:0,class:"space-y-4"},ll={class:"grid grid-cols-2 gap-4 mb-4"},rl={class:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl p-4"},nl={class:"text-2xl font-bold text-pink-600"},il={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4"},dl={class:"text-2xl font-bold text-purple-600"},ul={class:"bg-gray-50 rounded-xl p-4"},ml={class:"space-y-2"},xl={class:"flex items-center gap-3 flex-1"},pl={class:"flex-shrink-0 w-8 h-8 bg-pink-500 rounded-lg flex items-center justify-center text-white font-bold text-xs"},gl={class:"flex-1 min-w-0"},cl={class:"text-sm font-bold text-gray-800"},vl={class:"text-xs text-gray-500 flex items-center gap-1"},bl={class:"text-right ml-3 flex-shrink-0"},yl={class:"text-sm font-bold text-pink-600"},fl={class:"text-sm font-bold text-green-600"},_l={key:1,class:"text-center py-8 text-gray-500"},hl={key:2,class:"text-center py-8 text-gray-500"},wl={class:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20"},kl={key:0,class:"space-y-4"},Cl={key:0},Al={class:"grid grid-cols-1 md:grid-cols-5 gap-3"},Ml={class:"text-xs text-gray-600 mb-1"},Rl={class:"text-xl font-bold text-cyan-600"},jl={class:"text-xs text-gray-500 mt-1"},Sl={key:1,class:"bg-gray-50 rounded-xl p-4"},Dl={class:"space-y-2"},Pl={class:"flex items-center gap-3"},Fl={class:"w-24 text-sm font-semibold text-gray-700"},Ol={class:"flex-1"},Tl={class:"h-2 bg-gray-200 rounded-full overflow-hidden"},Il={class:"text-right ml-4 flex-shrink-0"},Nl={class:"text-sm font-bold text-cyan-600"},Ll={class:"text-xs text-gray-500"},Vl={key:1,class:"text-center py-8 text-gray-500"},El={key:2,class:"text-center py-8 text-gray-500"},Bl={class:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20"},Ul={key:0,class:"space-y-4"},ql={class:"grid grid-cols-3 gap-4 mb-4"},zl={class:"bg-gradient-to-br from-teal-50 to-teal-100 rounded-xl p-4"},$l={class:"text-2xl font-bold text-teal-600"},Ql={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4"},Hl={class:"text-2xl font-bold text-blue-600"},Wl={class:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4"},Gl={class:"text-2xl font-bold text-green-600"},Kl={class:"bg-gray-50 rounded-xl p-4"},Jl={class:"space-y-2 max-h-64 overflow-y-auto"},Yl={class:"flex items-center gap-3"},Xl={class:"w-24 text-sm font-medium text-gray-700"},Zl={class:"flex items-center gap-2"},er={class:"text-right"},tr={class:"text-sm font-bold text-teal-600"},sr={key:1,class:"text-center py-8 text-gray-500"},ar={key:2,class:"text-center py-8 text-gray-500"},or={class:"space-y-6"},lr={class:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20"},rr={key:0,class:"space-y-4"},nr={class:"overflow-x-auto"},ir={class:"min-w-full divide-y divide-gray-200"},dr={class:"bg-white divide-y divide-gray-200"},ur=["onClick"],mr={class:"px-6 py-4 whitespace-nowrap"},xr={class:"flex items-center"},pr={class:"flex-shrink-0 w-8 h-8 bg-red-500 rounded-lg flex items-center justify-center text-white font-bold text-xs mr-3"},gr={class:"text-sm font-medium text-gray-900"},cr={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},vr={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},br={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900"},yr={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},fr={class:"px-6 py-4 whitespace-nowrap"},_r={class:"flex items-center gap-2"},hr={class:"text-xs text-gray-500"},wr={class:"px-6 py-4 whitespace-nowrap text-sm text-orange-600"},kr={key:1,class:"text-center py-8 text-gray-500"},Cr={key:2,class:"text-center py-8 text-gray-500"},Ar={class:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20"},Mr={class:"flex items-start justify-between mb-4"},Rr={class:"flex-1"},jr={class:"text-sm text-gray-600"},Sr={key:0,class:"font-semibold text-blue-600"},Dr={key:1},Pr={key:0,class:"space-y-4"},Fr={class:"overflow-x-auto"},Or={class:"min-w-full divide-y divide-gray-200"},Tr={class:"bg-white divide-y divide-gray-200"},Ir={class:"px-6 py-4 whitespace-nowrap"},Nr={class:"flex items-center"},Lr={class:"flex-shrink-0 w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center text-white font-bold text-xs mr-3"},Vr={class:"text-sm font-medium text-gray-900"},Er={class:"text-xs text-gray-500"},Br={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ur={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},qr={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},zr={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900"},$r={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Qr={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Hr={class:"px-6 py-4 whitespace-nowrap"},Wr={class:"flex items-center gap-2"},Gr={class:"text-xs text-gray-500"},Kr={class:"px-6 py-4 whitespace-nowrap text-sm text-orange-600"},Jr={key:1,class:"text-center py-8 text-gray-500"},Yr={key:2,class:"text-center py-8 text-gray-500"},Xr={class:"relative top-20 mx-auto p-5 border w-11/12 max-w-6xl shadow-lg rounded-2xl bg-white"},Zr={class:"flex justify-between items-center mb-4"},en={class:"text-2xl font-bold text-gray-800"},tn={class:"bg-gray-50 rounded-lg p-4 mb-4 border border-gray-200"},sn={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},an={class:"flex gap-2"},on={class:"flex gap-2"},ln={class:"flex justify-between items-end gap-4"},rn={class:"flex gap-4"},nn={key:0,class:"flex justify-center items-center py-20"},dn={key:1,class:"text-center py-20 text-gray-500"},un={key:2,class:"overflow-x-auto"},mn={class:"min-w-full divide-y divide-gray-200"},xn={class:"bg-white divide-y divide-gray-200"},pn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},gn={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},cn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},vn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},bn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},yn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},fn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},_n={class:"px-6 py-4 whitespace-nowrap"},hn={key:3,class:"mt-6 flex items-center justify-between"},wn={class:"text-sm text-gray-700"},kn={class:"flex gap-2"},Cn=["disabled"],An=["disabled"],Mn={class:"px-4 py-2 text-sm text-gray-700"},Rn=["disabled"],jn=["disabled"],Sn={class:"relative top-20 mx-auto p-5 border w-11/12 shadow-lg rounded-xl bg-white"},Dn={class:"flex items-center justify-between mb-4"},Pn={class:"text-2xl font-bold text-gray-800"},Fn={key:0,class:"mb-4 p-4 bg-purple-50 rounded-lg border border-purple-200"},On={class:"text-sm font-semibold text-purple-800 mb-1"},Tn={class:"text-xs text-purple-600"},In={key:1,class:"mb-4 p-4 bg-orange-50 rounded-lg border border-orange-200"},Nn={class:"text-sm font-semibold text-orange-800 mb-1"},Ln={class:"text-xs text-orange-600"},Vn={class:"mb-4 grid grid-cols-1 md:grid-cols-4 gap-4"},En={class:"mb-4 flex items-center gap-4"},Bn={class:"flex items-center gap-2"},Un={class:"flex items-center gap-2"},qn={key:2,class:"text-center py-20"},zn={key:3,class:"overflow-x-auto"},$n={class:"min-w-full divide-y divide-gray-200"},Qn={class:"bg-gray-50"},Hn={key:0,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Wn={key:1,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Gn={class:"bg-white divide-y divide-gray-200"},Kn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Jn={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Yn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Xn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Zn={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ei={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-700"},ti={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},si={class:"px-6 py-4 whitespace-nowrap text-sm text-green-600"},ai={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-orange-600"},oi={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},li={key:4,class:"text-center py-20 text-gray-500"},ri={key:5,class:"mt-6 flex items-center justify-between"},ni={class:"text-sm text-gray-700"},ii={class:"flex gap-2"},di=["disabled"],ui=["disabled"],mi={class:"px-4 py-2 text-sm text-gray-700"},xi=["disabled"],pi=["disabled"],gi={components:{apexchart:mt}},ci=Object.assign(gi,{__name:"Dashboard",props:{behaviorData:Object,strategies:Object,filters:Object,error:String},setup(Ue){var Le,Ve,Ee;const K=Ue,W=m(!1),ue=m(!1),y=m(K.behaviorData),z=m(K.strategies),ae=m(K.error),ye=m(!1),oe=m(null),me=m(!1),J=m([]),p=m({current_page:1,per_page:10,total:0,total_pages:0,from:0,to:0}),_=m({search:"",min_revenue:"",max_revenue:"",min_orders:"",max_orders:""}),G=m({sort_by:"total_revenue",sort_order:"desc"}),xe=m(10),pe=m(!1),P=m(null),V=m(null),$=m(null),ge=m(!1),Y=m([]),c=m({current_page:1,per_page:10,total:0,total_pages:0,from:0,to:0}),A=m({search:"",min_amount:"",max_amount:""}),Q=m({sort_by:"created_at",sort_order:"desc"}),X=m(10),F=m(null),M=m(null),g=m(null),le=m(!1),E=m(null),R=m(null),B=m(null),re=m(!1),Z=m(null),ee=m(null),ne=m(null),ce=m(!1),qe=()=>{const l=new Date;return new Date(l.getFullYear(),l.getMonth(),1).toISOString().split("T")[0]},ze=()=>new Date().toISOString().split("T")[0],x=m({date_from:((Le=K.filters)==null?void 0:Le.date_from)||qe(),date_to:((Ve=K.filters)==null?void 0:Ve.date_to)||ze(),outlet_code:((Ee=K.filters)==null?void 0:Ee.outlet_code)||null}),fe=w(()=>{var t,d,s;const l=(s=(d=(t=y.value)==null?void 0:t.summary)==null?void 0:d.member_insights)==null?void 0:s.total_revenue;return l?parseFloat(l):0}),_e=w(()=>{var t,d,s;const l=(s=(d=(t=y.value)==null?void 0:t.summary)==null?void 0:d.non_member_insights)==null?void 0:s.total_revenue;return l?parseFloat(l):0}),$e=w(()=>{var l,t,d;return parseInt(((d=(t=(l=y.value)==null?void 0:l.summary)==null?void 0:t.member_insights)==null?void 0:d.unique_customers)||0)}),Qe=w(()=>{var l,t,d;return parseInt(((d=(t=(l=y.value)==null?void 0:l.summary)==null?void 0:t.non_member_insights)==null?void 0:d.unique_customers)||0)}),He=w(()=>{var d,s,n,b,k,h;const l=parseFloat(((n=(s=(d=y.value)==null?void 0:d.summary)==null?void 0:s.member_insights)==null?void 0:n.avg_order_value)||0),t=parseFloat(((h=(k=(b=y.value)==null?void 0:b.summary)==null?void 0:k.non_member_insights)==null?void 0:h.avg_order_value)||0);return(l+t)/2}),he=w(()=>{var d,s,n,b,k,h;const l=parseFloat(((n=(s=(d=y.value)==null?void 0:d.summary)==null?void 0:s.member_insights)==null?void 0:n.avg_order_value)||0),t=parseFloat(((h=(k=(b=y.value)==null?void 0:b.summary)==null?void 0:k.non_member_insights)==null?void 0:h.avg_order_value)||0);return l-t}),We=w(()=>{var l,t,d;return parseFloat(((d=(t=(l=y.value)==null?void 0:l.summary)==null?void 0:t.comparison)==null?void 0:d.overall_avg_pax)||0)}),we=w(()=>{var l,t,d;return parseFloat(((d=(t=(l=y.value)==null?void 0:l.summary)==null?void 0:t.comparison)==null?void 0:d.avg_pax_difference)||0)}),f=w(()=>{var l;return((l=y.value)==null?void 0:l.promo_analytics)||null}),Re=w(()=>y.value?{chart:{type:"donut",fontFamily:"Inter, sans-serif",animations:{enabled:!0,speed:800}},labels:["Member","Non-Member"],colors:["#3B82F6","#A855F7"],legend:{position:"bottom",fontSize:"14px",fontWeight:600},dataLabels:{enabled:!0,formatter:l=>`${l.toFixed(1)}%`},plotOptions:{pie:{donut:{size:"65%",labels:{show:!0,total:{show:!0,label:"Total Revenue",formatter:()=>{const l=parseFloat(fe.value||0)+parseFloat(_e.value||0);return u(l)}}}}}},tooltip:{y:{formatter:l=>u(l)}}}:null),Ge=w(()=>[fe.value,_e.value]),je=w(()=>({chart:{type:"bar",fontFamily:"Inter, sans-serif",animations:{enabled:!0,speed:800},toolbar:{show:!1},events:{dataPointSelection:(l,t,d)=>{}}},colors:["#3B82F6","#10B981","#F59E0B","#EF4444"],xaxis:{categories:["Champions","Loyal","At Risk","Lost"],labels:{style:{fontSize:"12px",fontWeight:600}}},yaxis:{title:{text:"Number of Customers"}},dataLabels:{enabled:!0,formatter:l=>l},plotOptions:{bar:{borderRadius:8,columnWidth:"60%"}}})),Ke=w(()=>{var t,d;const l=((d=(t=y.value)==null?void 0:t.rfm_segmentation)==null?void 0:d.summary)||{};return[{name:"Customers",data:[l.champions_count||0,l.loyal_count||0,l.at_risk_count||0,l.lost_count||0]}]}),Se=w(()=>{var d,s,n;const t=(((n=(s=(d=y.value)==null?void 0:d.time_patterns)==null?void 0:s.member)==null?void 0:n.peak_hours)||[]).map(b=>`${b.hour}:00`);return{chart:{type:"area",fontFamily:"Inter, sans-serif",animations:{enabled:!0,speed:800},toolbar:{show:!1}},colors:["#10B981"],xaxis:{categories:t,labels:{style:{fontSize:"12px"}}},yaxis:{title:{text:"Revenue"}},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.3}},stroke:{curve:"smooth",width:3},tooltip:{y:{formatter:b=>u(b)}}}}),Je=w(()=>{var t,d,s;return[{name:"Revenue",data:(((s=(d=(t=y.value)==null?void 0:t.time_patterns)==null?void 0:d.member)==null?void 0:s.peak_hours)||[]).map(n=>n.revenue||0)}]}),De=w(()=>{var s,n,b,k;const l=((n=(s=y.value)==null?void 0:s.product_preferences)==null?void 0:n.member)||[],t=((k=(b=y.value)==null?void 0:b.product_preferences)==null?void 0:k.non_member)||[],d=[...l.slice(0,10),...t.slice(0,10)].reduce((h,O)=>(h.find(j=>j.item_name===O.item_name)||h.push(O),h),[]).slice(0,10);return{chart:{type:"bar",fontFamily:"Inter, sans-serif",animations:{enabled:!0,speed:800},toolbar:{show:!1}},colors:["#3B82F6","#A855F7"],xaxis:{categories:d.map(h=>{const O=h.item_name||"Unknown";return O.length>25?O.substring(0,25)+"...":O}),labels:{style:{fontSize:"10px"},rotate:-45,maxHeight:100}},yaxis:{title:{text:"Revenue"}},legend:{position:"top"},plotOptions:{bar:{horizontal:!1,borderRadius:8,columnWidth:"60%"}},tooltip:{y:{formatter:h=>u(h)}}}}),Ye=w(()=>{var b,k,h,O;const l=((k=(b=y.value)==null?void 0:b.product_preferences)==null?void 0:k.member)||[],t=((O=(h=y.value)==null?void 0:h.product_preferences)==null?void 0:O.non_member)||[],d=[...l.slice(0,10),...t.slice(0,10)].reduce((j,I)=>(j.find(T=>T.item_name===I.item_name)||j.push(I),j),[]).slice(0,10),s=d.map(j=>{const I=l.find(T=>T.item_name===j.item_name);return(I==null?void 0:I.total_revenue)||0}),n=d.map(j=>{const I=t.find(T=>T.item_name===j.item_name);return(I==null?void 0:I.total_revenue)||0});return[{name:"Member",data:s},{name:"Non-Member",data:n}]}),u=l=>{const t=typeof l=="string"?parseFloat(l):l||0;return isNaN(t)?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)},ve=async()=>{W.value=!0,ae.value=null;try{dt.get("/marketing/dashboard",x.value,{preserveState:!0,preserveScroll:!0,onSuccess:l=>{y.value=l.props.behaviorData,z.value=l.props.strategies},onError:l=>{ae.value="Error loading dashboard data"},onFinish:()=>{W.value=!1}}),Pe(),Fe(),Oe()}catch(l){ae.value=l.message,W.value=!1}},Pe=async()=>{var l,t,d;le.value=!0;try{try{const s=await L.get("/api/marketing/customer-lifetime-value",{params:{date_from:x.value.date_from,date_to:x.value.date_to,outlet_code:x.value.outlet_code}});(l=s.data)!=null&&l.success?F.value=s.data.data:(console.error("CLV API Error:",s.data),F.value=null)}catch(s){console.error("Error loading CLV:",s),F.value=null}try{const s=await L.get("/api/marketing/repeat-purchase-rate",{params:{date_from:x.value.date_from,date_to:x.value.date_to,outlet_code:x.value.outlet_code}});(t=s.data)!=null&&t.success?M.value=s.data.data:(console.error("Repeat Purchase Rate API Error:",s.data),M.value=null)}catch(s){console.error("Error loading Repeat Purchase Rate:",s),M.value=null}try{const s=await L.get("/api/marketing/average-days-between-orders",{params:{date_from:x.value.date_from,date_to:x.value.date_to,outlet_code:x.value.outlet_code}});(d=s.data)!=null&&d.success?g.value=s.data.data:(console.error("Average Days API Error:",s.data),g.value=null)}catch(s){console.error("Error loading Average Days:",s),g.value=null}}catch(s){console.error("Error loading value analysis:",s)}finally{le.value=!1}},Fe=async()=>{var l,t,d,s;re.value=!0;try{try{const n=await L.get("/api/marketing/basket-analysis",{params:{date_from:x.value.date_from,date_to:x.value.date_to,outlet_code:x.value.outlet_code,limit:10}});(l=n.data)!=null&&l.success?(E.value=n.data.data,console.log("Basket Analysis loaded:",E.value)):(console.error("Basket Analysis API Error:",n.data),E.value=null)}catch(n){console.error("Error loading Basket Analysis:",n),console.error("Error details:",((t=n.response)==null?void 0:t.data)||n.message),E.value=null}try{const n=await L.get("/api/marketing/peak-hours-day-analysis",{params:{date_from:x.value.date_from,date_to:x.value.date_to,outlet_code:x.value.outlet_code}});(d=n.data)!=null&&d.success?R.value=n.data.data:(console.error("Peak Hours API Error:",n.data),R.value=null)}catch(n){console.error("Error loading Peak Hours:",n),R.value=null}try{const n=await L.get("/api/marketing/customer-acquisition-trends",{params:{date_from:x.value.date_from,date_to:x.value.date_to,outlet_code:x.value.outlet_code,group_by:"day"}});(s=n.data)!=null&&s.success?B.value=n.data.data:(console.error("Acquisition Trends API Error:",n.data),B.value=null)}catch(n){console.error("Error loading Acquisition Trends:",n),B.value=null}}catch(n){console.error("Error loading advanced analytics:",n)}finally{re.value=!1}},Xe=l=>{if(!R.value||!R.value.day_of_week_stats||R.value.day_of_week_stats.length===0)return 0;const t=Math.max(...R.value.day_of_week_stats.map(d=>d.total_revenue));return t>0?l/t*100:0},Oe=async()=>{var l;ce.value=!0;try{try{const t=await L.get("/api/marketing/analysis-by-region",{params:{date_from:x.value.date_from,date_to:x.value.date_to}});(l=t.data)!=null&&l.success?Z.value=t.data.data:(console.error("Region Analysis API Error:",t.data),Z.value=null)}catch(t){console.error("Error loading Region Analysis:",t),Z.value=null}ke()}catch(t){console.error("Error loading region/outlet analysis:",t)}finally{ce.value=!1}},ke=async()=>{var l;try{const t=await L.get("/api/marketing/analysis-by-outlet",{params:{date_from:x.value.date_from,date_to:x.value.date_to,region_id:ne.value}});(l=t.data)!=null&&l.success?ee.value=t.data.data:(console.error("Outlet Analysis API Error:",t.data),ee.value=null)}catch(t){console.error("Error loading Outlet Analysis:",t),ee.value=null}},Te=async()=>{ue.value=!0;try{const l=await L.get("/api/marketing/strategies",{params:x.value});l.data.success&&(z.value=l.data.data)}catch(l){console.error("Error loading strategies:",l)}finally{ue.value=!1}},Ze=(l,t,d)=>{try{const s=(d==null?void 0:d.dataPointIndex)??-1,n=["Champions","Loyal","At Risk","Lost"];if(s<0||s>=n.length){console.error("Invalid segment index:",s);return}const b=n[s];if(!b){console.error("Segment not found for index:",s);return}oe.value=b,ye.value=!0,_.value={search:"",min_revenue:"",max_revenue:"",min_orders:"",max_orders:""},G.value={sort_by:"total_revenue",sort_order:"desc"},p.value={current_page:1,per_page:xe.value,total:0,total_pages:0,from:0,to:0},setTimeout(()=>{H()},100)}catch(s){console.error("Error in handleRFMBarClick:",s)}},H=async()=>{var l,t,d,s,n,b,k,h,O;if(!oe.value){console.warn("Selected segment is not set");return}me.value=!0;try{const j=String(oe.value||"").trim();if(!j){console.error("Segment name is empty"),me.value=!1;return}const T={segment:j.toLowerCase().replace(/\s+/g,"_"),date_from:x.value.date_from,date_to:x.value.date_to,outlet_code:x.value.outlet_code||null,page:((l=p.value)==null?void 0:l.current_page)||1,per_page:xe.value||10,sort_by:((t=G.value)==null?void 0:t.sort_by)||"total_revenue",sort_order:((d=G.value)==null?void 0:d.sort_order)||"desc"};(s=_.value)!=null&&s.search&&(T.search=_.value.search),(n=_.value)!=null&&n.min_revenue&&(T.min_revenue=parseFloat(_.value.min_revenue)),(b=_.value)!=null&&b.max_revenue&&(T.max_revenue=parseFloat(_.value.max_revenue)),(k=_.value)!=null&&k.min_orders&&(T.min_orders=parseInt(_.value.min_orders)),(h=_.value)!=null&&h.max_orders&&(T.max_orders=parseInt(_.value.max_orders));const be=await L.get("/api/marketing/rfm-detail",{params:T});(O=be.data)!=null&&O.success?(J.value=be.data.data||[],p.value=be.data.pagination||p.value):(console.error("API returned error:",be.data),J.value=[])}catch(j){console.error("Error loading RFM detail:",j),J.value=[],p.value&&(p.value.total=0,p.value.total_pages=0)}finally{me.value=!1}};let Ie=null;const ie=()=>{clearTimeout(Ie),p.value.current_page=1,Ie=setTimeout(()=>{H()},500)},Ce=()=>{ye.value=!1,oe.value=null,J.value=[],_.value={search:"",min_revenue:"",max_revenue:"",min_orders:"",max_orders:""},p.value={current_page:1,per_page:10,total:0,total_pages:0,from:0,to:0}},et=l=>{P.value="promo",V.value=l,$.value=null,pe.value=!0,A.value={search:"",min_amount:"",max_amount:""},Q.value={sort_by:"created_at",sort_order:"desc"},X.value=10,c.value={current_page:1,per_page:10,total:0,total_pages:0,from:0,to:0},U()},tt=l=>{P.value="manual_discount",$.value=l,V.value=null,pe.value=!0,A.value={search:"",min_amount:"",max_amount:""},Q.value={sort_by:"created_at",sort_order:"desc"},X.value=10,c.value={current_page:1,per_page:10,total:0,total_pages:0,from:0,to:0},U()},U=async()=>{var l;ge.value=!0;try{const t={date_from:x.value.date_from,date_to:x.value.date_to,outlet_code:x.value.outlet_code,page:c.value.current_page,per_page:X.value,sort_by:Q.value.sort_by,sort_order:Q.value.sort_order};A.value.search&&(t.search=A.value.search),A.value.min_amount&&(t.min_amount=parseFloat(A.value.min_amount)),A.value.max_amount&&(t.max_amount=parseFloat(A.value.max_amount));let d="";if(P.value==="promo"&&V.value)d="/api/marketing/promo-transactions",t.promo_id=V.value.id;else if(P.value==="manual_discount"&&$.value)d="/api/marketing/manual-discount-transactions",t.reason=$.value.reason;else return;const s=await L.get(d,{params:t});(l=s.data)!=null&&l.success?(Y.value=s.data.data||[],c.value=s.data.pagination||c.value):(console.error("API returned error:",s.data),Y.value=[])}catch(t){console.error("Error loading transactions:",t),Y.value=[]}finally{ge.value=!1}};let Ne=null;const Ae=()=>{clearTimeout(Ne),c.value.current_page=1,Ne=setTimeout(()=>{U()},500)},Me=()=>{pe.value=!1,P.value=null,V.value=null,$.value=null,Y.value=[],A.value={search:"",min_amount:"",max_amount:""},Q.value={sort_by:"created_at",sort_order:"desc"},X.value=10,c.value={current_page:1,per_page:10,total:0,total_pages:0,from:0,to:0}},st=l=>l?l.includes("Champion")?"bg-blue-100 text-blue-800":l.includes("Loyal")?"bg-green-100 text-green-800":l.includes("At Risk")?"bg-orange-100 text-orange-800":l.includes("Lost")?"bg-red-100 text-red-800":"bg-gray-200 text-gray-700":"bg-gray-200 text-gray-700";return at(()=>{y.value?(Pe(),Fe(),Oe()):ve(),z.value||Te()}),(l,t)=>{const d=ot("apexchart");return o(),de(ut,null,{default:lt(()=>[rt(nt(it),{title:"Marketing Dashboard - Customer Behavior Analysis"}),e("div",pt,[e("div",gt,[e("div",ct,[e("div",vt,[t[32]||(t[32]=e("div",null,[e("h1",{class:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent"},[e("i",{class:"fa-solid fa-chart-line mr-2"}),i(" Marketing Dashboard ")]),e("p",{class:"text-gray-600 mt-1"},"Customer Behavior Analysis & Strategy Insights")],-1)),e("div",bt,[e("div",yt,[t[29]||(t[29]=e("i",{class:"fa-solid fa-calendar text-blue-500"},null,-1)),C(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=s=>x.value.date_from=s),onChange:ve,class:"bg-transparent border-none outline-none text-sm"},null,544),[[q,x.value.date_from]]),t[30]||(t[30]=e("span",{class:"text-gray-400"},"to",-1)),C(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=s=>x.value.date_to=s),onChange:ve,class:"bg-transparent border-none outline-none text-sm"},null,544),[[q,x.value.date_to]])]),e("button",{onClick:ve,disabled:W.value,class:"px-6 py-2 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 disabled:opacity-50"},[W.value?(o(),r("i",_t)):(o(),r("i",ht)),t[31]||(t[31]=i(" Refresh "))],8,ft)])])])]),e("div",wt,[W.value&&!y.value?(o(),r("div",kt,t[33]||(t[33]=[e("div",{class:"text-center"},[e("div",{class:"inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500 mb-4"}),e("p",{class:"text-gray-600 text-lg"},"Loading dashboard data...")],-1)]))):v("",!0),ae.value?(o(),r("div",Ct,[e("div",At,[t[34]||(t[34]=e("i",{class:"fa-solid fa-exclamation-circle text-red-500 mr-3"},null,-1)),e("p",Mt,a(ae.value),1)])])):v("",!0),y.value&&!W.value?(o(),r("div",Rt,[e("div",jt,[e("div",St,[t[38]||(t[38]=e("div",{class:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"},null,-1)),e("div",Dt,[e("div",Pt,[t[36]||(t[36]=e("div",{class:"bg-white/20 backdrop-blur-sm rounded-lg p-3"},[e("i",{class:"fa-solid fa-users text-2xl"})],-1)),e("div",Ft,[t[35]||(t[35]=e("div",{class:"text-sm opacity-90"},"Member Revenue",-1)),e("div",Ot,a(u(fe.value)),1)])]),e("div",Tt,[t[37]||(t[37]=e("i",{class:"fa-solid fa-user-check mr-2"},null,-1)),i(" "+a($e.value)+" members ",1)])])]),e("div",It,[t[42]||(t[42]=e("div",{class:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"},null,-1)),e("div",Nt,[e("div",Lt,[t[40]||(t[40]=e("div",{class:"bg-white/20 backdrop-blur-sm rounded-lg p-3"},[e("i",{class:"fa-solid fa-user-slash text-2xl"})],-1)),e("div",Vt,[t[39]||(t[39]=e("div",{class:"text-sm opacity-90"},"Non-Member Revenue",-1)),e("div",Et,a(u(_e.value)),1)])]),e("div",Bt,[t[41]||(t[41]=e("i",{class:"fa-solid fa-users-slash mr-2"},null,-1)),i(" "+a(Qe.value)+" customers ",1)])])]),e("div",Ut,[t[45]||(t[45]=e("div",{class:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"},null,-1)),e("div",qt,[e("div",zt,[t[44]||(t[44]=e("div",{class:"bg-white/20 backdrop-blur-sm rounded-lg p-3"},[e("i",{class:"fa-solid fa-shopping-cart text-2xl"})],-1)),e("div",$t,[t[43]||(t[43]=e("div",{class:"text-sm opacity-90"},"Avg Order Value",-1)),e("div",Qt,a(u(He.value)),1)])]),e("div",Ht,[e("i",{class:N((he.value>0?"fa-solid fa-arrow-up":"fa-solid fa-arrow-down")+" mr-2")},null,2),i(" Member "+a(he.value>0?"+":"")+a(u(Math.abs(he.value)))+" vs Non-Member ",1)])])]),e("div",Wt,[t[48]||(t[48]=e("div",{class:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"},null,-1)),e("div",Gt,[e("div",Kt,[t[47]||(t[47]=e("div",{class:"bg-white/20 backdrop-blur-sm rounded-lg p-3"},[e("i",{class:"fa-solid fa-users-line text-2xl"})],-1)),e("div",Jt,[t[46]||(t[46]=e("div",{class:"text-sm opacity-90"},"Average Per Pax",-1)),e("div",Yt,a(u(We.value)),1)])]),e("div",Xt,[e("i",{class:N((we.value>0?"fa-solid fa-arrow-up":"fa-solid fa-arrow-down")+" mr-2")},null,2),i(" Member "+a(we.value>0?"+":"")+a(u(Math.abs(we.value)))+" vs Non-Member ",1)])])])]),e("div",Zt,[e("div",es,[t[49]||(t[49]=e("div",{class:"flex items-center justify-between mb-4"},[e("h3",{class:"text-xl font-bold text-gray-800"},[e("i",{class:"fa-solid fa-chart-pie text-blue-500 mr-2"}),i(" Revenue Distribution ")]),e("div",{class:"flex gap-2"},[e("span",{class:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-semibold"},"Member"),e("span",{class:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-semibold"},"Non-Member")])],-1)),Re.value?(o(),de(d,{key:0,type:"donut",height:"300",options:Re.value,series:Ge.value},null,8,["options","series"])):v("",!0)]),e("div",ts,[t[50]||(t[50]=e("div",{class:"flex items-start justify-between mb-4"},[e("div",{class:"flex-1"},[e("h3",{class:"text-xl font-bold text-gray-800 mb-2"},[e("i",{class:"fa-solid fa-users-gear text-indigo-500 mr-2"}),i(" RFM Segmentation ")]),e("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4"},[e("p",{class:"text-sm text-gray-700 mb-2"},[e("strong",{class:"text-blue-700"},"RFM Analysis"),i(" adalah metode segmentasi customer berdasarkan: ")]),e("ul",{class:"text-xs text-gray-600 space-y-1 ml-4 list-disc"},[e("li",null,[e("strong",null,"R (Recency):"),i(" Kapan terakhir kali customer berbelanja")]),e("li",null,[e("strong",null,"F (Frequency):"),i(" Seberapa sering customer berbelanja")]),e("li",null,[e("strong",null,"M (Monetary):"),i(" Berapa total nilai pembelian customer")])]),e("p",{class:"text-xs text-gray-600 mt-2"},[e("strong",null,"Champions:"),i(" Customer terbaik (belanja baru-baru ini, sering, dan besar)"),e("br"),e("strong",null,"Loyal:"),i(" Customer setia yang sering belanja"),e("br"),e("strong",null,"At Risk:"),i(" Customer yang dulu sering belanja tapi sudah lama tidak belanja"),e("br"),e("strong",null,"Lost:"),i(" Customer yang sudah lama tidak belanja dan jarang belanja ")]),e("p",{class:"text-xs text-blue-600 mt-2 italic"},[e("i",{class:"fa-solid fa-info-circle mr-1"}),i("Klik bar untuk melihat detail dan penjelasan lengkap tentang RFM Score ")])])])],-1)),je.value?(o(),de(d,{key:0,type:"bar",height:"300",options:je.value,series:Ke.value,onDataPointSelection:Ze},null,8,["options","series"])):v("",!0)])]),e("div",ss,[e("div",as,[t[51]||(t[51]=e("h3",{class:"text-xl font-bold text-gray-800 mb-4"},[e("i",{class:"fa-solid fa-clock text-green-500 mr-2"}),i(" Peak Hours Analysis ")],-1)),Se.value?(o(),de(d,{key:0,type:"area",height:"300",options:Se.value,series:Je.value},null,8,["options","series"])):v("",!0)]),e("div",os,[t[52]||(t[52]=e("h3",{class:"text-xl font-bold text-gray-800 mb-4"},[e("i",{class:"fa-solid fa-star text-yellow-500 mr-2"}),i(" Top 10 Products (Member vs Non-Member) ")],-1)),De.value?(o(),de(d,{key:0,type:"bar",height:"300",options:De.value,series:Ye.value},null,8,["options","series"])):v("",!0)])]),e("div",ls,[e("div",rs,[t[54]||(t[54]=e("div",null,[e("h2",{class:"text-3xl font-bold mb-2"},[e("i",{class:"fa-solid fa-lightbulb mr-3"}),i(" AI-Powered Marketing Strategies ")]),e("p",{class:"text-indigo-100"},"Actionable insights to boost your revenue")],-1)),e("button",{onClick:Te,disabled:ue.value,class:"px-6 py-3 bg-white/20 backdrop-blur-sm rounded-xl hover:bg-white/30 transition-all duration-200"},[ue.value?(o(),r("i",is)):(o(),r("i",ds)),t[53]||(t[53]=i(" Generate Strategies "))],8,ns)]),z.value&&z.value.strategies?(o(),r("div",us,[(o(!0),r(S,null,D(z.value.strategies,(s,n)=>(o(),r("div",{key:n,class:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20 hover:bg-white/20 transition-all duration-300 transform hover:scale-105"},[e("div",ms,[e("div",xs,[e("div",ps,[e("span",{class:N([{"bg-red-500/30":s.priority==="high","bg-yellow-500/30":s.priority==="medium","bg-green-500/30":s.priority==="low"},"px-3 py-1 rounded-full text-xs font-semibold"])},a(s.priority.toUpperCase()),3),e("span",gs,a(s.target_segment),1)]),e("h4",cs,a(s.title),1),e("p",vs,a(s.description),1)])]),e("div",bs,[t[56]||(t[56]=e("div",{class:"text-xs font-semibold text-indigo-200 mb-2"},"Action Items:",-1)),e("ul",ys,[(o(!0),r(S,null,D(s.action_items.slice(0,3),(b,k)=>(o(),r("li",{key:k,class:"text-xs flex items-start gap-2"},[t[55]||(t[55]=e("i",{class:"fa-solid fa-check-circle mt-1 text-green-300"},null,-1)),e("span",null,a(b),1)]))),128))])]),e("div",fs,[e("div",_s,[e("span",hs,[t[57]||(t[57]=e("i",{class:"fa-solid fa-clock mr-1"},null,-1)),i(" "+a(s.timeline),1)]),e("span",ws,a(s.expected_impact),1)])])]))),128))])):(o(),r("div",ks,t[58]||(t[58]=[e("i",{class:"fa-solid fa-robot text-4xl mb-4 opacity-50"},null,-1),e("p",{class:"text-indigo-100"},'Click "Generate Strategies" to get AI-powered marketing recommendations',-1)])))]),e("div",Cs,[e("div",As,[t[60]||(t[60]=e("h3",{class:"text-xl font-bold text-gray-800 mb-4"},[e("i",{class:"fa-solid fa-bolt text-yellow-500 mr-2"}),i(" Priority Actions ")],-1)),z.value&&z.value.priority_actions?(o(),r("div",Ms,[(o(!0),r(S,null,D(z.value.priority_actions,(s,n)=>(o(),r("div",{key:n,class:N(["p-4 rounded-xl border-l-4",{"bg-red-50 border-red-500":s.priority==="high","bg-yellow-50 border-yellow-500":s.priority==="medium","bg-green-50 border-green-500":s.priority==="low"}])},[e("div",Rs,[e("i",{class:N([{"fa-exclamation-circle text-red-500":s.priority==="high","fa-info-circle text-yellow-500":s.priority==="medium","fa-check-circle text-green-500":s.priority==="low"},"fa-solid mt-1"])},null,2),e("div",js,[e("div",Ss,a(s.action),1),e("div",Ds,a(s.reason),1)])])],2))),128))])):(o(),r("div",Ps,t[59]||(t[59]=[e("i",{class:"fa-solid fa-info-circle text-2xl mb-2"},null,-1),e("p",null,"Generate strategies to see priority actions",-1)])))]),e("div",Fs,[t[77]||(t[77]=e("h3",{class:"text-xl font-bold text-gray-800 mb-4"},[e("i",{class:"fa-solid fa-tags text-purple-500 mr-2"}),i(" Promo Analytics ")],-1)),f.value&&f.value.overall?(o(),r("div",Os,[e("div",Ts,[e("div",Is,[t[61]||(t[61]=e("div",{class:"text-sm text-gray-600 mb-1"},"Promo Usage",-1)),e("div",Ns,a(f.value.overall.promo_usage_percentage)+"%",1),e("div",Ls,a(f.value.overall.orders_with_promo)+" / "+a(f.value.overall.total_orders)+" orders ",1)]),e("div",Vs,[t[62]||(t[62]=e("div",{class:"text-sm text-gray-600 mb-1"},"Promo Discount",-1)),e("div",Es,a(u(f.value.overall.total_promo_discount)),1),t[63]||(t[63]=e("div",{class:"text-xs text-gray-500 mt-1"},"From active promos",-1))]),e("div",Bs,[t[64]||(t[64]=e("div",{class:"text-sm text-gray-600 mb-1"},"Manual Discount",-1)),e("div",Us,a(u(f.value.overall.total_manual_discount)),1),e("div",qs,a(f.value.overall.orders_with_manual_discount)+" orders ",1)])]),f.value.overall.total_discount>0?(o(),r("div",zs,[e("div",$s,[t[65]||(t[65]=e("span",{class:"text-sm font-semibold text-indigo-800"},"Total Discount (Promo + Manual)",-1)),e("span",Qs,a(u(f.value.overall.total_discount)),1)])])):v("",!0),e("div",Hs,[t[69]||(t[69]=e("div",{class:"text-sm font-semibold text-gray-700 mb-3"},"Revenue Comparison",-1)),e("div",Ws,[e("div",Gs,[t[66]||(t[66]=e("span",{class:"text-sm text-gray-600"},"With Promo",-1)),e("span",Ks,a(u(f.value.overall.revenue_with_promo)),1)]),e("div",Js,[t[67]||(t[67]=e("span",{class:"text-sm text-gray-600"},"Without Promo",-1)),e("span",Ys,a(u(f.value.overall.revenue_without_promo)),1)]),e("div",Xs,[t[68]||(t[68]=e("span",{class:"text-sm font-semibold text-gray-700"},"Avg Order Value",-1)),e("div",Zs,[e("div",ea,"With: "+a(u(f.value.overall.avg_order_value_with_promo)),1),e("div",ta,"Without: "+a(u(f.value.overall.avg_order_value_without_promo)),1)])])])]),f.value.member_vs_non_member&&f.value.member_vs_non_member.length>0?(o(),r("div",sa,[t[70]||(t[70]=e("div",{class:"text-sm font-semibold text-gray-700 mb-3"},"Member vs Non-Member",-1)),e("div",aa,[(o(!0),r(S,null,D(f.value.member_vs_non_member,s=>(o(),r("div",{key:s.customer_type,class:"flex items-center justify-between"},[e("span",oa,a(s.customer_type.replace("_"," ")),1),e("div",la,[e("span",ra,a(s.promo_usage_percentage)+"%",1),e("span",na,"("+a(s.orders_with_promo)+"/"+a(s.total_orders)+")",1)])]))),128))])])):v("",!0),e("div",ia,[f.value.top_promos&&f.value.top_promos.length>0?(o(),r("div",da,[t[73]||(t[73]=e("div",{class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},[e("i",{class:"fa-solid fa-tag text-purple-500"}),i(" Top Promos ")],-1)),e("div",ua,[(o(!0),r(S,null,D(f.value.top_promos,(s,n)=>(o(),r("div",{key:s.id,onClick:b=>et(s),class:"flex items-center justify-between p-3 bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg hover:from-purple-100 hover:to-purple-200 transition-all border border-purple-200 cursor-pointer"},[e("div",xa,[e("div",pa," #"+a(n+1),1),e("div",ga,[e("div",ca,a(s.name),1),e("div",va,a(s.code)+" â€¢ "+a(s.type),1)])]),e("div",ba,[t[71]||(t[71]=e("div",{class:"text-xs text-gray-500 mb-1"},"Usage",-1)),e("div",ya,a(s.usage_count)+"x",1),t[72]||(t[72]=e("div",{class:"text-xs text-gray-500 mt-2 mb-1"},"Discount",-1)),e("div",fa,a(u(s.total_discount)),1)])],8,ma))),128))])])):v("",!0),f.value.top_manual_discounts&&f.value.top_manual_discounts.length>0?(o(),r("div",_a,[t[75]||(t[75]=e("div",{class:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2"},[e("i",{class:"fa-solid fa-hand-holding-dollar text-orange-500"}),i(" Top Manual Discounts ")],-1)),e("div",ha,[(o(!0),r(S,null,D(f.value.top_manual_discounts,(s,n)=>(o(),r("div",{key:s.reason,onClick:b=>tt(s),class:"flex items-center justify-between p-3 bg-gradient-to-r from-orange-50 to-orange-100 rounded-lg hover:from-orange-100 hover:to-orange-200 transition-all border border-orange-200 cursor-pointer"},[e("div",ka,[e("div",Ca," #"+a(n+1),1),e("div",Aa,[e("div",Ma,a(s.reason),1),e("div",Ra,a(s.usage_count)+" orders",1)])]),e("div",ja,[t[74]||(t[74]=e("div",{class:"text-xs text-gray-500 mb-1"},"Total Discount",-1)),e("div",Sa,a(u(s.total_discount)),1)])],8,wa))),128))])])):v("",!0)])])):(o(),r("div",Da,t[76]||(t[76]=[e("i",{class:"fa-solid fa-tags text-4xl mb-2 opacity-50"},null,-1),e("p",{class:"text-sm"},"No promo data available",-1)])))])]),e("div",Pa,[e("div",Fa,[t[95]||(t[95]=e("div",{class:"flex items-start justify-between mb-4"},[e("div",null,[e("h3",{class:"text-xl font-bold text-gray-800 mb-2"},[e("i",{class:"fa-solid fa-chart-line text-indigo-500 mr-2"}),i(" Customer Lifetime Value (CLV) ")]),e("p",{class:"text-sm text-gray-600"}," CLV mengukur total revenue yang dihasilkan oleh seorang customer selama seluruh hubungannya dengan bisnis. Metrik ini membantu mengidentifikasi customer yang paling berharga dan mengalokasikan budget marketing dengan lebih efektif. ")])],-1)),F.value&&F.value.member?(o(),r("div",Oa,[e("div",Ta,[e("div",Ia,[t[78]||(t[78]=e("div",{class:"text-sm text-gray-600 mb-1"},"Avg CLV (Member)",-1)),e("div",Na,a(u(F.value.member.statistics.avg_clv)),1),e("div",La,a(F.value.member.statistics.total_customers)+" customers",1),t[79]||(t[79]=e("div",{class:"text-xs text-gray-400 mt-1 italic"},"Rata-rata nilai customer seumur hidup",-1))]),e("div",Va,[t[80]||(t[80]=e("div",{class:"text-sm text-gray-600 mb-1"},"Median CLV",-1)),e("div",Ea,a(u(F.value.member.statistics.median_clv)),1),t[81]||(t[81]=e("div",{class:"text-xs text-gray-500 mt-1"},"Middle value",-1)),t[82]||(t[82]=e("div",{class:"text-xs text-gray-400 mt-1 italic"},"Nilai tengah (tidak terpengaruh outlier)",-1))]),e("div",Ba,[t[83]||(t[83]=e("div",{class:"text-sm text-gray-600 mb-1"},"Total CLV",-1)),e("div",Ua,a(u(F.value.member.statistics.total_clv)),1),t[84]||(t[84]=e("div",{class:"text-xs text-gray-500 mt-1"},"All members",-1)),t[85]||(t[85]=e("div",{class:"text-xs text-gray-400 mt-1 italic"},"Total nilai semua customer",-1))]),e("div",qa,[t[86]||(t[86]=e("div",{class:"text-sm text-gray-600 mb-1"},"Avg Orders",-1)),e("div",za,a(F.value.member.statistics.avg_orders_per_customer),1),t[87]||(t[87]=e("div",{class:"text-xs text-gray-500 mt-1"},"Per customer",-1)),t[88]||(t[88]=e("div",{class:"text-xs text-gray-400 mt-1 italic"},"Rata-rata jumlah pesanan",-1))])]),e("div",$a,[t[92]||(t[92]=e("div",{class:"text-sm font-semibold text-gray-700 mb-3"},"CLV Range",-1)),e("div",Qa,[e("div",Ha,[t[89]||(t[89]=e("div",{class:"text-xs text-gray-500 mb-1"},"Minimum",-1)),e("div",Wa,a(u(F.value.member.statistics.min_clv)),1)]),t[91]||(t[91]=e("div",{class:"flex-1 mx-4"},[e("div",{class:"h-2 bg-gray-200 rounded-full overflow-hidden"},[e("div",{class:"h-full bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full",style:{width:"100%"}})])],-1)),e("div",Ga,[t[90]||(t[90]=e("div",{class:"text-xs text-gray-500 mb-1"},"Maximum",-1)),e("div",Ka,a(u(F.value.member.statistics.max_clv)),1)])])])])):le.value?(o(),r("div",Ja,t[93]||(t[93]=[e("i",{class:"fa-solid fa-spinner fa-spin text-4xl mb-2 opacity-50"},null,-1),e("p",{class:"text-sm"},"Loading CLV data...",-1)]))):(o(),r("div",Ya,t[94]||(t[94]=[e("i",{class:"fa-solid fa-chart-line text-4xl mb-2 opacity-50"},null,-1),e("p",{class:"text-sm"},"No CLV data available for selected period",-1)])))]),e("div",Xa,[t[112]||(t[112]=e("div",{class:"flex items-start justify-between mb-4"},[e("div",null,[e("h3",{class:"text-xl font-bold text-gray-800 mb-2"},[e("i",{class:"fa-solid fa-repeat text-green-500 mr-2"}),i(" Repeat Purchase Rate ")]),e("p",{class:"text-sm text-gray-600"}," Repeat Purchase Rate menunjukkan persentase customer yang melakukan pembelian lebih dari sekali. Semakin tinggi rate ini, semakin loyal customer base Anda. Fokus pada meningkatkan rate ini dapat meningkatkan revenue jangka panjang. ")])],-1)),M.value&&M.value.member?(o(),r("div",Za,[e("div",eo,[e("div",to,[t[96]||(t[96]=e("div",{class:"text-sm text-gray-600 mb-1"},"Repeat Rate",-1)),e("div",so,a(M.value.member.repeat_rate)+"%",1),e("div",ao,a(M.value.member.repeat_customers)+" / "+a(M.value.member.total_customers)+" customers ",1),t[97]||(t[97]=e("div",{class:"text-xs text-gray-400 mt-1 italic"},"% customer yang kembali membeli",-1))]),e("div",oo,[t[98]||(t[98]=e("div",{class:"text-sm text-gray-600 mb-1"},"One-Time Rate",-1)),e("div",lo,a(M.value.member.one_time_rate)+"%",1),t[99]||(t[99]=e("div",{class:"text-xs text-gray-500 mt-1"},"Single purchase only",-1)),t[100]||(t[100]=e("div",{class:"text-xs text-gray-400 mt-1 italic"},"% customer yang hanya beli sekali",-1))]),e("div",ro,[t[101]||(t[101]=e("div",{class:"text-sm text-gray-600 mb-1"},"Avg Orders",-1)),e("div",no,a(M.value.member.avg_orders_per_customer),1),t[102]||(t[102]=e("div",{class:"text-xs text-gray-500 mt-1"},"Per customer",-1)),t[103]||(t[103]=e("div",{class:"text-xs text-gray-400 mt-1 italic"},"Rata-rata pesanan per customer",-1))])]),M.value.member.segments?(o(),r("div",io,[t[108]||(t[108]=e("div",{class:"text-sm font-semibold text-gray-700 mb-1"},"Customer Segments by Order Frequency",-1)),t[109]||(t[109]=e("div",{class:"text-xs text-gray-500 mb-3"},"Segmentasi customer berdasarkan frekuensi pembelian untuk strategi marketing yang lebih targeted",-1)),e("div",uo,[e("div",mo,[t[104]||(t[104]=e("div",{class:"text-xs text-gray-500 mb-1"},"1 Order",-1)),e("div",xo,a(M.value.member.segments.one_time||0),1)]),e("div",po,[t[105]||(t[105]=e("div",{class:"text-xs text-gray-500 mb-1"},"2-5 Orders",-1)),e("div",go,a(M.value.member.segments.repeat_2_5||0),1)]),e("div",co,[t[106]||(t[106]=e("div",{class:"text-xs text-gray-500 mb-1"},"6-10 Orders",-1)),e("div",vo,a(M.value.member.segments.repeat_6_10||0),1)]),e("div",bo,[t[107]||(t[107]=e("div",{class:"text-xs text-gray-500 mb-1"},"11+ Orders",-1)),e("div",yo,a(M.value.member.segments.repeat_11_plus||0),1)])])])):v("",!0)])):le.value?(o(),r("div",fo,t[110]||(t[110]=[e("i",{class:"fa-solid fa-spinner fa-spin text-4xl mb-2 opacity-50"},null,-1),e("p",{class:"text-sm"},"Loading repeat purchase data...",-1)]))):(o(),r("div",_o,t[111]||(t[111]=[e("i",{class:"fa-solid fa-repeat text-4xl mb-2 opacity-50"},null,-1),e("p",{class:"text-sm"},"No repeat purchase data available for selected period",-1)])))]),e("div",ho,[t[134]||(t[134]=e("div",{class:"flex items-start justify-between mb-4"},[e("div",null,[e("h3",{class:"text-xl font-bold text-gray-800 mb-2"},[e("i",{class:"fa-solid fa-calendar-days text-orange-500 mr-2"}),i(" Average Days Between Orders ")]),e("p",{class:"text-sm text-gray-600"}," Rata-rata hari antar pesanan menunjukkan seberapa sering customer kembali membeli. Interval yang semakin panjang bisa menjadi early warning untuk customer yang berisiko churn. Gunakan data ini untuk timing campaign re-engagement yang tepat. ")])],-1)),g.value?(o(),r("div",wo,[e("div",ko,[e("div",Co,[t[113]||(t[113]=e("div",{class:"text-sm text-gray-600 mb-1"},"Average Days",-1)),e("div",Ao,a(g.value.avg_days_between_orders),1),t[114]||(t[114]=e("div",{class:"text-xs text-gray-500 mt-1"},"days",-1)),t[115]||(t[115]=e("div",{class:"text-xs text-gray-400 mt-1 italic"},"Rata-rata hari antar pesanan",-1))]),e("div",Mo,[t[116]||(t[116]=e("div",{class:"text-sm text-gray-600 mb-1"},"Median Days",-1)),e("div",Ro,a(g.value.median_days_between_orders),1),t[117]||(t[117]=e("div",{class:"text-xs text-gray-500 mt-1"},"days",-1)),t[118]||(t[118]=e("div",{class:"text-xs text-gray-400 mt-1 italic"},"Nilai tengah (lebih akurat)",-1))]),e("div",jo,[t[119]||(t[119]=e("div",{class:"text-sm text-gray-600 mb-1"},"Min Days",-1)),e("div",So,a(g.value.min_days),1),t[120]||(t[120]=e("div",{class:"text-xs text-gray-500 mt-1"},"days",-1)),t[121]||(t[121]=e("div",{class:"text-xs text-gray-400 mt-1 italic"},"Interval terpendek",-1))]),e("div",Do,[t[122]||(t[122]=e("div",{class:"text-sm text-gray-600 mb-1"},"Max Days",-1)),e("div",Po,a(g.value.max_days),1),t[123]||(t[123]=e("div",{class:"text-xs text-gray-500 mt-1"},"days",-1)),t[124]||(t[124]=e("div",{class:"text-xs text-gray-400 mt-1 italic"},"Interval terpanjang",-1))])]),g.value.segments?(o(),r("div",Fo,[t[130]||(t[130]=e("div",{class:"text-sm font-semibold text-gray-700 mb-1"},"Distribution by Interval",-1)),t[131]||(t[131]=e("div",{class:"text-xs text-gray-500 mb-3"},"Distribusi interval antar pesanan membantu mengidentifikasi pola pembelian dan timing optimal untuk re-engagement campaign",-1)),e("div",Oo,[e("div",To,[t[125]||(t[125]=e("span",{class:"text-sm text-gray-600"},"0-7 days",-1)),e("div",Io,[e("div",No,[e("div",{class:"h-full bg-green-500 rounded-full",style:te({width:g.value.total_intervals>0?g.value.segments["0_7_days"]/g.value.total_intervals*100+"%":"0%"})},null,4)]),e("span",Lo,a(g.value.segments["0_7_days"]||0),1)])]),e("div",Vo,[t[126]||(t[126]=e("span",{class:"text-sm text-gray-600"},"8-14 days",-1)),e("div",Eo,[e("div",Bo,[e("div",{class:"h-full bg-blue-500 rounded-full",style:te({width:g.value.total_intervals>0?g.value.segments["8_14_days"]/g.value.total_intervals*100+"%":"0%"})},null,4)]),e("span",Uo,a(g.value.segments["8_14_days"]||0),1)])]),e("div",qo,[t[127]||(t[127]=e("span",{class:"text-sm text-gray-600"},"15-30 days",-1)),e("div",zo,[e("div",$o,[e("div",{class:"h-full bg-yellow-500 rounded-full",style:te({width:g.value.total_intervals>0?g.value.segments["15_30_days"]/g.value.total_intervals*100+"%":"0%"})},null,4)]),e("span",Qo,a(g.value.segments["15_30_days"]||0),1)])]),e("div",Ho,[t[128]||(t[128]=e("span",{class:"text-sm text-gray-600"},"31-60 days",-1)),e("div",Wo,[e("div",Go,[e("div",{class:"h-full bg-orange-500 rounded-full",style:te({width:g.value.total_intervals>0?g.value.segments["31_60_days"]/g.value.total_intervals*100+"%":"0%"})},null,4)]),e("span",Ko,a(g.value.segments["31_60_days"]||0),1)])]),e("div",Jo,[t[129]||(t[129]=e("span",{class:"text-sm text-gray-600"},"61+ days",-1)),e("div",Yo,[e("div",Xo,[e("div",{class:"h-full bg-red-500 rounded-full",style:te({width:g.value.total_intervals>0?g.value.segments["61_plus_days"]/g.value.total_intervals*100+"%":"0%"})},null,4)]),e("span",Zo,a(g.value.segments["61_plus_days"]||0),1)])])])])):v("",!0)])):le.value?(o(),r("div",el,t[132]||(t[132]=[e("i",{class:"fa-solid fa-spinner fa-spin text-4xl mb-2 opacity-50"},null,-1),e("p",{class:"text-sm"},"Loading average days data...",-1)]))):(o(),r("div",tl,t[133]||(t[133]=[e("i",{class:"fa-solid fa-calendar-days text-4xl mb-2 opacity-50"},null,-1),e("p",{class:"text-sm"},"No average days data available for selected period",-1)])))])]),e("div",sl,[e("div",al,[t[145]||(t[145]=e("div",{class:"flex items-start justify-between mb-4"},[e("div",null,[e("h3",{class:"text-xl font-bold text-gray-800 mb-2"},[e("i",{class:"fa-solid fa-shopping-basket text-pink-500 mr-2"}),i(" Basket Analysis / Product Affinity ")]),e("p",{class:"text-sm text-gray-600"}," Analisis produk yang sering dibeli bersamaan untuk rekomendasi cross-sell dan upsell. Gunakan data ini untuk membuat bundle offers dan meningkatkan average order value. ")])],-1)),E.value&&E.value.top_pairs&&E.value.top_pairs.length>0?(o(),r("div",ol,[e("div",ll,[e("div",rl,[t[135]||(t[135]=e("div",{class:"text-sm text-gray-600 mb-1"},"Orders Analyzed",-1)),e("div",nl,a(E.value.total_orders_analyzed),1),t[136]||(t[136]=e("div",{class:"text-xs text-gray-500 mt-1"},"Total orders",-1))]),e("div",il,[t[137]||(t[137]=e("div",{class:"text-sm text-gray-600 mb-1"},"Multi-Item Orders",-1)),e("div",dl,a(E.value.total_orders_with_multiple_items),1),t[138]||(t[138]=e("div",{class:"text-xs text-gray-500 mt-1"},"Orders with 2+ items",-1))])]),e("div",ul,[t[142]||(t[142]=e("div",{class:"text-sm font-semibold text-gray-700 mb-3"},"Top Product Pairs (Frequently Bought Together)",-1)),e("div",ml,[(o(!0),r(S,null,D(E.value.top_pairs.slice(0,10),(s,n)=>(o(),r("div",{key:n,class:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200 hover:border-pink-300 transition-all"},[e("div",xl,[e("div",pl," #"+a(n+1),1),e("div",gl,[e("div",cl,a(s.product1),1),e("div",vl,[t[139]||(t[139]=e("i",{class:"fa-solid fa-arrow-right text-xs"},null,-1)),i(" "+a(s.product2),1)])])]),e("div",bl,[t[140]||(t[140]=e("div",{class:"text-xs text-gray-500 mb-1"},"Frequency",-1)),e("div",yl,a(s.frequency)+"x",1),t[141]||(t[141]=e("div",{class:"text-xs text-gray-500 mt-1"},"Revenue",-1)),e("div",fl,a(u(s.total_revenue)),1)])]))),128))])])])):re.value?(o(),r("div",_l,t[143]||(t[143]=[e("i",{class:"fa-solid fa-spinner fa-spin text-4xl mb-2 opacity-50"},null,-1),e("p",{class:"text-sm"},"Loading basket analysis...",-1)]))):(o(),r("div",hl,t[144]||(t[144]=[e("i",{class:"fa-solid fa-shopping-basket text-4xl mb-2 opacity-50"},null,-1),e("p",{class:"text-sm"},"No basket analysis data available",-1)])))]),e("div",wl,[t[150]||(t[150]=e("div",{class:"flex items-start justify-between mb-4"},[e("div",null,[e("h3",{class:"text-xl font-bold text-gray-800 mb-2"},[e("i",{class:"fa-solid fa-clock text-cyan-500 mr-2"}),i(" Peak Hours & Day Analysis ")]),e("p",{class:"text-sm text-gray-600"}," Identifikasi jam-jam sibuk dan hari paling produktif untuk optimasi timing promosi dan staffing. Gunakan data ini untuk menjadwalkan campaign marketing pada waktu yang tepat. ")])],-1)),R.value?(o(),r("div",kl,[R.value.top_peak_hours&&R.value.top_peak_hours.length>0?(o(),r("div",Cl,[t[146]||(t[146]=e("div",{class:"text-sm font-semibold text-gray-700 mb-3"},"Top 5 Peak Hours (by Revenue)",-1)),e("div",Al,[(o(!0),r(S,null,D(R.value.top_peak_hours,(s,n)=>(o(),r("div",{key:n,class:"bg-gradient-to-br from-cyan-50 to-cyan-100 rounded-xl p-4 text-center"},[e("div",Ml,a(s.hour_label),1),e("div",Rl,a(u(s.total_revenue)),1),e("div",jl,a(s.total_orders)+" orders",1)]))),128))])])):v("",!0),R.value.day_of_week_stats&&R.value.day_of_week_stats.length>0?(o(),r("div",Sl,[t[147]||(t[147]=e("div",{class:"text-sm font-semibold text-gray-700 mb-3"},"Day of Week Performance",-1)),e("div",Dl,[(o(!0),r(S,null,D(R.value.day_of_week_stats,s=>(o(),r("div",{key:s.day_of_week,class:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200"},[e("div",Pl,[e("div",Fl,a(s.day_name),1),e("div",Ol,[e("div",Tl,[e("div",{class:"h-full bg-gradient-to-r from-cyan-400 to-blue-500 rounded-full",style:te({width:Xe(s.total_revenue)+"%"})},null,4)])])]),e("div",Il,[e("div",Nl,a(u(s.total_revenue)),1),e("div",Ll,a(s.total_orders)+" orders",1)])]))),128))])])):v("",!0)])):re.value?(o(),r("div",Vl,t[148]||(t[148]=[e("i",{class:"fa-solid fa-spinner fa-spin text-4xl mb-2 opacity-50"},null,-1),e("p",{class:"text-sm"},"Loading peak hours analysis...",-1)]))):(o(),r("div",El,t[149]||(t[149]=[e("i",{class:"fa-solid fa-clock text-4xl mb-2 opacity-50"},null,-1),e("p",{class:"text-sm"},"No peak hours data available",-1)])))]),e("div",Bl,[t[161]||(t[161]=e("div",{class:"flex items-start justify-between mb-4"},[e("div",null,[e("h3",{class:"text-xl font-bold text-gray-800 mb-2"},[e("i",{class:"fa-solid fa-user-plus text-teal-500 mr-2"}),i(" Customer Acquisition Trends ")]),e("p",{class:"text-sm text-gray-600"}," Tracking pertumbuhan customer base dengan melihat jumlah customer baru per periode. Monitor growth rate untuk mengukur efektivitas strategi acquisition marketing. ")])],-1)),B.value&&B.value.trends&&B.value.trends.length>0?(o(),r("div",Ul,[e("div",ql,[e("div",zl,[t[151]||(t[151]=e("div",{class:"text-sm text-gray-600 mb-1"},"Total New Customers",-1)),e("div",$l,a(B.value.summary.total_new_customers),1),t[152]||(t[152]=e("div",{class:"text-xs text-gray-500 mt-1"},"In selected period",-1))]),e("div",Ql,[t[153]||(t[153]=e("div",{class:"text-sm text-gray-600 mb-1"},"Avg per Period",-1)),e("div",Hl,a(B.value.summary.avg_new_customers_per_period),1),t[154]||(t[154]=e("div",{class:"text-xs text-gray-500 mt-1"},"Customers",-1))]),e("div",Wl,[t[155]||(t[155]=e("div",{class:"text-sm text-gray-600 mb-1"},"Total Periods",-1)),e("div",Gl,a(B.value.summary.total_periods),1),t[156]||(t[156]=e("div",{class:"text-xs text-gray-500 mt-1"},"Periods analyzed",-1))])]),e("div",Kl,[t[158]||(t[158]=e("div",{class:"text-sm font-semibold text-gray-700 mb-3"},"Acquisition Trends (Last 10 Periods)",-1)),e("div",Jl,[(o(!0),r(S,null,D(B.value.trends.slice(-10),(s,n)=>(o(),r("div",{key:n,class:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200"},[e("div",Yl,[e("div",Xl,a(s.period_label),1),e("div",Zl,[e("i",{class:N([{"fa-arrow-up text-green-500":s.trend==="up","fa-arrow-down text-red-500":s.trend==="down","fa-minus text-gray-400":s.trend==="stable"},"fa-solid text-xs"])},null,2),e("span",{class:N([{"text-green-600":s.trend==="up","text-red-600":s.trend==="down","text-gray-500":s.trend==="stable"},"text-xs font-semibold"])},a(s.growth_rate>0?"+":"")+a(s.growth_rate)+"% ",3)])]),e("div",er,[e("div",tr,a(s.new_customers),1),t[157]||(t[157]=e("div",{class:"text-xs text-gray-500"},"new customers",-1))])]))),128))])])])):re.value?(o(),r("div",sr,t[159]||(t[159]=[e("i",{class:"fa-solid fa-spinner fa-spin text-4xl mb-2 opacity-50"},null,-1),e("p",{class:"text-sm"},"Loading acquisition trends...",-1)]))):(o(),r("div",ar,t[160]||(t[160]=[e("i",{class:"fa-solid fa-user-plus text-4xl mb-2 opacity-50"},null,-1),e("p",{class:"text-sm"},"No acquisition trends data available",-1)])))])]),e("div",or,[e("div",lr,[t[165]||(t[165]=e("div",{class:"flex items-start justify-between mb-4"},[e("div",null,[e("h3",{class:"text-xl font-bold text-gray-800 mb-2"},[e("i",{class:"fa-solid fa-map-marked-alt text-red-500 mr-2"}),i(" Analysis by Region ")]),e("p",{class:"text-sm text-gray-600"}," Performa marketing per region untuk mengidentifikasi region dengan potensi terbesar dan area yang perlu perhatian lebih. ")])],-1)),Z.value&&Z.value.length>0?(o(),r("div",rr,[e("div",nr,[e("table",ir,[t[162]||(t[162]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Region"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Orders"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Unique Customers"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Revenue"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Avg Order Value"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Promo Usage"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Discount")])],-1)),e("tbody",dr,[(o(!0),r(S,null,D(Z.value,(s,n)=>(o(),r("tr",{key:s.region_id,class:"hover:bg-gray-50 cursor-pointer",onClick:b=>{ne.value=s.region_id,ke()}},[e("td",mr,[e("div",xr,[e("div",pr,a(n+1),1),e("div",gr,a(s.region_name),1)])]),e("td",cr,a(s.total_orders),1),e("td",vr,a(s.unique_customers),1),e("td",br,a(u(s.total_revenue)),1),e("td",yr,a(u(s.avg_order_value)),1),e("td",fr,[e("div",_r,[e("span",{class:N(["text-sm font-semibold",s.promo_usage_percentage>=50?"text-green-600":s.promo_usage_percentage>=30?"text-yellow-600":"text-red-600"])},a(s.promo_usage_percentage)+"% ",3),e("span",hr,"("+a(s.orders_with_promo)+"/"+a(s.total_orders)+")",1)])]),e("td",wr,a(u(s.total_discount+s.total_manual_discount)),1)],8,ur))),128))])])])])):ce.value?(o(),r("div",kr,t[163]||(t[163]=[e("i",{class:"fa-solid fa-spinner fa-spin text-4xl mb-2 opacity-50"},null,-1),e("p",{class:"text-sm"},"Loading region analysis...",-1)]))):(o(),r("div",Cr,t[164]||(t[164]=[e("i",{class:"fa-solid fa-map-marked-alt text-4xl mb-2 opacity-50"},null,-1),e("p",{class:"text-sm"},"No region data available",-1)])))]),e("div",Ar,[e("div",Mr,[e("div",Rr,[t[167]||(t[167]=e("h3",{class:"text-xl font-bold text-gray-800 mb-2"},[e("i",{class:"fa-solid fa-store text-blue-500 mr-2"}),i(" Analysis by Outlet ")],-1)),e("p",jr,[t[166]||(t[166]=i(" Performa marketing per outlet untuk melihat outlet terbaik dan yang perlu ditingkatkan. ")),ne.value?(o(),r("span",Sr,"Filtered by selected region.")):(o(),r("span",Dr,"Showing all outlets."))])]),ne.value?(o(),r("button",{key:0,onClick:t[2]||(t[2]=s=>{ne.value=null,ke()}),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition text-sm"},t[168]||(t[168]=[e("i",{class:"fa-solid fa-times mr-2"},null,-1),i(" Clear Filter ")]))):v("",!0)]),ee.value&&ee.value.length>0?(o(),r("div",Pr,[e("div",Fr,[e("table",Or,[t[169]||(t[169]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Outlet"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Region"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Orders"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Unique Customers"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Revenue"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Avg Order Value"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Avg Per Pax"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Promo Usage"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Discount")])],-1)),e("tbody",Tr,[(o(!0),r(S,null,D(ee.value,(s,n)=>(o(),r("tr",{key:s.outlet_id,class:"hover:bg-gray-50"},[e("td",Ir,[e("div",Nr,[e("div",Lr,a(n+1),1),e("div",null,[e("div",Vr,a(s.outlet_name),1),e("div",Er,a(s.outlet_code),1)])])]),e("td",Br,a(s.region_name||"N/A"),1),e("td",Ur,a(s.total_orders),1),e("td",qr,a(s.unique_customers),1),e("td",zr,a(u(s.total_revenue)),1),e("td",$r,a(u(s.avg_order_value)),1),e("td",Qr,a(u(s.total_pax>0?s.total_revenue/s.total_pax:0)),1),e("td",Hr,[e("div",Wr,[e("span",{class:N(["text-sm font-semibold",s.promo_usage_percentage>=50?"text-green-600":s.promo_usage_percentage>=30?"text-yellow-600":"text-red-600"])},a(s.promo_usage_percentage)+"% ",3),e("span",Gr,"("+a(s.orders_with_promo)+"/"+a(s.total_orders)+")",1)])]),e("td",Kr,a(u(s.total_discount+s.total_manual_discount)),1)]))),128))])])])])):ce.value?(o(),r("div",Jr,t[170]||(t[170]=[e("i",{class:"fa-solid fa-spinner fa-spin text-4xl mb-2 opacity-50"},null,-1),e("p",{class:"text-sm"},"Loading outlet analysis...",-1)]))):(o(),r("div",Yr,t[171]||(t[171]=[e("i",{class:"fa-solid fa-store text-4xl mb-2 opacity-50"},null,-1),e("p",{class:"text-sm"},"No outlet data available",-1)])))])])])):v("",!0)])]),ye.value?(o(),r("div",{key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:Be(Ce,["self"])},[e("div",Xr,[e("div",Zr,[e("div",null,[e("h3",en,[t[172]||(t[172]=e("i",{class:"fa-solid fa-users-gear text-indigo-500 mr-2"},null,-1)),i(" Detail "+a(oe.value)+" Customers ",1)]),t[173]||(t[173]=e("p",{class:"text-sm text-gray-500 mt-1"}," RFM Score menunjukkan kombinasi Recency, Frequency, dan Monetary value customer ",-1))]),e("button",{onClick:Ce,class:"text-gray-400 hover:text-gray-600"},t[174]||(t[174]=[e("i",{class:"fa-solid fa-times text-2xl"},null,-1)]))]),t[191]||(t[191]=e("div",{class:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4 mb-4"},[e("div",{class:"mb-3"},[e("p",{class:"text-sm font-semibold text-blue-700 mb-2"},[e("i",{class:"fa-solid fa-info-circle mr-2"}),i("Penjelasan Lengkap RFM Score ")]),e("p",{class:"text-xs text-gray-700 mb-3"},[e("strong",null,"RFM Analysis"),i(" adalah metode segmentasi customer berdasarkan 3 dimensi, masing-masing dengan skor 1-4: ")])]),e("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3"},[e("div",{class:"bg-white rounded-lg p-3 border border-blue-100"},[e("p",{class:"text-xs font-bold text-blue-700 mb-2"},"R (Recency)"),e("p",{class:"text-xs text-gray-600 mb-2"},"Kapan terakhir kali customer berbelanja"),e("ul",{class:"text-xs text-gray-600 space-y-1"},[e("li",null,[e("strong",null,"Score 4:"),i(" Baru-baru ini (Q1 - 25% teratas)")]),e("li",null,[e("strong",null,"Score 3:"),i(" Cukup baru (Q2)")]),e("li",null,[e("strong",null,"Score 2:"),i(" Sudah agak lama (Q3)")]),e("li",null,[e("strong",null,"Score 1:"),i(" Sudah lama sekali (Q4 - 25% terbawah)")])]),e("p",{class:"text-xs text-gray-500 mt-2 italic"},"Semakin rendah hari sejak belanja terakhir = Score lebih tinggi")]),e("div",{class:"bg-white rounded-lg p-3 border border-green-100"},[e("p",{class:"text-xs font-bold text-green-700 mb-2"},"F (Frequency)"),e("p",{class:"text-xs text-gray-600 mb-2"},"Seberapa sering customer berbelanja"),e("ul",{class:"text-xs text-gray-600 space-y-1"},[e("li",null,[e("strong",null,"Score 4:"),i(" Sangat sering (Q4 - 25% teratas)")]),e("li",null,[e("strong",null,"Score 3:"),i(" Sering (Q3)")]),e("li",null,[e("strong",null,"Score 2:"),i(" Cukup sering (Q2)")]),e("li",null,[e("strong",null,"Score 1:"),i(" Jarang (Q1 - 25% terbawah)")])]),e("p",{class:"text-xs text-gray-500 mt-2 italic"},"Semakin banyak order = Score lebih tinggi")]),e("div",{class:"bg-white rounded-lg p-3 border border-purple-100"},[e("p",{class:"text-xs font-bold text-purple-700 mb-2"},"M (Monetary)"),e("p",{class:"text-xs text-gray-600 mb-2"},"Total nilai pembelian customer"),e("ul",{class:"text-xs text-gray-600 space-y-1"},[e("li",null,[e("strong",null,"Score 4:"),i(" Sangat besar (Q4 - 25% teratas)")]),e("li",null,[e("strong",null,"Score 3:"),i(" Besar (Q3)")]),e("li",null,[e("strong",null,"Score 2:"),i(" Sedang (Q2)")]),e("li",null,[e("strong",null,"Score 1:"),i(" Kecil (Q1 - 25% terbawah)")])]),e("p",{class:"text-xs text-gray-500 mt-2 italic"},"Semakin besar total belanja = Score lebih tinggi")])]),e("div",{class:"bg-white rounded-lg p-3 border border-yellow-200 mb-3"},[e("p",{class:"text-xs font-bold text-yellow-700 mb-2"},[e("i",{class:"fa-solid fa-lightbulb mr-2"}),i("Format Score & Contoh ")]),e("p",{class:"text-xs text-gray-700 mb-2"},[e("strong",null,"Format Score:"),i(),e("span",{class:"px-2 py-1 bg-blue-100 text-blue-800 rounded font-mono"},"R4F3M4"),i(" = Recency Score 4, Frequency Score 3, Monetary Score 4 ")]),e("p",{class:"text-xs text-gray-700"},[e("strong",null,"Contoh:"),i(" Score "),e("span",{class:"px-2 py-1 bg-blue-100 text-blue-800 rounded font-mono"},"R4F3M4"),i(" berarti customer belanja baru-baru ini (R4), cukup sering (F3), dan nilai belanja besar (M4) - termasuk kategori "),e("strong",null,"Champions"),i(". ")])]),e("div",{class:"bg-white rounded-lg p-3 border border-indigo-200"},[e("p",{class:"text-xs font-bold text-indigo-700 mb-2"},[e("i",{class:"fa-solid fa-users mr-2"}),i("Segmentasi Customer ")]),e("ul",{class:"text-xs text-gray-600 space-y-1"},[e("li",null,[e("strong",null,"Champions (Râ‰¥3, Fâ‰¥3, Mâ‰¥3):"),i(" Customer terbaik - belanja baru, sering, dan besar. Prioritaskan untuk program VIP/exclusive.")]),e("li",null,[e("strong",null,"Loyal (Râ‰¥2, Fâ‰¥3):"),i(" Customer setia yang sering belanja. Berikan reward/loyalty program untuk meningkatkan nilai transaksi.")]),e("li",null,[e("strong",null,"At Risk (Râ‰¤2, Fâ‰¥2):"),i(" Dulu sering belanja tapi sudah lama tidak. Butuh re-engagement campaign untuk mengembalikan.")]),e("li",null,[e("strong",null,"Lost (Râ‰¤2, Fâ‰¤2):"),i(" Sudah lama tidak belanja dan jarang. Fokus pada win-back campaign atau mungkin sudah pindah ke kompetitor.")])])]),e("div",{class:"mt-3 text-xs text-gray-500 italic bg-white rounded p-2 border border-gray-200"},[e("p",null,[e("strong",null,"Catatan:"),i(" Score dihitung menggunakan quartile (Q1, Q2, Q3, Q4) dari semua customer dalam periode yang dipilih. Setiap score (1-4) mewakili quartile dari distribusi data customer.")])])],-1)),e("div",tn,[e("div",sn,[e("div",null,[t[175]||(t[175]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),C(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>_.value.search=s),onInput:ie,placeholder:"Nama atau Phone...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,544),[[q,_.value.search]])]),e("div",null,[t[176]||(t[176]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Revenue Range",-1)),e("div",an,[C(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=s=>_.value.min_revenue=s),onInput:ie,placeholder:"Min",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,544),[[q,_.value.min_revenue,void 0,{number:!0}]]),C(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=s=>_.value.max_revenue=s),onInput:ie,placeholder:"Max",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,544),[[q,_.value.max_revenue,void 0,{number:!0}]])])]),e("div",null,[t[177]||(t[177]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Orders Range",-1)),e("div",on,[C(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=s=>_.value.min_orders=s),onInput:ie,placeholder:"Min",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,544),[[q,_.value.min_orders,void 0,{number:!0}]]),C(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=s=>_.value.max_orders=s),onInput:ie,placeholder:"Max",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,544),[[q,_.value.max_orders,void 0,{number:!0}]])])])]),e("div",ln,[e("div",rn,[e("div",null,[t[179]||(t[179]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Sort By",-1)),C(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>G.value.sort_by=s),onChange:H,class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[178]||(t[178]=[e("option",{value:"total_revenue"},"Total Revenue",-1),e("option",{value:"total_orders"},"Total Orders",-1),e("option",{value:"last_order_date"},"Last Order",-1),e("option",{value:"recency_days"},"Recency Days",-1),e("option",{value:"avg_order_value"},"Avg Order Value",-1)]),544),[[se,G.value.sort_by]])]),e("div",null,[t[181]||(t[181]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Order",-1)),C(e("select",{"onUpdate:modelValue":t[9]||(t[9]=s=>G.value.sort_order=s),onChange:H,class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[180]||(t[180]=[e("option",{value:"desc"},"Descending",-1),e("option",{value:"asc"},"Ascending",-1)]),544),[[se,G.value.sort_order]])])]),e("div",null,[t[183]||(t[183]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Per Page",-1)),C(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>xe.value=s),onChange:t[11]||(t[11]=s=>{p.value.current_page=1,H()}),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[182]||(t[182]=[e("option",{value:10},"10",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1),e("option",{value:100},"100",-1)]),544),[[se,xe.value,void 0,{number:!0}]])])])]),me.value?(o(),r("div",nn,t[184]||(t[184]=[e("i",{class:"fa fa-spinner fa-spin text-4xl text-blue-500"},null,-1)]))):J.value.length===0?(o(),r("div",dn,t[185]||(t[185]=[e("i",{class:"fa-solid fa-inbox text-6xl mb-4 opacity-50"},null,-1),e("p",{class:"text-lg"},"Tidak ada data customer untuk segment ini",-1)]))):(o(),r("div",un,[e("table",mn,[t[186]||(t[186]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nama Customer"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Phone"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Orders"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Revenue"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Last Order"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Avg Order Value"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"RFM Score")])],-1)),e("tbody",xn,[(o(!0),r(S,null,D(J.value,(s,n)=>(o(),r("tr",{key:s.id||n,class:"hover:bg-gray-50"},[e("td",pn,a((p.value.current_page-1)*p.value.per_page+n+1),1),e("td",gn,a(s.name||"N/A"),1),e("td",cn,a(s.phone||"N/A"),1),e("td",vn,a(s.total_orders||0),1),e("td",bn,a(u(s.total_revenue||0)),1),e("td",yn,a(s.last_order_date||"N/A"),1),e("td",fn,a(u(s.avg_order_value||0)),1),e("td",_n,[e("span",{class:N(["px-2 py-1 text-xs font-semibold rounded-full",st(s.rfm_score)])},a(s.rfm_score||"N/A"),3)])]))),128))])])])),p.value.total_pages>1?(o(),r("div",hn,[e("div",wn," Menampilkan "+a(p.value.from)+" sampai "+a(p.value.to)+" dari "+a(p.value.total)+" customer ",1),e("div",kn,[e("button",{onClick:t[12]||(t[12]=s=>{p.value.current_page=1,H()}),disabled:p.value.current_page===1,class:"px-3 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"},t[187]||(t[187]=[e("i",{class:"fa-solid fa-angle-double-left"},null,-1)]),8,Cn),e("button",{onClick:t[13]||(t[13]=s=>{p.value.current_page--,H()}),disabled:p.value.current_page===1,class:"px-3 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"},t[188]||(t[188]=[e("i",{class:"fa-solid fa-angle-left"},null,-1)]),8,An),e("span",Mn," Page "+a(p.value.current_page)+" of "+a(p.value.total_pages),1),e("button",{onClick:t[14]||(t[14]=s=>{p.value.current_page++,H()}),disabled:p.value.current_page>=p.value.total_pages,class:"px-3 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"},t[189]||(t[189]=[e("i",{class:"fa-solid fa-angle-right"},null,-1)]),8,Rn),e("button",{onClick:t[15]||(t[15]=s=>{p.value.current_page=p.value.total_pages,H()}),disabled:p.value.current_page>=p.value.total_pages,class:"px-3 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"},t[190]||(t[190]=[e("i",{class:"fa-solid fa-angle-double-right"},null,-1)]),8,jn)])])):v("",!0),e("div",{class:"mt-6 flex justify-end"},[e("button",{onClick:Ce,class:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition"}," Tutup ")])])])):v("",!0),pe.value?(o(),r("div",{key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:Be(Me,["self"])},[e("div",Sn,[e("div",Dn,[e("h3",Pn,[e("i",{class:N(["fa-solid fa-receipt mr-2",P.value==="promo"?"text-purple-500":"text-orange-500"])},null,2),i(" "+a(P.value==="promo"?"Promo Transactions":"Manual Discount Transactions"),1)]),e("button",{onClick:Me,class:"text-gray-400 hover:text-gray-600"},t[192]||(t[192]=[e("i",{class:"fa-solid fa-times text-2xl"},null,-1)]))]),P.value==="promo"&&V.value?(o(),r("div",Fn,[e("div",On,a(V.value.name),1),e("div",Tn,a(V.value.code)+" â€¢ "+a(V.value.type)+" â€¢ Usage: "+a(V.value.usage_count)+"x",1)])):v("",!0),P.value==="manual_discount"&&$.value?(o(),r("div",In,[e("div",Nn,a($.value.reason),1),e("div",Ln,"Usage: "+a($.value.usage_count)+" orders â€¢ Total Discount: "+a(u($.value.total_discount)),1)])):v("",!0),e("div",Vn,[e("div",null,[t[193]||(t[193]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),C(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>A.value.search=s),onInput:Ae,type:"text",placeholder:"Order No / Member ID",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,544),[[q,A.value.search]])]),e("div",null,[t[194]||(t[194]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Min Amount",-1)),C(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>A.value.min_amount=s),onInput:Ae,type:"number",placeholder:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,544),[[q,A.value.min_amount]])]),e("div",null,[t[195]||(t[195]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Max Amount",-1)),C(e("input",{"onUpdate:modelValue":t[18]||(t[18]=s=>A.value.max_amount=s),onInput:Ae,type:"number",placeholder:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,544),[[q,A.value.max_amount]])]),e("div",null,[t[197]||(t[197]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Per Page",-1)),C(e("select",{"onUpdate:modelValue":t[19]||(t[19]=s=>X.value=s),onChange:t[20]||(t[20]=s=>{c.value.current_page=1,U()}),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},t[196]||(t[196]=[e("option",{value:10},"10",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1),e("option",{value:100},"100",-1)]),544),[[se,X.value]])])]),e("div",En,[e("div",Bn,[t[199]||(t[199]=e("label",{class:"text-sm font-medium text-gray-700"},"Sort By:",-1)),C(e("select",{"onUpdate:modelValue":t[21]||(t[21]=s=>Q.value.sort_by=s),onChange:t[22]||(t[22]=s=>U()),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},t[198]||(t[198]=[e("option",{value:"created_at"},"Date",-1),e("option",{value:"grand_total"},"Amount",-1),e("option",{value:"discount"},"Discount",-1),e("option",{value:"nomor"},"Order No",-1)]),544),[[se,Q.value.sort_by]])]),e("div",Un,[t[201]||(t[201]=e("label",{class:"text-sm font-medium text-gray-700"},"Order:",-1)),C(e("select",{"onUpdate:modelValue":t[23]||(t[23]=s=>Q.value.sort_order=s),onChange:t[24]||(t[24]=s=>U()),class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},t[200]||(t[200]=[e("option",{value:"desc"},"Descending",-1),e("option",{value:"asc"},"Ascending",-1)]),544),[[se,Q.value.sort_order]])])]),ge.value?(o(),r("div",qn,t[202]||(t[202]=[e("i",{class:"fa-solid fa-spinner fa-spin text-4xl text-purple-500 mb-4"},null,-1),e("p",{class:"text-gray-500"},"Loading transactions...",-1)]))):Y.value.length>0?(o(),r("div",zn,[e("table",$n,[e("thead",Qn,[e("tr",null,[t[203]||(t[203]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"#",-1)),t[204]||(t[204]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Order No",-1)),t[205]||(t[205]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date",-1)),t[206]||(t[206]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Member ID",-1)),t[207]||(t[207]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Outlet Code",-1)),t[208]||(t[208]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Outlet Name",-1)),t[209]||(t[209]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Grand Total",-1)),t[210]||(t[210]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Discount",-1)),P.value==="manual_discount"?(o(),r("th",Hn,"Manual Discount")):v("",!0),P.value==="manual_discount"?(o(),r("th",Wn,"Reason")):v("",!0)])]),e("tbody",Gn,[(o(!0),r(S,null,D(Y.value,(s,n)=>(o(),r("tr",{key:s.id||n,class:"hover:bg-gray-50"},[e("td",Kn,a((c.value.current_page-1)*c.value.per_page+n+1),1),e("td",Jn,a(s.nomor||"N/A"),1),e("td",Yn,a(s.created_at?new Date(s.created_at).toLocaleString("id-ID"):"N/A"),1),e("td",Xn,a(s.member_id||"Non-Member"),1),e("td",Zn,a(s.kode_outlet||"N/A"),1),e("td",ei,a(s.nama_outlet||"N/A"),1),e("td",ti,a(u(s.grand_total||0)),1),e("td",si,a(u(s.discount||0)),1),P.value==="manual_discount"?(o(),r("td",ai,a(u(s.manual_discount_amount||0)),1)):v("",!0),P.value==="manual_discount"?(o(),r("td",oi,a(s.manual_discount_reason||"N/A"),1)):v("",!0)]))),128))])])])):ge.value?v("",!0):(o(),r("div",li,t[211]||(t[211]=[e("i",{class:"fa-solid fa-inbox text-4xl mb-2 opacity-50"},null,-1),e("p",null,"No transactions found",-1)]))),c.value.total_pages>1?(o(),r("div",ri,[e("div",ni," Menampilkan "+a(c.value.from)+" sampai "+a(c.value.to)+" dari "+a(c.value.total)+" transaksi ",1),e("div",ii,[e("button",{onClick:t[25]||(t[25]=s=>{c.value.current_page=1,U()}),disabled:c.value.current_page===1,class:"px-3 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"},t[212]||(t[212]=[e("i",{class:"fa-solid fa-angle-double-left"},null,-1)]),8,di),e("button",{onClick:t[26]||(t[26]=s=>{c.value.current_page--,U()}),disabled:c.value.current_page===1,class:"px-3 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"},t[213]||(t[213]=[e("i",{class:"fa-solid fa-angle-left"},null,-1)]),8,ui),e("span",mi," Page "+a(c.value.current_page)+" of "+a(c.value.total_pages),1),e("button",{onClick:t[27]||(t[27]=s=>{c.value.current_page++,U()}),disabled:c.value.current_page>=c.value.total_pages,class:"px-3 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"},t[214]||(t[214]=[e("i",{class:"fa-solid fa-angle-right"},null,-1)]),8,xi),e("button",{onClick:t[28]||(t[28]=s=>{c.value.current_page=c.value.total_pages,U()}),disabled:c.value.current_page>=c.value.total_pages,class:"px-3 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"},t[215]||(t[215]=[e("i",{class:"fa-solid fa-angle-double-right"},null,-1)]),8,pi)])])):v("",!0),e("div",{class:"mt-6 flex justify-end"},[e("button",{onClick:Me,class:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition"}," Tutup ")])])])):v("",!0)]),_:1})}}}),Mi=xt(ci,[["__scopeId","data-v-ddcc5cc6"]]);export{Mi as default};
