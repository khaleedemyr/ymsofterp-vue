import{r as C,A as M,B as i,C as Q,D as t,x as q,L as o,E as a,N as n,l as D,F as u,M as g,G as d,Q as J,W as $}from"./vendor-vue-g7iCcTkf.js";import{A as K}from"./AppLayout-BqaX40sL.js";import{N as X}from"./vue-easy-lightbox.esm.min-H9agbAmC.js";import"./vendor-utils-CpgP2uT4.js";import"./app-BoSIlzLW.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CY3nv2ep.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const Y={class:"w-full py-8 px-4"},Z={class:"max-w-6xl mx-auto"},tt={class:"flex items-center justify-between mb-8"},et={class:"flex items-center gap-4"},st={class:"text-gray-600"},nt={class:"flex items-center gap-3"},it={class:"bg-white rounded-2xl shadow-lg p-6 mb-8"},ot={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},lt={class:"text-gray-800 font-semibold"},at={class:"text-gray-800 font-semibold"},dt={class:"text-gray-800 font-semibold"},rt={class:"text-gray-800 font-semibold"},mt={class:"text-gray-800 font-semibold"},ut={class:"text-gray-800 font-semibold"},gt={key:0,class:"mt-6 pt-6 border-t border-gray-200"},ct={class:"flex flex-wrap gap-2"},xt={class:"bg-white rounded-2xl shadow-lg p-6"},pt={class:"flex items-center justify-between mb-6"},bt={key:0,class:"space-y-4"},ft={class:"flex items-start justify-between"},yt={class:"flex-1"},vt={class:"flex items-center gap-3 mb-2"},_t={class:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold"},ht={class:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold"},kt={class:"space-y-2"},wt={class:"text-gray-800"},Ct={class:"text-gray-800"},Dt={class:"text-gray-800"},$t={key:0},Pt={class:"text-gray-800"},jt={key:0,class:"ml-4"},At={class:"flex gap-2"},Ft=["src","alt","onClick"],Nt=["onClick"],Lt={key:1,class:"text-center py-8 text-gray-500"},St={key:0,class:"mt-8"},Bt={class:"bg-white rounded-2xl shadow-lg p-6"},Et={class:"flex items-center gap-3 mb-6"},Vt={class:"text-sm text-gray-500"},Ot={class:"space-y-6"},Rt={class:"flex items-start justify-between mb-4"},Tt={class:"flex-1"},It={class:"font-semibold text-gray-800 mb-2"},Ut={class:"flex items-center gap-4 text-sm text-gray-600"},Wt={class:"text-sm text-gray-500"},zt={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4"},Gt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},Ht={class:"text-gray-800"},Mt={class:"text-gray-800"},Qt={class:"text-gray-800"},qt={key:0,class:"mt-3"},Jt={class:"text-gray-800 bg-white p-2 rounded border text-sm"},Kt={key:1,class:"mt-3"},Xt={class:"flex gap-2 mt-2"},Yt=["src","alt","onClick"],Zt={class:"flex items-center justify-between mt-3 pt-3 border-t border-blue-200"},te={class:"text-xs text-blue-600"},ee={class:"text-xs text-blue-600"},se={class:"mb-4"},ne={class:"text-gray-800 bg-white p-3 rounded-lg border"},ie={key:0,class:"mb-4"},oe={class:"text-gray-800 bg-white p-3 rounded-lg border"},le={key:1,class:"mb-4"},ae={class:"text-sm font-medium text-gray-500 mb-2"},de={class:"flex gap-2 flex-wrap"},re=["src","alt","onClick"],me=["onClick"],ue={class:"flex items-center justify-between pt-4 border-t border-gray-200"},ge={class:"text-sm text-gray-500"},ce={key:0,class:"text-sm text-green-600"},xe={key:1,class:"mt-8 flex justify-end"},$e={__name:"Show",props:{inspection:Object},setup(l){const P=l,_=C(!1),j=C(0),A=C([]);function W(){$.visit("/inspections")}function z(){$.visit(`/inspections/${P.inspection.id}/add-finding`)}function G(){$.patch(route("inspections.complete",P.inspection.id))}function c(F,e=0){A.value=F,j.value=e,_.value=!0}function H(){_.value=!1}return(F,e)=>(i(),M(K,{title:"Inspection Details"},{default:Q(()=>{var N,L,S;return[t("div",Y,[t("div",Z,[t("div",tt,[t("div",et,[t("button",{onClick:W,class:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition"},e[1]||(e[1]=[t("i",{class:"fa-solid fa-arrow-left text-xl"},null,-1)])),t("div",null,[e[2]||(e[2]=t("h1",{class:"text-2xl font-bold text-gray-800"},"Inspection Details",-1)),t("p",st,n(((N=l.inspection.guidance)==null?void 0:N.title)||"Inspection"),1)])]),t("div",nt,[t("span",{class:D(["px-3 py-1 rounded-full text-sm font-semibold",l.inspection.status==="Draft"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"])},n(l.inspection.status),3)])]),t("div",it,[e[11]||(e[11]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Inspection Information",-1)),t("div",ot,[t("div",null,[e[3]||(e[3]=t("label",{class:"text-sm font-medium text-gray-500"},"Outlet",-1)),t("p",lt,n(((L=l.inspection.outlet)==null?void 0:L.nama_outlet)||"-"),1)]),t("div",null,[e[4]||(e[4]=t("label",{class:"text-sm font-medium text-gray-500"},"Department",-1)),t("p",at,n(l.inspection.departemen),1)]),t("div",null,[e[5]||(e[5]=t("label",{class:"text-sm font-medium text-gray-500"},"Inspector",-1)),t("p",dt,n(((S=l.inspection.created_by_user)==null?void 0:S.nama_lengkap)||"-"),1)]),t("div",null,[e[6]||(e[6]=t("label",{class:"text-sm font-medium text-gray-500"},"Date",-1)),t("p",rt,n(new Date(l.inspection.inspection_date).toLocaleDateString()),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"text-sm font-medium text-gray-500"},"Total Findings",-1)),t("p",mt,n(l.inspection.total_findings),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"text-sm font-medium text-gray-500"},"Total Points",-1)),t("p",ut,n(l.inspection.total_points),1)])]),l.inspection.auditees&&l.inspection.auditees.length>0?(i(),o("div",gt,[e[10]||(e[10]=t("h4",{class:"text-md font-semibold text-gray-800 mb-3"},"Auditees",-1)),t("div",ct,[(i(!0),o(u,null,g(l.inspection.auditees,s=>(i(),o("span",{key:s.id,class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800"},[e[9]||(e[9]=t("i",{class:"fa-solid fa-user mr-2"},null,-1)),d(" "+n(s.nama_lengkap),1)]))),128))])])):a("",!0)]),t("div",xt,[t("div",pt,[e[13]||(e[13]=t("h3",{class:"text-lg font-semibold text-gray-800"},"Findings",-1)),l.inspection.status==="Draft"?(i(),o("button",{key:0,onClick:z,class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition"},e[12]||(e[12]=[t("i",{class:"fa-solid fa-plus mr-2"},null,-1),d(" Add Finding ")]))):a("",!0)]),l.inspection.details&&l.inspection.details.length>0?(i(),o("div",bt,[(i(!0),o(u,null,g(l.inspection.details,(s,h)=>{var x,p;return i(),o("div",{key:s.id,class:"border border-gray-200 rounded-xl p-4"},[t("div",ft,[t("div",yt,[t("div",vt,[t("span",_t," Finding #"+n(h+1),1),t("span",ht,n(s.point)+" Points ",1)]),t("div",kt,[t("div",null,[e[14]||(e[14]=t("label",{class:"text-sm font-medium text-gray-500"},"Category",-1)),t("p",wt,n(((x=s.category)==null?void 0:x.categories)||"-"),1)]),t("div",null,[e[15]||(e[15]=t("label",{class:"text-sm font-medium text-gray-500"},"Parameter Pemeriksaan",-1)),t("p",Ct,n(s.parameter_pemeriksaan),1)]),t("div",null,[e[16]||(e[16]=t("label",{class:"text-sm font-medium text-gray-500"},"Parameter",-1)),t("p",Dt,n(((p=s.parameter)==null?void 0:p.parameter)||"-"),1)]),s.notes?(i(),o("div",$t,[e[17]||(e[17]=t("label",{class:"text-sm font-medium text-gray-500"},"Notes",-1)),t("p",Pt,n(s.notes),1)])):a("",!0)])]),s.photo_paths&&s.photo_paths.length>0?(i(),o("div",jt,[t("div",At,[(i(!0),o(u,null,g(s.photo_paths.slice(0,3),(b,m)=>(i(),o("img",{key:m,src:`/storage/${b}`,alt:`Photo ${m+1}`,class:"w-16 h-16 object-cover rounded-lg border border-gray-200 cursor-pointer hover:opacity-80 transition",onClick:k=>c(s.photo_paths.map(v=>`/storage/${v}`),m)},null,8,Ft))),128)),s.photo_paths.length>3?(i(),o("div",{key:0,class:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center text-xs text-gray-500 cursor-pointer hover:bg-gray-200 transition",onClick:b=>c(s.photo_paths.map(m=>`/storage/${m}`),3)}," +"+n(s.photo_paths.length-3),9,Nt)):a("",!0)])])):a("",!0)])])}),128))])):(i(),o("div",Lt,e[18]||(e[18]=[t("i",{class:"fa-solid fa-camera text-4xl mb-2"},null,-1),t("p",null,"No findings yet",-1),t("p",{class:"text-sm"},"Start adding findings to this inspection",-1)])))]),l.inspection.cpas&&l.inspection.cpas.length>0?(i(),o("div",St,[t("div",Bt,[t("div",Et,[e[20]||(e[20]=t("div",{class:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center"},[t("i",{class:"fa-solid fa-clipboard-list text-purple-600"})],-1)),t("div",null,[e[19]||(e[19]=t("h3",{class:"text-xl font-bold text-gray-800"},"Corrective and Preventive Action (CPA)",-1)),t("p",Vt,n(l.inspection.cpas.length)+" CPA record(s) found",1)])]),t("div",Ot,[(i(!0),o(u,null,g(l.inspection.cpas,(s,h)=>{var x,p,b,m,k,v,B,E,V,O,R,T,I,U;return i(),o("div",{key:s.id,class:"border border-gray-200 rounded-xl p-6 bg-gray-50"},[t("div",Rt,[t("div",Tt,[t("h4",It,"CPA #"+n(h+1),1),t("div",Ut,[t("span",null,[e[21]||(e[21]=t("i",{class:"fa-solid fa-user mr-1"},null,-1)),d(" "+n(s.responsible_person),1)]),t("span",null,[e[22]||(e[22]=t("i",{class:"fa-solid fa-calendar mr-1"},null,-1)),d(" Due: "+n(new Date(s.due_date).toLocaleDateString()),1)]),t("span",{class:D(["px-2 py-1 rounded-full text-xs font-medium",s.status==="Completed"?"bg-green-100 text-green-800":s.status==="Open"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"])},n(s.status),3)])]),t("div",Wt,[e[23]||(e[23]=t("i",{class:"fa-solid fa-clock mr-1"},null,-1)),d(" "+n(new Date(s.created_at).toLocaleDateString()),1)])]),t("div",zt,[e[32]||(e[32]=t("div",{class:"flex items-center gap-2 mb-3"},[t("i",{class:"fa-solid fa-search text-blue-600"}),t("h5",{class:"font-semibold text-blue-800"},"Associated Finding Details")],-1)),t("div",Gt,[t("div",null,[e[24]||(e[24]=t("label",{class:"font-medium text-blue-700"},"Category:",-1)),t("p",Ht,n(((p=(x=s.inspection_detail)==null?void 0:x.category)==null?void 0:p.categories)||"-"),1)]),t("div",null,[e[25]||(e[25]=t("label",{class:"font-medium text-blue-700"},"Parameter Pemeriksaan:",-1)),t("p",Mt,n(((b=s.inspection_detail)==null?void 0:b.parameter_pemeriksaan)||"-"),1)]),t("div",null,[e[26]||(e[26]=t("label",{class:"font-medium text-blue-700"},"Parameter:",-1)),t("p",Qt,n(((k=(m=s.inspection_detail)==null?void 0:m.parameter)==null?void 0:k.parameter)||"-"),1)]),t("div",null,[e[27]||(e[27]=t("label",{class:"font-medium text-blue-700"},"Finding Status:",-1)),t("span",{class:D(["px-2 py-1 rounded-full text-xs font-medium",((v=s.inspection_detail)==null?void 0:v.status)==="Non-Compliance"?"bg-red-100 text-red-800":((B=s.inspection_detail)==null?void 0:B.status)==="Compliance"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},n(((E=s.inspection_detail)==null?void 0:E.status)||"-"),3)])]),(V=s.inspection_detail)!=null&&V.notes?(i(),o("div",qt,[e[28]||(e[28]=t("label",{class:"font-medium text-blue-700"},"Finding Notes:",-1)),t("p",Jt,n(s.inspection_detail.notes),1)])):a("",!0),(O=s.inspection_detail)!=null&&O.photo_paths&&s.inspection_detail.photo_paths.length>0?(i(),o("div",Kt,[e[29]||(e[29]=t("label",{class:"font-medium text-blue-700"},"Finding Evidence:",-1)),t("div",Xt,[(i(!0),o(u,null,g(s.inspection_detail.photo_paths,(w,r)=>(i(),o("img",{key:r,src:`/storage/${w}`,alt:`Finding photo ${r+1}`,class:"w-16 h-16 object-cover rounded cursor-pointer hover:opacity-80 transition border border-gray-200",onClick:f=>c(s.inspection_detail.photo_paths.map(y=>`/storage/${y}`),r)},null,8,Yt))),128))])])):a("",!0),t("div",Zt,[t("div",te,[e[30]||(e[30]=t("span",{class:"font-medium"},"Finding ID:",-1)),d(" #"+n(((R=s.inspection_detail)==null?void 0:R.id)||"N/A"),1)]),t("div",ee,[e[31]||(e[31]=t("span",{class:"font-medium"},"Inspector:",-1)),d(" "+n(((I=(T=s.inspection_detail)==null?void 0:T.created_by_user)==null?void 0:I.nama_lengkap)||"Unknown"),1)])])]),t("div",se,[e[33]||(e[33]=t("label",{class:"text-sm font-medium text-gray-500 mb-1"},"Action Plan",-1)),t("p",ne,n(s.action_plan),1)]),s.notes?(i(),o("div",ie,[e[34]||(e[34]=t("label",{class:"text-sm font-medium text-gray-500 mb-1"},"Notes",-1)),t("p",oe,n(s.notes),1)])):a("",!0),s.documentation_paths&&s.documentation_paths.length>0?(i(),o("div",le,[t("label",ae," Documentation ("+n(s.documentation_paths.length)+" files) ",1),t("div",de,[(i(!0),o(u,null,g(s.documentation_paths,(w,r)=>(i(),o("div",{key:r,class:"relative group"},[t("img",{src:`/storage/${w}`,alt:`CPA Documentation ${r+1}`,class:"w-20 h-20 object-cover rounded-lg border border-gray-200 cursor-pointer hover:shadow-lg transition",onClick:f=>c(s.documentation_paths.map(y=>`/storage/${y}`),r),onError:e[0]||(e[0]=f=>{f.target.style.display="none",f.target.nextElementSibling.style.display="flex"})},null,40,re),t("div",{class:"w-20 h-20 bg-gray-100 rounded-lg border border-gray-200 flex flex-col items-center justify-center text-xs text-gray-500 hidden",onClick:f=>c(s.documentation_paths.map(y=>`/storage/${y}`),r)},[e[35]||(e[35]=t("i",{class:"fa-solid fa-file-image text-lg mb-1"},null,-1)),t("span",null,"Doc "+n(r+1),1)],8,me)]))),128))])])):a("",!0),t("div",ue,[t("div",ge,[e[36]||(e[36]=t("span",{class:"font-medium"},"Created by:",-1)),d(" "+n(((U=s.created_by)==null?void 0:U.nama_lengkap)||"Unknown"),1)]),s.completion_date?(i(),o("div",ce,[e[37]||(e[37]=t("i",{class:"fa-solid fa-check-circle mr-1"},null,-1)),d(" Completed: "+n(new Date(s.completion_date).toLocaleDateString()),1)])):a("",!0)])])}),128))])])])):a("",!0),l.inspection.status==="Draft"?(i(),o("div",xe,[t("button",{onClick:G,class:"px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-xl font-medium transition"},e[38]||(e[38]=[t("i",{class:"fa-solid fa-check mr-2"},null,-1),d(" Complete Inspection ")]))])):a("",!0)])]),q(J(X),{visible:_.value,imgs:A.value,index:j.value,onHide:H},null,8,["visible","imgs","index"])]}),_:1}))}};export{$e as default};
