import{r as i,c,w as I,A as T,B as l,C as P,D as e,L as r,E as A,H as p,J as K,F as m,M as x,N as o,I as v,G as W,l as S}from"./vendor-vue-g7iCcTkf.js";import{A as R}from"./AppLayout-BaHOzAR0.js";import"./vendor-utils-CpgP2uT4.js";import"./app-e_83ELsm.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DOFHeIjT.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const E={class:"max-w-7xl mx-auto py-8 px-4"},H={class:"flex flex-col md:flex-row md:items-center gap-4 mb-4"},j={class:"flex items-center gap-2"},z=["value"],G={class:"flex items-center gap-2"},J=["value"],Q={class:"flex items-center gap-2"},q=["value"],O={class:"flex items-center gap-2"},X={class:"flex items-center gap-2"},Y=["value"],Z=["disabled"],$={key:0,class:"animate-spin mr-2"},ee={key:1,class:"mr-2"},te={class:"bg-white rounded-xl shadow-lg overflow-x-auto"},ae={class:"min-w-full divide-y divide-gray-200"},se={class:"bg-white divide-y divide-gray-200"},oe={key:0},le={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-700"},ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-700"},ie={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},ue={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},de={class:"px-6 py-4 whitespace-nowrap text-sm text-center"},pe={class:"px-6 py-4 whitespace-nowrap text-sm text-center"},ge={class:"px-6 py-4 whitespace-nowrap text-sm text-center"},ce={key:0,class:"flex justify-between items-center mt-4"},me={class:"text-sm text-gray-600"},xe={class:"flex gap-1"},ve=["disabled"],ye={class:"px-2"},be=["disabled"],Le={__name:"AgingReport",props:{agings:Array,warehouses:Array,categories:Array,items:Array},setup(y){const L=y,g=i(""),u=i(25),n=i(1),b=i(""),f=i(""),h=i(""),_=i(""),k=i(!1),d=c(()=>{let s=L.agings;if(b.value&&(s=s.filter(t=>String(t.warehouse_name)===String(b.value))),f.value&&(s=s.filter(t=>t.category_name===f.value)),h.value&&(s=s.filter(t=>t.item_name===h.value)),_.value&&(s=s.filter(t=>t.moving_category===_.value)),!g.value)return s;const a=g.value.toLowerCase();return s.filter(t=>t.item_name&&t.item_name.toLowerCase().includes(a)||t.warehouse_name&&t.warehouse_name.toLowerCase().includes(a)||t.category_name&&t.category_name.toLowerCase().includes(a))}),w=c(()=>Math.ceil(d.value.length/u.value)||1),M=c(()=>(n.value-1)*u.value),C=c(()=>Math.min(M.value+u.value,d.value.length)),N=c(()=>d.value.slice(M.value,C.value));function V(){n.value>1&&n.value--}function B(){n.value<w.value&&n.value++}I([u,g],()=>{n.value=1});function U(s){return!s||Number(s)===0?"-":Number(s).toLocaleString("id-ID",{minimumFractionDigits:0,maximumFractionDigits:0})}function D(s){if(!s)return"-";const a=new Date(s);return isNaN(a)?"-":a.toLocaleDateString("id-ID")}function F(){k.value=!0,window.location.reload()}return(s,a)=>(l(),T(R,null,{default:P(()=>[e("div",E,[a[21]||(a[21]=e("h1",{class:"text-2xl font-bold mb-6"},"Laporan Umur Persediaan (Aging Report)",-1)),e("div",H,[p(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>g.value=t),type:"text",placeholder:"Cari barang, warehouse, kategori...",class:"px-4 py-2 border border-gray-300 rounded-lg w-full md:w-64 focus:ring-blue-500 focus:border-blue-500"},null,512),[[K,g.value]]),e("div",j,[a[7]||(a[7]=e("label",{class:"text-sm"},"Warehouse",-1)),p(e("select",{"onUpdate:modelValue":a[1]||(a[1]=t=>b.value=t),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[a[6]||(a[6]=e("option",{value:""},"Semua Warehouse",-1)),(l(!0),r(m,null,x(y.warehouses,t=>(l(),r("option",{key:t.id,value:t.name},o(t.name),9,z))),128))],512),[[v,b.value]])]),e("div",G,[a[9]||(a[9]=e("label",{class:"text-sm"},"Kategori",-1)),p(e("select",{"onUpdate:modelValue":a[2]||(a[2]=t=>f.value=t),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[a[8]||(a[8]=e("option",{value:""},"Semua Kategori",-1)),(l(!0),r(m,null,x(y.categories,t=>(l(),r("option",{key:t.id,value:t.name},o(t.name),9,J))),128))],512),[[v,f.value]])]),e("div",Q,[a[11]||(a[11]=e("label",{class:"text-sm"},"Barang",-1)),p(e("select",{"onUpdate:modelValue":a[3]||(a[3]=t=>h.value=t),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[a[10]||(a[10]=e("option",{value:""},"Semua Barang",-1)),(l(!0),r(m,null,x(y.items,t=>(l(),r("option",{key:t.id,value:t.name},o(t.name),9,q))),128))],512),[[v,h.value]])]),e("div",O,[a[13]||(a[13]=e("label",{class:"text-sm"},"Moving",-1)),p(e("select",{"onUpdate:modelValue":a[4]||(a[4]=t=>_.value=t),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},a[12]||(a[12]=[e("option",{value:""},"Semua",-1),e("option",{value:"Fast Moving"},"Fast Moving",-1),e("option",{value:"Slow Moving"},"Slow Moving",-1),e("option",{value:"Normal"},"Normal",-1)]),512),[[v,_.value]])]),e("div",X,[a[14]||(a[14]=e("label",{class:"text-sm"},"Tampilkan",-1)),p(e("select",{"onUpdate:modelValue":a[5]||(a[5]=t=>u.value=t),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[(l(),r(m,null,x([10,25,50,100],t=>e("option",{key:t,value:t},o(t),9,Y)),64))],512),[[v,u.value]]),a[15]||(a[15]=e("span",{class:"text-sm"},"data",-1))]),e("button",{onClick:F,disabled:k.value,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-700"},[k.value?(l(),r("span",$,a[16]||(a[16]=[e("i",{class:"fas fa-spinner"},null,-1)]))):(l(),r("span",ee,a[17]||(a[17]=[e("i",{class:"fas fa-sync-alt"},null,-1)]))),a[18]||(a[18]=W(" Load Data "))],8,Z)]),e("div",te,[e("table",ae,[a[20]||(a[20]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Barang"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Warehouse"),e("th",{class:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Kategori"),e("th",{class:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Stok"),e("th",{class:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider"},"Umur (hari)"),e("th",{class:"px-6 py-3 text-center text-xs font-bold text-gray-700 uppercase tracking-wider"},"Moving"),e("th",{class:"px-6 py-3 text-center text-xs font-bold text-gray-700 uppercase tracking-wider"},"Tgl Masuk"),e("th",{class:"px-6 py-3 text-center text-xs font-bold text-gray-700 uppercase tracking-wider"},"Tgl Keluar")])],-1)),e("tbody",se,[d.value.length?A("",!0):(l(),r("tr",oe,a[19]||(a[19]=[e("td",{colspan:"8",class:"text-center py-10 text-gray-400"},"Tidak ada data umur persediaan.",-1)]))),(l(!0),r(m,null,x(N.value,t=>(l(),r("tr",{key:t.item_name+t.warehouse_name,class:"hover:bg-gray-50 transition"},[e("td",le,o(t.item_name),1),e("td",re,o(t.warehouse_name),1),e("td",ne,o(t.category_name||"-"),1),e("td",ie,o(U(t.stock)),1),e("td",ue,o(t.days_in_stock),1),e("td",de,[e("span",{class:S({"text-green-600 font-bold":t.moving_category==="Fast Moving","text-red-600 font-bold":t.moving_category==="Slow Moving","text-gray-700":t.moving_category==="Normal"})},o(t.moving_category),3)]),e("td",pe,o(D(t.first_in_date)),1),e("td",ge,o(D(t.last_out_date)),1)]))),128))])])]),d.value.length?(l(),r("div",ce,[e("div",me," Menampilkan "+o(M.value+1)+" - "+o(C.value)+" dari "+o(d.value.length)+" data ",1),e("div",xe,[e("button",{onClick:V,disabled:n.value===1,class:S(["px-3 py-1 rounded border text-sm",n.value===1?"bg-gray-200 text-gray-400":"bg-white text-blue-700 hover:bg-blue-50"])},"<",10,ve),e("span",ye,"Halaman "+o(n.value)+" / "+o(w.value),1),e("button",{onClick:B,disabled:n.value===w.value,class:S(["px-3 py-1 rounded border text-sm",n.value===w.value?"bg-gray-200 text-gray-400":"bg-white text-blue-700 hover:bg-blue-50"])},">",10,be)])])):A("",!0)])]),_:1}))}};export{Le as default};
