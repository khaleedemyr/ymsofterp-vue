import{r as m,W as y,w as K,A as Q,B as d,C as Z,D as e,G as w,H as h,J as L,L as u,F,M as N,N as l,I as S,E as B,l as ee}from"./vendor-vue-g7iCcTkf.js";import{l as te}from"./lodash-DB3HVzpp.js";import{S as p}from"./app-DIuSMidk.js";import{A as se}from"./AppLayout-BfEUsI4L.js";import{a as P}from"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CG_QM0dl.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const ae={class:"max-w-7xl w-full mx-auto py-8 px-2"},oe={class:"bg-white rounded-xl shadow-lg p-4 mb-6"},le={class:"grid grid-cols-1 md:grid-cols-6 gap-4"},re=["value"],ie={class:"bg-white rounded-xl shadow-lg overflow-hidden"},ne={class:"overflow-x-auto"},de={class:"min-w-full divide-y divide-gray-200"},ue={class:"bg-white divide-y divide-gray-200"},pe={key:0},ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},me={class:"px-6 py-4 whitespace-nowrap"},xe={class:"text-sm font-medium text-blue-600"},ge={class:"text-xs text-gray-500"},fe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ve={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900"},ye={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},we={class:"px-6 py-4 whitespace-nowrap"},he={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ke={class:"flex items-center gap-2"},Ce=["onClick"],Be=["onClick"],De=["onClick"],je=["onClick"],Se={key:0,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},Ae={class:"flex items-center justify-between"},_e={class:"flex-1 flex justify-between sm:hidden"},Pe=["disabled"],Re=["disabled"],$e={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Me={class:"text-sm text-gray-700"},Ve={class:"font-medium"},qe={class:"font-medium"},Te={class:"font-medium"},Ie={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Le=["disabled"],Fe={class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},Ne=["disabled"],Qe={__name:"Index",props:{disposals:Object,assets:Array,filters:Object},setup(a){var R,$,M,V,q,T,I;const c=a,k=m(((R=c.filters)==null?void 0:R.search)||""),x=m((($=c.filters)==null?void 0:$.asset_id)||""),g=m(((M=c.filters)==null?void 0:M.disposal_method)||""),f=m(((V=c.filters)==null?void 0:V.status)||"all"),b=m(((q=c.filters)==null?void 0:q.date_from)||""),D=m(((T=c.filters)==null?void 0:T.date_to)||""),v=m(((I=c.filters)==null?void 0:I.per_page)||15),U=te.debounce(()=>{y.get("/asset-management/disposals",{search:k.value,asset_id:x.value,disposal_method:g.value,status:f.value,date_from:b.value,date_to:D.value,per_page:v.value},{preserveState:!0,replace:!0})},400);function E(){U()}function j(o){if(o){const t=new URL(o);t.searchParams.set("search",k.value),t.searchParams.set("asset_id",x.value),t.searchParams.set("disposal_method",g.value),t.searchParams.set("status",f.value),t.searchParams.set("date_from",b.value),t.searchParams.set("date_to",D.value),t.searchParams.set("per_page",v.value),y.visit(t.toString(),{preserveState:!0,replace:!0})}}function X(){y.visit("/asset-management/disposals/create")}function W(o){y.visit(`/asset-management/disposals/${o.id}`)}async function G(o){var s,n,i,r;if((await p.fire({title:"Approve Disposal?",text:`Approve disposal untuk asset "${(s=o.asset)==null?void 0:s.name}"?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Approve",cancelButtonText:"Batal"})).isConfirmed)try{(n=(await P.post(`/asset-management/disposals/${o.id}/approve`,{},{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).data)!=null&&n.success&&(p.fire("Berhasil","Disposal berhasil di-approve","success"),A())}catch(C){p.fire("Error",((r=(i=C.response)==null?void 0:i.data)==null?void 0:r.message)||"Gagal approve disposal","error")}}async function H(o){var s,n,i;const{value:t}=await p.fire({title:"Reject Disposal?",input:"textarea",inputLabel:"Alasan Rejection",inputPlaceholder:"Masukkan alasan rejection...",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Reject",cancelButtonText:"Batal",inputValidator:r=>{if(!r)return"Alasan rejection harus diisi!"}});if(t)try{(s=(await P.post(`/asset-management/disposals/${o.id}/reject`,{rejection_reason:t},{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).data)!=null&&s.success&&(p.fire("Berhasil","Disposal berhasil di-reject","success"),A())}catch(r){p.fire("Error",((i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)||"Gagal reject disposal","error")}}async function O(o){var s,n,i;if((await p.fire({title:"Complete Disposal?",text:"Konfirmasi bahwa asset sudah di-dispose?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Complete",cancelButtonText:"Batal"})).isConfirmed)try{(s=(await P.post(`/asset-management/disposals/${o.id}/complete`,{},{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})).data)!=null&&s.success&&(p.fire("Berhasil","Disposal berhasil di-complete","success"),A())}catch(r){p.fire("Error",((i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)||"Gagal complete disposal","error")}}function Y(o){return{Pending:"bg-yellow-100 text-yellow-800",Approved:"bg-green-100 text-green-800",Completed:"bg-blue-100 text-blue-800",Rejected:"bg-red-100 text-red-800"}[o]||"bg-gray-100 text-gray-800"}function z(o){return o==null||o===void 0?"Rp 0":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(o)}function J(o){return o?new Date(o).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}function A(){y.reload({preserveState:!0,replace:!0})}return K([x,g,f,b,D,v],()=>{y.get("/asset-management/disposals",{search:k.value,asset_id:x.value,disposal_method:g.value,status:f.value,date_from:b.value,date_to:D.value,per_page:v.value},{preserveState:!0,replace:!0})}),(o,t)=>(d(),Q(se,null,{default:Z(()=>[e("div",ae,[e("div",{class:"flex justify-between items-center mb-6"},[t[11]||(t[11]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-trash text-blue-500"}),w(" Asset Disposals ")],-1)),e("button",{onClick:X,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2"},t[10]||(t[10]=[e("i",{class:"fa-solid fa-plus"},null,-1),w(" Request Disposal ")]))]),e("div",oe,[e("div",le,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),h(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>k.value=s),onInput:E,placeholder:"Cari asset...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,544),[[L,k.value]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Asset",-1)),h(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>x.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[t[13]||(t[13]=e("option",{value:""},"Semua Asset",-1)),(d(!0),u(F,null,N(a.assets,s=>(d(),u("option",{key:s.id,value:s.id},l(s.asset_code)+" - "+l(s.name),9,re))),128))],512),[[S,x.value]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Disposal Method",-1)),h(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>g.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[15]||(t[15]=[e("option",{value:""},"Semua Method",-1),e("option",{value:"Sold"},"Sold",-1),e("option",{value:"Broken"},"Broken",-1),e("option",{value:"Donated"},"Donated",-1),e("option",{value:"Scrapped"},"Scrapped",-1)]),512),[[S,g.value]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),h(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>f.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[17]||(t[17]=[e("option",{value:"all"},"Semua Status",-1),e("option",{value:"Pending"},"Pending",-1),e("option",{value:"Approved"},"Approved",-1),e("option",{value:"Completed"},"Completed",-1),e("option",{value:"Rejected"},"Rejected",-1)]),512),[[S,f.value]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date From",-1)),h(e("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=s=>b.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,b.value]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Per Page",-1)),h(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>v.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},t[20]||(t[20]=[e("option",{value:"10"},"10",-1),e("option",{value:"15"},"15",-1),e("option",{value:"25"},"25",-1),e("option",{value:"50"},"50",-1)]),512),[[S,v.value]])])])]),e("div",ie,[e("div",ne,[e("table",de,[t[27]||(t[27]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Asset"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Disposal Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Method"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Value"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Requested By"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",ue,[a.disposals.data&&a.disposals.data.length===0?(d(),u("tr",pe,t[22]||(t[22]=[e("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"}," Tidak ada data ",-1)]))):B("",!0),(d(!0),u(F,null,N(a.disposals.data,(s,n)=>{var i,r,C;return d(),u("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",ce,l((a.disposals.current_page-1)*a.disposals.per_page+n+1),1),e("td",me,[e("div",null,[e("p",xe,l((i=s.asset)==null?void 0:i.asset_code),1),e("p",ge,l((r=s.asset)==null?void 0:r.name),1)])]),e("td",fe,l(J(s.disposal_date)),1),e("td",be,l(s.disposal_method),1),e("td",ve,l(z(s.disposal_value)),1),e("td",ye,l(((C=s.requester)==null?void 0:C.name)||"-"),1),e("td",we,[e("span",{class:ee([Y(s.status),"px-2 py-1 rounded-full text-xs font-medium"])},l(s.status),3)]),e("td",he,[e("div",ke,[e("button",{onClick:_=>W(s),class:"text-green-600 hover:text-green-900",title:"View"},t[23]||(t[23]=[e("i",{class:"fa-solid fa-eye"},null,-1)]),8,Ce),s.status==="Pending"?(d(),u("button",{key:0,onClick:_=>G(s),class:"text-blue-600 hover:text-blue-900",title:"Approve"},t[24]||(t[24]=[e("i",{class:"fa-solid fa-check"},null,-1)]),8,Be)):B("",!0),s.status==="Approved"?(d(),u("button",{key:1,onClick:_=>O(s),class:"text-green-600 hover:text-green-900",title:"Complete"},t[25]||(t[25]=[e("i",{class:"fa-solid fa-check-circle"},null,-1)]),8,De)):B("",!0),s.status==="Pending"?(d(),u("button",{key:2,onClick:_=>H(s),class:"text-red-600 hover:text-red-900",title:"Reject"},t[26]||(t[26]=[e("i",{class:"fa-solid fa-times"},null,-1)]),8,je)):B("",!0)])])])}),128))])])]),a.disposals.last_page>1?(d(),u("div",Se,[e("div",Ae,[e("div",_e,[e("button",{onClick:t[6]||(t[6]=s=>j(a.disposals.prev_page_url)),disabled:!a.disposals.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,Pe),e("button",{onClick:t[7]||(t[7]=s=>j(a.disposals.next_page_url)),disabled:!a.disposals.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,Re)]),e("div",$e,[e("div",null,[e("p",Me,[t[28]||(t[28]=w(" Menampilkan ")),e("span",Ve,l(a.disposals.from),1),t[29]||(t[29]=w(" sampai ")),e("span",qe,l(a.disposals.to),1),t[30]||(t[30]=w(" dari ")),e("span",Te,l(a.disposals.total),1),t[31]||(t[31]=w(" hasil "))])]),e("div",null,[e("nav",Ie,[e("button",{onClick:t[8]||(t[8]=s=>j(a.disposals.prev_page_url)),disabled:!a.disposals.prev_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[32]||(t[32]=[e("i",{class:"fa-solid fa-chevron-left"},null,-1)]),8,Le),e("span",Fe," Page "+l(a.disposals.current_page)+" of "+l(a.disposals.last_page),1),e("button",{onClick:t[9]||(t[9]=s=>j(a.disposals.next_page_url)),disabled:!a.disposals.next_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[33]||(t[33]=[e("i",{class:"fa-solid fa-chevron-right"},null,-1)]),8,Ne)])])])])])):B("",!0)])])]),_:1}))}};export{Qe as default};
