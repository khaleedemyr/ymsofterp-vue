import{c as B,r as i,A as Q,B as o,C as m,D as e,x as f,G as u,Q as S,S as D,L as r,E as d,H as x,Z as Y,J as P,F as O,M as U,N as l,I as F,l as I,W as V}from"./vendor-vue-g7iCcTkf.js";import{A as Z}from"./AppLayout-Cke2dYBX.js";import{_ as X}from"./Pagination-DElM3wPU.js";import{S as j}from"./app-AaUk6aDd.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DtjcyHN1.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const ee={class:"min-h-screen bg-gradient-to-br from-slate-50 via-pink-50/30 to-slate-50"},te={class:"max-w-7xl mx-auto py-8 px-4 sm:px-6"},se={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8"},ae={class:"bg-white/80 backdrop-blur rounded-2xl border border-slate-200/60 shadow-sm p-5 mb-6"},le={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4"},oe={class:"lg:col-span-2"},ne={class:"relative"},re={key:0},ie=["value"],de={key:1,class:"flex flex-col justify-end"},ue={class:"py-2.5 text-sm text-slate-700"},xe={class:"bg-white rounded-2xl border border-slate-200/60 shadow-sm overflow-hidden"},pe={class:"overflow-x-auto"},ce={class:"w-full"},me={class:"divide-y divide-slate-100"},fe={key:0},ge={colspan:"13",class:"px-5 py-16 text-center"},be={class:"flex flex-col items-center gap-4"},ve={class:"px-5 py-4 text-sm text-slate-500"},ye={class:"px-5 py-4"},_e={class:"font-medium text-slate-800"},he={class:"px-5 py-4 text-sm text-slate-600"},ke={class:"px-5 py-4"},we={class:"text-sm text-slate-700"},Se={class:"text-xs text-slate-500"},De={class:"px-5 py-4 text-sm text-slate-600"},Ce={class:"px-5 py-4"},Ne={class:"text-sm font-medium text-slate-700"},Te={key:0,class:"mt-1 inline-flex items-center px-2 py-0.5 rounded-md text-[11px] font-semibold bg-rose-100 text-rose-700"},Be={key:1,class:"mt-1 text-xs text-slate-500"},Pe={key:2,class:"text-xs text-slate-500"},Fe={class:"font-mono font-semibold text-slate-700"},Ie={class:"px-5 py-4 font-mono text-sm font-semibold text-emerald-700"},Ve={class:"px-5 py-4 text-sm text-slate-600"},je={class:"px-5 py-4"},Le=["title"],Re={class:"px-5 py-4"},Ae={class:"px-5 py-4"},Oe={class:"px-5 py-4"},Ue={class:"text-sm text-slate-700"},Ee={class:"text-xs text-slate-500"},He={class:"px-5 py-4 text-right"},Ke={class:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition"},Me=["onClick","disabled"],Ge={key:0,class:"fa-solid fa-spinner fa-spin text-sm"},We={key:1,class:"fa-solid fa-trash text-sm"},qe={key:0,class:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 px-5 py-4 border-t border-slate-200 bg-slate-50/70"},Je={class:"flex items-center gap-3 text-sm text-slate-600"},$e={class:"flex items-center gap-2"},nt={__name:"Index",props:{reservations:{type:Object,required:!0,default:()=>({data:[],links:[],current_page:1,per_page:10,total:0,from:0,to:0})},outlets:{type:Array,default:()=>[]},can_choose_outlet:{type:Boolean,default:!0},search:String,outlet_id:[String,Number],status:String,dateFrom:String,dateTo:String,per_page:Number},setup(g){var A;const n=g,L=B(()=>n.can_choose_outlet!==!1),b=i(n.search||""),v=i(n.outlet_id??""),y=i(n.status||""),_=i(n.dateFrom||""),h=i(n.dateTo||""),p=i(n.per_page||((A=n.reservations)==null?void 0:A.per_page)||10),C=i(n.outlets||[]),c=i(null),N=B(()=>{var a;return((a=n.reservations)==null?void 0:a.data)||[]}),E=B(()=>{var a;return((a=n.reservations)==null?void 0:a.links)||[]});function H(a){var w,T;const t=Number(((w=n.reservations)==null?void 0:w.current_page)||1),s=Number(((T=n.reservations)==null?void 0:T.per_page)||p.value||10);return(t-1)*s+a+1}function K(a){return a?new Date(a).toLocaleDateString("id-ID",{weekday:"short",day:"numeric",month:"short",year:"numeric"}):"–"}function M(a){return a?new Date(a).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):"–"}function R(a){return a?new Date(a).toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"–"}function G(a){return a==null||a===""?"–":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(Number(a))}function W(a){switch(a){case"confirmed":return"bg-emerald-100 text-emerald-800";case"arrived":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-rose-100 text-rose-800";case"no_show":return"bg-slate-100 text-slate-700";default:return"bg-amber-100 text-amber-800"}}function q(a){switch(a){case"confirmed":return"Confirmed";case"arrived":return"Datang";case"cancelled":return"Cancelled";case"no_show":return"No Show";default:return"Pending"}}async function J(a){(await j.fire({title:"Hapus Reservasi?",text:"Data reservasi akan dihapus. Lanjutkan?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, Hapus",cancelButtonText:"Batal",confirmButtonColor:"#e11d48"})).isConfirmed&&(c.value=a,V.delete(route("reservations.destroy",{reservation:a}),{onSuccess:()=>{c.value=null,j.fire({title:"Berhasil",text:"Reservasi dihapus.",icon:"success"})},onError:()=>{c.value=null,j.fire({title:"Error",text:"Gagal menghapus reservasi",icon:"error"})}}))}function k(){V.get(route("reservations.index"),{search:b.value,outlet_id:v.value||void 0,status:y.value,dateFrom:_.value,dateTo:h.value,per_page:p.value,page:1},{preserveState:!0,preserveScroll:!0})}function $(a){a&&V.visit(a,{preserveState:!0,preserveScroll:!0})}function z(){b.value="",v.value=L.value?"":n.outlet_id??"",y.value="",_.value="",h.value="",p.value=10,k()}return(a,t)=>(o(),Q(Z,null,{default:m(()=>[e("div",ee,[e("div",te,[e("div",se,[t[7]||(t[7]=e("div",null,[e("h1",{class:"text-3xl font-bold text-slate-800 tracking-tight flex items-center gap-3"},[e("span",{class:"flex items-center justify-center w-12 h-12 rounded-xl bg-gradient-to-br from-rose-500 to-pink-600 text-white shadow-lg shadow-pink-500/25"},[e("i",{class:"fa-solid fa-calendar-check text-xl"})]),u(" Reservasi ")]),e("p",{class:"mt-2 text-slate-500 text-sm"},"Kelola booking dan reservasi pelanggan")],-1)),f(S(D),{href:a.route("reservations.create"),class:"inline-flex items-center justify-center gap-2 px-5 py-3 rounded-xl font-semibold text-white bg-gradient-to-r from-rose-500 to-pink-600 hover:from-rose-600 hover:to-pink-700 shadow-lg shadow-pink-500/25 hover:shadow-pink-500/40 transition-all duration-200"},{default:m(()=>t[6]||(t[6]=[e("i",{class:"fa-solid fa-plus text-sm"},null,-1),u(" Buat Reservasi ")])),_:1},8,["href"])]),e("div",ae,[t[19]||(t[19]=e("div",{class:"flex items-center gap-2 mb-4"},[e("i",{class:"fa-solid fa-filter text-rose-500"}),e("span",{class:"font-semibold text-slate-700"},"Filter")],-1)),e("div",le,[e("div",oe,[t[9]||(t[9]=e("label",{class:"block text-xs font-medium text-slate-500 mb-1"},"Cari nama",-1)),e("div",ne,[t[8]||(t[8]=e("i",{class:"fa-solid fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"},null,-1)),x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>b.value=s),type:"text",placeholder:"Cari nama reservasi...",class:"w-full pl-9 pr-4 py-2.5 rounded-xl border border-slate-200 focus:border-rose-400 focus:ring-2 focus:ring-rose-400/20 outline-none transition text-sm",onKeyup:Y(k,["enter"])},null,544),[[P,b.value]])])]),L.value?(o(),r("div",re,[t[11]||(t[11]=e("label",{class:"block text-xs font-medium text-slate-500 mb-1"},"Outlet",-1)),x(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s),class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-rose-400 focus:ring-2 focus:ring-rose-400/20 outline-none transition text-sm bg-white"},[t[10]||(t[10]=e("option",{value:""},"Semua Outlet",-1)),(o(!0),r(O,null,U(C.value,s=>(o(),r("option",{key:s.id,value:s.id},l(s.name),9,ie))),128))],512),[[F,v.value]])])):C.value.length===1?(o(),r("div",de,[t[12]||(t[12]=e("label",{class:"block text-xs font-medium text-slate-500 mb-1"},"Outlet",-1)),e("span",ue,l(C.value[0].name),1)])):d("",!0),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-xs font-medium text-slate-500 mb-1"},"Tanggal dari",-1)),x(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>_.value=s),class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-rose-400 focus:ring-2 focus:ring-rose-400/20 outline-none transition text-sm"},null,512),[[P,_.value]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-xs font-medium text-slate-500 mb-1"},"Tanggal sampai",-1)),x(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=s=>h.value=s),class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-rose-400 focus:ring-2 focus:ring-rose-400/20 outline-none transition text-sm"},null,512),[[P,h.value]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-xs font-medium text-slate-500 mb-1"},"Status",-1)),x(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>y.value=s),class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-rose-400 focus:ring-2 focus:ring-rose-400/20 outline-none transition text-sm bg-white"},t[15]||(t[15]=[e("option",{value:""},"Semua Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"confirmed"},"Confirmed",-1),e("option",{value:"arrived"},"Datang",-1),e("option",{value:"cancelled"},"Cancelled",-1),e("option",{value:"no_show"},"No Show",-1)]),512),[[F,y.value]])])]),e("div",{class:"flex flex-wrap gap-2 mt-4"},[e("button",{onClick:k,class:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-rose-500 text-white text-sm font-medium hover:bg-rose-600 transition"},t[17]||(t[17]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1),u(" Terapkan ")])),e("button",{onClick:z,class:"inline-flex items-center gap-2 px-4 py-2 rounded-xl border border-slate-200 text-slate-600 text-sm font-medium hover:bg-slate-50 transition"},t[18]||(t[18]=[e("i",{class:"fa-solid fa-rotate-left"},null,-1),u(" Reset ")]))])]),e("div",xe,[e("div",pe,[e("table",ce,[t[26]||(t[26]=e("thead",null,[e("tr",{class:"bg-slate-50 border-b border-slate-200"},[e("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"No"),e("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Nama"),e("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Outlet"),e("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Tanggal & Waktu"),e("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Tamu"),e("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"DP"),e("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Kode DP"),e("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Jenis Pembayaran"),e("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Sales"),e("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Area"),e("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Status"),e("th",{class:"px-5 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Dibuat oleh"),e("th",{class:"px-5 py-4 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",me,[N.value.length?d("",!0):(o(),r("tr",fe,[e("td",ge,[e("div",be,[t[21]||(t[21]=e("span",{class:"flex items-center justify-center w-16 h-16 rounded-2xl bg-slate-100 text-slate-400"},[e("i",{class:"fa-solid fa-calendar-xmark text-2xl"})],-1)),t[22]||(t[22]=e("div",null,[e("p",{class:"font-medium text-slate-600"},"Belum ada reservasi"),e("p",{class:"text-sm text-slate-400 mt-1"},"Gunakan filter atau buat reservasi baru")],-1)),f(S(D),{href:a.route("reservations.create"),class:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-rose-500 text-white text-sm font-medium hover:bg-rose-600 transition"},{default:m(()=>t[20]||(t[20]=[e("i",{class:"fa-solid fa-plus"},null,-1),u(" Buat Reservasi ")])),_:1},8,["href"])])])])),(o(!0),r(O,null,U(N.value,(s,w)=>(o(),r("tr",{key:s.id,class:"hover:bg-rose-50/50 transition group"},[e("td",ve,l(H(w)),1),e("td",ye,[e("span",_e,l(s.name),1)]),e("td",he,l(s.outlet),1),e("td",ke,[e("div",we,l(K(s.reservation_date)),1),e("div",Se,l(M(s.reservation_time)),1)]),e("td",De,l(s.number_of_guests)+" orang",1),e("td",Ce,[e("div",Ne,l(s.dp!=null?G(s.dp):"–"),1),s.dp_used_at?(o(),r("span",Te," DP sudah digunakan ")):d("",!0),s.dp_used_at?(o(),r("div",Be," Dipakai: "+l(R(s.dp_used_at)),1)):d("",!0),s.dp_used_at?(o(),r("div",Pe,[t[23]||(t[23]=u(" Bill: ")),e("span",Fe,l(s.dp_used_paid_number||"–"),1)])):d("",!0)]),e("td",Ie,l(s.dp_code||"–"),1),e("td",Ve,l(s.payment_type_name||"–"),1),e("td",je,[e("span",{class:I([s.from_sales?"bg-sky-100 text-sky-700":"bg-slate-100 text-slate-500","inline-flex items-center gap-1 px-2.5 py-1 rounded-lg text-xs font-medium"])},l(s.from_sales?"Dari Sales":"Bukan"),3),s.from_sales&&s.sales_user_name?(o(),r("p",{key:0,class:"text-xs text-slate-500 mt-1 truncate max-w-[120px]",title:s.sales_user_name},l(s.sales_user_name),9,Le)):d("",!0)]),e("td",Re,[e("span",{class:I([s.smoking_preference==="smoking"?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700","inline-flex px-2.5 py-1 rounded-lg text-xs font-medium"])},l(s.smoking_preference==="smoking"?"Smoking":"Non-Smoking"),3)]),e("td",Ae,[e("span",{class:I([W(s.status),"inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-semibold"])},l(q(s.status)),3)]),e("td",Oe,[e("div",Ue,l(s.created_by||"–"),1),e("div",Ee,l(R(s.created_at)),1)]),e("td",He,[e("div",Ke,[f(S(D),{href:a.route("reservations.show",{reservation:s.id}),class:"p-2 rounded-lg text-slate-500 hover:bg-slate-100 hover:text-slate-700 transition",title:"Detail"},{default:m(()=>t[24]||(t[24]=[e("i",{class:"fa-solid fa-eye text-sm"},null,-1)])),_:2},1032,["href"]),f(S(D),{href:a.route("reservations.edit",{reservation:s.id}),class:"p-2 rounded-lg text-amber-600 hover:bg-amber-50 transition",title:"Edit"},{default:m(()=>t[25]||(t[25]=[e("i",{class:"fa-solid fa-pen-to-square text-sm"},null,-1)])),_:2},1032,["href"]),e("button",{onClick:T=>J(s.id),disabled:c.value===s.id,class:"p-2 rounded-lg text-rose-600 hover:bg-rose-50 transition disabled:opacity-50",title:"Hapus"},[c.value===s.id?(o(),r("i",Ge)):(o(),r("i",We))],8,Me)])])]))),128))])])]),N.value.length?(o(),r("div",qe,[e("div",Je,[e("span",null," Menampilkan "+l(g.reservations.from||0)+" - "+l(g.reservations.to||0)+" dari "+l(g.reservations.total||0)+" data ",1),e("div",$e,[t[28]||(t[28]=e("label",{class:"text-xs font-medium text-slate-500"},"Per halaman",-1)),x(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>p.value=s),onChange:k,class:"px-3 py-1.5 rounded-lg border border-slate-200 bg-white text-sm focus:border-rose-400 focus:ring-2 focus:ring-rose-400/20 outline-none"},t[27]||(t[27]=[e("option",{value:10},"10",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1),e("option",{value:100},"100",-1)]),544),[[F,p.value,void 0,{number:!0}]])])]),f(X,{links:E.value,onNavigate:$},null,8,["links"])])):d("",!0)])])])]),_:1}))}};export{nt as default};
