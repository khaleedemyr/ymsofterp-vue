import{P as D,w as g,r as M,c as A,L as d,E as m,B as l,D as e,N as r,O as B,G as y,l as S,H as v,J as C,Q as i,I as f,F as p,M as x}from"./vendor-vue-g7iCcTkf.js";import{S as _}from"./app-D7xoXxxM.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";const L={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 transition-all"},J={class:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl mx-auto p-0 animate-fade-in"},U={class:"px-8 pt-8 pb-2"},z={class:"flex items-center gap-2 mb-6"},F={class:"text-2xl font-bold text-gray-900"},P={key:0,class:"text-center py-4"},E={key:0,class:"text-xs text-red-500 mt-1"},N=["value"],q={key:0,class:"text-xs text-red-500 mt-1"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},O=["value"],T={key:0,class:"text-xs text-red-500 mt-1"},I=["value"],G={key:0,class:"text-xs text-red-500 mt-1"},Q=["value"],R={key:0,class:"text-xs text-red-500 mt-1"},K={class:"bg-gray-50 px-6 py-4 flex justify-end rounded-b-2xl"},W=["disabled"],X={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Y={__name:"JabatanFormModal",props:{show:Boolean,mode:String,jabatan:Object,dropdownData:Object,isLoadingDropdown:Boolean},emits:["close","success"],setup(n,{emit:h}){const o=n,c=h,t=D({nama_jabatan:"",id_atasan:"",id_divisi:"",id_sub_divisi:"",id_level:"",status:"A"});g(()=>o.show,b=>{b&&o.mode==="edit"&&o.jabatan?(t.nama_jabatan=o.jabatan.nama_jabatan,t.id_atasan=o.jabatan.id_atasan||"",t.id_divisi=o.jabatan.id_divisi||"",t.id_sub_divisi=o.jabatan.id_sub_divisi||"",t.id_level=o.jabatan.id_level||""):b&&o.mode==="create"&&(t.nama_jabatan="",t.id_atasan="",t.id_divisi="",t.id_sub_divisi="",t.id_level="",t.status="A")});const u=M(!1),w=A(()=>o.dropdownData&&Array.isArray(o.dropdownData.jabatans)&&Array.isArray(o.dropdownData.divisis)&&Array.isArray(o.dropdownData.subDivisis)&&Array.isArray(o.dropdownData.levels));g(()=>o.dropdownData,b=>{console.log("Modal dropdown data changed:",b),console.log("Is dropdown ready:",w.value)},{deep:!0}),g(()=>o.isLoadingDropdown,b=>{console.log("Modal loading state changed:",b)});async function k(){u.value=!0,o.mode==="create"?t.post(route("jabatans.store"),{onSuccess:()=>{_.fire("Berhasil","Jabatan berhasil ditambahkan!","success"),c("success"),c("close")},onError:()=>u.value=!1,onFinish:()=>u.value=!1}):o.mode==="edit"&&o.jabatan&&(t._method="PUT",t.post(route("jabatans.update",o.jabatan.id_jabatan),{onSuccess:()=>{_.fire("Berhasil","Jabatan berhasil diupdate!","success"),c("success"),c("close")},onError:()=>u.value=!1,onFinish:()=>u.value=!1}))}function j(){c("close")}return(b,a)=>n.show?(l(),d("div",L,[e("div",J,[e("div",U,[e("div",z,[a[5]||(a[5]=e("svg",{class:"w-7 h-7 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M16 7a4 4 0 01-8 0","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M12 3v4m0 0a4 4 0 01-4 4H4m8-4a4 4 0 014 4h4","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("h3",F,r(n.mode==="edit"?"Edit":"Tambah")+" Jabatan",1)]),e("form",{onSubmit:B(k,["prevent"]),class:"space-y-5"},[n.isLoadingDropdown?(l(),d("div",P,a[6]||(a[6]=[e("div",{class:"inline-flex items-center px-4 py-2 font-semibold leading-6 text-blue-600 transition ease-in-out duration-150"},[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),y(" Memuat data dropdown... ")],-1)]))):m("",!0),e("div",{class:S({"opacity-50 pointer-events-none":n.isLoadingDropdown||!w.value})},[e("div",null,[a[7]||(a[7]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nama Jabatan",-1)),v(e("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>i(t).nama_jabatan=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500",required:"",maxlength:"100"},null,512),[[C,i(t).nama_jabatan]]),i(t).errors.nama_jabatan?(l(),d("div",E,r(i(t).errors.nama_jabatan),1)):m("",!0)]),e("div",null,[a[9]||(a[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Atasan",-1)),v(e("select",{"onUpdate:modelValue":a[1]||(a[1]=s=>i(t).id_atasan=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"},[a[8]||(a[8]=e("option",{value:""},"Pilih Atasan (Opsional)",-1)),(l(!0),d(p,null,x(n.dropdownData.jabatans,s=>(l(),d("option",{key:s.id_jabatan,value:s.id_jabatan},r(s.nama_jabatan),9,N))),128))],512),[[f,i(t).id_atasan]]),i(t).errors.id_atasan?(l(),d("div",q,r(i(t).errors.id_atasan),1)):m("",!0)]),e("div",H,[e("div",null,[a[11]||(a[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"Divisi",-1)),v(e("select",{"onUpdate:modelValue":a[2]||(a[2]=s=>i(t).id_divisi=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500",required:""},[a[10]||(a[10]=e("option",{value:""},"Pilih Divisi",-1)),(l(!0),d(p,null,x(n.dropdownData.divisis,s=>(l(),d("option",{key:s.id,value:s.id},r(s.nama_divisi),9,O))),128))],512),[[f,i(t).id_divisi]]),i(t).errors.id_divisi?(l(),d("div",T,r(i(t).errors.id_divisi),1)):m("",!0)]),e("div",null,[a[13]||(a[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"Sub Divisi",-1)),v(e("select",{"onUpdate:modelValue":a[3]||(a[3]=s=>i(t).id_sub_divisi=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500",required:""},[a[12]||(a[12]=e("option",{value:""},"Pilih Sub Divisi",-1)),(l(!0),d(p,null,x(n.dropdownData.subDivisis,s=>(l(),d("option",{key:s.id,value:s.id},r(s.nama_sub_divisi),9,I))),128))],512),[[f,i(t).id_sub_divisi]]),i(t).errors.id_sub_divisi?(l(),d("div",G,r(i(t).errors.id_sub_divisi),1)):m("",!0)])]),e("div",null,[a[15]||(a[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Level",-1)),v(e("select",{"onUpdate:modelValue":a[4]||(a[4]=s=>i(t).id_level=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500",required:""},[a[14]||(a[14]=e("option",{value:""},"Pilih Level",-1)),(l(!0),d(p,null,x(n.dropdownData.levels,s=>(l(),d("option",{key:s.id,value:s.id},r(s.nama_level),9,Q))),128))],512),[[f,i(t).id_level]]),i(t).errors.id_level?(l(),d("div",R,r(i(t).errors.id_level),1)):m("",!0)])],2),e("div",K,[e("button",{type:"button",onClick:j,class:"inline-flex items-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition sm:w-auto sm:text-sm mr-2"}," Batal "),e("button",{type:"submit",disabled:u.value||n.isLoadingDropdown||!w.value,class:"inline-flex items-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[u.value?(l(),d("svg",X,a[16]||(a[16]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):m("",!0),y(" "+r(u.value?"Menyimpan...":n.mode==="edit"?"Update":"Simpan"),1)],8,W)])],32)])])])):m("",!0)}},se=V(Y,[["__scopeId","data-v-c4707fd8"]]);export{se as default};
