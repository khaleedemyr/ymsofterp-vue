import{r as p,c as L,A as V,B as r,C as N,D as t,L as d,E as k,G as u,N as l,H as c,J as b,I as j,F as _,M as C,l as B,W as S}from"./vendor-vue-g7iCcTkf.js";import{A as z}from"./AppLayout-CA90k2MT.js";import{S as x}from"./app-CXnLHfhT.js";import{a as E}from"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-qPWVCAys.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const U={class:"w-full py-8 px-0"},O={key:0,class:"mb-4"},q={class:"inline-flex items-center gap-2 bg-blue-50 text-blue-800 px-4 py-2 rounded-xl font-semibold"},F={class:"font-bold"},G={class:"flex flex-wrap gap-3 mb-4 items-center"},Q={class:"bg-white rounded-2xl shadow-2xl overflow-x-auto transition-all"},W={class:"w-full min-w-full divide-y divide-gray-200"},Y={key:0},J={class:"px-6 py-3 font-mono font-semibold text-blue-700"},P={class:"px-6 py-3"},K={class:"px-6 py-3"},X={class:"px-6 py-3"},Z={class:"px-6 py-3"},tt={class:"px-6 py-3"},et={class:"px-6 py-3"},st={class:"px-6 py-3"},ot={class:"flex gap-2"},lt=["onClick"],at=["onClick","disabled"],nt=["onClick","disabled"],rt={class:"flex justify-end mt-4 gap-2"},it=["disabled","onClick","innerHTML"],wt={__name:"Index",props:{user:Object,repacks:Object},setup(D){const i=D,f=p(""),m=p(""),g=p(""),y=p("");function M(){}function T(){}function h(){}function dt(o){}function H(){window.location.href="/repack/create"}function R(o){S.visit(`/repack/edit/${o}`)}function A(o){S.visit(`/repack/${o}`)}async function $(o){var a,s;if((await x.fire({title:"Hapus Repack?",text:`Yakin ingin menghapus Repack ${o.repack_number}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed)try{await E.delete(`/repack/${o.id}`),x.fire({icon:"success",title:"Berhasil",text:"Repack berhasil dihapus.",timer:1500,showConfirmButton:!1}),window.location.reload()}catch(n){x.fire({icon:"error",title:"Gagal",text:((s=(a=n==null?void 0:n.response)==null?void 0:a.data)==null?void 0:s.error)||"Tidak bisa hapus Repack ini."})}}function I(o){return o.items?o.items.reduce((e,a)=>e+(Number(a.subtotal)||0),0):0}return L(()=>i.repacks.data.reduce((o,e)=>o+I(e),0)),(o,e)=>(r(),V(z,null,{default:N(()=>{var a;return[t("div",U,[(a=i.user)!=null&&a.outlet?(r(),d("div",O,[t("div",q,[e[4]||(e[4]=t("i",{class:"fa fa-store"},null,-1)),e[5]||(e[5]=u(" Outlet Anda: ")),t("span",F,l(i.user.outlet.nama_outlet),1)])])):k("",!0),t("div",{class:"flex justify-between items-center mb-6"},[e[6]||(e[6]=t("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[t("i",{class:"fa-solid fa-box-open text-blue-500"}),u(" Repack ")],-1)),t("button",{onClick:H,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"}," + Buat Repack ")]),t("div",G,[c(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>f.value=s),onInput:M,type:"text",placeholder:"Cari nomor Repack...",class:"w-64 px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},null,544),[[b,f.value]]),c(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>m.value=s),onChange:T,class:"px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},e[7]||(e[7]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"draft"},"Draft",-1),t("option",{value:"approved"},"Approved",-1)]),544),[[j,m.value]]),c(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>g.value=s),onChange:h,class:"px-2 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",placeholder:"Dari tanggal"},null,544),[[b,g.value]]),e[8]||(e[8]=t("span",null,"-",-1)),c(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=s=>y.value=s),onChange:h,class:"px-2 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",placeholder:"Sampai tanggal"},null,544),[[b,y.value]])]),t("div",Q,[t("table",W,[e[13]||(e[13]=t("thead",{class:"bg-gradient-to-r from-blue-50 to-blue-100"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider rounded-tl-2xl"},"No. Repack"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Tanggal"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Item Asal"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Qty Asal"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Item Hasil"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Qty Hasil"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-bold text-blue-700 uppercase tracking-wider rounded-tr-2xl"},"Aksi")])],-1)),t("tbody",null,[i.repacks.data.length===0?(r(),d("tr",Y,e[9]||(e[9]=[t("td",{colspan:"8",class:"text-center py-10 text-gray-400"},"Tidak ada data Repack.",-1)]))):k("",!0),(r(!0),d(_,null,C(i.repacks.data,s=>{var n,w;return r(),d("tr",{key:s.id,class:"hover:bg-blue-50 transition shadow-sm"},[t("td",J,l(s.repack_number),1),t("td",P,l(new Date(s.created_at).toLocaleDateString("id-ID")),1),t("td",K,l(((n=s.item_asal)==null?void 0:n.name)??"-"),1),t("td",X,l(s.qty_asal),1),t("td",Z,l(((w=s.item_hasil)==null?void 0:w.name)??"-"),1),t("td",tt,l(s.qty_hasil),1),t("td",et,[t("span",{class:B([{"bg-gray-100 text-gray-700":s.status==="draft","bg-green-100 text-green-700":s.status==="approved"},"px-2 py-1 rounded-full text-xs font-semibold shadow"])},l(s.status),3)]),t("td",st,[t("div",ot,[t("button",{onClick:v=>A(s.id),class:"inline-flex items-center btn btn-xs bg-blue-100 text-blue-800 hover:bg-blue-200 rounded px-2 py-1 font-semibold transition"},e[10]||(e[10]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),u(" Detail ")]),8,lt),t("button",{onClick:v=>R(s.id),disabled:s.status!=="draft",class:"inline-flex items-center btn btn-xs bg-yellow-100 text-yellow-800 hover:bg-yellow-200 rounded px-2 py-1 font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed"},e[11]||(e[11]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M15.232 5.232l3.536 3.536M9 13l6-6m2 2l-6 6m-2 2h6a2 2 0 002-2v-6a2 2 0 00-2-2H7a2 2 0 00-2 2v6a2 2 0 002 2z"})],-1),u(" Edit ")]),8,at),t("button",{onClick:v=>$(s),disabled:s.status!=="draft",class:"inline-flex items-center btn btn-xs bg-red-100 text-red-700 hover:bg-red-200 rounded px-2 py-1 font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed"},e[12]||(e[12]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M6 18L18 6M6 6l12 12"})],-1),u(" Hapus ")]),8,nt)])])])}),128))])])]),t("div",rt,[(r(!0),d(_,null,C(i.repacks.links,s=>(r(),d("button",{key:s.label,disabled:!s.url,onClick:n=>(s.url,void 0),innerHTML:s.label,class:B(["px-3 py-1 rounded-lg border text-sm font-semibold",[s.active?"bg-blue-600 text-white shadow-lg":"bg-white text-blue-700 hover:bg-blue-50",s.url?"cursor-pointer":"opacity-50 cursor-not-allowed"]])},null,10,it))),128))])])]}),_:1}))}};export{wt as default};
