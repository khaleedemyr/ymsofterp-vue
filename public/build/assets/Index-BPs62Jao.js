import{r as B,W as f,w as et,a as st,A as at,B as u,C as ot,D as t,L as p,E as b,G as lt,l as h,N as l,H as j,I as O,J as E,F as U,M as Y}from"./vendor-vue-g7iCcTkf.js";import{l as rt}from"./lodash-DB3HVzpp.js";import{S as n}from"./app-DvUgkxHf.js";import{A as nt}from"./AppLayout-CCl6N_RX.js";import{a as K}from"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-oDgFzWKX.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const it={class:"w-full py-8 px-4"},dt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},ut={class:"flex items-center justify-between"},ct={class:"text-2xl font-bold text-gray-900"},pt={class:"flex items-center justify-between"},xt={class:"text-2xl font-bold text-gray-900"},ft={class:"flex items-center justify-between"},gt={class:"text-2xl font-bold text-gray-900"},vt={class:"flex items-center justify-between"},mt={class:"text-2xl font-bold text-gray-900"},bt={class:"mb-4 flex gap-4 flex-wrap"},ht={class:"bg-white rounded-2xl shadow-lg overflow-x-auto"},wt={class:"min-w-full divide-y divide-blue-200"},yt={class:"bg-white divide-y divide-gray-200"},kt={class:"px-4 py-2 whitespace-nowrap font-semibold"},_t={class:"px-4 py-2 whitespace-nowrap"},Ct={class:"px-4 py-2 whitespace-nowrap"},$t={class:"px-4 py-2"},Bt={class:"px-4 py-2 whitespace-nowrap"},jt={class:"text-sm"},Dt={class:"font-semibold"},Jt={class:"text-gray-500 text-xs"},Tt={class:"px-4 py-2 whitespace-nowrap"},St={class:"text-sm"},Pt={class:"font-semibold"},Et={class:"text-gray-500 text-xs"},Kt={class:"px-4 py-2 whitespace-nowrap text-right font-semibold"},At={class:"px-4 py-2 whitespace-nowrap text-right font-semibold"},It={class:"px-4 py-2 whitespace-nowrap text-center"},Nt={class:"px-4 py-2 whitespace-nowrap text-center"},Vt={class:"flex gap-2 justify-center"},Lt=["onClick"],Ft=["onClick"],Ht=["onClick"],Mt=["onClick"],Ot=["onClick"],Ut={key:0},Yt={key:0,class:"mt-4 flex justify-center"},Gt={class:"flex gap-2"},Rt=["onClick","disabled","innerHTML"],re={__name:"Index",props:{jurnals:Object,coas:Array,statistics:{type:Object,default:()=>({total:0,draft:0,posted:0,cancelled:0})},filters:Object},setup(c){var I,N,V,L,F;const w=c,y=B(((I=w.filters)==null?void 0:I.search)||""),d=B(((N=w.filters)==null?void 0:N.status)||"all"),g=B(((V=w.filters)==null?void 0:V.date_from)||""),v=B(((L=w.filters)==null?void 0:L.date_to)||""),m=B(((F=w.filters)==null?void 0:F.per_page)||15),G=rt.debounce(()=>{f.get("/jurnal",{search:y.value,status:d.value,date_from:g.value,date_to:v.value,per_page:m.value},{preserveState:!0,replace:!0})},400);function R(){G()}et([d,g,v,m],()=>{f.get("/jurnal",{search:y.value,status:d.value,date_from:g.value,date_to:v.value,per_page:m.value},{preserveState:!0,replace:!0})});function q(a){if(a){const e=new URL(a,window.location.origin);e.searchParams.set("search",y.value),e.searchParams.set("status",d.value),e.searchParams.set("date_from",g.value),e.searchParams.set("date_to",v.value),e.searchParams.set("per_page",m.value),f.visit(e.toString(),{preserveState:!0,replace:!0})}}function W(){f.visit("/jurnal/create")}function z(a){f.visit(`/jurnal/${a.id}/edit`)}async function Q(a){var e,s,r,i,_,C;try{const x=(await K.get(route("jurnal.show",a.id))).data,o=x.jurnal,P=x.related_jurnals||[];let $=`
      <div class="text-left space-y-3">
        <div class="grid grid-cols-2 gap-2">
          <div><strong>No Jurnal:</strong></div>
          <div>${o.no_jurnal}</div>
          
          <div><strong>Tanggal:</strong></div>
          <div>${A(o.tanggal)}</div>
          
          <div><strong>Outlet:</strong></div>
          <div>${((e=o.outlet)==null?void 0:e.nama_outlet)||"-"}</div>
          
          <div><strong>Status:</strong></div>
          <div>
            <span class="px-2 py-1 rounded-full text-xs font-semibold ${o.status==="posted"?"bg-green-100 text-green-800":o.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}">
              ${o.status==="posted"?"Posted":o.status==="cancelled"?"Cancelled":"Draft"}
            </span>
          </div>
        </div>
        
        <div class="border-t pt-3">
          <strong>Keterangan:</strong>
          <div class="mt-1 text-gray-600">${o.keterangan||"-"}</div>
        </div>
        
        <div class="border-t pt-3">
          <strong>CoA Debit:</strong>
          <div class="mt-1">
            <span class="font-semibold">${((s=o.coa_debit)==null?void 0:s.code)||"-"}</span>
            <span class="text-gray-600 ml-2">${((r=o.coa_debit)==null?void 0:r.name)||""}</span>
          </div>
        </div>
        
        <div class="border-t pt-3">
          <strong>CoA Kredit:</strong>
          <div class="mt-1">
            <span class="font-semibold">${((i=o.coa_kredit)==null?void 0:i.code)||"-"}</span>
            <span class="text-gray-600 ml-2">${((_=o.coa_kredit)==null?void 0:_.name)||""}</span>
          </div>
        </div>
        
        <div class="grid grid-cols-2 gap-2 border-t pt-3">
          <div>
            <strong>Jumlah Debit:</strong>
            <div class="text-green-700 font-semibold">${k(o.jumlah_debit)}</div>
          </div>
          <div>
            <strong>Jumlah Kredit:</strong>
            <div class="text-red-700 font-semibold">${k(o.jumlah_kredit)}</div>
          </div>
        </div>
        
        ${o.creator?`
          <div class="border-t pt-3">
            <strong>Dibuat oleh:</strong>
            <div class="mt-1 text-gray-600">${((C=o.creator)==null?void 0:C.name)||"-"}</div>
          </div>
        `:""}
    `;P.length>0&&($+=`
        <div class="border-t pt-3">
          <strong>Related Entries (${P.length}):</strong>
          <div class="mt-2 space-y-2 max-h-40 overflow-y-auto">
      `,P.forEach((T,qt)=>{var H,M;$+=`
          <div class="bg-gray-50 p-2 rounded text-sm">
            <div class="font-semibold">${T.no_jurnal}</div>
            <div class="text-xs text-gray-600">
              ${(H=T.coa_debit)==null?void 0:H.code} â†’ ${(M=T.coa_kredit)==null?void 0:M.code} | 
              ${k(T.jumlah_debit)}
            </div>
          </div>
        `}),$+=`
          </div>
        </div>
      `),$+="</div>",n.fire({title:"Detail Jurnal",html:$,width:"600px",confirmButtonText:"Tutup",customClass:{popup:"text-left"}})}catch{n.fire("Error","Gagal memuat detail jurnal","error")}}async function X(a){(await n.fire({title:"Hapus Jurnal?",text:`Yakin ingin menghapus jurnal "${a.no_jurnal}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed&&f.delete(route("jurnal.destroy",a.id),{onSuccess:()=>{n.fire("Berhasil","Jurnal berhasil dihapus!","success").then(()=>{S()})},onError:s=>{n.fire("Error",s.error||"Gagal menghapus jurnal","error")}})}async function Z(a){var s,r;if((await n.fire({title:"Post Jurnal?",text:`Yakin ingin mem-post jurnal "${a.no_jurnal}"?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#6b7280",confirmButtonText:"Ya, Post!",cancelButtonText:"Batal"})).isConfirmed)try{(await K.post(route("jurnal.post",a.id))).data&&(n.fire("Berhasil","Jurnal berhasil di-post!","success"),S())}catch(i){n.fire("Error",((r=(s=i.response)==null?void 0:s.data)==null?void 0:r.message)||"Gagal mem-post jurnal","error")}}async function tt(a){var s,r;if((await n.fire({title:"Batalkan Jurnal?",text:`Yakin ingin membatalkan jurnal "${a.no_jurnal}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#f59e0b",cancelButtonColor:"#6b7280",confirmButtonText:"Ya, Batalkan!",cancelButtonText:"Batal"})).isConfirmed)try{(await K.post(route("jurnal.cancel",a.id))).data&&(n.fire("Berhasil","Jurnal berhasil dibatalkan!","success"),S())}catch(i){n.fire("Error",((r=(s=i.response)==null?void 0:s.data)==null?void 0:r.message)||"Gagal membatalkan jurnal","error")}}function S(){f.reload({preserveState:!0,replace:!0})}function D(a){d.value=a}function k(a){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(a)}function A(a){return a?new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-"}return st(()=>{var a,e;(a=window.flash)!=null&&a.success&&n.fire("Berhasil",window.flash.success,"success"),(e=window.flash)!=null&&e.error&&n.fire("Error",window.flash.error,"error")}),(a,e)=>(u(),at(nt,{title:"Jurnal"},{default:ot(()=>[t("div",it,[t("div",{class:"flex justify-between items-center mb-6"},[e[9]||(e[9]=t("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[t("i",{class:"fa-solid fa-book text-blue-500"}),lt(" Jurnal ")],-1)),t("button",{onClick:W,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"}," + Tambah Jurnal Baru ")]),t("div",dt,[t("div",{class:h(["rounded-xl shadow-lg p-6 border-l-4 cursor-pointer transition-all relative",d.value==="all"?"bg-blue-50 border-blue-500 shadow-xl":"bg-white border-blue-500 hover:shadow-xl"]),onClick:e[0]||(e[0]=s=>D("all")),title:"Klik untuk melihat semua jurnal"},[t("div",ut,[t("div",null,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Jurnal",-1)),t("p",ct,l(c.statistics.total),1)]),e[11]||(e[11]=t("div",{class:"bg-blue-100 p-3 rounded-full"},[t("i",{class:"fa-solid fa-book text-blue-600 text-xl"})],-1))])],2),t("div",{class:h(["rounded-xl shadow-lg p-6 border-l-4 cursor-pointer transition-all relative",d.value==="draft"?"bg-yellow-50 border-yellow-500 shadow-xl":"bg-white border-yellow-500 hover:shadow-xl"]),onClick:e[1]||(e[1]=s=>D("draft")),title:"Klik untuk melihat jurnal draft"},[t("div",pt,[t("div",null,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-gray-600"},"Draft",-1)),t("p",xt,l(c.statistics.draft),1)]),e[13]||(e[13]=t("div",{class:"bg-yellow-100 p-3 rounded-full"},[t("i",{class:"fa-solid fa-file-lines text-yellow-600 text-xl"})],-1))])],2),t("div",{class:h(["rounded-xl shadow-lg p-6 border-l-4 cursor-pointer transition-all relative",d.value==="posted"?"bg-green-50 border-green-500 shadow-xl":"bg-white border-green-500 hover:shadow-xl"]),onClick:e[2]||(e[2]=s=>D("posted")),title:"Klik untuk melihat jurnal posted"},[t("div",ft,[t("div",null,[e[14]||(e[14]=t("p",{class:"text-sm font-medium text-gray-600"},"Posted",-1)),t("p",gt,l(c.statistics.posted),1)]),e[15]||(e[15]=t("div",{class:"bg-green-100 p-3 rounded-full"},[t("i",{class:"fa-solid fa-check-circle text-green-600 text-xl"})],-1))])],2),t("div",{class:h(["rounded-xl shadow-lg p-6 border-l-4 cursor-pointer transition-all relative",d.value==="cancelled"?"bg-red-50 border-red-500 shadow-xl":"bg-white border-red-500 hover:shadow-xl"]),onClick:e[3]||(e[3]=s=>D("cancelled")),title:"Klik untuk melihat jurnal cancelled"},[t("div",vt,[t("div",null,[e[16]||(e[16]=t("p",{class:"text-sm font-medium text-gray-600"},"Cancelled",-1)),t("p",mt,l(c.statistics.cancelled),1)]),e[17]||(e[17]=t("div",{class:"bg-red-100 p-3 rounded-full"},[t("i",{class:"fa-solid fa-times-circle text-red-600 text-xl"})],-1))])],2)]),t("div",bt,[j(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>d.value=s),class:"form-input rounded-xl"},e[18]||(e[18]=[t("option",{value:"all"},"Semua Status",-1),t("option",{value:"draft"},"Draft",-1),t("option",{value:"posted"},"Posted",-1),t("option",{value:"cancelled"},"Cancelled",-1)]),512),[[O,d.value]]),j(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>g.value=s),type:"date",placeholder:"Dari Tanggal",class:"form-input rounded-xl"},null,512),[[E,g.value]]),j(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>v.value=s),type:"date",placeholder:"Sampai Tanggal",class:"form-input rounded-xl"},null,512),[[E,v.value]]),j(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>m.value=s),class:"form-input rounded-xl"},e[19]||(e[19]=[t("option",{value:"10"},"10 per halaman",-1),t("option",{value:"15"},"15 per halaman",-1),t("option",{value:"25"},"25 per halaman",-1),t("option",{value:"50"},"50 per halaman",-1)]),512),[[O,m.value]]),j(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>y.value=s),onInput:R,type:"text",placeholder:"Cari No Jurnal, Keterangan, CoA...",class:"flex-1 px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition min-w-64"},null,544),[[E,y.value]])]),t("div",ht,[t("table",wt,[e[26]||(e[26]=t("thead",{class:"bg-blue-600 text-white"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"No Jurnal"),t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Tanggal"),t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Outlet"),t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Keterangan"),t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"CoA Debit"),t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"CoA Kredit"),t("th",{class:"px-4 py-3 text-right text-xs font-bold uppercase tracking-wider"},"Jumlah Debit"),t("th",{class:"px-4 py-3 text-right text-xs font-bold uppercase tracking-wider"},"Jumlah Kredit"),t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Status"),t("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Aksi")])],-1)),t("tbody",yt,[(u(!0),p(U,null,Y(c.jurnals.data,s=>{var r,i,_,C,J;return u(),p("tr",{key:s.id,class:"hover:bg-blue-50 transition"},[t("td",kt,l(s.no_jurnal),1),t("td",_t,l(A(s.tanggal)),1),t("td",Ct,l(((r=s.outlet)==null?void 0:r.nama_outlet)||"-"),1),t("td",$t,l(s.keterangan||"-"),1),t("td",Bt,[t("div",jt,[t("div",Dt,l((i=s.coa_debit)==null?void 0:i.code),1),t("div",Jt,l((_=s.coa_debit)==null?void 0:_.name),1)])]),t("td",Tt,[t("div",St,[t("div",Pt,l((C=s.coa_kredit)==null?void 0:C.code),1),t("div",Et,l((J=s.coa_kredit)==null?void 0:J.name),1)])]),t("td",Kt,l(k(s.jumlah_debit)),1),t("td",At,l(k(s.jumlah_kredit)),1),t("td",It,[t("span",{class:h(["px-2 py-1 rounded-full text-xs font-semibold",s.status==="posted"?"bg-green-100 text-green-800":s.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},l(s.status==="posted"?"Posted":s.status==="cancelled"?"Cancelled":"Draft"),3)]),t("td",Nt,[t("div",Vt,[t("button",{onClick:x=>Q(s),class:"px-2 py-1 rounded bg-blue-500 text-white hover:bg-blue-600 transition",title:"Detail"},e[20]||(e[20]=[t("i",{class:"fa-solid fa-eye"},null,-1)]),8,Lt),s.status==="draft"?(u(),p("button",{key:0,onClick:x=>z(s),class:"px-2 py-1 rounded bg-yellow-200 text-yellow-900 hover:bg-yellow-300 transition",title:"Edit"},e[21]||(e[21]=[t("i",{class:"fa-solid fa-pen-to-square"},null,-1)]),8,Ft)):b("",!0),s.status==="draft"?(u(),p("button",{key:1,onClick:x=>Z(s),class:"px-2 py-1 rounded bg-green-500 text-white hover:bg-green-600 transition",title:"Post"},e[22]||(e[22]=[t("i",{class:"fa-solid fa-check"},null,-1)]),8,Ht)):b("",!0),s.status==="draft"?(u(),p("button",{key:2,onClick:x=>tt(s),class:"px-2 py-1 rounded bg-orange-500 text-white hover:bg-orange-600 transition",title:"Cancel"},e[23]||(e[23]=[t("i",{class:"fa-solid fa-times"},null,-1)]),8,Mt)):b("",!0),s.status==="draft"?(u(),p("button",{key:3,onClick:x=>X(s),class:"px-2 py-1 rounded bg-red-200 text-red-900 hover:bg-red-300 transition",title:"Hapus"},e[24]||(e[24]=[t("i",{class:"fa-solid fa-trash"},null,-1)]),8,Ot)):b("",!0)])])])}),128)),c.jurnals.data.length===0?(u(),p("tr",Ut,e[25]||(e[25]=[t("td",{colspan:"10",class:"text-center py-8 text-gray-400"},"Tidak ada data jurnal",-1)]))):b("",!0)])])]),c.jurnals.links&&c.jurnals.links.length>3?(u(),p("div",Yt,[t("nav",Gt,[(u(!0),p(U,null,Y(c.jurnals.links,(s,r)=>(u(),p("button",{key:r,onClick:i=>q(s.url),disabled:!s.url,class:h(["px-4 py-2 rounded-lg transition",s.active?"bg-blue-600 text-white font-semibold":s.url?"bg-white text-gray-700 hover:bg-blue-50 border border-gray-300":"bg-gray-100 text-gray-400 cursor-not-allowed"]),innerHTML:s.label},null,10,Rt))),128))])])):b("",!0)])]),_:1}))}};export{re as default};
