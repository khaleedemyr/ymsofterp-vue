import{$ as ut,c as k,r as _,w as U,A as N,B as i,C as K,D as t,L as u,E as g,G as p,F as v,M as b,N as r,l as O,Y as W,O as G,H as f,J as I,I as T,x as rt,Q as dt,Z as $,T as pt,W as z}from"./vendor-vue-g7iCcTkf.js";import{A as mt}from"./AppLayout-BE0dNalr.js";import{a as y}from"./vendor-utils-CpgP2uT4.js";import{S as F}from"./app-C51E4rvH.js";import{s as ct}from"./vue-multiselect.esm-V-bx43V9.js";/* empty css                            */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-D219A2Up.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const ft={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-white py-12 px-4 md:px-8"},gt={class:"w-full max-w-4xl bg-white rounded-3xl shadow-3xl p-10 border border-blue-100 transition-all duration-300 hover:shadow-4xl"},vt={key:0,class:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-xl"},bt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ht={class:"flex items-center justify-between mb-2"},_t={class:"font-semibold text-gray-800"},yt={class:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full"},xt={class:"space-y-1 text-sm"},wt={class:"flex justify-between"},kt={class:"font-semibold text-green-600"},It={class:"flex justify-between"},Bt={class:"text-blue-600"},Ct={class:"flex justify-between"},St={class:"text-purple-600"},Dt={class:"flex justify-between border-t pt-1"},jt={class:"font-semibold text-gray-800"},Ut={class:"flex justify-between"},Tt={class:"text-orange-600"},$t={class:"flex justify-between border-t pt-1"},qt={class:"font-semibold text-gray-800"},Vt={class:"flex justify-between"},At={class:"mt-2"},Pt={class:"flex justify-between text-xs mb-1"},Ot={class:"w-full bg-gray-200 rounded-full h-2"},Ft={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Rt=["disabled"],Mt=["value"],Et=["value"],Lt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Nt={class:"flex justify-between items-center"},Kt={class:"text-xs text-gray-500"},Wt={class:"overflow-x-auto"},Gt={class:"min-w-full divide-y divide-gray-200"},zt={class:"bg-white divide-y divide-gray-200"},Jt={class:"px-3 py-2 min-w-[200px]"},Ht={class:"relative"},Qt=["id","onUpdate:modelValue","onInput","onFocus","onBlur","onKeydown"],Yt=["id"],Zt=["id","onMousedown"],Xt={class:"font-medium"},te={class:"text-xs text-gray-500"},ee={class:"text-sm text-gray-600"},se={key:0,class:"absolute right-2 top-2"},le={class:"px-3 py-2 min-w-[100px]"},ae=["onUpdate:modelValue","onInput"],oe={class:"px-3 py-2 min-w-[100px]"},ne={class:"relative"},ie=["onUpdate:modelValue"],ue=["value"],re={key:0,class:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs px-1 rounded-full"},de={class:"px-3 py-2 min-w-[150px]"},pe={class:"relative"},me=["onUpdate:modelValue","onInput"],ce={key:0,class:"absolute -top-1 -right-1 bg-green-500 text-white text-xs px-1 rounded-full"},fe={class:"px-3 py-2 min-w-[150px] text-right"},ge={class:"px-3 py-2"},ve=["onClick","disabled"],be={class:"px-3 py-2 text-right font-bold"},he={key:0,class:"flex flex-wrap gap-2 mt-2"},_e=["src"],ye={key:0,class:"mb-4 p-4 rounded-xl bg-yellow-100 border border-yellow-300 text-yellow-800 shadow flex items-center gap-2 animate-pulse"},xe={class:"flex justify-end gap-2"},we=["disabled"],ke={key:0},Ie={key:1},Oe={__name:"Form",props:{outlets:Array,warehouse_outlets:Array,suppliers:Array},setup(J){const B=J,x=ut(),C=k(()=>{var a,e;return((e=(a=x.props.auth)==null?void 0:a.user)==null?void 0:e.id_outlet)||""});function R(){return{item_id:"",item_name:"",qty:"",unit_id:"",price:0,subtotal:0,unitOptions:[],suggestions:[],showDropdown:!1,highlightedIndex:-1,loading:!1}}const l=_({transaction_date:new Date().toISOString().split("T")[0],outlet_id:C.value==1?"":C.value,warehouse_outlet_id:"",notes:"",payment_method:"",supplier:null,items:[R()]}),H=k(()=>C.value!=1),w=_(!1),S=_(0),h=_([]),Q=k(()=>l.value.payment_method!=="cash"?!1:S.value+M.value>=5e5);function Y(){l.value.items.push(R())}function Z(a){l.value.items.length!==1&&(l.value.items.splice(a,1),q())}function D(a){const e=l.value.items[a];e.subtotal=(e.qty||0)*(e.price||0)}const M=k(()=>l.value.items.reduce((a,e)=>a+(e.subtotal||0),0));async function X(a,e){var s,n;if(!e||e.length<2){l.value.items[a].suggestions=[],l.value.items[a].highlightedIndex=-1;return}l.value.items[a].loading=!0;try{const d=await y.get("/items/search-for-outlet-transfer",{params:{q:e,outlet_id:l.value.outlet_id,region_id:(n=(s=x.props.auth)==null?void 0:s.user)==null?void 0:n.region_id}});l.value.items[a].suggestions=d.data,l.value.items[a].showDropdown=!0,l.value.items[a].highlightedIndex=0}finally{l.value.items[a].loading=!1}}function E(a,e){const s=e.target.value;l.value.items[a].item_id="",l.value.items[a].item_name=s,l.value.items[a].showDropdown=!0,X(a,s)}async function L(a,e){var n,d,o,m;console.log("selectItem called",{idx:a,item:e.name,payment_method:l.value.payment_method,outlet_id:l.value.outlet_id,region_id:(d=(n=x.props.auth)==null?void 0:n.user)==null?void 0:d.region_id}),l.value.items[a].item_id=e.id,l.value.items[a].item_name=e.name,l.value.items[a].suggestions=[],l.value.items[a].showDropdown=!1,l.value.items[a].highlightedIndex=-1;const s=await y.get(`/retail-food/get-item-units/${e.id}`,{params:{payment_method:l.value.payment_method,outlet_id:l.value.outlet_id,region_id:(m=(o=x.props.auth)==null?void 0:o.user)==null?void 0:m.region_id}});console.log("API response:",s.data),l.value.items[a].unitOptions=s.data.units,l.value.payment_method==="contra_bon"&&s.data.default_unit?(console.log("Auto-filling for contra bon:",{default_unit:s.data.default_unit,default_price:s.data.default_price}),l.value.items[a].unit_id=s.data.default_unit.id,s.data.default_price>0&&(l.value.items[a].price=s.data.default_price),D(a)):(console.log("Not auto-filling:",{payment_method:l.value.payment_method,has_default_unit:!!s.data.default_unit}),l.value.items[a].unit_id=""),await q()}function tt(a){setTimeout(()=>{l.value.items[a].showDropdown=!1},200)}function j(a,e){const s=l.value.items[a];!s.showDropdown||!s.suggestions.length||(e.key==="ArrowDown"?(e.preventDefault(),s.highlightedIndex=(s.highlightedIndex+1)%s.suggestions.length):e.key==="ArrowUp"?(e.preventDefault(),s.highlightedIndex=(s.highlightedIndex-1+s.suggestions.length)%s.suggestions.length):e.key==="Enter"?(e.preventDefault(),s.highlightedIndex>=0&&s.suggestions[s.highlightedIndex]&&L(a,s.suggestions[s.highlightedIndex])):e.key==="Escape"&&(s.showDropdown=!1))}function et(a){const e=document.getElementById(`item-input-${a}`);if(!e)return{};const s=e.getBoundingClientRect();return{position:"fixed",left:`${s.left}px`,top:`${s.bottom}px`,width:`${s.width}px`,zIndex:99999}}async function st(){if(!l.value.outlet_id||!l.value.transaction_date){S.value=0;return}try{const a=await y.get("/retail-food/daily-total",{params:{outlet_id:l.value.outlet_id,transaction_date:l.value.transaction_date,payment_method:"cash"}});S.value=a.data.total||0}catch{S.value=0}}async function q(){if(!l.value.outlet_id){h.value=[];return}try{const a=l.value.items.filter(s=>s.item_name&&s.item_name.trim()!=="");if(a.length===0){h.value=[];return}const e=await y.post("/retail-food/get-budget-info",{items:a.map(s=>({item_name:s.item_name,qty:s.qty||0,price:s.price||0})),outlet_id:l.value.outlet_id});h.value=e.data.budget_info||[]}catch(a){console.error("Error fetching budget info:",a),h.value=[]}}U([()=>l.value.outlet_id,()=>l.value.transaction_date,()=>l.value.payment_method,()=>l.value.items.map(a=>[a.qty,a.price])],st,{immediate:!0,deep:!0}),U([()=>l.value.outlet_id,()=>l.value.items.map(a=>[a.item_name,a.qty,a.price])],q,{immediate:!0,deep:!0}),U(()=>l.value.payment_method,async a=>{var e,s;if(a==="cash"){const n=B.suppliers.find(d=>d.name.toLowerCase().includes("cash supplier"));n&&(l.value.supplier=n)}else if(a==="contra_bon")for(let n=0;n<l.value.items.length;n++){const d=l.value.items[n];if(d.item_id&&d.item_id!=="")try{const o=await y.get(`/retail-food/get-item-units/${d.item_id}`,{params:{payment_method:"contra_bon",outlet_id:l.value.outlet_id,region_id:(s=(e=x.props.auth)==null?void 0:e.user)==null?void 0:s.region_id}});o.data.default_unit&&(l.value.items[n].unit_id=o.data.default_unit.id,o.data.default_price>0&&(l.value.items[n].price=o.data.default_price),D(n))}catch(o){console.error("Error updating item for contra bon:",o)}}});const V=_([]),A=_([]);function lt(a){V.value=Array.from(a.target.files),A.value=V.value.map(e=>URL.createObjectURL(e))}async function at(){var e,s;if(!(w.value||!(await F.fire({title:"Simpan Data?",text:"Apakah Anda yakin ingin menyimpan transaksi ini?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, Simpan",cancelButtonText:"Batal",confirmButtonColor:"#2563eb",cancelButtonColor:"#6b7280",reverseButtons:!0})).isConfirmed)){w.value=!0;try{const n=new FormData;n.append("outlet_id",l.value.outlet_id),n.append("warehouse_outlet_id",l.value.warehouse_outlet_id),n.append("transaction_date",l.value.transaction_date),n.append("notes",l.value.notes),n.append("payment_method",l.value.payment_method),n.append("supplier_id",l.value.supplier?l.value.supplier.id:""),l.value.items.forEach((o,m)=>{var P;n.append(`items[${m}][item_name]`,o.item_name),n.append(`items[${m}][qty]`,o.qty),n.append(`items[${m}][unit_id]`,o.unit_id),n.append(`items[${m}][unit]`,((P=o.unitOptions.find(it=>it.id===o.unit_id))==null?void 0:P.name)||""),n.append(`items[${m}][price]`,o.price)}),V.value.forEach((o,m)=>{n.append("invoices[]",o)});const d=await y.post("/retail-food",n,{headers:{"Content-Type":"multipart/form-data"}});d.data.message&&(await F.fire({icon:"success",title:"Berhasil",text:d.data.message,timer:1500,showConfirmButton:!1}),z.visit("/retail-food"))}catch(n){F.fire({icon:"error",title:"Gagal",text:((s=(e=n.response)==null?void 0:e.data)==null?void 0:s.message)||"Gagal menyimpan transaksi"})}finally{w.value=!1}}}function ot(){z.visit("/retail-food")}function c(a){return a?"Rp "+Number(a).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2}):"Rp 0"}U(()=>C.value,a=>{a!=1&&(l.value.outlet_id=a)},{immediate:!0});const nt=k(()=>l.value.outlet_id?B.warehouse_outlets.filter(a=>String(a.outlet_id)===String(l.value.outlet_id)):[]);return(a,e)=>(i(),N(mt,null,{default:K(()=>[t("div",ft,[t("div",gt,[e[36]||(e[36]=t("h1",{class:"text-3xl font-extrabold mb-6 flex items-center gap-3 text-blue-800 drop-shadow-lg"},[t("i",{class:"fa-solid fa-store text-blue-500 text-3xl"}),p(" Input Retail Food ")],-1)),e[37]||(e[37]=t("div",{class:"mb-8 p-4 bg-blue-50 border border-blue-200 rounded-xl"},[t("h3",{class:"text-lg font-semibold text-blue-800 mb-3 flex items-center gap-2"},[t("i",{class:"fa-solid fa-info-circle text-blue-600"}),p(" Cara Penggunaan Retail Food ")]),t("div",{class:"text-sm text-blue-700 space-y-2"},[t("div",{class:"flex items-start gap-2"},[t("span",{class:"bg-blue-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5"},"1"),t("span",null,[t("strong",null,"Isi Data Transaksi:"),p(" Pilih tanggal, outlet, warehouse outlet, metode pembayaran (Cash/Contra Bon), dan supplier. "),t("strong",null,'Jika metode pembayaran Cash, pilih supplier "CASH SUPPLIER".')])]),t("div",{class:"flex items-start gap-2"},[t("span",{class:"bg-blue-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5"},"2"),t("span",null,[t("strong",null,"Tambah Items:"),p(" Cari item dengan mengetik nama item, pilih unit dan isi quantity serta harga. "),t("strong",null,"Jika metode pembayaran Contra Bon, unit medium dan harga akan otomatis terisi."),p(' Klik "+ Tambah Item" untuk menambah item baru.')])]),t("div",{class:"flex items-start gap-2"},[t("span",{class:"bg-blue-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5"},"3"),t("span",null,[t("strong",null,"Upload Bukti:"),p(" Upload foto bon/invoice dalam format JPG/PNG (bisa lebih dari 1 file).")])]),t("div",{class:"flex items-start gap-2"},[t("span",{class:"bg-blue-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5"},"4"),t("span",null,[t("strong",null,"Catatan:"),p(" Total transaksi "),t("strong",null,"Cash"),p(" per outlet per hari maksimal Rp 500.000. Transaksi "),t("strong",null,"Contra Bon"),p(" tidak ada batasan. Sistem akan memberikan peringatan jika melebihi batas.")])]),t("div",{class:"flex items-start gap-2"},[t("span",{class:"bg-blue-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5"},"5"),t("span",null,[t("strong",null,"Simpan:"),p(' Klik tombol "Simpan" untuk menyimpan transaksi. Data akan otomatis masuk ke inventory outlet.')])])])],-1)),h.value.length>0?(i(),u("div",vt,[e[14]||(e[14]=t("h3",{class:"text-lg font-semibold text-yellow-800 mb-3 flex items-center gap-2"},[t("i",{class:"fa-solid fa-chart-pie text-yellow-600"}),p(" Informasi Budget Sub Category ")],-1)),t("div",bt,[(i(!0),u(v,null,b(h.value,s=>(i(),u("div",{key:s.sub_category_id,class:"bg-white p-3 rounded-lg border border-yellow-200 shadow-sm"},[t("div",ht,[t("h4",_t,r(s.sub_category_name),1),t("span",yt,r(s.category_name),1)]),t("div",xt,[t("div",wt,[e[6]||(e[6]=t("span",{class:"text-gray-600"},"Budget:",-1)),t("span",kt,r(c(s.budget_amount)),1)]),t("div",It,[e[7]||(e[7]=t("span",{class:"text-gray-600"},"Retail Food:",-1)),t("span",Bt,r(c(s.retail_food_total)),1)]),t("div",Ct,[e[8]||(e[8]=t("span",{class:"text-gray-600"},"Food Floor Order:",-1)),t("span",St,r(c(s.food_floor_order_total)),1)]),t("div",Dt,[e[9]||(e[9]=t("span",{class:"text-gray-600"},"Total Bulanan:",-1)),t("span",jt,r(c(s.monthly_total)),1)]),t("div",Ut,[e[10]||(e[10]=t("span",{class:"text-gray-600"},"Input Baru:",-1)),t("span",Tt,r(c(s.new_items_total)),1)]),t("div",$t,[e[11]||(e[11]=t("span",{class:"text-gray-600"},"Total Setelah Input:",-1)),t("span",qt,r(c(s.total_after_new_items)),1)]),t("div",Vt,[e[12]||(e[12]=t("span",{class:"text-gray-600"},"Sisa Budget:",-1)),t("span",{class:O([s.remaining_budget>0?"text-green-600":"text-red-600","font-semibold"])},r(c(s.remaining_budget)),3)]),t("div",At,[t("div",Pt,[e[13]||(e[13]=t("span",null,"Penggunaan Budget",-1)),t("span",null,r(s.budget_percentage)+"%",1)]),t("div",Ot,[t("div",{class:O([s.budget_percentage>=90?"bg-red-500":s.budget_percentage>=70?"bg-yellow-500":"bg-green-500","h-2 rounded-full transition-all duration-300"]),style:W({width:Math.min(s.budget_percentage,100)+"%"})},null,6)])])])]))),128))])])):g("",!0),t("form",{onSubmit:G(at,["prevent"]),class:"space-y-7"},[t("div",Ft,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-xs font-bold text-gray-600 mb-2"},"Tanggal",-1)),f(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=s=>l.value.transaction_date=s),class:"input input-bordered w-full shadow-inner rounded-xl focus:ring-2 focus:ring-blue-300 transition-all duration-200",required:""},null,512),[[I,l.value.transaction_date]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-xs font-bold text-gray-600 mb-2"},"Outlet",-1)),f(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.outlet_id=s),disabled:H.value,class:"input input-bordered w-full shadow-inner rounded-xl focus:ring-2 focus:ring-blue-300 transition-all duration-200",required:""},[e[16]||(e[16]=t("option",{value:""},"Pilih Outlet",-1)),(i(!0),u(v,null,b(B.outlets,s=>(i(),u("option",{key:s.id_outlet,value:s.id_outlet},r(s.nama_outlet),9,Mt))),128))],8,Rt),[[T,l.value.outlet_id]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-xs font-bold text-gray-600 mb-2"},"Warehouse Outlet",-1)),f(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.warehouse_outlet_id=s),class:"input input-bordered w-full shadow-inner rounded-xl focus:ring-2 focus:ring-blue-300 transition-all duration-200",required:""},[e[18]||(e[18]=t("option",{value:""},"Pilih Warehouse Outlet",-1)),(i(!0),u(v,null,b(nt.value,s=>(i(),u("option",{key:s.id,value:s.id},r(s.name),9,Et))),128))],512),[[T,l.value.warehouse_outlet_id]])])]),t("div",Lt,[t("div",null,[e[21]||(e[21]=t("label",{class:"block text-xs font-bold text-gray-600 mb-2"},"Metode Pembayaran",-1)),f(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.payment_method=s),class:"input input-bordered w-full shadow-inner rounded-xl focus:ring-2 focus:ring-blue-300 transition-all duration-200",required:""},e[20]||(e[20]=[t("option",{value:""},"Pilih Metode Pembayaran",-1),t("option",{value:"cash"},"Cash",-1),t("option",{value:"contra_bon"},"Contra Bon",-1)]),512),[[T,l.value.payment_method]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-xs font-bold text-gray-600 mb-2"},"Supplier",-1)),rt(dt(ct),{modelValue:l.value.supplier,"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.supplier=s),options:B.suppliers,searchable:!0,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pilih atau cari supplier...","track-by":"id",label:"name","preselect-first":!1,class:"w-full"},{option:K(({option:s})=>[t("div",Nt,[t("span",null,r(s.name),1),t("span",Kt,r(s.code),1)])]),_:1},8,["modelValue","options"])])]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-xs font-bold text-gray-600 mb-1"},"Items",-1)),t("div",Wt,[t("table",Gt,[e[28]||(e[28]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Item"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Qty"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Unit"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Harga"),t("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase"},"Subtotal"),t("th",{class:"px-3 py-2"})])],-1)),t("tbody",zt,[(i(!0),u(v,null,b(l.value.items,(s,n)=>{var d;return i(),u("tr",{key:n},[t("td",Jt,[t("div",Ht,[f(t("input",{id:`item-input-${n}`,type:"text","onUpdate:modelValue":o=>s.item_name=o,onInput:o=>E(n,o),onFocus:o=>E(n,o),onBlur:o=>tt(n),onKeydown:[$(o=>j(n,o),["down"]),$(o=>j(n,o),["up"]),$(o=>j(n,o),["enter"]),$(o=>j(n,o),["esc"])],class:"input input-bordered w-full",required:"",autocomplete:"off",placeholder:"Cari nama item..."},null,40,Qt),[[I,s.item_name]]),(i(),N(pt,{to:"body"},[s.showDropdown&&s.suggestions&&s.suggestions.length>0?(i(),u("div",{key:0,style:W(et(n)),id:`autocomplete-dropdown-${n}`,class:"fixed z-[99999] bg-white border border-blue-200 rounded shadow max-w-xs w-[260px] max-h-96 overflow-auto mt-1"},[(i(!0),u(v,null,b(s.suggestions,(o,m)=>(i(),u("div",{key:o.id,id:`autocomplete-item-${n}-${m}`,onMousedown:G(P=>L(n,o),["prevent"]),class:O(["px-3 py-2 flex justify-between items-center cursor-pointer",s.highlightedIndex===m?"bg-blue-100":"hover:bg-blue-50"])},[t("div",null,[t("div",Xt,r(o.name),1),t("div",te,r(o.sku),1)]),t("div",ee,r(o.unit_small||o.unit||""),1)],42,Zt))),128))],12,Yt)):g("",!0)])),s.loading?(i(),u("div",se,e[23]||(e[23]=[t("i",{class:"fa fa-spinner fa-spin text-blue-400"},null,-1)]))):g("",!0)])]),t("td",le,[f(t("input",{type:"number",min:"0.01",step:"0.01","onUpdate:modelValue":o=>s.qty=o,onInput:o=>D(n),class:"input input-bordered w-full",required:""},null,40,ae),[[I,s.qty,void 0,{number:!0}]])]),t("td",oe,[t("div",ne,[f(t("select",{"onUpdate:modelValue":o=>s.unit_id=o,class:"input input-bordered w-full",required:""},[e[24]||(e[24]=t("option",{value:""},"Pilih Unit",-1)),(i(!0),u(v,null,b(s.unitOptions,o=>(i(),u("option",{key:o.id,value:o.id},r(o.name)+r(o.is_medium?" (Medium)":""),9,ue))),128))],8,ie),[[T,s.unit_id]]),l.value.payment_method==="contra_bon"&&((d=s.unitOptions.find(o=>o.id===s.unit_id))!=null&&d.is_medium)?(i(),u("div",re," Auto ")):g("",!0)])]),t("td",de,[t("div",pe,[f(t("input",{type:"number",min:"0",step:"0.01","onUpdate:modelValue":o=>s.price=o,onInput:o=>D(n),class:"input input-bordered w-full",required:""},null,40,me),[[I,s.price,void 0,{number:!0}]]),l.value.payment_method==="contra_bon"&&s.price>0?(i(),u("div",ce," Auto ")):g("",!0)])]),t("td",fe,r(c(s.subtotal)),1),t("td",ge,[t("button",{type:"button",onClick:o=>Z(n),class:"text-red-500 hover:text-red-700",disabled:l.value.items.length===1},e[25]||(e[25]=[t("i",{class:"fa-solid fa-trash"},null,-1)]),8,ve)])])}),128))]),t("tfoot",null,[t("tr",null,[e[26]||(e[26]=t("td",{colspan:"4",class:"px-3 py-2 text-right font-bold"},"Total:",-1)),t("td",be,r(c(M.value)),1),e[27]||(e[27]=t("td",null,null,-1))])])])]),t("div",{class:"mt-2"},[t("button",{type:"button",onClick:Y,class:"text-blue-500 hover:text-blue-700"},e[29]||(e[29]=[t("i",{class:"fa fa-plus mr-1"},null,-1),p(" Tambah Item ")]))])]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-xs font-bold text-gray-600 mb-1"},"Catatan",-1)),f(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.notes=s),class:"input input-bordered w-full",rows:"3"},null,512),[[I,l.value.notes]])]),t("div",null,[e[32]||(e[32]=t("label",{class:"block text-xs font-bold text-gray-600 mb-1"},"Upload Bon/Invoice (jpg/png, bisa lebih dari 1)",-1)),t("input",{type:"file",multiple:"",accept:"image/jpeg,image/png",onChange:lt},null,32),A.value.length?(i(),u("div",he,[(i(!0),u(v,null,b(A.value,(s,n)=>(i(),u("div",{key:n,class:"w-24 h-24 border rounded overflow-hidden flex items-center justify-center bg-gray-50"},[t("img",{src:s,class:"object-contain w-full h-full"},null,8,_e)]))),128))])):g("",!0)]),Q.value?(i(),u("div",ye,e[33]||(e[33]=[t("i",{class:"fa fa-triangle-exclamation text-xl"},null,-1),t("span",null,[p("Total transaksi "),t("strong",null,"Cash"),p(" outlet hari ini sudah melebihi Rp 500.000!")],-1)]))):g("",!0),t("div",xe,[t("button",{type:"button",onClick:ot,class:"btn px-6 py-2 rounded-lg font-bold bg-gradient-to-r from-gray-200 to-gray-400 text-gray-700 shadow-md hover:from-gray-300 hover:to-gray-500 active:scale-95 transition-all"}," Batal "),t("button",{type:"submit",class:"btn px-6 py-2 rounded-lg font-bold bg-gradient-to-r from-blue-500 to-blue-700 text-white shadow-lg hover:from-blue-600 hover:to-blue-800 active:scale-95 transition-all flex items-center gap-2",disabled:w.value},[w.value?(i(),u("span",ke,e[34]||(e[34]=[t("i",{class:"fa fa-spinner fa-spin"},null,-1),p(" Menyimpan...")]))):(i(),u("span",Ie,e[35]||(e[35]=[t("i",{class:"fa fa-save"},null,-1),p(" Simpan")])))],8,we)])],32)])])]),_:1}))}};export{Oe as default};
