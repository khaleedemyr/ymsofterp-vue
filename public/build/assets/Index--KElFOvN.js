import{r as h,c as H,a as E,W as A,w as G,L as c,B as p,x as f,Q as y,U as I,C as v,D as t,O as R,S as k,H as D,G as w,J as S,E as C,F as T,M as U,N as i,l as _}from"./vendor-vue-g7iCcTkf.js";import{A as K}from"./AppLayout-cjLApVXh.js";import{_ as Y}from"./Pagination-DElM3wPU.js";import{d as J}from"./debounce-DFlfn0vu.js";import{S as d}from"./app-vFC8Iw15.js";import{a as Q}from"./vendor-utils-CpgP2uT4.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-pwkt9lfN.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const P={class:"w-full py-8 px-4 md:px-6"},X={class:"mb-8"},Z={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6"},j={class:"flex gap-3"},tt=["href"],et={class:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6"},at={class:"flex flex-col md:flex-row md:items-end gap-4"},ot={class:"flex-1"},rt={class:"flex-1"},st={class:"flex-1"},lt={class:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden"},nt={class:"overflow-x-auto"},it={class:"min-w-full divide-y divide-gray-200"},dt={class:"bg-white divide-y divide-gray-200"},ut={key:0,class:"hover:bg-gray-50"},ct={class:"px-6 py-4 whitespace-nowrap"},pt={class:"flex items-center"},ft={class:"font-mono font-bold text-blue-700"},gt={class:"px-6 py-4 whitespace-nowrap"},xt={class:"text-sm font-medium text-gray-900"},bt={class:"px-6 py-4 whitespace-nowrap"},mt={class:"text-sm text-gray-900"},ht={class:"px-6 py-4 whitespace-nowrap"},yt={class:"text-sm text-gray-600"},vt={class:"px-6 py-4 whitespace-nowrap"},wt={class:"px-6 py-4 whitespace-nowrap"},_t={class:"text-sm text-gray-900"},kt={class:"px-6 py-4 whitespace-nowrap"},Dt={class:"px-6 py-4 whitespace-nowrap"},St={class:"flex items-center justify-center gap-2"},Ct=["onClick","disabled","title"],Bt={key:0,class:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap"},Nt={class:"mt-6"},Ot={__name:"Index",props:{adjustments:Object,filters:Object,user_outlet_id:[String,Number],auth:Object},setup(m){const s=m,g=h(s.filters.search||""),r=h({from:s.filters.from||"",to:s.filters.to||""}),B=H(()=>route("outlet-food-inventory-adjustment.export-detail",{search:g.value||"",from:r.value.from||"",to:r.value.to||""})),V=()=>{if(!r.value.from||!r.value.to){d.fire({icon:"warning",title:"Tanggal wajib diisi",text:"From Date dan To Date wajib diisi untuk export detail.",confirmButtonText:"OK"});return}const o=new Date(r.value.from),e=new Date(r.value.to);if((e.getFullYear()-o.getFullYear())*12+(e.getMonth()-o.getMonth())>3){d.fire({icon:"warning",title:"Range terlalu besar",text:"Range tanggal maksimal 3 bulan untuk export detail.",confirmButtonText:"OK"});return}window.location.href=B.value},M=h("");E(()=>{s.user_outlet_id&&String(s.user_outlet_id)!=="1"&&(M.value=String(s.user_outlet_id))});const $=J(()=>{A.get(route("outlet-food-inventory-adjustment.index"),{search:g.value,from:r.value.from,to:r.value.to},{preserveState:!0,replace:!0})},400);G([g,r],()=>{$()});const N=o=>{if(!o)return"-";const e=new Date(o);return isNaN(e)?"-":e.toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"})},z=o=>{switch(o){case"waiting_approval":return"bg-gradient-to-r from-yellow-100 to-yellow-50 text-yellow-800 border border-yellow-200";case"waiting_cost_control":return"bg-gradient-to-r from-blue-100 to-blue-50 text-blue-800 border border-blue-200";case"approved":return"bg-gradient-to-r from-green-100 to-green-50 text-green-800 border border-green-200";case"rejected":return"bg-gradient-to-r from-red-100 to-red-50 text-red-800 border border-red-200";default:return"bg-gradient-to-r from-gray-100 to-gray-50 text-gray-800 border border-gray-200"}},F=o=>{switch(o){case"waiting_approval":return"Waiting Approval";case"waiting_cost_control":return"Waiting Cost Control";case"approved":return"Approved";case"rejected":return"Rejected";default:return o}},O=h(!1);function x(o){var u,b;if(s.canDelete!==void 0&&s.canDelete!==null)return["waiting_approval","waiting_cost_control","approved"].includes(o.status)&&s.canDelete;const a=["waiting_approval","waiting_cost_control"].includes(o.status),n=o.status==="approved",l=((b=(u=s.auth)==null?void 0:u.user)==null?void 0:b.id_role)==="5af56935b011a";return n?l:a}function L(o){return o.status==="approved"?"Hanya bisa dihapus oleh superadmin atau user warehouse division":"Hanya bisa dihapus jika status waiting_approval atau waiting_cost_control"}function W(o){var n;const e=s.adjustments.data.find(l=>l.id===o),a=(e==null?void 0:e.status)==="approved"?"Approved (Hanya bisa dihapus oleh user dengan role khusus)":(e==null?void 0:e.status)==="waiting_approval"?"Waiting Approval":"Waiting Cost Control";d.fire({title:"Hapus Outlet Stock Adjustment?",html:`
      <div class="text-left">
        <p class="mb-2"><strong>Number:</strong> ${(e==null?void 0:e.number)||"N/A"}</p>
        <p class="mb-2"><strong>Date:</strong> ${e!=null&&e.date?N(e.date):"N/A"}</p>
        <p class="mb-2"><strong>Outlet:</strong> ${((n=e==null?void 0:e.outlet)==null?void 0:n.nama_outlet)||"N/A"}</p>
        <p class="mb-2"><strong>Status:</strong> ${a}</p>
        <p class="text-red-600 font-semibold">Tindakan ini tidak dapat dibatalkan!</p>
        ${(e==null?void 0:e.status)==="approved"?'<p class="text-red-600 font-semibold">Data approved akan di-rollback dari inventory.</p>':""}
      </div>
    `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#EF4444",cancelButtonColor:"#6B7280",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal",reverseButtons:!0,showLoaderOnConfirm:!0,preConfirm:()=>(O.value=!0,Q.delete(`/outlet-food-inventory-adjustment/${o}`).then(l=>{l.data.success?(d.fire("Deleted!","Data berhasil dihapus dan inventory di-rollback.","success"),A.reload()):d.fire("Gagal",l.data.message||"Gagal menghapus data","error")}).catch(l=>{var u,b;d.fire("Gagal",((b=(u=l.response)==null?void 0:u.data)==null?void 0:b.message)||"Gagal menghapus data","error")}).finally(()=>{O.value=!1})),allowOutsideClick:()=>!d.isLoading()})}return(o,e)=>(p(),c(T,null,[f(y(I),{title:"Outlet Stock Adjustment"}),f(K,null,{default:v(()=>[t("div",P,[t("div",X,[t("div",Z,[e[6]||(e[6]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900 flex items-center gap-3"},[t("div",{class:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg"},[t("i",{class:"fa-solid fa-store text-white text-xl"})]),t("span",null,"Outlet Stock Adjustment")]),t("p",{class:"text-gray-600 mt-2 ml-14"},"Kelola penyesuaian stok outlet dengan mudah")],-1)),t("div",j,[t("a",{href:B.value,onClick:R(V,["prevent"]),class:"group relative px-6 py-3 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 font-semibold flex items-center gap-2 overflow-hidden"},e[3]||(e[3]=[t("span",{class:"absolute inset-0 bg-gradient-to-r from-emerald-700 to-green-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1),t("i",{class:"fa fa-file-excel relative z-10"},null,-1),t("span",{class:"relative z-10"},"Export Detail",-1)]),8,tt),f(y(k),{href:o.route("outlet-food-inventory-adjustment.report-universal"),class:"group relative px-6 py-3 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 font-semibold flex items-center gap-2 overflow-hidden"},{default:v(()=>e[4]||(e[4]=[t("span",{class:"absolute inset-0 bg-gradient-to-r from-emerald-600 to-emerald-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1),t("i",{class:"fa fa-chart-bar relative z-10"},null,-1),t("span",{class:"relative z-10"},"Report",-1)])),_:1},8,["href"]),f(y(k),{href:o.route("outlet-food-inventory-adjustment.create"),class:"group relative px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 font-semibold flex items-center gap-2 overflow-hidden"},{default:v(()=>e[5]||(e[5]=[t("span",{class:"absolute inset-0 bg-gradient-to-r from-blue-600 to-blue-700 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1),t("i",{class:"fa fa-plus relative z-10"},null,-1),t("span",{class:"relative z-10"},"Create New",-1)])),_:1},8,["href"])])]),t("div",et,[t("div",at,[t("div",ot,[e[7]||(e[7]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa fa-search text-gray-400 mr-2"}),w("Search ")],-1)),D(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>g.value=a),type:"text",placeholder:"Search by number, outlet, or item...",class:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 shadow-sm hover:shadow-md"},null,512),[[S,g.value]])]),t("div",rt,[e[8]||(e[8]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa fa-calendar text-gray-400 mr-2"}),w("From Date ")],-1)),D(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=a=>r.value.from=a),class:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 shadow-sm hover:shadow-md"},null,512),[[S,r.value.from]])]),t("div",st,[e[9]||(e[9]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa fa-calendar text-gray-400 mr-2"}),w("To Date ")],-1)),D(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=a=>r.value.to=a),class:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 shadow-sm hover:shadow-md"},null,512),[[S,r.value.to]])])])])]),t("div",lt,[t("div",nt,[t("table",it,[e[14]||(e[14]=t("thead",{class:"bg-gradient-to-r from-gray-50 to-gray-100"},[t("tr",null,[t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Number"),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Date"),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Outlet"),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Warehouse"),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Type"),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Created By"),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"},"Status"),t("th",{class:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",dt,[m.adjustments.data.length===0?(p(),c("tr",ut,e[10]||(e[10]=[t("td",{colspan:"8",class:"px-6 py-16 text-center"},[t("div",{class:"flex flex-col items-center justify-center"},[t("div",{class:"p-4 bg-gray-100 rounded-full mb-4"},[t("i",{class:"fa fa-inbox text-4xl text-gray-400"})]),t("p",{class:"text-gray-500 text-lg font-medium"},"No outlet stock adjustment data found"),t("p",{class:"text-gray-400 text-sm mt-2"},"Try adjusting your search or filters")])],-1)]))):C("",!0),(p(!0),c(T,null,U(m.adjustments.data,a=>{var n,l;return p(),c("tr",{key:a.id,class:"hover:bg-gradient-to-r hover:from-blue-50 hover:to-transparent transition-all duration-200 group"},[t("td",ct,[t("div",pt,[e[11]||(e[11]=t("div",{class:"flex-shrink-0 h-10 w-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mr-3 shadow-md"},[t("i",{class:"fa fa-file-alt text-white text-sm"})],-1)),t("span",ft,i(a.number),1)])]),t("td",gt,[t("div",xt,i(N(a.date)),1)]),t("td",bt,[t("div",mt,i(((n=a.outlet)==null?void 0:n.nama_outlet)||"-"),1)]),t("td",ht,[t("div",yt,i(a.warehouse_outlet_name||"-"),1)]),t("td",vt,[t("span",{class:_(["px-3 py-1.5 rounded-full text-xs font-bold shadow-sm",a.type==="in"?"bg-gradient-to-r from-green-100 to-green-50 text-green-800 border border-green-200":"bg-gradient-to-r from-red-100 to-red-50 text-red-800 border border-red-200"])},[t("i",{class:_([a.type==="in"?"fa fa-arrow-down":"fa fa-arrow-up","mr-1"])},null,2),w(" "+i(a.type==="in"?"Stock In":"Stock Out"),1)],2)]),t("td",wt,[t("div",_t,i(((l=a.creator)==null?void 0:l.nama_lengkap)||"-"),1)]),t("td",kt,[t("span",{class:_(["px-3 py-1.5 rounded-full text-xs font-bold shadow-sm",z(a.status)])},i(F(a.status)),3)]),t("td",Dt,[t("div",St,[f(y(k),{href:o.route("outlet-food-inventory-adjustment.show",a.id),class:"group relative p-2.5 bg-blue-50 hover:bg-blue-100 text-blue-600 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md",title:"View Details"},{default:v(()=>e[12]||(e[12]=[t("i",{class:"fa fa-eye"},null,-1),t("span",{class:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap"}," View Details ",-1)])),_:2},1032,["href"]),x(a)?(p(),c("button",{key:0,onClick:u=>W(a.id),disabled:!x(a),class:_(["group relative p-2.5 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md",x(a)?"":"opacity-50 cursor-not-allowed"]),title:x(a)?"Delete":L(a)},[e[13]||(e[13]=t("i",{class:"fa fa-trash"},null,-1)),x(a)?(p(),c("span",Bt," Delete ")):C("",!0)],10,Ct)):C("",!0)])])])}),128))])])])]),t("div",Nt,[f(Y,{links:m.adjustments.links},null,8,["links"])])])]),_:1})],64))}},Ut=q(Ot,[["__scopeId","data-v-a2bbd0b6"]]);export{Ut as default};
