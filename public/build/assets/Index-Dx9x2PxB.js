import{c as C,r as f,A as B,B as d,C as u,D as t,L as r,E as D,N as o,F as y,M as b,l as M,x as h,Q as c,S as p,G as n,H as R,I as V,W as T}from"./vendor-vue-g7iCcTkf.js";import{A as F}from"./AppLayout-CCl6N_RX.js";import"./vendor-utils-CpgP2uT4.js";import"./app-DvUgkxHf.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-oDgFzWKX.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const P={class:"py-12"},$={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},I={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},U={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},z={class:"p-6"},Q={class:"flex items-center"},W={class:"ml-4"},q={class:"text-2xl font-semibold text-gray-900"},H={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},J={class:"p-6"},K={class:"flex items-center"},X={class:"ml-4"},Y={class:"text-2xl font-semibold text-gray-900"},Z={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},tt={class:"p-6"},et={class:"flex items-center"},st={class:"ml-4"},ot={class:"text-2xl font-semibold text-gray-900"},lt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},at={class:"p-6"},dt={class:"flex items-center"},rt={class:"ml-4"},it={class:"text-2xl font-semibold text-gray-900"},nt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ut={class:"p-6"},gt={class:"flex items-center justify-between mb-4"},mt={class:"text-lg font-medium text-gray-900"},xt={class:"text-sm text-gray-500"},ct={class:"overflow-x-auto"},pt={class:"min-w-full divide-y divide-gray-200"},ft={class:"bg-white divide-y divide-gray-200"},yt={class:"px-6 py-4 whitespace-nowrap"},bt={class:"text-sm font-medium text-gray-900"},ht={class:"text-sm text-gray-500"},vt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},_t={class:"px-6 py-4 whitespace-nowrap"},wt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},kt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ct={key:0},Bt={class:"text-green-600 font-medium"},Dt={class:"text-xs text-gray-500"},Tt={key:1,class:"text-gray-500"},Lt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ot={class:"flex space-x-2"},Et={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},At={class:"p-6"},St={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},jt={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Nt={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},Gt={class:"mt-3"},Mt={class:"mb-4"},Rt=["value"],Vt={class:"flex justify-end space-x-3"},Ft=["disabled"],Pt={key:0},$t={key:1},Yt={__name:"Index",props:{categories:Array,categoriesByDivision:Object,outlets:Array},setup(g){const v=g,L=C(()=>v.categories.filter(s=>s.budget_type==="GLOBAL").length),O=C(()=>v.categories.filter(s=>s.budget_type==="PER_OUTLET").length),E=s=>s==="GLOBAL"?"Global":"Per Outlet",A=s=>s==="GLOBAL"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800",S=s=>s.outlet_budgets?s.outlet_budgets.reduce((e,l)=>e+parseFloat(l.allocated_budget),0):0,_=s=>s?"Rp "+new Intl.NumberFormat("id-ID").format(s):"Rp 0",j=()=>{T.reload()},m=f(!1),i=f(""),x=f(!1),N=()=>{i.value&&(x.value=!0,T.delete(`/budget-management/category/${i.value}`,{onFinish:()=>{x.value=!1,m.value=!1,i.value=""},onError:s=>{console.error("Delete errors:",s)}}))},G=()=>{alert("Export functionality will be implemented")};return(s,e)=>(d(),B(F,{title:"Budget Management"},{header:u(()=>e[3]||(e[3]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Budget Management ",-1)])),default:u(()=>[t("div",P,[t("div",$,[t("div",I,[t("div",U,[t("div",z,[t("div",Q,[e[5]||(e[5]=t("div",{class:"flex-shrink-0"},[t("i",{class:"fa fa-chart-pie text-blue-600 text-2xl"})],-1)),t("div",W,[e[4]||(e[4]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Categories",-1)),t("p",q,o(g.categories.length),1)])])])]),t("div",H,[t("div",J,[t("div",K,[e[7]||(e[7]=t("div",{class:"flex-shrink-0"},[t("i",{class:"fa fa-globe text-green-600 text-2xl"})],-1)),t("div",X,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-gray-500"},"Global Budgets",-1)),t("p",Y,o(L.value),1)])])])]),t("div",Z,[t("div",tt,[t("div",et,[e[9]||(e[9]=t("div",{class:"flex-shrink-0"},[t("i",{class:"fa fa-building text-orange-600 text-2xl"})],-1)),t("div",st,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-gray-500"},"Per-Outlet Budgets",-1)),t("p",ot,o(O.value),1)])])])]),t("div",lt,[t("div",at,[t("div",dt,[e[11]||(e[11]=t("div",{class:"flex-shrink-0"},[t("i",{class:"fa fa-store text-purple-600 text-2xl"})],-1)),t("div",rt,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Outlets",-1)),t("p",it,o(g.outlets.length),1)])])])])]),(d(!0),r(y,null,b(g.categoriesByDivision,(l,w)=>(d(),r("div",{key:w,class:"mb-8"},[t("div",nt,[t("div",ut,[t("div",gt,[t("h3",mt,o(w),1),t("span",xt,o(l.length)+" categories",1)]),t("div",ct,[t("table",pt,[e[14]||(e[14]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Category Name "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Subcategory "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Budget Type "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Budget Limit "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Outlet Allocations "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",ft,[(d(!0),r(y,null,b(l,a=>{var k;return d(),r("tr",{key:a.id},[t("td",yt,[t("div",bt,o(a.name),1),t("div",ht,o(a.description),1)]),t("td",vt,o(a.subcategory),1),t("td",_t,[t("span",{class:M([A(a.budget_type),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},o(E(a.budget_type)),3)]),t("td",wt,o(_(a.budget_limit)),1),t("td",kt,[a.budget_type==="PER_OUTLET"?(d(),r("div",Ct,[t("span",Bt,o(((k=a.outlet_budgets)==null?void 0:k.length)||0)+" outlets",1),t("div",Dt," Total: "+o(_(S(a))),1)])):(d(),r("span",Tt,"-"))]),t("td",Lt,[t("div",Ot,[h(c(p),{href:`/budget-management/category/${a.id}/edit`,class:"text-blue-600 hover:text-blue-900"},{default:u(()=>e[12]||(e[12]=[t("i",{class:"fa fa-edit"},null,-1),n(" Edit ")])),_:2},1032,["href"]),a.budget_type==="PER_OUTLET"?(d(),B(c(p),{key:0,href:`/budget-management/category/${a.id}/outlet-budgets`,class:"text-green-600 hover:text-green-900"},{default:u(()=>e[13]||(e[13]=[t("i",{class:"fa fa-cog"},null,-1),n(" Manage ")])),_:2},1032,["href"])):D("",!0)])])])}),128))])])])])])]))),128)),t("div",Et,[t("div",At,[e[20]||(e[20]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Quick Actions",-1)),t("div",St,[h(c(p),{href:"/budget-management/category/create",class:"flex items-center justify-center px-4 py-2 border border-green-300 rounded-md shadow-sm text-sm font-medium text-green-700 bg-green-50 hover:bg-green-100"},{default:u(()=>e[15]||(e[15]=[t("i",{class:"fa fa-plus mr-2"},null,-1),n(" Create Category ")])),_:1}),t("button",{onClick:e[0]||(e[0]=l=>m.value=!0),class:"flex items-center justify-center px-4 py-2 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-red-50 hover:bg-red-100"},e[16]||(e[16]=[t("i",{class:"fa fa-trash mr-2"},null,-1),n(" Delete Category ")])),t("button",{onClick:j,class:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"},e[17]||(e[17]=[t("i",{class:"fa fa-refresh mr-2"},null,-1),n(" Refresh Data ")])),h(c(p),{href:"/budget-management/budget-summary",class:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"},{default:u(()=>e[18]||(e[18]=[t("i",{class:"fa fa-chart-bar mr-2"},null,-1),n(" View Summary ")])),_:1}),t("button",{onClick:G,class:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"},e[19]||(e[19]=[t("i",{class:"fa fa-download mr-2"},null,-1),n(" Export Data ")]))])])])])]),m.value?(d(),r("div",jt,[t("div",Nt,[t("div",Gt,[e[23]||(e[23]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Delete Budget Category",-1)),e[24]||(e[24]=t("p",{class:"text-sm text-gray-600 mb-4"}," Select a category to delete. Note: Categories with existing purchase requisitions cannot be deleted. ",-1)),t("div",Mt,[e[22]||(e[22]=t("label",{for:"category_to_delete",class:"block text-sm font-medium text-gray-700 mb-2"}," Select Category to Delete ",-1)),R(t("select",{id:"category_to_delete","onUpdate:modelValue":e[1]||(e[1]=l=>i.value=l),class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},[e[21]||(e[21]=t("option",{value:""},"Select a category",-1)),(d(!0),r(y,null,b(g.categories,l=>(d(),r("option",{key:l.id,value:l.id},o(l.name)+" ("+o(l.division)+") ",9,Rt))),128))],512),[[V,i.value]])]),t("div",Vt,[t("button",{onClick:e[2]||(e[2]=l=>{m.value=!1,i.value=""}),class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded"}," Cancel "),t("button",{onClick:N,disabled:!i.value||x.value,class:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50"},[x.value?(d(),r("span",Pt,"Deleting...")):(d(),r("span",$t,"Delete Category"))],8,Ft)])])])])):D("",!0)]),_:1}))}};export{Yt as default};
