import{r as z,A as H,B as a,C as V,D as t,H as x,J as W,L as r,F as c,M as p,N as o,I as b,G as g,E as k,l as _,W as u}from"./vendor-vue-g7iCcTkf.js";import{A as Y}from"./AppLayout-U5X72hCR.js";import{S as M}from"./app-CMkuePvF.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DCdSPjRr.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const G={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},J={class:"p-4"},R={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},q=["value"],Q=["value"],X=["value"],Z={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},tt={class:"p-6"},et={class:"overflow-x-auto"},st={class:"min-w-full divide-y divide-gray-200"},lt={class:"bg-white divide-y divide-gray-200"},at={key:0},ot={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},rt={class:"px-6 py-4"},nt={class:"text-sm font-medium text-gray-900"},it={class:"text-sm text-gray-500"},dt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ut={class:"px-6 py-4 whitespace-nowrap"},mt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},xt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ct={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},pt={key:1,class:"text-gray-400"},gt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ft={class:"flex items-center gap-2"},yt=["onClick"],bt=["onClick"],vt=["onClick"],wt=["onClick"],ht={key:0,class:"px-4 py-3 border-t border-gray-200 bg-white"},kt={class:"flex items-center justify-between"},_t={class:"flex items-center gap-4"},Ct={class:"text-sm text-gray-700"},Bt={class:"flex items-center gap-2"},St={class:"flex items-center gap-2"},Tt=["onClick"],Lt={__name:"Index",props:{enrollTests:Object,statusOptions:Array,masterSoals:Array,users:Array,filters:Object},setup(n){var B,S,T,E,A;const d=n,i=z({search:((B=d.filters)==null?void 0:B.search)||"",status:((S=d.filters)==null?void 0:S.status)||"all",master_soal_id:((T=d.filters)==null?void 0:T.master_soal_id)||"",user_id:((E=d.filters)==null?void 0:E.user_id)||"",per_page:((A=d.filters)==null?void 0:A.per_page)||10});function v(){u.get(route("enroll-test.index"),i.value,{preserveState:!0,replace:!0})}function U(){i.value={search:"",status:"all",master_soal_id:"",user_id:"",per_page:10},v()}function j(l){l>=1&&l<=d.enrollTests.last_page&&u.get(route("enroll-test.index"),{...i.value,page:l},{preserveState:!0,replace:!0})}function F(){const l=d.enrollTests.current_page,e=d.enrollTests.last_page,s=[],f=Math.max(1,l-2),y=Math.min(e,l+2);for(let m=f;m<=y;m++)s.push(m);return s}function w(){u.visit(route("enroll-test.create"))}function N(l){u.visit(route("enroll-test.show",l.id))}function $(l){u.visit(route("enroll-test.edit",l.id))}function L(l){M.fire({title:"Konfirmasi",text:"Apakah Anda yakin ingin membatalkan enrollment ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Batalkan!",cancelButtonText:"Batal"}).then(e=>{e.isConfirmed&&u.delete(route("enroll-test.cancel",l.id))})}function O(l){M.fire({title:"Konfirmasi",text:"Apakah Anda yakin ingin menghapus enrollment ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"}).then(e=>{e.isConfirmed&&u.delete(route("enroll-test.destroy",l.id))})}function P(l){return{enrolled:"Terdaftar",in_progress:"Sedang Test",completed:"Selesai",expired:"Kedaluwarsa",cancelled:"Dibatalkan"}[l]||l}function I(l){return{enrolled:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",expired:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"}[l]||"bg-gray-100 text-gray-800"}function C(l){return l?new Date(l).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function K(l){return new Date(l)<new Date}return(l,e)=>(a(),H(Y,{title:"Enroll Test"},{header:V(()=>[t("div",{class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},[e[7]||(e[7]=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Enroll Test ",-1)),t("div",{class:"flex flex-wrap gap-2 w-full sm:w-auto"},[t("button",{onClick:w,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm sm:text-base"},e[5]||(e[5]=[t("i",{class:"fa-solid fa-plus"},null,-1),t("span",{class:"hidden sm:inline"},"Tambah Enrollment",-1),t("span",{class:"sm:hidden"},"Tambah",-1)])),e[6]||(e[6]=t("a",{href:"/enroll-test/create",class:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm sm:text-base"},[t("i",{class:"fa-solid fa-user-plus"}),t("span",{class:"hidden sm:inline"},"Enroll Test"),t("span",{class:"sm:hidden"},"Enroll")],-1))])])]),default:V(()=>[t("div",null,[t("div",G,[t("div",J,[e[16]||(e[16]=t("h3",{class:"text-lg font-semibold mb-4"},"Filter Enrollment",-1)),t("div",R,[t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Cari",-1)),x(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>i.value.search=s),placeholder:"Cari judul soal atau nama user...",class:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[W,i.value.search]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),x(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>i.value.status=s),class:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[(a(!0),r(c,null,p(n.statusOptions,s=>(a(),r("option",{key:s.value,value:s.value},o(s.label),9,q))),128))],512),[[b,i.value.status]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Master Soal",-1)),x(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>i.value.master_soal_id=s),class:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[10]||(e[10]=t("option",{value:""},"Semua Soal",-1)),(a(!0),r(c,null,p(n.masterSoals,s=>(a(),r("option",{key:s.id,value:s.id},o(s.judul),9,Q))),128))],512),[[b,i.value.master_soal_id]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"User",-1)),x(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>i.value.user_id=s),class:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[12]||(e[12]=t("option",{value:""},"Semua User",-1)),(a(!0),r(c,null,p(n.users,s=>(a(),r("option",{key:s.id,value:s.id},o(s.nama_lengkap),9,X))),128))],512),[[b,i.value.user_id]])])]),t("div",{class:"flex gap-2 mt-4"},[t("button",{onClick:v,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2"},e[14]||(e[14]=[t("i",{class:"fa-solid fa-search"},null,-1),g(" Cari ")])),t("button",{onClick:U,class:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg flex items-center gap-2"},e[15]||(e[15]=[t("i",{class:"fa-solid fa-refresh"},null,-1),g(" Reset ")]))])])]),t("div",Z,[t("div",tt,[t("div",et,[t("table",st,[e[24]||(e[24]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Master Soal"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"User"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Attempt"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Enrolled At"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Expired At"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),t("tbody",lt,[n.enrollTests.data.length===0?(a(),r("tr",at,[t("td",{colspan:"8",class:"px-6 py-12 text-center text-gray-500"},[e[18]||(e[18]=t("i",{class:"fa-solid fa-inbox text-4xl mb-4 block"},null,-1)),e[19]||(e[19]=g(" Tidak ada data enrollment ")),t("div",{class:"mt-4"},[t("button",{onClick:w,class:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg flex items-center gap-2 mx-auto"},e[17]||(e[17]=[t("i",{class:"fa-solid fa-plus"},null,-1),g(" Buat Enrollment Pertama ")]))])])])):k("",!0),(a(!0),r(c,null,p(n.enrollTests.data,(s,f)=>{var y,m,D;return a(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",ot,o((n.enrollTests.current_page-1)*n.enrollTests.per_page+f+1),1),t("td",rt,[t("div",nt,o((y=s.master_soal)==null?void 0:y.judul),1),t("div",it,o((m=s.master_soal)==null?void 0:m.deskripsi),1)]),t("td",dt,o((D=s.user)==null?void 0:D.nama_lengkap),1),t("td",ut,[t("span",{class:_(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",I(s.status)])},o(P(s.status)),3)]),t("td",mt,o(s.current_attempt)+" / "+o(s.max_attempts),1),t("td",xt,o(C(s.enrolled_at)),1),t("td",ct,[s.expired_at?(a(),r("span",{key:0,class:_(K(s.expired_at)?"text-red-600":"text-gray-900")},o(C(s.expired_at)),3)):(a(),r("span",pt,"Tidak ada"))]),t("td",gt,[t("div",ft,[t("button",{onClick:h=>N(s),class:"text-blue-600 hover:text-blue-900"},e[20]||(e[20]=[t("i",{class:"fa-solid fa-eye"},null,-1)]),8,yt),t("button",{onClick:h=>$(s),class:"text-yellow-600 hover:text-yellow-900"},e[21]||(e[21]=[t("i",{class:"fa-solid fa-edit"},null,-1)]),8,bt),s.status==="enrolled"?(a(),r("button",{key:0,onClick:h=>L(s),class:"text-red-600 hover:text-red-900"},e[22]||(e[22]=[t("i",{class:"fa-solid fa-times"},null,-1)]),8,vt)):k("",!0),t("button",{onClick:h=>O(s),class:"text-red-600 hover:text-red-900"},e[23]||(e[23]=[t("i",{class:"fa-solid fa-trash"},null,-1)]),8,wt)])])])}),128))])])]),n.enrollTests.total>0?(a(),r("div",ht,[t("div",kt,[t("div",_t,[t("div",Ct," Menampilkan "+o(n.enrollTests.from)+" sampai "+o(n.enrollTests.to)+" dari "+o(n.enrollTests.total)+" data ",1),t("div",Bt,[e[26]||(e[26]=t("label",{class:"text-sm text-gray-700"},"Per halaman:",-1)),x(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>i.value.per_page=s),onChange:v,class:"px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},e[25]||(e[25]=[t("option",{value:"5"},"5",-1),t("option",{value:"10"},"10",-1),t("option",{value:"15"},"15",-1),t("option",{value:"25"},"25",-1),t("option",{value:"50"},"50",-1)]),544),[[b,i.value.per_page]])])]),t("div",St,[(a(!0),r(c,null,p(F(),s=>(a(),r("button",{key:s,onClick:f=>j(s),class:_(["px-3 py-1 text-sm border rounded",s===n.enrollTests.current_page?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"])},o(s),11,Tt))),128))])])])):k("",!0)])])]),t("div",{class:"fixed bottom-6 right-6 z-50"},[t("button",{onClick:w,class:"bg-black hover:bg-gray-800 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2 text-sm font-medium transition-all duration-200 hover:shadow-xl"},e[27]||(e[27]=[t("i",{class:"fa-solid fa-plus"},null,-1),g(" Enroll Test ")]))])]),_:1}))}};export{Lt as default};
