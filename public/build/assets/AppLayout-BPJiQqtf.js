import{r as _,P as aa,w as mo,n as ce,a as Oe,L as f,E as I,B as d,D as a,H as te,l as $,X as kt,G as Y,Q as je,O as We,I as St,F as J,M as Q,N as b,J as He,j as na,Y as sa,Z as vo,R as ra,i as ut,p as dt,c as re,A as bo,x as ge,C as Ye,_ as ia,T as la,$ as ft,S as Jt,a0 as ca,a1 as ua}from"./vendor-vue-g7iCcTkf.js";import{S as W,u as da}from"./app-l4d6TH2E.js";import{a as X}from"./vendor-utils-CpgP2uT4.js";import{_ as Ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as fa}from"./ProfileUpdateModal-DspUIAzb.js";/*!
 * Signature Pad v5.0.7 | https://github.com/szimek/signature_pad
 * (c) 2025 Szymon Nowak | Released under the MIT license
 */class Xe{constructor(e,o,n,s){if(isNaN(e)||isNaN(o))throw new Error(`Point is invalid: (${e}, ${o})`);this.x=+e,this.y=+o,this.pressure=n||0,this.time=s||Date.now()}distanceTo(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}equals(e){return this.x===e.x&&this.y===e.y&&this.pressure===e.pressure&&this.time===e.time}velocityFrom(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0}}class At{static fromPoints(e,o){const n=this.calculateControlPoints(e[0],e[1],e[2]).c2,s=this.calculateControlPoints(e[1],e[2],e[3]).c1;return new At(e[1],n,s,e[2],o.start,o.end)}static calculateControlPoints(e,o,n){const s=e.x-o.x,r=e.y-o.y,l=o.x-n.x,m=o.y-n.y,g={x:(e.x+o.x)/2,y:(e.y+o.y)/2},u={x:(o.x+n.x)/2,y:(o.y+n.y)/2},S=Math.sqrt(s*s+r*r),T=Math.sqrt(l*l+m*m),F=g.x-u.x,L=g.y-u.y,P=S+T==0?0:T/(S+T),O={x:u.x+F*P,y:u.y+L*P},M=o.x-O.x,x=o.y-O.y;return{c1:new Xe(g.x+M,g.y+x),c2:new Xe(u.x+M,u.y+x)}}constructor(e,o,n,s,r,l){this.startPoint=e,this.control2=o,this.control1=n,this.endPoint=s,this.startWidth=r,this.endWidth=l}length(){let o=0,n,s;for(let r=0;r<=10;r+=1){const l=r/10,m=this.point(l,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),g=this.point(l,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(r>0){const u=m-n,S=g-s;o+=Math.sqrt(u*u+S*S)}n=m,s=g}return o}point(e,o,n,s,r){return o*(1-e)*(1-e)*(1-e)+3*n*(1-e)*(1-e)*e+3*s*(1-e)*e*e+r*e*e*e}}class pa{constructor(){try{this._et=new EventTarget}catch{this._et=document}}addEventListener(e,o,n){this._et.addEventListener(e,o,n)}dispatchEvent(e){return this._et.dispatchEvent(e)}removeEventListener(e,o,n){this._et.removeEventListener(e,o,n)}}function ha(t,e=250){let o=0,n=null,s,r,l;const m=()=>{o=Date.now(),n=null,s=t.apply(r,l),n||(r=null,l=[])};return function(...u){const S=Date.now(),T=e-(S-o);return r=this,l=u,T<=0||T>e?(n&&(clearTimeout(n),n=null),o=S,s=t.apply(r,l),n||(r=null,l=[])):n||(n=window.setTimeout(m,T)),s}}class Qe extends pa{constructor(e,o={}){var n,s,r;super(),this.canvas=e,this._drawingStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this._handleMouseDown=l=>{!this._isLeftButtonPressed(l,!0)||this._drawingStroke||this._strokeBegin(this._pointerEventToSignatureEvent(l))},this._handleMouseMove=l=>{if(!this._isLeftButtonPressed(l,!0)||!this._drawingStroke){this._strokeEnd(this._pointerEventToSignatureEvent(l),!1);return}this._strokeMoveUpdate(this._pointerEventToSignatureEvent(l))},this._handleMouseUp=l=>{this._isLeftButtonPressed(l)||this._strokeEnd(this._pointerEventToSignatureEvent(l))},this._handleTouchStart=l=>{l.targetTouches.length!==1||this._drawingStroke||(l.cancelable&&l.preventDefault(),this._strokeBegin(this._touchEventToSignatureEvent(l)))},this._handleTouchMove=l=>{if(l.targetTouches.length===1){if(l.cancelable&&l.preventDefault(),!this._drawingStroke){this._strokeEnd(this._touchEventToSignatureEvent(l),!1);return}this._strokeMoveUpdate(this._touchEventToSignatureEvent(l))}},this._handleTouchEnd=l=>{l.targetTouches.length===0&&(l.cancelable&&l.preventDefault(),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this._strokeEnd(this._touchEventToSignatureEvent(l)))},this._handlePointerDown=l=>{!l.isPrimary||!this._isLeftButtonPressed(l)||this._drawingStroke||(l.preventDefault(),this._strokeBegin(this._pointerEventToSignatureEvent(l)))},this._handlePointerMove=l=>{if(l.isPrimary){if(!this._isLeftButtonPressed(l,!0)||!this._drawingStroke){this._strokeEnd(this._pointerEventToSignatureEvent(l),!1);return}l.preventDefault(),this._strokeMoveUpdate(this._pointerEventToSignatureEvent(l))}},this._handlePointerUp=l=>{!l.isPrimary||this._isLeftButtonPressed(l)||(l.preventDefault(),this._strokeEnd(this._pointerEventToSignatureEvent(l)))},this.velocityFilterWeight=o.velocityFilterWeight||.7,this.minWidth=o.minWidth||.5,this.maxWidth=o.maxWidth||2.5,this.throttle=(n=o.throttle)!==null&&n!==void 0?n:16,this.minDistance=(s=o.minDistance)!==null&&s!==void 0?s:5,this.dotSize=o.dotSize||0,this.penColor=o.penColor||"black",this.backgroundColor=o.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=o.compositeOperation||"source-over",this.canvasContextOptions=(r=o.canvasContextOptions)!==null&&r!==void 0?r:{},this._strokeMoveUpdate=this.throttle?ha(Qe.prototype._strokeUpdate,this.throttle):Qe.prototype._strokeUpdate,this._ctx=e.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}clear(){const{_ctx:e,canvas:o}=this;e.fillStyle=this.backgroundColor,e.clearRect(0,0,o.width,o.height),e.fillRect(0,0,o.width,o.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(e,o={}){return new Promise((n,s)=>{const r=new Image,l=o.ratio||window.devicePixelRatio||1,m=o.width||this.canvas.width/l,g=o.height||this.canvas.height/l,u=o.xOffset||0,S=o.yOffset||0;this._reset(this._getPointGroupOptions()),r.onload=()=>{this._ctx.drawImage(r,u,S,m,g),n()},r.onerror=T=>{s(T)},r.crossOrigin="anonymous",r.src=e,this._isEmpty=!1})}toDataURL(e="image/png",o){switch(e){case"image/svg+xml":return typeof o!="object"&&(o=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(o))}`;default:return typeof o!="number"&&(o=void 0),this.canvas.toDataURL(e,o)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const e=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!e?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerDown),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this._removeMoveUpEventListeners()}_getListenerFunctions(){var e;const o=window.document===this.canvas.ownerDocument?window:(e=this.canvas.ownerDocument.defaultView)!==null&&e!==void 0?e:this.canvas.ownerDocument;return{addEventListener:o.addEventListener.bind(o),removeEventListener:o.removeEventListener.bind(o)}}_removeMoveUpEventListeners(){const{removeEventListener:e}=this._getListenerFunctions();e("pointermove",this._handlePointerMove),e("pointerup",this._handlePointerUp),e("mousemove",this._handleMouseMove),e("mouseup",this._handleMouseUp),e("touchmove",this._handleTouchMove),e("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(e,{clear:o=!0}={}){o&&this.clear(),this._fromData(e,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(e)}toData(){return this._data}_isLeftButtonPressed(e,o){return o?e.buttons===1:(e.buttons&1)===1}_pointerEventToSignatureEvent(e){return{event:e,type:e.type,x:e.clientX,y:e.clientY,pressure:"pressure"in e?e.pressure:0}}_touchEventToSignatureEvent(e){const o=e.changedTouches[0];return{event:e,type:e.type,x:o.clientX,y:o.clientY,pressure:o.force}}_getPointGroupOptions(e){return{penColor:e&&"penColor"in e?e.penColor:this.penColor,dotSize:e&&"dotSize"in e?e.dotSize:this.dotSize,minWidth:e&&"minWidth"in e?e.minWidth:this.minWidth,maxWidth:e&&"maxWidth"in e?e.maxWidth:this.maxWidth,velocityFilterWeight:e&&"velocityFilterWeight"in e?e.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:e&&"compositeOperation"in e?e.compositeOperation:this.compositeOperation}}_strokeBegin(e){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:e,cancelable:!0})))return;const{addEventListener:n}=this._getListenerFunctions();switch(e.event.type){case"mousedown":n("mousemove",this._handleMouseMove),n("mouseup",this._handleMouseUp);break;case"touchstart":n("touchmove",this._handleTouchMove),n("touchend",this._handleTouchEnd);break;case"pointerdown":n("pointermove",this._handlePointerMove),n("pointerup",this._handlePointerUp);break}this._drawingStroke=!0;const s=this._getPointGroupOptions(),r=Object.assign(Object.assign({},s),{points:[]});this._data.push(r),this._reset(s),this._strokeUpdate(e)}_strokeUpdate(e){if(!this._drawingStroke)return;if(this._data.length===0){this._strokeBegin(e);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:e}));const o=this._createPoint(e.x,e.y,e.pressure),n=this._data[this._data.length-1],s=n.points,r=s.length>0&&s[s.length-1],l=r?o.distanceTo(r)<=this.minDistance:!1,m=this._getPointGroupOptions(n);if(!r||!(r&&l)){const g=this._addPoint(o,m);r?g&&this._drawCurve(g,m):this._drawDot(o,m),s.push({time:o.time,x:o.x,y:o.y,pressure:o.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:e}))}_strokeEnd(e,o=!0){this._removeMoveUpEventListeners(),this._drawingStroke&&(o&&this._strokeUpdate(e),this._drawingStroke=!1,this.dispatchEvent(new CustomEvent("endStroke",{detail:e})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerDown)}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart)}_reset(e){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(e.minWidth+e.maxWidth)/2,this._ctx.fillStyle=e.penColor,this._ctx.globalCompositeOperation=e.compositeOperation}_createPoint(e,o,n){const s=this.canvas.getBoundingClientRect();return new Xe(e-s.left,o-s.top,n,new Date().getTime())}_addPoint(e,o){const{_lastPoints:n}=this;if(n.push(e),n.length>2){n.length===3&&n.unshift(n[0]);const s=this._calculateCurveWidths(n[1],n[2],o),r=At.fromPoints(n,s);return n.shift(),r}return null}_calculateCurveWidths(e,o,n){const s=n.velocityFilterWeight*o.velocityFrom(e)+(1-n.velocityFilterWeight)*this._lastVelocity,r=this._strokeWidth(s,n),l={end:r,start:this._lastWidth};return this._lastVelocity=s,this._lastWidth=r,l}_strokeWidth(e,o){return Math.max(o.maxWidth/(e+1),o.minWidth)}_drawCurveSegment(e,o,n){const s=this._ctx;s.moveTo(e,o),s.arc(e,o,n,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(e,o){const n=this._ctx,s=e.endWidth-e.startWidth,r=Math.ceil(e.length())*2;n.beginPath(),n.fillStyle=o.penColor;for(let l=0;l<r;l+=1){const m=l/r,g=m*m,u=g*m,S=1-m,T=S*S,F=T*S;let L=F*e.startPoint.x;L+=3*T*m*e.control1.x,L+=3*S*g*e.control2.x,L+=u*e.endPoint.x;let P=F*e.startPoint.y;P+=3*T*m*e.control1.y,P+=3*S*g*e.control2.y,P+=u*e.endPoint.y;const O=Math.min(e.startWidth+u*s,o.maxWidth);this._drawCurveSegment(L,P,O)}n.closePath(),n.fill()}_drawDot(e,o){const n=this._ctx,s=o.dotSize>0?o.dotSize:(o.minWidth+o.maxWidth)/2;n.beginPath(),this._drawCurveSegment(e.x,e.y,s),n.closePath(),n.fillStyle=o.penColor,n.fill()}_fromData(e,o,n){for(const s of e){const{points:r}=s,l=this._getPointGroupOptions(s);if(r.length>1)for(let m=0;m<r.length;m+=1){const g=r[m],u=new Xe(g.x,g.y,g.pressure,g.time);m===0&&this._reset(l);const S=this._addPoint(u,l);S&&o(S,l)}else this._reset(l),n(r[0],l)}}toSVG({includeBackgroundColor:e=!1}={}){const o=this._data,n=Math.max(window.devicePixelRatio||1,1),s=0,r=0,l=this.canvas.width/n,m=this.canvas.height/n,g=document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.setAttribute("xmlns","http://www.w3.org/2000/svg"),g.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),g.setAttribute("viewBox",`${s} ${r} ${l} ${m}`),g.setAttribute("width",l.toString()),g.setAttribute("height",m.toString()),e&&this.backgroundColor){const u=document.createElement("rect");u.setAttribute("width","100%"),u.setAttribute("height","100%"),u.setAttribute("fill",this.backgroundColor),g.appendChild(u)}return this._fromData(o,(u,{penColor:S})=>{const T=document.createElement("path");if(!isNaN(u.control1.x)&&!isNaN(u.control1.y)&&!isNaN(u.control2.x)&&!isNaN(u.control2.y)){const F=`M ${u.startPoint.x.toFixed(3)},${u.startPoint.y.toFixed(3)} C ${u.control1.x.toFixed(3)},${u.control1.y.toFixed(3)} ${u.control2.x.toFixed(3)},${u.control2.y.toFixed(3)} ${u.endPoint.x.toFixed(3)},${u.endPoint.y.toFixed(3)}`;T.setAttribute("d",F),T.setAttribute("stroke-width",(u.endWidth*2.25).toFixed(3)),T.setAttribute("stroke",S),T.setAttribute("fill","none"),T.setAttribute("stroke-linecap","round"),g.appendChild(T)}},(u,{penColor:S,dotSize:T,minWidth:F,maxWidth:L})=>{const P=document.createElement("circle"),O=T>0?T:(F+L)/2;P.setAttribute("r",O.toString()),P.setAttribute("cx",u.x.toString()),P.setAttribute("cy",u.y.toString()),P.setAttribute("fill",S),g.appendChild(P)}),g.outerHTML}}const ga={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 transition-all"},ma={class:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden animate-fade-in"},va={class:"p-6 max-h-[calc(90vh-140px)] overflow-y-auto"},ba={key:0,class:"mb-4 p-4 border rounded-lg bg-gray-50"},ya=["src"],_a={class:"flex border-b mb-4"},wa={class:"mb-4"},xa={class:"border rounded-lg p-2 bg-white"},ka={class:"mb-4"},Sa={class:"border rounded-lg p-4 bg-gray-50"},Ea={key:0,class:"text-center"},Ca={class:"cursor-pointer inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150"},Ta={key:1,class:"text-center"},Ia=["src"],Ma={class:"bg-gray-50 px-6 py-4 border-t"},Pa={class:"flex justify-end gap-3"},Da=["disabled"],Aa={key:0,class:"mr-2"},$a={__name:"ESignatureModal",props:{show:Boolean,user:Object},emits:["close","saved"],setup(t,{emit:e}){const o=t,n=e,s=_(null),r=_(null),l=_("draw"),m=_(null),g=_(""),u=_(!1),S=_(o.user.signature_path?`/storage/${o.user.signature_path}`:null),T=aa({signature:null,type:"draw"});mo(()=>o.show,k=>{k&&l.value==="draw"&&ce(()=>{L()})},{immediate:!0});const F=()=>{if(r.value){const k=Math.max(window.devicePixelRatio||1,1);r.value.width=r.value.offsetWidth*k,r.value.height=r.value.offsetHeight*k,r.value.getContext("2d").scale(k,k),s.value&&(s.value.clear(),L())}};Oe(()=>{window.addEventListener("resize",F)});const L=()=>{if(!r.value)return;s.value&&(s.value.clear(),s.value.off());const k=Math.max(window.devicePixelRatio||1,1);r.value.width=r.value.offsetWidth*k,r.value.height=r.value.offsetHeight*k,r.value.getContext("2d").scale(k,k),s.value=new Qe(r.value,{backgroundColor:"rgb(255, 255, 255)",penColor:"rgb(0, 0, 0)",velocityFilterWeight:.7,minWidth:.5,maxWidth:2.5,throttle:16})},P=()=>{s.value&&s.value.clear()},O=k=>{const w=k.target.files[0];w&&(m.value=w,g.value=URL.createObjectURL(w),T.type="upload",T.signature=w)},M=()=>{if(l.value==="draw"&&s.value){if(!s.value.isEmpty()){u.value=!0;const k=s.value.toDataURL("image/png");fetch(k).then(w=>w.blob()).then(w=>{T.type="draw",T.signature=new File([w],"signature.png",{type:"image/png"}),x()})}}else l.value==="upload"&&m.value&&(u.value=!0,x())},x=()=>{T.post(route("signature.store"),{preserveScroll:!0,onSuccess:k=>{var w,V,ee;u.value=!1,(ee=(V=(w=k==null?void 0:k.props)==null?void 0:w.auth)==null?void 0:V.user)!=null&&ee.signature_path&&(S.value=`/storage/${k.props.auth.user.signature_path}`),W.fire({icon:"success",title:"Success",text:"Signature saved successfully",timer:2e3,showConfirmButton:!1}),n("saved"),E()},onError:()=>{u.value=!1,W.fire({icon:"error",title:"Error",text:"Failed to save signature",timer:2e3,showConfirmButton:!1})}})},E=()=>{T.reset(),m.value=null,g.value="",s.value&&s.value.clear(),n("close")},j=k=>{l.value=k,k==="draw"&&ce(()=>{L()})};return(k,w)=>t.show?(d(),f("div",ga,[a("div",ma,[a("div",{class:"bg-gradient-to-r from-blue-500 to-blue-700 px-6 py-4 text-white"},[a("div",{class:"flex items-center justify-between"},[w[4]||(w[4]=a("div",{class:"flex items-center gap-3"},[a("i",{class:"fa-solid fa-signature text-2xl"}),a("h3",{class:"text-xl font-bold"},"E-Signature")],-1)),a("button",{onClick:E,class:"text-white hover:text-gray-200 transition-colors"},w[3]||(w[3]=[a("i",{class:"fa fa-times text-xl"},null,-1)]))])]),a("div",va,[S.value?(d(),f("div",ba,[w[5]||(w[5]=a("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Current Signature",-1)),a("img",{src:S.value,alt:"Current Signature",class:"max-h-32 mx-auto"},null,8,ya)])):I("",!0),a("div",_a,[a("button",{onClick:w[0]||(w[0]=V=>j("draw")),class:$(["px-4 py-2 font-medium",l.value==="draw"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"])}," Draw Signature ",2),a("button",{onClick:w[1]||(w[1]=V=>j("upload")),class:$(["px-4 py-2 font-medium",l.value==="upload"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"])}," Upload Image ",2)]),te(a("div",wa,[a("div",xa,[a("canvas",{ref_key:"canvas",ref:r,style:{"touch-action":"none",width:"100%",height:"200px"},class:"border rounded"},null,512)]),a("button",{onClick:P,class:"mt-2 px-3 py-1 text-sm text-gray-600 border rounded hover:bg-gray-100"}," Clear ")],512),[[kt,l.value==="draw"]]),te(a("div",ka,[a("div",Sa,[g.value?(d(),f("div",Ta,[a("img",{src:g.value,class:"max-h-48 mx-auto mb-2"},null,8,Ia),a("button",{onClick:w[2]||(w[2]=V=>{m.value=null,g.value=""}),class:"px-3 py-1 text-sm text-gray-600 border rounded hover:bg-gray-100"}," Remove ")])):(d(),f("div",Ea,[a("label",Ca,[a("input",{type:"file",class:"hidden",accept:"image/*",onChange:O},null,32),w[6]||(w[6]=Y(" Choose Image "))]),w[7]||(w[7]=a("p",{class:"mt-2 text-sm text-gray-500"},"PNG, JPG up to 2MB",-1))]))])],512),[[kt,l.value==="upload"]])]),a("div",Ma,[a("div",Pa,[a("button",{onClick:E,class:"px-6 py-2 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-all font-medium"},w[8]||(w[8]=[a("i",{class:"fa fa-times mr-2"},null,-1),Y("Cancel ")])),a("button",{onClick:M,disabled:je(T).processing||u.value,class:"px-6 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all font-medium disabled:opacity-50 disabled:cursor-not-allowed"},[u.value?(d(),f("span",Aa,w[9]||(w[9]=[a("i",{class:"fas fa-spinner fa-spin"},null,-1)]))):I("",!0),w[10]||(w[10]=a("i",{class:"fa fa-save mr-2"},null,-1)),w[11]||(w[11]=Y("Save Signature "))],8,Da)])])])])):I("",!0)}},ja=Ge($a,[["__scopeId","data-v-2a6b784c"]]),Oa={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 transition-all"},La={class:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden animate-fade-in"},Ba={class:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},Na={class:"mb-8"},Ra={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Fa=["disabled"],Wa=["value"],Ha=["disabled"],Ua=["disabled"],Va={key:0,class:"fa fa-spinner fa-spin mr-2"},za={key:1,class:"fa fa-plus mr-2"},Ga={key:0,class:"text-center py-8"},qa={key:1,class:"text-center py-8"},Ka={key:2,class:"space-y-3"},Ja={class:"flex items-center justify-between"},Ya={class:"flex-1"},Xa={class:"flex items-center gap-3 mb-2"},Qa={class:"font-semibold text-gray-800"},Za={class:"flex items-center gap-2"},en={class:"font-mono text-lg font-bold text-gray-700"},tn={class:"text-xs text-gray-500 mt-1"},on={class:"flex gap-2"},an=["onClick"],nn=["onClick"],sn={__name:"UserPinModal",props:{show:Boolean},emits:["close"],setup(t,{emit:e}){const o=t,n=e,s=_(!1),r=_(!1),l=_([]),m=_([]),g=_({outlet_id:"",pin:""}),u=async()=>{try{const M=await X.get("/api/outlets");l.value=M.data}catch(M){console.error("Error fetching outlets:",M),W.fire({title:"Error",text:"Gagal memuat data outlet",icon:"error"})}},S=async()=>{r.value=!0;try{const M=await X.get("/api/user-pins");m.value=M.data}catch(M){console.error("Error fetching user pins:",M),W.fire({title:"Error",text:"Gagal memuat data PIN",icon:"error"})}finally{r.value=!1}},T=async()=>{var M,x;s.value=!0;try{const E=await X.post("/api/user-pins",g.value);E.data.success?(W.fire({title:"Berhasil!",text:E.data.message,icon:"success"}),g.value={outlet_id:"",pin:""},await S()):W.fire({title:"Gagal!",text:E.data.message,icon:"error"})}catch(E){console.error("Error adding pin:",E);const j=((x=(M=E.response)==null?void 0:M.data)==null?void 0:x.message)||"Gagal menambah PIN";W.fire({title:"Error",text:j,icon:"error"})}finally{s.value=!1}},F=async M=>{var E,j;const{value:x}=await W.fire({title:"Edit PIN",text:`Outlet: ${M.nama_outlet}`,input:"text",inputValue:M.pin,inputPlaceholder:"Masukkan PIN baru",inputValidator:k=>{if(!k||k.length<1||k.length>10)return"PIN harus 1-10 karakter"},showCancelButton:!0,confirmButtonText:"Update",cancelButtonText:"Batal"});if(x)try{const k=await X.put(`/api/user-pins/${M.id}`,{pin:x});k.data.success?(W.fire({title:"Berhasil!",text:k.data.message,icon:"success"}),await S()):W.fire({title:"Gagal!",text:k.data.message,icon:"error"})}catch(k){console.error("Error updating pin:",k);const w=((j=(E=k.response)==null?void 0:E.data)==null?void 0:j.message)||"Gagal mengupdate PIN";W.fire({title:"Error",text:w,icon:"error"})}},L=async M=>{var E,j;if((await W.fire({title:"Hapus PIN?",text:"Apakah Anda yakin ingin menghapus PIN ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed)try{const k=await X.delete(`/api/user-pins/${M}`);k.data.success?(W.fire({title:"Berhasil!",text:k.data.message,icon:"success"}),await S()):W.fire({title:"Gagal!",text:k.data.message,icon:"error"})}catch(k){console.error("Error deleting pin:",k);const w=((j=(E=k.response)==null?void 0:E.data)==null?void 0:j.message)||"Gagal menghapus PIN";W.fire({title:"Error",text:w,icon:"error"})}},P=M=>M?new Date(M).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",O=()=>{n("close")};return mo(()=>o.show,M=>{M&&(u(),S())}),Oe(()=>{o.show&&(u(),S())}),(M,x)=>t.show?(d(),f("div",Oa,[a("div",La,[a("div",{class:"bg-gradient-to-r from-blue-500 to-blue-700 px-6 py-4 text-white"},[a("div",{class:"flex items-center justify-between"},[x[3]||(x[3]=a("div",{class:"flex items-center gap-3"},[a("i",{class:"fa-solid fa-key text-2xl"}),a("h3",{class:"text-xl font-bold"},"Kelola PIN Outlet")],-1)),a("button",{onClick:O,class:"text-white hover:text-gray-200 transition-colors"},x[2]||(x[2]=[a("i",{class:"fa fa-times text-xl"},null,-1)]))])]),a("div",Ba,[a("div",Na,[x[8]||(x[8]=a("h4",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[a("i",{class:"fa-solid fa-plus text-blue-500"}),Y(" Tambah PIN Baru ")],-1)),a("form",{onSubmit:We(T,["prevent"]),class:"space-y-4"},[a("div",Ra,[a("div",null,[x[5]||(x[5]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[Y(" Pilih Outlet "),a("span",{class:"text-red-500"},"*")],-1)),te(a("select",{"onUpdate:modelValue":x[0]||(x[0]=E=>g.value.outlet_id=E),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:s.value},[x[4]||(x[4]=a("option",{value:""},"Pilih Outlet",-1)),(d(!0),f(J,null,Q(l.value,E=>(d(),f("option",{key:E.id_outlet,value:E.id_outlet},b(E.nama_outlet),9,Wa))),128))],8,Fa),[[St,g.value.outlet_id]])]),a("div",null,[x[6]||(x[6]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[Y(" PIN "),a("span",{class:"text-red-500"},"*")],-1)),te(a("input",{"onUpdate:modelValue":x[1]||(x[1]=E=>g.value.pin=E),type:"text",required:"",minlength:"1",maxlength:"10",placeholder:"Masukkan PIN (1-10 karakter)",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:s.value},null,8,Ha),[[He,g.value.pin]])])]),a("button",{type:"submit",disabled:s.value||!g.value.outlet_id||!g.value.pin,class:"w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[s.value?(d(),f("i",Va)):(d(),f("i",za)),x[7]||(x[7]=Y(" Tambah PIN "))],8,Ua)],32)]),a("div",null,[x[15]||(x[15]=a("h4",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[a("i",{class:"fa-solid fa-list text-blue-500"}),Y(" PIN yang Sudah Ada ")],-1)),r.value?(d(),f("div",Ga,x[9]||(x[9]=[a("i",{class:"fa fa-spinner fa-spin text-2xl text-blue-500 mb-2"},null,-1),a("p",{class:"text-gray-500"},"Memuat data PIN...",-1)]))):m.value.length===0?(d(),f("div",qa,x[10]||(x[10]=[a("i",{class:"fa-solid fa-key text-4xl text-gray-300 mb-4"},null,-1),a("p",{class:"text-gray-500"},"Belum ada PIN yang dibuat",-1)]))):(d(),f("div",Ka,[(d(!0),f(J,null,Q(m.value,E=>(d(),f("div",{key:E.id,class:"bg-gray-50 rounded-lg p-4 border hover:shadow-md transition-shadow"},[a("div",Ja,[a("div",Ya,[a("div",Xa,[x[11]||(x[11]=a("i",{class:"fa-solid fa-store text-blue-500"},null,-1)),a("h5",Qa,b(E.nama_outlet),1),a("span",{class:$([E.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600","px-2 py-1 rounded-full text-xs font-medium"])},b(E.is_active?"Aktif":"Tidak Aktif"),3)]),a("div",Za,[x[12]||(x[12]=a("i",{class:"fa-solid fa-key text-gray-400"},null,-1)),a("span",en,b(E.pin),1)]),a("p",tn," Dibuat: "+b(P(E.created_at)),1)]),a("div",on,[a("button",{onClick:j=>F(E),class:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-lg hover:bg-yellow-200 transition-colors text-sm font-medium"},x[13]||(x[13]=[a("i",{class:"fa fa-edit mr-1"},null,-1),Y(" Edit ")]),8,an),a("button",{onClick:j=>L(E.id),class:"px-3 py-1 bg-red-100 text-red-800 rounded-lg hover:bg-red-200 transition-colors text-sm font-medium"},x[14]||(x[14]=[a("i",{class:"fa fa-trash mr-1"},null,-1),Y(" Hapus ")]),8,nn)])])]))),128))]))])]),a("div",{class:"bg-gray-50 px-6 py-4 border-t"},[a("div",{class:"flex justify-end"},[a("button",{onClick:O,class:"px-6 py-2 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-all font-medium"},x[16]||(x[16]=[a("i",{class:"fa fa-times mr-2"},null,-1),Y("Tutup ")]))])])])])):I("",!0)}},rn=Ge(sn,[["__scopeId","data-v-db88abc4"]]),ln={class:"flex flex-col items-end gap-2 group"},cn=["title"],un={key:0,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},dn={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},fn={key:2,class:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center font-bold animate-pulse"},pn={key:0,class:"fixed bottom-24 right-6 w-[450px] h-[600px] bg-white rounded-lg shadow-2xl border border-gray-200 z-50 flex flex-col"},hn={class:"bg-blue-500 text-white p-4 rounded-t-lg flex items-center justify-between"},gn={class:"flex items-center gap-2"},mn={class:"flex-1 flex flex-col overflow-hidden"},vn={key:0,class:"flex-1 overflow-y-auto"},bn={class:"p-4"},yn={class:"flex items-center justify-between mb-4"},_n={class:"space-y-2"},wn=["onClick"],xn={class:"flex items-start justify-between"},kn={class:"flex-1 min-w-0"},Sn={class:"font-medium text-gray-800 truncate"},En={class:"text-sm text-gray-600 truncate mt-1"},Cn={class:"flex items-center gap-2 mt-2"},Tn={class:"text-xs text-gray-500"},In={key:0,class:"bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold"},Mn={key:0,class:"text-center py-8 text-gray-500"},Pn={key:1,class:"flex-1 flex flex-col h-full"},Dn={class:"p-4 border-b border-gray-200 bg-gray-50 flex-shrink-0"},An={class:"flex items-center justify-between"},$n={class:"font-semibold text-gray-800"},jn={class:"flex items-center gap-2 mt-1"},On={ref:"messagesContainer",class:"flex-1 overflow-y-auto p-4 space-y-3 min-h-0 scroll-smooth"},Ln={class:"max-w-xs lg:max-w-md"},Bn={class:"w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center flex-shrink-0"},Nn=["src"],Rn={key:1,class:"text-xs font-medium text-gray-600"},Fn={key:0,class:"text-xs font-medium text-gray-600 mb-1"},Wn={class:"text-sm"},Hn={key:1,class:"mt-2"},Un={key:0,class:"relative"},Vn=["src","onClick"],zn={key:1,class:"flex items-center gap-2 p-2 bg-white bg-opacity-20 rounded"},Gn={class:"text-xs flex-1 truncate"},qn=["href"],Kn={class:"text-xs mt-1 opacity-75"},Jn={key:0,class:"text-center py-8 text-gray-500"},Yn={class:"p-4 border-t border-gray-200 flex-shrink-0"},Xn={key:0,class:"mb-3"},Qn={class:"flex flex-wrap gap-2"},Zn={key:0,class:"relative"},es=["src","onClick"],ts={key:1,class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},os={class:"text-xs text-gray-700"},as=["onClick"],ns={class:"flex gap-2 items-end"},ss={class:"flex items-center gap-1 bg-gray-100 text-gray-700 px-2 py-2 rounded-md cursor-pointer hover:bg-gray-200 transition-colors flex-shrink-0"},rs=["disabled"],is={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},ls={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},cs={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},us={class:"bg-white rounded-lg p-6 w-full max-w-md mx-4"},ds={class:"space-y-4"},fs={key:0,class:"mb-3"},ps={class:"flex flex-wrap gap-2"},hs={key:0,class:"relative"},gs=["src","onClick"],ms={key:1,class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},vs={class:"text-xs text-gray-700"},bs=["onClick"],ys={class:"flex gap-2"},_s={class:"flex items-center gap-1 bg-gray-100 text-gray-700 px-3 py-2 rounded-md cursor-pointer hover:bg-gray-200 transition-colors"},ws={class:"flex justify-end gap-2 mt-6"},xs=["disabled"],ks={class:"relative max-w-4xl max-h-full p-4"},Ss=["src"],Es={key:3,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50"},Cs={class:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4"},Ts={class:"relative"},Is={key:1,class:"relative"},Ms=["src"],Ps={class:"flex justify-center gap-4 mt-4"},Je=5,Ds={__name:"LiveSupportWidget",setup(t){const e=_(!1),o=_([]),n=_(null),s=_([]),r=_(""),l=_(!1),m=_(!1),g=_(!1),u=_(0),S=_(!1),T=_(!1),F=_(""),L=_(!1),P=_([]),O=_(!1),M=_(""),x=_(null),E=_(null),j=_(!1),k=_({x:0,y:0}),w=_({x:24,y:24}),V=_(null),ee=_(!1),N=_({subject:"",customSubject:"",message:"",priority:"medium"}),q=_([]);let ie=null;const oe=p=>{if(e.value||p.target.closest("button"))return;ee.value=!1;const c=p.type==="touchstart"?p.touches[0].clientX:p.clientX,v=p.type==="touchstart"?p.touches[0].clientY:p.clientY;k.value={x:c-w.value.x,y:v-w.value.y,startX:c,startY:v,startTime:Date.now(),isButtonTouch:!1},document.addEventListener("mousemove",ae),document.addEventListener("mouseup",ne),document.addEventListener("touchmove",ae,{passive:!1}),document.addEventListener("touchend",ne)},ae=p=>{const c=p.type==="touchmove"?p.touches[0].clientX:p.clientX,v=p.type==="touchmove"?p.touches[0].clientY:p.clientY,D=Math.abs(c-k.value.startX),A=Math.abs(v-k.value.startY);if(!j.value&&(D>Je||A>Je)&&(j.value=!0,ee.value=!0,p.preventDefault()),!j.value)return;p.preventDefault();let G=c-k.value.x,se=v-k.value.y;const we=window.innerWidth,Gt=window.innerHeight,qt=80,Kt=80;G=Math.max(0,Math.min(G,we-qt)),se=Math.max(0,Math.min(se,Gt-Kt)),w.value={x:G,y:se},navigator.vibrate&&(D>Je||A>Je)&&navigator.vibrate(10),(G===0||G===we-qt||se===0||se===Gt-Kt)&&(V.value&&(V.value.style.transform="scale(1.05)",setTimeout(()=>{V.value.style.transform="scale(1)"},100)),navigator.vibrate&&navigator.vibrate(20)),j.value&&!ee.value&&(ee.value=!0,V.value&&(V.value.style.boxShadow="0 0 20px rgba(59, 130, 246, 0.5)",setTimeout(()=>{V.value.style.boxShadow=""},200)))},ne=p=>{document.removeEventListener("mousemove",ae),document.removeEventListener("mouseup",ne),document.removeEventListener("touchmove",ae),document.removeEventListener("touchend",ne),j.value&&(j.value=!1,pe()),setTimeout(()=>{ee.value=!1},100)},Te=p=>{if(ee.value||j.value){p.preventDefault();return}k.value.isButtonTouch||k.value.startTime&&Date.now()-k.value.startTime<200&&he(p)},C=p=>{p.stopPropagation(),k.value.isButtonTouch=!0,k.value.startTime=Date.now(),p.target.addEventListener("touchend",Ne,{once:!0})},Ne=p=>{k.value.startTime&&Date.now()-k.value.startTime<200&&he(p)},pe=()=>{localStorage.setItem("liveSupportWidgetPosition",JSON.stringify(w.value))},Ie=()=>{const p=localStorage.getItem("liveSupportWidgetPosition");if(p)try{const c=JSON.parse(p),v=window.innerWidth,D=window.innerHeight,A=80,G=80,se=Math.max(0,Math.min(c.x,v-A)),we=Math.max(0,Math.min(c.y,D-G));w.value={x:se,y:we},(se!==c.x||we!==c.y)&&pe()}catch(c){console.error("Error loading widget position:",c),w.value={x:24,y:24}}},Me=()=>{V.value&&(V.value.style.transform="scale(0.9)",setTimeout(()=>{V.value.style.transform="scale(1)"},150)),w.value={x:24,y:24},pe()},he=async p=>{if(ee.value){p.preventDefault();return}if(p.type==="touchend"&&k.value.startTime&&Date.now()-k.value.startTime>200){p.preventDefault();return}e.value=!e.value,e.value?(await le(),rt(),n.value&&(await ce(),setTimeout(()=>{ye()},100))):(_e(),u.value=0,g.value=!1)},le=async()=>{try{const p=await X.get("/api/support/conversations");o.value=p.data,u.value=o.value.reduce((c,v)=>v.unread_count&&typeof v.unread_count=="number"&&v.unread_count>0&&v.status!=="closed"&&v.status!=="resolved"?c+v.unread_count:c,0),u.value=u.value>0?u.value:0,g.value=u.value>0}catch(p){console.error("Error fetching conversations:",p)}},Pe=async p=>{if(n.value=p,await Re(p.id),p.unread_count>0)try{await X.post(`/api/support/conversations/${p.id}/mark-read`),await le()}catch(c){console.error("Error marking messages as read:",c)}await ce(),setTimeout(()=>{ye()},150)},Re=async p=>{try{const c=await X.get(`/api/support/conversations/${p}/messages`);s.value=c.data,await ce(),ye()}catch(c){console.error("Error fetching messages:",c)}},De=async()=>{var p,c,v,D;if(!(!r.value.trim()&&P.value.length===0||!n.value)){l.value=!0;try{const A=new FormData;A.append("message",r.value||""),P.value.forEach((se,we)=>{A.append(`files[${we}]`,se)});const G=await X.post(`/api/support/conversations/${n.value.id}/messages`,A,{headers:{"Content-Type":"multipart/form-data"}});s.value.push(G.data),r.value="",P.value=[],await ce(),setTimeout(()=>{ye()},100)}catch(A){console.error("Error sending message:",A),(c=(p=A.response)==null?void 0:p.data)!=null&&c.conversation_closed?(alert("Percakapan ini telah ditutup oleh tim support. Silakan buat percakapan baru jika Anda memerlukan bantuan lebih lanjut."),await le()):(D=(v=A.response)==null?void 0:v.data)!=null&&D.error&&alert(A.response.data.error)}finally{l.value=!1}}},Ae=async()=>{if(!(!N.value.subject.trim()||!N.value.message.trim()&&q.value.length===0)){L.value=!0;try{const p=N.value.subject==="Other"?N.value.customSubject.trim():N.value.subject;if(!p){alert("Silakan tentukan subjek percakapan");return}const c=new FormData;c.append("subject",p),c.append("message",N.value.message||""),c.append("priority",N.value.priority),q.value.forEach((D,A)=>{c.append(`files[${A}]`,D)});const v=await X.post("/api/support/conversations",c,{headers:{"Content-Type":"multipart/form-data"}});o.value.unshift(v.data),n.value=v.data,await Re(v.data.id),N.value={subject:"",customSubject:"",message:"",priority:"medium"},q.value=[],S.value=!1}catch(p){console.error("Error creating conversation:",p)}finally{L.value=!1}}},st=async()=>{m.value=!0,await le(),m.value=!1},ye=()=>{const p=messagesContainer.value;p&&(p.scrollTop=p.scrollHeight)},rt=()=>{ie=setInterval(async()=>{if(e.value){const p=s.value.length;await le(),n.value&&(await Re(n.value.id),s.value.length>p&&(await ce(),setTimeout(()=>{ye()},100)))}},5e3)},_e=()=>{ie&&(clearInterval(ie),ie=null)},$e=p=>{F.value=p,T.value=!0},Fe=()=>{T.value=!1,F.value=""},it=p=>{Array.from(p.target.files).forEach(v=>{v.size<=10*1024*1024?P.value.push(v):alert(`File ${v.name} terlalu besar. Ukuran maksimal adalah 10MB.`)}),p.target.value=""},qe=p=>{P.value.splice(p,1)},lt=p=>{Array.from(p.target.files).forEach(v=>{v.size<=10*1024*1024?q.value.push(v):alert(`File ${v.name} terlalu besar. Ukuran maksimal adalah 10MB.`)}),p.target.value=""},ct=p=>{q.value.splice(p,1)},B=async()=>{try{O.value=!0,await ce(),E.value=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),x.value&&(x.value.srcObject=E.value)}catch(p){console.error("Error accessing camera:",p),alert("Tidak dapat mengakses kamera. Silakan periksa izin kamera."),O.value=!1}},y=p=>URL.createObjectURL(p),i=p=>{try{return JSON.parse(p)}catch{return[{original_name:"attachment",file_path:p,file_size:0,mime_type:"application/octet-stream"}]}},H=p=>{const c=[".jpg",".jpeg",".png",".gif",".bmp",".webp"],v=p.toLowerCase().substring(p.lastIndexOf("."));return c.includes(v)},U=async()=>{try{O.value=!0,await ce(),E.value=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),x.value&&(x.value.srcObject=E.value)}catch(p){console.error("Error accessing camera:",p),alert("Tidak dapat mengakses kamera. Silakan periksa izin kamera."),O.value=!1}},h=()=>{if(x.value){const p=document.createElement("canvas"),c=p.getContext("2d");p.width=x.value.videoWidth,p.height=x.value.videoHeight,c.drawImage(x.value,0,0),M.value=p.toDataURL("image/jpeg",.8),E.value&&E.value.getTracks().forEach(v=>v.stop())}},K=()=>{if(M.value){const p=atob(M.value.split(",")[1]),c=M.value.split(",")[0].split(":")[1].split(";")[0],v=new ArrayBuffer(p.length),D=new Uint8Array(v);for(let G=0;G<p.length;G++)D[G]=p.charCodeAt(G);const A=new File([v],`camera_${Date.now()}.jpg`,{type:c});S.value?q.value.push(A):P.value.push(A),Ut()}},z=()=>{M.value="",U()},Ut=()=>{E.value&&E.value.getTracks().forEach(p=>p.stop()),O.value=!1,M.value="",E.value=null},ea=p=>{const c=new Date(p),D=new Date-c;return D<6e4?"Just now":D<36e5?`${Math.floor(D/6e4)}m ago`:D<864e5?`${Math.floor(D/36e5)}h ago`:D<6048e5?`${Math.floor(D/864e5)}d ago`:c.toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})},ta=p=>new Date(p).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),Vt=p=>({open:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800",pending:"bg-yellow-100 text-yellow-800"})[p]||"bg-gray-100 text-gray-800",zt=p=>({low:"bg-blue-100 text-blue-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"})[p]||"bg-gray-100 text-gray-800",oa=p=>p?p.split(" ").map(c=>c[0]).join("").toUpperCase().slice(0,2):"?";Oe(()=>{le(),Ie(),window.addEventListener("resize",Ke),window.addEventListener("orientationchange",()=>{setTimeout(Ke,100)})});const Ke=()=>{const p=window.innerWidth,c=window.innerHeight,v=80,D=80,A=Math.max(0,Math.min(w.value.x,p-v)),G=Math.max(0,Math.min(w.value.y,c-D));(A!==w.value.x||G!==w.value.y)&&(w.value={x:A,y:G},pe())};return na(()=>{_e(),window.removeEventListener("resize",Ke),window.removeEventListener("orientationchange",Ke),document.removeEventListener("mousemove",ae),document.removeEventListener("mouseup",ne),document.removeEventListener("touchmove",ae),document.removeEventListener("touchend",ne),E.value&&E.value.getTracks().forEach(p=>p.stop()),P.value.forEach(p=>{p.type.startsWith("image/")&&URL.revokeObjectURL(y(p))}),q.value.forEach(p=>{p.type.startsWith("image/")&&URL.revokeObjectURL(y(p))})}),(p,c)=>(d(),f(J,null,[a("div",{ref_key:"widgetContainer",ref:V,class:$(["fixed z-50",{dragging:j.value}]),style:sa({left:w.value.x+"px",bottom:w.value.y+"px",cursor:j.value?"grabbing":"grab"}),onMousedown:oe,onTouchstart:oe,onTouchend:Te,onDblclick:Me},[a("div",ln,[e.value?I("",!0):(d(),f("div",{key:0,class:$(["bg-gray-800 text-white text-xs px-3 py-1 rounded-full shadow-lg whitespace-nowrap flex items-center gap-1 cursor-move",{"opacity-80":j.value}])},c[9]||(c[9]=[a("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})],-1),Y(" Live Support ")]),2)),a("button",{onClick:he,onTouchstart:C,class:$(["bg-blue-500 hover:bg-blue-600 text-white rounded-full p-4 shadow-lg transition-all duration-300 hover:scale-110 relative select-none group",{"animate-pulse":g.value,"opacity-80":j.value,"scale-105":j.value,"shadow-2xl":j.value}]),title:e.value?"Click to close chat":"Click to open chat, drag to move, or double-click to reset position"},[e.value?(d(),f("svg",dn,c[11]||(c[11]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)]))):(d(),f("svg",un,c[10]||(c[10]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"},null,-1)]))),u.value>0?(d(),f("span",fn,b(u.value>99?"99+":u.value),1)):I("",!0)],42,cn)])],38),e.value?(d(),f("div",pn,[a("div",hn,[c[14]||(c[14]=a("div",{class:"flex items-center gap-2"},[a("div",{class:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),a("h3",{class:"font-semibold"},"Live Support")],-1)),a("div",gn,[a("button",{onClick:st,class:$(["text-white hover:text-gray-200 transition-colors",{"animate-spin":m.value}])},c[12]||(c[12]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)]),2),a("button",{onClick:he,class:"text-white hover:text-gray-200 transition-colors"},c[13]||(c[13]=[a("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),a("div",mn,[n.value?(d(),f("div",Pn,[a("div",Dn,[a("div",An,[a("div",null,[a("h4",$n,b(n.value.subject),1),a("div",jn,[a("span",{class:$([Vt(n.value.status),"text-xs px-2 py-1 rounded-full"])},b(n.value.status),3),a("span",{class:$([zt(n.value.priority),"text-xs px-2 py-1 rounded-full"])},b(n.value.priority),3)])]),a("button",{onClick:c[1]||(c[1]=v=>n.value=null),class:"text-gray-500 hover:text-gray-700"},c[17]||(c[17]=[a("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]))])]),a("div",On,[(d(!0),f(J,null,Q(s.value,v=>(d(),f("div",{key:v.id,class:$(["flex",v.sender_type==="user"?"justify-end":"justify-start"])},[a("div",Ln,[a("div",{class:$(["flex items-end gap-2",v.sender_type==="user"?"flex-row-reverse":"flex-row"])},[a("div",Bn,[v.sender_avatar?(d(),f("img",{key:0,src:`/storage/${v.sender_avatar}`,class:"w-8 h-8 rounded-full object-cover",alt:"Avatar"},null,8,Nn)):(d(),f("span",Rn,b(oa(v.sender_name)),1))]),a("div",{class:$(["rounded-lg px-3 py-2",v.sender_type==="user"?"bg-blue-500 text-white":"bg-gray-200 text-gray-800"])},[v.sender_type==="admin"&&v.sender_name?(d(),f("div",Fn,b(v.sender_name),1)):I("",!0),a("p",Wn,b(v.message),1),v.file_path?(d(),f("div",Hn,[(d(!0),f(J,null,Q(i(v.file_path),(D,A)=>(d(),f("div",{key:A,class:"mb-2"},[H(D.original_name)?(d(),f("div",Un,[a("img",{src:`/api/support/conversations/${n.value.id}/messages/${v.id}/files/${A}`,onClick:G=>$e(`/api/support/conversations/${n.value.id}/messages/${v.id}/files/${A}`),class:"max-w-full h-32 object-cover rounded cursor-pointer hover:opacity-80 transition-opacity",alt:"Attachment"},null,8,Vn)])):(d(),f("div",zn,[c[19]||(c[19]=a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),a("span",Gn,b(D.original_name),1),a("a",{href:`/api/support/conversations/${n.value.id}/messages/${v.id}/files/${A}`,target:"_blank",class:"text-xs hover:underline"},c[18]||(c[18]=[a("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]),8,qn)]))]))),128))])):I("",!0),a("p",Kn,b(ta(v.created_at)),1)],2)],2)])],2))),128)),s.value.length===0?(d(),f("div",Jn,c[20]||(c[20]=[a("p",null,"No messages yet",-1)]))):I("",!0)],512),a("div",Yn,[P.value.length>0?(d(),f("div",Xn,[a("div",Qn,[(d(!0),f(J,null,Q(P.value,(v,D)=>(d(),f("div",{key:D,class:"flex items-center gap-2 bg-gray-100 p-2 rounded-lg"},[v.type.startsWith("image/")?(d(),f("div",Zn,[a("img",{src:y(v),onClick:A=>$e(y(v)),class:"w-8 h-8 object-cover rounded cursor-pointer hover:opacity-80 transition-opacity",alt:"Thumbnail"},null,8,es)])):(d(),f("svg",ts,c[21]||(c[21]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)]))),a("span",os,b(v.name),1),a("button",{onClick:A=>qe(D),class:"text-red-500 hover:text-red-700"},c[22]||(c[22]=[a("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,as)]))),128))])])):I("",!0),a("div",ns,[a("label",ss,[c[23]||(c[23]=a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)),a("input",{type:"file",onChange:it,multiple:"",accept:"image/*,.pdf,.doc,.docx,.txt,.xlsx,.xls",class:"hidden"},null,32)]),a("button",{onClick:U,class:"flex items-center gap-1 bg-green-100 text-green-700 px-2 py-2 rounded-md hover:bg-green-200 transition-colors flex-shrink-0"},c[24]||(c[24]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])),te(a("input",{"onUpdate:modelValue":c[2]||(c[2]=v=>r.value=v),onKeyup:vo(De,["enter"]),type:"text",placeholder:"Type your message...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-0"},null,544),[[He,r.value]]),a("button",{onClick:De,disabled:!r.value.trim()&&P.value.length===0||l.value,class:"bg-blue-500 text-white px-3 py-2 rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0"},[l.value?(d(),f("svg",is,c[25]||(c[25]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(d(),f("svg",ls,c[26]||(c[26]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"},null,-1)])))],8,rs)])])])):(d(),f("div",vn,[a("div",bn,[a("div",yn,[c[15]||(c[15]=a("h4",{class:"font-semibold text-gray-800"},"Your Conversations",-1)),a("button",{onClick:c[0]||(c[0]=v=>S.value=!0),class:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm hover:bg-blue-600 transition-colors"}," + New Chat ")]),a("div",_n,[(d(!0),f(J,null,Q(o.value,v=>(d(),f("div",{key:v.id,onClick:D=>Pe(v),class:"p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors"},[a("div",xn,[a("div",kn,[a("h5",Sn,b(v.subject),1),a("p",En,b(v.last_message),1),a("div",Cn,[a("span",Tn,b(ea(v.last_message_at)),1),a("span",{class:$([Vt(v.status),"text-xs px-2 py-1 rounded-full"])},b(v.status),3),a("span",{class:$([zt(v.priority),"text-xs px-2 py-1 rounded-full"])},b(v.priority),3)])]),v.unread_count>0?(d(),f("div",In,b(v.unread_count),1)):I("",!0)])],8,wn))),128)),o.value.length===0?(d(),f("div",Mn,c[16]||(c[16]=[a("svg",{class:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1),a("p",null,"No conversations yet",-1),a("p",{class:"text-sm"},"Start a new chat to get help",-1)]))):I("",!0)])])]))])])):I("",!0),S.value?(d(),f("div",cs,[a("div",us,[c[38]||(c[38]=a("h3",{class:"text-lg font-semibold mb-4"},"Start New Conversation",-1)),a("div",ds,[a("div",null,[c[28]||(c[28]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Subject",-1)),te(a("select",{"onUpdate:modelValue":c[3]||(c[3]=v=>N.value.subject=v),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},c[27]||(c[27]=[ra('<option value="" data-v-7e40298c>Pilih subjek...</option><option value="Laporan Bug" data-v-7e40298c>üêõ Laporan Bug</option><option value="Permintaan Fitur" data-v-7e40298c>üí° Permintaan Fitur</option><option value="Dukungan Teknis" data-v-7e40298c>üîß Dukungan Teknis</option><option value="Masalah Data" data-v-7e40298c>üìä Masalah Data</option><option value="Masalah Login" data-v-7e40298c>üîê Masalah Login</option><option value="Masalah Izin" data-v-7e40298c>üë§ Masalah Izin</option><option value="Laporan Error" data-v-7e40298c>üìã Laporan Error</option><option value="Masalah Performa" data-v-7e40298c>‚ö° Masalah Performa</option><option value="Masalah Integrasi" data-v-7e40298c>üîó Masalah Integrasi</option><option value="Permintaan Pelatihan" data-v-7e40298c>üéì Permintaan Pelatihan</option><option value="Pertanyaan Umum" data-v-7e40298c>‚ùì Pertanyaan Umum</option><option value="Lainnya" data-v-7e40298c>üìù Lainnya</option>',13)]),512),[[St,N.value.subject]]),N.value.subject==="Lainnya"?te((d(),f("input",{key:0,"onUpdate:modelValue":c[4]||(c[4]=v=>N.value.customSubject=v),type:"text",placeholder:"Silakan jelaskan...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mt-2"},null,512)),[[He,N.value.customSubject]]):I("",!0)]),a("div",null,[c[30]||(c[30]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Priority",-1)),te(a("select",{"onUpdate:modelValue":c[5]||(c[5]=v=>N.value.priority=v),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},c[29]||(c[29]=[a("option",{value:"low"},"Low",-1),a("option",{value:"medium"},"Medium",-1),a("option",{value:"high"},"High",-1),a("option",{value:"urgent"},"Urgent",-1)]),512),[[St,N.value.priority]])]),a("div",null,[c[31]||(c[31]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Message",-1)),te(a("textarea",{"onUpdate:modelValue":c[6]||(c[6]=v=>N.value.message=v),rows:"4",placeholder:"Describe your issue or question...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[He,N.value.message]])]),a("div",null,[c[37]||(c[37]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Attachments (Optional)",-1)),q.value.length>0?(d(),f("div",fs,[a("div",ps,[(d(!0),f(J,null,Q(q.value,(v,D)=>(d(),f("div",{key:D,class:"flex items-center gap-2 bg-gray-100 p-2 rounded-lg"},[v.type.startsWith("image/")?(d(),f("div",hs,[a("img",{src:y(v),onClick:A=>$e(y(v)),class:"w-8 h-8 object-cover rounded cursor-pointer hover:opacity-80 transition-opacity",alt:"Thumbnail"},null,8,gs)])):(d(),f("svg",ms,c[32]||(c[32]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)]))),a("span",vs,b(v.name),1),a("button",{onClick:A=>ct(D),class:"text-red-500 hover:text-red-700"},c[33]||(c[33]=[a("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,bs)]))),128))])])):I("",!0),a("div",ys,[a("label",_s,[c[34]||(c[34]=a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)),c[35]||(c[35]=a("span",{class:"text-sm"},"Upload File",-1)),a("input",{type:"file",onChange:lt,multiple:"",accept:"image/*,.pdf,.doc,.docx,.txt,.xlsx,.xls",class:"hidden"},null,32)]),a("button",{onClick:B,class:"flex items-center gap-1 bg-green-100 text-green-700 px-3 py-2 rounded-md hover:bg-green-200 transition-colors"},c[36]||(c[36]=[a("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),a("span",{class:"text-sm"},"Camera",-1)]))])])]),a("div",ws,[a("button",{onClick:c[7]||(c[7]=v=>S.value=!1),class:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),a("button",{onClick:Ae,disabled:!N.value.subject.trim()||!N.value.message.trim()&&q.value.length===0||N.value.subject==="Other"&&!N.value.customSubject.trim()||L.value,class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed"},b(L.value?"Creating...":"Start Chat"),9,xs)])])])):I("",!0),T.value?(d(),f("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",onClick:Fe},[a("div",ks,[a("button",{onClick:Fe,class:"absolute top-2 right-2 text-white text-2xl hover:text-gray-300 z-10"},c[39]||(c[39]=[a("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),a("img",{src:F.value,class:"max-w-full max-h-full object-contain rounded-lg",onClick:c[8]||(c[8]=We(()=>{},["stop"])),alt:"Full size image"},null,8,Ss)])])):I("",!0),O.value?(d(),f("div",Es,[a("div",Cs,[a("div",{class:"flex justify-between items-center mb-4"},[c[41]||(c[41]=a("h3",{class:"text-lg font-semibold"},"Capture Photo",-1)),a("button",{onClick:Ut,class:"text-gray-500 hover:text-gray-700"},c[40]||(c[40]=[a("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),a("div",Ts,[M.value?I("",!0):(d(),f("video",{key:0,ref_key:"videoElement",ref:x,autoplay:"",class:"w-full h-64 bg-gray-200 rounded-lg object-cover"},null,512)),M.value?(d(),f("div",Is,[a("img",{src:M.value,class:"w-full h-64 object-cover rounded-lg",alt:"Captured"},null,8,Ms),c[42]||(c[42]=a("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"},[a("div",{class:"text-white text-center"},[a("p",{class:"text-lg font-semibold mb-2"},"Photo Captured!"),a("p",{class:"text-sm"},'Click "Use Photo" to add to message')])],-1))])):I("",!0),a("div",Ps,[M.value?I("",!0):(d(),f("button",{key:0,onClick:h,class:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors"},c[43]||(c[43]=[a("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),Y(" Capture ")]))),M.value?(d(),f("button",{key:1,onClick:K,class:"bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-colors"},c[44]||(c[44]=[a("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),Y(" Use Photo ")]))):I("",!0),M.value?(d(),f("button",{key:2,onClick:z,class:"bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors"},c[45]||(c[45]=[a("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),Y(" Retake ")]))):I("",!0)])])])])):I("",!0)],64))}},As=Ge(Ds,[["__scopeId","data-v-7e40298c"]]),$s=_(!1),js=_("Memuat Data..."),Os=_("");function Ls(){const t=ut("loading",null),e=ut("loadingMessage",null),o=ut("loadingSubMessage",null),n=t!==null?t:$s,s=e!==null?e:js,r=o!==null?o:Os,l=(u,S="Memuat Data...",T="")=>{n&&typeof n.value<"u"&&(n.value=u),s&&typeof s.value<"u"&&(s.value=S),r&&typeof r.value<"u"&&(r.value=T)};return{isLoading:n,message:s,subMessage:r,setLoading:l,showLoading:(u="Memuat Data...",S="")=>{l(!0,u,S)},hideLoading:()=>{l(!1)}}}function Bs(){const t=_(!1),e=_("Memuat Data..."),o=_("");return dt("loading",t),dt("loadingMessage",e),dt("loadingSubMessage",o),{loading:t,message:e,subMessage:o}}const Ns={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-[9999] flex items-center justify-center"},Rs={class:"bg-white rounded-2xl p-8 shadow-2xl flex flex-col items-center justify-center min-w-[200px]"},Fs={class:"text-gray-700 text-lg font-semibold"},Ws={key:0,class:"text-gray-500 text-sm mt-2"},Hs={__name:"LoadingSpinner",setup(t){const{isLoading:e,message:o,subMessage:n}=Ls(),s=_(!1);Oe(()=>{s.value=!0});const r=re(()=>!s.value||!e||typeof e>"u"||typeof e.value>"u"?!1:e.value),l=re(()=>!o||typeof o>"u"||typeof o.value>"u"?"Memuat Data...":o.value||"Memuat Data..."),m=re(()=>!n||typeof n>"u"||typeof n.value>"u"?"":n.value||"");return(g,u)=>(d(),bo(la,{to:"body"},[ge(ia,{name:"fade"},{default:Ye(()=>[r.value?(d(),f("div",Ns,[a("div",Rs,[u[0]||(u[0]=a("img",{src:"/images/logo-icon.png",alt:"Loading",class:"w-16 h-16 animate-spin mb-4"},null,-1)),a("p",Fs,b(l.value),1),m.value?(d(),f("p",Ws,b(m.value),1)):I("",!0)])])):I("",!0)]),_:1})]))}},Us=Ge(Hs,[["__scopeId","data-v-d82c1acc"]]),Vs=()=>{};var Yt={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=function(t){const e=[];let o=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[o++]=s:s<2048?(e[o++]=s>>6|192,e[o++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[o++]=s>>18|240,e[o++]=s>>12&63|128,e[o++]=s>>6&63|128,e[o++]=s&63|128):(e[o++]=s>>12|224,e[o++]=s>>6&63|128,e[o++]=s&63|128)}return e},zs=function(t){const e=[];let o=0,n=0;for(;o<t.length;){const s=t[o++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[o++];e[n++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[o++],l=t[o++],m=t[o++],g=((s&7)<<18|(r&63)<<12|(l&63)<<6|m&63)-65536;e[n++]=String.fromCharCode(55296+(g>>10)),e[n++]=String.fromCharCode(56320+(g&1023))}else{const r=t[o++],l=t[o++];e[n++]=String.fromCharCode((s&15)<<12|(r&63)<<6|l&63)}}return e.join("")},_o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const o=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const r=t[s],l=s+1<t.length,m=l?t[s+1]:0,g=s+2<t.length,u=g?t[s+2]:0,S=r>>2,T=(r&3)<<4|m>>4;let F=(m&15)<<2|u>>6,L=u&63;g||(L=64,l||(F=64)),n.push(o[S],o[T],o[F],o[L])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yo(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zs(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const o=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const r=o[t.charAt(s++)],m=s<t.length?o[t.charAt(s)]:0;++s;const u=s<t.length?o[t.charAt(s)]:64;++s;const T=s<t.length?o[t.charAt(s)]:64;if(++s,r==null||m==null||u==null||T==null)throw new Gs;const F=r<<2|m>>4;if(n.push(F),u!==64){const L=m<<4&240|u>>2;if(n.push(L),T!==64){const P=u<<6&192|T;n.push(P)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Gs extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qs=function(t){const e=yo(t);return _o.encodeByteArray(e,!0)},wo=function(t){return qs(t).replace(/\./g,"")},Ks=function(t){try{return _o.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=()=>Js().__FIREBASE_DEFAULTS__,Xs=()=>{if(typeof process>"u"||typeof Yt>"u")return;const t=Yt.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Qs=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ks(t[1]);return e&&JSON.parse(e)},Zs=()=>{try{return Vs()||Ys()||Xs()||Qs()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xo=()=>{var t;return(t=Zs())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,o)=>{this.resolve=e,this.reject=o})}wrapCallback(e){return(o,n)=>{o?this.reject(o):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(o):e(o,n))}}}function ko(){try{return typeof indexedDB=="object"}catch{return!1}}function So(){return new Promise((t,e)=>{try{let o=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),o||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{o=!1},s.onerror=()=>{var r;e(((r=s.error)==null?void 0:r.message)||"")}}catch(o){e(o)}})}function tr(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or="FirebaseError";class Be extends Error{constructor(e,o,n){super(o),this.code=e,this.customData=n,this.name=or,Object.setPrototypeOf(this,Be.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tt.prototype.create)}}class tt{constructor(e,o,n){this.service=e,this.serviceName=o,this.errors=n}create(e,...o){const n=o[0]||{},s=`${this.service}/${e}`,r=this.errors[e],l=r?ar(r,n):"Error",m=`${this.serviceName}: ${l} (${s}).`;return new Be(s,m,n)}}function ar(t,e){return t.replace(nr,(o,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const nr=/\{\$([^}]+)}/g;function Et(t,e){if(t===e)return!0;const o=Object.keys(t),n=Object.keys(e);for(const s of o){if(!n.includes(s))return!1;const r=t[s],l=e[s];if(Xt(r)&&Xt(l)){if(!Et(r,l))return!1}else if(r!==l)return!1}for(const s of n)if(!o.includes(s))return!1;return!0}function Xt(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t){return t&&t._delegate?t._delegate:t}class be{constructor(e,o,n){this.name=e,this.instanceFactory=o,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xe="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,o){this.name=e,this.container=o,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const o=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(o)){const n=new er;if(this.instancesDeferred.set(o,n),this.isInitialized(o)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:o});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(o).promise}getImmediate(e){const o=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ir(e))try{this.getOrInitializeService({instanceIdentifier:xe})}catch{}for(const[o,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(o);try{const r=this.getOrInitializeService({instanceIdentifier:s});n.resolve(r)}catch{}}}}clearInstance(e=xe){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(o=>"INTERNAL"in o).map(o=>o.INTERNAL.delete()),...e.filter(o=>"_delete"in o).map(o=>o._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xe){return this.instances.has(e)}getOptions(e=xe){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:o={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:o});for(const[r,l]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(r);n===m&&l.resolve(s)}return s}onInit(e,o){const n=this.normalizeInstanceIdentifier(o),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const r=this.instances.get(n);return r&&e(r,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,o){const n=this.onInitCallbacks.get(o);if(n)for(const s of n)try{s(e,o)}catch{}}getOrInitializeService({instanceIdentifier:e,options:o={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:rr(e),options:o}),this.instances.set(e,n),this.instancesOptions.set(e,o),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=xe){return this.component?this.component.multipleInstances?e:xe:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rr(t){return t===xe?void 0:t}function ir(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const o=this.getProvider(e.name);if(o.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);o.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const o=new sr(e,this);return this.providers.set(e,o),o}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var R;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(R||(R={}));const cr={debug:R.DEBUG,verbose:R.VERBOSE,info:R.INFO,warn:R.WARN,error:R.ERROR,silent:R.SILENT},ur=R.INFO,dr={[R.DEBUG]:"log",[R.VERBOSE]:"log",[R.INFO]:"info",[R.WARN]:"warn",[R.ERROR]:"error"},fr=(t,e,...o)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=dr[e];if(s)console[s](`[${n}]  ${t.name}:`,...o);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pr{constructor(e){this.name=e,this._logLevel=ur,this._logHandler=fr,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in R))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cr[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,R.DEBUG,...e),this._logHandler(this,R.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,R.VERBOSE,...e),this._logHandler(this,R.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,R.INFO,...e),this._logHandler(this,R.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,R.WARN,...e),this._logHandler(this,R.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,R.ERROR,...e),this._logHandler(this,R.ERROR,...e)}}const hr=(t,e)=>e.some(o=>t instanceof o);let Qt,Zt;function gr(){return Qt||(Qt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mr(){return Zt||(Zt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Eo=new WeakMap,Ct=new WeakMap,Co=new WeakMap,pt=new WeakMap,jt=new WeakMap;function vr(t){const e=new Promise((o,n)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",l)},r=()=>{o(de(t.result)),s()},l=()=>{n(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",l)});return e.then(o=>{o instanceof IDBCursor&&Eo.set(o,t)}).catch(()=>{}),jt.set(e,t),e}function br(t){if(Ct.has(t))return;const e=new Promise((o,n)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",l),t.removeEventListener("abort",l)},r=()=>{o(),s()},l=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",l),t.addEventListener("abort",l)});Ct.set(t,e)}let Tt={get(t,e,o){if(t instanceof IDBTransaction){if(e==="done")return Ct.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Co.get(t);if(e==="store")return o.objectStoreNames[1]?void 0:o.objectStore(o.objectStoreNames[0])}return de(t[e])},set(t,e,o){return t[e]=o,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yr(t){Tt=t(Tt)}function _r(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...o){const n=t.call(ht(this),e,...o);return Co.set(n,e.sort?e.sort():[e]),de(n)}:mr().includes(t)?function(...e){return t.apply(ht(this),e),de(Eo.get(this))}:function(...e){return de(t.apply(ht(this),e))}}function wr(t){return typeof t=="function"?_r(t):(t instanceof IDBTransaction&&br(t),hr(t,gr())?new Proxy(t,Tt):t)}function de(t){if(t instanceof IDBRequest)return vr(t);if(pt.has(t))return pt.get(t);const e=wr(t);return e!==t&&(pt.set(t,e),jt.set(e,t)),e}const ht=t=>jt.get(t);function ot(t,e,{blocked:o,upgrade:n,blocking:s,terminated:r}={}){const l=indexedDB.open(t,e),m=de(l);return n&&l.addEventListener("upgradeneeded",g=>{n(de(l.result),g.oldVersion,g.newVersion,de(l.transaction),g)}),o&&l.addEventListener("blocked",g=>o(g.oldVersion,g.newVersion,g)),m.then(g=>{r&&g.addEventListener("close",()=>r()),s&&g.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),m}function gt(t,{blocked:e}={}){const o=indexedDB.deleteDatabase(t);return e&&o.addEventListener("blocked",n=>e(n.oldVersion,n)),de(o).then(()=>{})}const xr=["get","getKey","getAll","getAllKeys","count"],kr=["put","add","delete","clear"],mt=new Map;function eo(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mt.get(e))return mt.get(e);const o=e.replace(/FromIndex$/,""),n=e!==o,s=kr.includes(o);if(!(o in(n?IDBIndex:IDBObjectStore).prototype)||!(s||xr.includes(o)))return;const r=async function(l,...m){const g=this.transaction(l,s?"readwrite":"readonly");let u=g.store;return n&&(u=u.index(m.shift())),(await Promise.all([u[o](...m),s&&g.done]))[0]};return mt.set(e,r),r}yr(t=>({...t,get:(e,o,n)=>eo(e,o)||t.get(e,o,n),has:(e,o)=>!!eo(e,o)||t.has(e,o)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(o=>{if(Er(o)){const n=o.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(o=>o).join(" ")}}function Er(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const It="@firebase/app",to="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe=new pr("@firebase/app"),Cr="@firebase/app-compat",Tr="@firebase/analytics-compat",Ir="@firebase/analytics",Mr="@firebase/app-check-compat",Pr="@firebase/app-check",Dr="@firebase/auth",Ar="@firebase/auth-compat",$r="@firebase/database",jr="@firebase/data-connect",Or="@firebase/database-compat",Lr="@firebase/functions",Br="@firebase/functions-compat",Nr="@firebase/installations",Rr="@firebase/installations-compat",Fr="@firebase/messaging",Wr="@firebase/messaging-compat",Hr="@firebase/performance",Ur="@firebase/performance-compat",Vr="@firebase/remote-config",zr="@firebase/remote-config-compat",Gr="@firebase/storage",qr="@firebase/storage-compat",Kr="@firebase/firestore",Jr="@firebase/ai",Yr="@firebase/firestore-compat",Xr="firebase";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="[DEFAULT]",Qr={[It]:"fire-core",[Cr]:"fire-core-compat",[Ir]:"fire-analytics",[Tr]:"fire-analytics-compat",[Pr]:"fire-app-check",[Mr]:"fire-app-check-compat",[Dr]:"fire-auth",[Ar]:"fire-auth-compat",[$r]:"fire-rtdb",[jr]:"fire-data-connect",[Or]:"fire-rtdb-compat",[Lr]:"fire-fn",[Br]:"fire-fn-compat",[Nr]:"fire-iid",[Rr]:"fire-iid-compat",[Fr]:"fire-fcm",[Wr]:"fire-fcm-compat",[Hr]:"fire-perf",[Ur]:"fire-perf-compat",[Vr]:"fire-rc",[zr]:"fire-rc-compat",[Gr]:"fire-gcs",[qr]:"fire-gcs-compat",[Kr]:"fire-fst",[Yr]:"fire-fst-compat",[Jr]:"fire-vertex","fire-js":"fire-js",[Xr]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze=new Map,Zr=new Map,Pt=new Map;function oo(t,e){try{t.container.addComponent(e)}catch(o){fe.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,o)}}function Se(t){const e=t.name;if(Pt.has(e))return fe.debug(`There were multiple attempts to register component ${e}.`),!1;Pt.set(e,t);for(const o of Ze.values())oo(o,t);for(const o of Zr.values())oo(o,t);return!0}function Ot(t,e){const o=t.container.getProvider("heartbeat").getImmediate({optional:!0});return o&&o.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},me=new tt("app","Firebase",ei);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,o,n){this._isDeleted=!1,this._options={...e},this._config={...o},this._name=o.name,this._automaticDataCollectionEnabled=o.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new be("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw me.create("app-deleted",{appName:this._name})}}function To(t,e={}){let o=t;typeof e!="object"&&(e={name:e});const n={name:Mt,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw me.create("bad-app-name",{appName:String(s)});if(o||(o=xo()),!o)throw me.create("no-options");const r=Ze.get(s);if(r){if(Et(o,r.options)&&Et(n,r.config))return r;throw me.create("duplicate-app",{appName:s})}const l=new lr(s);for(const g of Pt.values())l.addComponent(g);const m=new ti(o,n,l);return Ze.set(s,m),m}function oi(t=Mt){const e=Ze.get(t);if(!e&&t===Mt&&xo())return To();if(!e)throw me.create("no-app",{appName:t});return e}function ve(t,e,o){let n=Qr[t]??t;o&&(n+=`-${o}`);const s=n.match(/\s|\//),r=e.match(/\s|\//);if(s||r){const l=[`Unable to register library "${n}" with version "${e}":`];s&&l.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&r&&l.push("and"),r&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fe.warn(l.join(" "));return}Se(new be(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="firebase-heartbeat-database",ni=1,Ue="firebase-heartbeat-store";let vt=null;function Io(){return vt||(vt=ot(ai,ni,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ue)}catch(o){console.warn(o)}}}}).catch(t=>{throw me.create("idb-open",{originalErrorMessage:t.message})})),vt}async function si(t){try{const o=(await Io()).transaction(Ue),n=await o.objectStore(Ue).get(Mo(t));return await o.done,n}catch(e){if(e instanceof Be)fe.warn(e.message);else{const o=me.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fe.warn(o.message)}}}async function ao(t,e){try{const n=(await Io()).transaction(Ue,"readwrite");await n.objectStore(Ue).put(e,Mo(t)),await n.done}catch(o){if(o instanceof Be)fe.warn(o.message);else{const n=me.create("idb-set",{originalErrorMessage:o==null?void 0:o.message});fe.warn(n.message)}}}function Mo(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=1024,ii=30;class li{constructor(e){this.container=e,this._heartbeatsCache=null;const o=this.container.getProvider("app").getImmediate();this._storage=new ui(o),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,o;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=no();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((o=this._heartbeatsCache)==null?void 0:o.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>ii){const l=di(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){fe.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const o=no(),{heartbeatsToSend:n,unsentEntries:s}=ci(this._heartbeatsCache.heartbeats),r=wo(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=o,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(o){return fe.warn(o),""}}}function no(){return new Date().toISOString().substring(0,10)}function ci(t,e=ri){const o=[];let n=t.slice();for(const s of t){const r=o.find(l=>l.agent===s.agent);if(r){if(r.dates.push(s.date),so(o)>e){r.dates.pop();break}}else if(o.push({agent:s.agent,dates:[s.date]}),so(o)>e){o.pop();break}n=n.slice(1)}return{heartbeatsToSend:o,unsentEntries:n}}class ui{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ko()?So().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const o=await si(this.app);return o!=null&&o.heartbeats?o:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return ao(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return ao(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function so(t){return wo(JSON.stringify({version:2,heartbeats:t})).length}function di(t){if(t.length===0)return-1;let e=0,o=t[0].date;for(let n=1;n<t.length;n++)t[n].date<o&&(o=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t){Se(new be("platform-logger",e=>new Sr(e),"PRIVATE")),Se(new be("heartbeat",e=>new li(e),"PRIVATE")),ve(It,to,t),ve(It,to,"esm2020"),ve("fire-js","")}fi("");var pi="firebase",hi="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ve(pi,hi,"app");const Po="@firebase/installations",Lt="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=1e4,Ao=`w:${Lt}`,$o="FIS_v2",gi="https://firebaseinstallations.googleapis.com/v1",mi=60*60*1e3,vi="installations",bi="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ee=new tt(vi,bi,yi);function jo(t){return t instanceof Be&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo({projectId:t}){return`${gi}/projects/${t}/installations`}function Lo(t){return{token:t.token,requestStatus:2,expiresIn:wi(t.expiresIn),creationTime:Date.now()}}async function Bo(t,e){const n=(await e.json()).error;return Ee.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function No({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function _i(t,{refreshToken:e}){const o=No(t);return o.append("Authorization",xi(e)),o}async function Ro(t){const e=await t();return e.status>=500&&e.status<600?t():e}function wi(t){return Number(t.replace("s","000"))}function xi(t){return`${$o} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ki({appConfig:t,heartbeatServiceProvider:e},{fid:o}){const n=Oo(t),s=No(t),r=e.getImmediate({optional:!0});if(r){const u=await r.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const l={fid:o,authVersion:$o,appId:t.appId,sdkVersion:Ao},m={method:"POST",headers:s,body:JSON.stringify(l)},g=await Ro(()=>fetch(n,m));if(g.ok){const u=await g.json();return{fid:u.fid||o,registrationStatus:2,refreshToken:u.refreshToken,authToken:Lo(u.authToken)}}else throw await Bo("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=/^[cdef][\w-]{21}$/,Dt="";function Ci(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const o=Ti(t);return Ei.test(o)?o:Dt}catch{return Dt}}function Ti(t){return Si(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=new Map;function Ho(t,e){const o=at(t);Uo(o,e),Ii(o,e)}function Uo(t,e){const o=Wo.get(t);if(o)for(const n of o)n(e)}function Ii(t,e){const o=Mi();o&&o.postMessage({key:t,fid:e}),Pi()}let ke=null;function Mi(){return!ke&&"BroadcastChannel"in self&&(ke=new BroadcastChannel("[Firebase] FID Change"),ke.onmessage=t=>{Uo(t.data.key,t.data.fid)}),ke}function Pi(){Wo.size===0&&ke&&(ke.close(),ke=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="firebase-installations-database",Ai=1,Ce="firebase-installations-store";let bt=null;function Bt(){return bt||(bt=ot(Di,Ai,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ce)}}})),bt}async function et(t,e){const o=at(t),s=(await Bt()).transaction(Ce,"readwrite"),r=s.objectStore(Ce),l=await r.get(o);return await r.put(e,o),await s.done,(!l||l.fid!==e.fid)&&Ho(t,e.fid),e}async function Vo(t){const e=at(t),n=(await Bt()).transaction(Ce,"readwrite");await n.objectStore(Ce).delete(e),await n.done}async function nt(t,e){const o=at(t),s=(await Bt()).transaction(Ce,"readwrite"),r=s.objectStore(Ce),l=await r.get(o),m=e(l);return m===void 0?await r.delete(o):await r.put(m,o),await s.done,m&&(!l||l.fid!==m.fid)&&Ho(t,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nt(t){let e;const o=await nt(t.appConfig,n=>{const s=$i(n),r=ji(t,s);return e=r.registrationPromise,r.installationEntry});return o.fid===Dt?{installationEntry:await e}:{installationEntry:o,registrationPromise:e}}function $i(t){const e=t||{fid:Ci(),registrationStatus:0};return zo(e)}function ji(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ee.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const o={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=Oi(t,o);return{installationEntry:o,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Li(t)}:{installationEntry:e}}async function Oi(t,e){try{const o=await ki(t,e);return et(t.appConfig,o)}catch(o){throw jo(o)&&o.customData.serverCode===409?await Vo(t.appConfig):await et(t.appConfig,{fid:e.fid,registrationStatus:0}),o}}async function Li(t){let e=await ro(t.appConfig);for(;e.registrationStatus===1;)await Fo(100),e=await ro(t.appConfig);if(e.registrationStatus===0){const{installationEntry:o,registrationPromise:n}=await Nt(t);return n||o}return e}function ro(t){return nt(t,e=>{if(!e)throw Ee.create("installation-not-found");return zo(e)})}function zo(t){return Bi(t)?{fid:t.fid,registrationStatus:0}:t}function Bi(t){return t.registrationStatus===1&&t.registrationTime+Do<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ni({appConfig:t,heartbeatServiceProvider:e},o){const n=Ri(t,o),s=_i(t,o),r=e.getImmediate({optional:!0});if(r){const u=await r.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const l={installation:{sdkVersion:Ao,appId:t.appId}},m={method:"POST",headers:s,body:JSON.stringify(l)},g=await Ro(()=>fetch(n,m));if(g.ok){const u=await g.json();return Lo(u)}else throw await Bo("Generate Auth Token",g)}function Ri(t,{fid:e}){return`${Oo(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rt(t,e=!1){let o;const n=await nt(t.appConfig,r=>{if(!Go(r))throw Ee.create("not-registered");const l=r.authToken;if(!e&&Hi(l))return r;if(l.requestStatus===1)return o=Fi(t,e),r;{if(!navigator.onLine)throw Ee.create("app-offline");const m=Vi(r);return o=Wi(t,m),m}});return o?await o:n.authToken}async function Fi(t,e){let o=await io(t.appConfig);for(;o.authToken.requestStatus===1;)await Fo(100),o=await io(t.appConfig);const n=o.authToken;return n.requestStatus===0?Rt(t,e):n}function io(t){return nt(t,e=>{if(!Go(e))throw Ee.create("not-registered");const o=e.authToken;return zi(o)?{...e,authToken:{requestStatus:0}}:e})}async function Wi(t,e){try{const o=await Ni(t,e),n={...e,authToken:o};return await et(t.appConfig,n),o}catch(o){if(jo(o)&&(o.customData.serverCode===401||o.customData.serverCode===404))await Vo(t.appConfig);else{const n={...e,authToken:{requestStatus:0}};await et(t.appConfig,n)}throw o}}function Go(t){return t!==void 0&&t.registrationStatus===2}function Hi(t){return t.requestStatus===2&&!Ui(t)}function Ui(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+mi}function Vi(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function zi(t){return t.requestStatus===1&&t.requestTime+Do<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gi(t){const e=t,{installationEntry:o,registrationPromise:n}=await Nt(e);return n?n.catch(console.error):Rt(e).catch(console.error),o.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qi(t,e=!1){const o=t;return await Ki(o),(await Rt(o,e)).token}async function Ki(t){const{registrationPromise:e}=await Nt(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(t){if(!t||!t.options)throw yt("App Configuration");if(!t.name)throw yt("App Name");const e=["projectId","apiKey","appId"];for(const o of e)if(!t.options[o])throw yt(o);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function yt(t){return Ee.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="installations",Yi="installations-internal",Xi=t=>{const e=t.getProvider("app").getImmediate(),o=Ji(e),n=Ot(e,"heartbeat");return{app:e,appConfig:o,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},Qi=t=>{const e=t.getProvider("app").getImmediate(),o=Ot(e,qo).getImmediate();return{getId:()=>Gi(o),getToken:s=>qi(o,s)}};function Zi(){Se(new be(qo,Xi,"PUBLIC")),Se(new be(Yi,Qi,"PRIVATE"))}Zi();ve(Po,Lt);ve(Po,Lt,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el="/firebase-messaging-sw.js",tl="/firebase-cloud-messaging-push-scope",Ko="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ol="https://fcmregistrations.googleapis.com/v1",Jo="google.c.a.c_id",al="google.c.a.c_l",nl="google.c.a.ts",sl="google.c.a.e",lo=1e4;var co;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(co||(co={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Ve;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Ve||(Ve={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function rl(t){const e="=".repeat((4-t.length%4)%4),o=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(o),s=new Uint8Array(n.length);for(let r=0;r<n.length;++r)s[r]=n.charCodeAt(r);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="fcm_token_details_db",il=5,uo="fcm_token_object_Store";async function ll(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(r=>r.name).includes(_t))return null;let e=null;return(await ot(_t,il,{upgrade:async(n,s,r,l)=>{if(s<2||!n.objectStoreNames.contains(uo))return;const m=l.objectStore(uo),g=await m.index("fcmSenderId").get(t);if(await m.clear(),!!g){if(s===2){const u=g;if(!u.auth||!u.p256dh||!u.endpoint)return;e={token:u.fcmToken,createTime:u.createTime??Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:ue(u.vapidKey)}}}else if(s===3){const u=g;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:ue(u.auth),p256dh:ue(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:ue(u.vapidKey)}}}else if(s===4){const u=g;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:ue(u.auth),p256dh:ue(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:ue(u.vapidKey)}}}}}})).close(),await gt(_t),await gt("fcm_vapid_details_db"),await gt("undefined"),cl(e)?e:null}function cl(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul="firebase-messaging-database",dl=1,ze="firebase-messaging-store";let wt=null;function Yo(){return wt||(wt=ot(ul,dl,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ze)}}})),wt}async function fl(t){const e=Xo(t),n=await(await Yo()).transaction(ze).objectStore(ze).get(e);if(n)return n;{const s=await ll(t.appConfig.senderId);if(s)return await Ft(t,s),s}}async function Ft(t,e){const o=Xo(t),s=(await Yo()).transaction(ze,"readwrite");return await s.objectStore(ze).put(e,o),await s.done,e}function Xo({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Z=new tt("messaging","Messaging",pl);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(t,e){const o=await Ht(t),n=Qo(e),s={method:"POST",headers:o,body:JSON.stringify(n)};let r;try{r=await(await fetch(Wt(t.appConfig),s)).json()}catch(l){throw Z.create("token-subscribe-failed",{errorInfo:l==null?void 0:l.toString()})}if(r.error){const l=r.error.message;throw Z.create("token-subscribe-failed",{errorInfo:l})}if(!r.token)throw Z.create("token-subscribe-no-token");return r.token}async function gl(t,e){const o=await Ht(t),n=Qo(e.subscriptionOptions),s={method:"PATCH",headers:o,body:JSON.stringify(n)};let r;try{r=await(await fetch(`${Wt(t.appConfig)}/${e.token}`,s)).json()}catch(l){throw Z.create("token-update-failed",{errorInfo:l==null?void 0:l.toString()})}if(r.error){const l=r.error.message;throw Z.create("token-update-failed",{errorInfo:l})}if(!r.token)throw Z.create("token-update-no-token");return r.token}async function ml(t,e){const n={method:"DELETE",headers:await Ht(t)};try{const r=await(await fetch(`${Wt(t.appConfig)}/${e}`,n)).json();if(r.error){const l=r.error.message;throw Z.create("token-unsubscribe-failed",{errorInfo:l})}}catch(s){throw Z.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function Wt({projectId:t}){return`${ol}/projects/${t}/registrations`}async function Ht({appConfig:t,installations:e}){const o=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${o}`})}function Qo({p256dh:t,auth:e,endpoint:o,vapidKey:n}){const s={web:{endpoint:o,auth:e,p256dh:t}};return n!==Ko&&(s.web.applicationPubKey=n),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=7*24*60*60*1e3;async function bl(t){const e=await _l(t.swRegistration,t.vapidKey),o={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:ue(e.getKey("auth")),p256dh:ue(e.getKey("p256dh"))},n=await fl(t.firebaseDependencies);if(n){if(wl(n.subscriptionOptions,o))return Date.now()>=n.createTime+vl?yl(t,{token:n.token,createTime:Date.now(),subscriptionOptions:o}):n.token;try{await ml(t.firebaseDependencies,n.token)}catch(s){console.warn(s)}return fo(t.firebaseDependencies,o)}else return fo(t.firebaseDependencies,o)}async function yl(t,e){try{const o=await gl(t.firebaseDependencies,e),n={...e,token:o,createTime:Date.now()};return await Ft(t.firebaseDependencies,n),o}catch(o){throw o}}async function fo(t,e){const n={token:await hl(t,e),createTime:Date.now(),subscriptionOptions:e};return await Ft(t,n),n.token}async function _l(t,e){const o=await t.pushManager.getSubscription();return o||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:rl(e)})}function wl(t,e){const o=e.vapidKey===t.vapidKey,n=e.endpoint===t.endpoint,s=e.auth===t.auth,r=e.p256dh===t.p256dh;return o&&n&&s&&r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return xl(e,t),kl(e,t),Sl(e,t),e}function xl(t,e){if(!e.notification)return;t.notification={};const o=e.notification.title;o&&(t.notification.title=o);const n=e.notification.body;n&&(t.notification.body=n);const s=e.notification.image;s&&(t.notification.image=s);const r=e.notification.icon;r&&(t.notification.icon=r)}function kl(t,e){e.data&&(t.data=e.data)}function Sl(t,e){var s,r,l,m;if(!e.fcmOptions&&!((s=e.notification)!=null&&s.click_action))return;t.fcmOptions={};const o=((r=e.fcmOptions)==null?void 0:r.link)??((l=e.notification)==null?void 0:l.click_action);o&&(t.fcmOptions.link=o);const n=(m=e.fcmOptions)==null?void 0:m.analytics_label;n&&(t.fcmOptions.analyticsLabel=n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t){return typeof t=="object"&&!!t&&Jo in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){if(!t||!t.options)throw xt("App Configuration Object");if(!t.name)throw xt("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:o}=t;for(const n of e)if(!o[n])throw xt(n);return{appName:t.name,projectId:o.projectId,apiKey:o.apiKey,appId:o.appId,senderId:o.messagingSenderId}}function xt(t){return Z.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,o,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=Cl(e);this.firebaseDependencies={app:e,appConfig:s,installations:o,analyticsProvider:n}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Il(t){try{t.swRegistration=await navigator.serviceWorker.register(el,{scope:tl}),t.swRegistration.update().catch(()=>{}),await Ml(t.swRegistration)}catch(e){throw Z.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function Ml(t){return new Promise((e,o)=>{const n=setTimeout(()=>o(new Error(`Service worker not registered after ${lo} ms`)),lo),s=t.installing||t.waiting;t.active?(clearTimeout(n),e()):s?s.onstatechange=r=>{var l;((l=r.target)==null?void 0:l.state)==="activated"&&(s.onstatechange=null,clearTimeout(n),e())}:(clearTimeout(n),o(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(t,e){if(!e&&!t.swRegistration&&await Il(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Z.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=Ko)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(t,e){if(!navigator)throw Z.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Z.create("permission-blocked");return await Dl(t,e==null?void 0:e.vapidKey),await Pl(t,e==null?void 0:e.serviceWorkerRegistration),bl(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(t,e,o){const n=$l(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:o[Jo],message_name:o[al],message_time:o[nl],message_device_time:Math.floor(Date.now()/1e3)})}function $l(t){switch(t){case Ve.NOTIFICATION_CLICKED:return"notification_open";case Ve.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(t,e){const o=e.data;if(!o.isFirebaseMessaging)return;t.onMessageHandler&&o.messageType===Ve.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(po(o)):t.onMessageHandler.next(po(o)));const n=o.data;El(n)&&n[sl]==="1"&&await Al(t,o.messageType,n)}const ho="@firebase/messaging",go="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=t=>{const e=new Tl(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",o=>jl(e,o)),e},Ll=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:n=>Zo(e,n)}};function Bl(){Se(new be("messaging",Ol,"PUBLIC")),Se(new be("messaging-internal",Ll,"PRIVATE")),ve(ho,go),ve(ho,go,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nl(){try{await So()}catch{return!1}return typeof window<"u"&&ko()&&tr()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t,e){if(!navigator)throw Z.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(t=oi()){return Nl().then(e=>{if(!e)throw Z.create("unsupported-browser")},e=>{throw Z.create("indexed-db-unsupported")}),Ot($t(t),"messaging").getImmediate()}async function Wl(t,e){return t=$t(t),Zo(t,e)}function Hl(t,e){return t=$t(t),Rl(t,e)}Bl();const Ul={apiKey:"AIzaSyC1-A8gZjh7HVDn5Qd0eO4qAItRb5eLi5c",authDomain:"justusgroup-46e18.firebaseapp.com",projectId:"justusgroup-46e18",storageBucket:"justusgroup-46e18.firebasestorage.app",messagingSenderId:"218092221068",appId:"1:218092221068:web:c1bd083b06fd516c4701a9",measurementId:"G-7GMJK585VF"},Vl=To(Ul);let Le=null;if(typeof window<"u")try{Le=Fl(Vl)}catch(t){console.error("Error initializing Firebase Messaging:",t)}const zl="BGqXuQB8leSCOybGsFN77kp5GIRvivIBV00jBQyWon3p8wZ6IPasD8j1hisQvLAuT9hfR45dL61vCJxw2a5Gt3M";async function Gl(){if(!Le)return console.warn("Firebase Messaging not initialized"),null;try{if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/firebase-messaging-sw.js");console.log("Service Worker registered:",e.scope)}catch(e){console.error("Service Worker registration failed:",e)}if(await Notification.requestPermission()==="granted"){console.log("Notification permission granted");const e=await Wl(Le,{vapidKey:zl});return e?(console.log("FCM Token obtained:",e.substring(0,20)+"..."),e):(console.warn("No FCM token available"),null)}else return console.warn("Notification permission denied"),null}catch(t){return console.error("Error requesting notification permission:",t),null}}async function ql(t){var e;try{const n=await(await fetch("/api/web/device-token/register",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((e=document.querySelector('meta[name="csrf-token"]'))==null?void 0:e.getAttribute("content"))||"",Accept:"application/json"},credentials:"same-origin",body:JSON.stringify({device_token:t,browser:Kl(),user_agent:navigator.userAgent})})).json();return n.success?(console.log("FCM token registered successfully:",n),n):(console.error("Failed to register token:",n.message),null)}catch(o){return console.error("Error registering token to backend:",o),null}}function Kl(){const t=navigator.userAgent;return t.includes("Chrome")&&!t.includes("Edg")?"Chrome":t.includes("Firefox")?"Firefox":t.includes("Safari")&&!t.includes("Chrome")?"Safari":t.includes("Edg")?"Edge":"Unknown"}function Jl(){if(!Le){console.warn("Firebase Messaging not initialized");return}Hl(Le,t=>{var n,s;console.log("Foreground message received:",t);const e=((n=t.notification)==null?void 0:n.title)||"New Notification",o={body:((s=t.notification)==null?void 0:s.body)||"",icon:"/icon-192x192.png",badge:"/badge-72x72.png",data:t.data||{},tag:t.messageId||"notification",requireInteraction:!1};if("Notification"in window&&Notification.permission==="granted"){const r=new Notification(e,o);r.onclick=l=>{var m;l.preventDefault(),window.focus(),(m=t.data)!=null&&m.url&&(window.location.href=t.data.url),r.close()}}})}async function Yl(){if(!Le){console.warn("Firebase Messaging not available");return}Jl();const t=await Gl();return t&&await ql(t),t}const Xl={class:"min-h-screen flex bg-gray-100"},Ql={class:"flex items-center justify-between h-20 px-4 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-white"},Zl={class:"flex items-center gap-3 flex-1 min-w-0"},ec={class:"flex-shrink-0"},tc={key:0,src:"/images/logo.png",alt:"Logo",class:"h-12 w-auto transition-all duration-300"},oc={key:1,src:"/images/logo-icon.png",alt:"Logo Icon",class:"h-10 w-10 transition-all duration-300 rounded-lg"},ac={class:"flex-1 overflow-y-auto py-4"},nc=["onClick","title"],sc={class:"text-base flex-shrink-0"},rc={key:0,class:"truncate flex-1 tracking-wider"},ic=["title"],lc={class:"text-base flex-shrink-0"},cc={key:0,class:"truncate flex-1 tracking-wider"},uc={class:"mt-1"},dc={class:"text-base w-6 flex justify-center flex-shrink-0 transition-transform duration-200 group-hover:scale-110"},fc={key:0,class:"text-sm leading-tight truncate"},pc={key:1,class:"absolute right-2 w-1.5 h-1.5 bg-blue-600 rounded-full"},hc={key:2,class:"my-3 mx-2 h-px bg-gray-200"},gc={class:"h-16 bg-white/95 backdrop-blur-md border-b border-gray-200/50 flex items-center px-6 justify-between shadow-sm navbar-modern sticky top-0 z-20"},mc={class:"flex items-center gap-4"},vc={class:"hidden md:flex items-center gap-2 text-sm text-gray-600"},bc={class:"font-medium"},yc={class:"flex items-center gap-3"},_c={class:"relative"},wc=["src"],xc={class:"hidden md:inline text-sm font-medium text-gray-700"},kc={key:0,class:"absolute right-0 mt-2 w-44 bg-white border border-gray-200 rounded-xl shadow-xl z-50 overflow-hidden backdrop-blur-md"},Sc=["onClick"],Ec=["src"],Cc={class:"text-sm font-medium text-gray-700"},Tc={class:"relative"},Ic={key:0,class:"absolute -top-1 -right-1 bg-gradient-to-r from-red-500 to-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center shadow-lg animate-bounce"},Mc={key:0,class:"absolute right-0 mt-2 w-80 bg-white/95 backdrop-blur-md border border-gray-200 rounded-xl shadow-2xl z-50 max-h-96 overflow-hidden"},Pc={key:0,class:"px-4 py-6 text-center"},Dc={key:1,class:"px-4 py-6 text-center text-gray-400"},Ac={key:2,class:"overflow-y-auto max-h-80"},$c=["onClick"],jc={class:"flex-shrink-0 mt-1"},Oc={class:"flex-1 min-w-0"},Lc={class:"font-semibold text-sm text-gray-800 mb-1"},Bc={class:"text-xs text-gray-600 leading-relaxed"},Nc={class:"text-xs text-gray-400 mt-1.5 flex items-center gap-1"},Rc={key:0,class:"text-xs text-blue-600 mt-1.5 flex items-center gap-1 group-hover:text-blue-700"},Fc={class:"truncate"},Wc={key:0,class:"flex-shrink-0 mt-1"},Hc={class:"relative"},Uc={class:"relative"},Vc=["src"],zc={class:"hidden md:flex flex-col items-start"},Gc={class:"font-semibold text-sm text-gray-800"},qc={class:"text-xs text-gray-500"},Kc={key:0,class:"absolute right-0 mt-2 w-72 bg-white/95 backdrop-blur-md border border-gray-200 rounded-xl shadow-2xl z-50 overflow-hidden"},Jc={class:"px-5 py-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-white"},Yc={class:"flex items-center gap-3 mb-3"},Xc=["src"],Qc={class:"flex-1 min-w-0"},Zc={class:"font-bold text-gray-800 text-sm truncate"},eu={class:"text-xs text-gray-500 truncate"},tu={class:"grid grid-cols-2 gap-2 text-xs"},ou={key:0,class:"text-gray-600"},au={class:"text-gray-700 truncate"},nu={key:1,class:"text-gray-600"},su={class:"text-gray-700 truncate"},ru={key:2,class:"text-gray-600 col-span-2"},iu={class:"text-gray-700 truncate"},lu={class:"py-2"},cu={class:"text-sm font-medium"},uu={class:"text-sm font-medium"},du={class:"text-sm font-medium"},fu={class:"flex-1 bg-gray-50"},pu={class:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 items-end"},hu={class:"flex items-start gap-2"},gu={class:"flex-1"},mu={class:"font-bold text-gray-800"},vu={class:"text-sm text-gray-600"},bu=["onClick"],yu={class:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md"},_u={class:"flex justify-between items-center mb-4"},wu={class:"mb-4"},xu={class:"flex gap-2 justify-end"},ku={class:"bg-white rounded-lg shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto"},Su={class:"flex justify-between items-center mb-4"},Eu={key:0,class:"text-center py-8"},Cu={key:1,class:"text-center py-8 text-gray-500"},Tu={key:2,class:"overflow-x-auto"},Iu={class:"w-full border-collapse"},Mu={class:"px-4 py-3 border"},Pu={class:"px-4 py-3 border"},Du={class:"px-4 py-3 border"},Au={class:"px-4 py-3 border"},$u={class:"px-4 py-3 border text-center"},ju={class:"flex gap-2 justify-center"},Ou=["onClick"],Lu={class:"bg-white rounded-lg shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto"},Bu={class:"flex justify-between items-center mb-4"},Nu={class:"text-lg font-bold text-gray-800"},Ru={key:0,class:"text-center py-8"},Fu={key:1,class:"space-y-4"},Wu={class:"bg-gray-50 p-4 rounded-lg"},Hu={class:"grid grid-cols-2 gap-4"},Uu={class:"font-semibold"},Vu={class:"font-semibold"},zu={class:"font-semibold"},Gu={class:"font-semibold"},qu={class:"font-semibold"},Ku={class:"font-semibold"},Ju={key:0,class:"space-y-4"},Yu={class:"flex justify-between items-center p-3 bg-blue-50 rounded"},Xu={class:"font-bold text-blue-700"},Qu={class:"flex justify-between items-center p-3 bg-blue-50 rounded"},Zu={class:"font-bold text-blue-700"},ed={key:0,class:"space-y-2"},td={class:"flex justify-between items-center p-3 bg-red-50 rounded"},od={class:"font-bold text-red-700"},ad={class:"ml-4 space-y-1"},nd={class:"text-red-600"},sd={key:1,class:"flex justify-between items-center p-3 bg-gray-50 rounded"},rd={class:"font-bold text-gray-600"},id={key:2,class:"space-y-2"},ld={class:"flex justify-between items-center p-3 bg-green-50 rounded"},cd={class:"font-bold text-green-700"},ud={class:"ml-4 space-y-1"},dd={class:"text-green-600"},fd={key:3,class:"flex justify-between items-center p-3 bg-gray-50 rounded"},pd={class:"font-bold text-gray-600"},hd={class:"flex justify-between items-center p-3 bg-red-50 rounded"},gd={class:"font-bold text-red-700"},md={class:"space-y-2"},vd={class:"flex justify-between items-center p-3 bg-red-50 rounded"},bd={class:"font-bold text-red-700"},yd={class:"ml-4 space-y-1 text-sm"},_d={class:"flex justify-between"},wd={class:"text-red-600"},xd={class:"flex justify-between"},kd={class:"text-red-600"},Sd={key:4,class:"space-y-2"},Ed={class:"ml-4 space-y-1"},Cd={class:"text-blue-600"},Td={key:5,class:"p-3 bg-gray-50 rounded"},Id={class:"flex justify-between items-center p-4 bg-blue-100 rounded-lg border-2 border-blue-300"},Md={class:"text-xl font-bold text-blue-700"},Pd={key:1,class:"space-y-4"},Dd={class:"flex justify-between items-center p-3 bg-green-50 rounded"},Ad={class:"font-bold text-green-700"},$d={class:"flex justify-between items-center p-3 bg-green-50 rounded"},jd={class:"font-bold text-green-700"},Od={class:"flex justify-between items-center p-3 bg-green-100 rounded border border-green-300"},Ld={class:"font-bold text-green-700"},Bd={class:"flex justify-between items-center p-3 bg-blue-50 rounded"},Nd={class:"font-bold text-blue-700"},Rd={class:"space-y-2"},Fd={class:"flex justify-between items-center p-3 bg-blue-50 rounded"},Wd={class:"font-bold text-blue-700"},Hd={class:"ml-4 space-y-1 text-sm text-gray-600"},Ud={class:"flex justify-between items-center p-3 bg-red-50 rounded"},Vd={class:"font-bold text-red-700"},zd={class:"flex justify-between items-center p-3 bg-red-50 rounded"},Gd={class:"font-bold text-red-700"},qd={class:"flex justify-between items-center p-3 bg-red-50 rounded"},Kd={class:"font-bold text-red-700"},Jd={class:"flex justify-between items-center p-3 bg-green-50 rounded"},Yd={class:"font-bold text-green-700"},Xd={class:"flex justify-between items-center p-4 bg-green-100 rounded-lg border-2 border-green-300"},Qd={class:"text-xl font-bold text-green-700"},Zd={__name:"AppLayout",setup(t){Bs();const e=_(!0),o=_(!1),{locale:n,t:s}=da(),r=ft().props.allowedMenus||[],l=[{title:()=>s("sidebar.main"),icon:"fa-solid fa-bars",menus:[{name:()=>s("sidebar.dashboard"),icon:"fa-solid fa-home",route:"/home",code:"dashboard"},{name:()=>"Sales Outlet Dashboard",icon:"fa-solid fa-chart-line",route:"/sales-outlet-dashboard",code:"sales_outlet_dashboard"},{name:()=>"Marketing Dashboard",icon:"fa-solid fa-bullhorn",route:"/marketing/dashboard",code:"marketing_dashboard"},{name:()=>"Dashboard CRM",icon:"fa-solid fa-chart-line",route:"/crm/dashboard",code:"crm_dashboard"},{name:()=>"Cashflow Outlet Dashboard",icon:"fa-solid fa-chart-pie",route:route("cashflow-outlet-dashboard.index"),code:"cashflow_outlet_dashboard"},{name:()=>"My Attendance",icon:"fa-solid fa-user-clock",route:"/attendance",code:"my_attendance"},{name:()=>"Payment",icon:"fa-solid fa-shopping-cart",route:"/purchase-requisitions",code:"purchase_requisition_ops"},{name:()=>"Payment Report",icon:"fa-solid fa-chart-bar",route:"/pr-ops/report",code:"pr_ops_report"},{name:()=>"Payment Approval Tracker",icon:"fa-solid fa-chart-line",route:"/purchase-requisitions/payment-tracker",code:"payment_tracker"},{name:()=>"Video Tutorial Gallery",icon:"fa-solid fa-play-circle",route:"/video-tutorials/gallery"}]},{title:()=>"Asset Management",icon:"fa-solid fa-boxes-stacked",collapsible:!0,open:_(!1),menus:[{name:()=>"Dashboard",icon:"fa-solid fa-gauge",route:"/asset-management/dashboard",code:"asset_management_dashboard"},{name:()=>"Asset Categories",icon:"fa-solid fa-tags",route:"/asset-management/categories",code:"asset_management_categories"},{name:()=>"Assets",icon:"fa-solid fa-box",route:"/asset-management/assets",code:"asset_management_assets"},{name:()=>"Transfers",icon:"fa-solid fa-exchange-alt",route:"/asset-management/transfers",code:"asset_management_transfers"},{name:()=>"Maintenance Schedules",icon:"fa-solid fa-calendar-check",route:"/asset-management/maintenance-schedules",code:"asset_management_maintenance_schedules"},{name:()=>"Maintenances",icon:"fa-solid fa-wrench",route:"/asset-management/maintenances",code:"asset_management_maintenances"},{name:()=>"Disposals",icon:"fa-solid fa-trash",route:"/asset-management/disposals",code:"asset_management_disposals"},{name:()=>"Documents",icon:"fa-solid fa-file",route:"/asset-management/documents",code:"asset_management_documents"},{name:()=>"Depreciations",icon:"fa-solid fa-chart-line",route:"/asset-management/depreciations",code:"asset_management_depreciations"},{name:()=>"Reports",icon:"fa-solid fa-chart-bar",route:"/asset-management/reports",code:"asset_management_reports"}]},{title:()=>"Master Data",icon:"fa-solid fa-database",collapsible:!0,open:_(!1),menus:[{name:()=>"Categories",icon:"fa-solid fa-tags",route:"/categories",code:"categories"},{name:()=>"Sub Category",icon:"fa-solid fa-tag",route:"/sub-categories",code:"sub_categories"},{name:()=>"Units",icon:"fa-solid fa-ruler",route:"/units",code:"units"},{name:()=>"Items",icon:"fa-solid fa-boxes-stacked",route:"/items",code:"items"},{name:()=>"Repack",icon:"fa-solid fa-box-open",route:"/repack",code:"repack"},{name:()=>"Menu Type",icon:"fa-solid fa-list",route:"/menu-types",code:"menu_types"},{name:()=>"Modifiers",icon:"fa-solid fa-sliders",route:"/modifiers",code:"modifiers"},{name:()=>"Modifier Options",icon:"fa-solid fa-sliders",route:"/modifier-options",code:"modifier_options"},{name:()=>"Warehouses",icon:"fa-solid fa-warehouse",route:"/warehouses",code:"warehouses"},{name:()=>"Warehouse Outlet",icon:"fa-solid fa-store",route:"/warehouse-outlets",code:"warehouse_outlets"},{name:()=>"Warehouse Division",icon:"fa-solid fa-sitemap",route:"/warehouse-divisions",code:"warehouse_divisions"},{name:()=>"Outlets",icon:"fa-solid fa-store",route:"/outlets",code:"outlets"},{name:()=>"Customers",icon:"fa-solid fa-users",route:"/customers",code:"customers"},{name:()=>"Suppliers",icon:"fa-solid fa-truck",route:"/suppliers",code:"suppliers"},{name:()=>"Regions",icon:"fa-solid fa-globe-asia",route:"/regions",code:"regions"},{name:()=>"Item Schedule",icon:"fa-solid fa-calendar-days",route:"/item-schedules",code:"item_schedules"},{name:()=>"RO Schedule",icon:"fa-solid fa-calendar-days",route:"/fo-schedules",code:"fo_schedules"},{name:()=>"Items Supplier",icon:"fa-solid fa-link",route:"/item-supplier",code:"view-item-supplier"},{name:()=>"Data Investor Outlet",icon:"fa-solid fa-user-tie",route:"/investors",code:"data_investor_outlet"},{name:()=>"Officer Check",icon:"fa-solid fa-user-check",route:"/officer-check",code:"officer_check"},{name:()=>"Jenis Pembayaran",icon:"fa-solid fa-money-bill",route:"/payment-types",code:"payment_types"},{name:()=>"Video Tutorial",icon:"fa-solid fa-video",route:"/video-tutorials",code:"master-data-video-tutorials"},{name:()=>"Group Video Tutorial",icon:"fa-solid fa-folder",route:"/video-tutorial-groups",code:"master-data-video-tutorial-groups"},{name:()=>"Locked Budget Food Categories",icon:"fa-solid fa-lock",route:"/locked-budget-food-categories",code:"locked_budget_food_categories"},{name:()=>"Budget Management",icon:"fa-solid fa-chart-pie",route:"/budget-management",code:"budget_management"},{name:()=>"Chart of Account",icon:"fa-solid fa-chart-line",route:"/chart-of-accounts",code:"chart_of_account"},{name:()=>"Master Data Bank",icon:"fa-solid fa-building-columns",route:"/bank-accounts",code:"bank_accounts"}]},{title:()=>"Quality Assurance",icon:"fa-solid fa-shield-halved",collapsible:!0,open:_(!1),menus:[{name:()=>"QA Categories",icon:"fa-solid fa-clipboard-list",route:"/qa-categories",code:"qa_categories"},{name:()=>"QA Parameters",icon:"fa-solid fa-cogs",route:"/qa-parameters",code:"qa_parameters"},{name:()=>"QA Guidance",icon:"fa-solid fa-clipboard-check",route:"/qa-guidances",code:"qa_guidances"},{name:()=>"Inspections",icon:"fa-solid fa-camera",route:"/inspections",code:"inspections"}]},{title:()=>"Ops Management",icon:"fa-solid fa-cogs",collapsible:!0,open:_(!1),menus:[{name:()=>"Master Daily Report",icon:"fa-solid fa-chart-line",route:"/master-report",code:"master_report"},{name:()=>"Daily Report",icon:"fa-solid fa-clipboard-list",route:"/daily-report",code:"daily_report"},{name:()=>"Ticketing System",icon:"fa-solid fa-ticket-alt",route:"/tickets",code:"tickets"},{name:()=>"PR Tracking Report",icon:"fa-solid fa-timeline",route:"/purchase-requisitions/tracking-report",code:"pr_tracking_report"}]},{title:()=>"Human Resource",icon:"fa-solid fa-users-gear",collapsible:!0,open:_(!1),menus:[{name:()=>"Data Level",icon:"fa-solid fa-layer-group",route:"/data-levels",code:"data_levels"},{name:()=>"Data Jabatan",icon:"fa-solid fa-user-tie",route:"/jabatans",code:"data_jabatan"},{name:()=>"Data Divisi",icon:"fa-solid fa-building",route:"/divisis",code:"data_divisi"},{name:()=>"Data Karyawan",icon:"fa-solid fa-users",route:"/users",code:"data_karyawan"},{name:()=>"Regional Management",icon:"fa-solid fa-globe",route:"/regional",code:"regional_management"},{name:()=>"Report Man Power Outlet",icon:"fa-solid fa-users-gear",route:"/man-power-outlet",code:"man_power_outlet_report"},{name:()=>"Job Vacancy",icon:"fa-solid fa-briefcase",route:"/admin/job-vacancy",code:"job_vacancy"},{name:()=>"Master Data Outlet",icon:"fa-solid fa-store",route:"/outlets",code:"master-data-outlet"},{name:()=>"Master Jam Kerja",icon:"fa-solid fa-clock",route:"/shifts",code:"shift_view"},{name:()=>"Input Shift Mingguan",icon:"fa-solid fa-calendar-days",route:"/user-shifts",code:"user_shift_view"},{name:()=>"Kalender Jadwal Shift",icon:"fa-solid fa-calendar-week",route:"/user-shifts/calendar",code:"user_shift_calendar_view"},{name:()=>"Schedule/Attendance Correction",icon:"fa-solid fa-edit",route:"/schedule-attendance-correction",code:"schedule_attendance_correction"},{name:()=>"Report Schedule/Attendance Correction",icon:"fa-solid fa-chart-bar",route:"/schedule-attendance-correction/report",code:"schedule_attendance_correction_report"},{name:()=>"Report Absent",icon:"fa-solid fa-file-lines",route:"/attendance/report",code:"absent-report"},{name:()=>"Libur Nasional",icon:"fa-solid fa-calendar-day",route:"/kalender-perusahaan",code:"libur_nasional"},{name:()=>"Report Attendance",icon:"fa-solid fa-fingerprint",route:"/attendance-report",code:"attendance_report"},{name:()=>"Attendance per Outlet",icon:"fa-solid fa-fingerprint",route:"/attendance-report/employee-summary",code:"attendance_outlet_summary"},{name:()=>"Holiday Attendance",icon:"fa-solid fa-calendar-day",route:"/holiday-attendance",code:"holiday_attendance"},{name:()=>"Extra Off & PH Report",icon:"fa-solid fa-chart-line",route:"/extra-off-report",code:"extra_off_report"},{name:()=>"Master Payroll",icon:"fa-solid fa-money-check-dollar",route:"/payroll/master",code:"payroll_master"},{name:()=>"Payroll",icon:"fa-solid fa-file-invoice-dollar",route:"/payroll/report",code:"payroll_report"},{name:()=>"Employee Movement",icon:"fa-solid fa-people-arrows",route:"/employee-movements",code:"employee_movement"},{name:()=>"Employee Resignation",icon:"fa-solid fa-user-minus",route:"/employee-resignations",code:"employee_resignation"},{name:()=>"Outlet/HO Inspection",icon:"fa-solid fa-clipboard-check",route:"/dynamic-inspections",code:"dynamic_inspection"},{name:()=>"Coaching",icon:"fa-solid fa-user-graduate",route:"/coaching",code:"coaching"},{name:()=>"Employee Survey",icon:"fa-solid fa-clipboard-list",route:"/employee-survey",code:"employee_survey"},{name:()=>"Employee Survey Report",icon:"fa-solid fa-chart-bar",route:"/employee-survey-report",code:"employee_survey_report"},{name:()=>"Master Soal",icon:"fa-solid fa-clipboard-question",route:"/master-soal-new",code:"master_soal"},{name:()=>"Enroll Test",icon:"fa-solid fa-user-graduate",route:"/enroll-test",code:"enroll_test"},{name:()=>"My Tests",icon:"fa-solid fa-clipboard-check",route:"/my-tests",code:"my_tests"},{name:()=>"Report Hasil Test",icon:"fa-solid fa-chart-line",route:"/enroll-test-report",code:"enroll_test_report"},{name:()=>"Manajemen Cuti",icon:"fa-solid fa-calendar-days",route:"/leave-management",code:"leave_management"},{name:()=>"Report Travel & Kasbon",icon:"fa-solid fa-plane",route:"/travel-kasbon-report",code:"travel_kasbon_report"}]},{title:()=>"Outlet Management",icon:"fa-solid fa-store",collapsible:!0,open:_(!1),menus:[{name:"Dashboard Sales Outlet",route:"/outlet-dashboard",icon:"fa-store",group:"Outlet Management",order:0},{name:()=>"Request Order (RO)",icon:"fa-solid fa-calendar-check",route:"/floor-order",code:"floor_order"},{name:()=>"Outlet Good Receive",icon:"fa-solid fa-truck-loading",route:"/outlet-food-good-receives",code:"outlet_food_good_receive"},{name:()=>"Good Receive Outlet Supplier",icon:"fa-solid fa-truck-arrow-right",route:"/good-receive-outlet-supplier",code:"good_receive_outlet_supplier"},{name:()=>"Outlet Stock Adjustment",icon:"fa-solid fa-boxes-stacked",route:"/outlet-food-inventory-adjustment",code:"outlet_stock_adjustment"},{name:()=>"Laporan Stok Akhir Outlet",icon:"fa-solid fa-clipboard-list",route:"/outlet-inventory/stock-position",code:"outlet_inventory_stock_position"},{name:()=>"Saldo Awal Stok Outlet",icon:"fa-solid fa-warehouse",route:"/outlet-stock-balances",code:"outlet_stock_balances"},{name:()=>"Kartu Stok Outlet",icon:"fa-solid fa-file-lines",route:"/outlet-inventory/stock-card",code:"outlet_stock_card"},{name:()=>"Laporan Nilai Persediaan Outlet",icon:"fa-solid fa-coins",route:"/outlet-inventory/inventory-value-report",code:"outlet_inventory_value_report"},{name:()=>"Laporan Rekap Persediaan per Kategori Outlet",icon:"fa-solid fa-chart-pie",route:"/outlet-inventory/category-recap-report",code:"outlet_category_recap_report"},{name:()=>"Category Cost Outlet",icon:"fa-solid fa-trash",route:"/outlet-internal-use-waste",code:"outlet_internal_use_waste"},{name:()=>"Outlet Transfer",icon:"fa-solid fa-right-left",route:"/outlet-transfer",code:"outlet_transfer"},{name:()=>"Internal Warehouse Transfer",icon:"fas fa-exchange-alt",route:"/internal-warehouse-transfer",code:"internal_warehouse_transfer"},{name:()=>"Retail Food",icon:"fa-solid fa-store",route:"/retail-food",code:"view-retail-food"},{name:()=>"Retail Non Food",icon:"fa-solid fa-shopping-bag",route:"/retail-non-food",code:"view-retail-non-food"},{name:()=>"Outlet Food Return",icon:"fa-solid fa-undo",route:"/outlet-food-return",code:"outlet_food_return"},{name:()=>"Stock Opname",icon:"fa-solid fa-clipboard-check",route:"/stock-opnames",code:"stock_opname"},{name:()=>"Report Invoice Outlet",icon:"fa-solid fa-file-invoice",route:"/report-invoice-outlet",code:"report_invoice_outlet"},{name:()=>"Stock Cut",icon:"fa-solid fa-scissors",route:"/stock-cut",code:"stock_cut"},{name:()=>"Outlet WIP Production",icon:"fa-solid fa-industry",route:"/outlet-wip",code:"outlet_wip_production"},{name:()=>"Laporan Outlet WIP",icon:"fa-solid fa-file-lines",route:"/outlet-wip/report",code:"outlet_wip_report"}]},{title:()=>"Outlet Report",icon:"fa-solid fa-chart-line",collapsible:!0,open:_(!1),menus:[{name:()=>"Sales Report",icon:"fa-solid fa-chart-line",route:"/report-sales-simple",code:"outlet_sales_report"},{name:()=>"Opex Outlet Dashboard",icon:"fa-solid fa-chart-pie",route:"/opex-outlet-dashboard",code:"opex_outlet_dashboard"},{name:()=>"Daily Outlet Revenue",icon:"fa-solid fa-chart-bar",route:"/report-daily-outlet-revenue",code:"daily_outlet_revenue"},{name:()=>"Weekly Outlet FB Revenue",icon:"fa-solid fa-calendar-week",route:"/report-weekly-outlet-fb-revenue",code:"weekly_outlet_fb_revenue"},{name:()=>"Daily Revenue Forecast",icon:"fa-solid fa-chart-line",route:"/report-daily-revenue-forecast",code:"daily_revenue_forecast"},{name:()=>"Monthly FB Revenue Performance",icon:"fa-solid fa-chart-bar",route:"/report-monthly-fb-revenue-performance",code:"monthly_fb_revenue_performance"},{name:()=>"Receiving Sheet",icon:"fa-solid fa-receipt",route:"/report-receiving-sheet",code:"receiving_sheet"},{name:()=>"Item Engineering",icon:"fa-solid fa-cogs",route:"/item-engineering",code:"item_engineering"}]},{title:()=>"HO Finance",icon:"fa-solid fa-building-columns",collapsible:!0,open:_(!1),menus:[{name:()=>"Jurnal",icon:"fa-solid fa-book",route:"/jurnal",code:"jurnal"},{name:()=>"Buku Besar",icon:"fa-solid fa-book-open",route:"/report-jurnal-buku-besar",code:"jurnal_buku_besar"},{name:()=>"Neraca Saldo",icon:"fa-solid fa-balance-scale",route:"/report-jurnal-neraca-saldo",code:"jurnal_neraca_saldo"},{name:()=>"Laporan Arus Kas",icon:"fa-solid fa-water",route:"/report-arus-kas",code:"jurnal_arus_kas"},{name:()=>"Contra Bon",icon:"fa-solid fa-file-circle-xmark",route:"/contra-bons",code:"contra_bon"},{name:()=>"Food Payment",icon:"fa-solid fa-money-bill-transfer",route:"/food-payments",code:"food_payment"},{name:()=>"Non Food Payment",icon:"fa-solid fa-credit-card",route:"/non-food-payments",code:"non_food_payment"},{name:()=>"Retail Non Food Payment",icon:"fa-solid fa-money-bill-wave",route:route("retail-non-food-payment.index"),code:"retail_non_food_payment"},{name:()=>"OPEX Report",icon:"fa-solid fa-chart-line",route:"/opex-report",code:"opex_report"},{name:()=>"OPEX By Category",icon:"fa-solid fa-chart-pie",route:"/opex-by-category",code:"opex_by_category"},{name:()=>"Outlet Payments",icon:"fa-solid fa-money-bill",route:route("outlet-payments.index"),code:"outlet_payments"},{name:()=>"Buku Bank",icon:"fa-solid fa-book",route:"/bank-books",code:"bank_books"},{name:()=>"Report Penjualan Pivot per Outlet per Sub Kategori",icon:"fa-solid fa-table-columns",route:"/report-sales-pivot-per-outlet-sub-category",code:"report_sales_pivot_per_outlet_sub_category"},{name:()=>"Report Rekap FJ",icon:"fa-solid fa-table-list",route:"/report-rekap-fj",code:"report_rekap_fj"},{name:()=>"Report Hutang",icon:"fa-solid fa-file-invoice-dollar",route:"/debt-report",code:"debt_report"}]},{title:()=>"Purchasing",icon:"fa-solid fa-shopping-bag",collapsible:!0,open:_(!1),menus:[{name:()=>"Purchase Order Foods",icon:"fa-solid fa-file-invoice-dollar",route:"/po-foods",code:"po_foods"},{name:()=>"Purchase Order Ops",icon:"fa-solid fa-file-invoice",route:"/po-ops",code:"purchase_order_ops"},{name:()=>"Report PO GR",icon:"fa-solid fa-chart-line",route:"/po-report",code:"po_report"},{name:()=>"Report Purchase Order Ops",icon:"fa-solid fa-chart-bar",route:"/po-ops/report",code:"po_ops_report"}]},{title:()=>"Warehouse Management",icon:"fa-solid fa-warehouse",collapsible:!0,open:_(!1),menus:[{name:()=>"Purchase Requisition Foods",icon:"fa-solid fa-file-invoice",route:"/pr-foods",code:"pr_foods"},{name:()=>"Good Receive",icon:"fa-solid fa-truck",route:"/food-good-receive",code:"food_good_receive"},{name:()=>"Food Good Receive Report",icon:"fa-solid fa-chart-bar",route:"/food-good-receive-report",code:"food_good_receive_report"},{name:()=>"Pindah Gudang",icon:"fa-solid fa-right-left",route:"/warehouse-transfer",code:"warehouse_transfer"},{name:()=>"Stock Adjustment",icon:"fa-solid fa-boxes-stacked",route:"/food-inventory-adjustment",code:"stock_adjustment"},{name:()=>"Packing List",icon:"fa-solid fa-box",route:"/packing-list",code:"packing_list"},{name:()=>"Delivery Order",icon:"fa-solid fa-truck-arrow-right",route:"/delivery-order",code:"delivery_order"},{name:()=>"Penjualan Warehouse Retail",icon:"fa-solid fa-store",route:"/retail-warehouse-sale",code:"retail_warehouse_sale"},{name:()=>"Warehouse Retail Food",icon:"fa-solid fa-warehouse",route:"/retail-warehouse-food",code:"view-retail-warehouse-food"},{name:()=>"Saldo Awal Stok",icon:"fa-solid fa-money-bill-wave",route:"/food-stock-balances",code:"food_stock_balances"},{name:()=>"Laporan Stok Akhir",icon:"fa-solid fa-clipboard-list",route:"/inventory/stock-position",code:"inventory_stock_position"},{name:()=>"Stock Opname",icon:"fa-solid fa-clipboard-check",route:"/warehouse-stock-opnames",code:"warehouse_stock_opname"},{name:()=>"Laporan Kartu Stok",icon:"fa-solid fa-file-lines",route:"/inventory/stock-card",code:"inventory_stock_card"},{name:()=>"Laporan Penerimaan Barang",icon:"fa-solid fa-truck-ramp-box",route:"/inventory/goods-received-report",code:"inventory_goods_received_report"},{name:()=>"Laporan Nilai Persediaan",icon:"fa-solid fa-money-check-dollar",route:"/inventory/inventory-value-report",code:"inventory_value_report"},{name:()=>"Laporan Riwayat Perubahan Harga Pokok",icon:"fa-solid fa-history",route:"/inventory/cost-history-report",code:"inventory_cost_history_report"},{name:()=>"Laporan Stok Minimum",icon:"fa-solid fa-arrow-down-short-wide",route:"/inventory/minimum-stock-report",code:"inventory_minimum_stock_report"},{name:()=>"Laporan Rekap Persediaan per Kategori",icon:"fa-solid fa-layer-group",route:"/inventory/category-recap-report",code:"inventory_category_recap_report"},{name:()=>"Laporan Aging Persediaan",icon:"fa-solid fa-hourglass-half",route:"/inventory/aging-report",code:"inventory_aging_report"},{name:()=>"Internal Use & Waste",icon:"fa-solid fa-recycle",route:"/internal-use-waste",code:"internal_use_waste"},{name:()=>"Penjualan Antar Gudang",icon:"fas fa-exchange-alt",route:"/warehouse-sales",code:"warehouse_sales"},{name:()=>"Outlet Rejection",icon:"fas fa-undo",route:"/outlet-rejections",code:"outlet_rejection"},{name:()=>"Kelola Return Outlet",icon:"fa-solid fa-building",route:"/head-office-return",code:"head_office_return"}]},{title:()=>"Cost Control",icon:"fa-solid fa-coins",collapsible:!0,open:_(!1),menus:[{name:()=>"Laporan Perubahan Harga PO",icon:"fa-solid fa-arrow-trend-up",route:"/inventory/po-price-change-report",code:"po_price_change_report_view"},{name:()=>"MAC Report",icon:"fa-solid fa-chart-line",route:"/mac-report",code:"mac_report"},{name:()=>"Outlet Stock Report",icon:"fa-solid fa-chart-line",route:"/outlet-stock-report",code:"outlet_stock_report"},{name:()=>"Cost Report",icon:"fa-solid fa-coins",route:"/cost-report",code:"cost_report"},{name:()=>"Report RnD, BM, WM",icon:"fa-solid fa-chart-line",route:"/internal-use-waste-report",code:"internal_use_waste_report"},{name:()=>"Report Penjualan per Category",icon:"fa-solid fa-table-list",route:"/report-sales-per-category",code:"report_sales_per_category"},{name:()=>"Report Penjualan per Tanggal",icon:"fa-solid fa-calendar-day",route:"/report-sales-per-tanggal",code:"report_sales_per_tanggal"},{name:()=>"Report Penjualan All Item ke All Outlet",icon:"fa-solid fa-list-check",route:"/report-sales-all-item-all-outlet",code:"report_sales_all_item_all_outlet"},{name:()=>"Report Good Receive Outlet",icon:"fa-solid fa-table-cells-large",route:"/report-good-receive-outlet",code:"report_good_receive_outlet"},{name:()=>"Report Retail Food per Supplier",icon:"fa-solid fa-chart-line",route:"/retail-food/report-supplier",code:"retail_food_supplier_report"},{name:()=>"Stock Opname Adjustment Report",icon:"fa-solid fa-chart-bar",route:"/stock-opname-adjustment-report",code:"stock_opname_adjustment_report"},{name:()=>"Report Rekap Diskon",icon:"fa-solid fa-tags",route:"/report-rekap-diskon",code:"report_rekap_diskon"}]},{title:()=>"Production",icon:"fa-solid fa-industry",collapsible:!0,open:_(!1),menus:[{name:()=>"Butcher",icon:"fa-solid fa-cut",route:"/butcher-processes",code:"butcher"},{name:()=>"Butcher Report",icon:"fa-solid fa-file-lines",route:"/butcher-processes/report",code:"butcher_report"},{name:()=>"Laporan Stok & Cost Butcher",icon:"fa-solid fa-money-bill-trend-up",route:"/butcher-processes/stock-cost-report",code:"butcher_stock_cost_report"},{name:()=>"Laporan Analisis Butcher",icon:"fa-solid fa-chart-line",route:"/butcher-processes/analysis-report",code:"butcher_analysis_report"},{name:()=>"Summary Hasil Butcher",icon:"fa-solid fa-list",route:"/butcher-summary-report",code:"butcher_summary_report"},{name:()=>"MK Production",icon:"fa-solid fa-industry",route:"/mk-production",code:"mk_production"},{name:()=>"Laporan MK Production",icon:"fa-solid fa-file-lines",route:"/mk-production/report",code:"mk_production_report"}]},{title:()=>"OPS-Kitchen",icon:"fa-solid fa-utensils",collapsible:!0,open:_(!1),menus:[{name:()=>"Action Plan Guest Review",icon:"fa-solid fa-clipboard-list",route:"/ops-kitchen/action-plan-guest-review",code:"ops_kitchen_action_plan_guest_review"}]},{title:()=>"Sales & Marketing",icon:"fa-solid fa-bullhorn",collapsible:!0,open:_(!1),menus:[{name:()=>"Scrapper Google Review",icon:"fa-brands fa-google",route:"/scrapper-google-review",code:"scrapper_google_review"},{name:()=>"Promo",icon:"fa-solid fa-tag",route:"/promos",code:"promos"},{name:()=>"Marketing Visit Checklist",icon:"fa-solid fa-clipboard-check",route:"/marketing-visit-checklist",code:"marketing_visit_checklist_view"},{name:()=>"Reservasi",icon:"fa-solid fa-calendar-check",route:"/reservations",code:"reservations"},{name:()=>"Data Roulette",icon:"fa-solid fa-dice",route:"/roulette",code:"data_roulette"},{name:()=>"Menu Book",icon:"fa-solid fa-book-open",route:"/menu-book",code:"menu_book"},{name:()=>"Web Profile",icon:"fa-solid fa-globe",route:"/web-profile",code:"web_profile"}]},{title:()=>"User Management",icon:"fa-solid fa-user-gear",collapsible:!0,open:_(!1),menus:[{name:()=>"Role Management",icon:"fa-solid fa-user-shield",route:"/roles",code:"role_management"},{name:()=>"User Role Setting",icon:"fa-solid fa-users-cog",route:"/user-roles",code:"user_role_setting"},{name:()=>"Menu Management",icon:"fa-solid fa-bars-progress",route:"/menus",code:"menu_management"}]},{title:()=>"Support",icon:"fa-solid fa-headset",collapsible:!0,open:_(!1),menus:[{name:()=>"Support Admin Panel",icon:"fa-solid fa-comments",route:"/support/admin",code:"support_admin_panel"},{name:()=>"Monitoring User Aktif",icon:"fa-solid fa-users-line",route:"/monitoring/active-users",code:"monitoring_active_users"},{name:()=>"Server Performance Monitoring",icon:"fa-solid fa-server",route:"/monitoring/server-performance",code:"server_performance_monitoring"},{name:()=>"Activity Log Report",icon:"fa-solid fa-list-alt",route:"/report/activity-log",code:"activity_log_report"},{name:()=>"CCTV Access Request",icon:"fa-solid fa-video",route:"/cctv-access-requests",code:"cctv_access_request"}]},{title:()=>"Announcement",icon:"fa-solid fa-bullhorn",collapsible:!0,open:_(!1),menus:[{name:()=>"Announcement",icon:"fa-solid fa-bullhorn",route:"/announcement",code:"announcement"}]},{title:()=>"CRM",icon:"fa-solid fa-handshake",collapsible:!0,open:_(!1),menus:[{name:()=>"Data Member",icon:"fa-solid fa-users",route:"/members",code:"crm_members"},{name:()=>"Kirim Notifikasi Member",icon:"fa-solid fa-paper-plane",route:"/member-notification",code:"member_notification"},{name:()=>"Inject Point Manual",icon:"fa-solid fa-syringe",route:"/manual-point",code:"manual_point"},{name:()=>"Member Apps Settings",icon:"fa-solid fa-mobile-screen-button",route:"/admin/member-apps-settings",code:"member_apps_settings"}]},{title:()=>"LMS",icon:"fa-solid fa-graduation-cap",collapsible:!0,open:_(!1),menus:[{name:()=>"Kategori Training",icon:"fa-solid fa-folder",route:"/lms/categories",code:"lms-categories"},{name:()=>"Training",icon:"fa-solid fa-book",route:"/lms/courses",code:"lms-courses"},{name:()=>"Quiz",icon:"fa-solid fa-question-circle",route:"/lms/quizzes",code:"lms-quizzes"},{name:()=>"Kuesioner",icon:"fa-solid fa-clipboard-list",route:"/lms/questionnaires",code:"lms-questionnaires"},{name:()=>"Template Sertifikat",icon:"fa-solid fa-certificate",route:"/lms/certificate-templates",code:"lms-certificate-templates"},{name:()=>"Jadwal Training",icon:"fa-solid fa-calendar-alt",route:"/lms/schedules",code:"lms-schedules"},{name:()=>"Trainer Report",icon:"fa-solid fa-chart-line",route:"/lms/trainer-report-page",code:"lms-trainer-report"},{name:()=>"Laporan Training Karyawan",icon:"fa-solid fa-users",route:"/lms/employee-training-report-page",code:"lms-employee-training-report"},{name:()=>"Training Report",icon:"fa-solid fa-chart-bar",route:"/lms/training-report-page",code:"lms-training-report"},{name:()=>"Quiz Report",icon:"fa-solid fa-question-circle",route:"/lms/quiz-report-page",code:"lms-quiz-report"}]}],m=re(()=>l.map(y=>({...y,menus:y.menus.filter(i=>!i.code||r.includes(i.code))})).filter(y=>y.menus.length>0)),g=[{code:"id",label:"Indonesia"},{code:"en",label:"English"}],u=_("id");function S(y){y.collapsible&&(y.open.value=!y.open.value)}function T(y){u.value=y,n.value=y,localStorage.setItem("currentLang",y)}function F(){e.value=!e.value}function L(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()}const P=ft(),O=re(()=>{var y;return((y=P.props.auth)==null?void 0:y.user)||{nama_lengkap:"",avatar:null}}),M=re(()=>O.value.avatar?`/storage/${O.value.avatar}`:"/images/avatar-default.png"),x=re(()=>{var y;return((y=O.value.outlet)==null?void 0:y.nama_outlet)||"N/A"}),E=re(()=>{var y;return((y=O.value.divisi)==null?void 0:y.nama_divisi)||"N/A"}),j=re(()=>{var y,i;return((i=(y=O.value.jabatan)==null?void 0:y.level)==null?void 0:i.nama_level)||"N/A"}),k=re(()=>{var y;return((y=O.value.jabatan)==null?void 0:y.nama_jabatan)||"N/A"}),w=_(!1),V=_(!1),ee=_(!1),N=_(!1),q=_(!1),ie=_(!1),oe=_(""),ae=_([]),ne=_(!1),Te=_(!1),C=_(null),Ne=_(!1),pe=_([]),Ie=_(!1),Me=_(0),he=_(!1),le=_(new Set),Pe=_(null);function Re(){if(Pe.value)try{Pe.value.currentTime=0,Pe.value.play().catch(y=>{console.log("Audio play failed:",y)})}catch(y){console.log("Audio play failed:",y)}}async function De(){var y;try{he.value=!0;const i=await X.get("/api/notifications"),H=Array.isArray(i.data)?i.data:((y=i.data)==null?void 0:y.notifications)||[];H.forEach(U=>{!le.value.has(U.id)&&!U.is_read&&($e({title:U.title||(U.type==="success"?"Success":U.type==="error"?"Error":"Info"),message:U.message,type:U.type}),Re())}),le.value=new Set(H.map(U=>U.id)),pe.value=H}catch(i){console.error("Error fetching notifications:",i)}finally{he.value=!1}}async function Ae(){try{const y=await X.get("/api/notifications/unread-count");Me.value=y.data.count}catch(y){console.error("Error fetching unread count:",y)}}async function st(y){try{await X.post(`/api/notifications/${y}/read`),await Ae()}catch(i){console.error("Error marking notification as read:",i)}}async function ye(){try{await X.post("/api/notifications/mark-all-read"),await Ae(),await De()}catch(y){console.error("Error marking all notifications as read:",y)}}function rt(y){st(y.id),y.url&&(y.url.startsWith("http://")||y.url.startsWith("https://"),window.location.href=y.url),$e({title:y.type==="success"?"Success":y.type==="error"?"Error":"Info",message:y.message,type:y.type}),Ie.value=!1}Oe(async()=>{if(await De(),await Ae(),setInterval(async()=>{await De(),await Ae()},6e4),!window.Html5Qrcode){const y=document.createElement("script");y.src="https://unpkg.com/html5-qrcode",document.body.appendChild(y)}if(typeof window<"u"&&"Notification"in window)try{await Yl()}catch(y){console.error("Error initializing Firebase Messaging:",y)}});const _e=_([]);function $e({title:y,message:i,type:H="info",duration:U=4e3}){const h=Date.now()+Math.random();_e.value.push({id:h,title:y,message:i,type:H}),setTimeout(()=>{Fe(h)},U)}function Fe(y){_e.value=_e.value.filter(i=>i.id!==y)}Oe(()=>{});async function it(){var K;const i=(K=ft().props.auth)==null?void 0:K.user,H=i==null?void 0:i.pin_payroll,U=H?String(H).trim():"";if(!(H!=null&&H!==""&&U!==""&&U!=="null"&&U!=="undefined")){W.fire({title:"PIN Payroll Belum Diatur",text:"Silakan isi PIN Payroll terlebih dahulu di Profile Anda",icon:"warning",confirmButtonText:"Buka Profile",showCancelButton:!0,cancelButtonText:"Batal"}).then(z=>{z.isConfirmed&&(ee.value=!0)});return}q.value=!0,oe.value=""}async function qe(){var y,i;if(!oe.value||oe.value.trim()===""){W.fire("Peringatan","Masukkan PIN Payroll","warning");return}try{const H=await X.post("/payroll/verify-pin",{pin:oe.value});H.data.success?(q.value=!1,oe.value="",await lt(),ie.value=!0):W.fire("Error",H.data.message||"PIN salah","error")}catch(H){console.error("Error verifying PIN:",H),W.fire("Error",((i=(y=H.response)==null?void 0:y.data)==null?void 0:i.message)||"Terjadi kesalahan saat verifikasi PIN","error")}}async function lt(){ne.value=!0;try{const y=await X.get("/payroll/user-list");y.data.success?ae.value=y.data.data||[]:W.fire("Error",y.data.message||"Gagal mengambil data payroll","error")}catch(y){console.error("Error fetching payroll list:",y),W.fire("Error","Terjadi kesalahan saat mengambil data payroll","error")}finally{ne.value=!1}}async function ct(y){Ne.value=!0;try{const i=await X.get("/payroll/user-slip-detail",{params:{payroll_detail_id:y.payroll_detail_id,type:y.type}});i.data.success?(C.value=i.data.data,Te.value=!0):W.fire("Error",i.data.message||"Gagal mengambil detail slip gaji","error")}catch(i){console.error("Error fetching payroll slip detail:",i),W.fire("Error","Terjadi kesalahan saat mengambil detail slip gaji","error")}finally{Ne.value=!1}}function B(y){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(y||0)}return(y,i)=>{var H,U;return d(),f("div",Xl,[a("audio",{ref_key:"notificationSound",ref:Pe,src:"/sounds/aya_gawean_anyar_ringtone.mp3",preload:"auto"},null,512),a("aside",{class:$(["transition-all duration-300 flex flex-col fixed z-30 h-full bg-white shadow-xl border-r border-gray-200",e.value?"w-72":"w-20"])},[a("div",Ql,[a("div",Zl,[a("div",ec,[e.value?(d(),f("img",tc)):(d(),f("img",oc))])]),a("button",{onClick:F,class:"flex-shrink-0 text-gray-500 hover:text-blue-600 hover:bg-gray-100 rounded-lg p-2 transition-all duration-200"},[a("i",{class:$(["fas transition-transform duration-300",e.value?"fa-angle-double-left":"fa-angle-double-right"])},null,2)])]),a("nav",ac,[(d(!0),f(J,null,Q(m.value,(h,K)=>(d(),f("div",{key:h.title,class:"mb-4"},[h.collapsible?(d(),f("div",{key:0,class:$(["px-4 py-2.5 text-xs font-semibold uppercase flex items-center gap-3 cursor-pointer group-title-modern mx-2 rounded-lg",e.value?"text-gray-500 hover:text-gray-700 hover:bg-gray-50":"text-gray-400 justify-center"]),onClick:z=>S(h),title:e.value?"":typeof h.title=="function"?h.title():h.title},[a("span",sc,[a("i",{class:$(h.icon)},null,2)]),e.value?(d(),f("span",rc,b(typeof h.title=="function"?h.title():h.title),1)):I("",!0),e.value?(d(),f("svg",{key:1,class:$(["w-3.5 h-3.5 transition-transform duration-300 flex-shrink-0",h.open.value?"rotate-90":""]),fill:"none",stroke:"currentColor","stroke-width":"2.5",viewBox:"0 0 24 24"},i[19]||(i[19]=[a("path",{d:"M9 5l7 7-7 7"},null,-1)]),2)):I("",!0)],10,nc)):(d(),f("div",{key:1,class:$(["px-4 py-2.5 text-xs font-semibold uppercase flex items-center gap-3 group-title-modern mx-2 rounded-lg",e.value?"text-gray-500":"text-gray-400 justify-center"]),title:e.value?"":typeof h.title=="function"?h.title():h.title},[a("span",lc,[a("i",{class:$(h.icon)},null,2)]),e.value?(d(),f("span",cc,b(typeof h.title=="function"?h.title():h.title),1)):I("",!0)],10,ic)),te(a("div",uc,[(d(!0),f(J,null,Q(h.menus,z=>(d(),bo(je(Jt),{key:z.name,href:z.route,class:$(["flex items-center gap-3 px-4 py-2.5 my-1 mx-2 rounded-lg text-gray-700 hover:text-blue-700 transition-all duration-200 sidebar-menu-modern relative group",[e.value?"justify-start":"justify-center",y.$page.url.startsWith(z.route)?"bg-blue-50 text-blue-700 font-semibold shadow-sm menu-active":"hover:bg-gray-50"]]),title:e.value?"":typeof z.name=="function"?z.name():z.name},{default:Ye(()=>[a("span",dc,[a("i",{class:$(z.icon)},null,2)]),e.value?(d(),f("span",fc,b(typeof z.name=="function"?z.name():z.name),1)):I("",!0),e.value&&y.$page.url.startsWith(z.route)?(d(),f("span",pc)):I("",!0)]),_:2},1032,["href","class","title"]))),128))],512),[[kt,!h.collapsible||h.open.value]]),K<m.value.length-1?(d(),f("div",hc)):I("",!0)]))),128))])],2),a("div",{class:$(["flex-1 flex flex-col min-h-screen transition-all duration-300",e.value?"ml-72":"ml-20"])},[a("header",gc,[a("div",mc,[a("button",{onClick:F,class:"md:hidden text-gray-600 hover:text-blue-600 focus:outline-none p-2 rounded-lg hover:bg-gray-100 transition-all duration-200"},i[20]||(i[20]=[a("i",{class:"fas fa-bars text-lg"},null,-1)])),a("div",vc,[i[21]||(i[21]=a("i",{class:"fas fa-home text-gray-400"},null,-1)),a("span",bc,b(y.$page.component),1)])]),a("div",yc,[a("div",_c,[a("button",{class:"flex items-center gap-2 px-3 py-2 rounded-xl hover:bg-gray-100 transition-all duration-200 group",onClick:i[0]||(i[0]=h=>o.value=!o.value)},[a("img",{src:u.value==="id"?"/images/indonesia.png":"/images/united-states.png",alt:"Lang",class:"w-5 h-5 rounded-full ring-2 ring-gray-200 group-hover:ring-blue-300 transition-all"},null,8,wc),a("span",xc,b((H=g.find(h=>h.code===u.value))==null?void 0:H.label),1),i[22]||(i[22]=a("i",{class:"fas fa-chevron-down text-xs text-gray-500 group-hover:text-blue-600 transition-colors"},null,-1))]),o.value?(d(),f("div",kc,[(d(),f(J,null,Q(g,h=>a("div",{key:h.code,onClick:K=>{T(h.code),o.value=!1},class:"flex items-center gap-3 px-4 py-2.5 hover:bg-blue-50 cursor-pointer transition-colors duration-150"},[a("img",{src:h.code==="id"?"/images/indonesia.png":"/images/united-states.png",alt:"Lang",class:"w-5 h-5 rounded-full"},null,8,Ec),a("span",Cc,b(h.label),1)],8,Sc)),64))])):I("",!0)]),a("button",{onClick:L,class:"p-2.5 rounded-xl hover:bg-gray-100 text-gray-600 hover:text-blue-600 transition-all duration-200 group relative",title:"Toggle Fullscreen"},i[23]||(i[23]=[a("i",{class:"fas fa-expand group-hover:scale-110 transition-transform duration-200"},null,-1)])),a("div",Tc,[a("button",{class:"p-2.5 rounded-xl hover:bg-gray-100 text-gray-600 hover:text-blue-600 transition-all duration-200 relative group",onClick:i[1]||(i[1]=h=>Ie.value=!Ie.value),title:"Notifications"},[i[24]||(i[24]=a("i",{class:"fas fa-bell group-hover:animate-pulse"},null,-1)),Me.value>0?(d(),f("span",Ic,b(Me.value>9?"9+":Me.value),1)):I("",!0)]),Ie.value?(d(),f("div",Mc,[a("div",{class:"flex items-center justify-between px-4 py-3 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-white"},[i[25]||(i[25]=a("span",{class:"font-bold text-gray-800 flex items-center gap-2"},[a("i",{class:"fas fa-bell text-blue-600"}),Y(" Notifikasi ")],-1)),a("button",{class:"text-xs text-blue-600 hover:text-blue-700 font-medium hover:underline transition-colors",onClick:ye},"Tandai semua dibaca")]),he.value?(d(),f("div",Pc,i[26]||(i[26]=[a("i",{class:"fas fa-spinner fa-spin text-blue-500"},null,-1)]))):pe.value.length===0?(d(),f("div",Dc,"Tidak ada notifikasi")):(d(),f("div",Ac,[(d(!0),f(J,null,Q(pe.value,h=>(d(),f("div",{key:h.id,onClick:K=>rt(h),class:$(["px-4 py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-blue-50/50 flex gap-3 transition-all duration-150 group",h.is_read?"bg-white":"bg-blue-50/30"])},[a("div",jc,[a("div",{class:$(["w-8 h-8 rounded-full flex items-center justify-center",h.type==="success"?"bg-green-100":h.type==="error"?"bg-red-100":"bg-blue-100"])},[a("i",{class:$(["fas text-sm",h.type==="success"?"fa-check-circle text-green-600":h.type==="error"?"fa-exclamation-circle text-red-600":"fa-info-circle text-blue-600"])},null,2)],2)]),a("div",Oc,[a("div",Lc,b(h.type==="success"?"Success":h.type==="error"?"Error":"Info"),1),a("div",Bc,b(h.message),1),a("div",Nc,[i[27]||(i[27]=a("i",{class:"fas fa-clock text-gray-300"},null,-1)),Y(" "+b(h.time),1)]),h.url?(d(),f("div",Rc,[i[28]||(i[28]=a("i",{class:"fas fa-link"},null,-1)),a("span",Fc,b(h.url),1)])):I("",!0)]),h.is_read?I("",!0):(d(),f("div",Wc,i[29]||(i[29]=[a("div",{class:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"},null,-1)])))],10,$c))),128))]))])):I("",!0)]),a("div",Hc,[a("button",{onClick:i[2]||(i[2]=h=>w.value=!w.value),class:"flex items-center gap-2.5 focus:outline-none px-2 py-1.5 rounded-xl hover:bg-gray-100 transition-all duration-200 group"},[a("div",Uc,[a("img",{src:M.value,alt:"Avatar",class:"w-10 h-10 rounded-full object-cover border-2 border-blue-300 shadow-md group-hover:border-blue-500 transition-all duration-200"},null,8,Vc),i[30]||(i[30]=a("div",{class:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full border-2 border-white"},null,-1))]),a("div",zc,[a("span",Gc,b(O.value.nama_lengkap),1),a("span",qc,b(x.value),1)]),i[31]||(i[31]=a("i",{class:"fas fa-chevron-down text-xs text-gray-500 group-hover:text-blue-600 transition-colors"},null,-1))]),w.value?(d(),f("div",Kc,[a("div",Jc,[a("div",Yc,[a("img",{src:M.value,alt:"Avatar",class:"w-12 h-12 rounded-full object-cover border-2 border-blue-300 shadow-md"},null,8,Xc),a("div",Qc,[a("div",Zc,b(O.value.nama_lengkap),1),a("div",eu,b(x.value),1)])]),a("div",tu,[k.value!=="N/A"?(d(),f("div",ou,[i[32]||(i[32]=a("span",{class:"font-medium text-gray-500"},"Jabatan:",-1)),a("div",au,b(k.value),1)])):I("",!0),j.value!=="N/A"?(d(),f("div",nu,[i[33]||(i[33]=a("span",{class:"font-medium text-gray-500"},"Level:",-1)),a("div",su,b(j.value),1)])):I("",!0),E.value!=="N/A"?(d(),f("div",ru,[i[34]||(i[34]=a("span",{class:"font-medium text-gray-500"},"Divisi:",-1)),a("div",iu,b(E.value),1)])):I("",!0)])]),a("div",lu,[a("button",{onClick:i[3]||(i[3]=h=>{ee.value=!0,w.value=!1}),class:"flex items-center gap-3 w-full text-left px-5 py-2.5 hover:bg-blue-50 text-gray-700 hover:text-blue-700 transition-all duration-150 group"},[i[35]||(i[35]=a("i",{class:"fa-solid fa-user w-5 text-center text-gray-400 group-hover:text-blue-600"},null,-1)),a("span",cu,b(je(s)("profile.profile")),1)]),a("button",{onClick:i[4]||(i[4]=h=>{V.value=!0,w.value=!1}),class:"flex items-center gap-3 w-full text-left px-5 py-2.5 hover:bg-blue-50 text-gray-700 hover:text-blue-700 transition-all duration-150 group"},[i[36]||(i[36]=a("i",{class:"fa-solid fa-pen-nib w-5 text-center text-gray-400 group-hover:text-blue-600"},null,-1)),a("span",uu,b(je(s)("profile.esign")),1)]),a("button",{onClick:i[5]||(i[5]=h=>{N.value=!0,w.value=!1}),class:"flex items-center gap-3 w-full text-left px-5 py-2.5 hover:bg-blue-50 text-gray-700 hover:text-blue-700 transition-all duration-150 group"},i[37]||(i[37]=[a("i",{class:"fa-solid fa-key w-5 text-center text-gray-400 group-hover:text-blue-600"},null,-1),a("span",{class:"text-sm font-medium"},"Kelola PIN Outlet",-1)])),a("button",{onClick:i[6]||(i[6]=h=>{it(),w.value=!1}),class:"flex items-center gap-3 w-full text-left px-5 py-2.5 hover:bg-blue-50 text-gray-700 hover:text-blue-700 transition-all duration-150 group"},i[38]||(i[38]=[a("i",{class:"fa-solid fa-file-invoice-dollar w-5 text-center text-gray-400 group-hover:text-blue-600"},null,-1),a("span",{class:"text-sm font-medium"},"Payroll",-1)])),i[40]||(i[40]=a("div",{class:"my-2 h-px bg-gray-200"},null,-1)),ge(je(Jt),{href:y.route("logout"),method:"post",as:"button",class:"flex items-center gap-3 w-full text-left px-5 py-2.5 hover:bg-red-50 text-red-600 hover:text-red-700 transition-all duration-150 group"},{default:Ye(()=>[i[39]||(i[39]=a("i",{class:"fa-solid fa-right-from-bracket w-5 text-center group-hover:scale-110 transition-transform"},null,-1)),a("span",du,b(je(s)("profile.logout")),1)]),_:1},8,["href"])])])):I("",!0)])])]),a("main",fu,[ca(y.$slots,"default",{},void 0,!0)]),a("div",pu,[ge(ua,{name:"toast-slide",tag:"div"},{default:Ye(()=>[(d(!0),f(J,null,Q(_e.value,h=>(d(),f("div",{key:h.id,class:$(["min-w-[300px] max-w-sm bg-white border-l-4 shadow-lg px-4 py-3 rounded-lg mb-2 flex flex-col gap-1 transform transition-all duration-300",[h.type==="success"?"border-green-500":h.type==="error"?"border-red-500":"border-blue-500"]])},[a("div",hu,[a("i",{class:$(["fas mt-1",h.type==="success"?"fa-check-circle text-green-500":h.type==="error"?"fa-exclamation-circle text-red-500":"fa-info-circle text-blue-500"])},null,2),a("div",gu,[a("div",mu,b(h.title),1),a("div",vu,b(h.message),1)]),a("button",{onClick:K=>Fe(h.id),class:"text-gray-400 hover:text-gray-600"},i[41]||(i[41]=[a("i",{class:"fas fa-times"},null,-1)]),8,bu)])],2))),128))]),_:1})])],2),ge(ja,{show:V.value,user:O.value,onClose:i[7]||(i[7]=h=>V.value=!1),onSaved:i[8]||(i[8]=h=>w.value=!1)},null,8,["show","user"]),ge(fa,{show:ee.value,onClose:i[9]||(i[9]=h=>ee.value=!1)},null,8,["show"]),ge(rn,{show:N.value,onClose:i[10]||(i[10]=h=>N.value=!1)},null,8,["show"]),q.value?(d(),f("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:i[14]||(i[14]=We(h=>q.value=!1,["self"]))},[a("div",yu,[a("div",_u,[i[43]||(i[43]=a("h3",{class:"text-lg font-bold text-gray-800"},"Masukkan PIN Payroll",-1)),a("button",{onClick:i[11]||(i[11]=h=>q.value=!1),class:"text-gray-400 hover:text-gray-600"},i[42]||(i[42]=[a("i",{class:"fas fa-times"},null,-1)]))]),a("div",wu,[i[44]||(i[44]=a("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"PIN Payroll",-1)),te(a("input",{"onUpdate:modelValue":i[12]||(i[12]=h=>oe.value=h),type:"password",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Masukkan PIN Payroll",onKeyup:vo(qe,["enter"]),autofocus:""},null,544),[[He,oe.value]])]),a("div",xu,[a("button",{onClick:i[13]||(i[13]=h=>q.value=!1),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"}," Batal "),a("button",{onClick:qe,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Verifikasi ")])])])):I("",!0),ie.value?(d(),f("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:i[16]||(i[16]=We(h=>ie.value=!1,["self"]))},[a("div",ku,[a("div",Su,[i[46]||(i[46]=a("h3",{class:"text-lg font-bold text-gray-800"},"Daftar Payroll Saya",-1)),a("button",{onClick:i[15]||(i[15]=h=>ie.value=!1),class:"text-gray-400 hover:text-gray-600"},i[45]||(i[45]=[a("i",{class:"fas fa-times"},null,-1)]))]),ne.value?(d(),f("div",Eu,i[47]||(i[47]=[a("i",{class:"fas fa-spinner fa-spin text-blue-500 text-2xl"},null,-1),a("p",{class:"mt-2 text-gray-600"},"Memuat data payroll...",-1)]))):ae.value.length===0?(d(),f("div",Cu,i[48]||(i[48]=[a("i",{class:"fa-solid fa-file-invoice-dollar text-4xl mb-2"},null,-1),a("p",null,"Tidak ada data payroll",-1)]))):(d(),f("div",Tu,[a("table",Iu,[i[50]||(i[50]=a("thead",{class:"bg-gray-100"},[a("tr",null,[a("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase border"},"Periode"),a("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase border"},"Jenis Slip Gaji"),a("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase border"},"Tanggal Gajian"),a("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase border"},"Outlet"),a("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase border"},"Aksi")])],-1)),a("tbody",null,[(d(!0),f(J,null,Q(ae.value,h=>(d(),f("tr",{key:h.id,class:"hover:bg-gray-50"},[a("td",Mu,b(h.month)+"/"+b(h.year),1),a("td",Pu,[a("span",{class:$(["px-2 py-1 rounded text-xs font-semibold",h.type==="gajian1"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"])},b(h.type_label),3)]),a("td",Du,b(h.gajian_date_formatted),1),a("td",Au,b(h.outlet_name||"-"),1),a("td",$u,[a("div",ju,[a("button",{onClick:K=>ct(h),class:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm",title:"Lihat Slip Gaji"},i[49]||(i[49]=[a("i",{class:"fas fa-eye"},null,-1)]),8,Ou)])])]))),128))])])]))])])):I("",!0),Te.value?(d(),f("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:i[18]||(i[18]=We(h=>Te.value=!1,["self"]))},[a("div",Lu,[a("div",Bu,[a("h3",Nu,"Slip Gaji - "+b(((U=C.value)==null?void 0:U.type_label)||""),1),a("button",{onClick:i[17]||(i[17]=h=>Te.value=!1),class:"text-gray-400 hover:text-gray-600"},i[51]||(i[51]=[a("i",{class:"fas fa-times"},null,-1)]))]),Ne.value?(d(),f("div",Ru,i[52]||(i[52]=[a("i",{class:"fas fa-spinner fa-spin text-blue-500 text-2xl"},null,-1),a("p",{class:"mt-2 text-gray-600"},"Memuat detail slip gaji...",-1)]))):C.value?(d(),f("div",Fu,[a("div",Wu,[a("div",Hu,[a("div",null,[i[53]||(i[53]=a("p",{class:"text-sm text-gray-600"},"Nama",-1)),a("p",Uu,b(C.value.nama_lengkap),1)]),a("div",null,[i[54]||(i[54]=a("p",{class:"text-sm text-gray-600"},"NIK",-1)),a("p",Vu,b(C.value.nik||"-"),1)]),a("div",null,[i[55]||(i[55]=a("p",{class:"text-sm text-gray-600"},"Jabatan",-1)),a("p",zu,b(C.value.jabatan||"-"),1)]),a("div",null,[i[56]||(i[56]=a("p",{class:"text-sm text-gray-600"},"Divisi",-1)),a("p",Gu,b(C.value.divisi||"-"),1)]),a("div",null,[i[57]||(i[57]=a("p",{class:"text-sm text-gray-600"},"Outlet",-1)),a("p",qu,b(C.value.outlet_name||"-"),1)]),a("div",null,[i[58]||(i[58]=a("p",{class:"text-sm text-gray-600"},"Periode",-1)),a("p",Ku,b(C.value.month)+"/"+b(C.value.year),1)])])]),C.value.type==="gajian1"&&C.value.gajian1?(d(),f("div",Ju,[i[71]||(i[71]=a("h4",{class:"text-md font-bold text-gray-800 border-b pb-2"},"Gajian 1 (Akhir Bulan)",-1)),a("div",Yu,[i[59]||(i[59]=a("span",{class:"font-semibold"},"1. Gaji Pokok",-1)),a("span",Xu,b(B(C.value.gajian1.gaji_pokok)),1)]),a("div",Qu,[i[60]||(i[60]=a("span",{class:"font-semibold"},"2. Tunjangan",-1)),a("span",Zu,b(B(C.value.gajian1.tunjangan)),1)]),C.value.gajian1.custom_deduction_items&&C.value.gajian1.custom_deduction_items.length>0?(d(),f("div",ed,[a("div",td,[i[61]||(i[61]=a("span",{class:"font-semibold"},"3. Custom Deduction",-1)),a("span",od,"- "+b(B(C.value.gajian1.custom_deductions)),1)]),a("div",ad,[(d(!0),f(J,null,Q(C.value.gajian1.custom_deduction_items,(h,K)=>(d(),f("div",{key:K,class:"flex justify-between text-sm"},[a("span",null,b(h.name),1),a("span",nd,"- "+b(B(h.amount)),1)]))),128))])])):(d(),f("div",sd,[i[62]||(i[62]=a("span",{class:"font-semibold"},"3. Custom Deduction",-1)),a("span",rd,"- "+b(B(0)),1)])),C.value.gajian1.custom_earning_items&&C.value.gajian1.custom_earning_items.length>0?(d(),f("div",id,[a("div",ld,[i[63]||(i[63]=a("span",{class:"font-semibold"},"4. Custom Earning",-1)),a("span",cd,b(B(C.value.gajian1.custom_earnings)),1)]),a("div",ud,[(d(!0),f(J,null,Q(C.value.gajian1.custom_earning_items,(h,K)=>(d(),f("div",{key:K,class:"flex justify-between text-sm"},[a("span",null,b(h.name),1),a("span",dd,b(B(h.amount)),1)]))),128))])])):(d(),f("div",fd,[i[64]||(i[64]=a("span",{class:"font-semibold"},"4. Custom Earning",-1)),a("span",pd,b(B(0)),1)])),a("div",hd,[i[65]||(i[65]=a("span",{class:"font-semibold"},"5. Potongan Telat",-1)),a("span",gd,"- "+b(B(C.value.gajian1.potongan_telat)),1)]),a("div",md,[a("div",vd,[i[66]||(i[66]=a("span",{class:"font-semibold"},"6. Alpha & Unpaid Leave",-1)),a("span",bd,"- "+b(B(C.value.gajian1.potongan_alpha+C.value.gajian1.potongan_unpaid_leave)),1)]),a("div",yd,[a("div",_d,[a("span",null,"Total Alpha: "+b(C.value.gajian1.total_alpha)+" hari",1),a("span",wd,"- "+b(B(C.value.gajian1.potongan_alpha)),1)]),a("div",xd,[i[67]||(i[67]=a("span",null,"Potongan Unpaid Leave",-1)),a("span",kd,"- "+b(B(C.value.gajian1.potongan_unpaid_leave)),1)])])]),C.value.gajian1.leave_data&&Object.keys(C.value.gajian1.leave_data).length>0?(d(),f("div",Sd,[i[68]||(i[68]=a("div",{class:"p-3 bg-blue-50 rounded"},[a("span",{class:"font-semibold"},"7. Leave Type Breakdown")],-1)),a("div",Ed,[(d(!0),f(J,null,Q(C.value.gajian1.leave_data,(h,K)=>(d(),f("div",{key:K,class:"flex justify-between text-sm"},[a("span",null,b(K.replace("_days","").replace(/_/g," ").replace(/\b\w/g,z=>z.toUpperCase())),1),a("span",Cd,b(h)+" hari",1)]))),128))])])):(d(),f("div",Td,i[69]||(i[69]=[a("span",{class:"font-semibold"},"7. Leave Type Breakdown",-1),a("p",{class:"text-sm text-gray-500 mt-1"},"Tidak ada data cuti",-1)]))),a("div",Id,[i[70]||(i[70]=a("span",{class:"text-lg font-bold"},"Total Gajian 1",-1)),a("span",Md,b(B(C.value.gajian1.total_gaji_gajian1)),1)])])):I("",!0),C.value.type==="gajian2"&&C.value.gajian2?(d(),f("div",Pd,[i[82]||(i[82]=a("h4",{class:"text-md font-bold text-gray-800 border-b pb-2"},"Gajian 2 (Tanggal 8)",-1)),a("div",Dd,[i[72]||(i[72]=a("span",{class:"font-semibold"},"1. Service Charge (By Point)",-1)),a("span",Ad,b(B(C.value.gajian2.service_charge_by_point)),1)]),a("div",$d,[i[73]||(i[73]=a("span",{class:"font-semibold"},"2. Service Charge (Pro Rate)",-1)),a("span",jd,b(B(C.value.gajian2.service_charge_pro_rate)),1)]),a("div",Od,[i[74]||(i[74]=a("span",{class:"font-semibold"},"Total Service Charge",-1)),a("span",Ld,b(B(C.value.gajian2.service_charge)),1)]),a("div",Bd,[i[75]||(i[75]=a("span",{class:"font-semibold"},"3. Uang Makan",-1)),a("span",Nd,b(B(C.value.gajian2.uang_makan)),1)]),a("div",Rd,[a("div",Fd,[i[76]||(i[76]=a("span",{class:"font-semibold"},"4. Lembur",-1)),a("span",Wd,b(B(C.value.gajian2.gaji_lembur)),1)]),a("div",Hd,[a("div",null,"Total Lembur: "+b(C.value.gajian2.total_lembur)+" jam",1),a("div",null,"Nominal per Jam: "+b(B(C.value.gajian2.nominal_lembur_per_jam)),1)])]),a("div",Ud,[i[77]||(i[77]=a("span",{class:"font-semibold"},"5. L & B",-1)),a("span",Vd,"- "+b(B(C.value.gajian2.lb_total)),1)]),a("div",zd,[i[78]||(i[78]=a("span",{class:"font-semibold"},"6. Deviasi",-1)),a("span",Gd,"- "+b(B(C.value.gajian2.deviasi_total)),1)]),a("div",qd,[i[79]||(i[79]=a("span",{class:"font-semibold"},"7. City Ledger",-1)),a("span",Kd,"- "+b(B(C.value.gajian2.city_ledger_total)),1)]),a("div",Jd,[i[80]||(i[80]=a("span",{class:"font-semibold"},"8. PH Bonus",-1)),a("span",Yd,"+ "+b(B(C.value.gajian2.ph_bonus||0)),1)]),a("div",Xd,[i[81]||(i[81]=a("span",{class:"text-lg font-bold"},"Total Gajian 2",-1)),a("span",Qd,b(B(C.value.gajian2.total_gaji_gajian2)),1)])])):I("",!0)])):I("",!0)])])):I("",!0),ge(As),ge(Us)])}}},sf=Ge(Zd,[["__scopeId","data-v-38c22a1d"]]);export{sf as A,Ls as u};
