import{r as m,W as C,w as Ft,A as Kt,B as l,C as Nt,D as t,L as n,E as f,G as g,N as r,H as h,I as Q,J as S,F as w,M as _,l as D,Y as X,Z as zt,O as tt}from"./vendor-vue-g7iCcTkf.js";import{l as Yt}from"./lodash-DB3HVzpp.js";import{S as x}from"./app-BPKNzj_F.js";import{A as Wt}from"./AppLayout-1Wm1ZPw9.js";import{a as $}from"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CVHTvH7j.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const Jt={class:"max-w-7xl w-full mx-auto py-8 px-2"},Zt={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},qt={class:"rounded-xl shadow-lg p-6 border-l-4 border-blue-500 bg-white hover:shadow-xl transition-all"},Qt={class:"flex items-center justify-between"},Xt={class:"text-2xl font-bold text-gray-900"},te={class:"rounded-xl shadow-lg p-6 border-l-4 border-yellow-500 bg-white hover:shadow-xl transition-all"},ee={class:"flex items-center justify-between"},se={class:"text-2xl font-bold text-gray-900"},ae={class:"text-xs text-gray-500"},le={class:"rounded-xl shadow-lg p-6 border-l-4 border-green-500 bg-white hover:shadow-xl transition-all"},ne={class:"flex items-center justify-between"},oe={class:"text-2xl font-bold text-gray-900"},re={class:"text-xs text-gray-500"},ie={class:"mb-4 flex gap-4 items-center flex-wrap"},de={class:"relative flex-1 min-w-64"},ue={class:"relative flex-1 min-w-48"},ce={class:"mb-4 flex gap-4 items-center flex-wrap"},me={class:"flex flex-col"},fe={class:"relative"},ge={class:"flex flex-col"},pe={class:"relative"},xe={class:"flex gap-2"},ve={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},be={class:"p-6 pb-4"},ye={class:"flex items-start justify-between mb-4"},he={class:"flex-1"},we={class:"text-lg font-bold text-gray-800 mb-1"},ke={class:"text-sm text-gray-600"},_e={class:"flex items-center gap-4 mb-4"},Ce=["onClick"],De=["src","alt"],Se={key:1,class:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-lg font-bold border-3 border-white shadow-xl"},$e={class:"font-medium text-gray-800 text-lg"},je={key:0,class:"text-sm text-gray-500"},Re={class:"flex items-center gap-2 mb-4"},Te={class:"px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800"},Me={key:0,class:"mb-4"},Be={class:"flex items-center justify-between mb-2"},Ee={class:"text-2xl font-bold text-blue-600"},Ie={class:"flex items-center gap-2 mb-2"},Ue={class:"flex space-x-1"},Le={class:"text-xs text-gray-500"},Ve={class:"w-full bg-gray-200 rounded-full h-2"},Oe={class:"flex items-center gap-2 text-sm text-gray-500"},Ge={class:"px-6 py-4 border-t border-gray-100"},He={class:"flex items-center justify-between mb-4"},Ae=["onClick"],Pe={key:0,class:"flex items-center gap-1"},Fe={class:"text-xs text-gray-500"},Ke={key:0,class:"space-y-4"},Ne={class:"flex gap-3"},ze=["src","alt"],Ye={key:1,class:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-xs font-bold border border-gray-200 flex-shrink-0"},We={class:"flex-1"},Je=["onUpdate:modelValue","onKeydown"],Ze={class:"flex justify-end mt-2"},qe=["onClick","disabled"],Qe={key:0,class:"space-y-3"},Xe=["onClick"],ts=["src","alt"],es={key:1,class:"w-8 h-8 rounded-full bg-gradient-to-br from-gray-400 to-gray-600 flex items-center justify-center text-white text-xs font-bold border border-gray-200 flex-shrink-0"},ss={class:"flex-1"},as={class:"bg-gray-50 rounded-lg p-3"},ls={class:"flex items-center gap-2 mb-1"},ns={class:"font-medium text-sm text-gray-800"},os={class:"text-xs text-gray-500"},rs={class:"text-sm text-gray-700"},is={class:"flex items-center gap-4 mt-2 text-xs text-gray-500"},ds=["onClick"],us=["onClick"],cs=["onClick"],ms={key:1,class:"text-center py-4 text-gray-500 text-sm"},fs={class:"px-6 py-4 bg-gray-50 border-t border-gray-100"},gs={class:"flex gap-2"},ps=["onClick"],xs=["onClick"],vs=["onClick"],bs=["onClick"],ys=["onClick"],hs={key:1,class:"text-center py-12"},ws={class:"mt-4 flex flex-col sm:flex-row justify-between items-center gap-4"},ks={class:"text-sm text-gray-600"},_s={key:0,class:"inline-flex -space-x-px"},Cs=["onClick","innerHTML"],Ds=["innerHTML"],Ss=["src"],$s={class:"p-6 flex-1 overflow-y-auto"},js={class:"mb-6 bg-gray-50 rounded-xl p-4"},Rs={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ts=["disabled"],Ms=["value"],Bs={key:0,class:"text-xs text-gray-500 mt-1"},Es={class:"mt-4 flex justify-end"},Is=["disabled"],Us={key:0,class:"fa-solid fa-spinner fa-spin mr-2"},Ls={key:1,class:"fa-solid fa-download mr-2"},Vs={key:0,class:"text-center py-8"},Os={key:1,class:"text-center py-8"},Gs={key:2,class:"space-y-4"},Hs={class:"flex items-center justify-between mb-4"},As={class:"flex-1"},Ps={class:"text-lg font-semibold text-gray-800"},Fs={class:"text-sm text-gray-600"},Ks={class:"flex items-center gap-4"},Ns={class:"text-right"},zs={class:"text-2xl font-bold text-purple-600"},Ys=["onClick"],Ws={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},Js={class:"text-center"},Zs={class:"text-2xl font-bold text-blue-600"},qs={class:"text-center"},Qs={class:"text-2xl font-bold text-green-600"},Xs={class:"text-center"},ta={class:"text-2xl font-bold text-yellow-600"},ea={class:"flex items-center justify-center gap-1 mb-2"},sa={class:"w-full bg-gray-200 rounded-full h-2"},aa={key:0,class:"mt-6 pt-6 border-t border-gray-200"},la={key:0,class:"text-center py-4"},na={key:1,class:"space-y-3"},oa={class:"flex items-center justify-between mb-2"},ra={class:"font-medium text-gray-800"},ia={class:"text-sm text-gray-500"},da={class:"text-right"},ua={class:"text-xl font-bold text-purple-600"},ca={class:"flex items-center gap-1"},ma={class:"w-full bg-gray-200 rounded-full h-1.5"},fa={key:2,class:"text-center py-4 text-gray-500"},Da={__name:"Index",props:{data:Object,filters:Object,statistics:{type:Object,default:()=>({total:0,draft:0,completed:0})},permissions:{type:Object,default:()=>({can_edit:!1,current_user_id:null})}},setup(u){var it,dt,ut,ct,mt,ft;const y=u,I=m(((it=y.filters)==null?void 0:it.search)||""),U=m(((dt=y.filters)==null?void 0:dt.creator)||""),j=m(((ut=y.filters)==null?void 0:ut.status)||"all"),v=m(((ct=y.filters)==null?void 0:ct.date_from)||""),b=m(((mt=y.filters)==null?void 0:mt.date_to)||""),R=m(((ft=y.filters)==null?void 0:ft.per_page)||15),A=m(!1),P=m(""),F=m(!1),L=m([]),T=m(!1),K=m([]),G=m(!1),M=m(new Set),V=m({}),N=m(new Set),c=m({startDate:"",endDate:"",region:""}),O=Yt.debounce(()=>{C.get("/daily-report",{search:I.value,creator:U.value,status:j.value,date_from:v.value,date_to:b.value,per_page:R.value},{preserveState:!0,replace:!0})},400);function ht(){O()}function wt(){O()}function et(){if(v.value&&b.value&&v.value>b.value){const a=v.value;v.value=b.value,b.value=a}O()}function kt(){v.value="",b.value="",O()}function z(a){const e=new Date,s=e.toISOString().split("T")[0];switch(a){case"today":v.value=s,b.value=s;break;case"week":const o=new Date(e);o.setDate(e.getDate()-e.getDay()),v.value=o.toISOString().split("T")[0],b.value=s;break;case"month":const i=new Date(e.getFullYear(),e.getMonth(),1);v.value=i.toISOString().split("T")[0],b.value=s;break}O()}function _t(a){if(a){const e=new URL(a);e.searchParams.set("search",I.value),e.searchParams.set("creator",U.value),e.searchParams.set("status",j.value),e.searchParams.set("date_from",v.value),e.searchParams.set("date_to",b.value),e.searchParams.set("per_page",R.value),C.visit(e.toString(),{preserveState:!0,replace:!0})}}function st(){C.visit("/daily-report/create")}function Ct(a){C.visit(`/daily-report/${a.id}`)}function at(a){C.visit(`/daily-report/${a.id}/inspect`)}function Dt(a){C.visit(`/daily-report/${a.id}/post-inspection`)}async function St(a){var s,o,i;if((await x.fire({title:"Hapus Report?",text:`Yakin ingin menghapus daily report untuk ${(s=a.outlet)==null?void 0:s.nama_outlet}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed)try{const p=await $.delete(`/daily-report/${a.id}`);p.data.success&&(x.fire("Berhasil",p.data.message,"success"),C.reload())}catch(p){x.fire("Error",((i=(o=p.response)==null?void 0:o.data)==null?void 0:i.message)||"Gagal menghapus report","error")}}function $t(a){return{draft:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800"}[a]||"bg-gray-100 text-gray-800"}function jt(a){return{draft:"Draft",completed:"Completed"}[a]||"Unknown"}function Y(a){if(!a.report_areas||a.report_areas.length===0)return 0;const e=a.report_areas.filter(i=>i.status==="G").length,s=a.report_areas.filter(i=>i.status==="NG").length,o=e+s;return o===0?0:Math.round(e/o*100)}function lt(a){const e=Y(a);return e>=81?5:e>=61?4:e>=41?3:e>=21?2:e>=1?1:0}function H(a){return y.permissions.can_edit||a.user_id===y.permissions.current_user_id}function W(a){if(!a)return"U";const e=a.split(" ");return e.length>=2?(e[0][0]+e[1][0]).toUpperCase():e[0][0].toUpperCase()}function B(a){return`/storage/${a}`}function J(a){P.value=a,A.value=!0}function nt(){A.value=!1,P.value=""}function Rt(){F.value=!0;const a=new Date,e=new Date;e.setDate(e.getDate()-30),c.value={startDate:e.toISOString().split("T")[0],endDate:a.toISOString().split("T")[0],region:""},L.value=[],K.value.length===0&&Mt()}function ot(){F.value=!1,L.value=[]}async function Tt(){T.value=!0;try{const a=await $.get("/api/daily-report/summary-rating",{params:c.value});L.value=a.data.data||[]}catch(a){console.error("Error loading summary data:",a),x.fire({icon:"error",title:"Error",text:"Gagal memuat data summary rating"})}finally{T.value=!1}}async function Mt(){G.value=!0;try{const a=await $.get("/api/daily-report/regions");a.data.success&&(K.value=a.data.data||[])}catch(a){console.error("Error loading regions:",a),x.fire({icon:"error",title:"Error",text:"Gagal memuat data regions"})}finally{G.value=!1}}function Bt(){if(c.value.startDate&&c.value.endDate){const a=new Date(c.value.startDate),e=new Date(c.value.endDate);if(a>e){x.fire({icon:"warning",title:"Invalid Date Range",text:"Tanggal mulai tidak boleh lebih besar dari tanggal selesai"});return}}Tt()}function Et(a){M.value.has(a)?M.value.delete(a):(M.value.add(a),V.value[a]||It(a))}async function It(a){N.value.add(a);try{const e=await $.get("/api/daily-report/department-ratings",{params:{outletId:a,startDate:c.value.startDate,endDate:c.value.endDate,region:c.value.region}});e.data.success&&(V.value[a]=e.data.data||[])}catch(e){console.error("Error loading department ratings:",e),x.fire({icon:"error",title:"Error",text:"Gagal memuat data rating departemen"})}finally{N.value.delete(a)}}function Ut(a){return{lunch:"Lunch",dinner:"Dinner"}[a]||"Unknown"}async function rt(a){var e,s,o;if((e=a.newComment)!=null&&e.trim())try{const i=await $.post(`/daily-report/${a.id}/comments`,{comment:a.newComment.trim()});i.data.success&&(a.comments||(a.comments=[]),a.comments.unshift(i.data.data),a.newComment="",a.commentsExpanded=!0,x.fire("Berhasil","Komentar berhasil ditambahkan","success"))}catch(i){x.fire("Error",((o=(s=i.response)==null?void 0:s.data)==null?void 0:o.message)||"Gagal menambahkan komentar","error")}}async function Lt(a){var s,o;if((await x.fire({title:"Hapus Komentar?",text:"Yakin ingin menghapus komentar ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed)try{(await $.delete(`/daily-report/comments/${a.id}`)).data.success&&(y.data.data.forEach(p=>{if(p.comments){const k=p.comments.findIndex(E=>E.id===a.id);k>-1&&p.comments.splice(k,1)}}),x.fire("Berhasil","Komentar berhasil dihapus","success"))}catch(i){x.fire("Error",((o=(s=i.response)==null?void 0:s.data)==null?void 0:o.message)||"Gagal menghapus komentar","error")}}function Vt(a){const e=prompt("Edit komentar:",a.comment);e!==null&&e.trim()!==a.comment&&Ot(a,e.trim())}async function Ot(a,e){var s,o;try{const i=await $.put(`/daily-report/comments/${a.id}`,{comment:e});i.data.success&&(y.data.data.forEach(p=>{if(p.comments){const k=p.comments.find(E=>E.id===a.id);k&&(k.comment=e,k.updated_at=i.data.data.updated_at)}}),x.fire("Berhasil","Komentar berhasil diperbarui","success"))}catch(i){x.fire("Error",((o=(s=i.response)==null?void 0:s.data)==null?void 0:o.message)||"Gagal memperbarui komentar","error")}}function Gt(a,e){a.newComment=`@${e.user.nama_lengkap} `}function Ht(a){const e=new Date(a),o=Math.floor((new Date-e)/1e3);return o<60?"baru saja":o<3600?`${Math.floor(o/60)} menit yang lalu`:o<86400?`${Math.floor(o/3600)} jam yang lalu`:o<2592e3?`${Math.floor(o/86400)} hari yang lalu`:e.toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}function At(a){a.commentsExpanded=!a.commentsExpanded}function Z(a){return a.comments?a.comments.length:0}function Pt(a){const e=Z(a);return e===0?"Tulis komentar":e===1?"1 komentar":`${e} komentar`}return Ft([j,R],()=>{C.get("/daily-report",{search:I.value,creator:U.value,status:j.value,date_from:v.value,date_to:b.value,per_page:R.value},{preserveState:!0,replace:!0})}),(a,e)=>(l(),Kt(Wt,{title:"Daily Report"},{default:Nt(()=>[t("div",Jt,[t("div",{class:"flex justify-between items-center mb-6"},[e[15]||(e[15]=t("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[t("i",{class:"fa-solid fa-clipboard-list text-blue-500"}),g(" Daily Report ")],-1)),t("button",{onClick:st,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"}," + Buat Report Baru ")]),t("div",Zt,[t("div",qt,[t("div",Qt,[t("div",null,[e[16]||(e[16]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Reports",-1)),t("p",Xt,r(u.statistics.total),1),e[17]||(e[17]=t("p",{class:"text-xs text-gray-500"},"100% dari total",-1))]),e[18]||(e[18]=t("div",{class:"bg-blue-100 p-3 rounded-full"},[t("i",{class:"fa-solid fa-clipboard-list text-blue-600 text-xl"})],-1))])]),t("div",te,[t("div",ee,[t("div",null,[e[19]||(e[19]=t("p",{class:"text-sm font-medium text-gray-600"},"Draft Reports",-1)),t("p",se,r(u.statistics.draft),1),t("p",ae,r(u.statistics.total>0?Math.round(u.statistics.draft/u.statistics.total*100):0)+"% dari total",1)]),e[20]||(e[20]=t("div",{class:"bg-yellow-100 p-3 rounded-full"},[t("i",{class:"fa-solid fa-edit text-yellow-600 text-xl"})],-1))])]),t("div",le,[t("div",ne,[t("div",null,[e[21]||(e[21]=t("p",{class:"text-sm font-medium text-gray-600"},"Completed Reports",-1)),t("p",oe,r(u.statistics.completed),1),t("p",re,r(u.statistics.total>0?Math.round(u.statistics.completed/u.statistics.total*100):0)+"% dari total",1)]),e[22]||(e[22]=t("div",{class:"bg-green-100 p-3 rounded-full"},[t("i",{class:"fa-solid fa-check-circle text-green-600 text-xl"})],-1))])])]),t("div",ie,[h(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>j.value=s),class:"form-input rounded-xl"},e[23]||(e[23]=[t("option",{value:"all"},"Semua Status",-1),t("option",{value:"draft"},"Draft",-1),t("option",{value:"completed"},"Completed",-1)]),512),[[Q,j.value]]),h(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>R.value=s),class:"form-input rounded-xl"},e[24]||(e[24]=[t("option",{value:"10"},"10 per halaman",-1),t("option",{value:"15"},"15 per halaman",-1),t("option",{value:"25"},"25 per halaman",-1),t("option",{value:"50"},"50 per halaman",-1),t("option",{value:"100"},"100 per halaman",-1)]),512),[[Q,R.value]]),t("div",de,[e[25]||(e[25]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("i",{class:"fas fa-search text-blue-500"})],-1)),h(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>I.value=s),onInput:ht,type:"text",placeholder:"Cari outlet, department...",class:"w-full pl-10 pr-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},null,544),[[S,I.value]])]),t("div",ue,[e[26]||(e[26]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("i",{class:"fas fa-user text-green-500"})],-1)),h(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>U.value=s),onInput:wt,type:"text",placeholder:"Cari creator...",class:"w-full pl-10 pr-4 py-2 rounded-xl border border-green-200 shadow focus:ring-2 focus:ring-green-400 focus:border-green-400 transition"},null,544),[[S,U.value]])])]),t("div",ce,[t("div",me,[e[28]||(e[28]=t("label",{class:"text-sm font-medium text-gray-700 mb-1"},"Dari Tanggal",-1)),t("div",fe,[e[27]||(e[27]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("i",{class:"fas fa-calendar-alt text-purple-500"})],-1)),h(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>v.value=s),onInput:et,type:"date",class:"pl-10 pr-4 py-2 rounded-xl border border-purple-200 shadow focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition"},null,544),[[S,v.value]])])]),t("div",ge,[e[30]||(e[30]=t("label",{class:"text-sm font-medium text-gray-700 mb-1"},"Sampai Tanggal",-1)),t("div",pe,[e[29]||(e[29]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("i",{class:"fas fa-calendar-alt text-purple-500"})],-1)),h(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>b.value=s),onInput:et,type:"date",class:"pl-10 pr-4 py-2 rounded-xl border border-purple-200 shadow focus:ring-2 focus:ring-purple-400 focus:border-purple-400 transition"},null,544),[[S,b.value]])])]),t("div",xe,[t("button",{onClick:e[6]||(e[6]=s=>z("today")),class:"px-3 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600 transition-all duration-300 text-sm"}," Hari Ini "),t("button",{onClick:e[7]||(e[7]=s=>z("week")),class:"px-3 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600 transition-all duration-300 text-sm"}," Minggu Ini "),t("button",{onClick:e[8]||(e[8]=s=>z("month")),class:"px-3 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600 transition-all duration-300 text-sm"}," Bulan Ini "),t("button",{onClick:kt,class:"px-3 py-2 bg-gray-500 text-white rounded-lg shadow hover:bg-gray-600 transition-all duration-300 text-sm flex items-center gap-1"},e[31]||(e[31]=[t("i",{class:"fas fa-times"},null,-1),g(" Clear ")]))]),t("button",{onClick:Rt,class:"px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 flex items-center gap-2"},e[32]||(e[32]=[t("i",{class:"fa-solid fa-chart-bar"},null,-1),t("span",null,"Summary Rating",-1)]))]),u.data.data.length>0?(l(),n("div",ve,[(l(!0),n(w,null,_(u.data.data,s=>{var o,i,p,k,E,gt,pt,xt;return l(),n("div",{key:s.id,class:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100"},[t("div",be,[t("div",ye,[t("div",he,[t("h3",we,r(((o=s.outlet)==null?void 0:o.nama_outlet)||"-"),1),t("p",ke,r(((i=s.department)==null?void 0:i.nama_departemen)||"-"),1)]),t("span",{class:D(["px-3 py-1 rounded-full text-xs font-semibold",$t(s.status)])},r(jt(s.status)),3)]),t("div",_e,[(p=s.user)!=null&&p.avatar?(l(),n("div",{key:0,class:"w-16 h-16 rounded-full overflow-hidden border-3 border-white shadow-xl cursor-pointer hover:shadow-2xl transition-all",onClick:d=>J(B(s.user.avatar))},[t("img",{src:B(s.user.avatar),alt:s.user.nama_lengkap,class:"w-full h-full object-cover hover:scale-105 transition-transform"},null,8,De)],8,Ce)):(l(),n("div",Se,r(W(((k=s.user)==null?void 0:k.nama_lengkap)||"U")),1)),t("div",null,[t("p",$e,r(((E=s.user)==null?void 0:E.nama_lengkap)||"-"),1),(pt=(gt=s.user)==null?void 0:gt.jabatan)!=null&&pt.nama_jabatan?(l(),n("p",je,r(s.user.jabatan.nama_jabatan),1)):f("",!0)])]),t("div",Re,[e[33]||(e[33]=t("i",{class:"fa-solid fa-clock text-gray-400"},null,-1)),t("span",Te,r(Ut(s.inspection_time)),1)]),s.status==="completed"?(l(),n("div",Me,[t("div",Be,[e[34]||(e[34]=t("span",{class:"text-sm font-medium text-gray-600"},"Inspection Rating",-1)),t("span",Ee,r(Y(s))+"%",1)]),t("div",Ie,[t("div",Ue,[(l(),n(w,null,_(5,d=>t("i",{key:d,class:D(["fa-star text-sm",d<=lt(s)?"fa-solid text-yellow-400":"fa-regular text-gray-300"])},null,2)),64))]),t("span",Le,r(lt(s))+"/5",1)]),t("div",Ve,[t("div",{class:"bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full transition-all duration-500",style:X({width:Y(s)+"%"})},null,4)])])):f("",!0),t("div",Oe,[e[35]||(e[35]=t("i",{class:"fa-solid fa-calendar"},null,-1)),t("span",null,r(new Date(s.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})),1)])]),t("div",Ge,[t("div",He,[t("button",{onClick:d=>At(s),class:"flex items-center gap-2 text-sm font-medium text-gray-600 hover:text-blue-600 transition-colors"},[t("i",{class:D(["fa-solid transition-transform duration-200",s.commentsExpanded?"fa-chevron-up":"fa-chevron-down"])},null,2),t("span",null,r(Pt(s)),1)],8,Ae),Z(s)>0?(l(),n("div",Pe,[e[36]||(e[36]=t("i",{class:"fa-solid fa-comment text-gray-400 text-xs"},null,-1)),t("span",Fe,r(Z(s)),1)])):f("",!0)]),s.commentsExpanded?(l(),n("div",Ke,[t("div",Ne,[a.$page.props.auth.user.avatar?(l(),n("div",{key:0,class:"w-8 h-8 rounded-full overflow-hidden border border-gray-200 flex-shrink-0 cursor-pointer hover:shadow-lg transition-all",onClick:e[9]||(e[9]=d=>J(B(a.$page.props.auth.user.avatar)))},[t("img",{src:B(a.$page.props.auth.user.avatar),alt:a.$page.props.auth.user.nama_lengkap,class:"w-full h-full object-cover hover:scale-105 transition-transform"},null,8,ze)])):(l(),n("div",Ye,r(W(a.$page.props.auth.user.nama_lengkap)),1)),t("div",We,[h(t("textarea",{"onUpdate:modelValue":d=>s.newComment=d,onKeydown:zt(tt(d=>rt(s),["prevent"]),["enter"]),placeholder:"Tulis komentar...",class:"w-full px-3 py-2 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",rows:"2"},null,40,Je),[[S,s.newComment]]),t("div",Ze,[t("button",{onClick:d=>rt(s),disabled:!((xt=s.newComment)!=null&&xt.trim()),class:"bg-blue-600 text-white px-4 py-1 rounded-lg text-xs font-medium hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed"},e[37]||(e[37]=[t("i",{class:"fa-solid fa-paper-plane mr-1"},null,-1),g(" Kirim ")]),8,qe)])])]),s.comments&&s.comments.length>0?(l(),n("div",Qe,[(l(!0),n(w,null,_(s.comments,d=>{var vt,bt,yt;return l(),n("div",{key:d.id,class:"flex gap-3"},[(vt=d.user)!=null&&vt.avatar?(l(),n("div",{key:0,class:"w-8 h-8 rounded-full overflow-hidden border border-gray-200 flex-shrink-0 cursor-pointer hover:shadow-lg transition-all",onClick:q=>J(B(d.user.avatar))},[t("img",{src:B(d.user.avatar),alt:d.user.nama_lengkap,class:"w-full h-full object-cover hover:scale-105 transition-transform"},null,8,ts)],8,Xe)):(l(),n("div",es,r(W(((bt=d.user)==null?void 0:bt.nama_lengkap)||"U")),1)),t("div",ss,[t("div",as,[t("div",ls,[t("span",ns,r(((yt=d.user)==null?void 0:yt.nama_lengkap)||"Unknown"),1),t("span",os,r(Ht(d.created_at)),1)]),t("p",rs,r(d.comment),1)]),t("div",is,[t("button",{onClick:q=>Gt(s,d),class:"hover:text-blue-600 transition-colors"},e[38]||(e[38]=[t("i",{class:"fa-solid fa-reply mr-1"},null,-1),g(" Balas ")]),8,ds),d.user_id===a.$page.props.auth.user.id?(l(),n("button",{key:0,onClick:q=>Vt(d),class:"hover:text-green-600 transition-colors"},e[39]||(e[39]=[t("i",{class:"fa-solid fa-edit mr-1"},null,-1),g(" Edit ")]),8,us)):f("",!0),d.user_id===a.$page.props.auth.user.id?(l(),n("button",{key:1,onClick:q=>Lt(d),class:"hover:text-red-600 transition-colors"},e[40]||(e[40]=[t("i",{class:"fa-solid fa-trash mr-1"},null,-1),g(" Hapus ")]),8,cs)):f("",!0)])])])}),128))])):(l(),n("div",ms,e[41]||(e[41]=[t("i",{class:"fa-solid fa-comment-slash mb-2 block text-2xl"},null,-1),g(" Belum ada komentar ")])))])):f("",!0)]),t("div",fs,[t("div",gs,[t("button",{onClick:d=>Ct(s),class:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2"},e[42]||(e[42]=[t("i",{class:"fa-solid fa-eye"},null,-1),g(" View ")]),8,ps),s.status==="draft"&&H(s)?(l(),n("button",{key:0,onClick:d=>at(s),class:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-700 transition-colors flex items-center justify-center gap-2"},e[43]||(e[43]=[t("i",{class:"fa-solid fa-play"},null,-1),g(" Continue ")]),8,xs)):f("",!0),s.status==="completed"&&H(s)?(l(),n("button",{key:1,onClick:d=>at(s),class:"flex-1 bg-orange-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-orange-700 transition-colors flex items-center justify-center gap-2"},e[44]||(e[44]=[t("i",{class:"fa-solid fa-edit"},null,-1),g(" Edit ")]),8,vs)):f("",!0),s.status==="completed"&&H(s)?(l(),n("button",{key:2,onClick:d=>Dt(s),class:"flex-1 bg-purple-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-purple-700 transition-colors flex items-center justify-center gap-2"},e[45]||(e[45]=[t("i",{class:"fa-solid fa-clipboard-list"},null,-1),g(" Post ")]),8,bs)):f("",!0),H(s)?(l(),n("button",{key:3,onClick:d=>St(s),class:"bg-red-100 text-red-700 px-3 py-2 rounded-lg text-sm font-medium hover:bg-red-200 transition-colors",title:"Delete"},e[46]||(e[46]=[t("i",{class:"fa-solid fa-trash"},null,-1)]),8,ys)):f("",!0)])])])}),128))])):(l(),n("div",hs,[e[48]||(e[48]=t("div",{class:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},[t("i",{class:"fa-solid fa-clipboard-list text-3xl text-gray-400"})],-1)),e[49]||(e[49]=t("h3",{class:"text-lg font-medium text-gray-600 mb-2"},"No Daily Reports Found",-1)),e[50]||(e[50]=t("p",{class:"text-gray-500 mb-6"},"Start by creating your first daily report",-1)),t("button",{onClick:st,class:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors"},e[47]||(e[47]=[t("i",{class:"fa-solid fa-plus mr-2"},null,-1),g(" Create New Report ")]))])),t("div",ws,[t("div",ks," Menampilkan "+r(u.data.from||0)+" sampai "+r(u.data.to||0)+" dari "+r(u.data.total||0)+" reports ",1),u.data.links&&u.data.links.length>3?(l(),n("nav",_s,[(l(!0),n(w,null,_(u.data.links,(s,o)=>(l(),n(w,{key:o},[s.url?(l(),n("button",{key:0,onClick:i=>_t(s.url),class:D(["px-3 py-2 text-sm border border-gray-300 transition-colors",s.active?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 hover:bg-gray-50 border-gray-300"]),innerHTML:s.label},null,10,Cs)):(l(),n("span",{key:1,class:"px-3 py-2 text-sm border border-gray-200 text-gray-400 bg-gray-50",innerHTML:s.label},null,8,Ds))],64))),128))])):f("",!0)])]),A.value?(l(),n("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",onClick:nt},[t("div",{class:"relative max-w-4xl max-h-[90vh] p-4",onClick:e[10]||(e[10]=tt(()=>{},["stop"]))},[t("button",{onClick:nt,class:"absolute -top-4 -right-4 bg-white rounded-full p-2 shadow-lg hover:bg-gray-100 transition-colors z-10"},e[51]||(e[51]=[t("i",{class:"fa-solid fa-times text-gray-600"},null,-1)])),t("img",{src:P.value,alt:"Avatar preview",class:"max-w-full max-h-full object-contain rounded-lg shadow-2xl"},null,8,Ss)])])):f("",!0),F.value?(l(),n("div",{key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:ot},[t("div",{class:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",onClick:e[14]||(e[14]=tt(()=>{},["stop"]))},[t("div",{class:"bg-gradient-to-r from-purple-600 to-blue-600 text-white p-6"},[t("div",{class:"flex items-center justify-between"},[e[53]||(e[53]=t("div",{class:"flex items-center gap-3"},[t("i",{class:"fa-solid fa-chart-bar text-2xl"}),t("h2",{class:"text-2xl font-bold"},"Summary Rating per Outlet")],-1)),t("button",{onClick:ot,class:"text-white hover:text-gray-200 transition-colors"},e[52]||(e[52]=[t("i",{class:"fa-solid fa-times text-xl"},null,-1)]))])]),t("div",$s,[t("div",js,[e[59]||(e[59]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Filter Data",-1)),t("div",Rs,[t("div",null,[e[54]||(e[54]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Mulai",-1)),h(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>c.value.startDate=s),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},null,512),[[S,c.value.startDate]])]),t("div",null,[e[55]||(e[55]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Selesai",-1)),h(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>c.value.endDate=s),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},null,512),[[S,c.value.endDate]])]),t("div",null,[e[58]||(e[58]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Region",-1)),h(t("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>c.value.region=s),disabled:G.value,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 disabled:opacity-50"},[e[56]||(e[56]=t("option",{value:""},"Semua Region",-1)),(l(!0),n(w,null,_(K.value,s=>(l(),n("option",{key:s.id,value:s.id},r(s.name),9,Ms))),128))],8,Ts),[[Q,c.value.region]]),G.value?(l(),n("div",Bs,e[57]||(e[57]=[t("i",{class:"fa-solid fa-spinner fa-spin mr-1"},null,-1),g(" Loading regions... ")]))):f("",!0)])]),t("div",Es,[t("button",{onClick:Bt,disabled:T.value||!c.value.startDate||!c.value.endDate,class:"px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:shadow-lg transition-all disabled:opacity-50"},[T.value?(l(),n("i",Us)):(l(),n("i",Ls)),g(" "+r(T.value?"Loading...":"Load Data"),1)],8,Is)])]),T.value?(l(),n("div",Vs,e[60]||(e[60]=[t("i",{class:"fa-solid fa-spinner fa-spin text-3xl text-purple-600 mb-4"},null,-1),t("p",{class:"text-gray-600"},"Memuat data summary rating...",-1)]))):L.value.length===0?(l(),n("div",Os,e[61]||(e[61]=[t("i",{class:"fa-solid fa-chart-line text-4xl text-gray-400 mb-4"},null,-1),t("p",{class:"text-gray-600"},'Pilih filter dan klik "Load Data" untuk melihat summary rating',-1)]))):(l(),n("div",Gs,[(l(!0),n(w,null,_(L.value,s=>(l(),n("div",{key:s.id,class:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-all"},[t("div",Hs,[t("div",As,[t("h4",Ps,r(s.nama_outlet),1),t("p",Fs,r(s.region||"N/A"),1)]),t("div",Ks,[t("div",Ns,[t("div",zs,r(s.average_rating)+"%",1),e[62]||(e[62]=t("div",{class:"text-sm text-gray-500"},"Average Rating",-1))]),t("button",{onClick:o=>Et(s.id),class:D(["p-2 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors",{"bg-purple-100 text-purple-600":M.value.has(s.id)}])},[t("i",{class:D(["fa-solid transition-transform duration-200",M.value.has(s.id)?"fa-chevron-up":"fa-chevron-down"])},null,2)],10,Ys)])]),t("div",Ws,[t("div",Js,[t("div",Zs,r(s.total_reports),1),e[63]||(e[63]=t("div",{class:"text-sm text-gray-500"},"Total Reports",-1))]),t("div",qs,[t("div",Qs,r(s.completed_reports),1),e[64]||(e[64]=t("div",{class:"text-sm text-gray-500"},"Completed",-1))]),t("div",Xs,[t("div",ta,r(s.draft_reports),1),e[65]||(e[65]=t("div",{class:"text-sm text-gray-500"},"Draft",-1))])]),t("div",ea,[(l(),n(w,null,_(5,o=>t("i",{key:o,class:D(["text-lg",o<=Math.round(s.average_rating/20)?"fa-solid fa-star text-yellow-400":"fa-regular fa-star text-gray-300"])},null,2)),64))]),t("div",sa,[t("div",{class:"bg-gradient-to-r from-purple-500 to-blue-500 h-2 rounded-full transition-all duration-500",style:X({width:s.average_rating+"%"})},null,4)]),M.value.has(s.id)?(l(),n("div",aa,[e[68]||(e[68]=t("h5",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[t("i",{class:"fa-solid fa-building text-purple-600"}),g(" Rating per Departemen ")],-1)),N.value.has(s.id)?(l(),n("div",la,e[66]||(e[66]=[t("i",{class:"fa-solid fa-spinner fa-spin text-purple-600 mb-2"},null,-1),t("p",{class:"text-gray-600"},"Memuat data departemen...",-1)]))):V.value[s.id]&&V.value[s.id].length>0?(l(),n("div",na,[(l(!0),n(w,null,_(V.value[s.id],o=>(l(),n("div",{key:o.id,class:"bg-gray-50 rounded-lg p-4"},[t("div",oa,[t("div",null,[t("h6",ra,r(o.nama_departemen),1),t("p",ia,r(o.total_reports)+" reports",1)]),t("div",da,[t("div",ua,r(o.average_rating)+"%",1),t("div",ca,[(l(),n(w,null,_(5,i=>t("i",{key:i,class:D(["text-sm",i<=Math.round(o.average_rating/20)?"fa-solid fa-star text-yellow-400":"fa-regular fa-star text-gray-300"])},null,2)),64))])])]),t("div",ma,[t("div",{class:"bg-gradient-to-r from-purple-400 to-blue-400 h-1.5 rounded-full transition-all duration-500",style:X({width:o.average_rating+"%"})},null,4)])]))),128))])):(l(),n("div",fa,e[67]||(e[67]=[t("i",{class:"fa-solid fa-building text-2xl mb-2"},null,-1),t("p",null,"Tidak ada data departemen untuk outlet ini",-1)])))])):f("",!0)]))),128))]))])])])):f("",!0)]),_:1}))}};export{Da as default};
