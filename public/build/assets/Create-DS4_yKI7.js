import{r as x,k as pe,c as fe,a as ge,A as xe,B as l,C as X,D as t,L as o,E as k,x as ye,G as _,H as V,F as R,M as F,N as b,I as ve,l as J,Z as _e,J as ee,n as T}from"./vendor-vue-g7iCcTkf.js";import{A as ke}from"./AppLayout-lnDyFfsm.js";import{a as K}from"./vendor-utils-CpgP2uT4.js";import{S as N}from"./app-CUjRlmlQ.js";import{_ as he}from"./Modal-BBL5yay4.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CXOsavaw.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const $e={class:"w-full min-h-screen py-8 px-2 md:px-6 flex flex-col items-center"},qe={class:"mb-6 flex flex-col md:flex-row gap-4 items-center w-full max-w-xl"},Se=["value"],Ne={key:0,class:"mb-6 w-full max-w-xl bg-blue-50 border-l-4 border-blue-400 p-4 rounded animate-fade-in"},De={key:1,class:"mb-6 w-full max-w-xl bg-green-50 border-l-4 border-green-400 p-4 rounded animate-fade-in"},Ie={key:0},Oe={key:0},Be={class:"flex flex-wrap gap-1 mt-1"},Te={key:1},Ce={key:1},Ee={key:2,class:"mb-8 w-full max-w-3xl animate-fade-in"},Re={class:"min-w-full rounded-xl overflow-hidden shadow-xl"},Fe={class:"px-2 py-2"},Me=["onClick","disabled"],Qe={class:"px-4 py-2 text-base"},Ge={class:"px-4 py-2 text-right text-lg"},Ke={class:"px-4 py-2 text-base"},Le={class:"px-4 py-2 text-right text-lg font-bold"},je={class:"px-4 py-2 text-center"},Pe={key:0,class:"text-gray-400 font-bold text-lg"},Ae={key:1,class:"text-green-700 font-bold text-lg animate-pulse"},Ue={key:2,class:"text-red-700 font-bold text-lg animate-pulse"},Ve={key:3,class:"text-yellow-700 font-bold text-lg animate-pulse"},Je={key:3,class:"mb-8 w-full max-w-xl flex flex-col items-center animate-fade-in"},We=["disabled"],ze={key:0,class:"fa fa-spinner fa-spin mr-2"},He={key:1,class:"fa-solid fa-paper-plane mr-2"},Ye={key:5,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},Ze={class:"bg-white rounded-xl shadow-2xl w-full max-w-md p-8 relative animate-fade-in"},Xe={class:"flex justify-end gap-3"},et=["disabled"],tt={key:0,class:"fa fa-spinner fa-spin mr-2"},st={key:6,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},at={class:"bg-white rounded-xl shadow-2xl w-full max-w-xs p-8 relative animate-fade-in"},lt={class:"mb-4"},ot=["max"],nt={class:"flex justify-end gap-3"},it={key:7,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},rt={class:"bg-white rounded-xl shadow-2xl w-full max-w-xs p-8 relative animate-fade-in"},ut={class:"grid gap-3 mb-4"},dt=["onClick"],ct={class:"p-4 min-w-[320px] max-w-[90vw]"},mt={key:0,class:"text-center py-8"},bt={key:1},pt={class:"mb-2"},ft={class:"mb-2"},gt={key:0},xt={key:1,class:"italic text-gray-400"},yt={class:"mb-2"},vt={key:0},_t={key:1,class:"italic text-gray-400"},kt={key:0,class:"mb-2"},ht={class:"flex flex-wrap gap-2 mt-1"},wt=["src"],$t={key:2,class:"text-red-500 text-center py-4"},qt={__name:"Create",setup(St){const L=x([]),C=x(""),d=x(null),v=pe([]),q=x(""),h=x(""),$=x(""),I=x(null),E=x(!1),M=x(!1),O=x(.01),Q=x(null),j=x(!1),te=["Stok kurang","Barang rusak","Permintaan berubah","Lainnya"],se=x(""),D=x(!1),W=x(0),P=x(!1),y=x({}),A=x(!1),ae=fe(()=>v.length>0);ge(()=>{K.get("/outlet-food-good-receives/available-dos").then(a=>{L.value=a.data})});function le(){const a=L.value.find(e=>String(e.id)===String(C.value));a&&K.get(`/outlet-food-good-receives/do-detail/${a.id}`).then(e=>{d.value=e.data,v.splice(0,v.length,...e.data.items.map(m=>({...m,qty_scan:0}))),q.value="",h.value="",T(()=>{var m;return(m=I.value)==null?void 0:m.focus()})})}function oe(){const a=q.value.trim();if(!a)return;let e=a,m=1;const f=a.match(/^([\S]+)\s+(\d+(?:\.\d+)?)$/);f&&(e=f[1],m=parseFloat(f[2])||1);const s=v.find(p=>Array.isArray(p.barcodes)?p.barcodes.includes(e):p.barcode===e);if(s){const p=Number(s.qty_packing_list),w=Number(s.qty_scan||0);if(s.unit_type==="kiloan"){Q.value=s;const u=p-w;if(u<=0){h.value=`❌ Qty scan sudah mencapai maksimal (${p})`,$.value="text-red-600",q.value="",T(()=>{var n;return(n=I.value)==null?void 0:n.focus()});return}O.value=Math.max(.01,u),M.value=!0,q.value="",T(()=>{const n=document.getElementById("qty-modal-input");n&&n.focus()});return}if(m===1&&!a.match(/\s+\d/)&&(m=1),w+m>p){const u=p-w;if(u<=0){h.value=`❌ Qty scan sudah mencapai maksimal (${p})`,$.value="text-red-600",q.value="",T(()=>{var n;return(n=I.value)==null?void 0:n.focus()});return}m=u}s.qty_scan=w+m;const S=Number(s.qty_scan).toFixed(2)===Number(s.qty_packing_list).toFixed(2),r=Number(s.qty_scan)>Number(s.qty_packing_list);S?(h.value=`✅ ${s.item_name} (${s.qty_scan.toFixed(2)}/${s.qty_packing_list}) - LENGKAP!`,$.value="text-green-700"):r?(h.value=`⚠️ ${s.item_name} (${s.qty_scan.toFixed(2)}/${s.qty_packing_list}) - LEBIH!`,$.value="text-red-700"):(h.value=`✔️ ${s.item_name} (${s.qty_scan.toFixed(2)}/${s.qty_packing_list})`,$.value="text-yellow-700")}else h.value="❌ Barcode tidak ditemukan di DO!",$.value="text-red-600";q.value="",T(()=>{var p;return(p=I.value)==null?void 0:p.focus()})}function z(){const a=Q.value,e=Number(a.qty_packing_list),m=Number(a.qty_scan||0),f=Number(O.value);if(f<.01){O.value=.01;return}const s=e-m;if(f>s){O.value=s;return}a.qty_scan=m+f,M.value=!1;const p=Number(a.qty_scan).toFixed(2)===Number(a.qty_packing_list).toFixed(2),w=Number(a.qty_scan)>Number(a.qty_packing_list);p?(h.value=`✅ ${a.item_name} (${a.qty_scan.toFixed(2)}/${a.qty_packing_list}) - LENGKAP!`,$.value="text-green-700"):w?(h.value=`⚠️ ${a.item_name} (${a.qty_scan.toFixed(2)}/${a.qty_packing_list}) - LEBIH!`,$.value="text-red-700"):(h.value=`✔️ ${a.item_name} (${a.qty_scan.toFixed(2)}/${a.qty_packing_list})`,$.value="text-yellow-700"),T(()=>{var S;return(S=I.value)==null?void 0:S.focus()})}function ne(a){a.key==="Enter"&&z()}function ie(a){return Number(a.qty_scan).toFixed(2)===Number(a.qty_packing_list).toFixed(2)?"bg-green-50 animate-pulse":Number(a.qty_scan)>Number(a.qty_packing_list)?"bg-red-50 animate-pulse":Number(a.qty_scan)>0?"bg-yellow-50 animate-pulse":""}async function re(){var r,u,n,g;const a=[];C.value||a.push("Delivery Order belum dipilih"),v.length||a.push("Tidak ada item untuk diproses");const e=v.filter(c=>Number(c.qty_scan)===0),m=v.filter(c=>{const i=Number(c.qty_scan),G=Number(c.qty_packing_list);return i>0&&i<G});if(a.length>0){await N.fire({icon:"error",title:"Validasi Gagal",html:a.map(c=>`• ${c}`).join("<br>"),confirmButtonText:"OK",width:"500px"});return}let f="";e.length>0&&(f+=`<p><strong>⚠️ ${e.length} item belum di-scan:</strong><br>${e.map(c=>c.item_name).join(", ")}</p>`),m.length>0&&(f+=`<p><strong>⚠️ ${m.length} item qty scan kurang dari DO:</strong><br>${m.map(c=>`${c.item_name} (${c.qty_scan}/${c.qty_packing_list})`).join(", ")}</p>`);const s=v.length,p=v.filter(c=>Number(c.qty_scan)>0).length,w=v.reduce((c,i)=>c+Number(i.qty_scan),0);(await N.fire({icon:f?"warning":"question",title:"Konfirmasi Submit Good Receive",html:`
      <div class="text-left">
        <p><strong>Delivery Order:</strong> ${((u=(r=d.value)==null?void 0:r.do)==null?void 0:u.do_number)||"N/A"}</p>
        <p><strong>Total Item:</strong> ${p}/${s}</p>
        <p><strong>Total Qty Scan:</strong> ${w.toFixed(2)}</p>
        <p><strong>Warehouse Outlet:</strong> ${((g=(n=d.value)==null?void 0:n.do)==null?void 0:g.warehouse_outlet_name)||"N/A"}</p>
        ${f?`<br><div class="bg-yellow-50 p-3 rounded border-l-4 border-yellow-400">${f}</div>`:""}
        <br>
        <p class="text-sm text-gray-600">Data akan disimpan ke inventory dan tidak dapat diubah.</p>
      </div>
    `,showCancelButton:!0,confirmButtonText:"Ya, Submit!",cancelButtonText:"Batal",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",width:"600px"})).isConfirmed&&(E.value=!0)}async function ue(){var m,f,s,p,w,S;const a=Date.now();if(D.value||a-W.value<2e3){console.log("Submit already in progress or too soon, ignoring duplicate request");return}W.value=a,D.value=!0,document.querySelectorAll('button[onclick*="submitGR"], button[class*="bg-blue-600"]').forEach(r=>{r.disabled=!0,r.style.opacity="0.5"});try{const r={delivery_order_id:Number(C.value),receive_date:new Date().toISOString().split("T")[0],notes:"",warehouse_outlet_id:(f=(m=d.value)==null?void 0:m.do)!=null&&f.warehouse_outlet_id?Number(d.value.do.warehouse_outlet_id):null,items:v.map(n=>({item_id:Number(n.item_id),qty:Number(n.qty_packing_list),unit_id:Number(n.unit_id),received_qty:Number(n.qty_scan)}))};if(!r.delivery_order_id)throw new Error("Delivery Order ID tidak boleh kosong");if(!r.items||r.items.length===0)throw new Error("Items tidak boleh kosong");for(let n=0;n<r.items.length;n++){const g=r.items[n];if(!g.item_id)throw new Error(`Item ${n+1}: Item ID tidak boleh kosong`);if(!g.unit_id)throw new Error(`Item ${n+1}: Unit ID tidak boleh kosong`);if(g.received_qty<0)throw new Error(`Item ${n+1}: Received Qty tidak boleh negatif`);if(typeof g.item_id!="number")throw new Error(`Item ${n+1}: Item ID harus berupa angka`);if(typeof g.unit_id!="number")throw new Error(`Item ${n+1}: Unit ID harus berupa angka`);if(typeof g.received_qty!="number")throw new Error(`Item ${n+1}: Received Qty harus berupa angka`)}const u=await K.post("/outlet-food-good-receives",r);E.value=!1,u.data&&u.data.success?(await N.fire({icon:"success",title:"Berhasil!",text:"Good Receive berhasil disimpan dan inventory telah diperbarui!",timer:2e3,showConfirmButton:!1}),window.location.href="/outlet-food-good-receives"):await N.fire({icon:"error",title:"Gagal Menyimpan",text:((s=u.data)==null?void 0:s.message)||"Gagal menyimpan Good Receive. Silakan coba lagi.",confirmButtonText:"OK"})}catch(r){let u="Terjadi kesalahan server. Silakan coba lagi.",n="",g=!1;if(r.message&&!r.response)u=r.message,n=`Validation Error: ${r.message}`,g=!0;else if(r.response){const c=r.response.status,i=r.response.data;if(c===422){if(i.message&&(i.message.includes("sudah pernah disubmit")||i.message.includes("sudah pernah dibuat"))){const B=i.duplicate_info||{},me=B.submitted_at?new Date(B.submitted_at).toLocaleString("id-ID"):"Tidak diketahui",Y=B.time_diff||0,U=Math.max(0,30-Y);await N.fire({icon:"warning",title:"Data Duplikasi Terdeteksi",html:`
              <div class="text-left">
                <div class="mb-4">
                  <i class="fas fa-exclamation-triangle text-yellow-500 text-2xl mb-2"></i>
                  <p class="text-lg font-semibold text-gray-800">${i.message}</p>
                </div>
                <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded">
                  <div class="flex">
                    <div class="flex-shrink-0">
                      <i class="fas fa-info-circle text-yellow-400"></i>
                    </div>
                    <div class="ml-3">
                      <p class="text-sm text-yellow-700">
                        <strong>Detail Duplikasi:</strong><br>
                        • Delivery Order: ${((w=(p=d.value)==null?void 0:p.do)==null?void 0:w.do_number)||"N/A"}<br>
                        • Data Sebelumnya: ${B.existing_number||"N/A"}<br>
                        • Waktu Submit Sebelumnya: ${me}<br>
                        • Selisih Waktu: ${Y} detik yang lalu<br>
                        • Tunggu: ${U} detik lagi
                      </p>
                    </div>
                  </div>
                </div>
                <div class="mt-4 text-sm text-gray-600">
                  <strong>Solusi:</strong><br>
                  ${U>0?`1. Tunggu ${U} detik sebelum submit ulang<br>`:""}
                  2. Refresh halaman untuk memulai ulang<br>
                  3. Periksa apakah data sudah tersimpan di halaman Good Receive<br>
                  4. Jika data sudah ada, gunakan fitur Edit untuk mengubah
                </div>
              </div>
            `,showCancelButton:!0,confirmButtonText:"OK, Saya Mengerti",cancelButtonText:"Lihat Data Sebelumnya",confirmButtonColor:"#f59e0b",cancelButtonColor:"#3b82f6",width:"700px",customClass:{popup:"swal-wide"}}).then(be=>{if(be.dismiss===N.DismissReason.cancel){const Z=B.existing_id;Z?window.location.href=`/outlet-food-good-receives/${Z}`:window.location.href="/outlet-food-good-receives"}});return}const G=i.errors;G?u=`Validasi gagal:
• ${Object.values(G).flat().join(`
• `)}`:u=i.message||"Data tidak valid",n=`Status: ${c}
Response: ${JSON.stringify(i,null,2)}`,g=!0}else c===404?(u="Delivery Order tidak ditemukan",n=`Status: ${c}
URL: ${(S=r.config)==null?void 0:S.url}
Response: ${JSON.stringify(i,null,2)}`,g=!0):c===500?(u="Terjadi kesalahan server. Silakan hubungi administrator.",n=`Status: ${c}
Error: ${(i==null?void 0:i.message)||"Unknown server error"}
File: ${(i==null?void 0:i.file)||"Unknown"}
Line: ${(i==null?void 0:i.line)||"Unknown"}
Trace: ${i!=null&&i.trace?i.trace.slice(0,3).join(`
`):"No trace"}`,g=!0):(u=(i==null?void 0:i.message)||`Error ${c}: ${(i==null?void 0:i.error)||"Unknown error"}`,n=`Status: ${c}
Response: ${JSON.stringify(i,null,2)}`,g=!0)}else r.request?(u="Tidak dapat terhubung ke server. Periksa koneksi internet Anda.",n=`Network Error
Request: ${JSON.stringify(r.request,null,2)}`,g=!0):(u=r.message||"Terjadi kesalahan tidak diketahui",n=`Error: ${r.message}
Stack: ${r.stack}`,g=!0);g?await N.fire({icon:"error",title:"Error",html:`
          <div class="text-left">
            <div class="mb-3">
              <strong>Pesan Error:</strong><br>
              ${u.replace(/\n/g,"<br>")}
            </div>
            <details class="text-xs text-gray-600">
              <summary class="cursor-pointer hover:text-gray-800 mb-2">
                <strong>Detail Teknis (Klik untuk melihat)</strong>
              </summary>
              <pre class="bg-gray-100 p-2 rounded text-xs overflow-auto max-h-40">${n}</pre>
            </details>
          </div>
        `,confirmButtonText:"OK",width:"600px",customClass:{popup:"swal-wide"}}):await N.fire({icon:"error",title:"Error",html:u.replace(/\n/g,"<br>"),confirmButtonText:"OK",width:"500px"})}finally{D.value=!1,E.value=!1,document.querySelectorAll('button[onclick*="submitGR"], button[class*="bg-blue-600"]').forEach(u=>{u.disabled=!1,u.style.opacity="1"})}}function de(a){se.value=a,j.value=!1}async function ce(a){if(a.item_id){A.value=!0,P.value=!0;try{const e=await K.get(`/api/items/${a.item_id}/detail`);y.value=e.data.item}catch{y.value={error:"Gagal mengambil data item"}}finally{A.value=!1}}}function H(){P.value=!1,y.value={}}return(a,e)=>(l(),xe(ke,null,{default:X(()=>{var m,f;return[t("div",$e,[e[38]||(e[38]=t("h1",{class:"text-3xl font-bold mb-8 text-blue-800 flex items-center gap-3"},[t("i",{class:"fa-solid fa-barcode text-blue-500"}),_(" Good Receive Outlet (Scan Barang) ")],-1)),t("div",qe,[e[7]||(e[7]=t("label",{class:"font-semibold text-lg"},"No Delivery Order",-1)),V(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>C.value=s),onChange:le,class:"border-2 border-blue-400 rounded-lg px-3 py-2 w-full max-w-xs focus:ring-2 focus:ring-blue-500"},[e[6]||(e[6]=t("option",{value:""},"Pilih Nomor DO...",-1)),(l(!0),o(R,null,F(L.value,s=>(l(),o("option",{key:s.id,value:s.id},b(s.do_date?new Date(s.do_date).toLocaleDateString("id-ID"):"-")+" - "+b(s.division_name||"-")+" - "+b(s.number),9,Se))),128))],544),[[ve,C.value]])]),d.value?(l(),o("div",Ne,[e[14]||(e[14]=t("div",{class:"font-bold text-blue-800 mb-1"},"Info Delivery Order",-1)),t("div",null,[e[8]||(e[8]=t("b",null,"Nomor DO:",-1)),_(" "+b(d.value.do.do_number),1)]),t("div",null,[e[9]||(e[9]=t("b",null,"Tanggal DO:",-1)),_(" "+b(d.value.do.do_created_at?new Date(d.value.do.do_created_at).toLocaleDateString("id-ID"):"-"),1)]),t("div",null,[e[10]||(e[10]=t("b",null,"Nomor Packing:",-1)),_(" "+b(d.value.do.packing_number||"-"),1)]),t("div",null,[e[11]||(e[11]=t("b",null,"Nomor Floor Order:",-1)),_(" "+b(d.value.do.floor_order_number||"-"),1)]),t("div",null,[e[12]||(e[12]=t("b",null,"Tanggal Floor Order:",-1)),_(" "+b(d.value.do.floor_order_date||"-"),1)]),t("div",null,[e[13]||(e[13]=t("b",null,"Warehouse Outlet:",-1)),_(" "+b(d.value.do.warehouse_outlet_name||"-"),1)])])):k("",!0),d.value?(l(),o("div",De,[e[20]||(e[20]=t("div",{class:"font-bold text-green-800 mb-1"},"Info Purchase Order",-1)),d.value.po_info?(l(),o("div",Ie,[t("div",null,[e[15]||(e[15]=t("b",null,"Nomor PO:",-1)),_(" "+b(d.value.po_info.po_number),1)]),t("div",null,[e[16]||(e[16]=t("b",null,"Source Type:",-1)),t("span",{class:J([{"bg-blue-100 text-blue-700":d.value.po_info.source_type_display==="PR Foods","bg-green-100 text-green-700":d.value.po_info.source_type_display==="RO Supplier","bg-gray-100 text-gray-700":d.value.po_info.source_type_display==="Unknown"},"px-2 py-1 rounded-full text-xs font-semibold"])},b(d.value.po_info.source_type_display),3)]),d.value.po_info.outlet_names&&d.value.po_info.outlet_names.length>0?(l(),o("div",Oe,[e[17]||(e[17]=t("b",null,"Outlet:",-1)),t("div",Be,[(l(!0),o(R,null,F(d.value.po_info.outlet_names,s=>(l(),o("span",{key:s,class:"bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full"},b(s),1))),128))])])):d.value.po_info.source_type_display==="PR Foods"?(l(),o("div",Te,e[18]||(e[18]=[t("b",null,"Outlet:",-1),_(),t("span",{class:"text-gray-500 text-sm"},"-",-1)]))):k("",!0)])):(l(),o("div",Ce,e[19]||(e[19]=[t("div",{class:"text-gray-500 text-sm"},"Tidak ada informasi PO",-1)])))])):k("",!0),v.length?(l(),o("div",Ee,[t("table",Re,[e[22]||(e[22]=t("thead",{class:"bg-blue-100"},[t("tr",null,[t("th",{class:"px-2 py-2 text-left text-xs font-bold text-blue-700 uppercase"},"SPS"),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-blue-700 uppercase"},"Nama Item"),t("th",{class:"px-4 py-2 text-right text-xs font-bold text-blue-700 uppercase"},"Qty DO"),t("th",{class:"px-4 py-2 text-left text-xs font-bold text-blue-700 uppercase"},"Unit"),t("th",{class:"px-4 py-2 text-right text-xs font-bold text-blue-700 uppercase"},"Qty Scan"),t("th",{class:"px-4 py-2 text-center text-xs font-bold text-blue-700 uppercase"},"Status")])],-1)),t("tbody",null,[(l(!0),o(R,null,F(v,s=>(l(),o("tr",{key:s.delivery_order_item_id,class:J(ie(s))},[t("td",Fe,[t("button",{type:"button",class:"px-2 py-1 rounded bg-yellow-100 text-yellow-800 text-xs font-semibold hover:bg-yellow-200 border border-yellow-300 flex items-center gap-1",onClick:p=>ce(s),disabled:!s.item_id},e[21]||(e[21]=[t("i",{class:"fa fa-info-circle"},null,-1),_(" SPS ")]),8,Me)]),t("td",Qe,b(s.item_name),1),t("td",Ge,b(s.qty_packing_list),1),t("td",Ke,b(s.unit),1),t("td",Le,b(s.qty_scan),1),t("td",je,[Number(s.qty_scan)===0?(l(),o("span",Pe,"Belum Scan")):Number(s.qty_scan).toFixed(2)===Number(s.qty_packing_list).toFixed(2)?(l(),o("span",Ae,"OK")):Number(s.qty_scan)>Number(s.qty_packing_list)?(l(),o("span",Ue,"Lebih")):(l(),o("span",Ve,"Kurang"))])],2))),128))])])])):k("",!0),v.length?(l(),o("div",Je,[e[23]||(e[23]=t("label",{class:"font-semibold text-lg mb-2"},"Scan Barcode",-1)),V(t("input",{ref_key:"barcodeInput",ref:I,"onUpdate:modelValue":e[1]||(e[1]=s=>q.value=s),onKeyup:_e(oe,["enter"]),class:"border-2 border-blue-400 rounded-lg px-4 py-3 w-full text-xl text-center focus:ring-2 focus:ring-blue-500 shadow-lg",placeholder:"Scan barcode di sini...",autofocus:""},null,544),[[ee,q.value]]),h.value?(l(),o("div",{key:0,class:J([$.value,"mt-4 font-bold text-xl min-h-[32px]"])},b(h.value),3)):k("",!0)])):k("",!0),v.length?(l(),o("button",{key:4,onClick:re,disabled:!ae.value||D.value,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-10 py-4 rounded-2xl font-extrabold text-2xl shadow-xl hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[D.value?(l(),o("i",ze)):(l(),o("i",He)),e[24]||(e[24]=_(" Submit Good Receive "))],8,We)):k("",!0),E.value?(l(),o("div",Ye,[t("div",Ze,[e[26]||(e[26]=t("div",{class:"font-bold text-2xl mb-4 text-blue-700 flex items-center gap-2"},[t("i",{class:"fa-solid fa-truck-arrow-right"}),_(" Konfirmasi Submit")],-1)),e[27]||(e[27]=t("div",{class:"mb-6 text-lg"},"Yakin ingin submit Good Receive ini?",-1)),t("div",Xe,[t("button",{onClick:e[2]||(e[2]=s=>E.value=!1),class:"px-4 py-2 text-gray-700 bg-gray-100 rounded hover:bg-gray-200"},"Batal"),t("button",{onClick:ue,disabled:D.value,class:"px-4 py-2 text-white bg-blue-600 rounded hover:bg-blue-700 font-bold disabled:opacity-50 disabled:cursor-not-allowed"},[D.value?(l(),o("i",tt)):k("",!0),e[25]||(e[25]=_(" Submit "))],8,et)])])])):k("",!0),M.value?(l(),o("div",st,[t("div",at,[e[29]||(e[29]=t("div",{class:"font-bold text-xl mb-4 text-blue-700"},"Input Qty Scan",-1)),t("div",lt,[e[28]||(e[28]=_("Qty DO: ")),t("b",null,b((m=Q.value)==null?void 0:m.qty_packing_list),1)]),V(t("input",{id:"qty-modal-input","onUpdate:modelValue":e[3]||(e[3]=s=>O.value=s),type:"number",min:"0.01",step:"0.01",inputmode:"decimal",max:(f=Q.value)==null?void 0:f.qty_packing_list,class:"w-full border-2 border-blue-400 rounded-lg px-4 py-2 text-xl text-center mb-4",onKeydown:ne},null,40,ot),[[ee,O.value]]),t("div",nt,[t("button",{onClick:e[4]||(e[4]=s=>M.value=!1),class:"px-4 py-2 text-gray-700 bg-gray-100 rounded hover:bg-gray-200"},"Batal"),t("button",{onClick:z,class:"px-4 py-2 text-white bg-blue-600 rounded hover:bg-blue-700 font-bold"},"OK")])])])):k("",!0),j.value?(l(),o("div",it,[t("div",rt,[e[30]||(e[30]=t("div",{class:"font-bold text-xl mb-4 text-blue-700"},"Pilih Alasan Qty Kurang",-1)),t("div",ut,[(l(),o(R,null,F(te,s=>t("button",{key:s,onClick:p=>de(s),class:"w-full px-4 py-2 rounded bg-blue-100 text-blue-800 font-semibold hover:bg-blue-200"},b(s),9,dt)),64))]),t("button",{onClick:e[5]||(e[5]=s=>j.value=!1),class:"px-4 py-2 text-gray-700 bg-gray-100 rounded hover:bg-gray-200 w-full"},"Batal")])])):k("",!0),ye(he,{show:P.value,onClose:H},{default:X(()=>[t("div",ct,[t("div",{class:"flex justify-between items-center mb-2"},[e[32]||(e[32]=t("h2",{class:"text-lg font-bold text-gray-700"},"Detail Item",-1)),t("button",{onClick:H,class:"text-gray-400 hover:text-gray-700"},e[31]||(e[31]=[t("i",{class:"fa fa-times"},null,-1)]))]),A.value?(l(),o("div",mt,e[33]||(e[33]=[t("i",{class:"fa fa-spinner fa-spin text-blue-400 text-2xl"},null,-1)]))):y.value&&!y.value.error?(l(),o("div",bt,[t("div",pt,[e[34]||(e[34]=t("span",{class:"font-semibold"},"Nama:",-1)),_(" "+b(y.value.name),1)]),t("div",ft,[e[35]||(e[35]=t("span",{class:"font-semibold"},"Deskripsi:",-1)),y.value.description?(l(),o("span",gt,b(y.value.description),1)):(l(),o("span",xt,"(Tidak ada deskripsi)"))]),t("div",yt,[e[36]||(e[36]=t("span",{class:"font-semibold"},"Spesifikasi:",-1)),y.value.specification?(l(),o("span",vt,b(y.value.specification),1)):(l(),o("span",_t,"(Tidak ada spesifikasi)"))]),y.value.images&&y.value.images.length?(l(),o("div",kt,[e[37]||(e[37]=t("span",{class:"font-semibold"},"Gambar:",-1)),t("div",ht,[(l(!0),o(R,null,F(y.value.images,s=>(l(),o("img",{key:s.id,src:s.path.startsWith("http")?s.path:"/storage/"+s.path,class:"w-24 h-24 object-contain border rounded bg-white"},null,8,wt))),128))])])):k("",!0)])):y.value&&y.value.error?(l(),o("div",$t,b(y.value.error),1)):k("",!0)])]),_:1},8,["show"])])]}),_:1}))}},Qt=we(qt,[["__scopeId","data-v-19ff2150"]]);export{Qt as default};
