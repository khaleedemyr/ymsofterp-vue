import{$ as w,r as p,w as k,A as y,B as s,C as x,D as e,L as a,E as c,O as A,H as R,F as d,M as v,Q as S,N as i,I as M,W as B}from"./vendor-vue-g7iCcTkf.js";import{A as I}from"./AppLayout-BXpmQkyt.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./app-ErXbte2J.js";import"./vendor-charts-CuqD4wLC.js";import"./ProfileUpdateModal-C0i_S3gs.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const L=["value"],D={key:0,class:"mt-4"},E={key:1,class:"mt-4 text-red-500"},G={key:2,class:"mt-6"},N={class:"font-bold text-lg mb-2"},O={class:"mb-2"},V={key:0},j={class:"review-list"},F={class:"review-header"},P=["src"],W={class:"review-author"},q={class:"review-rating"},H={class:"review-rating-number"},Q={class:"review-date"},T={class:"review-text"},U={__name:"Index",setup($){const m=w(),h=m.props.outlets||[],_=p(""),n=p(!1),u=p(""),o=p(m.props.result||null);k(()=>m.props.result,r=>{o.value=r,n.value=!1});function b(){n.value=!0,u.value="",B.post("/google-review/fetch",{place_id:_.value},{preserveState:!0,onError:r=>{u.value=r.error||"Terjadi kesalahan",n.value=!1}})}function g(){n.value=!0,u.value="",fetch("/scraped-reviews").then(r=>r.json()).then(r=>{r.success?o.value={success:!0,place:{name:"Review Scraper",address:"",rating:""},reviews:r.reviews}:u.value=r.error||"Gagal ambil review scraper",n.value=!1}).catch(()=>{u.value="Gagal ambil review scraper",n.value=!1})}return(r,l)=>(s(),y(I,null,{default:x(()=>[e("div",null,[l[5]||(l[5]=e("h1",null,"Ambil Review Google Maps",-1)),e("form",{onSubmit:A(b,["prevent"])},[R(e("select",{"onUpdate:modelValue":l[0]||(l[0]=t=>_.value=t),class:"input",required:""},[l[1]||(l[1]=e("option",{value:"",disabled:""},"Pilih Outlet",-1)),(s(!0),a(d,null,v(S(h),t=>(s(),a("option",{key:t.id,value:t.place_id},i(t.nama_outlet),9,L))),128))],512),[[M,_.value]]),l[2]||(l[2]=e("button",{type:"submit",class:"btn"},"Ambil Review API",-1)),e("button",{type:"button",class:"btn btn-scraper",onClick:g},"Ambil Review Scraper")],32),n.value?(s(),a("div",D,"Loading...")):c("",!0),u.value?(s(),a("div",E,i(u.value),1)):c("",!0),o.value&&o.value.success?(s(),a("div",G,[e("h2",N,i(o.value.place.name),1),e("div",O,[e("span",null,"Alamat: "+i(o.value.place.address),1),l[3]||(l[3]=e("br",null,null,-1)),o.value.place.rating?(s(),a("span",V,"Rating: "+i(o.value.place.rating),1)):c("",!0)]),l[4]||(l[4]=e("h3",{class:"font-semibold mb-1"},"Review:",-1)),e("div",j,[(s(!0),a(d,null,v(o.value.reviews,t=>(s(),a("div",{key:t.time+t.author,class:"review-card"},[e("div",F,[t.profile_photo?(s(),a("img",{key:0,src:t.profile_photo,alt:"profile",class:"review-avatar"},null,8,P)):c("",!0),e("div",null,[e("span",W,i(t.author),1),e("span",q,[(s(!0),a(d,null,v(Math.floor(t.rating),f=>(s(),a("span",{key:"f"+f,class:"star"},"★"))),128)),(s(!0),a(d,null,v(5-Math.floor(t.rating),f=>(s(),a("span",{key:"e"+f,class:"star star-empty"},"☆"))),128)),e("span",H,"("+i(t.rating)+")",1)]),e("div",Q,i(t.date),1)])]),e("div",T,i(t.text),1)]))),128))])])):c("",!0)])]),_:1}))}},le=C(U,[["__scopeId","data-v-e73fc761"]]);export{le as default};
