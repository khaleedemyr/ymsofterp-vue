import{r as x,W as k,w as R,A as F,B as n,C as W,D as e,x as q,G as B,N as o,l as u,H as S,I as H,J as z,L as p,E as w,F as _,M as L}from"./vendor-vue-g7iCcTkf.js";import{l as J}from"./lodash-DB3HVzpp.js";import{S as m}from"./app-l4d6TH2E.js";import{A as Q}from"./AppLayout-BPJiQqtf.js";import X from"./MasterReportFormModal-DbKkrumG.js";import{a as E}from"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-DspUIAzb.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const Z={class:"max-w-7xl w-full mx-auto py-8 px-2"},ee={class:"flex justify-between items-center mb-6"},te={class:"mb-6"},ae={class:"flex bg-gray-100 rounded-lg p-1 w-fit"},se={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},le=["title"],re={class:"flex items-center justify-between"},oe={class:"text-sm font-medium text-gray-600"},ne={class:"text-2xl font-bold text-gray-900"},ie={class:"bg-blue-100 p-3 rounded-full"},de=["title"],ue={class:"flex items-center justify-between"},pe={class:"text-sm font-medium text-gray-600"},ce={class:"text-2xl font-bold text-gray-900"},xe={class:"text-xs text-gray-500"},me=["title"],fe={class:"flex items-center justify-between"},ve={class:"text-sm font-medium text-gray-600"},ge={class:"text-2xl font-bold text-gray-900"},be={class:"text-xs text-gray-500"},he={class:"mb-4 flex gap-4 items-center"},ye=["placeholder"],ke={class:"bg-white rounded-2xl shadow-lg overflow-x-auto"},we={class:"min-w-full divide-y divide-blue-200"},Ae={class:"bg-blue-600 text-white"},Ce={key:0,class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},$e={class:"px-4 py-2 whitespace-nowrap font-mono text-sm"},Be={class:"px-4 py-2 whitespace-nowrap font-semibold"},Se={key:0,class:"px-4 py-2 whitespace-nowrap"},_e={class:"px-4 py-2 whitespace-nowrap"},Ne={class:"px-4 py-2 whitespace-nowrap text-center"},Me={class:"px-4 py-2 whitespace-nowrap text-center flex gap-2 justify-center"},Te=["onClick"],De=["onClick","title"],je=["onClick"],He={key:0},Le=["colspan"],Ee={class:"mt-4 flex flex-col sm:flex-row justify-between items-center gap-4"},Ve={class:"text-sm text-gray-600"},Pe={key:0,class:"inline-flex -space-x-px"},Ie=["onClick","innerHTML"],Ke=["innerHTML"],Ze={__name:"Index",props:{data:Object,filters:Object,statistics:{type:Object,default:()=>({total:0,active:0,inactive:0})},departemens:Array},setup(r){var M,T,D,j;const g=r,v=x(((M=g.filters)==null?void 0:M.search)||""),b=x(!1),A=x("create"),h=x(null),s=x(((T=g.filters)==null?void 0:T.type)||"departemen"),i=x(((D=g.filters)==null?void 0:D.status)||"A"),f=x(((j=g.filters)==null?void 0:j.per_page)||15),V=J.debounce(()=>{k.get("/master-report",{search:v.value,type:s.value,status:i.value,per_page:f.value},{preserveState:!0,replace:!0})},400);function P(){V()}function I(l){if(l){const t=new URL(l);t.searchParams.set("search",v.value),t.searchParams.set("type",s.value),t.searchParams.set("status",i.value),t.searchParams.set("per_page",f.value),k.visit(t.toString(),{preserveState:!0,replace:!0})}}function K(){A.value="create",h.value=null,b.value=!0}function O(l){A.value="edit",h.value=l,b.value=!0}function N(){b.value=!1,h.value=null}async function U(l){var c,d;const t=s.value==="departemen"?l.nama_departemen:l.nama_area;if((await m.fire({title:"Hapus Data?",text:`Yakin ingin menghapus ${s.value==="departemen"?"departemen":"area"} "${t}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed)try{const y=await E.delete(`/master-report/${l.id}?type=${s.value}`);y.data.success&&(m.fire("Berhasil",y.data.message,"success"),C())}catch(y){m.fire("Error",((d=(c=y.response)==null?void 0:c.data)==null?void 0:d.message)||"Gagal menghapus data","error")}}async function Y(l){const t=l.status==="A"?"menonaktifkan":"mengaktifkan",a=s.value==="departemen"?l.nama_departemen:l.nama_area;if((await m.fire({title:`${l.status==="A"?"Nonaktifkan":"Aktifkan"} Data?`,text:`Yakin ingin ${t} ${s.value==="departemen"?"departemen":"area"} "${a}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:`Ya, ${l.status==="A"?"Nonaktifkan":"Aktifkan"}!`,cancelButtonText:"Batal"})).isConfirmed)try{const d=await E.patch(`/master-report/${l.id}/toggle-status?type=${s.value}`);d.data.success&&(m.fire("Berhasil",d.data.message,"success"),C())}catch{m.fire("Error","Gagal mengubah status data","error")}}function C(){k.reload({preserveState:!0,replace:!0})}function $(l){i.value=l}function G(l){m.fire("Berhasil",l,"success"),C(),N()}return R([s,i,f],()=>{k.get("/master-report",{search:v.value,type:s.value,status:i.value,per_page:f.value},{preserveState:!0,replace:!0})}),(l,t)=>(n(),F(Q,{title:"Master Report"},{default:W(()=>[e("div",Z,[e("div",ee,[t[8]||(t[8]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-chart-line text-blue-500"}),B(" Master Report ")],-1)),e("button",{onClick:K,class:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-2xl transition-all font-semibold"}," + Tambah "+o(s.value==="departemen"?"Departemen":"Area")+" Baru ",1)]),e("div",te,[e("div",ae,[e("button",{onClick:t[0]||(t[0]=a=>s.value="departemen"),class:u(["px-4 py-2 rounded-md font-medium transition-all",s.value==="departemen"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"])},t[9]||(t[9]=[e("i",{class:"fa-solid fa-building mr-2"},null,-1),B("Departemen ")]),2),e("button",{onClick:t[1]||(t[1]=a=>s.value="area"),class:u(["px-4 py-2 rounded-md font-medium transition-all",s.value==="area"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"])},t[10]||(t[10]=[e("i",{class:"fa-solid fa-map-marker-alt mr-2"},null,-1),B("Area ")]),2)])]),e("div",se,[e("div",{class:u(["rounded-xl shadow-lg p-6 border-l-4 cursor-pointer transition-all relative",i.value==="all"?"bg-blue-50 border-blue-500 shadow-xl":"bg-white border-blue-500 hover:shadow-xl"]),onClick:t[2]||(t[2]=a=>$("all")),title:`Klik untuk melihat semua ${s.value==="departemen"?"departemen":"area"}`},[e("div",re,[e("div",null,[e("p",oe,"Total "+o(s.value==="departemen"?"Departemen":"Area"),1),e("p",ne,o(r.statistics.total),1),t[11]||(t[11]=e("p",{class:"text-xs text-gray-500"},"100% dari total",-1))]),e("div",ie,[e("i",{class:u(s.value==="departemen"?"fa-solid fa-building text-blue-600 text-xl":"fa-solid fa-map-marker-alt text-blue-600 text-xl")},null,2)])]),t[12]||(t[12]=e("div",{class:"absolute top-2 right-2 text-xs text-gray-400"},[e("i",{class:"fa-solid fa-mouse-pointer"})],-1))],10,le),e("div",{class:u(["rounded-xl shadow-lg p-6 border-l-4 cursor-pointer transition-all relative",i.value==="A"?"bg-green-50 border-green-500 shadow-xl":"bg-white border-green-500 hover:shadow-xl"]),onClick:t[3]||(t[3]=a=>$("A")),title:`Klik untuk melihat ${s.value==="departemen"?"departemen":"area"} aktif`},[e("div",ue,[e("div",null,[e("p",pe,o(s.value==="departemen"?"Departemen":"Area")+" Aktif",1),e("p",ce,o(r.statistics.active),1),e("p",xe,o(r.statistics.total>0?Math.round(r.statistics.active/r.statistics.total*100):0)+"% dari total",1)]),t[13]||(t[13]=e("div",{class:"bg-green-100 p-3 rounded-full"},[e("i",{class:"fa-solid fa-check-circle text-green-600 text-xl"})],-1))]),t[14]||(t[14]=e("div",{class:"absolute top-2 right-2 text-xs text-gray-400"},[e("i",{class:"fa-solid fa-mouse-pointer"})],-1))],10,de),e("div",{class:u(["rounded-xl shadow-lg p-6 border-l-4 cursor-pointer transition-all relative",i.value==="N"?"bg-red-50 border-red-500 shadow-xl":"bg-white border-red-500 hover:shadow-xl"]),onClick:t[4]||(t[4]=a=>$("N")),title:`Klik untuk melihat ${s.value==="departemen"?"departemen":"area"} non-aktif`},[e("div",fe,[e("div",null,[e("p",ve,o(s.value==="departemen"?"Departemen":"Area")+" Non-Aktif",1),e("p",ge,o(r.statistics.inactive),1),e("p",be,o(r.statistics.total>0?Math.round(r.statistics.inactive/r.statistics.total*100):0)+"% dari total",1)]),t[15]||(t[15]=e("div",{class:"bg-red-100 p-3 rounded-full"},[e("i",{class:"fa-solid fa-times-circle text-red-600 text-xl"})],-1))]),t[16]||(t[16]=e("div",{class:"absolute top-2 right-2 text-xs text-gray-400"},[e("i",{class:"fa-solid fa-mouse-pointer"})],-1))],10,me)]),e("div",he,[S(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>i.value=a),class:"form-input rounded-xl"},t[17]||(t[17]=[e("option",{value:"A"},"Aktif",-1),e("option",{value:"N"},"Non-Aktif",-1),e("option",{value:"all"},"Semua Status",-1)]),512),[[H,i.value]]),S(e("select",{"onUpdate:modelValue":t[6]||(t[6]=a=>f.value=a),class:"form-input rounded-xl"},t[18]||(t[18]=[e("option",{value:"10"},"10 per halaman",-1),e("option",{value:"15"},"15 per halaman",-1),e("option",{value:"25"},"25 per halaman",-1),e("option",{value:"50"},"50 per halaman",-1),e("option",{value:"100"},"100 per halaman",-1)]),512),[[H,f.value]]),S(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>v.value=a),onInput:P,type:"text",placeholder:`Cari ${s.value==="departemen"?"nama departemen, kode departemen, deskripsi...":"nama area, kode area, departemen, deskripsi..."}`,class:"flex-1 px-4 py-2 rounded-xl border border-blue-200 shadow focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"},null,40,ye),[[z,v.value]])]),e("div",ke,[e("table",we,[e("thead",Ae,[e("tr",null,[t[19]||(t[19]=e("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Kode",-1)),t[20]||(t[20]=e("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Nama",-1)),s.value==="area"?(n(),p("th",Ce,"Departemen")):w("",!0),t[21]||(t[21]=e("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider"},"Deskripsi",-1)),t[22]||(t[22]=e("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Status",-1)),t[23]||(t[23]=e("th",{class:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider"},"Aksi",-1))])]),e("tbody",null,[(n(!0),p(_,null,L(r.data.data,a=>{var c;return n(),p("tr",{key:a.id,class:"hover:bg-blue-50 transition"},[e("td",$e,o(s.value==="departemen"?a.kode_departemen:a.kode_area),1),e("td",Be,o(s.value==="departemen"?a.nama_departemen:a.nama_area),1),s.value==="area"?(n(),p("td",Se,o(((c=a.departemen)==null?void 0:c.nama_departemen)||"-"),1)):w("",!0),e("td",_e,o(a.deskripsi||"-"),1),e("td",Ne,[e("span",{class:u(["px-2 py-1 rounded-full text-xs font-semibold",a.status==="A"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},o(a.status==="A"?"Aktif":"Non-Aktif"),3)]),e("td",Me,[e("button",{onClick:d=>O(a),class:"px-2 py-1 rounded bg-yellow-200 text-yellow-900 hover:bg-yellow-300 transition",title:"Edit"},t[24]||(t[24]=[e("i",{class:"fa-solid fa-pen-to-square"},null,-1)]),8,Te),e("button",{onClick:d=>Y(a),class:u(["px-2 py-1 rounded transition",a.status==="A"?"bg-red-500 text-white hover:bg-red-600":"bg-green-500 text-white hover:bg-green-600"]),title:a.status==="A"?"Nonaktifkan":"Aktifkan"},[e("i",{class:u(a.status==="A"?"fa-solid fa-times":"fa-solid fa-check")},null,2)],10,De),e("button",{onClick:d=>U(a),class:"px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 transition",title:"Hapus"},t[25]||(t[25]=[e("i",{class:"fa-solid fa-trash"},null,-1)]),8,je)])])}),128)),r.data.data.length===0?(n(),p("tr",He,[e("td",{colspan:s.value==="area"?6:5,class:"text-center py-8 text-gray-400"}," Tidak ada data "+o(s.value==="departemen"?"departemen":"area"),9,Le)])):w("",!0)])])]),e("div",Ee,[e("div",Ve," Menampilkan "+o(r.data.from||0)+" sampai "+o(r.data.to||0)+" dari "+o(r.data.total||0)+" "+o(s.value==="departemen"?"departemen":"area"),1),r.data.links&&r.data.links.length>3?(n(),p("nav",Pe,[(n(!0),p(_,null,L(r.data.links,(a,c)=>(n(),p(_,{key:c},[a.url?(n(),p("button",{key:0,onClick:d=>I(a.url),class:u(["px-3 py-2 text-sm border border-gray-300 transition-colors",a.active?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 hover:bg-gray-50 border-gray-300"]),innerHTML:a.label},null,10,Ie)):(n(),p("span",{key:1,class:"px-3 py-2 text-sm border border-gray-200 text-gray-400 bg-gray-50",innerHTML:a.label},null,8,Ke))],64))),128))])):w("",!0)])]),q(X,{show:b.value,mode:A.value,item:h.value,type:s.value,departemens:r.departemens,onClose:N,onSuccess:G},null,8,["show","mode","item","type","departemens"])]),_:1}))}};export{Ze as default};
