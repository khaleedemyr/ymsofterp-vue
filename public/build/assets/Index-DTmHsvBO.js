import{r as m,w as L,W as N,c as k,A as C,B as o,C as W,D as t,H as f,L as i,F as y,M as w,N as n,I as V,J as v,G as B,E as p}from"./vendor-vue-g7iCcTkf.js";import{A as P}from"./AppLayout-DkG6xw-a.js";import"./vendor-utils-CpgP2uT4.js";import"./app-5ZP5W-3z.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-COEZdPkp.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const U={class:"w-full min-h-screen py-8 px-2 md:px-6"},E={class:"flex flex-col md:flex-row md:items-center gap-4 mb-4"},G={class:"flex items-center gap-2"},M=["value"],O={class:"flex items-center gap-2"},T={class:"flex items-center gap-2"},j=["disabled"],H={key:0,class:"animate-spin mr-2"},K={key:1,class:"mr-2"},R={class:"bg-white rounded-xl shadow-lg overflow-x-auto mb-8"},J={class:"min-w-full border border-gray-300 border-collapse divide-y divide-gray-200 mt-2"},q={class:"bg-white divide-y divide-gray-200"},z=["rowspan"],Q=["rowspan"],X=["rowspan"],Y=["rowspan"],Z=["rowspan"],$=["rowspan"],tt=["rowspan"],et={class:"px-4 py-3 whitespace-nowrap text-sm border border-gray-300"},rt={class:"px-4 py-3 whitespace-nowrap text-sm text-right border border-gray-300"},st={class:"px-4 py-3 whitespace-nowrap text-sm text-right border border-gray-300"},at={class:"px-4 py-3 whitespace-nowrap text-sm text-right border border-gray-300"},ot={class:"px-4 py-3 whitespace-nowrap text-sm text-right border border-gray-300"},mt={__name:"Index",props:{analisis:Array,tren:Array,warehouses:Array,filters:Object},setup(_){const c=_,u=m(c.filters.warehouse_id||""),x=m(c.filters.from||""),g=m(c.filters.to||""),h=m(!1);L([u,x,g],()=>{N.get(route("butcher-processes.analysis-report"),{warehouse_id:u.value,from:x.value,to:g.value},{preserveState:!0,preserveScroll:!0,replace:!0})});const D=k(()=>{let a=c.analisis;return u.value&&(a=a.filter(e=>{var r;return e.warehouse===((r=c.warehouses.find(l=>l.id==u.value))==null?void 0:r.name)})),a});function S(a){return a?new Date(a).toLocaleDateString("id-ID"):"-"}function b(a){return a==null?"-":Number(a)%1===0?Number(a):Number(a).toLocaleString("id-ID",{minimumFractionDigits:0,maximumFractionDigits:2})}function A(a){return a==null?"-":"Rp "+Number(a).toLocaleString("id-ID",{minimumFractionDigits:0,maximumFractionDigits:2})}const I=k(()=>{const a=[];let e=null,r=null;return D.value.forEach(l=>{const s=[l.tanggal,l.warehouse,l.item_whole,l.input_whole,l.susut_air,l.susut_air_unit].join("|");s!==e?(r&&a.push(r),r={key:s,rows:[l]},e=s):r.rows.push(l)}),r&&a.push(r),a});function F(){h.value=!0,window.location.reload()}return(a,e)=>(o(),C(P,null,{default:W(()=>[t("div",U,[e[12]||(e[12]=t("h1",{class:"text-2xl font-bold mb-6"},"Laporan Analisis Pemotongan",-1)),t("div",E,[t("div",G,[e[4]||(e[4]=t("label",{class:"text-sm"},"Warehouse",-1)),f(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>u.value=r),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},[e[3]||(e[3]=t("option",{value:""},"Semua Warehouse",-1)),(o(!0),i(y,null,w(_.warehouses,r=>(o(),i("option",{key:r.id,value:r.id},n(r.name),9,M))),128))],512),[[V,u.value]])]),t("div",O,[e[5]||(e[5]=t("label",{class:"text-sm"},"Dari",-1)),f(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=r=>x.value=r),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[v,x.value]])]),t("div",T,[e[6]||(e[6]=t("label",{class:"text-sm"},"Sampai",-1)),f(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=r=>g.value=r),class:"border border-gray-300 rounded-lg px-2 py-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[v,g.value]])]),t("button",{onClick:F,disabled:h.value,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-700"},[h.value?(o(),i("span",H,e[7]||(e[7]=[t("i",{class:"fas fa-spinner"},null,-1)]))):(o(),i("span",K,e[8]||(e[8]=[t("i",{class:"fas fa-sync-alt"},null,-1)]))),e[9]||(e[9]=B(" Load Data "))],8,j)]),t("div",R,[e[11]||(e[11]=t("h2",{class:"text-lg font-bold px-4 pt-4"},"Analisis Per Proses/Item",-1)),t("table",J,[e[10]||(e[10]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider border border-gray-300"},"Tanggal"),t("th",{class:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider border border-gray-300"},"Warehouse"),t("th",{class:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider border border-gray-300"},"Item Whole"),t("th",{class:"px-4 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider border border-gray-300"},"Input Whole"),t("th",{class:"px-4 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider border border-gray-300"},"Susut Air"),t("th",{class:"px-4 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider border border-gray-300"},"Susut Air (%)"),t("th",{class:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider border border-gray-300"},"Unit Susut"),t("th",{class:"px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider border border-gray-300"},"Item PCS"),t("th",{class:"px-4 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider border border-gray-300"},"Output PCS"),t("th",{class:"px-4 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider border border-gray-300"},"Output KG"),t("th",{class:"px-4 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider border border-gray-300"},"Efisiensi (%)"),t("th",{class:"px-4 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider border border-gray-300"},"Cost/Unit Hasil")])],-1)),t("tbody",q,[(o(!0),i(y,null,w(I.value,(r,l)=>(o(),i(y,{key:r.key},[(o(!0),i(y,null,w(r.rows,(s,d)=>(o(),i("tr",{key:r.key+"-"+d,class:"hover:bg-gray-50 transition"},[d===0?(o(),i("td",{key:0,rowspan:r.rows.length,class:"px-4 py-3 whitespace-nowrap text-sm border border-gray-300"},n(S(s.tanggal)),9,z)):p("",!0),d===0?(o(),i("td",{key:1,rowspan:r.rows.length,class:"px-4 py-3 whitespace-nowrap text-sm border border-gray-300"},n(s.warehouse),9,Q)):p("",!0),d===0?(o(),i("td",{key:2,rowspan:r.rows.length,class:"px-4 py-3 whitespace-nowrap text-sm border border-gray-300"},n(s.item_whole),9,X)):p("",!0),d===0?(o(),i("td",{key:3,rowspan:r.rows.length,class:"px-4 py-3 whitespace-nowrap text-sm text-right border border-gray-300"},n(b(s.input_whole)),9,Y)):p("",!0),d===0?(o(),i("td",{key:4,rowspan:r.rows.length,class:"px-4 py-3 whitespace-nowrap text-sm text-right border border-gray-300"},n(b(s.susut_air)),9,Z)):p("",!0),d===0?(o(),i("td",{key:5,rowspan:r.rows.length,class:"px-4 py-3 whitespace-nowrap text-sm text-right border border-gray-300"},n(s.input_whole&&s.susut_air?(s.susut_air/s.input_whole*100).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"),9,$)):p("",!0),d===0?(o(),i("td",{key:6,rowspan:r.rows.length,class:"px-4 py-3 whitespace-nowrap text-sm border border-gray-300"},n(s.susut_air_unit||"-"),9,tt)):p("",!0),t("td",et,n(s.item_pcs),1),t("td",rt,n(b(s.output_pcs)),1),t("td",st,n(b(s.output_kg)),1),t("td",at,n(s.input_whole>0?(s.output_kg/s.input_whole*100).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"),1),t("td",ot,n(A(s.cost_per_unit)),1)]))),128))],64))),128))])])])])]),_:1}))}};export{mt as default};
