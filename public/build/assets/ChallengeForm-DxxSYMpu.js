import{c as me,r as U,w as pe,A as be,B as r,C as d,D as l,G as A,N as m,O as C,L as i,E as n,H as u,F as se,M as re,I as V,J as p,x as y,Q as x,a6 as _,V as h,W as ue}from"./vendor-vue-g7iCcTkf.js";import{A as ve}from"./AppLayout-D6FAfGlz.js";import{a as ge}from"./vendor-utils-CpgP2uT4.js";import{s as w}from"./vue-multiselect.esm-V-bx43V9.js";/* empty css                            */import"./app-dzBjFUgD.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CUUHZNnG.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const ye={class:"max-w-4xl mx-auto py-8 px-2"},xe={class:"flex justify-between items-center mb-6"},we={class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},fe={class:"bg-white rounded-lg shadow p-6"},ke={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_e=["value"],ce={class:"mt-4"},he={key:0,class:"bg-white rounded-lg shadow p-6"},Ve={key:0,class:"space-y-4"},Pe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ue={key:0},Ae={key:0,class:"mt-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200"},Ce={class:"space-y-2"},Te={class:"flex items-center cursor-pointer"},Me={class:"flex items-center cursor-pointer"},Re={key:1},Se={key:2},qe={key:0,class:"text-gray-500 text-sm ml-2"},Ie={key:0,class:"text-gray-500 text-sm ml-2"},Oe={class:"multiselect__tag"},Be=["onClick"],De={class:"flex items-center"},Ne={class:"mt-4 p-4 bg-gray-50 rounded-lg"},Ee={class:"space-y-2"},je={class:"flex items-center"},Le={key:0},Fe={key:3,class:"mt-4 p-4 bg-blue-50 rounded-lg"},Je={class:"space-y-2"},$e={class:"flex items-center"},Qe={key:0},We={key:1,class:"space-y-4"},ze={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ge={key:0},He={key:0,class:"mt-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200"},Ke={class:"space-y-2"},Xe={class:"flex items-center cursor-pointer"},Ye={class:"flex items-center cursor-pointer"},Ze={key:1},el={key:2,class:"space-y-4"},ll={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},tl={key:0},al={key:0,class:"mt-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200"},sl={class:"space-y-2"},rl={class:"flex items-center cursor-pointer"},ul={class:"flex items-center cursor-pointer"},il={key:1},ol={key:2},dl={key:0,class:"text-gray-500 text-sm ml-2"},nl={key:0,class:"text-gray-500 text-sm ml-2"},ml={class:"multiselect__tag"},pl=["onClick"],bl={class:"bg-white rounded-lg shadow p-6"},vl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},gl={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},yl={class:"flex items-center"},xl={class:"bg-white rounded-lg shadow p-6"},wl={class:"space-y-2"},fl={class:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-40 overflow-y-auto border rounded p-2"},kl=["value"],_l={class:"ml-2 text-sm text-gray-700"},cl={class:"flex justify-end space-x-4"},hl=["disabled"],Vl={key:0},Pl={key:1},Nl={__name:"ChallengeForm",props:{challengeTypes:{type:Array,default:()=>[]},challengeItems:{type:Array,default:()=>[]},vouchers:{type:Array,default:()=>[]},outlets:{type:Array,default:()=>[]},challenge:{type:Object,default:null}},setup(v){var S,q,I,O,B,D,N,E,j,L,F,J,$,Q,W,z,G,H,K,X;const o=v,f=me(()=>!!o.challenge),T=s=>{if(!s||!s.reward_type)return null;if(s.reward_type==="points")return typeof s.reward_value=="number"?s.reward_value:parseInt(s.reward_value)||0;if(s.reward_type==="item"||s.reward_type==="voucher"){if(Array.isArray(s.reward_value))return s.reward_value;if(s.reward_value){if(s.reward_type==="item"){const e=o.challengeItems.find(t=>t.id==s.reward_value||t.name===s.reward_value);return e?[e]:[]}else if(s.reward_type==="voucher"){const e=o.vouchers.find(t=>t.id==s.reward_value||t.name===s.reward_value);return e?[e]:[]}}return[]}return null},a=U({challenge_type_id:((S=o.challenge)==null?void 0:S.challenge_type_id)||"",name:((q=o.challenge)==null?void 0:q.name)||"",description:((I=o.challenge)==null?void 0:I.description)||"",rules:(O=o.challenge)!=null&&O.rules?{...o.challenge.rules,reward_value:T(o.challenge.rules),challenge_all_outlets:((D=(B=o.challenge)==null?void 0:B.rules)==null?void 0:D.challenge_all_outlets)??!0,challenge_outlet_ids:((E=(N=o.challenge)==null?void 0:N.rules)==null?void 0:E.challenge_outlet_ids)||[],reward_all_outlets:((L=(j=o.challenge)==null?void 0:j.rules)==null?void 0:L.reward_all_outlets)??!0,reward_outlet_ids:((J=(F=o.challenge)==null?void 0:F.rules)==null?void 0:J.reward_outlet_ids)||[],reward_item_selection:((Q=($=o.challenge)==null?void 0:$.rules)==null?void 0:Q.reward_item_selection)||"all"}:{challenge_all_outlets:!0,challenge_outlet_ids:[],reward_all_outlets:!0,reward_outlet_ids:[],reward_item_selection:"all"},validity_period_days:((W=o.challenge)==null?void 0:W.validity_period_days)||30,start_date:((z=o.challenge)==null?void 0:z.start_date)||"",end_date:((G=o.challenge)==null?void 0:G.end_date)||"",is_active:((H=o.challenge)==null?void 0:H.is_active)??!0,outlet_ids:((X=(K=o.challenge)==null?void 0:K.outlets)==null?void 0:X.map(s=>s.id))||[]}),c=U(!1),k=U(null);function M(){if(a.value.challenge_type_id){const s=o.challengeTypes.find(e=>e.id==a.value.challenge_type_id);k.value=s,f.value?a.value.rules={...a.value.rules,reward_value:T(a.value.rules)}:a.value.rules={},ie()}else k.value=null}pe(()=>{var s;return(s=a.value.rules)==null?void 0:s.reward_type},(s,e)=>{s!==e&&(s==="points"?a.value.rules.reward_value=0:(s==="item"||s==="voucher")&&(a.value.rules.reward_value=[]))});async function ie(){try{const s=await ge.get(route("api.challenge-items"))}catch(s){console.error("Error loading challenge items:",s)}}function oe(){var Y,Z,ee,le,te,ae;c.value=!0;const s={...a.value};(Y=s.rules)!=null&&Y.reward_type&&((Z=s.rules)!=null&&Z.reward_value)&&(s.rules.reward_type==="item"||s.rules.reward_type==="voucher"?Array.isArray(s.rules.reward_value)&&(s.rules.reward_value=s.rules.reward_value.map(b=>typeof b=="object"?b.id:b)):s.rules.reward_type==="points"&&(s.rules.reward_value=parseInt(s.rules.reward_value)||0));let e=[];const t=((ee=s.rules)==null?void 0:ee.challenge_all_outlets)??!0;(le=s.rules)!=null&&le.challenge_outlet_ids&&Array.isArray(s.rules.challenge_outlet_ids)&&(e=s.rules.challenge_outlet_ids.map(b=>typeof b=="object"?b.id:b),s.rules.challenge_outlet_ids=e),(te=s.rules)!=null&&te.reward_outlet_ids&&Array.isArray(s.rules.reward_outlet_ids)&&(s.rules.reward_outlet_ids=s.rules.reward_outlet_ids.map(b=>typeof b=="object"?b.id:b)),((ae=s.rules)==null?void 0:ae.reward_type)==="item"&&Array.isArray(s.rules.reward_value)&&s.rules.reward_value.length>1&&!s.rules.reward_item_selection&&(s.rules.reward_item_selection="all"),s.rules&&(s.rules=JSON.stringify(s.rules)),t?s.challenge_outlet_ids=[]:s.challenge_outlet_ids=e;const g=f.value?route("challenges.update",o.challenge.id):route("challenges.store"),P=f.value?"put":"post";ue[P](g,s,{onSuccess:()=>{c.value=!1},onError:()=>{c.value=!1}})}function R(){ue.visit(route("challenges.index"))}function de(){a.value.rules.challenge_all_outlets&&(a.value.rules.challenge_outlet_ids=[])}function ne(s,e){a.value.rules.reward_all_outlets&&(a.value.rules.reward_outlet_ids=[])}return f.value&&M(),(s,e)=>(r(),be(ve,null,{default:d(()=>[l("div",ye,[l("div",xe,[l("h1",we,[e[37]||(e[37]=l("i",{class:"fa-solid fa-trophy text-yellow-500"},null,-1)),A(" "+m(f.value?"Edit Challenge":"Tambah Challenge"),1)]),l("button",{onClick:R,class:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg"},e[38]||(e[38]=[l("i",{class:"fa-solid fa-arrow-left mr-2"},null,-1),A("Kembali ")]))]),l("form",{onSubmit:C(oe,["prevent"]),class:"space-y-6"},[l("div",fe,[e[43]||(e[43]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Informasi Dasar",-1)),l("div",ke,[l("div",null,[e[40]||(e[40]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Challenge Type *",-1)),u(l("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.challenge_type_id=t),onChange:M,class:"form-select w-full rounded border px-3 py-2",required:""},[e[39]||(e[39]=l("option",{value:""},"Pilih Challenge Type",-1)),(r(!0),i(se,null,re(v.challengeTypes,t=>(r(),i("option",{key:t.id,value:t.id},m(t.name),9,_e))),128))],544),[[V,a.value.challenge_type_id]])]),l("div",null,[e[41]||(e[41]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nama Challenge *",-1)),u(l("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.name=t),type:"text",class:"form-input w-full rounded border px-3 py-2",placeholder:"Masukkan nama challenge",required:""},null,512),[[p,a.value.name]])])]),l("div",ce,[e[42]||(e[42]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Deskripsi",-1)),u(l("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.description=t),class:"form-textarea w-full rounded border px-3 py-2",rows:"3",placeholder:"Deskripsi challenge..."},null,512),[[p,a.value.description]])])]),k.value?(r(),i("div",he,[e[104]||(e[104]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Challenge Rules",-1)),k.value.name==="Spending-based"?(r(),i("div",Ve,[l("div",Pe,[l("div",null,[e[44]||(e[44]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Minimum Spending (IDR) *",-1)),u(l("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.rules.min_amount=t),type:"number",class:"form-input w-full rounded border px-3 py-2",placeholder:"300000",required:""},null,512),[[p,a.value.rules.min_amount]])]),l("div",null,[e[46]||(e[46]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Reward Type *",-1)),u(l("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.rules.reward_type=t),class:"form-select w-full rounded border px-3 py-2",required:""},e[45]||(e[45]=[l("option",{value:""},"Pilih Reward Type",-1),l("option",{value:"item"},"Item",-1),l("option",{value:"points"},"Points",-1),l("option",{value:"voucher"},"Voucher",-1)]),512),[[V,a.value.rules.reward_type]])])]),a.value.rules.reward_type==="item"?(r(),i("div",Ue,[e[53]||(e[53]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pilih Items (Bisa Multiple) *",-1)),y(x(w),{modelValue:a.value.rules.reward_value,"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.rules.reward_value=t),options:v.challengeItems||[],multiple:!0,searchable:!0,"close-on-select":!1,"show-labels":!1,placeholder:"Pilih Items (bisa lebih dari satu)",label:"name","track-by":"id",class:"mt-1",required:""},{noOptions:d(()=>e[47]||(e[47]=[l("span",null,"Tidak ada item ditemukan",-1)])),noResult:d(()=>e[48]||(e[48]=[l("span",null,"Tidak ada item ditemukan",-1)])),_:1},8,["modelValue","options"]),e[54]||(e[54]=l("p",{class:"mt-1 text-xs text-gray-500"},"Anda bisa memilih lebih dari satu item",-1)),Array.isArray(a.value.rules.reward_value)&&a.value.rules.reward_value.length>1?(r(),i("div",Ae,[e[51]||(e[51]=l("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Mode Pemberian Reward *",-1)),e[52]||(e[52]=l("p",{class:"text-xs text-gray-600 mb-3"},"Pilih bagaimana reward akan diberikan kepada member:",-1)),l("div",Ce,[l("label",Te,[u(l("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>a.value.rules.reward_item_selection=t),type:"radio",value:"all",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[_,a.value.rules.reward_item_selection]]),e[49]||(e[49]=l("div",{class:"ml-3"},[l("span",{class:"text-sm font-medium text-gray-700"},"Semua Item (All)"),l("p",{class:"text-xs text-gray-500"},"Member akan mendapatkan semua item reward yang dipilih")],-1))]),l("label",Me,[u(l("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>a.value.rules.reward_item_selection=t),type:"radio",value:"single",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[_,a.value.rules.reward_item_selection]]),e[50]||(e[50]=l("div",{class:"ml-3"},[l("span",{class:"text-sm font-medium text-gray-700"},"Pilih Salah Satu (Single)"),l("p",{class:"text-xs text-gray-500"},"Member hanya bisa memilih salah satu item reward saat claim")],-1))])])])):n("",!0)])):a.value.rules.reward_type==="points"?(r(),i("div",Re,[e[55]||(e[55]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Points Amount *",-1)),u(l("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>a.value.rules.reward_value=t),type:"number",class:"form-input w-full rounded border px-3 py-2",placeholder:"100",min:"0",required:""},null,512),[[p,a.value.rules.reward_value]])])):a.value.rules.reward_type==="voucher"?(r(),i("div",Se,[e[58]||(e[58]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pilih Vouchers (Bisa Multiple) *",-1)),y(x(w),{modelValue:a.value.rules.reward_value,"onUpdate:modelValue":e[9]||(e[9]=t=>a.value.rules.reward_value=t),options:v.vouchers||[],multiple:!0,searchable:!0,"close-on-select":!1,"show-labels":!1,placeholder:"Pilih Vouchers (bisa lebih dari satu)",label:"name","track-by":"id",class:"mt-1",required:""},{option:d(({option:t})=>[l("div",null,[l("strong",null,m(t.name),1),t.code?(r(),i("span",qe,"("+m(t.code)+")",1)):n("",!0)])]),singleLabel:d(({option:t})=>[l("strong",null,m(t.name),1),t.code?(r(),i("span",Ie,"("+m(t.code)+")",1)):n("",!0)]),tag:d(({option:t,remove:g})=>[l("span",Oe,[l("span",null,m(t.name),1),l("i",{class:"multiselect__tag-icon",onClick:C(P=>g(t),["prevent"])},null,8,Be)])]),noOptions:d(()=>e[56]||(e[56]=[l("span",null,"Tidak ada voucher ditemukan",-1)])),noResult:d(()=>e[57]||(e[57]=[l("span",null,"Tidak ada voucher ditemukan",-1)])),_:1},8,["modelValue","options"])])):n("",!0),l("div",De,[u(l("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>a.value.rules.immediate=t),type:"checkbox",class:"form-checkbox h-4 w-4 text-blue-600"},null,512),[[h,a.value.rules.immediate]]),e[59]||(e[59]=l("label",{class:"ml-2 text-sm text-gray-700"},"Reward langsung diberikan",-1))]),l("div",Ne,[e[65]||(e[65]=l("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Challenge Outlet Scope",-1)),e[66]||(e[66]=l("p",{class:"text-sm text-gray-600 mb-3"},"Tentukan di outlet mana challenge ini berlaku. Jika tidak dipilih, challenge berlaku di semua outlet.",-1)),l("div",Ee,[l("div",je,[u(l("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>a.value.rules.challenge_all_outlets=t),onChange:de,type:"checkbox",id:"challenge_all_outlets_spending",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,544),[[h,a.value.rules.challenge_all_outlets]]),e[60]||(e[60]=l("label",{for:"challenge_all_outlets_spending",class:"ml-2 text-sm text-gray-700"},"Semua Outlet",-1))]),a.value.rules.challenge_all_outlets?n("",!0):(r(),i("div",Le,[e[63]||(e[63]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pilih Outlet Challenge",-1)),y(x(w),{modelValue:a.value.rules.challenge_outlet_ids,"onUpdate:modelValue":e[12]||(e[12]=t=>a.value.rules.challenge_outlet_ids=t),options:v.outlets,searchable:!0,"clear-on-select":!1,"close-on-select":!1,multiple:!0,"show-labels":!1,placeholder:"Pilih outlet (kosongkan untuk semua outlet)",label:"name","track-by":"id",class:"mt-1"},{noOptions:d(()=>e[61]||(e[61]=[l("span",null,"Tidak ada outlet ditemukan",-1)])),noResult:d(()=>e[62]||(e[62]=[l("span",null,"Tidak ada outlet ditemukan",-1)])),_:1},8,["modelValue","options"]),e[64]||(e[64]=l("p",{class:"mt-1 text-xs text-gray-500"},"Challenge hanya akan berlaku di outlet yang dipilih",-1))]))])]),a.value.rules.reward_type==="item"||a.value.rules.reward_type==="voucher"?(r(),i("div",Fe,[e[72]||(e[72]=l("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Reward Outlet Scope",-1)),e[73]||(e[73]=l("p",{class:"text-sm text-gray-600 mb-3"},"Tentukan di outlet mana reward bisa ditebus. Bisa berbeda dengan challenge outlet scope.",-1)),l("div",Je,[l("div",$e,[u(l("input",{"onUpdate:modelValue":e[13]||(e[13]=t=>a.value.rules.reward_all_outlets=t),onChange:e[14]||(e[14]=t=>ne("spending",a.value.rules.reward_type)),type:"checkbox",id:"reward_all_outlets_spending",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,544),[[h,a.value.rules.reward_all_outlets]]),e[67]||(e[67]=l("label",{for:"reward_all_outlets_spending",class:"ml-2 text-sm text-gray-700"},"Semua Outlet",-1))]),a.value.rules.reward_all_outlets?n("",!0):(r(),i("div",Qe,[e[70]||(e[70]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pilih Outlet Reward",-1)),y(x(w),{modelValue:a.value.rules.reward_outlet_ids,"onUpdate:modelValue":e[15]||(e[15]=t=>a.value.rules.reward_outlet_ids=t),options:v.outlets,searchable:!0,"clear-on-select":!1,"close-on-select":!1,multiple:!0,"show-labels":!1,placeholder:"Pilih outlet (kosongkan untuk semua outlet)",label:"name","track-by":"id",class:"mt-1"},{noOptions:d(()=>e[68]||(e[68]=[l("span",null,"Tidak ada outlet ditemukan",-1)])),noResult:d(()=>e[69]||(e[69]=[l("span",null,"Tidak ada outlet ditemukan",-1)])),_:1},8,["modelValue","options"]),e[71]||(e[71]=l("p",{class:"mt-1 text-xs text-gray-500"},"Reward hanya bisa ditebus di outlet yang dipilih",-1))]))])])):n("",!0)])):k.value.name==="Product-based"?(r(),i("div",We,[l("div",ze,[l("div",null,[e[74]||(e[74]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Product Category *",-1)),u(l("input",{"onUpdate:modelValue":e[16]||(e[16]=t=>a.value.rules.product_category=t),type:"text",class:"form-input w-full rounded border px-3 py-2",placeholder:"New Product Development",required:""},null,512),[[p,a.value.rules.product_category]])]),l("div",null,[e[75]||(e[75]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Quantity Required *",-1)),u(l("input",{"onUpdate:modelValue":e[17]||(e[17]=t=>a.value.rules.quantity_required=t),type:"number",class:"form-input w-full rounded border px-3 py-2",placeholder:"2",required:""},null,512),[[p,a.value.rules.quantity_required]])])]),l("div",null,[e[77]||(e[77]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Reward Type *",-1)),u(l("select",{"onUpdate:modelValue":e[18]||(e[18]=t=>a.value.rules.reward_type=t),class:"form-select w-full rounded border px-3 py-2",required:""},e[76]||(e[76]=[l("option",{value:""},"Pilih Reward Type",-1),l("option",{value:"points"},"Points",-1),l("option",{value:"item"},"Item",-1)]),512),[[V,a.value.rules.reward_type]])]),a.value.rules.reward_type==="item"?(r(),i("div",Ge,[e[84]||(e[84]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pilih Items (Bisa Multiple) *",-1)),y(x(w),{modelValue:a.value.rules.reward_value,"onUpdate:modelValue":e[19]||(e[19]=t=>a.value.rules.reward_value=t),options:v.challengeItems||[],multiple:!0,searchable:!0,"close-on-select":!1,"show-labels":!1,placeholder:"Pilih Items (bisa lebih dari satu)",label:"name","track-by":"id",class:"mt-1",required:""},{noOptions:d(()=>e[78]||(e[78]=[l("span",null,"Tidak ada item ditemukan",-1)])),noResult:d(()=>e[79]||(e[79]=[l("span",null,"Tidak ada item ditemukan",-1)])),_:1},8,["modelValue","options"]),e[85]||(e[85]=l("p",{class:"mt-1 text-xs text-gray-500"},"Anda bisa memilih lebih dari satu item",-1)),Array.isArray(a.value.rules.reward_value)&&a.value.rules.reward_value.length>1?(r(),i("div",He,[e[82]||(e[82]=l("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Mode Pemberian Reward *",-1)),e[83]||(e[83]=l("p",{class:"text-xs text-gray-600 mb-3"},"Pilih bagaimana reward akan diberikan kepada member:",-1)),l("div",Ke,[l("label",Xe,[u(l("input",{"onUpdate:modelValue":e[20]||(e[20]=t=>a.value.rules.reward_item_selection=t),type:"radio",value:"all",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[_,a.value.rules.reward_item_selection]]),e[80]||(e[80]=l("div",{class:"ml-3"},[l("span",{class:"text-sm font-medium text-gray-700"},"Semua Item (All)"),l("p",{class:"text-xs text-gray-500"},"Member akan mendapatkan semua item reward yang dipilih")],-1))]),l("label",Ye,[u(l("input",{"onUpdate:modelValue":e[21]||(e[21]=t=>a.value.rules.reward_item_selection=t),type:"radio",value:"single",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[_,a.value.rules.reward_item_selection]]),e[81]||(e[81]=l("div",{class:"ml-3"},[l("span",{class:"text-sm font-medium text-gray-700"},"Pilih Salah Satu (Single)"),l("p",{class:"text-xs text-gray-500"},"Member hanya bisa memilih salah satu item reward saat claim")],-1))])])])):n("",!0)])):a.value.rules.reward_type==="points"?(r(),i("div",Ze,[e[86]||(e[86]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Points Amount *",-1)),u(l("input",{"onUpdate:modelValue":e[22]||(e[22]=t=>a.value.rules.reward_value=t),type:"number",class:"form-input w-full rounded border px-3 py-2",placeholder:"100",min:"0",required:""},null,512),[[p,a.value.rules.reward_value]])])):n("",!0)])):k.value.name==="Multi-condition"?(r(),i("div",el,[l("div",ll,[l("div",null,[e[87]||(e[87]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Min Spending (IDR) *",-1)),u(l("input",{"onUpdate:modelValue":e[23]||(e[23]=t=>a.value.rules.min_spending=t),type:"number",class:"form-input w-full rounded border px-3 py-2",placeholder:"1000000",required:""},null,512),[[p,a.value.rules.min_spending]])]),l("div",null,[e[88]||(e[88]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Min Transactions *",-1)),u(l("input",{"onUpdate:modelValue":e[24]||(e[24]=t=>a.value.rules.min_transactions=t),type:"number",class:"form-input w-full rounded border px-3 py-2",placeholder:"2",required:""},null,512),[[p,a.value.rules.min_transactions]])]),l("div",null,[e[89]||(e[89]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Min Visits *",-1)),u(l("input",{"onUpdate:modelValue":e[25]||(e[25]=t=>a.value.rules.min_visits=t),type:"number",class:"form-input w-full rounded border px-3 py-2",placeholder:"2",required:""},null,512),[[p,a.value.rules.min_visits]])])]),l("div",null,[e[91]||(e[91]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Reward Type *",-1)),u(l("select",{"onUpdate:modelValue":e[26]||(e[26]=t=>a.value.rules.reward_type=t),class:"form-select w-full rounded border px-3 py-2",required:""},e[90]||(e[90]=[l("option",{value:""},"Pilih Reward Type",-1),l("option",{value:"voucher"},"Voucher",-1),l("option",{value:"item"},"Item",-1),l("option",{value:"points"},"Points",-1)]),512),[[V,a.value.rules.reward_type]])]),a.value.rules.reward_type==="item"?(r(),i("div",tl,[e[98]||(e[98]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pilih Items (Bisa Multiple) *",-1)),y(x(w),{modelValue:a.value.rules.reward_value,"onUpdate:modelValue":e[27]||(e[27]=t=>a.value.rules.reward_value=t),options:v.challengeItems||[],multiple:!0,searchable:!0,"close-on-select":!1,"show-labels":!1,placeholder:"Pilih Items (bisa lebih dari satu)",label:"name","track-by":"id",class:"mt-1",required:""},{noOptions:d(()=>e[92]||(e[92]=[l("span",null,"Tidak ada item ditemukan",-1)])),noResult:d(()=>e[93]||(e[93]=[l("span",null,"Tidak ada item ditemukan",-1)])),_:1},8,["modelValue","options"]),e[99]||(e[99]=l("p",{class:"mt-1 text-xs text-gray-500"},"Anda bisa memilih lebih dari satu item",-1)),Array.isArray(a.value.rules.reward_value)&&a.value.rules.reward_value.length>1?(r(),i("div",al,[e[96]||(e[96]=l("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Mode Pemberian Reward *",-1)),e[97]||(e[97]=l("p",{class:"text-xs text-gray-600 mb-3"},"Pilih bagaimana reward akan diberikan kepada member:",-1)),l("div",sl,[l("label",rl,[u(l("input",{"onUpdate:modelValue":e[28]||(e[28]=t=>a.value.rules.reward_item_selection=t),type:"radio",value:"all",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[_,a.value.rules.reward_item_selection]]),e[94]||(e[94]=l("div",{class:"ml-3"},[l("span",{class:"text-sm font-medium text-gray-700"},"Semua Item (All)"),l("p",{class:"text-xs text-gray-500"},"Member akan mendapatkan semua item reward yang dipilih")],-1))]),l("label",ul,[u(l("input",{"onUpdate:modelValue":e[29]||(e[29]=t=>a.value.rules.reward_item_selection=t),type:"radio",value:"single",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[_,a.value.rules.reward_item_selection]]),e[95]||(e[95]=l("div",{class:"ml-3"},[l("span",{class:"text-sm font-medium text-gray-700"},"Pilih Salah Satu (Single)"),l("p",{class:"text-xs text-gray-500"},"Member hanya bisa memilih salah satu item reward saat claim")],-1))])])])):n("",!0)])):a.value.rules.reward_type==="points"?(r(),i("div",il,[e[100]||(e[100]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Points Amount *",-1)),u(l("input",{"onUpdate:modelValue":e[30]||(e[30]=t=>a.value.rules.reward_value=t),type:"number",class:"form-input w-full rounded border px-3 py-2",placeholder:"100",min:"0",required:""},null,512),[[p,a.value.rules.reward_value]])])):a.value.rules.reward_type==="voucher"?(r(),i("div",ol,[e[103]||(e[103]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pilih Vouchers (Bisa Multiple) *",-1)),y(x(w),{modelValue:a.value.rules.reward_value,"onUpdate:modelValue":e[31]||(e[31]=t=>a.value.rules.reward_value=t),options:v.vouchers||[],multiple:!0,searchable:!0,"close-on-select":!1,"show-labels":!1,placeholder:"Pilih Vouchers (bisa lebih dari satu)",label:"name","track-by":"id",class:"mt-1",required:""},{option:d(({option:t})=>[l("div",null,[l("strong",null,m(t.name),1),t.code?(r(),i("span",dl,"("+m(t.code)+")",1)):n("",!0)])]),singleLabel:d(({option:t})=>[l("strong",null,m(t.name),1),t.code?(r(),i("span",nl,"("+m(t.code)+")",1)):n("",!0)]),tag:d(({option:t,remove:g})=>[l("span",ml,[l("span",null,m(t.name),1),l("i",{class:"multiselect__tag-icon",onClick:C(P=>g(t),["prevent"])},null,8,pl)])]),noOptions:d(()=>e[101]||(e[101]=[l("span",null,"Tidak ada voucher ditemukan",-1)])),noResult:d(()=>e[102]||(e[102]=[l("span",null,"Tidak ada voucher ditemukan",-1)])),_:1},8,["modelValue","options"])])):n("",!0)])):n("",!0)])):n("",!0),l("div",bl,[e[109]||(e[109]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Pengaturan Challenge",-1)),l("div",vl,[l("div",null,[e[105]||(e[105]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Validity Period (Days) *",-1)),u(l("input",{"onUpdate:modelValue":e[32]||(e[32]=t=>a.value.validity_period_days=t),type:"number",class:"form-input w-full rounded border px-3 py-2",placeholder:"30",required:""},null,512),[[p,a.value.validity_period_days]])]),l("div",null,[e[106]||(e[106]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Start Date",-1)),u(l("input",{"onUpdate:modelValue":e[33]||(e[33]=t=>a.value.start_date=t),type:"date",class:"form-input w-full rounded border px-3 py-2"},null,512),[[p,a.value.start_date]])])]),l("div",gl,[l("div",null,[e[107]||(e[107]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"End Date",-1)),u(l("input",{"onUpdate:modelValue":e[34]||(e[34]=t=>a.value.end_date=t),type:"date",class:"form-input w-full rounded border px-3 py-2"},null,512),[[p,a.value.end_date]])]),l("div",yl,[u(l("input",{"onUpdate:modelValue":e[35]||(e[35]=t=>a.value.is_active=t),type:"checkbox",class:"form-checkbox h-4 w-4 text-blue-600"},null,512),[[h,a.value.is_active]]),e[108]||(e[108]=l("label",{class:"ml-2 text-sm text-gray-700"},"Aktifkan challenge",-1))])])]),l("div",xl,[e[111]||(e[111]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Scope Outlet",-1)),l("div",wl,[e[110]||(e[110]=l("label",{class:"block text-sm font-medium text-gray-700"},"Pilih Outlet (kosongkan untuk semua outlet)",-1)),l("div",fl,[(r(!0),i(se,null,re(v.outlets,t=>(r(),i("label",{key:t.id,class:"flex items-center"},[u(l("input",{"onUpdate:modelValue":e[36]||(e[36]=g=>a.value.outlet_ids=g),value:t.id,type:"checkbox",class:"form-checkbox h-4 w-4 text-blue-600"},null,8,kl),[[h,a.value.outlet_ids]]),l("span",_l,m(t.name),1)]))),128))])])]),l("div",cl,[l("button",{type:"button",onClick:R,class:"bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg"}," Batal "),l("button",{type:"submit",disabled:c.value,class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg disabled:opacity-50"},[c.value?(r(),i("span",Vl,e[112]||(e[112]=[l("i",{class:"fa-solid fa-spinner fa-spin mr-2"},null,-1),A("Menyimpan...")]))):(r(),i("span",Pl,m(f.value?"Update":"Simpan")+" Challenge",1))],8,hl)])],32)])]),_:1}))}};export{Nl as default};
