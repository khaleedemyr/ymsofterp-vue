import{a8 as W,A as G,B as n,C as J,D as t,L as c,E as j,G as d,H as h,J as E,I as L,F as D,M as F,N as m,l as v,O as Y,r as k,k as O,W as x}from"./vendor-vue-g7iCcTkf.js";import{A as Q}from"./AppLayout-zB0hvXOw.js";import{S as N}from"./app-BgZdqVzD.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vendor-utils-CpgP2uT4.js";import"./ProfileUpdateModal-C4ea0y0B.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const X={components:{AppLayout:Q},props:{categories:Object,filters:Object},setup(M){var T,K;const e=k(!1),u=k(!1),a=k(!1),w=k(null),p=k({}),i=O({name:"",description:"",status:"active"}),s=O({search:((T=M.filters)==null?void 0:T.search)||"",status:((K=M.filters)==null?void 0:K.status)||""}),g=(o={})=>{x.get("/lms/categories",{...s,...o},{preserveState:!0,preserveScroll:!0})},V=()=>{g({page:1})},U=o=>{o&&x.visit(o,{preserveState:!0})},y=o=>N.fire({confirmButtonColor:"#3B82F6",cancelButtonColor:"#EF4444",...o}),C=(o,r="Berhasil!")=>y({icon:"success",title:r,text:o,timer:2e3,timerProgressBar:!0,showConfirmButton:!1,toast:!0,position:"top-end"}),b=(o,r="Error!")=>y({icon:"error",title:r,text:o,confirmButtonText:"OK"}),S=(o,r,l,f={})=>y({title:o,text:r,icon:"question",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Batal",reverseButtons:!0,...f}).then(B=>{B.isConfirmed&&l()}),_=(o="Memproses...")=>y({title:o,allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{N.showLoading()}}),P=async()=>{if(!i.name.trim()){b("Nama kategori harus diisi!");return}a.value=!0;const o=_("Menyimpan kategori...");try{await x.post("/lms/categories",i,{onSuccess:()=>{o.close(),C("Kategori berhasil dibuat!"),A(),g()},onError:r=>{o.close();const l=Object.values(r).flat().join(", ");b(l||"Terjadi kesalahan saat membuat kategori")}})}catch(r){o.close(),console.error("Error creating category:",r),b("Terjadi kesalahan saat membuat kategori")}finally{a.value=!1}},H=o=>{w.value=o,i.name=o.name,i.description=o.description||"",i.status=o.status,u.value=!0},I=async()=>{if(!i.name.trim()){b("Nama kategori harus diisi!");return}a.value=!0;const o=_("Memperbarui kategori...");try{await x.put(`/lms/categories/${w.value.id}`,i,{onSuccess:()=>{o.close(),C("Kategori berhasil diperbarui!"),A(),g()},onError:r=>{o.close();const l=Object.values(r).flat().join(", ");b(l||"Terjadi kesalahan saat memperbarui kategori")}})}catch(r){o.close(),console.error("Error updating category:",r),b("Terjadi kesalahan saat memperbarui kategori")}finally{a.value=!1}},q=async o=>{const r=o.status==="active"?"menonaktifkan":"mengaktifkan";o.status,S("Konfirmasi Perubahan Status",`Apakah Anda yakin ingin ${r} kategori <strong>"${o.name}"</strong>?`,async()=>{p.value[o.id]=!0;const l=_(`${r.charAt(0).toUpperCase()+r.slice(1)} kategori...`);try{await x.put(`/lms/categories/${o.id}/toggle-status`,{},{onSuccess:()=>{l.close(),C(`Kategori berhasil di${r}!`),g()},onError:f=>{l.close();const B=Object.values(f).flat().join(", ");b(B||`Terjadi kesalahan saat ${r} kategori`)}})}catch(f){l.close(),console.error("Error toggling status:",f),b(`Terjadi kesalahan saat ${r} kategori`)}finally{p.value[o.id]=!1}},{html:!0,confirmButtonColor:o.status==="active"?"#EF4444":"#10B981"})},z=async o=>{S("Konfirmasi Hapus Kategori",`Apakah Anda yakin ingin menghapus kategori <strong>"${o.name}"</strong>?<br><br><span class="text-red-500 font-semibold">⚠️ Tindakan ini tidak dapat dibatalkan!</span>`,async()=>{p.value[o.id]=!0;const r=_("Menghapus kategori...");try{await x.delete(`/lms/categories/${o.id}`,{onSuccess:()=>{r.close(),C("Kategori berhasil dihapus!"),g()},onError:l=>{r.close();const f=Object.values(l).flat().join(", ");b(f||"Terjadi kesalahan saat menghapus kategori")}})}catch(l){r.close(),console.error("Error deleting category:",l),b("Terjadi kesalahan saat menghapus kategori")}finally{p.value[o.id]=!1}},{html:!0,confirmButtonColor:"#EF4444",icon:"warning"})},A=()=>{e.value=!1,u.value=!1,w.value=null,i.name="",i.description="",i.status="active"};return{showCreateModal:e,showEditModal:u,loading:a,actionLoading:p,form:i,filters:s,applyFilters:V,loadPage:U,createCategory:P,editCategory:H,updateCategory:I,toggleStatus:q,deleteCategory:z,closeModal:A,formatDate:o=>new Date(o).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"})}}},Z={class:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900"},$={class:"bg-white/10 backdrop-blur-md border-b border-white/20"},tt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},et={class:"flex items-center justify-between"},st={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},at={class:"bg-white/10 backdrop-blur-md rounded-xl p-6 mb-8 border border-white/20"},ot={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},rt={class:"flex items-end"},it={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},lt={class:"flex items-start justify-between mb-4"},nt={class:"flex-1"},dt={class:"text-xl font-semibold text-white mb-2"},ut={class:"text-gray-300 text-sm mb-3"},ct={class:"flex items-center space-x-4 text-sm"},mt={class:"text-gray-400"},bt={class:"flex items-center justify-between pt-4 border-t border-white/20"},gt={class:"text-xs text-gray-400"},ft={class:"flex space-x-2"},pt=["onClick","disabled"],xt=["onClick","disabled"],ht={key:0,class:"flex items-center"},vt={key:1},kt=["onClick","disabled"],wt={key:0,class:"text-center py-12"},yt={class:"bg-white/10 backdrop-blur-md rounded-xl p-8 border border-white/20"},Ct={key:1,class:"mt-8"},_t={class:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20"},Mt={class:"flex items-center justify-between"},At={class:"text-sm text-gray-300"},Bt={class:"flex space-x-2"},jt=["onClick","disabled","innerHTML"],Et={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},St={class:"bg-white/10 backdrop-blur-md rounded-xl p-6 w-full max-w-md mx-4 border border-white/20"},Tt={class:"text-xl font-semibold text-white mb-4"},Kt={class:"space-y-4"},Lt=["disabled"],Dt=["disabled"],Ft=["disabled"],Ot={class:"flex space-x-3 mt-6"},Nt=["disabled"],Vt=["disabled"],Ut={key:0,class:"flex items-center justify-center"},Pt={key:1};function Ht(M,e,u,a,w,p){const i=W("AppLayout");return n(),G(i,null,{default:J(()=>[t("div",Z,[t("div",$,[t("div",tt,[t("div",et,[e[11]||(e[11]=t("div",null,[t("h1",{class:"text-3xl font-bold text-white"},"Kategori Pelatihan"),t("p",{class:"text-gray-300 mt-1"},"Kelola kategori untuk mengorganisir materi pelatihan")],-1)),t("button",{onClick:e[0]||(e[0]=s=>a.showCreateModal=!0),class:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg"},e[10]||(e[10]=[t("i",{class:"fas fa-plus mr-2"},null,-1),d(" Tambah Kategori ")]))])])]),t("div",st,[t("div",at,[t("div",ot,[t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Cari Kategori",-1)),h(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.filters.search=s),type:"text",placeholder:"Cari nama kategori...",class:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[E,a.filters.search]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Status",-1)),h(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.filters.status=s),class:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},e[13]||(e[13]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"active"},"Aktif",-1),t("option",{value:"inactive"},"Tidak Aktif",-1)]),512),[[L,a.filters.status]])]),t("div",rt,[t("button",{onClick:e[3]||(e[3]=(...s)=>a.applyFilters&&a.applyFilters(...s)),class:"w-full bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-300"},e[15]||(e[15]=[t("i",{class:"fas fa-search mr-2"},null,-1),d(" Terapkan Filter ")]))])])]),t("div",it,[(n(!0),c(D,null,F(u.categories.data,s=>(n(),c("div",{key:s.id,class:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20 hover:bg-white/15 transition-all duration-300 transform hover:scale-105"},[t("div",lt,[t("div",nt,[t("h3",dt,m(s.name),1),t("p",ut,m(s.description||"Tidak ada deskripsi"),1),t("div",ct,[t("span",mt,[e[16]||(e[16]=t("i",{class:"fas fa-book mr-1"},null,-1)),d(" "+m(s.courses_count||0)+" Kursus ",1)]),t("span",{class:v([s.status==="active"?"text-green-400":"text-red-400","flex items-center"])},[t("i",{class:v([s.status==="active"?"fas fa-check-circle":"fas fa-times-circle","mr-1"])},null,2),d(" "+m(s.status==="active"?"Aktif":"Tidak Aktif"),1)],2)])])]),t("div",bt,[t("div",gt," Dibuat: "+m(a.formatDate(s.created_at)),1),t("div",ft,[t("button",{onClick:g=>a.editCategory(s),disabled:a.actionLoading[s.id],class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},e[17]||(e[17]=[t("i",{class:"fas fa-edit mr-1"},null,-1),d(" Edit ")]),8,pt),t("button",{onClick:g=>a.toggleStatus(s),disabled:a.actionLoading[s.id],class:v([s.status==="active"?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700","text-white px-3 py-1 rounded text-sm transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"])},[a.actionLoading[s.id]?(n(),c("span",ht,e[18]||(e[18]=[t("i",{class:"fas fa-spinner fa-spin mr-1"},null,-1),d(" Loading... ")]))):(n(),c("span",vt,[t("i",{class:v([s.status==="active"?"fas fa-ban":"fas fa-check","mr-1"])},null,2),d(" "+m(s.status==="active"?"Nonaktifkan":"Aktifkan"),1)]))],10,xt),t("button",{onClick:g=>a.deleteCategory(s),disabled:a.actionLoading[s.id],class:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},e[19]||(e[19]=[t("i",{class:"fas fa-trash mr-1"},null,-1),d(" Hapus ")]),8,kt)])])]))),128))]),u.categories.data.length===0?(n(),c("div",wt,[t("div",yt,[e[21]||(e[21]=t("i",{class:"fas fa-folder-open text-6xl text-gray-400 mb-4"},null,-1)),e[22]||(e[22]=t("h3",{class:"text-xl font-semibold text-white mb-2"},"Belum ada kategori",-1)),e[23]||(e[23]=t("p",{class:"text-gray-300 mb-6"},"Mulai dengan membuat kategori pertama untuk mengorganisir materi pelatihan",-1)),t("button",{onClick:e[4]||(e[4]=s=>a.showCreateModal=!0),class:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-300"},e[20]||(e[20]=[t("i",{class:"fas fa-plus mr-2"},null,-1),d(" Buat Kategori Pertama ")]))])])):j("",!0),u.categories.data.length>0?(n(),c("div",Ct,[t("div",_t,[t("div",Mt,[t("div",At," Menampilkan "+m(u.categories.from)+" - "+m(u.categories.to)+" dari "+m(u.categories.total)+" kategori ",1),t("div",Bt,[(n(!0),c(D,null,F(u.categories.links,s=>(n(),c("button",{key:s.label,onClick:g=>a.loadPage(s.url),disabled:!s.url||s.active,class:v(["px-3 py-2 rounded text-sm font-medium transition-colors duration-200",s.active?"bg-blue-600 text-white":s.url?"bg-white/10 text-white hover:bg-white/20":"bg-white/5 text-gray-500 cursor-not-allowed"]),innerHTML:s.label},null,10,jt))),128))])])])])):j("",!0)]),a.showCreateModal||a.showEditModal?(n(),c("div",Et,[t("div",St,[t("h3",Tt,m(a.showEditModal?"Edit Kategori":"Tambah Kategori Baru"),1),t("form",{onSubmit:e[9]||(e[9]=Y(s=>a.showEditModal?a.updateCategory():a.createCategory(),["prevent"]))},[t("div",Kt,[t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[d("Nama Kategori "),t("span",{class:"text-red-400"},"*")],-1)),h(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>a.form.name=s),type:"text",required:"",class:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Masukkan nama kategori",disabled:a.loading},null,8,Lt),[[E,a.form.name]])]),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Deskripsi",-1)),h(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=s=>a.form.description=s),rows:"3",class:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Masukkan deskripsi kategori (opsional)",disabled:a.loading},null,8,Dt),[[E,a.form.description]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},[d("Status "),t("span",{class:"text-red-400"},"*")],-1)),h(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>a.form.status=s),required:"",class:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:a.loading},e[26]||(e[26]=[t("option",{value:"active"},"Aktif",-1),t("option",{value:"inactive"},"Tidak Aktif",-1)]),8,Ft),[[L,a.form.status]])])]),t("div",Ot,[t("button",{type:"button",onClick:e[8]||(e[8]=(...s)=>a.closeModal&&a.closeModal(...s)),class:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors duration-200",disabled:a.loading}," Batal ",8,Nt),t("button",{type:"submit",disabled:a.loading||!a.form.name.trim(),class:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-4 py-2 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},[a.loading?(n(),c("span",Ut,e[28]||(e[28]=[t("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),d(" Menyimpan... ")]))):(n(),c("span",Pt,m(a.showEditModal?"Update":"Simpan"),1))],8,Vt)])],32)])])):j("",!0)])]),_:1})}const $t=R(X,[["render",Ht],["__scopeId","data-v-22bf08e4"]]);export{$t as default};
