import{a as r}from"./vendor-utils-CpgP2uT4.js";import xt from"./DashboardFilterBar-BEV5uKIa.js";import ht from"./DashboardStats-J1Hnihrp.js";import vt from"./DashboardStatusPie-j8vJlLso.js";import yt from"./DashboardTrendLine-CGhP0w3M.js";/* empty css                                                                           */import{_ as _t}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                             */import"./vendor-charts-CuqD4wLC.js";/* empty css                                                                         */import gt from"./DashboardOverdueTable-IC9Karaa.js";import wt from"./DashboardTaskTable-BWyaCDA3.js";/* empty css                                                                              */import kt from"./DashboardMemberBar-5EkvnTTn.js";import Dt from"./DashboardCategoryDonut-sm3OFz-x.js";import Tt from"./DashboardPriorityDonut-COA-enDz.js";import Ct from"./AllTasksModal-B5keQhFI.js";import Pt from"./DoneTasksTable-B-ZMmkAr.js";import At from"./DoneTasksLeaderboard-BOUYmUIt.js";import St from"./POLatestDetailModal-iRxmsHcK.js";import Rt from"./AllPOModal-dSrl7Ged.js";import Ot from"./AllPRModal-ByfhnSel.js";import $t from"./PRLatestDetailModal-BHUphGtm.js";import Lt from"./AllRetailModal-Q1H3Ej5X.js";import jt from"./RetailLatestDetailModal-Ix_wKZxo.js";import Bt from"./AllActivityModal-BL1rND4f.js";import q from"./DashboardPolarChart-DABuMHEj.js";import{r as l,a as Nt,w as Ft,L as i,B as d,E as Mt,D as t,x as n,F as y,M as _,N as o,G as It}from"./vendor-vue-g7iCcTkf.js";import"./AllOverdueTasksModal-CLinJS86.js";import"./lodash-DB3HVzpp.js";import"./TaskDetailModal-CVuZALLV.js";import"./LightboxModal-C05wjdKL.js";import"./AllDoneTasksModal-CmArCWFp.js";const Et={class:"dashboard p-4 md:p-6 bg-gray-50 min-h-screen relative"},Vt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30"},Gt={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 md:gap-4 mb-4 md:mb-6"},qt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 mb-6 md:mb-8"},zt={class:"bg-white rounded-xl p-4 shadow flex flex-col"},Kt={class:"bg-white rounded-xl p-4 shadow flex flex-col"},Wt={class:"bg-white rounded-xl p-4 shadow flex flex-col"},Yt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-6 md:mb-8"},Ht={class:"bg-white rounded-xl p-4 shadow flex flex-col"},Jt={class:"bg-white rounded-xl p-4 shadow flex flex-col"},Qt={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 mb-6 md:mb-8"},Ut={class:"bg-white rounded-xl p-4 shadow"},Xt={class:"flex justify-between items-center mb-2"},Zt={class:"bg-white rounded-xl p-4 shadow"},te={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 mb-6 md:mb-8"},ee={class:"bg-white rounded-xl p-4 shadow"},se={class:"bg-white rounded-xl p-4 shadow"},ae={class:"w-full mb-8"},le={class:"bg-white rounded-xl p-4 shadow mb-6"},oe={key:0,class:"h-48 flex items-center justify-center text-gray-300"},ne={key:1,class:"overflow-x-auto"},ie={class:"min-w-full text-sm rounded-xl overflow-hidden"},de={class:"py-2 px-3 font-semibold text-blue-700"},re={class:"py-2 px-3"},ue={class:"py-2 px-3"},ce={class:"py-2 px-3"},me={class:"py-2 px-3"},pe={class:"py-2 px-3"},be={class:"py-2 px-3 text-right"},fe={class:"py-2 px-3"},xe={class:"py-2 px-3 text-center"},he=["onClick"],ve={class:"bg-white rounded-xl p-4 shadow mb-6"},ye={key:0,class:"h-48 flex items-center justify-center text-gray-300"},_e={key:1,class:"overflow-x-auto"},ge={class:"min-w-full text-sm rounded-xl overflow-hidden"},we={class:"py-2 px-3 font-semibold text-blue-700"},ke={class:"py-2 px-3"},De={class:"py-2 px-3"},Te={class:"py-2 px-3"},Ce={class:"py-2 px-3"},Pe={class:"py-2 px-3 text-right"},Ae={class:"py-2 px-3"},Se={class:"py-2 px-3"},Re={class:"py-2 px-3 text-center"},Oe=["onClick"],$e={class:"bg-white rounded-xl p-4 shadow mb-6"},Le={key:0,class:"h-48 flex items-center justify-center text-gray-300"},je={key:1,class:"overflow-x-auto"},Be={class:"min-w-full text-sm rounded-xl overflow-hidden"},Ne={class:"py-2 px-3 font-semibold text-blue-700"},Fe={class:"py-2 px-3"},Me={class:"py-2 px-3"},Ie={class:"py-2 px-3"},Ee={class:"py-2 px-3"},Ve={class:"py-2 px-3"},Ge={class:"py-2 px-3"},qe={class:"py-2 px-3 text-right"},ze={class:"py-2 px-3 text-center"},Ke=["onClick"],We={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6 mb-6 md:mb-8"},Ye={class:"bg-white rounded-xl p-4 shadow"},He={key:0,class:"h-48 flex items-center justify-center text-gray-300"},Je={key:1},Qe={class:"w-10 h-10 rounded-full bg-indigo-200 flex items-center justify-center font-bold text-white text-lg"},Ue={class:"font-semibold text-indigo-800"},Xe={class:"text-xs text-gray-400 font-normal"},Ze={class:"text-sm text-gray-600"},ts={class:"text-xs text-gray-400"},es={__name:"Dashboard",setup(ss){const j=l([]),B=l({}),N=l({}),z=l({}),K=l([]),F=l([]),W=l([]),Y=l([]),H=l([]),c=l([]),J=l([]),Q=l([]),M=l({}),I=l({}),g=l(!1),w=l([]),m=l(!1),k=l({}),p=l(!1),D=l([]),b=l(!1),f=l(!1),T=l({}),C=l([]),x=l(!1),h=l(!1),P=l({}),A=l(!1),S=l({}),R=l({}),E=l({}),O=l(!1),V=l([]),v=l({startDate:"",endDate:""});async function U(a={}){let e="/api/dashboard/maintenance";Object.keys(a).length>0&&(e="/api/dashboard/maintenance/filter");const s=await r.get(e,{params:a});j.value=s.data.stats,B.value=s.data.statusData,N.value=s.data.trendData,z.value=s.data.barOutletData,K.value=s.data.leaderboard,F.value=s.data.overdueTasks,W.value=s.data.heatmap,Y.value=s.data.latestTasks||[],H.value=s.data.doneTasks||[],c.value=s.data.activityList||[],J.value=s.data.memberBarData||[],Q.value=s.data.mediaGallery||[],M.value=s.data.categoryData||{},I.value=s.data.priorityData||{}}async function X(a={}){const e=await r.get("/api/maintenance-po-latest",{params:{perPage:5,page:1,...a}});w.value=e.data.data}async function Z(a={}){const e=await r.get("/api/maintenance-pr-latest",{params:{perPage:5,page:1,...a}});D.value=e.data.data}async function tt(a={}){const e=await r.get("/api/retail-latest",{params:{perPage:5,page:1,...a}});C.value=e.data.data}async function et(a={}){const e=await r.get("/api/activity-latest",{params:{perPage:5,page:1,...a}});c.value=e.data.data}async function st(a={}){const e=await r.get("/api/dashboard/task-completion-stats",{params:a});S.value=e.data}async function at(a={}){const e=await r.get("/api/dashboard/task-by-due-date-stats",{params:a});R.value=e.data}async function $(){const a=await r.get("/api/dashboard/maintenance/task-per-member",{params:v.value});V.value=a.data}async function G(a={}){O.value=!0,await Promise.all([U(a),X(a),Z(a),tt(a),et(a),st(a),at(a),$()]),O.value=!1}Nt(()=>{document.title="MT Dashboard - YMSoft";const a=new Date,e=new Date;e.setDate(a.getDate()-29);function s(ft){return ft.toISOString().slice(0,10)}const u={startDate:s(e),endDate:s(a)};E.value=u,v.value={startDate:s(e),endDate:s(a)},G(u),$()}),Ft(v,$);function lt(a){E.value=a,v.value=a,G(a)}function L(a){return a?"Rp "+Number(a).toLocaleString("id-ID"):"Rp 0"}function ot(a){k.value=a,m.value=!0}function nt(){p.value=!0}function it(a){p.value=!1,k.value=a,m.value=!0}function dt(){b.value=!0}function rt(a){T.value=a,f.value=!0}function ut(a){b.value=!1,T.value=a,f.value=!0}function ct(){x.value=!0}function mt(a){P.value=a,h.value=!0}function pt(a){x.value=!1,P.value=a,h.value=!0}function bt(){A.value=!0}return(a,e)=>(d(),i("div",Et,[O.value?(d(),i("div",Vt,e[9]||(e[9]=[t("div",{class:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"},null,-1)]))):Mt("",!0),e[28]||(e[28]=t("div",{class:"mb-4 md:mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4"},[t("div",null,[t("h1",{class:"text-2xl md:text-3xl font-extrabold text-gray-800 tracking-tight mb-1"},"MAINTENANCE"),t("div",{class:"text-xs text-gray-500"},"Data Dashboard")])],-1)),n(xt,{onFilterChange:lt}),t("div",Gt,[n(ht,{stats:j.value},null,8,["stats"])]),t("div",qt,[t("div",zt,[e[10]||(e[10]=t("div",{class:"flex justify-between items-center mb-2"},[t("h2",{class:"text-base font-semibold"},"Task Status")],-1)),n(vt,{data:B.value},null,8,["data"])]),t("div",Kt,[e[11]||(e[11]=t("div",{class:"flex justify-between items-center mb-2"},[t("h2",{class:"text-base font-semibold"},"Kategori Maintenance"),t("button",{class:"text-xs text-gray-400"},"...")],-1)),n(Dt,{data:M.value},null,8,["data"])]),t("div",Wt,[n(Tt,{data:I.value},null,8,["data"])])]),t("div",Yt,[t("div",Ht,[e[12]||(e[12]=t("h2",{class:"text-base font-semibold mb-2"},"Task Completion",-1)),n(q,{data:{"Belum Selesai":S.value.not_done||0,Selesai:S.value.done||0},colors:["#2563eb","#22c55e"]},null,8,["data"])]),t("div",Jt,[e[13]||(e[13]=t("h2",{class:"text-base font-semibold mb-2"},"Task by Due Date",-1)),n(q,{data:{"Tepat Waktu":R.value.on_time||0,Telat:R.value.late||0},colors:["#22c55e","#ef4444"]},null,8,["data"])])]),t("div",Qt,[t("div",Ut,[t("div",Xt,[e[14]||(e[14]=t("h2",{class:"text-base font-semibold"},"Tasks Terbaru",-1)),t("button",{class:"text-xs text-blue-500",onClick:e[0]||(e[0]=s=>g.value=!0)},"Lihat Semua Tasks")]),n(wt)]),t("div",Zt,[e[15]||(e[15]=t("div",{class:"flex justify-between items-center mb-2"},[t("h2",{class:"text-base font-semibold"},"Tasks Selesai")],-1)),n(Pt)])]),t("div",te,[t("div",ee,[e[16]||(e[16]=t("div",{class:"flex justify-between items-center mb-2"},[t("h2",{class:"text-base font-semibold"},"Aktivitas Maintenance")],-1)),n(yt,{data:N.value},null,8,["data"])]),t("div",se,[e[17]||(e[17]=t("div",{class:"flex justify-between items-center mb-2"},[t("h2",{class:"text-base font-semibold"},"Leaderboard Tasks Selesai")],-1)),n(At,{class:"mt-0"})])]),t("div",ae,[n(kt,{data:V.value},null,8,["data"])]),t("div",le,[t("div",{class:"flex justify-between items-center mb-2"},[e[18]||(e[18]=t("h2",{class:"text-base font-semibold"},"Purchase Orders Terbaru",-1)),t("button",{class:"text-xs text-blue-500",onClick:nt},"Lihat Semua PO")]),w.value.length===0?(d(),i("div",oe,"Tidak ada data PO terbaru")):(d(),i("div",ne,[t("table",ie,[e[20]||(e[20]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"py-2 px-3 text-left font-bold"},"PO Number"),t("th",{class:"py-2 px-3 text-left font-bold"},"Task Number"),t("th",{class:"py-2 px-3 text-left font-bold"},"Title"),t("th",{class:"py-2 px-3 text-left font-bold"},"Supplier"),t("th",{class:"py-2 px-3 text-left font-bold"},"Outlet"),t("th",{class:"py-2 px-3 text-left font-bold"},"Status"),t("th",{class:"py-2 px-3 text-right font-bold"},"Total"),t("th",{class:"py-2 px-3 text-left font-bold"},"Tanggal"),t("th",{class:"py-2 px-3 text-center font-bold"},"Action")])],-1)),t("tbody",null,[(d(!0),i(y,null,_(w.value,s=>(d(),i("tr",{key:s.id,class:"hover:bg-blue-50 transition"},[t("td",de,o(s.po_number),1),t("td",re,o(s.task_number||"-"),1),t("td",ue,o(s.title||"-"),1),t("td",ce,o(s.supplier_name||"-"),1),t("td",me,o(s.nama_outlet||"-"),1),t("td",pe,o(s.status),1),t("td",be,o(L(s.total_amount)),1),t("td",fe,o(s.created_at?s.created_at.substring(0,10):"-"),1),t("td",xe,[t("button",{class:"p-2 rounded hover:bg-blue-100 transition",onClick:u=>ot(s)},e[19]||(e[19]=[t("i",{class:"fas fa-eye text-blue-600"},null,-1)]),8,he)])]))),128))])])]))]),t("div",ve,[t("div",{class:"flex justify-between items-center mb-2"},[e[21]||(e[21]=t("h2",{class:"text-base font-semibold"},"Purchase Requisitions Terbaru",-1)),t("button",{class:"text-xs text-blue-500",onClick:dt},"Lihat Semua PR")]),D.value.length===0?(d(),i("div",ye,"Tidak ada data PR terbaru")):(d(),i("div",_e,[t("table",ge,[e[23]||(e[23]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"py-2 px-3 text-left font-bold"},"PR Number"),t("th",{class:"py-2 px-3 text-left font-bold"},"Task Number"),t("th",{class:"py-2 px-3 text-left font-bold"},"Title"),t("th",{class:"py-2 px-3 text-left font-bold"},"Outlet"),t("th",{class:"py-2 px-3 text-left font-bold"},"Status"),t("th",{class:"py-2 px-3 text-right font-bold"},"Total"),t("th",{class:"py-2 px-3 text-left font-bold"},"Tanggal"),t("th",{class:"py-2 px-3 text-left font-bold"},"Created By"),t("th",{class:"py-2 px-3 text-center font-bold"},"Action")])],-1)),t("tbody",null,[(d(!0),i(y,null,_(D.value,s=>(d(),i("tr",{key:s.id,class:"hover:bg-blue-50 transition"},[t("td",we,o(s.pr_number),1),t("td",ke,o(s.task_number||"-"),1),t("td",De,o(s.title||"-"),1),t("td",Te,o(s.nama_outlet||"-"),1),t("td",Ce,o(s.status),1),t("td",Pe,o(L(s.total_amount)),1),t("td",Ae,o(s.created_at?s.created_at.substring(0,10):"-"),1),t("td",Se,o(s.created_by||"-"),1),t("td",Re,[t("button",{class:"p-2 rounded hover:bg-blue-100 transition",onClick:u=>rt(s)},e[22]||(e[22]=[t("i",{class:"fas fa-eye text-blue-600"},null,-1)]),8,Oe)])]))),128))])])]))]),t("div",$e,[t("div",{class:"flex justify-between items-center mb-2"},[e[24]||(e[24]=t("h2",{class:"text-base font-semibold"},"Retail Terbaru",-1)),t("button",{class:"text-xs text-blue-500",onClick:ct},"Lihat Semua Retail")]),C.value.length===0?(d(),i("div",Le,"Tidak ada data retail terbaru")):(d(),i("div",je,[t("table",Be,[e[26]||(e[26]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"py-2 px-3 text-left font-bold"},"Nama Toko"),t("th",{class:"py-2 px-3 text-left font-bold"},"Alamat"),t("th",{class:"py-2 px-3 text-left font-bold"},"Outlet"),t("th",{class:"py-2 px-3 text-left font-bold"},"Task Number"),t("th",{class:"py-2 px-3 text-left font-bold"},"Title Task"),t("th",{class:"py-2 px-3 text-left font-bold"},"Created By"),t("th",{class:"py-2 px-3 text-left font-bold"},"Tanggal"),t("th",{class:"py-2 px-3 text-right font-bold"},"Total Amount"),t("th",{class:"py-2 px-3 text-center font-bold"},"Action")])],-1)),t("tbody",null,[(d(!0),i(y,null,_(C.value,s=>(d(),i("tr",{key:s.id,class:"hover:bg-blue-50 transition"},[t("td",Ne,o(s.nama_toko),1),t("td",Fe,o(s.alamat_toko||"-"),1),t("td",Me,o(s.nama_outlet||"-"),1),t("td",Ie,o(s.task_number||"-"),1),t("td",Ee,o(s.title||"-"),1),t("td",Ve,o(s.created_by||"-"),1),t("td",Ge,o(s.created_at?s.created_at.substring(0,10):"-"),1),t("td",qe,o(L(s.total_amount)),1),t("td",ze,[t("button",{class:"p-2 rounded hover:bg-blue-100 transition",onClick:u=>mt(s)},e[25]||(e[25]=[t("i",{class:"fas fa-eye text-blue-600"},null,-1)]),8,Ke)])]))),128))])])]))]),t("div",We,[t("div",Ye,[t("div",{class:"flex justify-between items-center mb-2"},[e[27]||(e[27]=t("h2",{class:"text-base font-semibold"},"Aktivitas Terbaru",-1)),t("button",{class:"text-xs text-blue-500",onClick:bt},"Lihat Semua")]),c.value.length===0?(d(),i("div",He,"Tidak ada aktivitas")):(d(),i("div",Je,[(d(!0),i(y,null,_(c.value,s=>(d(),i("div",{key:s.id,class:"flex items-start gap-3 mb-4"},[t("div",Qe,o(s.user_initials),1),t("div",null,[t("div",Ue,[It(o(s.user_name)+" ",1),t("span",Xe,o(s.type),1)]),t("div",Ze,o(s.description),1),t("div",ts,o(s.time_ago),1)])]))),128))]))]),t("div",null,[n(gt,{tasks:F.value},null,8,["tasks"])])]),n(Ct,{show:g.value,onClose:e[1]||(e[1]=s=>g.value=!1)},null,8,["show"]),n(St,{po:k.value,show:m.value,onClose:e[2]||(e[2]=s=>m.value=!1)},null,8,["po","show"]),n(Rt,{show:p.value,onClose:e[3]||(e[3]=s=>p.value=!1),onOpenDetail:it},null,8,["show"]),n(Ot,{show:b.value,onClose:e[4]||(e[4]=s=>b.value=!1),onOpenDetail:ut},null,8,["show"]),n($t,{pr:T.value,show:f.value,onClose:e[5]||(e[5]=s=>f.value=!1)},null,8,["pr","show"]),n(Lt,{show:x.value,onClose:e[6]||(e[6]=s=>x.value=!1),onOpenDetail:pt},null,8,["show"]),n(jt,{retail:P.value,show:h.value,onClose:e[7]||(e[7]=s=>h.value=!1)},null,8,["retail","show"]),n(Bt,{show:A.value,onClose:e[8]||(e[8]=s=>A.value=!1)},null,8,["show"])]))}},Ns=_t(es,[["__scopeId","data-v-8901ef11"]]);export{Ns as default};
