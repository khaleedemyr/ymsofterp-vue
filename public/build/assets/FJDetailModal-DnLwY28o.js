import{a as f}from"./vendor-utils-CpgP2uT4.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as _,w as E,c as R,L as a,E as u,B as r,D as t,G as p,N as o,F as m,M as b}from"./vendor-vue-g7iCcTkf.js";const q={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60"},I={class:"bg-gradient-to-br from-yellow-200 via-white to-yellow-100 rounded-3xl shadow-2xl p-8 min-w-[350px] max-w-4xl w-full relative animate-fade-in-3d"},M={class:"text-xl font-bold mb-4 text-yellow-800 flex items-center gap-2"},P={class:"mb-4 flex justify-end gap-2"},O=["disabled"],$=["disabled"],B={key:0,class:"text-center py-8 text-yellow-600"},N={key:1,class:"text-center py-8 text-gray-400"},A={key:2,class:"space-y-6 max-h-[60vh] overflow-y-auto"},Q={key:0,class:"bg-white rounded-lg p-4 shadow-sm"},J={class:"overflow-x-auto"},V={class:"min-w-full text-sm"},K={class:"px-3 py-2"},z={class:"px-3 py-2"},G={class:"px-3 py-2"},H={class:"px-3 py-2 text-right"},W={class:"px-3 py-2 text-right"},X={class:"px-3 py-2 text-right font-semibold"},Y={key:1,class:"bg-white rounded-lg p-4 shadow-sm"},Z={class:"overflow-x-auto"},tt={class:"min-w-full text-sm"},et={class:"px-3 py-2"},st={class:"px-3 py-2"},ot={class:"px-3 py-2"},lt={class:"px-3 py-2 text-right"},at={class:"px-3 py-2 text-right"},rt={class:"px-3 py-2 text-right font-semibold"},nt={key:2,class:"bg-white rounded-lg p-4 shadow-sm"},it={class:"overflow-x-auto"},dt={class:"min-w-full text-sm"},ct={class:"px-3 py-2"},pt={class:"px-3 py-2"},xt={class:"px-3 py-2"},ut={class:"px-3 py-2 text-right"},yt={class:"px-3 py-2 text-right"},ht={class:"px-3 py-2 text-right font-semibold"},gt={key:3,class:"bg-white rounded-lg p-4 shadow-sm"},mt={class:"overflow-x-auto"},bt={class:"min-w-full text-sm"},ft={class:"px-3 py-2"},_t={class:"px-3 py-2"},vt={class:"px-3 py-2"},wt={class:"px-3 py-2 text-right"},kt={class:"px-3 py-2 text-right"},Dt={class:"px-3 py-2 text-right font-semibold"},Ct={key:4,class:"bg-white rounded-lg p-4 shadow-sm"},jt={class:"overflow-x-auto"},Ft={class:"min-w-full text-sm"},Lt={class:"px-3 py-2"},Ut={class:"px-3 py-2"},St={class:"px-3 py-2"},Tt={class:"px-3 py-2 text-right"},Et={class:"px-3 py-2 text-right"},Rt={class:"px-3 py-2 text-right font-semibold"},qt={key:3,class:"mt-6 bg-gray-50 p-4 rounded-lg"},It={class:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm"},Mt={class:"text-center"},Pt={class:"text-lg font-bold"},Ot={class:"text-center"},$t={class:"text-lg font-bold"},Bt={class:"text-center"},Nt={class:"text-lg font-bold"},At={class:"text-center"},Qt={class:"text-lg font-bold"},Jt={class:"text-center"},Vt={class:"text-lg font-bold"},Kt={class:"mt-4 pt-4 border-t border-gray-200 text-center"},zt={class:"text-2xl font-bold text-green-600"},Gt={__name:"FJDetailModal",props:{show:{type:Boolean,required:!0},customer:{type:String,required:!0},from:{type:String,required:!0},to:{type:String,required:!0}},emits:["close"],setup(v,{emit:Ht}){const n=v,w=_(""),x=_({}),h=_(!1);E(()=>n.show,async l=>{l&&n.customer&&(w.value=n.customer,await C())});async function C(){h.value=!0,x.value={};try{const{data:l}=await f.post("/api/report/fj-detail",{customer:n.customer,from:n.from,to:n.to});x.value=l}catch(l){console.error("Error fetching detail:",l),x.value={}}finally{h.value=!1}}async function j(){try{const l=await f.post("/api/report/fj-detail-excel",{customer:n.customer,from:n.from,to:n.to},{responseType:"blob"}),s=new Blob([l.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),e=window.URL.createObjectURL(s),d=document.createElement("a");d.href=e,d.download=`FJ_Detail_${n.customer}_${n.from}_${n.to}.xlsx`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(e)}catch(l){console.error("Error downloading Excel:",l),alert("Terjadi kesalahan saat download Excel")}}async function F(){try{const l=await f.post("/api/report/fj-detail-pdf",{customer:n.customer,from:n.from,to:n.to},{responseType:"blob"}),s=new Blob([l.data],{type:"application/pdf"}),e=window.URL.createObjectURL(s),d=document.createElement("a");d.href=e,d.download=`FJ_Detail_${n.customer}_${n.from}_${n.to}.pdf`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(e)}catch(l){console.error("Error downloading PDF:",l),alert("Terjadi kesalahan saat download PDF")}}const y=R(()=>{const l=L=>c(L).reduce((U,S)=>U+(Number(S.subtotal)||0),0),s=l("main_kitchen"),e=l("main_store"),d=l("chemical"),k=l("stationary"),D=l("marketing");return{main_kitchen:s,main_store:e,chemical:d,stationary:k,marketing:D,total:s+e+d+k+D}});function i(l){return l?"Rp "+Number(l).toLocaleString("id-ID"):"Rp 0"}function g(l){return l==null?"":Number(l).toLocaleString("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2})}function c(l){var e;const s=(e=x.value)==null?void 0:e[l];return s?Array.isArray(s.gr)?s.gr:Array.isArray(s)?s:Array.isArray(s.all)?s.all:[]:[]}return(l,s)=>v.show?(r(),a("div",q,[t("div",I,[t("button",{onClick:s[0]||(s[0]=e=>l.$emit("close")),class:"absolute top-3 right-4 text-2xl text-yellow-700 hover:text-red-500 font-bold"},"Ã—"),t("h2",M,[s[1]||(s[1]=t("i",{class:"fas fa-list-alt"},null,-1)),p(" Detail FJ: "+o(w.value),1)]),t("div",P,[t("button",{onClick:j,disabled:h.value||Object.keys(x.value).length===0,class:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-md font-semibold hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},s[2]||(s[2]=[t("i",{class:"fas fa-file-excel mr-2"},null,-1),p(" Download Excel ")]),8,O),t("button",{onClick:F,disabled:h.value||Object.keys(x.value).length===0,class:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-md font-semibold hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},s[3]||(s[3]=[t("i",{class:"fas fa-file-pdf mr-2"},null,-1),p(" Download PDF ")]),8,$)]),h.value?(r(),a("div",B,s[4]||(s[4]=[t("i",{class:"fa fa-spinner fa-spin mr-2"},null,-1),p("Loading... ")]))):Object.keys(x.value).length===0?(r(),a("div",N," Tidak ada data detail. ")):(r(),a("div",A,[c("main_kitchen").length>0?(r(),a("div",Q,[s[6]||(s[6]=t("h3",{class:"text-lg font-semibold text-blue-700 mb-3 flex items-center gap-2"},[t("i",{class:"fas fa-utensils"}),p(" Main Kitchen ")],-1)),t("div",J,[t("table",V,[s[5]||(s[5]=t("thead",null,[t("tr",{class:"bg-blue-50 text-blue-900"},[t("th",{class:"px-3 py-2 text-left"},"Item"),t("th",{class:"px-3 py-2 text-left"},"Category"),t("th",{class:"px-3 py-2 text-left"},"Unit"),t("th",{class:"px-3 py-2 text-right"},"Qty"),t("th",{class:"px-3 py-2 text-right"},"Price"),t("th",{class:"px-3 py-2 text-right"},"Total")])],-1)),t("tbody",null,[(r(!0),a(m,null,b(c("main_kitchen"),e=>(r(),a("tr",{key:e.item_name+(e.category||"")+(e.unit||""),class:"border-b last:border-b-0 hover:bg-gray-50"},[t("td",K,o(e.item_name),1),t("td",z,o(e.category),1),t("td",G,o(e.unit),1),t("td",H,o(g(e.received_qty)),1),t("td",W,o(i(e.price)),1),t("td",X,o(i(e.subtotal)),1)]))),128))])])])])):u("",!0),c("main_store").length>0?(r(),a("div",Y,[s[8]||(s[8]=t("h3",{class:"text-lg font-semibold text-green-700 mb-3 flex items-center gap-2"},[t("i",{class:"fas fa-store"}),p(" Main Store ")],-1)),t("div",Z,[t("table",tt,[s[7]||(s[7]=t("thead",null,[t("tr",{class:"bg-green-50 text-green-900"},[t("th",{class:"px-3 py-2 text-left"},"Item"),t("th",{class:"px-3 py-2 text-left"},"Category"),t("th",{class:"px-3 py-2 text-left"},"Unit"),t("th",{class:"px-3 py-2 text-right"},"Qty"),t("th",{class:"px-3 py-2 text-right"},"Price"),t("th",{class:"px-3 py-2 text-right"},"Total")])],-1)),t("tbody",null,[(r(!0),a(m,null,b(c("main_store"),e=>(r(),a("tr",{key:e.item_name+(e.category||"")+(e.unit||""),class:"border-b last:border-b-0 hover:bg-gray-50"},[t("td",et,o(e.item_name),1),t("td",st,o(e.category),1),t("td",ot,o(e.unit),1),t("td",lt,o(g(e.received_qty)),1),t("td",at,o(i(e.price)),1),t("td",rt,o(i(e.subtotal)),1)]))),128))])])])])):u("",!0),c("chemical").length>0?(r(),a("div",nt,[s[10]||(s[10]=t("h3",{class:"text-lg font-semibold text-purple-700 mb-3 flex items-center gap-2"},[t("i",{class:"fas fa-flask"}),p(" Chemical ")],-1)),t("div",it,[t("table",dt,[s[9]||(s[9]=t("thead",null,[t("tr",{class:"bg-purple-50 text-purple-900"},[t("th",{class:"px-3 py-2 text-left"},"Item"),t("th",{class:"px-3 py-2 text-left"},"Category"),t("th",{class:"px-3 py-2 text-left"},"Unit"),t("th",{class:"px-3 py-2 text-right"},"Qty"),t("th",{class:"px-3 py-2 text-right"},"Price"),t("th",{class:"px-3 py-2 text-right"},"Total")])],-1)),t("tbody",null,[(r(!0),a(m,null,b(c("chemical"),e=>(r(),a("tr",{key:e.item_name+(e.category||"")+(e.unit||""),class:"border-b last:border-b-0 hover:bg-gray-50"},[t("td",ct,o(e.item_name),1),t("td",pt,o(e.category),1),t("td",xt,o(e.unit),1),t("td",ut,o(g(e.received_qty)),1),t("td",yt,o(i(e.price)),1),t("td",ht,o(i(e.subtotal)),1)]))),128))])])])])):u("",!0),c("stationary").length>0?(r(),a("div",gt,[s[12]||(s[12]=t("h3",{class:"text-lg font-semibold text-orange-700 mb-3 flex items-center gap-2"},[t("i",{class:"fas fa-pencil-alt"}),p(" Stationary ")],-1)),t("div",mt,[t("table",bt,[s[11]||(s[11]=t("thead",null,[t("tr",{class:"bg-orange-50 text-orange-900"},[t("th",{class:"px-3 py-2 text-left"},"Item"),t("th",{class:"px-3 py-2 text-left"},"Category"),t("th",{class:"px-3 py-2 text-left"},"Unit"),t("th",{class:"px-3 py-2 text-right"},"Qty"),t("th",{class:"px-3 py-2 text-right"},"Price"),t("th",{class:"px-3 py-2 text-right"},"Total")])],-1)),t("tbody",null,[(r(!0),a(m,null,b(c("stationary"),e=>(r(),a("tr",{key:e.item_name+(e.category||"")+(e.unit||""),class:"border-b last:border-b-0 hover:bg-gray-50"},[t("td",ft,o(e.item_name),1),t("td",_t,o(e.category),1),t("td",vt,o(e.unit),1),t("td",wt,o(g(e.received_qty)),1),t("td",kt,o(i(e.price)),1),t("td",Dt,o(i(e.subtotal)),1)]))),128))])])])])):u("",!0),c("marketing").length>0?(r(),a("div",Ct,[s[14]||(s[14]=t("h3",{class:"text-lg font-semibold text-pink-700 mb-3 flex items-center gap-2"},[t("i",{class:"fas fa-bullhorn"}),p(" Marketing ")],-1)),t("div",jt,[t("table",Ft,[s[13]||(s[13]=t("thead",null,[t("tr",{class:"bg-pink-50 text-pink-900"},[t("th",{class:"px-3 py-2 text-left"},"Item"),t("th",{class:"px-3 py-2 text-left"},"Category"),t("th",{class:"px-3 py-2 text-left"},"Unit"),t("th",{class:"px-3 py-2 text-right"},"Qty"),t("th",{class:"px-3 py-2 text-right"},"Price"),t("th",{class:"px-3 py-2 text-right"},"Total")])],-1)),t("tbody",null,[(r(!0),a(m,null,b(c("marketing"),e=>(r(),a("tr",{key:e.item_name+(e.category||"")+(e.unit||""),class:"border-b last:border-b-0 hover:bg-gray-50"},[t("td",Lt,o(e.item_name),1),t("td",Ut,o(e.category),1),t("td",St,o(e.unit),1),t("td",Tt,o(g(e.received_qty)),1),t("td",Et,o(i(e.price)),1),t("td",Rt,o(i(e.subtotal)),1)]))),128))])])])])):u("",!0)])),Object.keys(x.value).length>0?(r(),a("div",qt,[s[21]||(s[21]=t("h3",{class:"text-lg font-semibold mb-3 text-gray-800"},"Summary",-1)),t("div",It,[t("div",Mt,[s[15]||(s[15]=t("div",{class:"font-semibold text-blue-600"},"Main Kitchen",-1)),t("div",Pt,o(i(y.value.main_kitchen)),1)]),t("div",Ot,[s[16]||(s[16]=t("div",{class:"font-semibold text-green-600"},"Main Store",-1)),t("div",$t,o(i(y.value.main_store)),1)]),t("div",Bt,[s[17]||(s[17]=t("div",{class:"font-semibold text-purple-600"},"Chemical",-1)),t("div",Nt,o(i(y.value.chemical)),1)]),t("div",At,[s[18]||(s[18]=t("div",{class:"font-semibold text-orange-600"},"Stationary",-1)),t("div",Qt,o(i(y.value.stationary)),1)]),t("div",Jt,[s[19]||(s[19]=t("div",{class:"font-semibold text-pink-600"},"Marketing",-1)),t("div",Vt,o(i(y.value.marketing)),1)])]),t("div",Kt,[s[20]||(s[20]=t("div",{class:"font-semibold text-gray-800"},"Total",-1)),t("div",zt,o(i(y.value.total)),1)])])):u("",!0)])])):u("",!0)}},te=T(Gt,[["__scopeId","data-v-214f0ac0"]]);export{te as default};
