import{r as c,A as D,B as a,C as A,D as e,G as f,O as S,L as i,E as u,H as p,F as y,M as g,N as n,I as _,a6 as k,W as w}from"./vendor-vue-g7iCcTkf.js";import{S as B}from"./app-_bo91XrJ.js";import{A as V}from"./AppLayout-zPRaA07p.js";import{a as C}from"./vendor-utils-CpgP2uT4.js";import"./vendor-charts-CuqD4wLC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CKY7MlXM.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";const M={class:"max-w-4xl w-full mx-auto py-8 px-2"},L={class:"bg-white rounded-2xl shadow-lg p-6"},N={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},U=["value"],E={key:0,class:"text-red-500 text-xs mt-1"},F={class:"flex gap-4"},I={class:"flex items-center"},O={class:"flex items-center"},R={key:0,class:"text-red-500 text-xs mt-1"},W={class:"md:col-span-2"},q=["value"],G={key:0,class:"text-red-500 text-xs mt-1"},P={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},H={class:"flex gap-4 mt-8 pt-6 border-t border-gray-200"},T=["disabled"],$={key:0,class:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"},j={key:1,class:"fa-solid fa-play"},ae={__name:"Create",props:{outlets:Array,departments:Array},setup(v){const l=c({outlet_id:"",inspection_time:"lunch",department_id:""}),d=c(!1),o=c({});async function h(){var m,t,s,b;d.value=!0,o.value={};try{const r=await C.post("/daily-report",l.value);r.data.success&&(B.fire("Berhasil",r.data.message,"success"),w.visit(`/daily-report/${r.data.report_id}/inspect`))}catch(r){(t=(m=r.response)==null?void 0:m.data)!=null&&t.errors&&(o.value=r.response.data.errors),B.fire("Error",((b=(s=r.response)==null?void 0:s.data)==null?void 0:b.message)||"Gagal membuat daily report","error")}finally{d.value=!1}}function x(){w.visit("/daily-report")}return(m,t)=>(a(),D(V,{title:"Buat Daily Report"},{default:A(()=>[e("div",M,[e("div",{class:"flex items-center gap-4 mb-6"},[e("button",{onClick:x,class:"p-2 rounded-lg bg-gray-100 hover:bg-gray-200 transition"},t[4]||(t[4]=[e("i",{class:"fa-solid fa-arrow-left text-gray-600"},null,-1)])),t[5]||(t[5]=e("h1",{class:"text-2xl font-bold text-gray-800 flex items-center gap-2"},[e("i",{class:"fa-solid fa-plus-circle text-blue-500"}),f(" Buat Daily Report Baru ")],-1))]),e("div",L,[e("form",{onSubmit:S(h,["prevent"])},[e("div",N,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Outlet",-1)),p(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.value.outlet_id=s),class:"form-input rounded-xl",required:""},[t[6]||(t[6]=e("option",{value:""},"Pilih Outlet",-1)),(a(!0),i(y,null,g(v.outlets,s=>(a(),i("option",{key:s.id_outlet,value:s.id_outlet},n(s.nama_outlet),9,U))),128))],512),[[_,l.value.outlet_id]]),o.value.outlet_id?(a(),i("p",E,n(o.value.outlet_id[0]),1)):u("",!0)]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Waktu Inspection",-1)),e("div",F,[e("label",I,[p(e("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=s=>l.value.inspection_time=s),value:"lunch",class:"mr-2"},null,512),[[k,l.value.inspection_time]]),t[8]||(t[8]=e("span",null,"Lunch",-1))]),e("label",O,[p(e("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=s=>l.value.inspection_time=s),value:"dinner",class:"mr-2"},null,512),[[k,l.value.inspection_time]]),t[9]||(t[9]=e("span",null,"Dinner",-1))])]),o.value.inspection_time?(a(),i("p",R,n(o.value.inspection_time[0]),1)):u("",!0)]),e("div",W,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Department",-1)),p(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.department_id=s),class:"form-input rounded-xl",required:""},[t[11]||(t[11]=e("option",{value:""},"Pilih Department",-1)),(a(!0),i(y,null,g(v.departments,s=>(a(),i("option",{key:s.id,value:s.id},n(s.nama_departemen),9,q))),128))],512),[[_,l.value.department_id]]),o.value.department_id?(a(),i("p",G,n(o.value.department_id[0]),1)):u("",!0)])]),l.value.department_id?(a(),i("div",P,t[13]||(t[13]=[e("div",{class:"flex items-center gap-2"},[e("i",{class:"fa-solid fa-info-circle text-blue-500"}),e("span",{class:"text-sm font-medium text-blue-700"},"Semua Area Akan Di-inspect")],-1),e("p",{class:"text-xs text-blue-600 mt-1"}," Semua area di departemen yang dipilih akan otomatis dimasukkan ke dalam inspeksi. ",-1)]))):u("",!0),e("div",H,[e("button",{type:"button",onClick:x,class:"px-6 py-2 rounded-xl border border-gray-300 text-gray-700 hover:bg-gray-50 transition"}," Batal "),e("button",{type:"submit",disabled:d.value,class:"px-6 py-2 rounded-xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center gap-2"},[d.value?(a(),i("div",$)):(a(),i("i",j)),f(" "+n(d.value?"Membuat...":"Mulai Inspection"),1)],8,T)])],32)])])]),_:1}))}};export{ae as default};
