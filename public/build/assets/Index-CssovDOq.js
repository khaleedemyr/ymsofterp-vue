import{r as g,c as A,A as L,B as o,C as O,D as e,L as i,E as d,G as u,H as x,F as p,M as b,N as r,I as k,J as V,l as C,W as B}from"./vendor-vue-g7iCcTkf.js";import{A as E}from"./AppLayout-zPRaA07p.js";import{S as h}from"./app-_bo91XrJ.js";import"./vendor-utils-CpgP2uT4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ProfileUpdateModal-CKY7MlXM.js";import"./InputLabel-Bg0AMQZ3.js";import"./PrimaryButton-BbBAD9SX.js";import"./TextInput-B7P_xVe4.js";import"./vendor-charts-CuqD4wLC.js";const F={class:"w-full min-h-screen py-8 px-2 md:px-6"},H={class:"flex justify-between items-center mb-8"},N=["href"],z={class:"bg-white rounded-xl shadow-lg p-6 mb-6"},$={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},K=["value"],P={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},q={class:"p-6 pb-4"},G={class:"flex items-start justify-between mb-4"},W={class:"flex-1"},J={class:"text-lg font-bold text-gray-800 mb-1"},R={class:"text-sm text-gray-600"},Y={class:"px-6 pb-4"},Q={class:"space-y-3"},X={class:"flex items-center gap-3"},Z=["onClick"],ee=["src","alt"],te={key:1,class:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm font-bold border-2 border-white shadow-lg"},se={class:"flex-1"},le={class:"text-sm font-medium text-gray-900"},oe={class:"text-xs text-gray-500"},ie={class:"text-xs text-gray-500"},ae={class:"flex items-center gap-3"},re={class:"flex-1"},ne={class:"text-xs text-gray-500"},de={key:0,class:"flex items-center gap-3"},ue={class:"flex-1"},ce={class:"text-xs text-gray-500"},me={class:"px-6 py-4 bg-gray-50 border-t border-gray-100"},fe={class:"flex items-center justify-between"},ge={class:"flex gap-2"},xe=["href"],pe=["href"],be=["onClick"],he={key:0,class:"bg-white rounded-xl shadow-lg p-12 text-center"},ve=["href"],ye={key:1,class:"mt-8"},we={class:"bg-white rounded-xl shadow-lg p-6"},_e={class:"flex items-center justify-between"},ke={class:"flex-1 flex justify-between sm:hidden"},Ce=["href"],Be=["href"],Ie={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Se={class:"text-sm text-gray-700"},je={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},De=["href","innerHTML"],Me={class:"relative max-w-4xl max-h-full p-4"},Te=["src"],$e={__name:"Index",props:{inspections:Object},setup(a){const I=a,n=g({outlet_id:"",status:"",date:""}),c=g(!1),m=g(""),S=A(()=>{const l=new Map;return I.inspections.data.forEach(t=>{t.outlet&&l.set(t.outlet.id_outlet,t.outlet)}),Array.from(l.values())}),j=l=>new Date(l).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}),f=()=>{const l=new URLSearchParams;n.value.outlet_id&&l.append("outlet_id",n.value.outlet_id),n.value.status&&l.append("status",n.value.status),n.value.date&&l.append("date",n.value.date);const t=l.toString(),s=t?`${window.location.pathname}?${t}`:window.location.pathname;B.visit(s)},D=l=>{h.fire({title:"Konfirmasi Hapus",text:"Apakah Anda yakin ingin menghapus inspection ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"}).then(t=>{t.isConfirmed&&B.delete(route("dynamic-inspections.destroy",l),{onSuccess:()=>{h.fire({title:"Berhasil!",text:"Inspection berhasil dihapus!",icon:"success",timer:2e3,timerProgressBar:!0,showConfirmButton:!1})},onError:()=>{h.fire({title:"Error!",text:"Gagal menghapus inspection. Silakan coba lagi.",icon:"error",confirmButtonText:"OK"})}})})};function v(l){return`/storage/${l}`}function M(l){m.value=l,c.value=!0}function y(){c.value=!1,m.value=""}function T(l){const t=l.split(" ");return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():t[0][0].toUpperCase()}return(l,t)=>(o(),L(E,null,{default:O(()=>[e("div",F,[e("div",H,[t[4]||(t[4]=e("h1",{class:"text-3xl font-bold text-blue-800 flex items-center gap-3"},[e("i",{class:"fa-solid fa-clipboard-check text-blue-500"}),u(" Outlet/HO Inspection ")],-1)),e("a",{href:l.route("dynamic-inspections.create"),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition flex items-center gap-2"},t[3]||(t[3]=[e("i",{class:"fa-solid fa-plus"},null,-1),u(" Buat Inspection Baru ")]),8,N)]),e("div",z,[e("div",$,[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Filter Outlet",-1)),x(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.value.outlet_id=s),onChange:f,class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[t[5]||(t[5]=e("option",{value:""},"Semua Outlet",-1)),(o(!0),i(p,null,b(S.value,s=>(o(),i("option",{key:s.id_outlet,value:s.id_outlet},r(s.nama_outlet),9,K))),128))],544),[[k,n.value.outlet_id]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Filter Status",-1)),x(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>n.value.status=s),onChange:f,class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},t[7]||(t[7]=[e("option",{value:""},"Semua Status",-1),e("option",{value:"draft"},"Draft",-1),e("option",{value:"completed"},"Completed",-1)]),544),[[k,n.value.status]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Filter Tanggal",-1)),x(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>n.value.date=s),onChange:f,type:"date",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[V,n.value.date]])])])]),e("div",P,[(o(!0),i(p,null,b(a.inspections.data,s=>{var w,_;return o(),i("div",{key:s.id,class:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100"},[e("div",q,[e("div",G,[e("div",W,[e("h3",J,r(s.inspection_number),1),e("p",R,r(((w=s.outlet)==null?void 0:w.nama_outlet)||"N/A"),1)]),e("span",{class:C(["px-3 py-1 rounded-full text-xs font-semibold",s.status==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},r(s.status==="completed"?"Completed":"Draft"),3)])]),e("div",Y,[e("div",Q,[e("div",X,[(_=s.creator)!=null&&_.avatar?(o(),i("div",{key:0,class:"w-12 h-12 rounded-full overflow-hidden border-2 border-white shadow-lg cursor-pointer hover:shadow-xl transition-all",onClick:U=>M(v(s.creator.avatar))},[e("img",{src:v(s.creator.avatar),alt:s.pic_name,class:"w-full h-full object-cover hover:scale-105 transition-transform"},null,8,ee)],8,Z)):(o(),i("div",te,r(T(s.pic_name||"U")),1)),e("div",se,[e("p",le,r(s.pic_name),1),e("p",oe,r(s.pic_position),1),e("p",ie,r(s.pic_division),1)])]),e("div",ae,[t[11]||(t[11]=e("div",{class:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center"},[e("i",{class:"fa-solid fa-calendar text-green-600"})],-1)),e("div",re,[t[10]||(t[10]=e("p",{class:"text-sm font-medium text-gray-900"},"Inspection Date",-1)),e("p",ne,r(j(s.inspection_date)),1)])]),s.outlet_leader?(o(),i("div",de,[t[13]||(t[13]=e("div",{class:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center"},[e("i",{class:"fa-solid fa-user-tie text-purple-600"})],-1)),e("div",ue,[t[12]||(t[12]=e("p",{class:"text-sm font-medium text-gray-900"},"Outlet Leader",-1)),e("p",ce,r(s.outlet_leader),1)])])):d("",!0)])]),e("div",me,[e("div",fe,[e("div",ge,[e("a",{href:l.route("dynamic-inspections.show",s.id),class:"inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",title:"View Details"},t[14]||(t[14]=[e("i",{class:"fa-solid fa-eye"},null,-1),u(" View ")]),8,xe),e("a",{href:l.route("dynamic-inspections.edit",s.id),class:"inline-flex items-center gap-2 px-3 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",title:"Edit"},t[15]||(t[15]=[e("i",{class:"fa-solid fa-edit"},null,-1),u(" Edit ")]),8,pe)]),e("button",{onClick:U=>D(s.id),class:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",title:"Delete"},t[16]||(t[16]=[e("i",{class:"fa-solid fa-trash"},null,-1)]),8,be)])])])}),128))]),a.inspections.data.length===0?(o(),i("div",he,[t[18]||(t[18]=e("div",{class:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},[e("i",{class:"fa-solid fa-clipboard-list text-gray-400 text-2xl"})],-1)),t[19]||(t[19]=e("h3",{class:"text-lg font-medium text-gray-600 mb-2"},"Tidak ada Dynamic Inspection",-1)),t[20]||(t[20]=e("p",{class:"text-gray-500 mb-6"},"Belum ada inspection yang dibuat. Klik tombol di atas untuk membuat inspection baru.",-1)),e("a",{href:l.route("dynamic-inspections.create"),class:"inline-flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"},t[17]||(t[17]=[e("i",{class:"fa-solid fa-plus"},null,-1),u(" Buat Inspection Baru ")]),8,ve)])):d("",!0),a.inspections.links&&a.inspections.data.length>0?(o(),i("div",ye,[e("div",we,[e("div",_e,[e("div",ke,[a.inspections.prev_page_url?(o(),i("a",{key:0,href:a.inspections.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Previous ",8,Ce)):d("",!0),a.inspections.next_page_url?(o(),i("a",{key:1,href:a.inspections.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Next ",8,Be)):d("",!0)]),e("div",Ie,[e("div",null,[e("p",Se," Showing "+r(a.inspections.from)+" to "+r(a.inspections.to)+" of "+r(a.inspections.total)+" results ",1)]),e("div",null,[e("nav",je,[(o(!0),i(p,null,b(a.inspections.links,s=>(o(),i("a",{key:s.label,href:s.url,innerHTML:s.label,class:C(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s.active?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"])},null,10,De))),128))])])])])])])):d("",!0),c.value?(o(),i("div",{key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",onClick:y},[e("div",Me,[e("button",{onClick:y,class:"absolute -top-4 -right-4 bg-white rounded-full p-2 shadow-lg hover:bg-gray-100 transition-colors z-10"},t[21]||(t[21]=[e("i",{class:"fa-solid fa-times text-gray-600"},null,-1)])),e("img",{src:m.value,alt:"Avatar preview",class:"max-w-full max-h-full object-contain rounded-lg shadow-2xl"},null,8,Te)])])):d("",!0)])]),_:1}))}};export{$e as default};
